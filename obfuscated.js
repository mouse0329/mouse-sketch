const a0_0x5049d9=a0_0xce2f;(function(_0x4c6402,_0x2121f0){const _0x54a8c1=a0_0xce2f,_0x3e4b48=_0x4c6402();while(!![]){try{const _0x282d05=parseInt(_0x54a8c1(0x17d))/0x1*(-parseInt(_0x54a8c1(0x227))/0x2)+parseInt(_0x54a8c1(0xff))/0x3*(-parseInt(_0x54a8c1(0xef))/0x4)+parseInt(_0x54a8c1(0x21d))/0x5+parseInt(_0x54a8c1(0x128))/0x6*(parseInt(_0x54a8c1(0xeb))/0x7)+-parseInt(_0x54a8c1(0x12f))/0x8+-parseInt(_0x54a8c1(0x209))/0x9*(-parseInt(_0x54a8c1(0x1b9))/0xa)+-parseInt(_0x54a8c1(0x204))/0xb;if(_0x282d05===_0x2121f0)break;else _0x3e4b48['push'](_0x3e4b48['shift']());}catch(_0x497eb6){_0x3e4b48['push'](_0x3e4b48['shift']());}}}(a0_0x243d,0x97cd8));const a0_0x38aafa=a0_0x1925;(function(_0x108b68,_0x5563d7){const _0x19415e=a0_0xce2f,_0x37c4ce=a0_0x1925,_0x23ffba=_0x108b68();while(!![]){try{const _0x2464b8=parseInt(_0x37c4ce(0x26d))/0x1*(parseInt(_0x37c4ce(0x20a))/0x2)+-parseInt(_0x37c4ce(0x24d))/0x3+-parseInt(_0x37c4ce(0x284))/0x4+parseInt(_0x37c4ce(0x1cb))/0x5+-parseInt(_0x37c4ce(0x1e9))/0x6+-parseInt(_0x37c4ce(0x2b9))/0x7*(parseInt(_0x37c4ce(0x26e))/0x8)+parseInt(_0x37c4ce(0x28d))/0x9*(parseInt(_0x37c4ce(0x271))/0xa);if(_0x2464b8===_0x5563d7)break;else _0x23ffba[_0x19415e(0x19e)](_0x23ffba['shift']());}catch(_0x8df4d0){_0x23ffba[_0x19415e(0x19e)](_0x23ffba[_0x19415e(0x1f9)]());}}}(a0_0x5ad1,0x65d10));const a0_0x53f6c7=(function(){const _0x2112e4=(function(){let _0x2b8a0e=!![];return function(_0x196b97,_0xf25971){const _0x41d217=_0x2b8a0e?function(){const _0x464f67=a0_0xce2f;if(_0xf25971){const _0x339e30=_0xf25971[_0x464f67(0x106)](_0x196b97,arguments);return _0xf25971=null,_0x339e30;}}:function(){};return _0x2b8a0e=![],_0x41d217;};}()),_0x4cc248=_0x2112e4(this,function(){const _0x204cb7=a0_0xce2f;return _0x4cc248['toString']()['search'](_0x204cb7(0xe4))[_0x204cb7(0x163)]()[_0x204cb7(0x1b4)](_0x4cc248)[_0x204cb7(0x153)](_0x204cb7(0xe4));});_0x4cc248();let _0xc03840=!![];return function(_0x276ff7,_0x1f70a8){const _0x5562f4=_0xc03840?function(){const _0x57edac=a0_0x1925;if(_0x1f70a8){const _0xf4da4e=_0x1f70a8[_0x57edac(0x2b0)](_0x276ff7,arguments);return _0x1f70a8=null,_0xf4da4e;}}:function(){};return _0xc03840=![],_0x5562f4;};}()),a0_0x5506da=a0_0x53f6c7(this,function(){const _0x5934ba=a0_0xce2f,_0x1fe95d=a0_0x1925;return a0_0x5506da[_0x1fe95d(0x279)]()[_0x1fe95d(0x1ac)](_0x1fe95d(0x197))[_0x5934ba(0x163)]()[_0x1fe95d(0x28c)](a0_0x5506da)[_0x1fe95d(0x1ac)]('(((.+)+)+)+$');});a0_0x5506da();let canvas=document[a0_0x38aafa(0x275)](a0_0x5049d9(0x20f)),ctx=canvas[a0_0x38aafa(0x2c6)]('2d');const wrapper=document[a0_0x38aafa(0x275)](a0_0x38aafa(0x1cf));let cellSize=0x14,currentColor=a0_0x38aafa(0x265),currentTool=a0_0x38aafa(0x182),penSize=0x1,penMode=a0_0x38aafa(0x2e2),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x310bad=0x10,_0x308362=0x10,_0x4b5fc8=''){const _0xbf7906=a0_0x5049d9,_0x2476ca=a0_0x38aafa;let _0x13619e=0x14,_0x4a9bee=[],_0x47869b=[],_0x2330f7=[],_0x395c7c=document[_0x2476ca(0x1d6)](_0x2476ca(0x19d));_0x395c7c[_0x2476ca(0x1b8)]=_0x310bad*_0x13619e,_0x395c7c[_0x2476ca(0x27c)]=_0x308362*_0x13619e,_0x4a9bee[_0x2476ca(0x278)](_0x395c7c),_0x47869b[_0x2476ca(0x278)]([]),_0x2330f7[_0x2476ca(0x278)]([]);let _0x147e46={'layers':_0x4a9bee,'activeLayer':0x0,'layerHistories':_0x47869b,'layerRedoStacks':_0x2330f7};return{'frames':[_0x147e46],'activeFrame':0x0,'width':_0x310bad,'height':_0x308362,'name':_0x4b5fc8||'ÁîªÂÉè'+(projects[_0xbf7906(0xf5)]+0x1)};}function updateProjectUI(){const _0x371220=a0_0x5049d9,_0x381f82=a0_0x38aafa,_0x400256=document[_0x381f82(0x275)](_0x381f82(0x228));_0x400256[_0x381f82(0x25f)]='';for(let _0x8f2921=0x0;_0x8f2921<projects[_0x381f82(0x1c4)];_0x8f2921++){const _0x4b374a=document[_0x371220(0x1f6)]('div');_0x4b374a[_0x381f82(0x252)]=_0x381f82(0x2bc)+(_0x8f2921===activeProject?_0x381f82(0x1e4):''),_0x4b374a[_0x381f82(0x234)]=()=>{activeProject=_0x8f2921,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x52da82=document[_0x371220(0x1f6)](_0x381f82(0x28e));_0x52da82[_0x381f82(0x252)]=_0x381f82(0x1d4),_0x52da82[_0x381f82(0x221)]=projects[_0x8f2921][_0x381f82(0x2e6)]||'ÁîªÂÉè'+(_0x8f2921+0x1),_0x52da82[_0x381f82(0x198)]=_0x371220(0x210),_0x52da82['onclick']=_0x1305f4=>{const _0x277b5a=_0x381f82;_0x1305f4[_0x277b5a(0x214)](),editProjectName(_0x8f2921,_0x52da82);},_0x4b374a[_0x381f82(0x237)](_0x52da82);const _0x5979e3=document[_0x381f82(0x1d6)](_0x381f82(0x2a4));_0x5979e3[_0x381f82(0x221)]='ÂâäÈô§',_0x5979e3[_0x381f82(0x252)]=_0x381f82(0x27a),_0x5979e3[_0x371220(0x1d1)]=projects[_0x381f82(0x1c4)]===0x1,_0x5979e3[_0x381f82(0x234)]=_0x4f386f=>{const _0x139370=_0x381f82;_0x4f386f[_0x139370(0x214)](),removeProjectAt(_0x8f2921);},_0x4b374a[_0x371220(0x1c2)](_0x5979e3),_0x400256[_0x381f82(0x237)](_0x4b374a);}document[_0x381f82(0x275)](_0x381f82(0x1ed))['textContent']='('+projects[_0x381f82(0x1c4)]+'Êûö)';}function editProjectName(_0xa1e191,_0x69f872){const _0x1af25d=a0_0x5049d9,_0x556ebb=a0_0x38aafa,_0xe257fc=document[_0x556ebb(0x1d6)](_0x556ebb(0x295));_0xe257fc[_0x556ebb(0x17d)]=_0x556ebb(0x23e),_0xe257fc[_0x1af25d(0x12e)]=projects[_0xa1e191][_0x556ebb(0x2e6)]||'ÁîªÂÉè'+(_0xa1e191+0x1),_0xe257fc[_0x1af25d(0x15c)]=_0x556ebb(0x186),_0xe257fc[_0x1af25d(0x1bb)][_0x556ebb(0x1b8)]=_0x556ebb(0x29d),_0xe257fc[_0x556ebb(0x1f4)]=()=>{const _0x7826c0=_0x556ebb;projects[_0xa1e191][_0x7826c0(0x2e6)]=_0xe257fc[_0x7826c0(0x24e)][_0x7826c0(0x19b)]()||'ÁîªÂÉè'+(_0xa1e191+0x1),updateProjectUI();},_0xe257fc[_0x556ebb(0x2ca)]=_0xf603d3=>{const _0x379e20=_0x1af25d,_0x32554c=_0x556ebb;if(_0xf603d3[_0x379e20(0x181)]===_0x32554c(0x276))_0xe257fc[_0x32554c(0x1ef)]();},_0x69f872[_0x556ebb(0x2e8)](_0xe257fc),_0xe257fc[_0x556ebb(0x2be)](),_0xe257fc[_0x556ebb(0x1aa)]();}function showNewProjectDialog(_0x121348){const _0x46e672=a0_0x5049d9,_0x5c430d=a0_0x38aafa;let _0x425fcc=document[_0x5c430d(0x275)](_0x46e672(0x14f));if(_0x425fcc)_0x425fcc[_0x5c430d(0x187)]();const _0x1707d7=document[_0x5c430d(0x1d6)](_0x5c430d(0x2c9));_0x1707d7['id']=_0x5c430d(0x1db),_0x1707d7[_0x5c430d(0x1f8)][_0x5c430d(0x1f7)]=_0x5c430d(0x1e3),_0x1707d7[_0x5c430d(0x1f8)][_0x5c430d(0x2a7)]='0',_0x1707d7[_0x5c430d(0x1f8)][_0x46e672(0xf8)]='0',_0x1707d7['style'][_0x5c430d(0x1b8)]=_0x46e672(0x183),_0x1707d7['style'][_0x5c430d(0x27c)]=_0x5c430d(0x1f1),_0x1707d7[_0x5c430d(0x1f8)][_0x46e672(0x142)]=_0x5c430d(0x180),_0x1707d7[_0x5c430d(0x1f8)][_0x5c430d(0x2f0)]=_0x5c430d(0x20c),_0x1707d7[_0x5c430d(0x1f8)][_0x5c430d(0x19e)]=_0x5c430d(0x243),_0x1707d7[_0x5c430d(0x1f8)][_0x5c430d(0x1fd)]=_0x5c430d(0x243),_0x1707d7[_0x46e672(0x1bb)][_0x5c430d(0x24b)]=_0x5c430d(0x1c9),_0x1707d7[_0x5c430d(0x25f)]=_0x46e672(0x156)+(projects[_0x46e672(0xf5)]+0x1)+_0x46e672(0x21e),document[_0x46e672(0x1c5)][_0x5c430d(0x237)](_0x1707d7),_0x1707d7[_0x5c430d(0x2c0)](_0x5c430d(0x2e4))[_0x5c430d(0x234)]=()=>{const _0x56af8a=_0x46e672,_0x33c3e6=_0x5c430d,_0x270339=parseInt(_0x1707d7[_0x33c3e6(0x2c0)](_0x56af8a(0x129))[_0x33c3e6(0x24e)],0xa),_0x563492=parseInt(_0x1707d7[_0x33c3e6(0x2c0)](_0x33c3e6(0x1b0))[_0x56af8a(0x12e)],0xa),_0x4c2a46=_0x1707d7[_0x33c3e6(0x2c0)]('#newProjName')[_0x33c3e6(0x24e)][_0x33c3e6(0x19b)]();_0x1707d7[_0x33c3e6(0x187)]();if(_0x121348)_0x121348(_0x270339,_0x563492,_0x4c2a46);},_0x1707d7[_0x5c430d(0x2c0)](_0x5c430d(0x1f9))[_0x5c430d(0x234)]=()=>{const _0x377fe7=_0x46e672;_0x1707d7[_0x377fe7(0x1e9)]();};}function addProject(){showNewProjectDialog((_0x5710f9,_0x35ede9,_0x41dec6)=>{const _0x2759cf=a0_0xce2f,_0x3de4af=a0_0x1925;if(!Number[_0x3de4af(0x28b)](_0x5710f9)||_0x5710f9<0x1)_0x5710f9=0x10;if(!Number[_0x3de4af(0x28b)](_0x35ede9)||_0x35ede9<0x1)_0x35ede9=0x10;projects[_0x3de4af(0x278)](createProject(_0x5710f9,_0x35ede9,_0x41dec6)),activeProject=projects[_0x2759cf(0xf5)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0xfdc28b){const _0x126d72=a0_0x38aafa;if(projects[_0x126d72(0x1c4)]<=0x1)return;projects[_0x126d72(0x2b7)](_0xfdc28b,0x1);if(activeProject>=projects[_0x126d72(0x1c4)])activeProject=projects[_0x126d72(0x1c4)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x572250=a0_0x5049d9,_0x2f4483=a0_0x38aafa,_0x5d954e=document['getElementById'](_0x2f4483(0x1c6)),_0x180409=getCurrentProject();_0x5d954e['innerHTML']='';for(let _0x24c173=0x0;_0x24c173<_0x180409[_0x572250(0x17f)]['length'];_0x24c173++){const _0x375a8c=document[_0x2f4483(0x1d6)](_0x2f4483(0x2c9));_0x375a8c[_0x2f4483(0x252)]=_0x2f4483(0x254)+(_0x24c173===_0x180409[_0x2f4483(0x2a5)]?_0x2f4483(0x1e4):''),_0x375a8c[_0x2f4483(0x234)]=()=>{const _0x4dbe67=_0x2f4483;_0x180409[_0x4dbe67(0x2a5)]=_0x24c173,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x3cbea5=document[_0x572250(0x1f6)](_0x2f4483(0x19d));_0x3cbea5[_0x2f4483(0x252)]=_0x2f4483(0x1da),_0x3cbea5[_0x2f4483(0x1b8)]=0x20,_0x3cbea5[_0x2f4483(0x27c)]=0x20;let _0x2fe91f=_0x3cbea5[_0x2f4483(0x2c6)]('2d');_0x2fe91f[_0x2f4483(0x22d)](0x0,0x0,0x20,0x20);for(let _0x5ec091=0x0;_0x5ec091<_0x180409[_0x572250(0x17f)][_0x24c173][_0x2f4483(0x262)]['length'];_0x5ec091++){_0x2fe91f[_0x2f4483(0x1ff)](_0x180409[_0x2f4483(0x2b3)][_0x24c173][_0x2f4483(0x262)][_0x5ec091],0x0,0x0,_0x3cbea5[_0x2f4483(0x1b8)],_0x3cbea5[_0x2f4483(0x27c)]);}_0x375a8c[_0x572250(0x1c2)](_0x3cbea5);const _0x298dfd=document[_0x572250(0x1f6)](_0x2f4483(0x28e));_0x298dfd[_0x2f4483(0x221)]='F'+(_0x24c173+0x1),_0x375a8c[_0x2f4483(0x237)](_0x298dfd);const _0x3decd2=document[_0x2f4483(0x1d6)]('button');_0x3decd2[_0x2f4483(0x221)]='ÂâäÈô§',_0x3decd2[_0x2f4483(0x252)]=_0x2f4483(0x286),_0x3decd2[_0x2f4483(0x256)]=_0x180409[_0x2f4483(0x2b3)][_0x2f4483(0x1c4)]===0x1,_0x3decd2[_0x2f4483(0x234)]=_0x50b4a4=>{const _0x3ba388=_0x2f4483;_0x50b4a4[_0x3ba388(0x214)](),removeFrameAt(_0x24c173);},_0x375a8c[_0x2f4483(0x237)](_0x3decd2),_0x5d954e[_0x2f4483(0x237)](_0x375a8c);}document[_0x2f4483(0x275)](_0x2f4483(0x240))[_0x572250(0x154)]='('+_0x180409[_0x2f4483(0x2b3)][_0x2f4483(0x1c4)]+_0x2f4483(0x2c4);}function addFrame(){const _0x5b1348=a0_0x38aafa;let _0x357e97=getCurrentProject(),_0x13579f=_0x357e97[_0x5b1348(0x2b3)][_0x357e97[_0x5b1348(0x2a5)]],_0x344870=_0x13579f[_0x5b1348(0x262)][_0x5b1348(0x294)](_0x529e02=>{const _0x40286d=a0_0xce2f,_0x48309f=_0x5b1348;let _0x3ef0b4=document[_0x48309f(0x1d6)](_0x40286d(0x20f));return _0x3ef0b4[_0x48309f(0x1b8)]=_0x529e02[_0x48309f(0x1b8)],_0x3ef0b4[_0x48309f(0x27c)]=_0x529e02[_0x48309f(0x27c)],_0x3ef0b4[_0x48309f(0x2c6)]('2d')[_0x48309f(0x1ff)](_0x529e02,0x0,0x0),_0x3ef0b4;}),_0x336893=_0x344870[_0x5b1348(0x294)](()=>[]),_0x1bc168=_0x344870[_0x5b1348(0x294)](()=>[]),_0x445949={'layers':_0x344870,'activeLayer':0x0,'layerHistories':_0x336893,'layerRedoStacks':_0x1bc168};_0x357e97[_0x5b1348(0x2b3)][_0x5b1348(0x2b7)](_0x357e97[_0x5b1348(0x2a5)]+0x1,0x0,_0x445949),_0x357e97['activeFrame']++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x446e5e){const _0x2ae4b1=a0_0x5049d9,_0x486173=a0_0x38aafa;let _0x58a8c7=getCurrentProject();if(_0x58a8c7['frames'][_0x486173(0x1c4)]<=0x1)return;_0x58a8c7[_0x2ae4b1(0x17f)][_0x2ae4b1(0xed)](_0x446e5e,0x1);if(_0x58a8c7[_0x486173(0x2a5)]>=_0x58a8c7['frames'][_0x486173(0x1c4)])_0x58a8c7[_0x2ae4b1(0x12c)]=_0x58a8c7[_0x486173(0x2b3)][_0x486173(0x1c4)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x54780f=a0_0x38aafa;return getCurrentProject()[_0x54780f(0x2b3)][getCurrentProject()[_0x54780f(0x2a5)]];}function updateLayerUI(){const _0x513461=a0_0x5049d9,_0x16d467=a0_0x38aafa;let {layers:_0x20829d,activeLayer:_0x53c575}=getCurrentFrame();document[_0x16d467(0x275)](_0x513461(0x118))[_0x16d467(0x221)]='('+_0x20829d[_0x513461(0xf5)]+'Êûö)';const _0x44c557=document[_0x16d467(0x275)](_0x16d467(0x23b));_0x44c557[_0x513461(0x1ea)]='';for(let _0x5aa7b6=_0x20829d[_0x16d467(0x1c4)]-0x1;_0x5aa7b6>=0x0;_0x5aa7b6--){const _0x4e26d5=document[_0x16d467(0x1d6)](_0x513461(0x1f1));_0x4e26d5[_0x513461(0x15c)]=_0x16d467(0x2d7)+(_0x5aa7b6===_0x53c575?_0x16d467(0x1e4):''),_0x4e26d5[_0x513461(0x19d)]=_0x2f7a7e=>{const _0x1c2912=_0x16d467;if(_0x2f7a7e[_0x1c2912(0x2e5)][_0x1c2912(0x22b)]['contains'](_0x1c2912(0x20e)))return;getCurrentFrame()[_0x1c2912(0x1b5)]=_0x5aa7b6,updateLayerUI(),redrawAll();};const _0xcf91c7=document['createElement'](_0x16d467(0x19d));_0xcf91c7[_0x16d467(0x252)]=_0x16d467(0x1f2),_0xcf91c7[_0x16d467(0x1b8)]=0x20,_0xcf91c7[_0x16d467(0x27c)]=0x20;let _0x229ab3=_0xcf91c7[_0x16d467(0x2c6)]('2d');_0x229ab3[_0x513461(0x172)](0x0,0x0,0x20,0x20),_0x229ab3[_0x16d467(0x1ff)](_0x20829d[_0x5aa7b6],0x0,0x0,_0xcf91c7[_0x16d467(0x1b8)],_0xcf91c7[_0x16d467(0x27c)]),_0x4e26d5[_0x16d467(0x237)](_0xcf91c7);const _0x511449=document[_0x513461(0x1f6)](_0x16d467(0x28e));_0x511449[_0x16d467(0x221)]=_0x16d467(0x2d6)+(_0x5aa7b6+0x1),_0x4e26d5[_0x16d467(0x237)](_0x511449);const _0x595977=document[_0x16d467(0x1d6)](_0x16d467(0x2a4));_0x595977[_0x16d467(0x221)]='‚Üë',_0x595977[_0x16d467(0x252)]=_0x16d467(0x20e),_0x595977[_0x513461(0x124)]=_0x513461(0x101),_0x595977[_0x16d467(0x256)]=_0x5aa7b6===_0x20829d[_0x16d467(0x1c4)]-0x1,_0x595977[_0x16d467(0x234)]=_0x1153f2=>{const _0x581d64=_0x16d467;_0x1153f2['stopPropagation'](),_0x5aa7b6<_0x20829d[_0x581d64(0x1c4)]-0x1&&swapLayer(_0x5aa7b6,_0x5aa7b6+0x1);},_0x4e26d5[_0x16d467(0x237)](_0x595977);const _0x1bf0ab=document[_0x513461(0x1f6)](_0x513461(0x1bf));_0x1bf0ab[_0x513461(0x154)]='‚Üì',_0x1bf0ab[_0x513461(0x15c)]=_0x16d467(0x20e),_0x1bf0ab['title']=_0x513461(0x186),_0x1bf0ab[_0x16d467(0x256)]=_0x5aa7b6===0x0,_0x1bf0ab[_0x513461(0x19d)]=_0x614b6b=>{const _0x5310f9=_0x16d467;_0x614b6b[_0x5310f9(0x214)](),_0x5aa7b6>0x0&&swapLayer(_0x5aa7b6,_0x5aa7b6-0x1);},_0x4e26d5[_0x16d467(0x237)](_0x1bf0ab);const _0xeafb77=document[_0x16d467(0x1d6)](_0x16d467(0x2a4));_0xeafb77[_0x16d467(0x221)]='ÂâäÈô§',_0xeafb77[_0x16d467(0x252)]=_0x16d467(0x20e),_0xeafb77[_0x16d467(0x198)]=_0x513461(0xdf),_0xeafb77[_0x16d467(0x256)]=_0x20829d[_0x16d467(0x1c4)]===0x1,_0xeafb77[_0x16d467(0x234)]=_0x5eb2c6=>{const _0x14742b=_0x16d467;_0x5eb2c6[_0x14742b(0x214)](),removeLayerAt(_0x5aa7b6);},_0x4e26d5[_0x16d467(0x237)](_0xeafb77),_0x44c557[_0x16d467(0x237)](_0x4e26d5);}}function swapLayer(_0x58fcbb,_0x371582){const _0x3beaa1=a0_0x5049d9,_0x4affe0=a0_0x38aafa;let _0x1494d9=getCurrentFrame();[_0x1494d9[_0x4affe0(0x262)][_0x58fcbb],_0x1494d9[_0x4affe0(0x262)][_0x371582]]=[_0x1494d9[_0x4affe0(0x262)][_0x371582],_0x1494d9[_0x4affe0(0x262)][_0x58fcbb]],[_0x1494d9[_0x4affe0(0x29c)][_0x58fcbb],_0x1494d9[_0x3beaa1(0x195)][_0x371582]]=[_0x1494d9[_0x4affe0(0x29c)][_0x371582],_0x1494d9[_0x3beaa1(0x195)][_0x58fcbb]],[_0x1494d9[_0x4affe0(0x2d0)][_0x58fcbb],_0x1494d9[_0x4affe0(0x2d0)][_0x371582]]=[_0x1494d9[_0x4affe0(0x2d0)][_0x371582],_0x1494d9[_0x4affe0(0x2d0)][_0x58fcbb]];if(_0x1494d9[_0x4affe0(0x1b5)]===_0x58fcbb)_0x1494d9[_0x4affe0(0x1b5)]=_0x371582;else{if(_0x1494d9[_0x3beaa1(0x215)]===_0x371582)_0x1494d9[_0x4affe0(0x1b5)]=_0x58fcbb;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x41452e){const _0x323e8f=a0_0x5049d9,_0x2a0305=a0_0x38aafa;let _0x4f7870=getCurrentFrame();if(_0x4f7870[_0x2a0305(0x262)][_0x2a0305(0x1c4)]<=0x1)return;_0x4f7870[_0x2a0305(0x262)][_0x2a0305(0x2b7)](_0x41452e,0x1),_0x4f7870[_0x2a0305(0x29c)][_0x2a0305(0x2b7)](_0x41452e,0x1),_0x4f7870[_0x323e8f(0x179)][_0x323e8f(0xed)](_0x41452e,0x1);if(_0x4f7870[_0x2a0305(0x1b5)]>=_0x4f7870[_0x2a0305(0x262)][_0x2a0305(0x1c4)])_0x4f7870[_0x323e8f(0x215)]=_0x4f7870[_0x2a0305(0x262)][_0x2a0305(0x1c4)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x2f4dd7=a0_0x5049d9,_0x578396=a0_0x38aafa;let _0x26f8e9=getCurrentProject(),_0x555315=getCurrentFrame(),_0x430656=document[_0x578396(0x1d6)](_0x578396(0x19d));_0x430656[_0x2f4dd7(0x190)]=_0x26f8e9[_0x2f4dd7(0x190)]*cellSize,_0x430656[_0x578396(0x27c)]=_0x26f8e9[_0x2f4dd7(0x13b)]*cellSize,_0x555315[_0x578396(0x262)][_0x578396(0x278)](_0x430656),_0x555315[_0x578396(0x29c)][_0x578396(0x278)]([]),_0x555315[_0x578396(0x2d0)][_0x2f4dd7(0x19e)]([]),_0x555315[_0x2f4dd7(0x215)]=_0x555315[_0x578396(0x262)][_0x2f4dd7(0xf5)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x326cf9=a0_0x5049d9,_0xd65c66=a0_0x38aafa;let _0x558036=getCurrentFrame();if(_0x558036[_0xd65c66(0x262)][_0xd65c66(0x1c4)]<=0x1)return;_0x558036[_0x326cf9(0x13d)][_0x326cf9(0xed)](_0x558036[_0xd65c66(0x1b5)],0x1),_0x558036[_0xd65c66(0x29c)][_0xd65c66(0x2b7)](_0x558036[_0xd65c66(0x1b5)],0x1),_0x558036[_0xd65c66(0x2d0)]['splice'](_0x558036[_0xd65c66(0x1b5)],0x1),_0x558036[_0xd65c66(0x1b5)]=Math[_0x326cf9(0x107)](0x0,_0x558036[_0xd65c66(0x1b5)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x4262cf){const _0x14c650=a0_0x38aafa;getCurrentFrame()[_0x14c650(0x1b5)]=parseInt(_0x4262cf),updateLayerUI();}let PALETTE_COLORS=[a0_0x38aafa(0x1f3),a0_0x38aafa(0x1ba),a0_0x38aafa(0x244),a0_0x38aafa(0x19a),a0_0x38aafa(0x281),a0_0x5049d9(0x1da),a0_0x38aafa(0x265),a0_0x38aafa(0x2c2),a0_0x38aafa(0x266),a0_0x5049d9(0x194),a0_0x38aafa(0x29a),a0_0x38aafa(0x296),a0_0x38aafa(0x291),a0_0x38aafa(0x1b9),a0_0x38aafa(0x1ee),a0_0x38aafa(0x202),a0_0x38aafa(0x26c),a0_0x38aafa(0x269),a0_0x38aafa(0x219),a0_0x5049d9(0x147),a0_0x38aafa(0x25b)],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){const _0x3fcc56=a0_0x5049d9,_0x147c24=a0_0x38aafa;let _0x1183d0=getCurrentProject();if(!_0x1183d0||!_0x1183d0[_0x3fcc56(0x17f)]||_0x1183d0[_0x147c24(0x2b3)][_0x147c24(0x1c4)]<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0x519ec9=_0x1183d0[_0x147c24(0x2b3)];animationTimer=setInterval(()=>{const _0x3b8697=_0x3fcc56,_0x5ae786=_0x147c24;ctx[_0x3b8697(0x172)](0x0,0x0,canvas[_0x5ae786(0x1b8)],canvas[_0x5ae786(0x27c)]);let _0x4407c1=_0x519ec9[animationIndex];for(let _0x19cde4=0x0;_0x19cde4<_0x4407c1[_0x5ae786(0x262)][_0x5ae786(0x1c4)];_0x19cde4++){ctx[_0x5ae786(0x1ff)](_0x4407c1[_0x3b8697(0x13d)][_0x19cde4],0x0,0x0);}drawGrid(_0x1183d0[_0x5ae786(0x1b8)],_0x1183d0[_0x5ae786(0x27c)]),animationIndex=(animationIndex+0x1)%_0x519ec9[_0x5ae786(0x1c4)];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function setAnimationDelay(_0x29ade0){const _0x45b02f=a0_0x38aafa;_0x29ade0=Math[_0x45b02f(0x2c3)](0xa,parseInt(_0x29ade0,0xa)||0x12c),animationDelay=_0x29ade0,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x103eca){const _0x16cc13=a0_0x5049d9,_0x419642=a0_0x38aafa;currentTool=_0x103eca,document[_0x419642(0x29b)](_0x419642(0x191))['forEach'](_0x50e73c=>{const _0x55a4b3=_0x419642;_0x50e73c['classList'][_0x55a4b3(0x29f)](_0x55a4b3(0x1a9),_0x50e73c[_0x55a4b3(0x2ba)][_0x55a4b3(0x1be)]===_0x103eca);}),document[_0x419642(0x29b)](_0x16cc13(0x16f))[_0x419642(0x1bd)](_0x505341=>{const _0x2e4600=_0x16cc13,_0x853d2d=_0x419642;_0x505341[_0x2e4600(0x176)][_0x853d2d(0x29f)](_0x853d2d(0x1a9),_0x505341[_0x853d2d(0x2ba)][_0x853d2d(0x1be)]===_0x103eca);}),_0x103eca===_0x419642(0x232)?canvas[_0x16cc13(0x1bb)][_0x16cc13(0x151)]=_0x419642(0x231):canvas[_0x419642(0x1f8)][_0x419642(0x2bd)]=_0x16cc13(0x10c);}function setPenSize(_0x14e191){const _0x134826=a0_0x5049d9,_0x59d64d=a0_0x38aafa;penSize=parseInt(_0x14e191)||0x1;let _0x328994=document[_0x134826(0x192)](_0x59d64d(0x1c3));if(_0x328994)_0x328994[_0x59d64d(0x24e)]=penSize;let _0x3a4053=document[_0x59d64d(0x275)](_0x59d64d(0x250));if(_0x3a4053)_0x3a4053[_0x59d64d(0x24e)]=penSize;}function setPenMode(_0x62c165){const _0x1b7279=a0_0x38aafa;penMode=_0x62c165;let _0x74fbae=document[_0x1b7279(0x275)](_0x1b7279(0x23a));if(_0x74fbae)_0x74fbae[_0x1b7279(0x24e)]=penMode;let _0x5408e3=document[_0x1b7279(0x275)](_0x1b7279(0x1a1));if(_0x5408e3)_0x5408e3[_0x1b7279(0x24e)]=penMode;}function a0_0x5ad1(){const _0x2e4daa=a0_0x5049d9,_0x3ab144=[_0x2e4daa(0x1db),_0x2e4daa(0x16a),'splice',_0x2e4daa(0x125),_0x2e4daa(0x18c),'dataset',_0x2e4daa(0x165),_0x2e4daa(0x1f0),_0x2e4daa(0x151),_0x2e4daa(0x18a),_0x2e4daa(0x1d9),_0x2e4daa(0x126),_0x2e4daa(0x1b8),_0x2e4daa(0x19a),_0x2e4daa(0x107),_0x2e4daa(0x1a6),_0x2e4daa(0x181),_0x2e4daa(0x162),_0x2e4daa(0x191),'byteLength',_0x2e4daa(0x1f1),_0x2e4daa(0x17e),_0x2e4daa(0x178),'„Éë„É¨„ÉÉ„Éà„Å´Ëâ≤„ÇíËøΩÂä†',_0x2e4daa(0x17c),_0x2e4daa(0x226),'„Éï„É¨„Éº„É†„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',_0x2e4daa(0x179),_0x2e4daa(0x1c9),_0x2e4daa(0x21a),_0x2e4daa(0x1f7),_0x2e4daa(0xe1),_0x2e4daa(0x1e3),'„É¨„Ç§„É§„Éº',_0x2e4daa(0x170),_0x2e4daa(0x158),'stroke',_0x2e4daa(0x22e),_0x2e4daa(0xe8),_0x2e4daa(0x142),_0x2e4daa(0x123),_0x2e4daa(0x1c6),'restore',_0x2e4daa(0x1cd),_0x2e4daa(0x1c4),'square','close',_0x2e4daa(0x1f2),'target',_0x2e4daa(0x1c1),'„Åì„ÅÆËâ≤„Çí„Éë„É¨„ÉÉ„Éà„Åã„ÇâÂâäÈô§',_0x2e4daa(0x114),_0x2e4daa(0x11b),'circle',_0x2e4daa(0x237),_0x2e4daa(0x144),'click',_0x2e4daa(0x122),_0x2e4daa(0x148),'display','type','pointermove','then',_0x2e4daa(0x1b2),_0x2e4daa(0x1e8),_0x2e4daa(0x238),_0x2e4daa(0x180),_0x2e4daa(0x231),_0x2e4daa(0x11a),_0x2e4daa(0x1fd),'remove',_0x2e4daa(0x110),_0x2e4daa(0xfc),_0x2e4daa(0x1aa),_0x2e4daa(0x233),_0x2e4daa(0xf0),_0x2e4daa(0x22f),_0x2e4daa(0x224),_0x2e4daa(0xdb),_0x2e4daa(0x1af),_0x2e4daa(0x100),_0x2e4daa(0x219),_0x2e4daa(0x14c),'VideoEncoder',_0x2e4daa(0x20e),_0x2e4daa(0xf8),'(((.+)+)+)+$','title',_0x2e4daa(0x15e),'#888888','trim',_0x2e4daa(0x188),_0x2e4daa(0x20f),'alignItems',_0x2e4daa(0x160),_0x2e4daa(0x10e),_0x2e4daa(0x206),_0x2e4daa(0x14d),'startsWith','nezumi-theme',_0x2e4daa(0x1a9),'abs',_0x2e4daa(0xfe),_0x2e4daa(0x169),_0x2e4daa(0x19f),_0x2e4daa(0xdc),_0x2e4daa(0x173),'search','pathname','auto','boolean','#newProjH','none','min',_0x2e4daa(0x1ec),_0x2e4daa(0x1be),'activeLayer',_0x2e4daa(0x121),_0x2e4daa(0x14a),_0x2e4daa(0x190),_0x2e4daa(0xf2),_0x2e4daa(0x202),_0x2e4daa(0x1d8),_0x2e4daa(0x155),_0x2e4daa(0x10a),'tool','webp',_0x2e4daa(0x196),_0x2e4daa(0x236),'grabbing',_0x2e4daa(0xde),_0x2e4daa(0xf5),'onerror',_0x2e4daa(0x140),_0x2e4daa(0x22c),_0x2e4daa(0x1a4),_0x2e4daa(0x1d0),'color','458555ntXURF',_0x2e4daa(0x13a),'pointerdown',_0x2e4daa(0x187),_0x2e4daa(0x235),_0x2e4daa(0x208),_0x2e4daa(0x19c),_0x2e4daa(0x174),_0x2e4daa(0x1fb),_0x2e4daa(0x108),_0x2e4daa(0xe5),_0x2e4daa(0x1f6),'shift',_0x2e4daa(0x102),_0x2e4daa(0x211),_0x2e4daa(0x198),_0x2e4daa(0x14f),'removeChild','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22',_0x2e4daa(0x189),_0x2e4daa(0x1b5),_0x2e4daa(0xec),'touchend',_0x2e4daa(0x22a),_0x2e4daa(0x18e),_0x2e4daa(0x223),'stringify',_0x2e4daa(0x138),_0x2e4daa(0x1bc),_0x2e4daa(0x1c5),_0x2e4daa(0x234),_0x2e4daa(0x11e),_0x2e4daa(0xdd),'touchAction',_0x2e4daa(0x1c8),'#808000',_0x2e4daa(0x1c0),_0x2e4daa(0x117),_0x2e4daa(0x1ca),'layer-thumb',_0x2e4daa(0x1a5),_0x2e4daa(0x15d),_0x2e4daa(0x218),_0x2e4daa(0x10d),_0x2e4daa(0x185),'style',_0x2e4daa(0x229),_0x2e4daa(0xe0),'GIF„Å´Â§âÊèõ„Åß„Åç„ÇãÁîªÂÉè„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ',_0x2e4daa(0x1b7),_0x2e4daa(0x1ce),_0x2e4daa(0x1df),_0x2e4daa(0x230),'nezumi-drawing',_0x2e4daa(0x159),'#008000',_0x2e4daa(0x175),_0x2e4daa(0x1d6),_0x2e4daa(0x20d),_0x2e4daa(0x157),_0x2e4daa(0x1fa),_0x2e4daa(0x103),'flush',_0x2e4daa(0x1e7),_0x2e4daa(0x200),_0x2e4daa(0xfa),'globalCompositeOperation','layer-btn',_0x2e4daa(0x1d2),_0x2e4daa(0x12a),_0x2e4daa(0x141),_0x2e4daa(0x1fe),_0x2e4daa(0x1ef),_0x2e4daa(0x15a),_0x2e4daa(0x1de),_0x2e4daa(0x10b),_0x2e4daa(0x171),_0x2e4daa(0x1d7),_0x2e4daa(0x1e0),_0x2e4daa(0x207),_0x2e4daa(0x232),_0x2e4daa(0x14b),_0x2e4daa(0x1a3),_0x2e4daa(0x17a),_0x2e4daa(0x166),_0x2e4daa(0x16c),_0x2e4daa(0x154),_0x2e4daa(0x18b),_0x2e4daa(0x20b),_0x2e4daa(0xea),'undefined',_0x2e4daa(0x1f8),'#palette-alphaValue','projectList',_0x2e4daa(0x1ba),'innerWidth',_0x2e4daa(0x176),_0x2e4daa(0x1f4),_0x2e4daa(0x172),_0x2e4daa(0x16b),_0x2e4daa(0x1eb),'color-palette',_0x2e4daa(0x199),'pan','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>',_0x2e4daa(0x19d),'finished',_0x2e4daa(0x109),_0x2e4daa(0x1c2),_0x2e4daa(0x21f),_0x2e4daa(0x1e1),'penMode','layerList',_0x2e4daa(0x177),'activeProject','text',_0x2e4daa(0x1f5),_0x2e4daa(0x112),'#palette-alphaSlider',_0x2e4daa(0x1dd),_0x2e4daa(0x1ae),_0x2e4daa(0x17b),_0x2e4daa(0x16e),_0x2e4daa(0x1b6),'palette-alphaSlider',_0x2e4daa(0x1d4),_0x2e4daa(0x132),_0x2e4daa(0x116),_0x2e4daa(0x145),_0x2e4daa(0x19b),_0x2e4daa(0x22d),_0x2e4daa(0x12e),_0x2e4daa(0x1a7),_0x2e4daa(0x225),'resize','className',_0x2e4daa(0xf7),'frame-item',_0x2e4daa(0x134),_0x2e4daa(0x1d1),_0x2e4daa(0x20c),'\x0a---NEZUMI_METADATA_START---\x0a',_0x2e4daa(0x130),_0x2e4daa(0x1d5),_0x2e4daa(0x1e4),_0x2e4daa(0x143),_0x2e4daa(0x12b),_0x2e4daa(0x1e2),_0x2e4daa(0x1ea),'onsuccess','data',_0x2e4daa(0x13d),'nezumi-projects','„Éï„É¨„Éº„É†Èñì„ÅÆ‰ΩôÁôΩ(px)\x20„ÇíÊåáÂÆöÔºà‰æã:\x200Ôºâ','#ff0000',_0x2e4daa(0x13c),_0x2e4daa(0x164),'filter',_0x2e4daa(0x15f),_0x2e4daa(0x11d),_0x2e4daa(0xe6),'#008080',_0x2e4daa(0x212),_0x2e4daa(0x137),_0x2e4daa(0x167),_0x2e4daa(0x1dc),_0x2e4daa(0x120),'„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì',_0x2e4daa(0x228),_0x2e4daa(0x1e6),'getElementById',_0x2e4daa(0x14e),_0x2e4daa(0x1ff),_0x2e4daa(0x19e),_0x2e4daa(0x163),_0x2e4daa(0x21b),_0x2e4daa(0x1cb),'height',_0x2e4daa(0x127),_0x2e4daa(0x21c),_0x2e4daa(0x13f),_0x2e4daa(0x1b0),_0x2e4daa(0x105),'IndexedDB„Åã„Çâ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Çì„Å†„ÉÅ„É•„ÉºÔºÅ',_0x2e4daa(0x161),_0x2e4daa(0x139),_0x2e4daa(0x119),_0x2e4daa(0x1b1),'getImageData',_0x2e4daa(0x20a),'hidden',_0x2e4daa(0x1e5),_0x2e4daa(0x115),_0x2e4daa(0x1b4),'21479103enQVXi',_0x2e4daa(0x111),'touchmove',_0x2e4daa(0x1ad),_0x2e4daa(0x10f),_0x2e4daa(0x104),_0x2e4daa(0x113),_0x2e4daa(0x18f),_0x2e4daa(0x182),_0x2e4daa(0x222),_0x2e4daa(0x11c),_0x2e4daa(0x213),_0x2e4daa(0x214),'#00ffff',_0x2e4daa(0xe9),_0x2e4daa(0x195),'80px',_0x2e4daa(0x1cc),_0x2e4daa(0x184),_0x2e4daa(0x1cf),_0x2e4daa(0x1b3),_0x2e4daa(0x152),_0x2e4daa(0x220),_0x2e4daa(0x1bf),_0x2e4daa(0x12c),_0x2e4daa(0x146),'left','configure',_0x2e4daa(0x131),_0x2e4daa(0x1bd),_0x2e4daa(0x1f3),_0x2e4daa(0x22b),_0x2e4daa(0x221),_0x2e4daa(0x135),_0x2e4daa(0xe3),_0x2e4daa(0x106),'/index.html',_0x2e4daa(0x1ed),_0x2e4daa(0x17f),_0x2e4daa(0x1c7)];return a0_0x5ad1=function(){return _0x3ab144;},a0_0x5ad1();}function hexToRgba(_0x23a5e0,_0x4a8dc5=0x1){const _0xb6145a=a0_0x5049d9,_0x35f5d0=a0_0x38aafa;if(_0x23a5e0===_0x35f5d0(0x1f3)||_0x23a5e0===_0x35f5d0(0x25c))return[0x0,0x0,0x0,0x0];_0x23a5e0=_0x23a5e0[_0x35f5d0(0x27d)]('#','');if(_0x23a5e0[_0x35f5d0(0x1c4)]===0x3)_0x23a5e0=_0x23a5e0[_0x35f5d0(0x285)]('')[_0xb6145a(0x18f)](_0x22f8d1=>_0x22f8d1+_0x22f8d1)[_0xb6145a(0xf9)]('');let _0x46bac6=parseInt(_0x23a5e0,0x10);return[_0x46bac6>>0x10&0xff,_0x46bac6>>0x8&0xff,_0x46bac6&0xff,Math[_0x35f5d0(0x26f)](0xff*_0x4a8dc5)];}function fillAt(_0x41e156,_0x294330){const _0xa85c5c=a0_0x5049d9,_0x153037=a0_0x38aafa;let _0x449f80=getCurrentProject(),_0x2ecddb=getCurrentFrame(),_0x3793da=_0x2ecddb[_0x153037(0x262)][_0x2ecddb[_0x153037(0x1b5)]][_0x153037(0x2c6)]('2d'),_0x5d7a87=_0x3793da[_0x153037(0x287)](0x0,0x0,_0x449f80[_0x153037(0x1b8)]*cellSize,_0x449f80[_0x153037(0x27c)]*cellSize),_0x22b5bd=_0x41e156*cellSize,_0x5ae343=_0x294330*cellSize,_0x546cd1=getPixel(_0x5d7a87,_0x22b5bd,_0x5ae343),_0x2df72a=currentColor===_0xa85c5c(0x1a5)||currentColor===_0x153037(0x25c)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x546cd1,_0x2df72a))return;let _0xe41755=[[_0x41e156,_0x294330]],_0x5c1c44=new Set();while(_0xe41755[_0x153037(0x1c4)]){let [_0x5a5c86,_0x40492d]=_0xe41755['pop']();if(_0x5a5c86<0x0||_0x40492d<0x0||_0x5a5c86>=_0x449f80['width']||_0x40492d>=_0x449f80[_0x153037(0x27c)])continue;let _0x281afa=_0x5a5c86+','+_0x40492d;if(_0x5c1c44[_0x153037(0x2bb)](_0x281afa))continue;_0x5c1c44[_0x153037(0x1de)](_0x281afa);let _0x588c2e=_0x5a5c86*cellSize,_0x1fe5a2=_0x40492d*cellSize,_0x179fa1=getPixel(_0x5d7a87,_0x588c2e,_0x1fe5a2);if(!colorsMatch(_0x179fa1,_0x546cd1))continue;for(let _0x1f184a=0x0;_0x1f184a<cellSize;_0x1f184a++){for(let _0x37d368=0x0;_0x37d368<cellSize;_0x37d368++){setPixel(_0x5d7a87,_0x588c2e+_0x37d368,_0x1fe5a2+_0x1f184a,_0x2df72a);}}_0xe41755[_0x153037(0x278)]([_0x5a5c86+0x1,_0x40492d]),_0xe41755[_0x153037(0x278)]([_0x5a5c86-0x1,_0x40492d]),_0xe41755[_0x153037(0x278)]([_0x5a5c86,_0x40492d+0x1]),_0xe41755[_0xa85c5c(0x19e)]([_0x5a5c86,_0x40492d-0x1]);}_0x3793da[_0x153037(0x19f)](_0x5d7a87,0x0,0x0),redrawAll();}function getPixel(_0x4489d6,_0x1c2f59,_0x36a404){const _0x2c17dc=a0_0x5049d9,_0x1d1a66=a0_0x38aafa;let _0x748689=(_0x36a404*_0x4489d6['width']+_0x1c2f59)*0x4;return[_0x4489d6['data'][_0x748689],_0x4489d6[_0x2c17dc(0x15b)][_0x748689+0x1],_0x4489d6[_0x1d1a66(0x261)][_0x748689+0x2],_0x4489d6[_0x1d1a66(0x261)][_0x748689+0x3]];}function setPixel(_0x56e968,_0x2d311d,_0xc9b23d,_0x587f40){const _0x268271=a0_0x38aafa;let _0xc2356a=(_0xc9b23d*_0x56e968[_0x268271(0x1b8)]+_0x2d311d)*0x4;_0x56e968[_0x268271(0x261)][_0xc2356a]=_0x587f40[0x0],_0x56e968[_0x268271(0x261)][_0xc2356a+0x1]=_0x587f40[0x1],_0x56e968['data'][_0xc2356a+0x2]=_0x587f40[0x2],_0x56e968[_0x268271(0x261)][_0xc2356a+0x3]=_0x587f40[0x3];}function colorsMatch(_0x18b22e,_0x232cff){return _0x18b22e[0x0]===_0x232cff[0x0]&&_0x18b22e[0x1]===_0x232cff[0x1]&&_0x18b22e[0x2]===_0x232cff[0x2]&&_0x18b22e[0x3]===_0x232cff[0x3];}function handleMouseDown(_0x599611){const _0x18a032=a0_0x5049d9,_0x4f9455=a0_0x38aafa;isDrawing=!![];const _0x492a52=getCanvasCoords(_0x599611),_0x5e4d54=Math[_0x4f9455(0x1a7)](_0x492a52['x']/cellSize),_0x5ef8a6=Math[_0x18a032(0xfe)](_0x492a52['y']/cellSize);currentTool===_0x4f9455(0x1a8)?(fillAt(_0x5e4d54,_0x5ef8a6),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x5e4d54,_0x5ef8a6),lastMouse={'x':_0x5e4d54,'y':_0x5ef8a6});}function handleMouseMove(_0x496fac){const _0x50b5a3=a0_0x5049d9,_0x64b1e=a0_0x38aafa;if(!isDrawing)return;const _0x36b9c8=getCanvasCoords(_0x496fac),_0x5ee3a9=Math[_0x64b1e(0x1a7)](_0x36b9c8['x']/cellSize),_0x20365c=Math[_0x64b1e(0x1a7)](_0x36b9c8['y']/cellSize);if(!lastMouse){drawDotXY(_0x5ee3a9,_0x20365c),lastMouse={'x':_0x5ee3a9,'y':_0x20365c};return;}const _0x51ba32=_0x5ee3a9-lastMouse['x'],_0x50f17c=_0x20365c-lastMouse['y'],_0x264526=Math[_0x64b1e(0x2c3)](Math[_0x64b1e(0x1a6)](_0x51ba32),Math[_0x64b1e(0x1a6)](_0x50f17c));if(_0x264526<=0x1)drawDotXY(_0x5ee3a9,_0x20365c);else for(let _0x2729b7=0x1;_0x2729b7<=_0x264526;_0x2729b7++){const _0x12f269=Math[_0x50b5a3(0x167)](lastMouse['x']+_0x51ba32*_0x2729b7/_0x264526),_0x274f5b=Math[_0x64b1e(0x26f)](lastMouse['y']+_0x50f17c*_0x2729b7/_0x264526);drawDotXY(_0x12f269,_0x274f5b);}lastMouse={'x':_0x5ee3a9,'y':_0x20365c};}function handleMouseUp(_0x4ee401){isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0xfdb44){const _0x186713=a0_0x5049d9,_0x3452cb=a0_0x38aafa,_0x4c619b=canvas[_0x3452cb(0x280)]();let _0x40aaa1=_0xfdb44[_0x3452cb(0x2d8)]&&_0xfdb44[_0x3452cb(0x2d8)][0x0]?_0xfdb44[_0x3452cb(0x2d8)][0x0]:_0xfdb44[_0x186713(0x203)][0x0];const _0x5b0c83=canvas[_0x3452cb(0x1b8)]/_0x4c619b[_0x186713(0x190)],_0x47b85d=canvas[_0x3452cb(0x27c)]/_0x4c619b[_0x3452cb(0x27c)],_0x24c038=_0x40aaa1[_0x3452cb(0x193)],_0x17c6b7=_0x40aaa1[_0x3452cb(0x25d)],_0xa28fac=(_0x24c038-_0x4c619b[_0x3452cb(0x2a7)])*_0x5b0c83,_0x1109a8=(_0x17c6b7-_0x4c619b[_0x3452cb(0x196)])*_0x47b85d;return{'x':Math[_0x3452cb(0x1a7)](_0xa28fac/cellSize),'y':Math[_0x3452cb(0x1a7)](_0x1109a8/cellSize)};}function handleTouchStart(_0x115315){const _0x5adf28=a0_0x5049d9,_0x92dccf=a0_0x38aafa;if(_0x115315[_0x5adf28(0x158)][_0x92dccf(0x1c4)]===0x2){_0x115315[_0x92dccf(0x1ce)](),isPinching=!![],isDrawing=![];const _0x58e28b=_0x115315[_0x92dccf(0x2d8)][0x0],_0x14bbb5=_0x115315[_0x92dccf(0x2d8)][0x1];pinchStartDistance=Math[_0x92dccf(0x18d)](_0x14bbb5['clientX']-_0x58e28b[_0x92dccf(0x193)],_0x14bbb5[_0x92dccf(0x25d)]-_0x58e28b[_0x5adf28(0x12b)]),pinchStartMid={'clientX':(_0x58e28b[_0x92dccf(0x193)]+_0x14bbb5[_0x92dccf(0x193)])/0x2,'clientY':(_0x58e28b[_0x92dccf(0x25d)]+_0x14bbb5[_0x92dccf(0x25d)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x92dccf(0x280)]();}else{if(_0x115315[_0x92dccf(0x2d8)][_0x92dccf(0x1c4)]===0x1){_0x115315[_0x5adf28(0x187)]();if(isPinching)return;isDrawing=!![];let _0x2e518b=getTouchPos(_0x115315);lastTouch=_0x2e518b,currentTool===_0x92dccf(0x1a8)?(fillAt(_0x2e518b['x'],_0x2e518b['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x2e518b['x'],_0x2e518b['y']);}}}function handleTouchMove(_0x42e8c9){const _0x588230=a0_0x5049d9,_0x6330e2=a0_0x38aafa;if(isPinching||_0x42e8c9[_0x6330e2(0x2d8)]&&_0x42e8c9[_0x588230(0x158)][_0x6330e2(0x1c4)]===0x2){_0x42e8c9[_0x6330e2(0x1ce)]();const _0x1951a9=_0x42e8c9[_0x6330e2(0x2d8)][0x0],_0x3fa823=_0x42e8c9[_0x6330e2(0x2d8)][0x1],_0x43218d=Math['hypot'](_0x3fa823[_0x6330e2(0x193)]-_0x1951a9[_0x6330e2(0x193)],_0x3fa823[_0x588230(0x12b)]-_0x1951a9[_0x6330e2(0x25d)]),_0x4e2516={'clientX':(_0x1951a9[_0x6330e2(0x193)]+_0x3fa823[_0x6330e2(0x193)])/0x2,'clientY':(_0x1951a9[_0x588230(0x12b)]+_0x3fa823[_0x6330e2(0x25d)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x43218d||0x1;const _0xe386de=_0x43218d/pinchStartDistance||0x1;let _0x2ff0d3=pinchStartScale*_0xe386de;_0x2ff0d3=Math[_0x588230(0x18d)](Math[_0x6330e2(0x2c3)](_0x2ff0d3,0.2),0x5);const _0x7438ee=pinchRect||canvas[_0x588230(0x1b0)](),_0x54f671=(pinchStartMid[_0x6330e2(0x193)]-_0x7438ee[_0x6330e2(0x2a7)]-pinchStartPosX)/pinchStartScale,_0x433bb2=(pinchStartMid[_0x588230(0x12b)]-_0x7438ee[_0x6330e2(0x196)]-pinchStartPosY)/pinchStartScale;posX=_0x4e2516[_0x6330e2(0x193)]-_0x7438ee[_0x6330e2(0x2a7)]-_0x54f671*_0x2ff0d3,posY=_0x4e2516['clientY']-_0x7438ee[_0x6330e2(0x196)]-_0x433bb2*_0x2ff0d3,scale=_0x2ff0d3,updateTransform();return;}if(!isDrawing)return;if(_0x42e8c9['touches']&&_0x42e8c9[_0x6330e2(0x2d8)][_0x588230(0xf5)]>0x1)return;_0x42e8c9['preventDefault']();let _0x4ffc74=getTouchPos(_0x42e8c9);if(lastTouch){let _0x11fad5=Math[_0x6330e2(0x1a6)]((_0x4ffc74['x']-lastTouch['x'])*cellSize),_0x3103be=Math[_0x6330e2(0x1a6)]((_0x4ffc74['y']-lastTouch['y'])*cellSize);if(_0x11fad5>=PAN_CANCEL_DISTANCE||_0x3103be>=PAN_CANCEL_DISTANCE){if(currentTool!==_0x6330e2(0x182)){isDrawing=![];return;}}}if(lastTouch){let _0x3c9748=_0x4ffc74['x']-lastTouch['x'],_0x3feaac=_0x4ffc74['y']-lastTouch['y'],_0x1f25d5=Math[_0x588230(0x107)](Math[_0x588230(0x11f)](_0x3c9748),Math[_0x6330e2(0x1a6)](_0x3feaac));for(let _0x285df5=0x1;_0x285df5<=_0x1f25d5;_0x285df5++){let _0x1b5765=Math[_0x6330e2(0x26f)](lastTouch['x']+_0x3c9748*_0x285df5/_0x1f25d5),_0x40066f=Math[_0x6330e2(0x26f)](lastTouch['y']+_0x3feaac*_0x285df5/_0x1f25d5);drawDotTouch(_0x1b5765,_0x40066f);}}else drawDotTouch(_0x4ffc74['x'],_0x4ffc74['y']);lastTouch=_0x4ffc74;}function handleTouchEnd(_0x4f71df){const _0x4ecae5=a0_0x5049d9,_0x3b336d=a0_0x38aafa;isPinching&&_0x4f71df[_0x3b336d(0x2d8)]&&_0x4f71df[_0x4ecae5(0x158)][_0x3b336d(0x1c4)]<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null),isDrawing&&(!_0x4f71df[_0x4ecae5(0x158)]||_0x4f71df[_0x3b336d(0x2d8)]['length']===0x0)&&saveHistory();if(_0x4f71df[_0x4ecae5(0x158)]&&_0x4f71df[_0x3b336d(0x2d8)][_0x3b336d(0x1c4)]===0x1){let _0x352254=_0x4f71df[_0x3b336d(0x2d8)][0x0];lastTouch=getTouchPos({'touches':[_0x352254]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function drawDotXY(_0x2cad54,_0x301dee){const _0x209515=a0_0x5049d9,_0x2d647b=a0_0x38aafa;let _0x53acb2=getCurrentProject(),_0x4f5728=getCurrentFrame();if(!_0x4f5728||!_0x53acb2)return;if(typeof _0x2cad54!==_0x2d647b(0x1a2)||typeof _0x301dee!==_0x2d647b(0x1a2)||_0x2cad54<0x0||_0x301dee<0x0||!Number['isFinite'](_0x53acb2[_0x209515(0x190)])||!Number[_0x209515(0x115)](_0x53acb2[_0x2d647b(0x27c)])||_0x2cad54>=_0x53acb2[_0x209515(0x190)]||_0x301dee>=_0x53acb2[_0x2d647b(0x27c)]||!Array[_0x2d647b(0x19c)](_0x4f5728[_0x209515(0x13d)])||typeof _0x4f5728[_0x2d647b(0x1b5)]!==_0x2d647b(0x1a2)||!_0x4f5728[_0x2d647b(0x262)][_0x4f5728[_0x209515(0x215)]])return;let _0x5143ca=_0x4f5728[_0x2d647b(0x262)][_0x4f5728[_0x209515(0x215)]][_0x2d647b(0x2c6)]('2d');if(!_0x5143ca)return;if(currentTool==='eraser'||currentColor===_0x2d647b(0x1f3)||currentColor===_0x2d647b(0x25c)||currentAlpha===0x0)drawPenShape(_0x5143ca,_0x2cad54,_0x301dee,_0x2d647b(0x25c),!![]);else{let _0x2e44a1=hexToRgba(currentColor,currentAlpha);_0x5143ca[_0x2d647b(0x1fe)](),_0x5143ca[_0x2d647b(0x2a0)]=_0x2e44a1[0x3]/0xff,drawPenShape(_0x5143ca,_0x2cad54,_0x301dee,_0x2d647b(0x210)+_0x2e44a1[0x0]+','+_0x2e44a1[0x1]+','+_0x2e44a1[0x2]+','+_0x2e44a1[0x3]/0xff+')',![]),_0x5143ca[_0x2d647b(0x2df)]();}redrawAll();}function drawPenShape(_0x47b88a,_0x51aba7,_0x2aa5f2,_0x592673,_0x494f69){const _0x3ca19f=a0_0x5049d9,_0x26ad6e=a0_0x38aafa,_0x447037=_0x51aba7*cellSize,_0x1fd7ea=_0x2aa5f2*cellSize,_0x36db3b=penSize*cellSize;_0x494f69?(_0x47b88a[_0x26ad6e(0x1fe)](),_0x47b88a[_0x26ad6e(0x20d)]=_0x26ad6e(0x2d5),penMode===_0x26ad6e(0x2ea)?(_0x47b88a[_0x26ad6e(0x2eb)](),_0x47b88a[_0x26ad6e(0x24a)](_0x447037+cellSize/0x2,_0x1fd7ea+cellSize/0x2,_0x36db3b/0x2,0x0,Math['PI']*0x2),_0x47b88a[_0x26ad6e(0x1a8)]()):_0x47b88a[_0x26ad6e(0x22d)](_0x447037-Math[_0x26ad6e(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x1fd7ea-Math[_0x26ad6e(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x36db3b,_0x36db3b),_0x47b88a[_0x26ad6e(0x2df)]()):(_0x47b88a[_0x26ad6e(0x1fe)](),_0x47b88a[_0x26ad6e(0x2aa)]=_0x592673,penMode===_0x26ad6e(0x2ea)?(_0x47b88a[_0x3ca19f(0x237)](),_0x47b88a[_0x26ad6e(0x24a)](_0x447037+cellSize/0x2,_0x1fd7ea+cellSize/0x2,_0x36db3b/0x2,0x0,Math['PI']*0x2),_0x47b88a['fill']()):_0x47b88a[_0x26ad6e(0x216)](_0x447037-Math[_0x3ca19f(0xfe)]((penSize-0x1)/0x2)*cellSize,_0x1fd7ea-Math[_0x26ad6e(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x36db3b,_0x36db3b),_0x47b88a[_0x26ad6e(0x2df)]());}function a0_0x243d(){const _0x1ad194=['18959ijBvyJ','\x20selected','application/json','activeLayer','firstChild','releasePointerCapture','onmousedown','result','vp8','project-btn','decode','4802050CMYWrO','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','onmouseup','oncomplete','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>„Éö„É≥</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','#0000ff','\x20active','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','palette-penSize','sidebar','10188tVdTJu','onupgradeneeded','#newProjCancelBtn','encode','ontouchcancel','catch','1023636OyXKxu','WebCodecs','hypot','drawImage','translate(','light','menu-toggle-btn','3937560ufqvBg','canvas-container','render','beginPath','pen','px)\x20scale(','image/apng','select','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22undo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>undo</span>\x20Êàª„Åô\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22redo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>redo</span>\x20Êàª„Åô„ÇíÊàª„Åô\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','penSize','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§','image/png','„Éï„Ç°„Ç§„É´„Å´„Éó„É≠„Ç∏„Çß„ÇØ„Éà„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇË™≠„ÅøËæº„Åø„Åß„Åç„Åæ„Åõ„Çì„ÄÇ','getAttribute','matchMedia','(((.+)+)+)+$','getItem','#ccc','tool','closePath','querySelectorAll','<span\x20style=\x22font-size:13px;color:#888;\x22>ÈÄèÊòé</span>','194866cGotcP','clear','splice','transform','973508Cqoyrz','match','then','#800000','lineTo','penMode','length','.section.collapsible\x20.toggle-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','top','join','flex','parentNode','themeToggleBtn','image','floor','3bZOlqa','.tool-btn','‰∏ä„Å´ÁßªÂãï','alphaSlider','(prefers-color-scheme:\x20dark)','nezumi-sketch-db','#cccccc','apply','max','project-name','subarray','forEach','fillRect','crosshair','slice','colorPicker','#ff00ff','overflow','span','frameCount','DOMContentLoaded','replaceWith','isFinite','arc','setPointerCapture','layerCount','split','onload','nezumi-sketch-save','put','anonymous','pop','abs','10XJZHgl','touchcancel','dark','selected','title','get','querySelector','replace','252qMzMxb','#newProjW','rgba(','clientY','activeFrame','none','value','3313824QVIVOZ','readwrite','aria-pressed','nezumi_about_visited','‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº:','revokeObjectURL','/about?terms=true','removeChild','693928GhthjY','.palette-color','1663240xvhpIM','keydown','height','#ffff00','layers','touchAction','transaction','frameList','„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ','background','#00000000','open','zIndex','removeEventListener','#c0c0c0','nezumi-animation.apng','onerror','onmouseleave','„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíIndexedDB„Å´‰øùÂ≠ò„Åó„Åü„ÉÅ„É•„ÉºÔºÅ','clientX','number','Enter','new-project-dialog','square','cursor','addFrame','search','textContent','zoomSlider','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','data-theme','touches','createObjectURL','stopPropagation','data','className','onblur','documentElement','#000080','putImageData','„Çπ„Çø„É≥„Éâ„Ç¢„É≠„É≥ÂΩ¢Âºè„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:\x20','getContext','toString','ontouchmove','has','nezumi-animation','round','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>Ê∂à„Åó„Ç¥„É†</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','fill','zoomValue','keyval','pointerType','buffer','palette-alphaValue','#palette-toolbar\x20.tool-btn','layer-item','_spritesheet.png','clearRect','keyup','block','image/','classList','files','application/octet-stream','layerRedoStacks','UPNG','#444444','IndexedDB„Åã„Çâ„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº‚Ä¶','207RSftqX','onkeydown','frames','main-container','key','input','100vw','toggle','position','‰∏ã„Å´ÁßªÂãï','preventDefault','isArray','add','focus','onchange','63psIyud','min','fixed','map','width','palette-del-btn','getElementById','display','#00ff00','layerHistories','px,\x20','readAsText','frame-thumb','grab','#ffa500','Shift','nezumi-animation.gif','onclick','push','active','log','„Çπ„Éó„É©„Ç§„Éà„Ç∑„Éº„Éà„ÅÆÊã°Â§ßÁéá„ÇíÊåáÂÆöÔºà‰æã:\x201\x20=\x20ÂÖÉ„Çµ„Ç§„Ç∫,\x202\x20=\x202ÂÄçÔºâ','>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22','addEventListener','href','transparent','„Ç≥„Éû)','projects','‰øùÂ≠ò„Ç®„É©„Éº','touch','image/jpeg','>‰∏∏„Éö„É≥</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ÈÄèÊòéÂ∫¶:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22','crossOrigin','center','GIF','getBoundingClientRect','frame-btn','rgba(0,0,0,0.3)','sidebar-open','constructor','toDataURL','#palette-penSize','setItem','warn','10376090telBQC','animSpeedRange','style','deltaY','fillStyle','menu-toggle-btn-close','button','blur','name','appendChild','click','nezumi-palette','body','pointerup','setAttribute','projectCount','.gif','100vh','„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØWebCodecs„Å´„Çà„ÇãWEBP„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ','moveTo','eraser','justifyContent','globalAlpha','3000','disabled','„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü','target','jpg','all','.section.collapsible\x20.section-content','.section-content','touchstart','nezumi-sketch.msketch','#ffffff','strokeStyle','pointerId','jpeg','download','save','#800080','onmousemove','palette-toolbar','destination-out','#ff69b4','oninput','.apng','14uGmiOY','error','remove','innerHTML','project','src','#palette-penMode','„É©„Ç§„Éà„ÉÜ„Éº„Éû„Å´ÂàáÊõø','alphaValue','project-item','div','#newProjOkBtn','nezumi-spritesheet','beforeunload','contains','createElement','100%','objectStore','shift','nezumi-standalone','insertBefore','palette-color','project-name-edit','ontouchend','.toggle-btn','palette-add-btn','stroke','#000000','changedTouches','9167048BqRjmr','touchmove','palette-penMode','ontouchstart','„ÉÄ„Éº„ÇØ„ÉÜ„Éº„Éû„Å´ÂàáÊõø','9UjjHrQ','parse','readonly','.webm','animSpeedValue','Ë™≠Ëæº„Ç®„É©„Éº','canvas','„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>Â°ó„Çä„Å§„Å∂„Åó</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Â§™„Åï:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22'];a0_0x243d=function(){return _0x1ad194;};return a0_0x243d();}function drawDotTouch(_0x49c3fe,_0x19f98a){const _0x2630ca=a0_0x5049d9,_0x1f6765=a0_0x38aafa;let _0x57c853=getCurrentProject(),_0xd4821c=getCurrentFrame();if(_0x49c3fe<0x0||_0x19f98a<0x0||_0x49c3fe>=_0x57c853[_0x1f6765(0x1b8)]||_0x19f98a>=_0x57c853[_0x1f6765(0x27c)])return;let _0x9bf370=_0xd4821c[_0x1f6765(0x262)][_0xd4821c[_0x1f6765(0x1b5)]]['getContext']('2d');if(currentTool==='eraser'||currentColor==='transparent'||currentColor===_0x1f6765(0x25c)||currentAlpha===0x0)drawPenShape(_0x9bf370,_0x49c3fe,_0x19f98a,_0x1f6765(0x25c),!![]);else{let _0x451e7b=hexToRgba(currentColor,currentAlpha);_0x9bf370[_0x1f6765(0x1fe)](),_0x9bf370[_0x1f6765(0x2a0)]=_0x451e7b[0x3]/0xff,drawPenShape(_0x9bf370,_0x49c3fe,_0x19f98a,_0x2630ca(0x12a)+_0x451e7b[0x0]+','+_0x451e7b[0x1]+','+_0x451e7b[0x2]+','+_0x451e7b[0x3]/0xff+')',![]),_0x9bf370['restore']();}redrawAll();}function applyTheme(_0x5b8a82){const _0x232a18=a0_0x5049d9,_0x12be80=a0_0x38aafa;document[_0x12be80(0x199)][_0x12be80(0x2b4)](_0x12be80(0x206),_0x5b8a82);const _0x20d73f=document[_0x12be80(0x275)](_0x12be80(0x189));_0x20d73f&&(_0x20d73f[_0x232a18(0x154)]=_0x5b8a82===_0x232a18(0x122)?'‚òÄÔ∏è':'üåô',_0x20d73f[_0x12be80(0x2b4)](_0x12be80(0x2a9),_0x5b8a82===_0x232a18(0x122)),_0x20d73f[_0x232a18(0x124)]=_0x5b8a82===_0x12be80(0x2ee)?_0x232a18(0x1ee):_0x12be80(0x1d0)),localStorage[_0x12be80(0x1fc)](_0x12be80(0x1a4),_0x5b8a82);}function toggleTheme(){const _0x243da6=a0_0x5049d9,_0x22ee93=a0_0x38aafa;applyTheme(document[_0x243da6(0x15e)][_0x243da6(0xe2)](_0x22ee93(0x206))===_0x22ee93(0x2ee)?_0x22ee93(0x21b):_0x22ee93(0x2ee));}(function initTheme(){const _0x524ac4=a0_0x5049d9,_0x5ce5db=a0_0x38aafa,_0x5726e1=localStorage[_0x5ce5db(0x1d5)](_0x5ce5db(0x1a4))||(window[_0x524ac4(0xe3)]&&window[_0x5ce5db(0x2af)](_0x5ce5db(0x208))['matches']?_0x524ac4(0x122):_0x5ce5db(0x21b));applyTheme(_0x5726e1),document[_0x5ce5db(0x21d)](_0x5ce5db(0x293),()=>{const _0x4d17f5=_0x5ce5db,_0x2008c3=document[_0x4d17f5(0x275)](_0x4d17f5(0x189));_0x2008c3&&(_0x2008c3[_0x4d17f5(0x21d)]('click',toggleTheme),_0x2008c3[_0x4d17f5(0x21d)](_0x4d17f5(0x1cc),_0x5b0d6c=>{const _0x363b81=_0x4d17f5;(_0x5b0d6c[_0x363b81(0x2c5)]===_0x363b81(0x276)||_0x5b0d6c[_0x363b81(0x2c5)]==='\x20')&&(_0x5b0d6c[_0x363b81(0x1ce)](),toggleTheme());}));});}(),window['onload']=()=>{const _0x5b4d26=a0_0x5049d9,_0x4ef5ea=a0_0x38aafa;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x5b4d26(0x238)),loadPaletteFromDB()[_0x4ef5ea(0x17f)](()=>createPalette()),document['getElementById']('penSize')[_0x4ef5ea(0x24e)]=penSize,document[_0x4ef5ea(0x275)](_0x5b4d26(0xf4))[_0x4ef5ea(0x24e)]=penMode;const _0x75a9a2=document[_0x4ef5ea(0x275)](_0x4ef5ea(0x229)),_0x2dc623=document[_0x4ef5ea(0x275)](_0x4ef5ea(0x205));_0x75a9a2&&_0x2dc623&&(_0x75a9a2[_0x5b4d26(0x12e)]=animationDelay,_0x2dc623[_0x4ef5ea(0x24e)]=animationDelay,_0x75a9a2[_0x4ef5ea(0x28a)]=_0x21617d=>{const _0x56aa9a=_0x5b4d26,_0x34e506=_0x4ef5ea;_0x2dc623[_0x56aa9a(0x12e)]=_0x21617d[_0x34e506(0x2e5)][_0x34e506(0x24e)],setAnimationDelay(_0x21617d[_0x34e506(0x2e5)][_0x34e506(0x24e)]);},_0x2dc623[_0x4ef5ea(0x222)]=_0x54c26d=>{const _0x497059=_0x5b4d26,_0x498996=_0x4ef5ea;let _0x484fef=Math[_0x498996(0x2c3)](0xa,Math[_0x497059(0x18d)](0x1388,parseInt(_0x54c26d[_0x498996(0x2e5)]['value'])||animationDelay));_0x75a9a2[_0x498996(0x24e)]=_0x484fef,_0x2dc623[_0x497059(0x12e)]=_0x484fef,setAnimationDelay(_0x484fef);}),canvas[_0x4ef5ea(0x239)]=handleMouseMove,canvas[_0x4ef5ea(0x238)]=handleMouseUp,canvas[_0x4ef5ea(0x1b7)]=handleMouseUp,canvas[_0x4ef5ea(0x21a)]=handleTouchStart,canvas[_0x4ef5ea(0x267)]=handleTouchMove,canvas[_0x4ef5ea(0x212)]=handleTouchEnd,canvas[_0x4ef5ea(0x2ac)]=handleTouchEnd,canvas[_0x4ef5ea(0x21d)](_0x5b4d26(0x1d8),handleTouchStart,{'passive':![]}),canvas[_0x4ef5ea(0x21d)](_0x4ef5ea(0x28f),handleTouchMove,{'passive':![]}),canvas[_0x5b4d26(0x1a3)](_0x4ef5ea(0x1e1),handleTouchEnd,{'passive':![]}),canvas[_0x4ef5ea(0x21d)](_0x4ef5ea(0x1b6),handleTouchEnd,{'passive':![]}),idbGet(_0x4ef5ea(0x263))&&loadProjectFromIDB();});function drawGrid(_0x150e02,_0x6c0521){const _0x14b0a9=a0_0x5049d9,_0x335d38=a0_0x38aafa;ctx[_0x335d38(0x1fe)](),ctx[_0x335d38(0x2b5)]=_0x335d38(0x26b);for(let _0x37f6cf=0x0;_0x37f6cf<=_0x150e02;_0x37f6cf++){ctx[_0x335d38(0x2eb)](),ctx[_0x335d38(0x29e)](_0x37f6cf*cellSize,0x0),ctx['lineTo'](_0x37f6cf*cellSize,_0x6c0521*cellSize),ctx[_0x14b0a9(0x201)]();}for(let _0x1a9267=0x0;_0x1a9267<=_0x6c0521;_0x1a9267++){ctx['beginPath'](),ctx[_0x335d38(0x29e)](0x0,_0x1a9267*cellSize),ctx[_0x14b0a9(0xf3)](_0x150e02*cellSize,_0x1a9267*cellSize),ctx[_0x335d38(0x2d9)]();}ctx[_0x335d38(0x2df)]();}function redrawAll(){const _0x5024f6=a0_0x5049d9,_0x3d75d5=a0_0x38aafa;let _0x47b615=getCurrentProject(),_0x2cbcfd=getCurrentFrame();canvas[_0x3d75d5(0x1b8)]=_0x47b615[_0x3d75d5(0x1b8)]*cellSize,canvas[_0x3d75d5(0x27c)]=_0x47b615[_0x3d75d5(0x27c)]*cellSize,ctx[_0x5024f6(0x172)](0x0,0x0,canvas[_0x3d75d5(0x1b8)],canvas['height']);for(let _0x132586=0x0;_0x132586<_0x2cbcfd[_0x3d75d5(0x262)][_0x5024f6(0xf5)];_0x132586++){ctx[_0x5024f6(0x230)](_0x2cbcfd[_0x3d75d5(0x262)][_0x132586],0x0,0x0);}drawGrid(_0x47b615[_0x5024f6(0x190)],_0x47b615[_0x3d75d5(0x27c)]),wrapper&&(wrapper[_0x3d75d5(0x1f8)][_0x5024f6(0x190)]=_0x3d75d5(0x2d3),wrapper[_0x3d75d5(0x1f8)][_0x3d75d5(0x27c)]=_0x3d75d5(0x1ae));}function saveHistory(){const _0x3a1094=a0_0x5049d9,_0x5d03e5=a0_0x38aafa;let _0x3feb44=getCurrentFrame(),_0x21d809=_0x3feb44[_0x5d03e5(0x29c)][_0x3feb44[_0x5d03e5(0x1b5)]];_0x21d809[_0x3a1094(0x19e)](_0x3feb44[_0x5d03e5(0x262)][_0x3feb44[_0x5d03e5(0x1b5)]]['toDataURL']());if(_0x21d809[_0x5d03e5(0x1c4)]>0x32)_0x21d809[_0x5d03e5(0x1d7)]();_0x3feb44[_0x5d03e5(0x2d0)][_0x3feb44[_0x3a1094(0x215)]]=[];}function undo(){const _0x3c8cf2=a0_0x5049d9,_0x1a79a5=a0_0x38aafa;let _0x4db018=getCurrentFrame(),_0x5c6549=_0x4db018[_0x1a79a5(0x29c)][_0x4db018[_0x3c8cf2(0x215)]],_0x474f3f=_0x4db018[_0x1a79a5(0x2d0)][_0x4db018[_0x1a79a5(0x1b5)]];if(!_0x5c6549||_0x5c6549[_0x1a79a5(0x1c4)]<0x2)return;_0x474f3f[_0x3c8cf2(0x19e)](_0x5c6549['pop']());let _0x396d77=new Image();_0x396d77[_0x1a79a5(0x185)]=()=>{const _0x33cd0d=_0x3c8cf2,_0x52998d=_0x1a79a5;let _0x64b863=_0x4db018[_0x52998d(0x262)][_0x4db018[_0x52998d(0x1b5)]][_0x52998d(0x2c6)]('2d');_0x64b863[_0x52998d(0x22d)](0x0,0x0,_0x4db018[_0x52998d(0x262)][_0x4db018[_0x33cd0d(0x215)]][_0x52998d(0x1b8)],_0x4db018[_0x52998d(0x262)][_0x4db018[_0x52998d(0x1b5)]][_0x52998d(0x27c)]),_0x64b863[_0x33cd0d(0x230)](_0x396d77,0x0,0x0),redrawAll();},_0x396d77[_0x3c8cf2(0x1ec)]=_0x5c6549[_0x5c6549['length']-0x1];}function redo(){const _0x45ba72=a0_0x5049d9,_0x322343=a0_0x38aafa;let _0x2770be=getCurrentFrame(),_0x200f7b=_0x2770be[_0x45ba72(0x195)][_0x2770be[_0x45ba72(0x215)]],_0x43a77f=_0x2770be[_0x45ba72(0x179)][_0x2770be[_0x45ba72(0x215)]];if(!_0x43a77f||_0x43a77f[_0x45ba72(0xf5)]===0x0)return;let _0xe4a64c=_0x43a77f[_0x322343(0x1ea)]();_0x200f7b[_0x45ba72(0x19e)](_0xe4a64c);let _0x58ae5b=new Image();_0x58ae5b[_0x322343(0x185)]=()=>{const _0x21a820=_0x45ba72,_0x442f60=_0x322343;let _0x2f5f2a=_0x2770be[_0x21a820(0x13d)][_0x2770be[_0x442f60(0x1b5)]][_0x442f60(0x2c6)]('2d');_0x2f5f2a[_0x442f60(0x22d)](0x0,0x0,_0x2770be[_0x442f60(0x262)][_0x2770be[_0x442f60(0x1b5)]]['width'],_0x2770be[_0x21a820(0x13d)][_0x2770be[_0x21a820(0x215)]][_0x442f60(0x27c)]),_0x2f5f2a[_0x442f60(0x1ff)](_0x58ae5b,0x0,0x0),redrawAll();},_0x58ae5b[_0x322343(0x1b3)]=_0xe4a64c;}function exportImage(_0x510a2c){const _0x29b273=a0_0x5049d9,_0x4bd32c=a0_0x38aafa;let _0x2f0afe=getCurrentProject(),_0x3afd65=_0x2f0afe[_0x4bd32c(0x2b3)],_0x97ad65=_0x510a2c===_0x4bd32c(0x248)||_0x510a2c===_0x4bd32c(0x242)?_0x4bd32c(0x18a):_0x4bd32c(0x203)+_0x510a2c,_0x5f1068=_0x3afd65[_0x4bd32c(0x1c4)]>0x1,_0x3cf69b=(_0x2f0afe[_0x4bd32c(0x2e6)]||_0x4bd32c(0x200))[_0x4bd32c(0x27d)](/[\\/:*?"<>|]/g,'_');if(!_0x5f1068){let _0x4d2549=document[_0x4bd32c(0x1d6)](_0x4bd32c(0x19d));_0x4d2549[_0x29b273(0x190)]=_0x2f0afe[_0x4bd32c(0x1b8)]*cellSize,_0x4d2549['height']=_0x2f0afe[_0x4bd32c(0x27c)]*cellSize;let _0xba7964=_0x4d2549[_0x29b273(0x162)]('2d'),_0x49730e=getCurrentFrame();for(let _0xf41b29=0x0;_0xf41b29<_0x49730e[_0x4bd32c(0x262)][_0x4bd32c(0x1c4)];_0xf41b29++){_0xba7964[_0x29b273(0x230)](_0x49730e[_0x4bd32c(0x262)][_0xf41b29],0x0,0x0);}let _0x1a69cb=document[_0x4bd32c(0x1d6)]('a');_0x1a69cb[_0x4bd32c(0x215)]=_0x3cf69b+'.'+_0x510a2c,_0x510a2c===_0x4bd32c(0x248)||_0x510a2c===_0x29b273(0x1dd)?_0x1a69cb[_0x29b273(0x1a4)]=_0x4d2549[_0x4bd32c(0x1df)](_0x97ad65,0.92):_0x1a69cb[_0x4bd32c(0x1c8)]=_0x4d2549[_0x4bd32c(0x1df)](_0x97ad65),_0x1a69cb[_0x29b273(0x1c3)]();}else{if(_0x510a2c===_0x4bd32c(0x1bf)&&typeof window[_0x4bd32c(0x2da)]!==_0x4bd32c(0x225))exportWebpAnimation(_0x3afd65,_0x2f0afe[_0x4bd32c(0x1b8)]*cellSize,_0x2f0afe[_0x4bd32c(0x27c)]*cellSize,_0x3cf69b);else for(let _0x1cb561=0x0;_0x1cb561<_0x3afd65[_0x4bd32c(0x1c4)];_0x1cb561++){let _0x444ca2=document[_0x4bd32c(0x1d6)](_0x4bd32c(0x19d));_0x444ca2[_0x4bd32c(0x1b8)]=_0x2f0afe[_0x4bd32c(0x1b8)]*cellSize,_0x444ca2[_0x4bd32c(0x27c)]=_0x2f0afe[_0x4bd32c(0x27c)]*cellSize;let _0x1ed4a9=_0x444ca2[_0x29b273(0x162)]('2d'),_0x2081f3=_0x3afd65[_0x1cb561];for(let _0x7b6028=0x0;_0x7b6028<_0x2081f3[_0x4bd32c(0x262)][_0x4bd32c(0x1c4)];_0x7b6028++){_0x1ed4a9[_0x4bd32c(0x1ff)](_0x2081f3[_0x29b273(0x13d)][_0x7b6028],0x0,0x0);}let _0x58d41d=document[_0x4bd32c(0x1d6)]('a');_0x58d41d[_0x4bd32c(0x215)]=_0x3cf69b+'-f'+(_0x1cb561+0x1)+'.'+_0x510a2c,_0x510a2c===_0x4bd32c(0x248)||_0x510a2c===_0x4bd32c(0x242)?_0x58d41d[_0x29b273(0x1a4)]=_0x444ca2[_0x4bd32c(0x1df)](_0x97ad65,0.92):_0x58d41d[_0x4bd32c(0x1c8)]=_0x444ca2[_0x29b273(0x1b5)](_0x97ad65),setTimeout(()=>_0x58d41d[_0x4bd32c(0x2ed)](),_0x1cb561*0x64);}}}async function exportWebpAnimation(_0x3b9ea2,_0x19343a,_0x49d4ee,_0x3975a3=a0_0x38aafa(0x21f)){const _0x12a2df=a0_0x5049d9,_0x2acd2c=a0_0x38aafa;if(!window[_0x2acd2c(0x2da)]||!window[_0x2acd2c(0x194)]){alert(_0x2acd2c(0x27b));return;}const _0x10e83c=[],_0x1a2d04=new VideoEncoder({'output':_0x576289=>_0x10e83c[_0x2acd2c(0x278)](_0x576289),'error':_0x581363=>console[_0x12a2df(0x1e8)](_0x581363)});_0x1a2d04[_0x2acd2c(0x2a8)]({'codec':_0x2acd2c(0x2d2),'width':_0x19343a,'height':_0x49d4ee,'framerate':0x5});for(let _0x31519c=0x0;_0x31519c<_0x3b9ea2[_0x12a2df(0xf5)];_0x31519c++){let _0x58b30e=document[_0x2acd2c(0x1d6)](_0x2acd2c(0x19d));_0x58b30e[_0x2acd2c(0x1b8)]=_0x19343a,_0x58b30e[_0x2acd2c(0x27c)]=_0x49d4ee;let _0x18cf84=_0x58b30e[_0x2acd2c(0x2c6)]('2d'),_0x3e8914=_0x3b9ea2[_0x31519c];for(let _0x1ba2e8=0x0;_0x1ba2e8<_0x3e8914[_0x2acd2c(0x262)][_0x12a2df(0xf5)];_0x1ba2e8++){_0x18cf84[_0x2acd2c(0x1ff)](_0x3e8914[_0x2acd2c(0x262)][_0x1ba2e8],0x0,0x0);}let _0x520608=await createImageBitmap(_0x58b30e);_0x1a2d04[_0x2acd2c(0x1e2)](_0x520608,{'keyFrame':!![],'duration':0xc8}),_0x520608[_0x2acd2c(0x2e3)]();}await _0x1a2d04[_0x2acd2c(0x209)](),_0x1a2d04[_0x2acd2c(0x2e3)]();const _0x4171f8=new Blob(_0x10e83c[_0x2acd2c(0x294)](_0x3ba32c=>_0x3ba32c[_0x2acd2c(0x2c8)]?_0x3ba32c:_0x3ba32c[_0x2acd2c(0x261)]),{'type':'video/webm'}),_0x3ab4e0=document[_0x2acd2c(0x1d6)]('a');_0x3ab4e0[_0x2acd2c(0x215)]=_0x3975a3+_0x2acd2c(0x257),_0x3ab4e0[_0x2acd2c(0x1c8)]=URL[_0x2acd2c(0x201)](_0x4171f8),_0x3ab4e0[_0x2acd2c(0x2ed)]();}function exportGif(){const _0x2ddf40=a0_0x38aafa;let _0x7f2ad7=getCurrentProject(),_0x169f95=_0x7f2ad7[_0x2ddf40(0x2b3)],_0x5cb857=_0x7f2ad7[_0x2ddf40(0x1b8)]*cellSize,_0x2ca6ce=_0x7f2ad7[_0x2ddf40(0x27c)]*cellSize;const _0x130393=_0x169f95[_0x2ddf40(0x294)](_0x42b5ea=>{const _0x3ae4db=a0_0xce2f,_0x232678=_0x2ddf40;let _0x177921=document[_0x3ae4db(0x1f6)]('canvas');_0x177921[_0x232678(0x1b8)]=_0x5cb857,_0x177921[_0x232678(0x27c)]=_0x2ca6ce;let _0x11a7e1=_0x177921[_0x3ae4db(0x162)]('2d');for(let _0x32be9e=0x0;_0x32be9e<_0x42b5ea[_0x232678(0x262)][_0x3ae4db(0xf5)];_0x32be9e++){_0x11a7e1[_0x232678(0x1ff)](_0x42b5ea[_0x232678(0x262)][_0x32be9e],0x0,0x0);}return _0x177921[_0x232678(0x1df)](_0x232678(0x1fa));});Promise[_0x2ddf40(0x25a)](_0x130393[_0x2ddf40(0x294)](_0x2feab8=>{return new Promise(_0x521117=>{const _0xe55beb=a0_0x1925,_0x23dc9d=new Image();_0x23dc9d[_0xe55beb(0x1b3)]=_0x2feab8,_0x23dc9d[_0xe55beb(0x185)]=()=>_0x521117(_0x23dc9d);});}))[_0x2ddf40(0x17f)](_0x2e3390=>{const _0x63bfb2=a0_0xce2f,_0x11a574=_0x2ddf40,_0x3aa877=_0x2e3390[_0x11a574(0x268)](_0x3e70fc=>_0x3e70fc[_0x11a574(0x1b8)]>0x0&&_0x3e70fc[_0x11a574(0x27c)]>0x0);if(_0x3aa877[_0x63bfb2(0xf5)]===0x0){alert(_0x11a574(0x1fb));return;}const _0x251429=(_0x7f2ad7[_0x11a574(0x2e6)]||_0x11a574(0x21f))[_0x11a574(0x27d)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x3aa877,animationDelay,_0x251429+_0x11a574(0x2d1));});}function exportApng(){const _0xf046b8=a0_0x5049d9,_0x40a8e6=a0_0x38aafa;let _0x27fc09=getCurrentProject(),_0x2e13a1=_0x27fc09[_0x40a8e6(0x2b3)],_0x145291=_0x27fc09[_0x40a8e6(0x1b8)]*cellSize,_0x48f047=_0x27fc09['height']*cellSize;const _0x47ed22=_0x2e13a1[_0x40a8e6(0x294)](_0x20554f=>{const _0x4dfd36=a0_0xce2f,_0x2b4855=_0x40a8e6;let _0x1989ae=document[_0x2b4855(0x1d6)](_0x2b4855(0x19d));_0x1989ae[_0x4dfd36(0x190)]=_0x145291,_0x1989ae[_0x2b4855(0x27c)]=_0x48f047;let _0x5a00d3=_0x1989ae[_0x4dfd36(0x162)]('2d');for(let _0x2454da=0x0;_0x2454da<_0x20554f[_0x2b4855(0x262)][_0x2b4855(0x1c4)];_0x2454da++){_0x5a00d3[_0x4dfd36(0x230)](_0x20554f[_0x2b4855(0x262)][_0x2454da],0x0,0x0);}let _0x1a239a=new Image();return _0x1a239a[_0x2b4855(0x1b3)]=_0x1989ae[_0x4dfd36(0x1b5)](_0x2b4855(0x1fa)),_0x1a239a;}),_0x28a0b0=(_0x27fc09[_0xf046b8(0x1c1)]||_0x40a8e6(0x21f))[_0x40a8e6(0x27d)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x47ed22,_0x145291,_0x48f047,animationDelay,_0x28a0b0+_0x40a8e6(0x274));}const dbName=a0_0x38aafa(0x292),storeName=a0_0x38aafa(0x22e);function openDB(){return new Promise((_0x3d4a82,_0x418092)=>{const _0x3edc4d=a0_0xce2f,_0x356c1d=a0_0x1925,_0x15a7e7=indexedDB[_0x3edc4d(0x144)](dbName,0x1);_0x15a7e7[_0x356c1d(0x273)]=()=>{const _0x3a8791=_0x3edc4d;_0x15a7e7[_0x3a8791(0x219)]['createObjectStore'](storeName);},_0x15a7e7['onsuccess']=()=>_0x3d4a82(_0x15a7e7[_0x3edc4d(0x219)]),_0x15a7e7[_0x356c1d(0x1c5)]=()=>_0x418092(_0x15a7e7[_0x356c1d(0x181)]);});}async function idbSet(_0x189d25,_0x38d5b0){const _0x473f9a=await openDB();return new Promise((_0x293d41,_0x1b4118)=>{const _0x492355=a0_0xce2f,_0x518f7a=a0_0x1925,_0x3d4e6c=_0x473f9a[_0x518f7a(0x27f)](storeName,_0x518f7a(0x259));_0x3d4e6c[_0x518f7a(0x226)](storeName)[_0x518f7a(0x297)](_0x38d5b0,_0x189d25),_0x3d4e6c[_0x518f7a(0x2a3)]=()=>_0x293d41(),_0x3d4e6c[_0x492355(0x149)]=()=>_0x1b4118(_0x3d4e6c[_0x492355(0x1e8)]);});}async function idbGet(_0x34a0ee){const _0x5afd3e=await openDB();return new Promise((_0x2ef6a4,_0x1c55ff)=>{const _0x358be0=a0_0xce2f,_0x138cd3=a0_0x1925,_0x56e804=_0x5afd3e[_0x138cd3(0x27f)](storeName,_0x138cd3(0x223)),_0x4a62eb=_0x56e804[_0x138cd3(0x226)](storeName)[_0x138cd3(0x2b8)](_0x34a0ee);_0x4a62eb[_0x138cd3(0x260)]=()=>_0x2ef6a4(_0x4a62eb[_0x358be0(0x219)]),_0x4a62eb[_0x138cd3(0x1c5)]=()=>_0x1c55ff(_0x4a62eb[_0x138cd3(0x181)]);});}async function idbDelete(_0x43a511){const _0x1bde98=await openDB();return new Promise((_0x17d9f7,_0x22b829)=>{const _0x24e86d=a0_0xce2f,_0x4865de=a0_0x1925,_0x2aab2b=_0x1bde98[_0x24e86d(0x13f)](storeName,_0x24e86d(0x130));_0x2aab2b[_0x4865de(0x226)](storeName)['delete'](_0x43a511),_0x2aab2b[_0x4865de(0x2a3)]=()=>_0x17d9f7(),_0x2aab2b[_0x4865de(0x1c5)]=()=>_0x22b829(_0x2aab2b[_0x24e86d(0x1e8)]);});}async function idbClear(){const _0x270b1c=await openDB();return new Promise((_0x336785,_0x40f2c0)=>{const _0x4a8926=a0_0xce2f,_0x2188b2=a0_0x1925,_0x2b0053=_0x270b1c[_0x2188b2(0x27f)](storeName,_0x2188b2(0x259));_0x2b0053[_0x2188b2(0x226)](storeName)[_0x2188b2(0x1e0)](),_0x2b0053[_0x4a8926(0x220)]=()=>_0x336785(),_0x2b0053[_0x2188b2(0x1c5)]=()=>_0x40f2c0(_0x2b0053['error']);});}function saveProjectFile(){const _0x2c6e68=a0_0x5049d9,_0x2a184e=a0_0x38aafa,_0x372322={'projects':projects[_0x2a184e(0x294)](_0x3e7a4e=>({'width':_0x3e7a4e[_0x2a184e(0x1b8)],'height':_0x3e7a4e[_0x2a184e(0x27c)],'name':_0x3e7a4e[_0x2a184e(0x2e6)]||'','activeFrame':_0x3e7a4e[_0x2a184e(0x2a5)],'frames':_0x3e7a4e[_0x2a184e(0x2b3)][_0x2a184e(0x294)](_0x3fa98a=>({'activeLayer':_0x3fa98a[_0x2a184e(0x1b5)],'layers':_0x3fa98a[_0x2c6e68(0x13d)][_0x2a184e(0x294)](_0x84487a=>_0x84487a[_0x2a184e(0x1df)]())}))})),'activeProject':activeProject},_0x373acc=new Blob([JSON[_0x2a184e(0x1e5)](_0x372322)],{'type':_0x2a184e(0x299)}),_0x2748e5=document[_0x2a184e(0x1d6)]('a');_0x2748e5['download']=_0x2c6e68(0x1d9),_0x2748e5[_0x2a184e(0x1c8)]=URL[_0x2a184e(0x201)](_0x373acc),_0x2748e5[_0x2a184e(0x2ed)]();}function a0_0x1925(_0x198c66,_0x3a18ce){_0x198c66=_0x198c66-0x17d;const _0x545443=a0_0x5ad1();let _0x5bc35f=_0x545443[_0x198c66];return _0x5bc35f;}function saveProjectFile(){const _0x2f4f94=a0_0x5049d9,_0x3a4830=a0_0x38aafa,_0x8e8c04={'projects':projects[_0x3a4830(0x294)](_0x2f9d6a=>({'width':_0x2f9d6a[_0x2f4f94(0x190)],'height':_0x2f9d6a[_0x3a4830(0x27c)],'name':_0x2f9d6a[_0x3a4830(0x2e6)]||'','activeFrame':_0x2f9d6a[_0x3a4830(0x2a5)],'frames':_0x2f9d6a[_0x3a4830(0x2b3)][_0x3a4830(0x294)](_0x1d8c85=>({'activeLayer':_0x1d8c85[_0x3a4830(0x1b5)],'layers':_0x1d8c85[_0x3a4830(0x262)][_0x3a4830(0x294)](_0x462f68=>_0x462f68[_0x3a4830(0x1df)]())}))})),'activeProject':activeProject},_0x21f7f9=new Blob([JSON[_0x3a4830(0x1e5)](_0x8e8c04)],{'type':_0x3a4830(0x299)}),_0x33fec6=document[_0x3a4830(0x1d6)]('a');_0x33fec6[_0x3a4830(0x215)]=_0x3a4830(0x2bf),_0x33fec6[_0x3a4830(0x1c8)]=URL[_0x3a4830(0x201)](_0x21f7f9),_0x33fec6[_0x3a4830(0x2ed)]();}async function saveProjectToIDB(){const _0x15c848=a0_0x5049d9,_0x1d884b=a0_0x38aafa,_0x3939bd={'projects':projects[_0x15c848(0x18f)](_0x279c0a=>({'width':_0x279c0a[_0x1d884b(0x1b8)],'height':_0x279c0a[_0x1d884b(0x27c)],'name':_0x279c0a[_0x1d884b(0x2e6)]||'','activeFrame':_0x279c0a[_0x1d884b(0x2a5)],'frames':_0x279c0a[_0x1d884b(0x2b3)][_0x1d884b(0x294)](_0x1c1e58=>({'activeLayer':_0x1c1e58[_0x1d884b(0x1b5)],'layers':_0x1c1e58[_0x1d884b(0x262)][_0x15c848(0x18f)](_0xea574e=>_0xea574e[_0x1d884b(0x1df)]())}))})),'activeProject':activeProject};try{await idbSet(_0x15c848(0x11b),_0x3939bd),console[_0x15c848(0x1a0)](_0x1d884b(0x21c));}catch(_0x597982){console[_0x1d884b(0x181)](_0x15c848(0x133),_0x597982);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x38aafa(0x21d)](a0_0x38aafa(0x22c),_0x53c33a=>{saveProjectToIDB();});function loadProjectFile(_0x1ef8a3){const _0xbc5939=a0_0x5049d9,_0x49e947=a0_0x38aafa,_0x1b9e30=_0x1ef8a3[_0xbc5939(0x1d3)][_0x49e947(0x23c)][0x0];if(!_0x1b9e30)return;if(_0x1b9e30[_0x49e947(0x17d)]&&_0x1b9e30[_0x49e947(0x17d)][_0x49e947(0x1a3)](_0xbc5939(0xfd))){loadStandaloneFromFile(_0x1b9e30)[_0xbc5939(0xf1)](_0x93e76d=>{const _0x3bbda0=_0x49e947;alert(_0x3bbda0(0x283)+(_0x93e76d[_0x3bbda0(0x2e6)]||'ÁîªÂÉè'));})[_0x49e947(0x1c7)](_0x489b04=>{const _0x1d961c=_0x49e947;console[_0x1d961c(0x2c1)](_0x489b04),alert(_0x1d961c(0x2d4));});return;}const _0x2c60c6=new FileReader();_0x2c60c6[_0x49e947(0x185)]=function(_0x4a13e2){const _0x2fe718=_0x49e947;try{const _0x47d890=JSON[_0x2fe718(0x288)](_0x4a13e2[_0x2fe718(0x2e5)][_0x2fe718(0x192)]);projects=_0x47d890[_0x2fe718(0x24f)][_0x2fe718(0x294)]((_0x37c9ee,_0xb4d0da)=>{const _0x24f729=a0_0xce2f,_0x382c09=_0x2fe718;let _0x4b4a42=createProject(_0x37c9ee[_0x24f729(0x190)],_0x37c9ee[_0x382c09(0x27c)],_0x37c9ee[_0x382c09(0x2e6)]||'ÁîªÂÉè'+(_0xb4d0da+0x1));return _0x4b4a42[_0x382c09(0x2b3)]=_0x37c9ee[_0x24f729(0x17f)][_0x382c09(0x294)](_0x9b1e5d=>{const _0x419dd7=_0x24f729,_0x1bab38=_0x382c09;let _0x3c6b31={'layers':[],'activeLayer':_0x9b1e5d[_0x1bab38(0x1b5)],'layerHistories':[],'layerRedoStacks':[]};for(let _0xd1dff4=0x0;_0xd1dff4<_0x9b1e5d[_0x419dd7(0x13d)][_0x419dd7(0xf5)];_0xd1dff4++){let _0x271f57=new Image();_0x271f57[_0x1bab38(0x1b3)]=_0x9b1e5d[_0x1bab38(0x262)][_0xd1dff4];let _0x51dfb1=document[_0x1bab38(0x1d6)](_0x1bab38(0x19d));_0x51dfb1[_0x1bab38(0x1b8)]=_0x37c9ee[_0x1bab38(0x1b8)]*cellSize,_0x51dfb1['height']=_0x37c9ee[_0x1bab38(0x27c)]*cellSize,_0x271f57[_0x1bab38(0x185)]=()=>{const _0x5845e8=_0x1bab38;let _0x59e819=_0x51dfb1[_0x5845e8(0x2c6)]('2d');_0x59e819['clearRect'](0x0,0x0,_0x51dfb1[_0x5845e8(0x1b8)],_0x51dfb1[_0x5845e8(0x27c)]),_0x59e819[_0x5845e8(0x1ff)](_0x271f57,0x0,0x0);},_0x271f57['onload'](),_0x3c6b31[_0x1bab38(0x262)][_0x1bab38(0x278)](_0x51dfb1),_0x3c6b31[_0x419dd7(0x195)][_0x1bab38(0x278)]([]),_0x3c6b31[_0x1bab38(0x2d0)][_0x1bab38(0x278)]([]);}return _0x3c6b31;}),_0x4b4a42[_0x382c09(0x2a5)]=_0x37c9ee[_0x24f729(0x12c)],_0x4b4a42[_0x24f729(0x1c1)]=_0x37c9ee[_0x382c09(0x2e6)]||'ÁîªÂÉè'+(_0xb4d0da+0x1),_0x4b4a42;}),activeProject=_0x47d890[_0x2fe718(0x23d)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x4e14fa){alert(_0x2fe718(0x211));}},_0x2c60c6[_0xbc5939(0x197)](_0x1b9e30);}async function loadProjectFromIDB(){const _0x4a5407=a0_0x5049d9,_0x43de72=a0_0x38aafa;try{const _0x123a6e=await idbGet(_0x43de72(0x2e9));if(!_0x123a6e)return;projects=_0x123a6e['projects'][_0x4a5407(0x18f)]((_0x1a04e5,_0x642b49)=>{const _0x246c90=_0x43de72;let _0x51fdfe=createProject(_0x1a04e5[_0x246c90(0x1b8)],_0x1a04e5[_0x246c90(0x27c)],_0x1a04e5['name']||'ÁîªÂÉè'+(_0x642b49+0x1));return _0x51fdfe[_0x246c90(0x2b3)]=_0x1a04e5[_0x246c90(0x2b3)][_0x246c90(0x294)](_0x483b78=>{const _0x4d2bea=a0_0xce2f,_0x466661=_0x246c90;let _0x266d3c={'layers':[],'activeLayer':_0x483b78[_0x4d2bea(0x215)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x3850ad=0x0;_0x3850ad<_0x483b78[_0x466661(0x262)][_0x466661(0x1c4)];_0x3850ad++){let _0x2fcb0c=new Image();_0x2fcb0c[_0x466661(0x1b3)]=_0x483b78[_0x466661(0x262)][_0x3850ad];let _0x3ec36c=document[_0x4d2bea(0x1f6)](_0x466661(0x19d));_0x3ec36c[_0x4d2bea(0x190)]=_0x1a04e5['width']*cellSize,_0x3ec36c[_0x466661(0x27c)]=_0x1a04e5[_0x466661(0x27c)]*cellSize,_0x2fcb0c[_0x466661(0x185)]=()=>{const _0x231c56=_0x4d2bea,_0x3406f0=_0x466661;let _0x3df491=_0x3ec36c[_0x231c56(0x162)]('2d');_0x3df491[_0x3406f0(0x22d)](0x0,0x0,_0x3ec36c[_0x3406f0(0x1b8)],_0x3ec36c[_0x231c56(0x13b)]),_0x3df491[_0x3406f0(0x1ff)](_0x2fcb0c,0x0,0x0);},_0x266d3c[_0x466661(0x262)][_0x466661(0x278)](_0x3ec36c),_0x266d3c[_0x466661(0x29c)][_0x466661(0x278)]([]),_0x266d3c[_0x466661(0x2d0)][_0x466661(0x278)]([]);}return _0x266d3c;}),_0x51fdfe[_0x246c90(0x2a5)]=_0x1a04e5[_0x246c90(0x2a5)],_0x51fdfe[_0x246c90(0x2e6)]=_0x1a04e5['name']||'ÁîªÂÉè'+(_0x642b49+0x1),_0x51fdfe;}),activeProject=_0x123a6e[_0x43de72(0x23d)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool(_0x43de72(0x182)),console['log'](_0x43de72(0x282));}catch(_0x134342){alert(_0x43de72(0x2cd)),console[_0x4a5407(0x1e8)](_0x134342);}}function wait(_0x2735db){return new Promise(_0x276d4a=>setTimeout(_0x276d4a,_0x2735db));}function initCanvas(){const _0x4f401f=a0_0x5049d9,_0x42e5d6=a0_0x38aafa,_0x5c1733=parseInt(0x10),_0x203ee4=parseInt(0x10);let _0x28b711=getCurrentProject();_0x28b711[_0x42e5d6(0x1b8)]=_0x5c1733,_0x28b711[_0x42e5d6(0x27c)]=_0x203ee4,canvas[_0x42e5d6(0x1b8)]=_0x5c1733*cellSize,canvas[_0x42e5d6(0x27c)]=_0x203ee4*cellSize,_0x28b711[_0x42e5d6(0x262)]=[],_0x28b711[_0x42e5d6(0x29c)]=[],_0x28b711[_0x42e5d6(0x2d0)]=[];let _0x50f9df=document[_0x42e5d6(0x1d6)](_0x42e5d6(0x19d));_0x50f9df[_0x42e5d6(0x1b8)]=_0x5c1733*cellSize,_0x50f9df[_0x42e5d6(0x27c)]=_0x203ee4*cellSize,_0x28b711[_0x42e5d6(0x262)][_0x4f401f(0x19e)](_0x50f9df),_0x28b711[_0x42e5d6(0x29c)][_0x42e5d6(0x278)]([]),_0x28b711[_0x42e5d6(0x2d0)][_0x4f401f(0x19e)]([]),_0x28b711[_0x42e5d6(0x1b5)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x42e5d6(0x1f5)]=null,canvas[_0x4f401f(0x1e1)]=null,canvas[_0x42e5d6(0x238)]=null,canvas[_0x42e5d6(0x1b7)]=null,canvas[_0x42e5d6(0x21a)]=null,canvas[_0x42e5d6(0x267)]=null,canvas[_0x42e5d6(0x212)]=null,canvas[_0x42e5d6(0x2ac)]=null,canvas[_0x42e5d6(0x2a6)](_0x4f401f(0x1d8),handleTouchStart),canvas[_0x42e5d6(0x2a6)](_0x42e5d6(0x28f),handleTouchMove),canvas[_0x42e5d6(0x2a6)](_0x42e5d6(0x1e1),handleTouchEnd),canvas[_0x42e5d6(0x2a6)](_0x42e5d6(0x1b6),handleTouchEnd),canvas[_0x42e5d6(0x1f5)]=handleMouseDown,canvas[_0x42e5d6(0x239)]=handleMouseMove,canvas[_0x42e5d6(0x238)]=handleMouseUp,canvas[_0x42e5d6(0x1b7)]=handleMouseUp,canvas[_0x42e5d6(0x21a)]=handleTouchStart,canvas[_0x42e5d6(0x267)]=handleTouchMove,canvas['ontouchend']=handleTouchEnd,canvas[_0x42e5d6(0x2ac)]=handleTouchEnd,canvas[_0x42e5d6(0x21d)](_0x42e5d6(0x1bb),handleTouchStart,{'passive':![]}),canvas[_0x42e5d6(0x21d)](_0x4f401f(0x205),handleTouchMove,{'passive':![]}),canvas[_0x42e5d6(0x21d)](_0x42e5d6(0x1e1),handleTouchEnd,{'passive':![]}),canvas['addEventListener'](_0x42e5d6(0x1b6),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x4975d0=a0_0x5049d9,_0x43d03f=a0_0x38aafa,_0x352c02=document[_0x43d03f(0x275)](_0x43d03f(0x230));if(!_0x352c02)return;_0x352c02[_0x43d03f(0x25f)]='',PALETTE_COLORS[_0x43d03f(0x1bd)]((_0x457ca8,_0x179d9d)=>{const _0x20f04a=a0_0xce2f,_0x102b99=_0x43d03f,_0x45b502=document[_0x102b99(0x1d6)](_0x102b99(0x2a4));_0x45b502[_0x20f04a(0x15c)]=_0x20f04a(0x1fc),_0x457ca8===_0x20f04a(0x1a5)||_0x457ca8===_0x102b99(0x25c)?(_0x45b502[_0x102b99(0x1f8)][_0x102b99(0x2dc)]='repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px',_0x45b502[_0x102b99(0x198)]='ÈÄèÊòé',_0x45b502[_0x102b99(0x25f)]=_0x102b99(0x224)):(_0x45b502[_0x102b99(0x1f8)][_0x102b99(0x2dc)]=_0x457ca8,_0x45b502[_0x20f04a(0x124)]=_0x457ca8),_0x45b502[_0x102b99(0x234)]=()=>{const _0xddd69=_0x102b99;currentColor=_0x457ca8,_0x457ca8===_0xddd69(0x1f3)||_0x457ca8===_0xddd69(0x25c)?document[_0xddd69(0x275)](_0xddd69(0x1a0))[_0xddd69(0x24e)]=_0xddd69(0x1ba):document[_0xddd69(0x275)](_0xddd69(0x1a0))[_0xddd69(0x24e)]=_0x457ca8,document[_0xddd69(0x29b)](_0xddd69(0x1e6))[_0xddd69(0x1bd)](_0x5030c6=>_0x5030c6[_0xddd69(0x22b)][_0xddd69(0x187)](_0xddd69(0x2dd))),_0x45b502[_0xddd69(0x22b)][_0xddd69(0x1de)](_0xddd69(0x2dd));};if(_0x179d9d!==0x0){const _0x183011=document[_0x102b99(0x1d6)](_0x102b99(0x28e));_0x183011[_0x102b99(0x221)]='√ó',_0x183011[_0x102b99(0x252)]=_0x102b99(0x2c7),_0x183011[_0x102b99(0x198)]=_0x102b99(0x2e7),_0x183011[_0x102b99(0x234)]=_0x370e4e=>{const _0x3052b2=_0x102b99;_0x370e4e[_0x3052b2(0x214)](),PALETTE_COLORS[_0x3052b2(0x1c4)]>0x2&&(PALETTE_COLORS[_0x3052b2(0x2b7)](_0x179d9d,0x1),createPalette());},_0x45b502[_0x102b99(0x237)](_0x183011);}_0x352c02[_0x102b99(0x237)](_0x45b502);});const _0x419b19=document[_0x43d03f(0x1d6)](_0x43d03f(0x2a4));_0x419b19['className']=_0x43d03f(0x20b),_0x419b19[_0x43d03f(0x198)]=_0x43d03f(0x2cc),_0x419b19[_0x43d03f(0x25f)]='+',_0x419b19[_0x43d03f(0x234)]=_0x13a9a7=>{const _0x1a4f62=a0_0xce2f,_0x48a8de=_0x43d03f;_0x13a9a7[_0x1a4f62(0x15a)]();const _0x1a7a16=document[_0x48a8de(0x1d6)](_0x48a8de(0x295));_0x1a7a16[_0x48a8de(0x17d)]=_0x48a8de(0x1ca),_0x1a7a16['style'][_0x48a8de(0x2f0)]=_0x48a8de(0x1b1);let _0x54e0d1=![];_0x1a7a16[_0x48a8de(0x28a)]=_0x6765e5=>{const _0x17fdf2=_0x1a4f62,_0x1e9c63=_0x48a8de;if(!_0x54e0d1){PALETTE_COLORS['unshift'](_0x6765e5[_0x1e9c63(0x2e5)]['value']);if(PALETTE_COLORS[_0x17fdf2(0xf5)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x1e9c63(0x1f6)](0x0,0x18);savePaletteToDB(),createPalette(),_0x54e0d1=!![],_0x1a7a16[_0x1e9c63(0x187)]();}},_0x1a7a16[_0x48a8de(0x21d)](_0x1a4f62(0x1c0),()=>{const _0x37200d=_0x48a8de;if(!_0x54e0d1)_0x1a7a16[_0x37200d(0x187)]();}),_0x1a7a16[_0x48a8de(0x21d)]('click',_0x1f9534=>_0x1f9534[_0x1a4f62(0x15a)]()),document[_0x48a8de(0x1e8)][_0x48a8de(0x237)](_0x1a7a16),_0x1a7a16[_0x48a8de(0x2be)](),_0x1a7a16[_0x48a8de(0x2ed)]();},_0x352c02[_0x43d03f(0x1d3)](_0x419b19,_0x352c02[_0x4975d0(0x216)]);let _0x23995d=document[_0x4975d0(0x192)](_0x4975d0(0x1e2));!_0x23995d&&(_0x23995d=document[_0x4975d0(0x1f6)](_0x43d03f(0x2c9)),_0x23995d['id']=_0x43d03f(0x25e),_0x23995d[_0x43d03f(0x252)]='palette-toolbar',_0x352c02[_0x4975d0(0xfb)][_0x43d03f(0x237)](_0x23995d)),_0x23995d[_0x4975d0(0x1ea)]=_0x43d03f(0x253)+(currentTool===_0x43d03f(0x182)?_0x43d03f(0x1e4):'')+_0x43d03f(0x2ad)+(currentTool===_0x43d03f(0x2e0)?_0x43d03f(0x1e4):'')+_0x4975d0(0x168)+(currentTool===_0x43d03f(0x1a8)?_0x43d03f(0x1e4):'')+_0x43d03f(0x1d9)+(penSize==0x1?_0x4975d0(0x213):'')+_0x43d03f(0x1dd)+(penSize==0x2?_0x43d03f(0x298):'')+_0x43d03f(0x18e)+(penSize==0x3?_0x43d03f(0x298):'')+_0x4975d0(0x1a2)+(penSize==0x4?_0x43d03f(0x298):'')+_0x4975d0(0x1ac)+(penMode===_0x4975d0(0x150)?_0x43d03f(0x298):'')+'>ÂõõËßí„Éö„É≥</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22'+(penMode===_0x43d03f(0x2ea)?_0x4975d0(0x213):'')+_0x4975d0(0x1ab)+Math[_0x43d03f(0x26f)](currentAlpha*0x64)+_0x43d03f(0x233)+Math[_0x43d03f(0x26f)](currentAlpha*0x64)+_0x43d03f(0x1eb),_0x23995d[_0x4975d0(0x126)](_0x43d03f(0x246))[_0x43d03f(0x222)]=_0xdabf39=>setPenSize(_0xdabf39[_0x4975d0(0x1d3)][_0x43d03f(0x24e)]),_0x23995d[_0x43d03f(0x2c0)](_0x43d03f(0x2b2))[_0x43d03f(0x222)]=_0xdedfca=>setPenMode(_0xdedfca[_0x43d03f(0x2e5)][_0x43d03f(0x24e)]),_0x23995d[_0x43d03f(0x29b)]('.tool-btn')[_0x43d03f(0x1bd)](_0x59f56e=>{const _0x211d96=_0x4975d0,_0x455b98=_0x43d03f;_0x59f56e[_0x455b98(0x234)]=()=>setTool(_0x59f56e['dataset'][_0x211d96(0xe7)]);}),_0x23995d[_0x43d03f(0x2c0)](_0x43d03f(0x241))[_0x43d03f(0x28a)]=_0x570c98=>{const _0x5a20b7=_0x4975d0,_0x5eca7a=_0x43d03f;setAlpha(_0x570c98[_0x5eca7a(0x2e5)][_0x5a20b7(0x12e)]),_0x23995d[_0x5eca7a(0x2c0)](_0x5eca7a(0x227))[_0x5eca7a(0x221)]=_0x570c98[_0x5eca7a(0x2e5)][_0x5eca7a(0x24e)]+'%';let _0x1c50c2=document[_0x5a20b7(0x192)](_0x5eca7a(0x1d8)),_0x4bdf93=document[_0x5eca7a(0x275)](_0x5eca7a(0x213));if(_0x1c50c2)_0x1c50c2[_0x5a20b7(0x12e)]=_0x570c98[_0x5eca7a(0x2e5)][_0x5eca7a(0x24e)];if(_0x4bdf93)_0x4bdf93[_0x5eca7a(0x221)]=_0x570c98[_0x5a20b7(0x1d3)][_0x5eca7a(0x24e)]+'%';};}function setAlpha(_0x35e6f3){const _0x389d98=a0_0x5049d9,_0xa16788=a0_0x38aafa;let _0x67d608=Math[_0xa16788(0x2c3)](0x0,Math[_0xa16788(0x1b2)](0x64,parseInt(_0x35e6f3,0xa)||0x0));currentAlpha=_0x67d608/0x64;let _0x27dee0=document[_0xa16788(0x275)](_0xa16788(0x1d8)),_0x18319f=document[_0xa16788(0x275)](_0x389d98(0x1ef));if(_0x27dee0)_0x27dee0[_0x389d98(0x12e)]=_0x67d608;if(_0x18319f)_0x18319f[_0xa16788(0x221)]=_0x67d608+'%';let _0x1534ef=document[_0xa16788(0x275)](_0xa16788(0x247)),_0xae2dfd=document[_0xa16788(0x275)](_0xa16788(0x245));if(_0x1534ef)_0x1534ef[_0xa16788(0x24e)]=_0x67d608;if(_0xae2dfd)_0xae2dfd[_0xa16788(0x221)]=_0x67d608+'%';}async function savePaletteToDB(){const _0x3515c2=a0_0x5049d9,_0x35e412=a0_0x38aafa;try{await idbSet(_0x35e412(0x2e1),PALETTE_COLORS);}catch(_0x2d4a50){console[_0x35e412(0x181)](_0x3515c2(0x1a8),_0x2d4a50);}}async function loadPaletteFromDB(){const _0x1e9fb2=a0_0x38aafa;try{const _0xbec390=await idbGet(_0x1e9fb2(0x2e1));Array[_0x1e9fb2(0x19c)](_0xbec390)&&_0xbec390[_0x1e9fb2(0x1c4)]&&(PALETTE_COLORS=_0xbec390);}catch(_0x399d18){console[_0x1e9fb2(0x181)](_0x1e9fb2(0x195),_0x399d18);}}document[a0_0x5049d9(0x1a3)](a0_0x5049d9(0x113),()=>{const _0x3c16df=a0_0x5049d9,_0x3f9168=a0_0x38aafa,_0x39d8bb=document[_0x3c16df(0x192)](_0x3f9168(0x1a0));_0x39d8bb&&(_0x39d8bb[_0x3f9168(0x28a)]=_0xac0800=>{const _0x262a99=_0x3f9168;currentColor=_0xac0800[_0x262a99(0x2e5)][_0x262a99(0x24e)],document[_0x262a99(0x29b)](_0x262a99(0x1e6))[_0x262a99(0x1bd)](_0x4b1db3=>_0x4b1db3[_0x262a99(0x22b)][_0x262a99(0x187)](_0x262a99(0x2dd)));});const _0x3c4a0e=document[_0x3f9168(0x275)](_0x3f9168(0x1d8)),_0x2a851b=document[_0x3f9168(0x275)](_0x3f9168(0x213));_0x3c4a0e&&_0x2a851b&&(_0x3c4a0e[_0x3c16df(0x1e5)]=_0x580892=>{const _0x57bf06=_0x3c16df,_0x3f5501=_0x3f9168;setAlpha(_0x580892[_0x3f5501(0x2e5)][_0x3f5501(0x24e)]),_0x2a851b[_0x3f5501(0x221)]=_0x580892[_0x3f5501(0x2e5)][_0x57bf06(0x12e)]+'%';let _0x467b2d=document[_0x57bf06(0x192)](_0x3f5501(0x247)),_0x4ec65f=document[_0x57bf06(0x192)](_0x3f5501(0x245));if(_0x467b2d)_0x467b2d['value']=_0x580892[_0x3f5501(0x2e5)][_0x3f5501(0x24e)];if(_0x4ec65f)_0x4ec65f[_0x3f5501(0x221)]=_0x580892[_0x3f5501(0x2e5)][_0x57bf06(0x12e)]+'%';});});async function convertToGIF(_0xf47f9,_0x5b715b=0xc8,_0x3f8487=a0_0x38aafa(0x1d1)){const _0x1ec177=a0_0x38aafa,_0x2c660a=new window[(_0x1ec177(0x190))]({'workers':0x2,'quality':0xa,'workerScript':'lib/gif.worker.js'});_0xf47f9[_0x1ec177(0x1bd)](_0x110bd8=>_0x2c660a[_0x1ec177(0x2a2)](_0x110bd8,{'delay':_0x5b715b})),_0x2c660a['on'](_0x1ec177(0x235),_0xe52801=>{const _0x1c56f8=a0_0xce2f,_0x1dc6bb=_0x1ec177,_0x104413=URL[_0x1c56f8(0x159)](_0xe52801),_0x441620=document[_0x1dc6bb(0x1d6)]('a');_0x441620[_0x1c56f8(0x1a4)]=_0x104413,_0x441620['download']=_0x3f8487,document[_0x1dc6bb(0x1e8)][_0x1c56f8(0x1c2)](_0x441620),_0x441620[_0x1dc6bb(0x2ed)](),setTimeout(()=>{const _0x3fdc86=_0x1dc6bb;document[_0x3fdc86(0x1e8)][_0x3fdc86(0x1dc)](_0x441620),URL[_0x3fdc86(0x255)](_0x104413);},0x3e8);}),_0x2c660a[_0x1ec177(0x1c1)]();}function makeAPNGBlob(_0x444816,_0x3e0cf8,_0x98dae8,_0x4692c7=0xc8){const _0x25f514=a0_0x5049d9,_0x427617=a0_0x38aafa,_0x340a2a=[],_0x12ff0a=[],_0x491813=document[_0x427617(0x1d6)](_0x427617(0x19d));_0x491813[_0x25f514(0x190)]=_0x3e0cf8,_0x491813[_0x25f514(0x13b)]=_0x98dae8;const _0x15903d=_0x491813[_0x427617(0x2c6)]('2d');_0x444816[_0x427617(0x1bd)](_0x20e45f=>{const _0x31d5fd=_0x25f514,_0x349250=_0x427617;_0x15903d[_0x349250(0x22d)](0x0,0x0,_0x3e0cf8,_0x98dae8),_0x15903d[_0x31d5fd(0x230)](_0x20e45f,0x0,0x0,_0x3e0cf8,_0x98dae8);const _0x500130=_0x15903d[_0x349250(0x287)](0x0,0x0,_0x3e0cf8,_0x98dae8)[_0x349250(0x261)][_0x31d5fd(0x16d)];_0x340a2a[_0x31d5fd(0x19e)](_0x500130),_0x12ff0a[_0x31d5fd(0x19e)](_0x4692c7);});const _0x25d76e=window[_0x427617(0x21e)][_0x427617(0x1e2)](_0x340a2a,_0x3e0cf8,_0x98dae8,0x0,_0x12ff0a);return new Blob([_0x25d76e],{'type':_0x427617(0x18f)});}function convertToAPNG(_0x135f5d,_0x32d4cf,_0x15380e,_0x20ef0c=0xc8,_0x1957bc=a0_0x38aafa(0x2ef)){const _0x45b959=a0_0x5049d9,_0x179d1c=a0_0x38aafa,_0x4b836e=makeAPNGBlob(_0x135f5d,_0x32d4cf,_0x15380e,_0x20ef0c),_0x49ba83=URL[_0x45b959(0x159)](_0x4b836e),_0x1d2669=document['createElement']('a');_0x1d2669[_0x179d1c(0x1c8)]=_0x49ba83,_0x1d2669[_0x179d1c(0x215)]=_0x1957bc,document[_0x179d1c(0x1e8)][_0x179d1c(0x237)](_0x1d2669),_0x1d2669[_0x45b959(0x1c3)](),setTimeout(()=>{const _0x119433=_0x179d1c;document[_0x119433(0x1e8)][_0x119433(0x1dc)](_0x1d2669),URL[_0x119433(0x255)](_0x49ba83);},0x3e8);}async function loadImages(_0x544e6c){const _0x5a3ed1=a0_0x38aafa,_0xd29da2=await Promise['all'](_0x544e6c[_0x5a3ed1(0x294)](_0x4adf47=>{return new Promise(_0x48a255=>{const _0x29d8e5=a0_0x1925,_0x5d500e=new Image();_0x5d500e[_0x29d8e5(0x290)]=_0x29d8e5(0x26a),_0x5d500e[_0x29d8e5(0x1b3)]=_0x4adf47,_0x5d500e[_0x29d8e5(0x185)]=()=>_0x48a255(_0x5d500e);});}));return _0xd29da2;}function exportSpriteSheetDialog(){const _0x5738ad=a0_0x5049d9,_0x88554b=a0_0x38aafa;let _0x4a567d=prompt(_0x5738ad(0x1a1),'1');if(_0x4a567d===null)return;let _0x594f47=Math[_0x88554b(0x2c3)](0x1,parseInt(_0x4a567d,0xa)||0x1),_0x1ca3c0=prompt(_0x88554b(0x264),'0');if(_0x1ca3c0===null)return;let _0x3b0d99=Math[_0x88554b(0x2c3)](0x0,parseInt(_0x1ca3c0,0xa)||0x0);exportSpriteSheet(_0x594f47,_0x3b0d99);}function exportSpriteSheet(_0x7dacde=0x1,_0x29bd57=0x0){const _0x557bd5=a0_0x5049d9,_0x3478c4=a0_0x38aafa,_0x2c1951=getCurrentProject();if(!_0x2c1951){alert(_0x3478c4(0x272));return;}const _0xd49f39=_0x2c1951['frames'];if(!_0xd49f39||_0xd49f39[_0x3478c4(0x1c4)]===0x0){alert(_0x3478c4(0x2cf));return;}const _0x3409fd=_0x2c1951[_0x3478c4(0x1b8)]*cellSize,_0x4e446f=_0x2c1951[_0x3478c4(0x27c)]*cellSize,_0x1e28bb=_0x3409fd*_0xd49f39[_0x3478c4(0x1c4)]*_0x7dacde+Math[_0x3478c4(0x2c3)](0x0,_0xd49f39[_0x3478c4(0x1c4)]-0x1)*_0x29bd57,_0xbea758=_0x4e446f*_0x7dacde,_0xcdab69=document['createElement'](_0x3478c4(0x19d));_0xcdab69[_0x3478c4(0x1b8)]=_0x1e28bb,_0xcdab69[_0x557bd5(0x13b)]=_0xbea758;const _0x26a958=_0xcdab69[_0x3478c4(0x2c6)]('2d');_0x26a958[_0x3478c4(0x22d)](0x0,0x0,_0xcdab69[_0x3478c4(0x1b8)],_0xcdab69[_0x3478c4(0x27c)]);let _0xf4d512=0x0;for(let _0xb08d7b=0x0;_0xb08d7b<_0xd49f39[_0x3478c4(0x1c4)];_0xb08d7b++){let _0x35fe9c=document[_0x3478c4(0x1d6)]('canvas');_0x35fe9c[_0x557bd5(0x190)]=_0x3409fd,_0x35fe9c[_0x3478c4(0x27c)]=_0x4e446f;let _0x193a8e=_0x35fe9c[_0x3478c4(0x2c6)]('2d');for(let _0x1239d6=0x0;_0x1239d6<_0xd49f39[_0xb08d7b][_0x557bd5(0x13d)][_0x557bd5(0xf5)];_0x1239d6++){_0x193a8e[_0x3478c4(0x1ff)](_0xd49f39[_0xb08d7b][_0x3478c4(0x262)][_0x1239d6],0x0,0x0);}_0x7dacde===0x1&&_0x29bd57===0x0?(_0x26a958[_0x557bd5(0x230)](_0x35fe9c,_0xf4d512,0x0),_0xf4d512+=_0x3409fd):(_0x26a958[_0x3478c4(0x1ff)](_0x35fe9c,0x0,0x0,_0x3409fd,_0x4e446f,_0xf4d512,0x0,_0x3409fd*_0x7dacde,_0x4e446f*_0x7dacde),_0xf4d512+=_0x3409fd*_0x7dacde),_0xb08d7b<_0xd49f39[_0x557bd5(0xf5)]-0x1&&_0x29bd57>0x0&&(_0xf4d512+=_0x29bd57);}const _0x34d07b=(_0x2c1951[_0x3478c4(0x2e6)]||_0x3478c4(0x2ab))[_0x557bd5(0x127)](/[\\/:*?"<>|]/g,'_'),_0x3ea856=document[_0x3478c4(0x1d6)]('a');_0x3ea856['href']=_0xcdab69[_0x557bd5(0x1b5)](_0x557bd5(0xe0)),_0x3ea856[_0x3478c4(0x215)]=_0x34d07b+_0x3478c4(0x217),document[_0x3478c4(0x1e8)][_0x3478c4(0x237)](_0x3ea856),_0x3ea856[_0x3478c4(0x2ed)](),setTimeout(()=>{const _0x1b1102=_0x557bd5;document[_0x1b1102(0x1c5)][_0x1b1102(0x136)](_0x3ea856);},0x3e8);}const NEZUMI_METADATA_SIG=a0_0x38aafa(0x258);function appendMetadataToBlob(_0x55c7ec,_0x19a148){const _0x5ccbd7=a0_0x38aafa,_0x18b6c3=new TextEncoder(),_0x4a0e53=_0x18b6c3[_0x5ccbd7(0x1e2)](NEZUMI_METADATA_SIG),_0xc45c90=_0x18b6c3[_0x5ccbd7(0x1e2)](JSON[_0x5ccbd7(0x1e5)](_0x19a148));return new Blob([_0x55c7ec,_0x4a0e53,_0xc45c90],{'type':_0x55c7ec[_0x5ccbd7(0x17d)]||_0x5ccbd7(0x2cb)});}function indexOfSubarray(_0x724207,_0x95c266){const _0x409205=a0_0x5049d9,_0x41ccca=a0_0x38aafa;for(let _0x1cf9ce=0x0;_0x1cf9ce<=_0x724207[_0x41ccca(0x1c4)]-_0x95c266[_0x409205(0xf5)];_0x1cf9ce++){let _0x588931=!![];for(let _0x26f1f7=0x0;_0x26f1f7<_0x95c266[_0x41ccca(0x1c4)];_0x26f1f7++){if(_0x724207[_0x1cf9ce+_0x26f1f7]!==_0x95c266[_0x26f1f7]){_0x588931=![];break;}}if(_0x588931)return _0x1cf9ce;}return-0x1;}function extractMetadataFromArrayBuffer(_0x1fb769){const _0xbc9dd9=a0_0x5049d9,_0x220892=a0_0x38aafa,_0x37391a=new TextEncoder()[_0x220892(0x1e2)](NEZUMI_METADATA_SIG),_0x1b9cda=new Uint8Array(_0x1fb769),_0x3ffe4e=indexOfSubarray(_0x1b9cda,_0x37391a);if(_0x3ffe4e===-0x1)return null;const _0x5c97d7=_0x1b9cda[_0x220892(0x236)](_0x3ffe4e+_0x37391a[_0xbc9dd9(0xf5)]);try{const _0x4482d6=new TextDecoder()[_0x220892(0x27e)](_0x5c97d7);return JSON[_0x220892(0x288)](_0x4482d6);}catch(_0x3081cf){return null;}}async function exportStandalone(){const _0x30e9c0=a0_0x5049d9,_0x455344=a0_0x38aafa;let _0x4223e7=getCurrentProject(),_0xd48e88=_0x4223e7[_0x30e9c0(0x17f)],_0x581db2=_0x4223e7[_0x455344(0x1b8)]*cellSize,_0x20284a=_0x4223e7[_0x455344(0x27c)]*cellSize;const _0x2b8c74=_0xd48e88[_0x455344(0x294)](_0x312965=>{const _0x489c8f=_0x30e9c0,_0x11dce3=_0x455344;let _0x15bf03=document[_0x11dce3(0x1d6)](_0x11dce3(0x19d));_0x15bf03[_0x11dce3(0x1b8)]=_0x581db2,_0x15bf03[_0x11dce3(0x27c)]=_0x20284a;let _0x4890e4=_0x15bf03[_0x11dce3(0x2c6)]('2d');for(let _0x213f7c=0x0;_0x213f7c<_0x312965[_0x489c8f(0x13d)][_0x11dce3(0x1c4)];_0x213f7c++){_0x4890e4[_0x11dce3(0x1ff)](_0x312965[_0x489c8f(0x13d)][_0x213f7c],0x0,0x0);}let _0x588645=new Image();return _0x588645[_0x11dce3(0x1b3)]=_0x15bf03[_0x489c8f(0x1b5)](_0x11dce3(0x1fa)),_0x588645;});await Promise[_0x455344(0x25a)](_0x2b8c74[_0x455344(0x294)](_0x2c386a=>new Promise(_0x46835a=>{const _0x3146b8=_0x455344;_0x2c386a[_0x3146b8(0x185)]=_0x46835a;})))['catch'](()=>{});const _0x51f834=(_0x4223e7[_0x455344(0x2e6)]||_0x455344(0x21f))[_0x455344(0x27d)](/[\\/:*?"<>|]/g,'_'),_0x5b6765=makeAPNGBlob(_0x2b8c74,_0x581db2,_0x20284a,animationDelay),_0x3afee6={'type':_0x455344(0x207),'version':0x1,'project':{'width':_0x4223e7[_0x455344(0x1b8)],'height':_0x4223e7[_0x455344(0x27c)],'name':_0x4223e7[_0x455344(0x2e6)]||'','activeFrame':_0x4223e7[_0x30e9c0(0x12c)],'frames':_0x4223e7[_0x455344(0x2b3)][_0x455344(0x294)](_0x4fc89e=>({'activeLayer':_0x4fc89e[_0x455344(0x1b5)],'layers':_0x4fc89e['layers'][_0x455344(0x294)](_0x15d0e2=>_0x15d0e2[_0x455344(0x1df)]())}))}},_0x1b3ff7=appendMetadataToBlob(_0x5b6765,_0x3afee6),_0x89e12a=URL[_0x455344(0x201)](_0x1b3ff7),_0x5ee1d1=document[_0x30e9c0(0x1f6)]('a');_0x5ee1d1[_0x455344(0x1c8)]=_0x89e12a,_0x5ee1d1[_0x455344(0x215)]=_0x51f834+_0x30e9c0(0x1e6),document[_0x455344(0x1e8)]['appendChild'](_0x5ee1d1),_0x5ee1d1[_0x455344(0x2ed)](),setTimeout(()=>{const _0x24c72b=_0x455344;document[_0x24c72b(0x1e8)][_0x24c72b(0x1dc)](_0x5ee1d1),URL[_0x24c72b(0x255)](_0x89e12a);},0x3e8);}function loadStandaloneFromFile(_0xc35e3b){return new Promise((_0x4f85a2,_0x333401)=>{const _0x48e822=a0_0x1925,_0x27033c=new FileReader();_0x27033c[_0x48e822(0x185)]=_0x1b6dc6=>{const _0x5a0831=a0_0xce2f,_0x284d2f=_0x48e822,_0x1476d1=_0x1b6dc6[_0x284d2f(0x2e5)][_0x284d2f(0x192)],_0x1bc8fe=extractMetadataFromArrayBuffer(_0x1476d1);if(!_0x1bc8fe||!_0x1bc8fe['project']){_0x333401(new Error(_0x284d2f(0x20f)));return;}const _0x56041f=_0x1bc8fe[_0x284d2f(0x22f)];try{const _0x12e6ff=createProject(_0x56041f[_0x284d2f(0x1b8)],_0x56041f[_0x284d2f(0x27c)],_0x56041f[_0x284d2f(0x2e6)]||'ÁîªÂÉè');_0x12e6ff[_0x284d2f(0x2b3)]=_0x56041f[_0x284d2f(0x2b3)][_0x5a0831(0x18f)](_0x3ae479=>{const _0x51e40a=_0x5a0831,_0xa25fec=_0x284d2f;let _0x2bfd2b={'layers':[],'activeLayer':_0x3ae479[_0x51e40a(0x215)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x16d28a=0x0;_0x16d28a<_0x3ae479[_0xa25fec(0x262)][_0xa25fec(0x1c4)];_0x16d28a++){let _0x3302e4=new Image();_0x3302e4[_0xa25fec(0x1b3)]=_0x3ae479[_0x51e40a(0x13d)][_0x16d28a];let _0x3c831e=document[_0x51e40a(0x1f6)](_0xa25fec(0x19d));_0x3c831e[_0xa25fec(0x1b8)]=_0x56041f['width']*cellSize,_0x3c831e[_0xa25fec(0x27c)]=_0x56041f[_0x51e40a(0x13b)]*cellSize,_0x3302e4[_0x51e40a(0x11a)]=()=>{const _0x426c42=_0x51e40a,_0x5d1507=_0xa25fec;let _0x35e11e=_0x3c831e[_0x5d1507(0x2c6)]('2d');_0x35e11e[_0x5d1507(0x22d)](0x0,0x0,_0x3c831e[_0x5d1507(0x1b8)],_0x3c831e[_0x5d1507(0x27c)]),_0x35e11e[_0x426c42(0x230)](_0x3302e4,0x0,0x0);},_0x2bfd2b[_0x51e40a(0x13d)][_0xa25fec(0x278)](_0x3c831e);}return _0x2bfd2b;}),projects[_0x284d2f(0x278)](_0x12e6ff),activeProject=projects[_0x284d2f(0x1c4)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x4f85a2(_0x12e6ff);}catch(_0x155c14){_0x333401(_0x155c14);}},_0x27033c[_0x48e822(0x1c5)]=_0x35a63b=>_0x333401(_0x35a63b),_0x27033c['readAsArrayBuffer'](_0xc35e3b);});}function toggleSection(_0x2b15c9){const _0xe9b92a=a0_0x5049d9,_0x5a8793=a0_0x38aafa,_0x4435dc=document[_0x5a8793(0x275)](_0x2b15c9),_0x39fa58=_0x4435dc[_0x5a8793(0x2c0)](_0x5a8793(0x218)),_0x5d8406=_0x4435dc[_0x5a8793(0x2c0)](_0x5a8793(0x277));_0x39fa58['style'][_0x5a8793(0x2f0)]===_0xe9b92a(0x12d)?(_0x39fa58[_0x5a8793(0x1f8)][_0x5a8793(0x2f0)]='',_0x5d8406[_0x5a8793(0x221)]='‚ñº'):(_0x39fa58[_0x5a8793(0x1f8)]['display']=_0x5a8793(0x1b1),_0x5d8406[_0x5a8793(0x221)]='‚ñ≤');}document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x293),()=>{const _0x25bae9=a0_0x5049d9,_0x4f7136=a0_0x38aafa;document[_0x25bae9(0xe9)](_0x4f7136(0x204))[_0x4f7136(0x1bd)](_0x72c40e=>_0x72c40e[_0x4f7136(0x1f8)][_0x4f7136(0x2f0)]=''),document[_0x25bae9(0xe9)](_0x25bae9(0xf6))[_0x25bae9(0x10a)](_0x51b518=>_0x51b518[_0x4f7136(0x221)]='‚ñº');}),window[a0_0x38aafa(0x21d)](a0_0x38aafa(0x251),updateMenuBtnDisplay),document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x293),updateMenuBtnDisplay);function toggleSideMenu(_0x342b3e){const _0x54c78d=a0_0x5049d9,_0x5d834a=a0_0x38aafa,_0x7b27f5=document['getElementById'](_0x54c78d(0x226)),_0x4b5a55=document[_0x5d834a(0x275)](_0x5d834a(0x183)),_0x497828=document[_0x5d834a(0x275)](_0x5d834a(0x18b)),_0x1e8497=document[_0x5d834a(0x275)](_0x5d834a(0x1b4)),_0x33ac64=_0x7b27f5[_0x5d834a(0x22b)][_0x5d834a(0x23f)]('open');let _0x18b10f=typeof _0x342b3e===_0x5d834a(0x1af)?_0x342b3e:!_0x33ac64;_0x18b10f?(_0x7b27f5[_0x54c78d(0x176)][_0x5d834a(0x1de)](_0x5d834a(0x2ec)),_0x4b5a55[_0x5d834a(0x22b)][_0x54c78d(0x189)](_0x5d834a(0x2a1)),document[_0x54c78d(0x1c5)]['style']['overflow']=_0x5d834a(0x289),document[_0x5d834a(0x1e8)][_0x5d834a(0x1f8)][_0x5d834a(0x1ec)]=_0x5d834a(0x1b1),window[_0x5d834a(0x22a)]<=0x384&&(_0x1e8497['style'][_0x5d834a(0x2f0)]=_0x5d834a(0x1d2),_0x497828['style'][_0x5d834a(0x2f0)]=_0x5d834a(0x1b1))):(_0x7b27f5['classList'][_0x54c78d(0x1e9)](_0x54c78d(0x144)),_0x4b5a55[_0x5d834a(0x22b)]['remove'](_0x5d834a(0x2a1)),document[_0x5d834a(0x1e8)][_0x5d834a(0x1f8)][_0x54c78d(0x110)]='',document[_0x5d834a(0x1e8)][_0x5d834a(0x1f8)][_0x5d834a(0x1ec)]='',window[_0x5d834a(0x22a)]<=0x384&&(_0x1e8497[_0x5d834a(0x1f8)][_0x54c78d(0x193)]=_0x5d834a(0x1b1),_0x497828[_0x54c78d(0x1bb)][_0x5d834a(0x2f0)]='block'));}function updateMenuBtnDisplay(){const _0x5a6eb4=a0_0x5049d9,_0x5d31d2=a0_0x38aafa,_0x42ac4d=document[_0x5d31d2(0x275)](_0x5a6eb4(0x226)),_0x3c0261=document['getElementById'](_0x5d31d2(0x183)),_0x2df58a=document[_0x5a6eb4(0x192)](_0x5d31d2(0x18b)),_0x4d9c85=document[_0x5d31d2(0x275)](_0x5d31d2(0x1b4));window[_0x5d31d2(0x22a)]>0x384?(_0x42ac4d[_0x5d31d2(0x22b)][_0x5a6eb4(0x1e9)](_0x5d31d2(0x2ec)),_0x3c0261[_0x5d31d2(0x22b)][_0x5d31d2(0x187)](_0x5d31d2(0x2a1)),_0x4d9c85[_0x5a6eb4(0x1bb)][_0x5d31d2(0x2f0)]=_0x5a6eb4(0x12d),_0x2df58a[_0x5d31d2(0x1f8)][_0x5d31d2(0x2f0)]=_0x5d31d2(0x1b1),document[_0x5d31d2(0x1e8)][_0x5d31d2(0x1f8)][_0x5d31d2(0x188)]='',document[_0x5d31d2(0x1e8)][_0x5d31d2(0x1f8)][_0x5a6eb4(0x13e)]=''):_0x42ac4d[_0x5d31d2(0x22b)][_0x5d31d2(0x23f)](_0x5a6eb4(0x144))?(_0x4d9c85[_0x5a6eb4(0x1bb)][_0x5d31d2(0x2f0)]=_0x5d31d2(0x1d2),_0x2df58a[_0x5d31d2(0x1f8)][_0x5d31d2(0x2f0)]=_0x5d31d2(0x1b1)):(_0x4d9c85[_0x5d31d2(0x1f8)][_0x5d31d2(0x2f0)]=_0x5d31d2(0x1b1),_0x2df58a[_0x5d31d2(0x1f8)]['display']=_0x5d31d2(0x1d2));}document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x2ed),function(_0x1291ec){const _0xe9c3c7=a0_0x5049d9,_0x577308=a0_0x38aafa;if(window[_0x577308(0x22a)]>0x384)return;const _0x26883f=document[_0x577308(0x275)](_0x577308(0x2ce)),_0x1218fb=document[_0x577308(0x275)]('main-container'),_0x36ee75=document[_0x577308(0x275)](_0x577308(0x18b)),_0x493613=document[_0x577308(0x275)](_0xe9c3c7(0x1be));!_0x26883f[_0x577308(0x23f)](_0x1291ec[_0x577308(0x2e5)])&&_0x1291ec[_0x577308(0x2e5)]!==_0x36ee75&&_0x1291ec[_0x577308(0x2e5)]!==_0x493613&&(_0x26883f[_0x577308(0x22b)][_0x577308(0x187)](_0x577308(0x2ec)),_0x1218fb[_0x577308(0x22b)][_0x577308(0x187)](_0x577308(0x2a1)),_0x493613[_0x577308(0x1f8)][_0x577308(0x2f0)]='none',_0x36ee75[_0x577308(0x1f8)][_0x577308(0x2f0)]=_0x577308(0x1d2),document[_0x577308(0x1e8)][_0x577308(0x1f8)][_0x577308(0x188)]='',document[_0xe9c3c7(0x1c5)][_0x577308(0x1f8)][_0x577308(0x1ec)]='');}),(function(){const _0x59d68b=a0_0x38aafa;try{(location[_0x59d68b(0x1ad)][_0x59d68b(0x18c)](/index\.html$/)||location[_0x59d68b(0x1ad)]==='/'||location[_0x59d68b(0x1ad)]===_0x59d68b(0x2b1))&&(!localStorage[_0x59d68b(0x1d5)](_0x59d68b(0x249))&&(localStorage[_0x59d68b(0x1fc)](_0x59d68b(0x249),'1'),location[_0x59d68b(0x1c8)]=_0x59d68b(0x2ae)));}catch(_0x396584){}}());let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x1cc),_0x2656d8=>{const _0x3d197f=a0_0x38aafa;if(_0x2656d8[_0x3d197f(0x2c5)]===_0x3d197f(0x24c))shiftPressed=!![];}),document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x1ab),_0x333d20=>{const _0x35e0d9=a0_0x38aafa;if(_0x333d20[_0x35e0d9(0x2c5)]===_0x35e0d9(0x24c))shiftPressed=![];}),canvas[a0_0x5049d9(0x1a3)](a0_0x38aafa(0x1cd),_0x2ef49f=>{const _0x5e629a=a0_0x5049d9,_0xd5fcd8=a0_0x38aafa;if(_0x2ef49f[_0xd5fcd8(0x220)]===_0xd5fcd8(0x1a5))return;currentTool===_0xd5fcd8(0x232)||shiftPressed?(dragging=!![],isDrawing=![],startX=_0x2ef49f[_0xd5fcd8(0x193)],startY=_0x2ef49f[_0xd5fcd8(0x25d)],lastX=posX,lastY=posY,canvas[_0xd5fcd8(0x1f0)](_0x2ef49f[_0xd5fcd8(0x270)]),canvas[_0xd5fcd8(0x1f8)][_0xd5fcd8(0x2bd)]=_0xd5fcd8(0x1c2)):(isDrawing=!![],pointerDownX=_0x2ef49f[_0xd5fcd8(0x193)],pointerDownY=_0x2ef49f[_0x5e629a(0x12b)],handleMouseDown(_0x2ef49f),canvas['setPointerCapture'](_0x2ef49f[_0xd5fcd8(0x270)]));}),canvas[a0_0x38aafa(0x21d)](a0_0x38aafa(0x17e),_0x44dad5=>{const _0x553f2f=a0_0x38aafa;if(_0x44dad5[_0x553f2f(0x220)]===_0x553f2f(0x1a5))return;if(dragging)posX=lastX+(_0x44dad5[_0x553f2f(0x193)]-startX),posY=lastY+(_0x44dad5['clientY']-startY),updateTransform();else{if(isDrawing){if(currentTool!==_0x553f2f(0x182)){const _0x38f2a3=Math[_0x553f2f(0x1a6)](_0x44dad5[_0x553f2f(0x193)]-pointerDownX),_0x4f207c=Math[_0x553f2f(0x1a6)](_0x44dad5[_0x553f2f(0x25d)]-pointerDownY);if(_0x38f2a3>=PAN_CANCEL_DISTANCE||_0x4f207c>=PAN_CANCEL_DISTANCE){isDrawing=![];try{handleMouseUp(_0x44dad5);}catch(_0x427057){}return;}}handleMouseMove(_0x44dad5);}}}),canvas[a0_0x38aafa(0x21d)](a0_0x38aafa(0x2de),_0x5803b0=>{const _0x3dbad3=a0_0x5049d9,_0x1b2977=a0_0x38aafa;if(_0x5803b0[_0x1b2977(0x220)]===_0x1b2977(0x1a5))return;dragging=![],isDrawing&&handleMouseUp(_0x5803b0),isDrawing=![];try{canvas[_0x3dbad3(0x217)](_0x5803b0[_0x1b2977(0x270)]);}catch(_0x507a2b){}if(currentTool==='pan')canvas[_0x1b2977(0x1f8)][_0x1b2977(0x2bd)]='grab';else canvas[_0x1b2977(0x1f8)][_0x3dbad3(0x151)]=_0x3dbad3(0x10c);}),wrapper[a0_0x38aafa(0x21d)]('wheel',_0x42f9a4=>{const _0x1499b1=a0_0x5049d9,_0x4f74d2=a0_0x38aafa;_0x42f9a4[_0x1499b1(0x187)]();const _0xf3ff4c=canvas[_0x1499b1(0x1b0)](),_0x17eccb=_0x42f9a4[_0x4f74d2(0x193)],_0x4a8c89=_0x42f9a4[_0x4f74d2(0x25d)],_0x1d8c28=(_0x17eccb-_0xf3ff4c[_0x4f74d2(0x2a7)]-posX)/scale,_0x582e42=(_0x4a8c89-_0xf3ff4c[_0x4f74d2(0x196)]-posY)/scale,_0xc12db3=_0x42f9a4[_0x4f74d2(0x1e7)]>0x0?0.9:1.1;let _0x26c6a3=scale*_0xc12db3;_0x26c6a3=Math[_0x4f74d2(0x1b2)](Math[_0x4f74d2(0x2c3)](_0x26c6a3,0.2),0x5),posX=_0x17eccb-_0xf3ff4c[_0x4f74d2(0x2a7)]-_0x1d8c28*_0x26c6a3,posY=_0x4a8c89-_0xf3ff4c[_0x4f74d2(0x196)]-_0x582e42*_0x26c6a3,scale=_0x26c6a3,updateTransform();const _0x32cd23=document[_0x4f74d2(0x275)](_0x1499b1(0x155)),_0x3e644e=document[_0x4f74d2(0x275)](_0x4f74d2(0x2b6));if(_0x32cd23)_0x32cd23[_0x4f74d2(0x24e)]=Math[_0x4f74d2(0x26f)](scale*0x64);if(_0x3e644e)_0x3e644e[_0x4f74d2(0x221)]=Math[_0x4f74d2(0x26f)](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x34445b=a0_0x5049d9,_0x1d933f=a0_0x38aafa;canvas[_0x1d933f(0x1f8)][_0x34445b(0xee)]=_0x1d933f(0x184)+posX+_0x1d933f(0x1c0)+posY+_0x34445b(0xda)+scale+')';}function setZoomValue(_0x13f18a){const _0x58df74=a0_0x5049d9,_0xe7b510=a0_0x38aafa,_0x34fde4=Math[_0x58df74(0x107)](0x14,Math[_0xe7b510(0x1b2)](0x1f4,parseInt(_0x13f18a,0xa)||0x64)),_0xbc9b2b=_0x34fde4/0x64;scale=_0xbc9b2b,updateTransform();const _0x5043d0=document[_0xe7b510(0x275)](_0xe7b510(0x1bc)),_0x701e9e=document[_0xe7b510(0x275)](_0xe7b510(0x2b6));if(_0x5043d0)_0x5043d0[_0xe7b510(0x24e)]=_0x34fde4;if(_0x701e9e)_0x701e9e[_0xe7b510(0x221)]=_0x34fde4+'%';}function zoomIn(){const _0xfccef7=a0_0x38aafa,_0x51dd2e=document[_0xfccef7(0x275)](_0xfccef7(0x1bc));let _0x103071=_0x51dd2e?parseInt(_0x51dd2e[_0xfccef7(0x24e)],0xa):Math[_0xfccef7(0x26f)](scale*0x64);_0x103071=Math[_0xfccef7(0x1b2)](0x1f4,_0x103071+0xa),setZoomValue(_0x103071);}function zoomOut(){const _0x567da2=a0_0x38aafa,_0xce3cdc=document[_0x567da2(0x275)]('zoomSlider');let _0x267888=_0xce3cdc?parseInt(_0xce3cdc[_0x567da2(0x24e)],0xa):Math[_0x567da2(0x26f)](scale*0x64);_0x267888=Math[_0x567da2(0x2c3)](0x14,_0x267888-0xa),setZoomValue(_0x267888);}const zs=document[a0_0x38aafa(0x275)]('zoomSlider');if(zs)zs[a0_0x38aafa(0x28a)]=_0x4169e9=>setZoomValue(_0x4169e9[a0_0x5049d9(0x1d3)][a0_0x38aafa(0x24e)]);function a0_0xce2f(_0x49a212,_0x32075d){_0x49a212=_0x49a212-0xda;const _0x3ffaf3=a0_0x243d();let _0x2eb2bb=_0x3ffaf3[_0x49a212];return _0x2eb2bb;}const zv=document[a0_0x38aafa(0x275)](a0_0x5049d9(0x16a));if(zv)zv[a0_0x5049d9(0x154)]=Math['round'](scale*0x64)+'%';function getCanvasCoords(_0x141e63){const _0x39765c=a0_0x5049d9,_0x3475ca=a0_0x38aafa,_0x29f5f6=canvas['getBoundingClientRect'](),_0x11e44d=canvas[_0x39765c(0x190)]/_0x29f5f6[_0x3475ca(0x1b8)],_0x4ef02a=canvas[_0x3475ca(0x27c)]/_0x29f5f6[_0x3475ca(0x27c)],_0x215331=(_0x141e63[_0x3475ca(0x193)]-_0x29f5f6[_0x3475ca(0x2a7)])*_0x11e44d,_0x3e4909=(_0x141e63[_0x3475ca(0x25d)]-_0x29f5f6[_0x3475ca(0x196)])*_0x4ef02a;return{'x':_0x215331,'y':_0x3e4909};}function handleDrawStart(_0x2a73a4){const _0x153a58=a0_0x38aafa,_0x4cb63f=getCanvasCoords(_0x2a73a4);ctx[_0x153a58(0x2eb)](),ctx[_0x153a58(0x29e)](_0x4cb63f['x'],_0x4cb63f['y']);}function handleDrawMove(_0x199e6b){const _0x15e3dc=a0_0x5049d9,_0x201211=a0_0x38aafa,_0xd8ebad=getCanvasCoords(_0x199e6b);ctx[_0x15e3dc(0xf3)](_0xd8ebad['x'],_0xd8ebad['y']),ctx[_0x201211(0x2d9)]();}function handleDrawEnd(_0x580616){const _0x19a241=a0_0x38aafa;ctx[_0x19a241(0x2db)]();}