const a0_0x38d982=a0_0x4dac;(function(_0x96a100,_0x3325d4){const _0x2f04ab=a0_0x4dac,_0xfb3246=_0x96a100();while(!![]){try{const _0x5be6f8=parseInt(_0x2f04ab(0x140))/0x1*(parseInt(_0x2f04ab(0x220))/0x2)+parseInt(_0x2f04ab(0x14e))/0x3+-parseInt(_0x2f04ab(0x180))/0x4*(-parseInt(_0x2f04ab(0x216))/0x5)+parseInt(_0x2f04ab(0x1a8))/0x6*(-parseInt(_0x2f04ab(0x190))/0x7)+parseInt(_0x2f04ab(0x19e))/0x8+parseInt(_0x2f04ab(0x1d3))/0x9+-parseInt(_0x2f04ab(0x1b5))/0xa;if(_0x5be6f8===_0x3325d4)break;else _0xfb3246['push'](_0xfb3246['shift']());}catch(_0x1a7b28){_0xfb3246['push'](_0xfb3246['shift']());}}}(a0_0xca1a,0xd6e5f));const a0_0x1d0c56=(function(){let _0x275e87=!![];return function(_0x5b10a6,_0x48ce77){const _0xbdd95f=_0x275e87?function(){const _0x35daa8=a0_0x4dac;if(_0x48ce77){const _0x6298a7=_0x48ce77[_0x35daa8(0x113)](_0x5b10a6,arguments);return _0x48ce77=null,_0x6298a7;}}:function(){};return _0x275e87=![],_0xbdd95f;};}()),a0_0xee0bbf=a0_0x1d0c56(this,function(){const _0x2cf660=a0_0x4dac;return a0_0xee0bbf[_0x2cf660(0x19c)]()[_0x2cf660(0x115)](_0x2cf660(0x1b6))['toString']()[_0x2cf660(0x22c)](a0_0xee0bbf)['search'](_0x2cf660(0x1b6));});a0_0xee0bbf();let canvas=document[a0_0x38d982(0x141)]('canvas'),ctx=canvas[a0_0x38d982(0x17f)]('2d'),cellSize=0x14,currentColor=a0_0x38d982(0x1c0),currentTool=a0_0x38d982(0x1fa),penSize=0x1,penMode=a0_0x38d982(0x182),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x15f8e4=0x10,_0x2f0057=0x10,_0x313ae0=''){const _0x2c4ee6=a0_0x38d982;let _0x462708=0x14,_0x16c178=[],_0x3e8894=[],_0x10b668=[],_0x1fb0e6=document[_0x2c4ee6(0x236)]('canvas');_0x1fb0e6[_0x2c4ee6(0x14f)]=_0x15f8e4*_0x462708,_0x1fb0e6['height']=_0x2f0057*_0x462708,_0x16c178[_0x2c4ee6(0x1cc)](_0x1fb0e6),_0x3e8894['push']([]),_0x10b668[_0x2c4ee6(0x1cc)]([]);let _0x32c90c={'layers':_0x16c178,'activeLayer':0x0,'layerHistories':_0x3e8894,'layerRedoStacks':_0x10b668};return{'frames':[_0x32c90c],'activeFrame':0x0,'width':_0x15f8e4,'height':_0x2f0057,'name':_0x313ae0||'画像'+(projects[_0x2c4ee6(0x1f4)]+0x1)};}function updateProjectUI(){const _0x58c1be=a0_0x38d982,_0xaafb7=document[_0x58c1be(0x141)]('projectList');_0xaafb7[_0x58c1be(0x15d)]='';for(let _0x189b9d=0x0;_0x189b9d<projects[_0x58c1be(0x1f4)];_0x189b9d++){const _0x2d9c1a=document[_0x58c1be(0x236)]('div');_0x2d9c1a[_0x58c1be(0x1c9)]=_0x58c1be(0x227)+(_0x189b9d===activeProject?'\x20active':''),_0x2d9c1a[_0x58c1be(0x1b1)]=()=>{activeProject=_0x189b9d,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x311bb5=document[_0x58c1be(0x236)](_0x58c1be(0x15a));_0x311bb5[_0x58c1be(0x1c9)]=_0x58c1be(0x14c),_0x311bb5['textContent']=projects[_0x189b9d][_0x58c1be(0x179)]||'画像'+(_0x189b9d+0x1),_0x311bb5['title']='クリックで名前を編集',_0x311bb5['onclick']=_0x1456bb=>{const _0x295b8e=_0x58c1be;_0x1456bb[_0x295b8e(0x1ec)](),editProjectName(_0x189b9d,_0x311bb5);},_0x2d9c1a[_0x58c1be(0x154)](_0x311bb5);const _0x4f06bd=document['createElement'](_0x58c1be(0x193));_0x4f06bd[_0x58c1be(0x1db)]='削除',_0x4f06bd['className']=_0x58c1be(0x191),_0x4f06bd[_0x58c1be(0x1b2)]=projects['length']===0x1,_0x4f06bd['onclick']=_0x5a0e2f=>{const _0x1bf23c=_0x58c1be;_0x5a0e2f[_0x1bf23c(0x1ec)](),removeProjectAt(_0x189b9d);},_0x2d9c1a[_0x58c1be(0x154)](_0x4f06bd),_0xaafb7['appendChild'](_0x2d9c1a);}document[_0x58c1be(0x141)]('projectCount')[_0x58c1be(0x1db)]='('+projects[_0x58c1be(0x1f4)]+'枚)';}function editProjectName(_0x1d5b12,_0x4ff1a1){const _0x509931=a0_0x38d982,_0x55a18d=document['createElement'](_0x509931(0x17e));_0x55a18d['type']=_0x509931(0x214),_0x55a18d['value']=projects[_0x1d5b12][_0x509931(0x179)]||'画像'+(_0x1d5b12+0x1),_0x55a18d['className']=_0x509931(0x22a),_0x55a18d[_0x509931(0x158)][_0x509931(0x14f)]=_0x509931(0x192),_0x55a18d[_0x509931(0x133)]=()=>{const _0x273180=_0x509931;projects[_0x1d5b12]['name']=_0x55a18d[_0x273180(0x1e7)][_0x273180(0x1e3)]()||'画像'+(_0x1d5b12+0x1),updateProjectUI();},_0x55a18d['onkeydown']=_0x52d555=>{const _0x5e5700=_0x509931;if(_0x52d555['key']===_0x5e5700(0x1bf))_0x55a18d[_0x5e5700(0x1cf)]();},_0x4ff1a1[_0x509931(0x128)](_0x55a18d),_0x55a18d[_0x509931(0x1a7)](),_0x55a18d[_0x509931(0x15b)]();}function showNewProjectDialog(_0x21a897){const _0x2e40ff=a0_0x38d982;let _0x2fe62f=document['getElementById'](_0x2e40ff(0x228));if(_0x2fe62f)_0x2fe62f[_0x2e40ff(0x211)]();const _0x40ba8b=document['createElement'](_0x2e40ff(0x142));_0x40ba8b['id']='new-project-dialog',_0x40ba8b[_0x2e40ff(0x158)][_0x2e40ff(0x230)]=_0x2e40ff(0x1a4),_0x40ba8b[_0x2e40ff(0x158)]['left']='0',_0x40ba8b[_0x2e40ff(0x158)][_0x2e40ff(0x19d)]='0',_0x40ba8b[_0x2e40ff(0x158)][_0x2e40ff(0x14f)]='100vw',_0x40ba8b[_0x2e40ff(0x158)][_0x2e40ff(0x116)]=_0x2e40ff(0x11f),_0x40ba8b[_0x2e40ff(0x158)]['background']=_0x2e40ff(0x16b),_0x40ba8b[_0x2e40ff(0x158)][_0x2e40ff(0x159)]=_0x2e40ff(0x1b0),_0x40ba8b[_0x2e40ff(0x158)][_0x2e40ff(0x1fe)]='center',_0x40ba8b['style'][_0x2e40ff(0x231)]=_0x2e40ff(0x1d0),_0x40ba8b[_0x2e40ff(0x158)][_0x2e40ff(0x1ba)]=_0x2e40ff(0x213),_0x40ba8b['innerHTML']=_0x2e40ff(0x160)+(projects['length']+0x1)+_0x2e40ff(0x1e9),document['body'][_0x2e40ff(0x154)](_0x40ba8b),_0x40ba8b[_0x2e40ff(0x1f2)]('#newProjOkBtn')[_0x2e40ff(0x1b1)]=()=>{const _0x596dbd=_0x2e40ff,_0x57c468=parseInt(_0x40ba8b[_0x596dbd(0x1f2)]('#newProjW')[_0x596dbd(0x1e7)],0xa),_0x1898c5=parseInt(_0x40ba8b['querySelector'](_0x596dbd(0x206))['value'],0xa),_0x4bfa28=_0x40ba8b[_0x596dbd(0x1f2)]('#newProjName')[_0x596dbd(0x1e7)][_0x596dbd(0x1e3)]();_0x40ba8b[_0x596dbd(0x211)]();if(_0x21a897)_0x21a897(_0x57c468,_0x1898c5,_0x4bfa28);},_0x40ba8b['querySelector']('#newProjCancelBtn')[_0x2e40ff(0x1b1)]=()=>{const _0x4f629d=_0x2e40ff;_0x40ba8b[_0x4f629d(0x211)]();};}function addProject(){showNewProjectDialog((_0x51f7d9,_0x213669,_0x3eafed)=>{const _0x28ad6c=a0_0x4dac;if(!Number[_0x28ad6c(0x1f7)](_0x51f7d9)||_0x51f7d9<0x1)_0x51f7d9=0x10;if(!Number[_0x28ad6c(0x1f7)](_0x213669)||_0x213669<0x1)_0x213669=0x10;projects[_0x28ad6c(0x1cc)](createProject(_0x51f7d9,_0x213669,_0x3eafed)),activeProject=projects[_0x28ad6c(0x1f4)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x24d775){const _0x39bd1a=a0_0x38d982;if(projects['length']<=0x1)return;projects['splice'](_0x24d775,0x1);if(activeProject>=projects[_0x39bd1a(0x1f4)])activeProject=projects['length']-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x432bba=a0_0x38d982,_0x1e69e1=document['getElementById'](_0x432bba(0x224)),_0x28e72d=getCurrentProject();_0x1e69e1['innerHTML']='';for(let _0x552d2c=0x0;_0x552d2c<_0x28e72d[_0x432bba(0x1a5)][_0x432bba(0x1f4)];_0x552d2c++){const _0x1f334b=document['createElement'](_0x432bba(0x142));_0x1f334b[_0x432bba(0x1c9)]=_0x432bba(0x12a)+(_0x552d2c===_0x28e72d[_0x432bba(0x150)]?_0x432bba(0x1a6):''),_0x1f334b['onclick']=()=>{_0x28e72d['activeFrame']=_0x552d2c,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x3f51da=document[_0x432bba(0x236)](_0x432bba(0x1d7));_0x3f51da[_0x432bba(0x1c9)]=_0x432bba(0x1cb),_0x3f51da[_0x432bba(0x14f)]=0x20,_0x3f51da[_0x432bba(0x116)]=0x20;let _0x1c2e49=_0x3f51da['getContext']('2d');_0x1c2e49[_0x432bba(0x157)](0x0,0x0,0x20,0x20);for(let _0x430b36=0x0;_0x430b36<_0x28e72d[_0x432bba(0x1a5)][_0x552d2c][_0x432bba(0x123)][_0x432bba(0x1f4)];_0x430b36++){_0x1c2e49[_0x432bba(0x201)](_0x28e72d[_0x432bba(0x1a5)][_0x552d2c][_0x432bba(0x123)][_0x430b36],0x0,0x0,_0x3f51da[_0x432bba(0x14f)],_0x3f51da[_0x432bba(0x116)]);}_0x1f334b[_0x432bba(0x154)](_0x3f51da);const _0x39d1e1=document['createElement']('span');_0x39d1e1[_0x432bba(0x1db)]='F'+(_0x552d2c+0x1),_0x1f334b[_0x432bba(0x154)](_0x39d1e1);const _0x2eee84=document['createElement'](_0x432bba(0x193));_0x2eee84['textContent']='削除',_0x2eee84[_0x432bba(0x1c9)]=_0x432bba(0x19b),_0x2eee84[_0x432bba(0x1b2)]=_0x28e72d[_0x432bba(0x1a5)][_0x432bba(0x1f4)]===0x1,_0x2eee84[_0x432bba(0x1b1)]=_0x48e580=>{const _0x448742=_0x432bba;_0x48e580[_0x448742(0x1ec)](),removeFrameAt(_0x552d2c);},_0x1f334b[_0x432bba(0x154)](_0x2eee84),_0x1e69e1[_0x432bba(0x154)](_0x1f334b);}document['getElementById'](_0x432bba(0x13a))['textContent']='('+_0x28e72d[_0x432bba(0x1a5)][_0x432bba(0x1f4)]+_0x432bba(0x1eb);}function addFrame(){const _0xd6a490=a0_0x38d982;let _0x4030da=getCurrentProject(),_0x1f5e80=_0x4030da[_0xd6a490(0x1a5)][_0x4030da[_0xd6a490(0x150)]],_0x553b42=_0x1f5e80[_0xd6a490(0x123)][_0xd6a490(0x120)](_0xad7283=>{const _0x4afd29=_0xd6a490;let _0x318903=document['createElement'](_0x4afd29(0x1d7));return _0x318903[_0x4afd29(0x14f)]=_0xad7283['width'],_0x318903[_0x4afd29(0x116)]=_0xad7283[_0x4afd29(0x116)],_0x318903[_0x4afd29(0x17f)]('2d')['drawImage'](_0xad7283,0x0,0x0),_0x318903;}),_0x3497f8=_0x553b42[_0xd6a490(0x120)](()=>[]),_0x4e3f66=_0x553b42[_0xd6a490(0x120)](()=>[]),_0x1b29f5={'layers':_0x553b42,'activeLayer':0x0,'layerHistories':_0x3497f8,'layerRedoStacks':_0x4e3f66};_0x4030da[_0xd6a490(0x1a5)]['splice'](_0x4030da[_0xd6a490(0x150)]+0x1,0x0,_0x1b29f5),_0x4030da[_0xd6a490(0x150)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x5edecd){const _0x1cdbb2=a0_0x38d982;let _0x3ef68d=getCurrentProject();if(_0x3ef68d[_0x1cdbb2(0x1a5)][_0x1cdbb2(0x1f4)]<=0x1)return;_0x3ef68d['frames'][_0x1cdbb2(0x137)](_0x5edecd,0x1);if(_0x3ef68d['activeFrame']>=_0x3ef68d[_0x1cdbb2(0x1a5)][_0x1cdbb2(0x1f4)])_0x3ef68d[_0x1cdbb2(0x150)]=_0x3ef68d[_0x1cdbb2(0x1a5)][_0x1cdbb2(0x1f4)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x37817d=a0_0x38d982;return getCurrentProject()[_0x37817d(0x1a5)][getCurrentProject()['activeFrame']];}function updateLayerUI(){const _0x2437d2=a0_0x38d982;let {layers:_0x58ee21,activeLayer:_0x483228}=getCurrentFrame();document['getElementById'](_0x2437d2(0x14b))[_0x2437d2(0x1db)]='('+_0x58ee21[_0x2437d2(0x1f4)]+'枚)';const _0x287756=document[_0x2437d2(0x141)]('layerList');_0x287756[_0x2437d2(0x15d)]='';for(let _0x19ebc1=_0x58ee21[_0x2437d2(0x1f4)]-0x1;_0x19ebc1>=0x0;_0x19ebc1--){const _0x16ce67=document['createElement']('div');_0x16ce67[_0x2437d2(0x1c9)]='layer-item'+(_0x19ebc1===_0x483228?_0x2437d2(0x1a6):''),_0x16ce67[_0x2437d2(0x1b1)]=_0x1faf7d=>{const _0x426981=_0x2437d2;if(_0x1faf7d[_0x426981(0x174)][_0x426981(0x189)][_0x426981(0x20b)]('layer-btn'))return;getCurrentFrame()['activeLayer']=_0x19ebc1,updateLayerUI(),redrawAll();};const _0x39f964=document['createElement'](_0x2437d2(0x1d7));_0x39f964[_0x2437d2(0x1c9)]=_0x2437d2(0x131),_0x39f964[_0x2437d2(0x14f)]=0x20,_0x39f964['height']=0x20;let _0x2155d9=_0x39f964['getContext']('2d');_0x2155d9[_0x2437d2(0x157)](0x0,0x0,0x20,0x20),_0x2155d9[_0x2437d2(0x201)](_0x58ee21[_0x19ebc1],0x0,0x0,_0x39f964[_0x2437d2(0x14f)],_0x39f964[_0x2437d2(0x116)]),_0x16ce67[_0x2437d2(0x154)](_0x39f964);const _0x5875d3=document['createElement'](_0x2437d2(0x15a));_0x5875d3[_0x2437d2(0x1db)]=_0x2437d2(0x1d4)+(_0x19ebc1+0x1),_0x16ce67['appendChild'](_0x5875d3);const _0x3669b0=document['createElement'](_0x2437d2(0x193));_0x3669b0['textContent']='↑',_0x3669b0[_0x2437d2(0x1c9)]='layer-btn',_0x3669b0[_0x2437d2(0x144)]='上に移動',_0x3669b0[_0x2437d2(0x1b2)]=_0x19ebc1===_0x58ee21[_0x2437d2(0x1f4)]-0x1,_0x3669b0[_0x2437d2(0x1b1)]=_0xb2c2a9=>{const _0x3771b2=_0x2437d2;_0xb2c2a9[_0x3771b2(0x1ec)](),_0x19ebc1<_0x58ee21[_0x3771b2(0x1f4)]-0x1&&swapLayer(_0x19ebc1,_0x19ebc1+0x1);},_0x16ce67['appendChild'](_0x3669b0);const _0x35762b=document['createElement'](_0x2437d2(0x193));_0x35762b[_0x2437d2(0x1db)]='↓',_0x35762b[_0x2437d2(0x1c9)]=_0x2437d2(0x12b),_0x35762b[_0x2437d2(0x144)]=_0x2437d2(0x134),_0x35762b[_0x2437d2(0x1b2)]=_0x19ebc1===0x0,_0x35762b['onclick']=_0x27e38b=>{const _0x8d4dfd=_0x2437d2;_0x27e38b[_0x8d4dfd(0x1ec)](),_0x19ebc1>0x0&&swapLayer(_0x19ebc1,_0x19ebc1-0x1);},_0x16ce67['appendChild'](_0x35762b);const _0x3d3ba3=document[_0x2437d2(0x236)](_0x2437d2(0x193));_0x3d3ba3['textContent']='削除',_0x3d3ba3[_0x2437d2(0x1c9)]=_0x2437d2(0x12b),_0x3d3ba3[_0x2437d2(0x144)]=_0x2437d2(0x188),_0x3d3ba3[_0x2437d2(0x1b2)]=_0x58ee21['length']===0x1,_0x3d3ba3['onclick']=_0x39a4af=>{_0x39a4af['stopPropagation'](),removeLayerAt(_0x19ebc1);},_0x16ce67[_0x2437d2(0x154)](_0x3d3ba3),_0x287756['appendChild'](_0x16ce67);}}function swapLayer(_0x3b61a6,_0x33e1a8){const _0x17804d=a0_0x38d982;let _0x1c23e2=getCurrentFrame();[_0x1c23e2[_0x17804d(0x123)][_0x3b61a6],_0x1c23e2[_0x17804d(0x123)][_0x33e1a8]]=[_0x1c23e2[_0x17804d(0x123)][_0x33e1a8],_0x1c23e2[_0x17804d(0x123)][_0x3b61a6]],[_0x1c23e2[_0x17804d(0x1ea)][_0x3b61a6],_0x1c23e2['layerHistories'][_0x33e1a8]]=[_0x1c23e2[_0x17804d(0x1ea)][_0x33e1a8],_0x1c23e2['layerHistories'][_0x3b61a6]],[_0x1c23e2[_0x17804d(0x166)][_0x3b61a6],_0x1c23e2[_0x17804d(0x166)][_0x33e1a8]]=[_0x1c23e2[_0x17804d(0x166)][_0x33e1a8],_0x1c23e2[_0x17804d(0x166)][_0x3b61a6]];if(_0x1c23e2[_0x17804d(0x15f)]===_0x3b61a6)_0x1c23e2[_0x17804d(0x15f)]=_0x33e1a8;else{if(_0x1c23e2['activeLayer']===_0x33e1a8)_0x1c23e2[_0x17804d(0x15f)]=_0x3b61a6;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x5669b8){const _0x492ba8=a0_0x38d982;let _0x18a871=getCurrentFrame();if(_0x18a871['layers'][_0x492ba8(0x1f4)]<=0x1)return;_0x18a871[_0x492ba8(0x123)]['splice'](_0x5669b8,0x1),_0x18a871[_0x492ba8(0x1ea)]['splice'](_0x5669b8,0x1),_0x18a871[_0x492ba8(0x166)][_0x492ba8(0x137)](_0x5669b8,0x1);if(_0x18a871['activeLayer']>=_0x18a871[_0x492ba8(0x123)]['length'])_0x18a871['activeLayer']=_0x18a871[_0x492ba8(0x123)]['length']-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x2d3a5f=a0_0x38d982;let _0x236d94=getCurrentProject(),_0x1fe5fe=getCurrentFrame(),_0x5c34e0=document[_0x2d3a5f(0x236)](_0x2d3a5f(0x1d7));_0x5c34e0['width']=_0x236d94[_0x2d3a5f(0x14f)]*cellSize,_0x5c34e0['height']=_0x236d94[_0x2d3a5f(0x116)]*cellSize,_0x1fe5fe[_0x2d3a5f(0x123)]['push'](_0x5c34e0),_0x1fe5fe[_0x2d3a5f(0x1ea)][_0x2d3a5f(0x1cc)]([]),_0x1fe5fe['layerRedoStacks']['push']([]),_0x1fe5fe[_0x2d3a5f(0x15f)]=_0x1fe5fe['layers'][_0x2d3a5f(0x1f4)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x51f3c6=a0_0x38d982;let _0x95a72e=getCurrentFrame();if(_0x95a72e[_0x51f3c6(0x123)]['length']<=0x1)return;_0x95a72e[_0x51f3c6(0x123)]['splice'](_0x95a72e[_0x51f3c6(0x15f)],0x1),_0x95a72e['layerHistories'][_0x51f3c6(0x137)](_0x95a72e[_0x51f3c6(0x15f)],0x1),_0x95a72e['layerRedoStacks'][_0x51f3c6(0x137)](_0x95a72e[_0x51f3c6(0x15f)],0x1),_0x95a72e[_0x51f3c6(0x15f)]=Math['max'](0x0,_0x95a72e[_0x51f3c6(0x15f)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x1383b7){const _0xd9ec9d=a0_0x38d982;getCurrentFrame()[_0xd9ec9d(0x15f)]=parseInt(_0x1383b7),updateLayerUI();}let PALETTE_COLORS=[a0_0x38d982(0x165),'#000000',a0_0x38d982(0x196),'#888888',a0_0x38d982(0x1d8),a0_0x38d982(0x18b),a0_0x38d982(0x1c0),'#ffa500',a0_0x38d982(0x223),a0_0x38d982(0x130),a0_0x38d982(0x118),a0_0x38d982(0x21c),a0_0x38d982(0x221),a0_0x38d982(0x155),a0_0x38d982(0x167),'#008000',a0_0x38d982(0x1ee),'#000080','#800080','#c0c0c0',a0_0x38d982(0x1a2)],currentAlpha=0x1;function setTool(_0x501fb4){const _0x46939c=a0_0x38d982;currentTool=_0x501fb4,document[_0x46939c(0x203)](_0x46939c(0x127))[_0x46939c(0x173)](_0x4ae64b=>{const _0x3a1925=_0x46939c;_0x4ae64b[_0x3a1925(0x189)][_0x3a1925(0x1f5)]('active',_0x4ae64b[_0x3a1925(0x11c)][_0x3a1925(0x1f3)]===_0x501fb4);}),document[_0x46939c(0x203)]('#palette-toolbar\x20.tool-btn')[_0x46939c(0x173)](_0x2d18e2=>{const _0x3357f0=_0x46939c;_0x2d18e2[_0x3357f0(0x189)][_0x3357f0(0x1f5)](_0x3357f0(0x14a),_0x2d18e2['dataset'][_0x3357f0(0x1f3)]===_0x501fb4);});}function setPenSize(_0x454e15){const _0x3ef88c=a0_0x38d982;penSize=parseInt(_0x454e15)||0x1;let _0x970491=document[_0x3ef88c(0x141)](_0x3ef88c(0x1df));if(_0x970491)_0x970491[_0x3ef88c(0x1e7)]=penSize;let _0x17e04f=document['getElementById'](_0x3ef88c(0x117));if(_0x17e04f)_0x17e04f[_0x3ef88c(0x1e7)]=penSize;}function setPenMode(_0x28e9c0){const _0x1b59d4=a0_0x38d982;penMode=_0x28e9c0;let _0x152b67=document[_0x1b59d4(0x141)](_0x1b59d4(0x148));if(_0x152b67)_0x152b67[_0x1b59d4(0x1e7)]=penMode;let _0x586fad=document[_0x1b59d4(0x141)]('palette-penMode');if(_0x586fad)_0x586fad[_0x1b59d4(0x1e7)]=penMode;}function a0_0xca1a(){const _0xd68912=['clear','appendChild','#800000','addEventListener','clearRect','style','display','span','select','download','innerHTML','nezumi-sketch.msketch','activeLayer','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>新しい画像のサイズ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>名前:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22画像','.webm','colorPicker','parentNode','add','transparent','layerRedoStacks','#808000','image/jpeg','UPNG','onmouseup','rgba(0,0,0,0.3)','#palette-penMode','globalCompositeOperation','overflow','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>消しゴム</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','oninput','onmousedown','forEach','target','keyval','onmousemove','nezumi-sketch-save','hidden','name','split','background','transaction','activeProject','input','getContext','12GUWqBR','createObjectURL','square','isArray','abs','floor','innerWidth','palette-del-btn','このレイヤーを削除','classList','.apng','#ffffff','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','.toggle-btn','projects','336007ylWxcQ','project-btn','80px','button','none','lib/gif.worker.js','#444444','color','webp','restore','undefined','frame-btn','toString','top','9939352HeTEJd','sidebar','onchange','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','#ff69b4','touchAction','fixed','frames','\x20active','focus','54pNiACQ','sidebar-open','nezumi-drawing','palette-color','.gif','nezumi-animation','.palette-color','replace','flex','onclick','disabled','byteLength','IndexedDBからの読み込みに失敗したチュー…','39339250KerwCK','(((.+)+)+)+$','number','#palette-alphaSlider','image/','zIndex','clientX','jpg','nezumi-animation.gif','.section.collapsible\x20.section-content','Enter','#ff0000','WebCodecs','oncomplete','circle','onload','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>ペン</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','>四角ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22','pop','preventDefault','className','DOMContentLoaded','frame-thumb','push','join','getBoundingClientRect','blur','center','#ccc','.section-content','15638040EnfoqK','レイヤー','arc','clientY','canvas','#cccccc','error','palette-alphaValue','textContent','anonymous','data','files','penSize','ontouchstart','beforeunload','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20','trim','>丸ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20透明度:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','touches','render','value','round','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>幅:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>高さ:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>作成</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>キャンセル</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','layerHistories','コマ)','stopPropagation','fill','#008080','fillStyle','log','application/json','querySelector','tool','length','toggle','onerror','isFinite','has','palette-toolbar','pen','stroke','\x20selected','click','alignItems','open','src','drawImage','getImageData','querySelectorAll','result','#palette-alphaValue','#newProjH','removeEventListener','rgba(','ontouchmove','encode','contains','touchcancel','ontouchend','body','#000000','main-container','remove','min','3000','text','#palette-penSize','131015RKlumX','moveTo','revokeObjectURL','removeChild','nezumi-sketch-db','createObjectStore','#0000ff','VideoEncoder','#00000000','ontouchcancel','180778ApSaJX','#ff00ff','all','#ffff00','frameList','jpeg','このブラウザはWebCodecsによるWEBPアニメーションに対応していません。','project-item','new-project-dialog','>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22','project-name-edit','block','constructor','onupgradeneeded','max','type','position','justifyContent','objectStore','image/png','IndexedDBからプロジェクトを読み込んだチュー！','shift','createElement','apply','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>塗りつぶし</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20太さ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','search','height','palette-penSize','#00ffff','boolean','menu-toggle-btn-close','href','dataset','alphaValue','beginPath','100vh','map','menu-toggle-btn','close','layers','eraser','toDataURL','globalAlpha','.tool-btn','replaceWith','flush','frame-item','layer-btn','save','palette-alphaSlider','fillRect','crossOrigin','#00ff00','layer-thumb','touchend','onblur','下に移動','touchmove','stringify','splice','put','destination-out','frameCount','ファイルの読み込みに失敗しました。','strokeStyle','lineTo','onmouseleave','selected','8GJsQqH','getElementById','div','left','title','putImageData','alphaSlider','color-palette','penMode','then','active','layerCount','project-name','touchstart','4393371itnUuQ','width','activeFrame','onsuccess','configure'];a0_0xca1a=function(){return _0xd68912;};return a0_0xca1a();}function hexToRgba(_0xed0a63,_0x1f597f=0x1){const _0x22553c=a0_0x38d982;if(_0xed0a63===_0x22553c(0x165)||_0xed0a63===_0x22553c(0x21e))return[0x0,0x0,0x0,0x0];_0xed0a63=_0xed0a63[_0x22553c(0x1af)]('#','');if(_0xed0a63['length']===0x3)_0xed0a63=_0xed0a63[_0x22553c(0x17a)]('')['map'](_0x519b19=>_0x519b19+_0x519b19)[_0x22553c(0x1cd)]('');let _0x39a3a2=parseInt(_0xed0a63,0x10);return[_0x39a3a2>>0x10&0xff,_0x39a3a2>>0x8&0xff,_0x39a3a2&0xff,Math[_0x22553c(0x1e8)](0xff*_0x1f597f)];}function fillAt(_0x133f83,_0x4e99b5){const _0x3026ea=a0_0x38d982;let _0x155be8=getCurrentProject(),_0x47788c=getCurrentFrame(),_0x5c941e=_0x47788c[_0x3026ea(0x123)][_0x47788c[_0x3026ea(0x15f)]]['getContext']('2d'),_0x39df1e=_0x5c941e[_0x3026ea(0x202)](0x0,0x0,_0x155be8[_0x3026ea(0x14f)]*cellSize,_0x155be8[_0x3026ea(0x116)]*cellSize),_0x132485=_0x133f83*cellSize,_0x1e69b5=_0x4e99b5*cellSize,_0x57c5e2=getPixel(_0x39df1e,_0x132485,_0x1e69b5),_0x4fef58=currentColor===_0x3026ea(0x165)||currentColor===_0x3026ea(0x21e)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x57c5e2,_0x4fef58))return;let _0x4e35b0=[[_0x133f83,_0x4e99b5]],_0x50bae6=new Set();while(_0x4e35b0[_0x3026ea(0x1f4)]){let [_0x5bdd3e,_0x11655a]=_0x4e35b0['pop']();if(_0x5bdd3e<0x0||_0x11655a<0x0||_0x5bdd3e>=_0x155be8[_0x3026ea(0x14f)]||_0x11655a>=_0x155be8[_0x3026ea(0x116)])continue;let _0x409bea=_0x5bdd3e+','+_0x11655a;if(_0x50bae6[_0x3026ea(0x1f8)](_0x409bea))continue;_0x50bae6[_0x3026ea(0x164)](_0x409bea);let _0x5905aa=_0x5bdd3e*cellSize,_0x4bef5c=_0x11655a*cellSize,_0x1dcecf=getPixel(_0x39df1e,_0x5905aa,_0x4bef5c);if(!colorsMatch(_0x1dcecf,_0x57c5e2))continue;for(let _0x1a3c3f=0x0;_0x1a3c3f<cellSize;_0x1a3c3f++){for(let _0x242437=0x0;_0x242437<cellSize;_0x242437++){setPixel(_0x39df1e,_0x5905aa+_0x242437,_0x4bef5c+_0x1a3c3f,_0x4fef58);}}_0x4e35b0[_0x3026ea(0x1cc)]([_0x5bdd3e+0x1,_0x11655a]),_0x4e35b0[_0x3026ea(0x1cc)]([_0x5bdd3e-0x1,_0x11655a]),_0x4e35b0['push']([_0x5bdd3e,_0x11655a+0x1]),_0x4e35b0[_0x3026ea(0x1cc)]([_0x5bdd3e,_0x11655a-0x1]);}_0x5c941e[_0x3026ea(0x145)](_0x39df1e,0x0,0x0),redrawAll();}function getPixel(_0x11b031,_0x392172,_0x4e8d5f){const _0xcb3578=a0_0x38d982;let _0x3b7fa9=(_0x4e8d5f*_0x11b031[_0xcb3578(0x14f)]+_0x392172)*0x4;return[_0x11b031[_0xcb3578(0x1dd)][_0x3b7fa9],_0x11b031['data'][_0x3b7fa9+0x1],_0x11b031[_0xcb3578(0x1dd)][_0x3b7fa9+0x2],_0x11b031[_0xcb3578(0x1dd)][_0x3b7fa9+0x3]];}function setPixel(_0x5bd4bf,_0x4dc627,_0x5946e2,_0x3cee7b){const _0x104339=a0_0x38d982;let _0x4745e5=(_0x5946e2*_0x5bd4bf['width']+_0x4dc627)*0x4;_0x5bd4bf[_0x104339(0x1dd)][_0x4745e5]=_0x3cee7b[0x0],_0x5bd4bf[_0x104339(0x1dd)][_0x4745e5+0x1]=_0x3cee7b[0x1],_0x5bd4bf[_0x104339(0x1dd)][_0x4745e5+0x2]=_0x3cee7b[0x2],_0x5bd4bf['data'][_0x4745e5+0x3]=_0x3cee7b[0x3];}function colorsMatch(_0x5f3121,_0x163074){return _0x5f3121[0x0]===_0x163074[0x0]&&_0x5f3121[0x1]===_0x163074[0x1]&&_0x5f3121[0x2]===_0x163074[0x2]&&_0x5f3121[0x3]===_0x163074[0x3];}function handleMouseDown(_0xd354f){const _0x24f137=a0_0x38d982;isDrawing=!![];const _0x7f199=canvas['getBoundingClientRect'](),_0x542238=canvas[_0x24f137(0x14f)]/_0x7f199['width'],_0x58a4e8=canvas[_0x24f137(0x116)]/_0x7f199[_0x24f137(0x116)],_0x1c660e=Math[_0x24f137(0x185)]((_0xd354f['clientX']-_0x7f199[_0x24f137(0x143)])*_0x542238/cellSize),_0x2cf683=Math[_0x24f137(0x185)]((_0xd354f[_0x24f137(0x1d6)]-_0x7f199[_0x24f137(0x19d)])*_0x58a4e8/cellSize);currentTool===_0x24f137(0x1ed)?(fillAt(_0x1c660e,_0x2cf683),saveHistory(),isDrawing=![]):drawDotXY(_0x1c660e,_0x2cf683);}function a0_0x4dac(_0x53eddf,_0x2c4c6f){const _0x2b5bea=a0_0xca1a();return a0_0x4dac=function(_0xee0bbf,_0x1d0c56){_0xee0bbf=_0xee0bbf-0x113;let _0xca1af2=_0x2b5bea[_0xee0bbf];return _0xca1af2;},a0_0x4dac(_0x53eddf,_0x2c4c6f);}function handleMouseMove(_0x5a9d81){const _0x5b43fa=a0_0x38d982;if(!isDrawing)return;const _0x48948e=canvas[_0x5b43fa(0x1ce)](),_0x36e982=canvas['width']/_0x48948e['width'],_0x3714ce=canvas[_0x5b43fa(0x116)]/_0x48948e[_0x5b43fa(0x116)],_0x10e90c=Math[_0x5b43fa(0x185)]((_0x5a9d81[_0x5b43fa(0x1bb)]-_0x48948e[_0x5b43fa(0x143)])*_0x36e982/cellSize),_0x43edb6=Math[_0x5b43fa(0x185)]((_0x5a9d81[_0x5b43fa(0x1d6)]-_0x48948e[_0x5b43fa(0x19d)])*_0x3714ce/cellSize);drawDotXY(_0x10e90c,_0x43edb6);}function handleMouseUp(_0x3f82e0){isDrawing&&saveHistory(),isDrawing=![];}let lastTouch=null;function getTouchPos(_0x36240f){const _0x15946a=a0_0x38d982,_0x3f449a=canvas['getBoundingClientRect']();let _0x197cc5=_0x36240f[_0x15946a(0x1e5)]&&_0x36240f[_0x15946a(0x1e5)][0x0]?_0x36240f[_0x15946a(0x1e5)][0x0]:_0x36240f['changedTouches'][0x0];const _0x509b7f=canvas[_0x15946a(0x14f)]/_0x3f449a[_0x15946a(0x14f)],_0x4414ae=canvas[_0x15946a(0x116)]/_0x3f449a[_0x15946a(0x116)];return{'x':Math[_0x15946a(0x185)]((_0x197cc5[_0x15946a(0x1bb)]-_0x3f449a[_0x15946a(0x143)])*_0x509b7f/cellSize),'y':Math[_0x15946a(0x185)]((_0x197cc5[_0x15946a(0x1d6)]-_0x3f449a['top'])*_0x4414ae/cellSize)};}function handleTouchStart(_0x4d1487){const _0x871038=a0_0x38d982;if(_0x4d1487[_0x871038(0x1e5)][_0x871038(0x1f4)]>0x1)return;_0x4d1487[_0x871038(0x1c8)](),isDrawing=!![];let _0x6b7629=getTouchPos(_0x4d1487);lastTouch=_0x6b7629,currentTool===_0x871038(0x1ed)?(fillAt(_0x6b7629['x'],_0x6b7629['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x6b7629['x'],_0x6b7629['y']);}function handleTouchMove(_0x28153e){const _0x59514e=a0_0x38d982;if(!isDrawing)return;if(_0x28153e[_0x59514e(0x1e5)][_0x59514e(0x1f4)]>0x1)return;_0x28153e[_0x59514e(0x1c8)]();let _0x4f0544=getTouchPos(_0x28153e);if(lastTouch){let _0x3c35a1=_0x4f0544['x']-lastTouch['x'],_0x40ad2f=_0x4f0544['y']-lastTouch['y'],_0x5c631f=Math['max'](Math[_0x59514e(0x184)](_0x3c35a1),Math[_0x59514e(0x184)](_0x40ad2f));for(let _0x16d44=0x1;_0x16d44<=_0x5c631f;_0x16d44++){let _0x287b81=Math[_0x59514e(0x1e8)](lastTouch['x']+_0x3c35a1*_0x16d44/_0x5c631f),_0x5003cd=Math[_0x59514e(0x1e8)](lastTouch['y']+_0x40ad2f*_0x16d44/_0x5c631f);drawDotTouch(_0x287b81,_0x5003cd);}}else drawDotTouch(_0x4f0544['x'],_0x4f0544['y']);lastTouch=_0x4f0544;}function handleTouchEnd(_0x17ed94){isDrawing&&saveHistory(),isDrawing=![],lastTouch=null;}function drawDotXY(_0x142206,_0x3da5b8){const _0x49a746=a0_0x38d982;let _0x36b599=getCurrentProject(),_0x51ac8c=getCurrentFrame();if(!_0x51ac8c||!_0x36b599)return;if(typeof _0x142206!==_0x49a746(0x1b7)||typeof _0x3da5b8!==_0x49a746(0x1b7)||_0x142206<0x0||_0x3da5b8<0x0||!Number[_0x49a746(0x1f7)](_0x36b599['width'])||!Number['isFinite'](_0x36b599[_0x49a746(0x116)])||_0x142206>=_0x36b599[_0x49a746(0x14f)]||_0x3da5b8>=_0x36b599[_0x49a746(0x116)]||!Array[_0x49a746(0x183)](_0x51ac8c[_0x49a746(0x123)])||typeof _0x51ac8c[_0x49a746(0x15f)]!==_0x49a746(0x1b7)||!_0x51ac8c[_0x49a746(0x123)][_0x51ac8c[_0x49a746(0x15f)]])return;let _0x11096e=_0x51ac8c['layers'][_0x51ac8c[_0x49a746(0x15f)]]['getContext']('2d');if(!_0x11096e)return;if(currentTool===_0x49a746(0x124)||currentColor===_0x49a746(0x165)||currentColor===_0x49a746(0x21e)||currentAlpha===0x0)drawPenShape(_0x11096e,_0x142206,_0x3da5b8,_0x49a746(0x21e),!![]);else{let _0x48f71b=hexToRgba(currentColor,currentAlpha);_0x11096e[_0x49a746(0x12c)](),_0x11096e[_0x49a746(0x126)]=_0x48f71b[0x3]/0xff,drawPenShape(_0x11096e,_0x142206,_0x3da5b8,_0x49a746(0x208)+_0x48f71b[0x0]+','+_0x48f71b[0x1]+','+_0x48f71b[0x2]+','+_0x48f71b[0x3]/0xff+')',![]),_0x11096e[_0x49a746(0x199)]();}redrawAll();}function drawPenShape(_0x1dc095,_0x41f91f,_0x307739,_0x4285d9,_0x42ebb5){const _0x49ae17=a0_0x38d982,_0x118fb7=_0x41f91f*cellSize,_0x28d930=_0x307739*cellSize,_0x243de4=penSize*cellSize;_0x42ebb5?(_0x1dc095['save'](),_0x1dc095[_0x49ae17(0x16d)]=_0x49ae17(0x139),penMode==='circle'?(_0x1dc095['beginPath'](),_0x1dc095[_0x49ae17(0x1d5)](_0x118fb7+cellSize/0x2,_0x28d930+cellSize/0x2,_0x243de4/0x2,0x0,Math['PI']*0x2),_0x1dc095[_0x49ae17(0x1ed)]()):_0x1dc095[_0x49ae17(0x157)](_0x118fb7-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x28d930-Math[_0x49ae17(0x185)]((penSize-0x1)/0x2)*cellSize,_0x243de4,_0x243de4),_0x1dc095[_0x49ae17(0x199)]()):(_0x1dc095[_0x49ae17(0x12c)](),_0x1dc095[_0x49ae17(0x1ef)]=_0x4285d9,penMode==='circle'?(_0x1dc095[_0x49ae17(0x11e)](),_0x1dc095['arc'](_0x118fb7+cellSize/0x2,_0x28d930+cellSize/0x2,_0x243de4/0x2,0x0,Math['PI']*0x2),_0x1dc095[_0x49ae17(0x1ed)]()):_0x1dc095[_0x49ae17(0x12e)](_0x118fb7-Math[_0x49ae17(0x185)]((penSize-0x1)/0x2)*cellSize,_0x28d930-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x243de4,_0x243de4),_0x1dc095[_0x49ae17(0x199)]());}function drawDotTouch(_0x3a2f3b,_0x5b188c){const _0x2057e8=a0_0x38d982;let _0x1b95b2=getCurrentProject(),_0x545b7e=getCurrentFrame();if(_0x3a2f3b<0x0||_0x5b188c<0x0||_0x3a2f3b>=_0x1b95b2['width']||_0x5b188c>=_0x1b95b2['height'])return;let _0x512435=_0x545b7e[_0x2057e8(0x123)][_0x545b7e[_0x2057e8(0x15f)]]['getContext']('2d');if(currentTool==='eraser'||currentColor==='transparent'||currentColor==='#00000000'||currentAlpha===0x0)drawPenShape(_0x512435,_0x3a2f3b,_0x5b188c,_0x2057e8(0x21e),!![]);else{let _0x2c41ba=hexToRgba(currentColor,currentAlpha);_0x512435[_0x2057e8(0x12c)](),_0x512435['globalAlpha']=_0x2c41ba[0x3]/0xff,drawPenShape(_0x512435,_0x3a2f3b,_0x5b188c,_0x2057e8(0x208)+_0x2c41ba[0x0]+','+_0x2c41ba[0x1]+','+_0x2c41ba[0x2]+','+_0x2c41ba[0x3]/0xff+')',![]),_0x512435[_0x2057e8(0x199)]();}redrawAll();}window[a0_0x38d982(0x1c4)]=()=>{const _0x2d9a8a=a0_0x38d982;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x2d9a8a(0x1fa)),createPalette(),document['getElementById']('penSize')['value']=penSize,document[_0x2d9a8a(0x141)](_0x2d9a8a(0x148))[_0x2d9a8a(0x1e7)]=penMode,canvas[_0x2d9a8a(0x176)]=handleMouseMove,canvas[_0x2d9a8a(0x16a)]=handleMouseUp,canvas[_0x2d9a8a(0x13e)]=handleMouseUp,canvas[_0x2d9a8a(0x1e0)]=handleTouchStart,canvas['ontouchmove']=handleTouchMove,canvas['ontouchend']=handleTouchEnd,canvas[_0x2d9a8a(0x21f)]=handleTouchEnd,canvas['addEventListener']('touchstart',handleTouchStart,{'passive':![]}),canvas[_0x2d9a8a(0x156)]('touchmove',handleTouchMove,{'passive':![]}),canvas[_0x2d9a8a(0x156)](_0x2d9a8a(0x132),handleTouchEnd,{'passive':![]}),canvas[_0x2d9a8a(0x156)](_0x2d9a8a(0x20c),handleTouchEnd,{'passive':![]}),idbGet('nezumi-projects')&&loadProjectFromIDB();};function drawGrid(_0x5a9bf2,_0x5a4ec1){const _0x1adaff=a0_0x38d982;ctx[_0x1adaff(0x12c)](),ctx[_0x1adaff(0x13c)]=_0x1adaff(0x1d1);for(let _0x101e5d=0x0;_0x101e5d<=_0x5a9bf2;_0x101e5d++){ctx[_0x1adaff(0x11e)](),ctx[_0x1adaff(0x217)](_0x101e5d*cellSize,0x0),ctx['lineTo'](_0x101e5d*cellSize,_0x5a4ec1*cellSize),ctx[_0x1adaff(0x1fb)]();}for(let _0x389113=0x0;_0x389113<=_0x5a4ec1;_0x389113++){ctx[_0x1adaff(0x11e)](),ctx['moveTo'](0x0,_0x389113*cellSize),ctx[_0x1adaff(0x13d)](_0x5a9bf2*cellSize,_0x389113*cellSize),ctx['stroke']();}ctx['restore']();}function redrawAll(){const _0x488006=a0_0x38d982;let _0xc66de8=getCurrentProject(),_0x2bb900=getCurrentFrame();canvas[_0x488006(0x14f)]=_0xc66de8[_0x488006(0x14f)]*cellSize,canvas[_0x488006(0x116)]=_0xc66de8[_0x488006(0x116)]*cellSize,ctx[_0x488006(0x157)](0x0,0x0,canvas[_0x488006(0x14f)],canvas[_0x488006(0x116)]);for(let _0x97bae1=0x0;_0x97bae1<_0x2bb900['layers'][_0x488006(0x1f4)];_0x97bae1++){ctx[_0x488006(0x201)](_0x2bb900[_0x488006(0x123)][_0x97bae1],0x0,0x0);}drawGrid(_0xc66de8[_0x488006(0x14f)],_0xc66de8[_0x488006(0x116)]);}function saveHistory(){const _0x33cf5a=a0_0x38d982;let _0x41a693=getCurrentFrame(),_0x437509=_0x41a693['layerHistories'][_0x41a693['activeLayer']];_0x437509[_0x33cf5a(0x1cc)](_0x41a693[_0x33cf5a(0x123)][_0x41a693[_0x33cf5a(0x15f)]][_0x33cf5a(0x125)]());if(_0x437509[_0x33cf5a(0x1f4)]>0x32)_0x437509[_0x33cf5a(0x235)]();_0x41a693[_0x33cf5a(0x166)][_0x41a693[_0x33cf5a(0x15f)]]=[];}function undo(){const _0x2f5a40=a0_0x38d982;let _0x217328=getCurrentFrame(),_0x3f2a9e=_0x217328[_0x2f5a40(0x1ea)][_0x217328['activeLayer']],_0x50cc08=_0x217328[_0x2f5a40(0x166)][_0x217328['activeLayer']];if(!_0x3f2a9e||_0x3f2a9e[_0x2f5a40(0x1f4)]<0x2)return;_0x50cc08['push'](_0x3f2a9e['pop']());let _0xd3780c=new Image();_0xd3780c[_0x2f5a40(0x1c4)]=()=>{const _0x41195f=_0x2f5a40;let _0x4ab820=_0x217328[_0x41195f(0x123)][_0x217328[_0x41195f(0x15f)]]['getContext']('2d');_0x4ab820[_0x41195f(0x157)](0x0,0x0,_0x217328['layers'][_0x217328[_0x41195f(0x15f)]]['width'],_0x217328[_0x41195f(0x123)][_0x217328[_0x41195f(0x15f)]][_0x41195f(0x116)]),_0x4ab820['drawImage'](_0xd3780c,0x0,0x0),redrawAll();},_0xd3780c[_0x2f5a40(0x200)]=_0x3f2a9e[_0x3f2a9e[_0x2f5a40(0x1f4)]-0x1];}function redo(){const _0x51612a=a0_0x38d982;let _0x3f3d08=getCurrentFrame(),_0x400b81=_0x3f3d08[_0x51612a(0x1ea)][_0x3f3d08['activeLayer']],_0xe04312=_0x3f3d08[_0x51612a(0x166)][_0x3f3d08['activeLayer']];if(!_0xe04312||_0xe04312[_0x51612a(0x1f4)]===0x0)return;let _0x4f0e81=_0xe04312[_0x51612a(0x1c7)]();_0x400b81['push'](_0x4f0e81);let _0x11afa3=new Image();_0x11afa3['onload']=()=>{const _0x338702=_0x51612a;let _0x1fb452=_0x3f3d08[_0x338702(0x123)][_0x3f3d08[_0x338702(0x15f)]][_0x338702(0x17f)]('2d');_0x1fb452[_0x338702(0x157)](0x0,0x0,_0x3f3d08[_0x338702(0x123)][_0x3f3d08[_0x338702(0x15f)]][_0x338702(0x14f)],_0x3f3d08[_0x338702(0x123)][_0x3f3d08[_0x338702(0x15f)]][_0x338702(0x116)]),_0x1fb452[_0x338702(0x201)](_0x11afa3,0x0,0x0),redrawAll();},_0x11afa3[_0x51612a(0x200)]=_0x4f0e81;}function exportImage(_0x2e46e0){const _0x42b711=a0_0x38d982;let _0x1bef0e=getCurrentProject(),_0x4c916d=_0x1bef0e[_0x42b711(0x1a5)],_0x38d3f6=_0x2e46e0===_0x42b711(0x1bc)||_0x2e46e0==='jpeg'?_0x42b711(0x168):_0x42b711(0x1b9)+_0x2e46e0,_0x503fe6=_0x4c916d[_0x42b711(0x1f4)]>0x1,_0x110636=(_0x1bef0e[_0x42b711(0x179)]||_0x42b711(0x1aa))[_0x42b711(0x1af)](/[\\/:*?"<>|]/g,'_');if(!_0x503fe6){let _0x5ba0bb=document['createElement'](_0x42b711(0x1d7));_0x5ba0bb[_0x42b711(0x14f)]=_0x1bef0e[_0x42b711(0x14f)]*cellSize,_0x5ba0bb[_0x42b711(0x116)]=_0x1bef0e[_0x42b711(0x116)]*cellSize;let _0x55f612=_0x5ba0bb['getContext']('2d'),_0x2472bd=getCurrentFrame();for(let _0x1bf13b=0x0;_0x1bf13b<_0x2472bd[_0x42b711(0x123)][_0x42b711(0x1f4)];_0x1bf13b++){_0x55f612[_0x42b711(0x201)](_0x2472bd[_0x42b711(0x123)][_0x1bf13b],0x0,0x0);}let _0x10a68f=document[_0x42b711(0x236)]('a');_0x10a68f[_0x42b711(0x15c)]=_0x110636+'.'+_0x2e46e0,_0x2e46e0===_0x42b711(0x1bc)||_0x2e46e0==='jpeg'?_0x10a68f[_0x42b711(0x11b)]=_0x5ba0bb[_0x42b711(0x125)](_0x38d3f6,0.92):_0x10a68f['href']=_0x5ba0bb[_0x42b711(0x125)](_0x38d3f6),_0x10a68f[_0x42b711(0x1fd)]();}else{if(_0x2e46e0===_0x42b711(0x198)&&typeof window[_0x42b711(0x1c1)]!==_0x42b711(0x19a))exportWebpAnimation(_0x4c916d,_0x1bef0e[_0x42b711(0x14f)]*cellSize,_0x1bef0e[_0x42b711(0x116)]*cellSize,_0x110636);else for(let _0x4f0c9a=0x0;_0x4f0c9a<_0x4c916d[_0x42b711(0x1f4)];_0x4f0c9a++){let _0x2c044c=document[_0x42b711(0x236)](_0x42b711(0x1d7));_0x2c044c[_0x42b711(0x14f)]=_0x1bef0e['width']*cellSize,_0x2c044c[_0x42b711(0x116)]=_0x1bef0e[_0x42b711(0x116)]*cellSize;let _0x2237c7=_0x2c044c[_0x42b711(0x17f)]('2d'),_0x17b8e0=_0x4c916d[_0x4f0c9a];for(let _0x257e83=0x0;_0x257e83<_0x17b8e0['layers'][_0x42b711(0x1f4)];_0x257e83++){_0x2237c7[_0x42b711(0x201)](_0x17b8e0[_0x42b711(0x123)][_0x257e83],0x0,0x0);}let _0x15812e=document[_0x42b711(0x236)]('a');_0x15812e[_0x42b711(0x15c)]=_0x110636+'-f'+(_0x4f0c9a+0x1)+'.'+_0x2e46e0,_0x2e46e0===_0x42b711(0x1bc)||_0x2e46e0===_0x42b711(0x225)?_0x15812e[_0x42b711(0x11b)]=_0x2c044c[_0x42b711(0x125)](_0x38d3f6,0.92):_0x15812e[_0x42b711(0x11b)]=_0x2c044c[_0x42b711(0x125)](_0x38d3f6),setTimeout(()=>_0x15812e[_0x42b711(0x1fd)](),_0x4f0c9a*0x64);}}}async function exportWebpAnimation(_0x2c3fbe,_0x5e0f9d,_0xf98e19,_0x59f49f='nezumi-animation'){const _0x41705e=a0_0x38d982;if(!window[_0x41705e(0x1c1)]||!window[_0x41705e(0x21d)]){alert(_0x41705e(0x226));return;}const _0x321535=[],_0x4cc673=new VideoEncoder({'output':_0x328fe3=>_0x321535[_0x41705e(0x1cc)](_0x328fe3),'error':_0x6126dd=>console['error'](_0x6126dd)});_0x4cc673[_0x41705e(0x152)]({'codec':'vp8','width':_0x5e0f9d,'height':_0xf98e19,'framerate':0x5});for(let _0x4b8a08=0x0;_0x4b8a08<_0x2c3fbe[_0x41705e(0x1f4)];_0x4b8a08++){let _0x23a70c=document[_0x41705e(0x236)](_0x41705e(0x1d7));_0x23a70c[_0x41705e(0x14f)]=_0x5e0f9d,_0x23a70c[_0x41705e(0x116)]=_0xf98e19;let _0x151bd0=_0x23a70c[_0x41705e(0x17f)]('2d'),_0x78e84b=_0x2c3fbe[_0x4b8a08];for(let _0xf12d0c=0x0;_0xf12d0c<_0x78e84b['layers'][_0x41705e(0x1f4)];_0xf12d0c++){_0x151bd0['drawImage'](_0x78e84b[_0x41705e(0x123)][_0xf12d0c],0x0,0x0);}let _0x58db41=await createImageBitmap(_0x23a70c);_0x4cc673[_0x41705e(0x20a)](_0x58db41,{'keyFrame':!![],'duration':0xc8}),_0x58db41[_0x41705e(0x122)]();}await _0x4cc673[_0x41705e(0x129)](),_0x4cc673[_0x41705e(0x122)]();const _0x45a347=new Blob(_0x321535[_0x41705e(0x120)](_0x4da55b=>_0x4da55b[_0x41705e(0x1b3)]?_0x4da55b:_0x4da55b['data']),{'type':'video/webm'}),_0x2265e3=document[_0x41705e(0x236)]('a');_0x2265e3[_0x41705e(0x15c)]=_0x59f49f+_0x41705e(0x161),_0x2265e3['href']=URL[_0x41705e(0x181)](_0x45a347),_0x2265e3[_0x41705e(0x1fd)]();}function exportGif(){const _0x4d262=a0_0x38d982;let _0x122301=getCurrentProject(),_0x4af975=_0x122301[_0x4d262(0x1a5)],_0x59cb60=_0x122301[_0x4d262(0x14f)]*cellSize,_0xf91fcf=_0x122301[_0x4d262(0x116)]*cellSize;const _0x4de051=_0x4af975[_0x4d262(0x120)](_0x50b8a9=>{const _0x2ff4b2=_0x4d262;let _0x3ae831=document['createElement'](_0x2ff4b2(0x1d7));_0x3ae831['width']=_0x59cb60,_0x3ae831[_0x2ff4b2(0x116)]=_0xf91fcf;let _0x222b73=_0x3ae831[_0x2ff4b2(0x17f)]('2d');for(let _0x4567cc=0x0;_0x4567cc<_0x50b8a9['layers'][_0x2ff4b2(0x1f4)];_0x4567cc++){_0x222b73[_0x2ff4b2(0x201)](_0x50b8a9[_0x2ff4b2(0x123)][_0x4567cc],0x0,0x0);}return _0x3ae831[_0x2ff4b2(0x125)]('image/png');});Promise[_0x4d262(0x222)](_0x4de051[_0x4d262(0x120)](_0x761d06=>{return new Promise(_0x204d63=>{const _0x7d41fc=a0_0x4dac,_0x1b696a=new Image();_0x1b696a[_0x7d41fc(0x200)]=_0x761d06,_0x1b696a['onload']=()=>_0x204d63(_0x1b696a);});}))[_0x4d262(0x149)](_0x12de5a=>{const _0x1d9ef4=_0x4d262,_0x20b4f4=_0x12de5a['filter'](_0x794f10=>_0x794f10['width']>0x0&&_0x794f10['height']>0x0);if(_0x20b4f4[_0x1d9ef4(0x1f4)]===0x0){alert('GIFに変換できる画像がありません。');return;}const _0x588eeb=(_0x122301[_0x1d9ef4(0x179)]||'nezumi-animation')[_0x1d9ef4(0x1af)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x20b4f4,0x12c,_0x588eeb+_0x1d9ef4(0x1ac));});}function exportApng(){const _0x27712f=a0_0x38d982;let _0x377bd2=getCurrentProject(),_0x31fcf2=_0x377bd2[_0x27712f(0x1a5)],_0x3dc1e1=_0x377bd2['width']*cellSize,_0x9216fc=_0x377bd2['height']*cellSize;const _0x3eca39=_0x31fcf2['map'](_0x1046b3=>{const _0x399da9=_0x27712f;let _0x118094=document['createElement'](_0x399da9(0x1d7));_0x118094[_0x399da9(0x14f)]=_0x3dc1e1,_0x118094[_0x399da9(0x116)]=_0x9216fc;let _0x50a4df=_0x118094[_0x399da9(0x17f)]('2d');for(let _0x549a7e=0x0;_0x549a7e<_0x1046b3[_0x399da9(0x123)][_0x399da9(0x1f4)];_0x549a7e++){_0x50a4df[_0x399da9(0x201)](_0x1046b3[_0x399da9(0x123)][_0x549a7e],0x0,0x0);}let _0x54ffd8=new Image();return _0x54ffd8[_0x399da9(0x200)]=_0x118094[_0x399da9(0x125)](_0x399da9(0x233)),_0x54ffd8;}),_0x486870=(_0x377bd2['name']||_0x27712f(0x1ad))[_0x27712f(0x1af)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x3eca39,_0x3dc1e1,_0x9216fc,0x12c,_0x486870+_0x27712f(0x18a));}const dbName=a0_0x38d982(0x21a),storeName=a0_0x38d982(0x175);function openDB(){return new Promise((_0x58a5fc,_0x2621d9)=>{const _0x5e44c4=a0_0x4dac,_0x16b2d4=indexedDB[_0x5e44c4(0x1ff)](dbName,0x1);_0x16b2d4[_0x5e44c4(0x22d)]=()=>{const _0x13b606=_0x5e44c4;_0x16b2d4[_0x13b606(0x204)][_0x13b606(0x21b)](storeName);},_0x16b2d4[_0x5e44c4(0x151)]=()=>_0x58a5fc(_0x16b2d4[_0x5e44c4(0x204)]),_0x16b2d4[_0x5e44c4(0x1f6)]=()=>_0x2621d9(_0x16b2d4[_0x5e44c4(0x1d9)]);});}async function idbSet(_0x51f81e,_0xb9a4f4){const _0x291dd1=await openDB();return new Promise((_0x5e3d9e,_0xfe2d00)=>{const _0x4fda6d=a0_0x4dac,_0x5ac6dd=_0x291dd1[_0x4fda6d(0x17c)](storeName,'readwrite');_0x5ac6dd[_0x4fda6d(0x232)](storeName)[_0x4fda6d(0x138)](_0xb9a4f4,_0x51f81e),_0x5ac6dd[_0x4fda6d(0x1c2)]=()=>_0x5e3d9e(),_0x5ac6dd[_0x4fda6d(0x1f6)]=()=>_0xfe2d00(_0x5ac6dd[_0x4fda6d(0x1d9)]);});}async function idbGet(_0x5a897a){const _0x5b2cdf=await openDB();return new Promise((_0x2e5c4b,_0x72a25a)=>{const _0x4c6e01=a0_0x4dac,_0x1793b1=_0x5b2cdf[_0x4c6e01(0x17c)](storeName,'readonly'),_0x96a7e7=_0x1793b1[_0x4c6e01(0x232)](storeName)['get'](_0x5a897a);_0x96a7e7[_0x4c6e01(0x151)]=()=>_0x2e5c4b(_0x96a7e7['result']),_0x96a7e7[_0x4c6e01(0x1f6)]=()=>_0x72a25a(_0x96a7e7[_0x4c6e01(0x1d9)]);});}async function idbDelete(_0x20d7f2){const _0x4a79ce=await openDB();return new Promise((_0x5c96a4,_0x18eac5)=>{const _0x254723=a0_0x4dac,_0x2fecc5=_0x4a79ce[_0x254723(0x17c)](storeName,'readwrite');_0x2fecc5['objectStore'](storeName)['delete'](_0x20d7f2),_0x2fecc5['oncomplete']=()=>_0x5c96a4(),_0x2fecc5[_0x254723(0x1f6)]=()=>_0x18eac5(_0x2fecc5[_0x254723(0x1d9)]);});}async function idbClear(){const _0x27941b=await openDB();return new Promise((_0x1ea310,_0x1df45f)=>{const _0x3d48b2=a0_0x4dac,_0x129e09=_0x27941b['transaction'](storeName,'readwrite');_0x129e09[_0x3d48b2(0x232)](storeName)[_0x3d48b2(0x153)](),_0x129e09[_0x3d48b2(0x1c2)]=()=>_0x1ea310(),_0x129e09['onerror']=()=>_0x1df45f(_0x129e09[_0x3d48b2(0x1d9)]);});}function saveProjectFile(){const _0x5aa137=a0_0x38d982,_0x45f357={'projects':projects[_0x5aa137(0x120)](_0x2c3f76=>({'width':_0x2c3f76[_0x5aa137(0x14f)],'height':_0x2c3f76[_0x5aa137(0x116)],'name':_0x2c3f76[_0x5aa137(0x179)]||'','activeFrame':_0x2c3f76[_0x5aa137(0x150)],'frames':_0x2c3f76[_0x5aa137(0x1a5)][_0x5aa137(0x120)](_0x28c186=>({'activeLayer':_0x28c186[_0x5aa137(0x15f)],'layers':_0x28c186['layers'][_0x5aa137(0x120)](_0x3c174e=>_0x3c174e[_0x5aa137(0x125)]())}))})),'activeProject':activeProject},_0x1e549d=new Blob([JSON[_0x5aa137(0x136)](_0x45f357)],{'type':_0x5aa137(0x1f1)}),_0x396081=document[_0x5aa137(0x236)]('a');_0x396081['download']=_0x5aa137(0x15e),_0x396081[_0x5aa137(0x11b)]=URL['createObjectURL'](_0x1e549d),_0x396081['click']();}function saveProjectFile(){const _0x43414e=a0_0x38d982,_0x3695e3={'projects':projects[_0x43414e(0x120)](_0x3cf736=>({'width':_0x3cf736[_0x43414e(0x14f)],'height':_0x3cf736['height'],'name':_0x3cf736[_0x43414e(0x179)]||'','activeFrame':_0x3cf736[_0x43414e(0x150)],'frames':_0x3cf736[_0x43414e(0x1a5)]['map'](_0x2f5d63=>({'activeLayer':_0x2f5d63['activeLayer'],'layers':_0x2f5d63[_0x43414e(0x123)][_0x43414e(0x120)](_0x2d6d41=>_0x2d6d41[_0x43414e(0x125)]())}))})),'activeProject':activeProject},_0x174c73=new Blob([JSON[_0x43414e(0x136)](_0x3695e3)],{'type':_0x43414e(0x1f1)}),_0xc5da18=document[_0x43414e(0x236)]('a');_0xc5da18[_0x43414e(0x15c)]='nezumi-sketch.msketch',_0xc5da18[_0x43414e(0x11b)]=URL[_0x43414e(0x181)](_0x174c73),_0xc5da18[_0x43414e(0x1fd)]();}async function saveProjectToIDB(){const _0xeaead6=a0_0x38d982,_0x5305c1={'projects':projects[_0xeaead6(0x120)](_0x180f39=>({'width':_0x180f39[_0xeaead6(0x14f)],'height':_0x180f39['height'],'name':_0x180f39['name']||'','activeFrame':_0x180f39['activeFrame'],'frames':_0x180f39['frames'][_0xeaead6(0x120)](_0x583e19=>({'activeLayer':_0x583e19[_0xeaead6(0x15f)],'layers':_0x583e19[_0xeaead6(0x123)][_0xeaead6(0x120)](_0x34ea3b=>_0x34ea3b['toDataURL']())}))})),'activeProject':activeProject};try{await idbSet(_0xeaead6(0x177),_0x5305c1),console[_0xeaead6(0x1f0)]('プロジェクトをIndexedDBに保存したチュー！');}catch(_0x3fdda9){console['error']('保存に失敗したチュー:',_0x3fdda9);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x38d982(0x156)](a0_0x38d982(0x1e1),_0x2f7d4e=>{saveProjectToIDB();});function loadProjectFile(_0x57cbae){const _0x372dc0=a0_0x38d982,_0x484cfb=_0x57cbae[_0x372dc0(0x174)][_0x372dc0(0x1de)][0x0];if(!_0x484cfb)return;const _0xe21d9e=new FileReader();_0xe21d9e['onload']=function(_0x103693){const _0x1b2816=_0x372dc0;try{const _0x129be5=JSON['parse'](_0x103693[_0x1b2816(0x174)]['result']);projects=_0x129be5[_0x1b2816(0x18f)][_0x1b2816(0x120)]((_0x311175,_0x5cc45c)=>{const _0x1037d8=_0x1b2816;let _0x39092b=createProject(_0x311175['width'],_0x311175[_0x1037d8(0x116)],_0x311175[_0x1037d8(0x179)]||'画像'+(_0x5cc45c+0x1));return _0x39092b[_0x1037d8(0x1a5)]=_0x311175[_0x1037d8(0x1a5)]['map'](_0x311223=>{const _0x4585f7=_0x1037d8;let _0x164cc3={'layers':[],'activeLayer':_0x311223[_0x4585f7(0x15f)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x5c702a=0x0;_0x5c702a<_0x311223[_0x4585f7(0x123)][_0x4585f7(0x1f4)];_0x5c702a++){let _0x5011a9=new Image();_0x5011a9['src']=_0x311223['layers'][_0x5c702a];let _0x44c68d=document[_0x4585f7(0x236)]('canvas');_0x44c68d[_0x4585f7(0x14f)]=_0x311175[_0x4585f7(0x14f)]*cellSize,_0x44c68d[_0x4585f7(0x116)]=_0x311175[_0x4585f7(0x116)]*cellSize,_0x5011a9[_0x4585f7(0x1c4)]=()=>{const _0x9bae4d=_0x4585f7;let _0x25fed4=_0x44c68d[_0x9bae4d(0x17f)]('2d');_0x25fed4[_0x9bae4d(0x157)](0x0,0x0,_0x44c68d[_0x9bae4d(0x14f)],_0x44c68d[_0x9bae4d(0x116)]),_0x25fed4['drawImage'](_0x5011a9,0x0,0x0);},_0x5011a9[_0x4585f7(0x1c4)](),_0x164cc3['layers']['push'](_0x44c68d),_0x164cc3['layerHistories'][_0x4585f7(0x1cc)]([]),_0x164cc3[_0x4585f7(0x166)][_0x4585f7(0x1cc)]([]);}return _0x164cc3;}),_0x39092b[_0x1037d8(0x150)]=_0x311175['activeFrame'],_0x39092b[_0x1037d8(0x179)]=_0x311175[_0x1037d8(0x179)]||'画像'+(_0x5cc45c+0x1),_0x39092b;}),activeProject=_0x129be5[_0x1b2816(0x17d)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x5c941a){alert(_0x1b2816(0x13b));}},_0xe21d9e['readAsText'](_0x484cfb);}async function loadProjectFromIDB(){const _0x4dab94=a0_0x38d982;try{const _0x562186=await idbGet('nezumi-sketch-save');if(!_0x562186)return;projects=_0x562186[_0x4dab94(0x18f)]['map']((_0x298ec6,_0x97808c)=>{const _0x765155=_0x4dab94;let _0x43a3dc=createProject(_0x298ec6['width'],_0x298ec6[_0x765155(0x116)],_0x298ec6[_0x765155(0x179)]||'画像'+(_0x97808c+0x1));return _0x43a3dc[_0x765155(0x1a5)]=_0x298ec6[_0x765155(0x1a5)][_0x765155(0x120)](_0x35afe1=>{const _0x335e57=_0x765155;let _0xba11f5={'layers':[],'activeLayer':_0x35afe1[_0x335e57(0x15f)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x13abf8=0x0;_0x13abf8<_0x35afe1[_0x335e57(0x123)]['length'];_0x13abf8++){let _0x11bd71=new Image();_0x11bd71[_0x335e57(0x200)]=_0x35afe1['layers'][_0x13abf8];let _0x2100f0=document[_0x335e57(0x236)]('canvas');_0x2100f0[_0x335e57(0x14f)]=_0x298ec6[_0x335e57(0x14f)]*cellSize,_0x2100f0[_0x335e57(0x116)]=_0x298ec6['height']*cellSize,_0x11bd71[_0x335e57(0x1c4)]=()=>{const _0x56a3fe=_0x335e57;let _0x2695fc=_0x2100f0['getContext']('2d');_0x2695fc['clearRect'](0x0,0x0,_0x2100f0['width'],_0x2100f0['height']),_0x2695fc[_0x56a3fe(0x201)](_0x11bd71,0x0,0x0);},_0xba11f5[_0x335e57(0x123)][_0x335e57(0x1cc)](_0x2100f0),_0xba11f5[_0x335e57(0x1ea)][_0x335e57(0x1cc)]([]),_0xba11f5[_0x335e57(0x166)]['push']([]);}return _0xba11f5;}),_0x43a3dc[_0x765155(0x150)]=_0x298ec6[_0x765155(0x150)],_0x43a3dc[_0x765155(0x179)]=_0x298ec6[_0x765155(0x179)]||'画像'+(_0x97808c+0x1),_0x43a3dc;}),activeProject=_0x562186[_0x4dab94(0x17d)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool('pen'),console['log'](_0x4dab94(0x234));}catch(_0x116916){alert(_0x4dab94(0x1b4)),console[_0x4dab94(0x1d9)](_0x116916);}}function wait(_0x3b4c25){return new Promise(_0x15b103=>setTimeout(_0x15b103,_0x3b4c25));}function initCanvas(){const _0x10c8d4=a0_0x38d982,_0x97ba2a=parseInt(0x10),_0x144aff=parseInt(0x10);let _0x498618=getCurrentProject();_0x498618[_0x10c8d4(0x14f)]=_0x97ba2a,_0x498618[_0x10c8d4(0x116)]=_0x144aff,canvas['width']=_0x97ba2a*cellSize,canvas[_0x10c8d4(0x116)]=_0x144aff*cellSize,_0x498618[_0x10c8d4(0x123)]=[],_0x498618[_0x10c8d4(0x1ea)]=[],_0x498618[_0x10c8d4(0x166)]=[];let _0x4f4bcc=document[_0x10c8d4(0x236)](_0x10c8d4(0x1d7));_0x4f4bcc[_0x10c8d4(0x14f)]=_0x97ba2a*cellSize,_0x4f4bcc[_0x10c8d4(0x116)]=_0x144aff*cellSize,_0x498618[_0x10c8d4(0x123)][_0x10c8d4(0x1cc)](_0x4f4bcc),_0x498618[_0x10c8d4(0x1ea)][_0x10c8d4(0x1cc)]([]),_0x498618[_0x10c8d4(0x166)][_0x10c8d4(0x1cc)]([]),_0x498618['activeLayer']=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x10c8d4(0x172)]=null,canvas['onmousemove']=null,canvas[_0x10c8d4(0x16a)]=null,canvas['onmouseleave']=null,canvas[_0x10c8d4(0x1e0)]=null,canvas[_0x10c8d4(0x209)]=null,canvas[_0x10c8d4(0x20d)]=null,canvas['ontouchcancel']=null,canvas[_0x10c8d4(0x207)](_0x10c8d4(0x14d),handleTouchStart),canvas['removeEventListener']('touchmove',handleTouchMove),canvas[_0x10c8d4(0x207)](_0x10c8d4(0x132),handleTouchEnd),canvas[_0x10c8d4(0x207)](_0x10c8d4(0x20c),handleTouchEnd),canvas[_0x10c8d4(0x172)]=handleMouseDown,canvas[_0x10c8d4(0x176)]=handleMouseMove,canvas[_0x10c8d4(0x16a)]=handleMouseUp,canvas['onmouseleave']=handleMouseUp,canvas[_0x10c8d4(0x1e0)]=handleTouchStart,canvas[_0x10c8d4(0x209)]=handleTouchMove,canvas['ontouchend']=handleTouchEnd,canvas[_0x10c8d4(0x21f)]=handleTouchEnd,canvas[_0x10c8d4(0x156)]('touchstart',handleTouchStart,{'passive':![]}),canvas[_0x10c8d4(0x156)](_0x10c8d4(0x135),handleTouchMove,{'passive':![]}),canvas['addEventListener'](_0x10c8d4(0x132),handleTouchEnd,{'passive':![]}),canvas[_0x10c8d4(0x156)](_0x10c8d4(0x20c),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x2eb117=a0_0x38d982,_0x51d4e1=document['getElementById'](_0x2eb117(0x147));if(!_0x51d4e1)return;_0x51d4e1[_0x2eb117(0x15d)]='',PALETTE_COLORS[_0x2eb117(0x173)]((_0x15086d,_0x2f96c1)=>{const _0xd957d4=_0x2eb117,_0x433797=document[_0xd957d4(0x236)](_0xd957d4(0x193));_0x433797[_0xd957d4(0x1c9)]=_0xd957d4(0x1ab);_0x15086d===_0xd957d4(0x165)||_0x15086d===_0xd957d4(0x21e)?(_0x433797['style'][_0xd957d4(0x17b)]=_0xd957d4(0x18d),_0x433797[_0xd957d4(0x144)]='透明',_0x433797[_0xd957d4(0x15d)]='<span\x20style=\x22font-size:13px;color:#888;\x22>透明</span>'):(_0x433797[_0xd957d4(0x158)][_0xd957d4(0x17b)]=_0x15086d,_0x433797['title']=_0x15086d);_0x433797[_0xd957d4(0x1b1)]=()=>{const _0x28143=_0xd957d4;currentColor=_0x15086d,_0x15086d===_0x28143(0x165)||_0x15086d===_0x28143(0x21e)?document['getElementById'](_0x28143(0x162))[_0x28143(0x1e7)]=_0x28143(0x20f):document[_0x28143(0x141)]('colorPicker')[_0x28143(0x1e7)]=_0x15086d,document[_0x28143(0x203)](_0x28143(0x1ae))['forEach'](_0x38d599=>_0x38d599[_0x28143(0x189)][_0x28143(0x211)](_0x28143(0x13f))),_0x433797[_0x28143(0x189)][_0x28143(0x164)](_0x28143(0x13f));};if(_0x2f96c1!==0x0){const _0x32b802=document[_0xd957d4(0x236)]('span');_0x32b802[_0xd957d4(0x1db)]='×',_0x32b802[_0xd957d4(0x1c9)]=_0xd957d4(0x187),_0x32b802[_0xd957d4(0x144)]='この色をパレットから削除',_0x32b802[_0xd957d4(0x1b1)]=_0x40a572=>{const _0x1f9865=_0xd957d4;_0x40a572[_0x1f9865(0x1ec)](),PALETTE_COLORS[_0x1f9865(0x1f4)]>0x2&&(PALETTE_COLORS[_0x1f9865(0x137)](_0x2f96c1,0x1),createPalette());},_0x433797[_0xd957d4(0x154)](_0x32b802);}_0x51d4e1['appendChild'](_0x433797);});const _0x38c692=document['createElement'](_0x2eb117(0x193));_0x38c692[_0x2eb117(0x1c9)]='palette-add-btn',_0x38c692[_0x2eb117(0x144)]='パレットに色を追加',_0x38c692['innerHTML']='+',_0x38c692[_0x2eb117(0x1b1)]=_0x4a1162=>{const _0x2faea0=_0x2eb117;_0x4a1162[_0x2faea0(0x1ec)]();const _0x18f21d=document[_0x2faea0(0x236)](_0x2faea0(0x17e));_0x18f21d[_0x2faea0(0x22f)]=_0x2faea0(0x197),_0x18f21d[_0x2faea0(0x158)][_0x2faea0(0x159)]=_0x2faea0(0x194);let _0x213f51=![];_0x18f21d[_0x2faea0(0x171)]=_0xd2e491=>{const _0x410ee5=_0x2faea0;!_0x213f51&&(PALETTE_COLORS['push'](_0xd2e491[_0x410ee5(0x174)][_0x410ee5(0x1e7)]),createPalette(),_0x213f51=!![],_0x18f21d[_0x410ee5(0x211)]());},_0x18f21d[_0x2faea0(0x156)]('blur',()=>{const _0x19ccd2=_0x2faea0;if(!_0x213f51)_0x18f21d[_0x19ccd2(0x211)]();}),_0x18f21d[_0x2faea0(0x156)](_0x2faea0(0x1fd),_0x5199ba=>_0x5199ba[_0x2faea0(0x1ec)]()),document[_0x2faea0(0x20e)]['appendChild'](_0x18f21d),_0x18f21d[_0x2faea0(0x1a7)](),_0x18f21d[_0x2faea0(0x1fd)]();},_0x51d4e1[_0x2eb117(0x154)](_0x38c692);let _0x4c5164=document['getElementById']('palette-toolbar');!_0x4c5164&&(_0x4c5164=document[_0x2eb117(0x236)](_0x2eb117(0x142)),_0x4c5164['id']=_0x2eb117(0x1f9),_0x4c5164[_0x2eb117(0x1c9)]='palette-toolbar',_0x51d4e1[_0x2eb117(0x163)]['appendChild'](_0x4c5164)),_0x4c5164[_0x2eb117(0x15d)]=_0x2eb117(0x1a1)+(currentTool===_0x2eb117(0x1fa)?_0x2eb117(0x1a6):'')+_0x2eb117(0x1c5)+(currentTool===_0x2eb117(0x124)?_0x2eb117(0x1a6):'')+_0x2eb117(0x170)+(currentTool===_0x2eb117(0x1ed)?_0x2eb117(0x1a6):'')+_0x2eb117(0x114)+(penSize==0x1?'\x20selected':'')+_0x2eb117(0x16f)+(penSize==0x2?_0x2eb117(0x1fc):'')+_0x2eb117(0x18c)+(penSize==0x3?_0x2eb117(0x1fc):'')+_0x2eb117(0x229)+(penSize==0x4?_0x2eb117(0x1fc):'')+'>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22'+(penMode===_0x2eb117(0x182)?'\x20selected':'')+_0x2eb117(0x1c6)+(penMode===_0x2eb117(0x1c3)?'\x20selected':'')+_0x2eb117(0x1e4)+Math[_0x2eb117(0x1e8)](currentAlpha*0x64)+'\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>'+Math['round'](currentAlpha*0x64)+_0x2eb117(0x1e2),_0x4c5164[_0x2eb117(0x1f2)](_0x2eb117(0x215))[_0x2eb117(0x1a0)]=_0x221782=>setPenSize(_0x221782['target'][_0x2eb117(0x1e7)]),_0x4c5164[_0x2eb117(0x1f2)](_0x2eb117(0x16c))['onchange']=_0x4ba9d2=>setPenMode(_0x4ba9d2[_0x2eb117(0x174)][_0x2eb117(0x1e7)]),_0x4c5164[_0x2eb117(0x203)](_0x2eb117(0x127))[_0x2eb117(0x173)](_0x5556a4=>{const _0x346b7d=_0x2eb117;_0x5556a4[_0x346b7d(0x1b1)]=()=>setTool(_0x5556a4['dataset']['tool']);}),_0x4c5164[_0x2eb117(0x1f2)](_0x2eb117(0x1b8))[_0x2eb117(0x171)]=_0x16798e=>{const _0x4ff0ca=_0x2eb117;setAlpha(_0x16798e[_0x4ff0ca(0x174)][_0x4ff0ca(0x1e7)]),_0x4c5164['querySelector'](_0x4ff0ca(0x205))['textContent']=_0x16798e['target'][_0x4ff0ca(0x1e7)]+'%';let _0xbb3038=document[_0x4ff0ca(0x141)]('alphaSlider'),_0x5b46a4=document[_0x4ff0ca(0x141)](_0x4ff0ca(0x11d));if(_0xbb3038)_0xbb3038[_0x4ff0ca(0x1e7)]=_0x16798e['target']['value'];if(_0x5b46a4)_0x5b46a4[_0x4ff0ca(0x1db)]=_0x16798e['target'][_0x4ff0ca(0x1e7)]+'%';};}function setAlpha(_0x1eb8c5){const _0x5887ff=a0_0x38d982;let _0x48fe7c=Math[_0x5887ff(0x22e)](0x0,Math[_0x5887ff(0x212)](0x64,parseInt(_0x1eb8c5,0xa)||0x0));currentAlpha=_0x48fe7c/0x64;let _0x28a93b=document[_0x5887ff(0x141)](_0x5887ff(0x146)),_0x59c2cf=document['getElementById'](_0x5887ff(0x11d));if(_0x28a93b)_0x28a93b['value']=_0x48fe7c;if(_0x59c2cf)_0x59c2cf[_0x5887ff(0x1db)]=_0x48fe7c+'%';let _0x100423=document[_0x5887ff(0x141)](_0x5887ff(0x12d)),_0x4d98da=document[_0x5887ff(0x141)](_0x5887ff(0x1da));if(_0x100423)_0x100423[_0x5887ff(0x1e7)]=_0x48fe7c;if(_0x4d98da)_0x4d98da[_0x5887ff(0x1db)]=_0x48fe7c+'%';}document[a0_0x38d982(0x156)]('DOMContentLoaded',()=>{const _0x42450a=a0_0x38d982,_0x27a400=document[_0x42450a(0x141)](_0x42450a(0x162));_0x27a400&&(_0x27a400[_0x42450a(0x171)]=_0x272baf=>{const _0x260770=_0x42450a;currentColor=_0x272baf[_0x260770(0x174)][_0x260770(0x1e7)],document['querySelectorAll'](_0x260770(0x1ae))['forEach'](_0x301983=>_0x301983[_0x260770(0x189)][_0x260770(0x211)](_0x260770(0x13f)));});const _0x3857be=document[_0x42450a(0x141)](_0x42450a(0x146)),_0x3fa09e=document[_0x42450a(0x141)](_0x42450a(0x11d));_0x3857be&&_0x3fa09e&&(_0x3857be[_0x42450a(0x171)]=_0x6e6cb9=>{const _0x1e1263=_0x42450a;setAlpha(_0x6e6cb9[_0x1e1263(0x174)][_0x1e1263(0x1e7)]),_0x3fa09e['textContent']=_0x6e6cb9[_0x1e1263(0x174)][_0x1e1263(0x1e7)]+'%';let _0x493ab5=document[_0x1e1263(0x141)]('palette-alphaSlider'),_0x2a0a37=document['getElementById'](_0x1e1263(0x1da));if(_0x493ab5)_0x493ab5[_0x1e1263(0x1e7)]=_0x6e6cb9['target'][_0x1e1263(0x1e7)];if(_0x2a0a37)_0x2a0a37[_0x1e1263(0x1db)]=_0x6e6cb9['target'][_0x1e1263(0x1e7)]+'%';});});async function convertToGIF(_0x4f649d,_0x36d2cf=0xc8,_0x44120c=a0_0x38d982(0x1bd)){const _0x58d634=a0_0x38d982,_0x258596=new window['GIF']({'workers':0x2,'quality':0xa,'workerScript':_0x58d634(0x195)});_0x4f649d[_0x58d634(0x173)](_0x4c4bb5=>_0x258596['addFrame'](_0x4c4bb5,{'delay':_0x36d2cf})),_0x258596['on']('finished',_0x12ca6b=>{const _0x1ab7e7=_0x58d634,_0x2838d0=URL['createObjectURL'](_0x12ca6b),_0x53631b=document[_0x1ab7e7(0x236)]('a');_0x53631b[_0x1ab7e7(0x11b)]=_0x2838d0,_0x53631b[_0x1ab7e7(0x15c)]=_0x44120c,document[_0x1ab7e7(0x20e)][_0x1ab7e7(0x154)](_0x53631b),_0x53631b[_0x1ab7e7(0x1fd)](),setTimeout(()=>{const _0x5c4235=_0x1ab7e7;document[_0x5c4235(0x20e)]['removeChild'](_0x53631b),URL[_0x5c4235(0x218)](_0x2838d0);},0x3e8);}),_0x258596[_0x58d634(0x1e6)]();}function convertToAPNG(_0x22ddb1,_0x5d3e89,_0xcbf5a3,_0x55c761=0xc8,_0x15056a='nezumi-animation.apng'){const _0xd426f7=a0_0x38d982,_0x17d057=[],_0x4313e4=[],_0x453c2a=document[_0xd426f7(0x236)](_0xd426f7(0x1d7));_0x453c2a[_0xd426f7(0x14f)]=_0x5d3e89,_0x453c2a['height']=_0xcbf5a3;const _0x4934fd=_0x453c2a[_0xd426f7(0x17f)]('2d');_0x22ddb1[_0xd426f7(0x173)](_0x5887ea=>{const _0x3cb1ee=_0xd426f7;_0x4934fd[_0x3cb1ee(0x157)](0x0,0x0,_0x5d3e89,_0xcbf5a3),_0x4934fd[_0x3cb1ee(0x201)](_0x5887ea,0x0,0x0,_0x5d3e89,_0xcbf5a3);const _0x296be9=_0x4934fd[_0x3cb1ee(0x202)](0x0,0x0,_0x5d3e89,_0xcbf5a3)[_0x3cb1ee(0x1dd)]['buffer'];_0x17d057[_0x3cb1ee(0x1cc)](_0x296be9),_0x4313e4['push'](_0x55c761);});const _0x2ceeb3=window[_0xd426f7(0x169)][_0xd426f7(0x20a)](_0x17d057,_0x5d3e89,_0xcbf5a3,0x0,_0x4313e4),_0x5dcf40=URL['createObjectURL'](new Blob([_0x2ceeb3],{'type':'image/apng'})),_0x2d73d5=document[_0xd426f7(0x236)]('a');_0x2d73d5[_0xd426f7(0x11b)]=_0x5dcf40,_0x2d73d5[_0xd426f7(0x15c)]=_0x15056a,document['body'][_0xd426f7(0x154)](_0x2d73d5),_0x2d73d5['click'](),setTimeout(()=>{const _0x1622b9=_0xd426f7;document[_0x1622b9(0x20e)][_0x1622b9(0x219)](_0x2d73d5),URL[_0x1622b9(0x218)](_0x5dcf40);},0x3e8);}async function loadImages(_0x55f0d7){const _0x28b420=a0_0x38d982,_0x3a54fc=await Promise[_0x28b420(0x222)](_0x55f0d7[_0x28b420(0x120)](_0x45a4b4=>{return new Promise(_0x4d52e7=>{const _0x4ae297=a0_0x4dac,_0x458dac=new Image();_0x458dac[_0x4ae297(0x12f)]=_0x4ae297(0x1dc),_0x458dac[_0x4ae297(0x200)]=_0x45a4b4,_0x458dac['onload']=()=>_0x4d52e7(_0x458dac);});}));return _0x3a54fc;}function toggleSection(_0x18ab76){const _0x1e31c0=a0_0x38d982,_0x3606c7=document[_0x1e31c0(0x141)](_0x18ab76),_0xa8f565=_0x3606c7[_0x1e31c0(0x1f2)](_0x1e31c0(0x1d2)),_0x287c1d=_0x3606c7[_0x1e31c0(0x1f2)](_0x1e31c0(0x18e));_0xa8f565['style'][_0x1e31c0(0x159)]===_0x1e31c0(0x194)?(_0xa8f565[_0x1e31c0(0x158)][_0x1e31c0(0x159)]='',_0x287c1d[_0x1e31c0(0x1db)]='▼'):(_0xa8f565[_0x1e31c0(0x158)]['display']='none',_0x287c1d[_0x1e31c0(0x1db)]='▲');}document[a0_0x38d982(0x156)](a0_0x38d982(0x1ca),()=>{const _0x514eca=a0_0x38d982;document[_0x514eca(0x203)](_0x514eca(0x1be))['forEach'](_0x42d8e3=>_0x42d8e3[_0x514eca(0x158)][_0x514eca(0x159)]=''),document['querySelectorAll']('.section.collapsible\x20.toggle-btn')['forEach'](_0x64f5e3=>_0x64f5e3[_0x514eca(0x1db)]='▼');}),window[a0_0x38d982(0x156)]('resize',updateMenuBtnDisplay),document[a0_0x38d982(0x156)](a0_0x38d982(0x1ca),updateMenuBtnDisplay);function toggleSideMenu(_0x51138a){const _0x5503ef=a0_0x38d982,_0x45bdeb=document['getElementById'](_0x5503ef(0x19f)),_0x1d68f5=document[_0x5503ef(0x141)](_0x5503ef(0x210)),_0x1cf695=document[_0x5503ef(0x141)](_0x5503ef(0x121)),_0x5c35e4=document['getElementById'](_0x5503ef(0x11a)),_0x93d899=_0x45bdeb[_0x5503ef(0x189)][_0x5503ef(0x20b)]('open');let _0x3bd8ac=typeof _0x51138a===_0x5503ef(0x119)?_0x51138a:!_0x93d899;_0x3bd8ac?(_0x45bdeb['classList'][_0x5503ef(0x164)](_0x5503ef(0x1ff)),_0x1d68f5['classList'][_0x5503ef(0x164)](_0x5503ef(0x1a9)),document[_0x5503ef(0x20e)][_0x5503ef(0x158)]['overflow']=_0x5503ef(0x178),document[_0x5503ef(0x20e)][_0x5503ef(0x158)][_0x5503ef(0x1a3)]=_0x5503ef(0x194),window[_0x5503ef(0x186)]<=0x384&&(_0x5c35e4['style'][_0x5503ef(0x159)]='block',_0x1cf695['style'][_0x5503ef(0x159)]=_0x5503ef(0x194))):(_0x45bdeb['classList'][_0x5503ef(0x211)](_0x5503ef(0x1ff)),_0x1d68f5['classList']['remove'](_0x5503ef(0x1a9)),document[_0x5503ef(0x20e)][_0x5503ef(0x158)][_0x5503ef(0x16e)]='',document[_0x5503ef(0x20e)][_0x5503ef(0x158)]['touchAction']='',window[_0x5503ef(0x186)]<=0x384&&(_0x5c35e4[_0x5503ef(0x158)][_0x5503ef(0x159)]=_0x5503ef(0x194),_0x1cf695[_0x5503ef(0x158)]['display']='block'));}function updateMenuBtnDisplay(){const _0x109ecb=a0_0x38d982,_0x1ff7bd=document[_0x109ecb(0x141)](_0x109ecb(0x19f)),_0x5a3b68=document['getElementById'](_0x109ecb(0x210)),_0x36f567=document[_0x109ecb(0x141)]('menu-toggle-btn'),_0x38b3c2=document[_0x109ecb(0x141)](_0x109ecb(0x11a));window['innerWidth']>0x384?(_0x1ff7bd[_0x109ecb(0x189)]['remove'](_0x109ecb(0x1ff)),_0x5a3b68[_0x109ecb(0x189)]['remove'](_0x109ecb(0x1a9)),_0x38b3c2[_0x109ecb(0x158)][_0x109ecb(0x159)]='none',_0x36f567[_0x109ecb(0x158)][_0x109ecb(0x159)]=_0x109ecb(0x194),document[_0x109ecb(0x20e)][_0x109ecb(0x158)][_0x109ecb(0x16e)]='',document[_0x109ecb(0x20e)]['style'][_0x109ecb(0x1a3)]=''):_0x1ff7bd[_0x109ecb(0x189)]['contains'](_0x109ecb(0x1ff))?(_0x38b3c2[_0x109ecb(0x158)]['display']=_0x109ecb(0x22b),_0x36f567[_0x109ecb(0x158)]['display']='none'):(_0x38b3c2[_0x109ecb(0x158)][_0x109ecb(0x159)]=_0x109ecb(0x194),_0x36f567['style'][_0x109ecb(0x159)]=_0x109ecb(0x22b));}document[a0_0x38d982(0x156)](a0_0x38d982(0x1fd),function(_0x34a938){const _0x1f5723=a0_0x38d982;if(window[_0x1f5723(0x186)]>0x384)return;const _0x3875e4=document[_0x1f5723(0x141)]('sidebar'),_0x4a8702=document[_0x1f5723(0x141)](_0x1f5723(0x210)),_0x5f4597=document[_0x1f5723(0x141)]('menu-toggle-btn'),_0x4e90c7=document[_0x1f5723(0x141)]('menu-toggle-btn-close');!_0x3875e4['contains'](_0x34a938[_0x1f5723(0x174)])&&_0x34a938[_0x1f5723(0x174)]!==_0x5f4597&&_0x34a938[_0x1f5723(0x174)]!==_0x4e90c7&&(_0x3875e4['classList'][_0x1f5723(0x211)](_0x1f5723(0x1ff)),_0x4a8702['classList'][_0x1f5723(0x211)](_0x1f5723(0x1a9)),_0x4e90c7['style'][_0x1f5723(0x159)]='none',_0x5f4597[_0x1f5723(0x158)]['display']='block',document['body'][_0x1f5723(0x158)][_0x1f5723(0x16e)]='',document['body'][_0x1f5723(0x158)][_0x1f5723(0x1a3)]='');});