(function(_0x225d3b,_0x37e5a1){const _0x16d6e9=_0x1286,_0x2f427a=_0x225d3b();while(!![]){try{const _0x58918b=parseInt(_0x16d6e9(0x108))/0x1+parseInt(_0x16d6e9(0x179))/0x2*(-parseInt(_0x16d6e9(0x159))/0x3)+parseInt(_0x16d6e9(0x121))/0x4*(parseInt(_0x16d6e9(0x124))/0x5)+parseInt(_0x16d6e9(0x16b))/0x6+-parseInt(_0x16d6e9(0x11c))/0x7*(parseInt(_0x16d6e9(0x185))/0x8)+-parseInt(_0x16d6e9(0x176))/0x9*(-parseInt(_0x16d6e9(0x193))/0xa)+-parseInt(_0x16d6e9(0x184))/0xb;if(_0x58918b===_0x37e5a1)break;else _0x2f427a['push'](_0x2f427a['shift']());}catch(_0x18913a){_0x2f427a['push'](_0x2f427a['shift']());}}}(_0x5463,0x50b59));const _0x700132=(function(){let _0x2b98f5=!![];return function(_0x1d87c9,_0xa8cb71){const _0x29e2bd=_0x2b98f5?function(){const _0x413bd7=_0x1286;if(_0xa8cb71){const _0x44a71d=_0xa8cb71[_0x413bd7(0xfd)](_0x1d87c9,arguments);return _0xa8cb71=null,_0x44a71d;}}:function(){};return _0x2b98f5=![],_0x29e2bd;};}()),_0x2b8953=_0x700132(this,function(){const _0x383a3a=_0x1286;return _0x2b8953[_0x383a3a(0x116)]()[_0x383a3a(0x170)](_0x383a3a(0x101))['toString']()[_0x383a3a(0x139)](_0x2b8953)[_0x383a3a(0x170)](_0x383a3a(0x101));});_0x2b8953();function updateCurrentColorSwatch(){const _0x9d7c8c=_0x1286,_0x37e686=document['getElementById']('currentColorSwatch');if(!_0x37e686)return;_0x37e686[_0x9d7c8c(0x138)]='',_0x37e686[_0x9d7c8c(0x14e)]['position']=_0x9d7c8c(0x194),_0x37e686['style'][_0x9d7c8c(0x123)]=_0x9d7c8c(0x153);let _0x3aeb7c=document[_0x9d7c8c(0x16c)](_0x9d7c8c(0x162));_0x3aeb7c[_0x9d7c8c(0x14e)]['position']='absolute',_0x3aeb7c[_0x9d7c8c(0x14e)][_0x9d7c8c(0x111)]='0',_0x3aeb7c[_0x9d7c8c(0x14e)][_0x9d7c8c(0x151)]=_0x9d7c8c(0x173),_0x3aeb7c['style'][_0x9d7c8c(0x171)]=_0x9d7c8c(0x17d);let _0x1fb336=document[_0x9d7c8c(0x16c)](_0x9d7c8c(0x162));_0x1fb336['style'][_0x9d7c8c(0xfe)]=_0x9d7c8c(0x188),_0x1fb336[_0x9d7c8c(0x14e)][_0x9d7c8c(0x111)]='0',_0x1fb336[_0x9d7c8c(0x14e)][_0x9d7c8c(0x151)]=_0x9d7c8c(0x173),currentColor===_0x9d7c8c(0x10c)||currentAlpha===0x0?(_0x1fb336[_0x9d7c8c(0x14e)][_0x9d7c8c(0x171)]=_0x9d7c8c(0x16e),_0x37e686[_0x9d7c8c(0x169)]='ÈÄèÊòé'):(_0x1fb336[_0x9d7c8c(0x14e)][_0x9d7c8c(0x171)]=hexToRgbaCss(currentColor,currentAlpha),_0x37e686[_0x9d7c8c(0x169)]=currentAlpha<0x1?currentColor+_0x9d7c8c(0x145)+Math[_0x9d7c8c(0x192)](currentAlpha*0x64)+'%':currentColor),_0x37e686[_0x9d7c8c(0x130)](_0x3aeb7c),_0x37e686[_0x9d7c8c(0x130)](_0x1fb336);}function updateProjectUI(){const _0x97a270=_0x1286,_0x2f4ada=document[_0x97a270(0x198)]('projectList');_0x2f4ada[_0x97a270(0x138)]='';for(let _0x1e2b91=0x0;_0x1e2b91<projects[_0x97a270(0x10d)];_0x1e2b91++){const _0x302a66=document[_0x97a270(0x16c)](_0x97a270(0x162));_0x302a66[_0x97a270(0x13b)]='project-item'+(_0x1e2b91===activeProject?_0x97a270(0x14a):''),_0x302a66[_0x97a270(0x12d)]=()=>{activeProject=_0x1e2b91,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();},_0x302a66[_0x97a270(0x143)]=_0x2670d6=>{const _0x469e7e=_0x97a270;_0x2670d6[_0x469e7e(0x189)](),showRenameProjectDialog(_0x1e2b91);};let _0x543b23=null;const _0x489f06=()=>{_0x543b23=setTimeout(()=>{showRenameProjectDialog(_0x1e2b91);},0x258);},_0x37fda6=()=>{if(_0x543b23)clearTimeout(_0x543b23);_0x543b23=null;};_0x302a66[_0x97a270(0xff)]('touchstart',_0x489f06,{'passive':!![]}),_0x302a66[_0x97a270(0xff)](_0x97a270(0x11e),_0x37fda6,{'passive':!![]}),_0x302a66['addEventListener'](_0x97a270(0x158),_0x37fda6,{'passive':!![]});const _0x5ab0=document[_0x97a270(0x16c)](_0x97a270(0x120));_0x5ab0[_0x97a270(0x13b)]=_0x97a270(0x16a),_0x5ab0[_0x97a270(0x147)]=projects[_0x1e2b91][_0x97a270(0x12b)]||'ÁîªÂÉè'+(_0x1e2b91+0x1),_0x5ab0[_0x97a270(0x169)]=_0x97a270(0x180),_0x5ab0[_0x97a270(0x12d)]=_0x5505c0=>{_0x5505c0['stopPropagation'](),editProjectName(_0x1e2b91,_0x5ab0);},_0x302a66['appendChild'](_0x5ab0);const _0x39435b=document['createElement']('button');_0x39435b['textContent']='ÂâäÈô§',_0x39435b[_0x97a270(0x13b)]='project-btn',_0x39435b['disabled']=projects[_0x97a270(0x10d)]===0x1,_0x39435b['onclick']=_0x5404dc=>{const _0x4131db=_0x97a270;_0x5404dc[_0x4131db(0x195)](),removeProjectAt(_0x1e2b91);},_0x302a66[_0x97a270(0x130)](_0x39435b),_0x2f4ada[_0x97a270(0x130)](_0x302a66);}document[_0x97a270(0x198)](_0x97a270(0x182))['textContent']='('+projects[_0x97a270(0x10d)]+'Êûö)';}function showRenameProjectDialog(_0x58923e){const _0x4f0b68=_0x1286,_0x4fdf58=projects[_0x58923e],_0xa02832=_0x4fdf58&&_0x4fdf58['name']?_0x4fdf58[_0x4f0b68(0x12b)]:'ÁîªÂÉè'+(_0x58923e+0x1),_0x59b326=prompt(_0x4f0b68(0x183),_0xa02832);if(_0x59b326==null)return;const _0x1b875d=_0x59b326[_0x4f0b68(0x14b)]();projects[_0x58923e][_0x4f0b68(0x12b)]=_0x1b875d||_0xa02832,updateProjectUI();}function showNewProjectDialog(_0x8b6efa){const _0x110c62=_0x1286;let _0x369c38=document['getElementById'](_0x110c62(0x18f));if(_0x369c38)_0x369c38['remove']();const _0x2677ae=document[_0x110c62(0x16c)](_0x110c62(0x162));_0x2677ae['id']=_0x110c62(0x18f),_0x2677ae['style']['position']=_0x110c62(0x165),_0x2677ae[_0x110c62(0x14e)][_0x110c62(0x115)]='0',_0x2677ae[_0x110c62(0x14e)][_0x110c62(0x11a)]='0',_0x2677ae[_0x110c62(0x14e)][_0x110c62(0x106)]=_0x110c62(0x10e),_0x2677ae[_0x110c62(0x14e)][_0x110c62(0x15a)]=_0x110c62(0x191),_0x2677ae[_0x110c62(0x14e)][_0x110c62(0x171)]=_0x110c62(0x11b),_0x2677ae[_0x110c62(0x14e)][_0x110c62(0xfc)]=_0x110c62(0x17f),_0x2677ae['style'][_0x110c62(0x114)]=_0x110c62(0x10f),_0x2677ae[_0x110c62(0x14e)]['justifyContent']=_0x110c62(0x10f),_0x2677ae[_0x110c62(0x14e)][_0x110c62(0x132)]=_0x110c62(0x105),_0x2677ae[_0x110c62(0x138)]=_0x110c62(0x187)+(projects['length']+0x1)+_0x110c62(0x126),document[_0x110c62(0x15d)][_0x110c62(0x130)](_0x2677ae),_0x2677ae['querySelector']('#newProjOkBtn')[_0x110c62(0x12d)]=()=>{const _0x18cb49=_0x110c62,_0x53caa3=parseInt(_0x2677ae[_0x18cb49(0x199)]('#newProjW')['value'],0xa),_0x41dbc2=parseInt(_0x2677ae[_0x18cb49(0x199)](_0x18cb49(0x11f))[_0x18cb49(0x131)],0xa),_0x36a974=_0x2677ae['querySelector']('#newProjName')[_0x18cb49(0x131)][_0x18cb49(0x14b)]();_0x2677ae['remove']();if(_0x8b6efa)_0x8b6efa(_0x53caa3,_0x41dbc2,_0x36a974);},_0x2677ae[_0x110c62(0x199)]('#newProjCancelBtn')['onclick']=()=>{const _0xdfbdb7=_0x110c62;_0x2677ae[_0xdfbdb7(0x18c)]();};}function updateFrameUI(){const _0x112b6e=_0x1286,_0x55bc2b=document[_0x112b6e(0x198)](_0x112b6e(0x196)),_0x5dd06d=getCurrentProject();if(!_0x5dd06d||!_0x5dd06d['frames'])return;_0x55bc2b['innerHTML']='';for(let _0x5fecbb=0x0;_0x5fecbb<_0x5dd06d[_0x112b6e(0x12e)][_0x112b6e(0x10d)];_0x5fecbb++){const _0x1c0e87=document['createElement'](_0x112b6e(0x162));_0x1c0e87[_0x112b6e(0x13b)]='frame-item'+(_0x5fecbb===_0x5dd06d[_0x112b6e(0x117)]?_0x112b6e(0x14a):''),_0x1c0e87[_0x112b6e(0x12d)]=()=>{const _0x8ed5c5=_0x112b6e;_0x5dd06d[_0x8ed5c5(0x117)]=_0x5fecbb,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x1860f4=document['createElement'](_0x112b6e(0x197));_0x1860f4[_0x112b6e(0x13b)]=_0x112b6e(0x102),_0x1860f4[_0x112b6e(0x106)]=0x20,_0x1860f4[_0x112b6e(0x15a)]=0x20;let _0x70abd7=_0x1860f4['getContext']('2d',{'willReadFrequently':!![]});_0x70abd7[_0x112b6e(0x127)](0x0,0x0,0x20,0x20);for(let _0x19b6f5=0x0;_0x19b6f5<_0x5dd06d[_0x112b6e(0x12e)][_0x5fecbb][_0x112b6e(0x160)][_0x112b6e(0x10d)];_0x19b6f5++){const _0x356f55=_0x5dd06d['frames'][_0x5fecbb][_0x112b6e(0x160)][_0x19b6f5];_0x356f55&&_0x356f55[_0x112b6e(0x197)]&&_0x70abd7[_0x112b6e(0xfb)](_0x356f55[_0x112b6e(0x197)],0x0,0x0,_0x1860f4[_0x112b6e(0x106)],_0x1860f4[_0x112b6e(0x15a)]);}_0x1c0e87['appendChild'](_0x1860f4);const _0x1de301=document['createElement'](_0x112b6e(0x120));_0x1de301[_0x112b6e(0x147)]='F'+(_0x5fecbb+0x1),_0x1c0e87[_0x112b6e(0x130)](_0x1de301);const _0x385b6a=document['createElement'](_0x112b6e(0x190));_0x385b6a[_0x112b6e(0x147)]='ÂâäÈô§',_0x385b6a['className']='frame-btn',_0x385b6a['disabled']=_0x5dd06d[_0x112b6e(0x12e)][_0x112b6e(0x10d)]===0x1,_0x385b6a[_0x112b6e(0x12d)]=_0x1edf63=>{_0x1edf63['stopPropagation'](),removeFrameAt(_0x5fecbb);},_0x1c0e87[_0x112b6e(0x130)](_0x385b6a),_0x55bc2b[_0x112b6e(0x130)](_0x1c0e87);}document[_0x112b6e(0x198)]('frameCount')[_0x112b6e(0x147)]='('+_0x5dd06d[_0x112b6e(0x12e)][_0x112b6e(0x10d)]+_0x112b6e(0x144);}function updateLayerUI(){const _0x15f9e4=_0x1286,{layers:_0x118311,activeLayer:_0x5dc1f1}=getCurrentFrame();document[_0x15f9e4(0x198)]('layerCount')[_0x15f9e4(0x147)]='('+_0x118311['length']+'Êûö)';const _0x515c9e=document[_0x15f9e4(0x198)](_0x15f9e4(0x118));_0x515c9e[_0x15f9e4(0x138)]='';for(let _0x34a9e1=_0x118311[_0x15f9e4(0x10d)]-0x1;_0x34a9e1>=0x0;_0x34a9e1--){const _0x104b59=document['createElement'](_0x15f9e4(0x162));_0x104b59[_0x15f9e4(0x13b)]='layer-item'+(_0x34a9e1===_0x5dc1f1?_0x15f9e4(0x14a):''),_0x104b59['onclick']=_0x46afcd=>{const _0x291a90=_0x15f9e4;if(_0x46afcd['target'][_0x291a90(0x15f)]['contains']('layer-btn'))return;getCurrentFrame()[_0x291a90(0x14d)]=_0x34a9e1,updateLayerUI(),redrawAll();};const _0x238638=document['createElement'](_0x15f9e4(0x197));_0x238638['className']=_0x15f9e4(0x16f),_0x238638['width']=0x20,_0x238638['height']=0x20;const _0x363c0d=_0x238638[_0x15f9e4(0x18a)]('2d');_0x363c0d['clearRect'](0x0,0x0,_0x238638[_0x15f9e4(0x106)],_0x238638[_0x15f9e4(0x15a)]),_0x363c0d['globalAlpha']=_0x118311[_0x34a9e1][_0x15f9e4(0x13a)]===![]?0.3:0x1;let _0x377532=null;if(_0x118311[_0x34a9e1]instanceof HTMLCanvasElement)_0x377532=_0x118311[_0x34a9e1];else _0x118311[_0x34a9e1][_0x15f9e4(0x197)]instanceof HTMLCanvasElement&&(_0x377532=_0x118311[_0x34a9e1][_0x15f9e4(0x197)]);_0x377532?_0x363c0d[_0x15f9e4(0xfb)](_0x377532,0x0,0x0,_0x238638[_0x15f9e4(0x106)],_0x238638[_0x15f9e4(0x15a)]):console[_0x15f9e4(0x14c)](_0x15f9e4(0x164),_0x118311[_0x34a9e1]);_0x104b59['appendChild'](_0x238638);const _0x226797=document['createElement'](_0x15f9e4(0x190));_0x226797[_0x15f9e4(0x13b)]=_0x15f9e4(0x136),_0x226797['title']=_0x118311[_0x34a9e1]['visible']===![]?_0x15f9e4(0x149):_0x15f9e4(0x133),_0x226797['innerHTML']=_0x118311[_0x34a9e1][_0x15f9e4(0x13a)]===![]?_0x15f9e4(0x13c):'üëÅÔ∏è',_0x226797[_0x15f9e4(0x12d)]=_0x502185=>{const _0x43a90a=_0x15f9e4;_0x502185[_0x43a90a(0x195)](),_0x118311[_0x34a9e1][_0x43a90a(0x13a)]=!_0x118311[_0x34a9e1][_0x43a90a(0x13a)],updateLayerUI(),redrawAll();},_0x104b59[_0x15f9e4(0x130)](_0x226797);const _0xf5d891=document[_0x15f9e4(0x16c)](_0x15f9e4(0x120));_0xf5d891[_0x15f9e4(0x147)]=_0x15f9e4(0x177)+(_0x34a9e1+0x1),_0x104b59[_0x15f9e4(0x130)](_0xf5d891);const _0x3b1535=document[_0x15f9e4(0x16c)]('button');_0x3b1535['textContent']='‚Üë',_0x3b1535[_0x15f9e4(0x13b)]='layer-btn',_0x3b1535[_0x15f9e4(0x169)]=_0x15f9e4(0x134),_0x3b1535['disabled']=_0x34a9e1===_0x118311[_0x15f9e4(0x10d)]-0x1,_0x3b1535[_0x15f9e4(0x12d)]=_0x2fc048=>{const _0x25ca34=_0x15f9e4;_0x2fc048[_0x25ca34(0x195)]();if(_0x34a9e1<_0x118311['length']-0x1)swapLayer(_0x34a9e1,_0x34a9e1+0x1);},_0x104b59[_0x15f9e4(0x130)](_0x3b1535);const _0xb58f44=document[_0x15f9e4(0x16c)](_0x15f9e4(0x190));_0xb58f44[_0x15f9e4(0x147)]='‚Üì',_0xb58f44[_0x15f9e4(0x13b)]=_0x15f9e4(0x135),_0xb58f44[_0x15f9e4(0x169)]=_0x15f9e4(0x122),_0xb58f44[_0x15f9e4(0x168)]=_0x34a9e1===0x0,_0xb58f44[_0x15f9e4(0x12d)]=_0x5f0b5b=>{const _0x1a871c=_0x15f9e4;_0x5f0b5b[_0x1a871c(0x195)]();if(_0x34a9e1>0x0)swapLayer(_0x34a9e1,_0x34a9e1-0x1);},_0x104b59['appendChild'](_0xb58f44);const _0x349f0a=document['createElement']('button');_0x349f0a['textContent']='ÂâäÈô§',_0x349f0a[_0x15f9e4(0x13b)]=_0x15f9e4(0x135),_0x349f0a['title']='„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§',_0x349f0a[_0x15f9e4(0x168)]=_0x118311['length']===0x1,_0x349f0a[_0x15f9e4(0x12d)]=_0x26d075=>{_0x26d075['stopPropagation'](),removeLayerAt(_0x34a9e1);},_0x104b59[_0x15f9e4(0x130)](_0x349f0a),_0x515c9e['appendChild'](_0x104b59);}try{if(typeof updateUndoRedoButtons===_0x15f9e4(0x166))updateUndoRedoButtons();}catch(_0xfce6bc){}}function _0x1286(_0x17ee1a,_0x15a9a9){_0x17ee1a=_0x17ee1a-0xfa;const _0x18931a=_0x5463();let _0x2b8953=_0x18931a[_0x17ee1a];return _0x2b8953;}function toggleTheme(){const _0x7cfc03=_0x1286;applyTheme(document[_0x7cfc03(0x18e)][_0x7cfc03(0x12c)](_0x7cfc03(0x113))==='dark'?_0x7cfc03(0x11d):_0x7cfc03(0x175));}function openDB(){return new Promise((_0x433494,_0x255595)=>{const _0x2c6ba0=_0x1286,_0x2bc215=indexedDB[_0x2c6ba0(0x181)](dbName,0x2);_0x2bc215[_0x2c6ba0(0x148)]=()=>{const _0x5cfa54=_0x2c6ba0,_0x485272=_0x2bc215[_0x5cfa54(0x16d)];!_0x485272[_0x5cfa54(0x142)][_0x5cfa54(0x15e)](storeName)&&_0x485272[_0x5cfa54(0x12a)](storeName);},_0x2bc215[_0x2c6ba0(0x109)]=()=>{const _0x309c88=_0x2c6ba0,_0x41dc6e=_0x2bc215['result'];if(!_0x41dc6e[_0x309c88(0x142)]['contains'](storeName)){_0x41dc6e[_0x309c88(0x107)](),indexedDB[_0x309c88(0x10b)](dbName),_0x255595(new Error(_0x309c88(0x103)));return;}_0x433494(_0x41dc6e);},_0x2bc215[_0x2c6ba0(0x110)]=()=>_0x255595(_0x2bc215[_0x2c6ba0(0x18b)]);});}function openColorDialog(){const _0x18ca25=_0x1286;if(document[_0x18ca25(0x198)]('color-dialog'))return;const _0x52bae2=document[_0x18ca25(0x16c)](_0x18ca25(0x162));_0x52bae2['id']='color-dialog',_0x52bae2['style'][_0x18ca25(0xfe)]=_0x18ca25(0x165),_0x52bae2['style']['left']='0',_0x52bae2['style'][_0x18ca25(0x11a)]='0',_0x52bae2[_0x18ca25(0x14e)]['width']='100vw',_0x52bae2[_0x18ca25(0x14e)][_0x18ca25(0x15a)]='100vh',_0x52bae2[_0x18ca25(0x14e)][_0x18ca25(0xfc)]=_0x18ca25(0x17f),_0x52bae2[_0x18ca25(0x14e)]['alignItems']=_0x18ca25(0x10f),_0x52bae2[_0x18ca25(0x14e)]['justifyContent']=_0x18ca25(0x10f),_0x52bae2['style']['zIndex']='4000',_0x52bae2[_0x18ca25(0x14e)][_0x18ca25(0x171)]=_0x18ca25(0x137),_0x52bae2[_0x18ca25(0x138)]=_0x18ca25(0x100)+(currentColor===_0x18ca25(0x10c)?_0x18ca25(0xfa):currentColor)+_0x18ca25(0x178)+Math[_0x18ca25(0x192)](currentAlpha*0x64)+_0x18ca25(0x152),document[_0x18ca25(0x15d)][_0x18ca25(0x130)](_0x52bae2),_0x52bae2[_0x18ca25(0x199)](_0x18ca25(0x155))[_0x18ca25(0x12d)]=()=>{const _0xb0d216=_0x18ca25,_0x11a334=_0x52bae2[_0xb0d216(0x199)](_0xb0d216(0x163));_0x11a334[_0xb0d216(0x131)]=0x0,_0x52bae2[_0xb0d216(0x199)]('#dlgColor')[_0xb0d216(0x131)]=_0xb0d216(0xfa);},_0x52bae2[_0x18ca25(0x199)]('#dlgOkBtn')[_0x18ca25(0x12d)]=()=>{const _0x2e9637=_0x18ca25,_0x13bc9f=_0x52bae2[_0x2e9637(0x199)](_0x2e9637(0x104))[_0x2e9637(0x131)],_0xb991d8=Math[_0x2e9637(0x15c)](0x0,Math[_0x2e9637(0x156)](0x64,parseInt(_0x52bae2['querySelector']('#dlgAlpha')[_0x2e9637(0x131)],0xa)||0x0));if(_0xb991d8===0x0){currentAlpha=0x0,currentColor=_0x2e9637(0x10c);if(colorPicker)colorPicker[_0x2e9637(0x131)]=_0x2e9637(0xfa);}else{currentAlpha=_0xb991d8/0x64,currentColor=_0x13bc9f;if(colorPicker)colorPicker['value']=_0x13bc9f;}updateCurrentColorSwatch(),document[_0x2e9637(0x128)](_0x2e9637(0x17c))[_0x2e9637(0x17e)](_0x17edae=>_0x17edae[_0x2e9637(0x15f)]['remove'](_0x2e9637(0x154))),_0x52bae2[_0x2e9637(0x18c)]();},_0x52bae2[_0x18ca25(0x199)](_0x18ca25(0x172))[_0x18ca25(0x12d)]=()=>_0x52bae2['remove'](),_0x52bae2[_0x18ca25(0xff)](_0x18ca25(0x186),_0x2da5a8=>{const _0x5ea498=_0x18ca25;if(_0x2da5a8[_0x5ea498(0x146)]===_0x52bae2)_0x52bae2[_0x5ea498(0x18c)]();});}function updateLayerMove(_0x53afe4){const _0x597b79=_0x1286;if(!layerMoveState[_0x597b79(0x157)])return;const _0x50aaed=getCanvasCoords(_0x53afe4),_0x9f4c7d={'x':Math['floor'](_0x50aaed['x']/cellSize),'y':Math[_0x597b79(0x141)](_0x50aaed['y']/cellSize)};layerMoveState['offsetCells']['x']=_0x9f4c7d['x']-layerMoveState['startCell']['x'],layerMoveState[_0x597b79(0x174)]['y']=_0x9f4c7d['y']-layerMoveState[_0x597b79(0x12f)]['y'],redrawAll();const _0x15359a=getCurrentFrame();if(!_0x15359a)return;const _0x11e58b=_0x15359a[_0x597b79(0x14d)];if(_0x11e58b==null)return;ctx[_0x597b79(0x10a)](),ctx['translate'](layerMoveState['offsetCells']['x']*cellSize,layerMoveState[_0x597b79(0x174)]['y']*cellSize);const _0x21d0af=_0x15359a[_0x597b79(0x160)][_0x11e58b],_0xc8a775=_0x21d0af&&_0x21d0af[_0x597b79(0x197)]?_0x21d0af[_0x597b79(0x197)]:_0x21d0af;if(_0xc8a775)ctx[_0x597b79(0xfb)](_0xc8a775,0x0,0x0);ctx['restore']();}function toggleSection(_0xb57e87){const _0x11a6bf=_0x1286,_0x1b0a69=document[_0x11a6bf(0x198)](_0xb57e87),_0x5b989f=_0x1b0a69['querySelector'](_0x11a6bf(0x17a)),_0x2239e1=_0x1b0a69[_0x11a6bf(0x199)](_0x11a6bf(0x17b));_0x5b989f['style'][_0x11a6bf(0xfc)]==='none'?(_0x5b989f[_0x11a6bf(0x14e)]['display']='',_0x2239e1[_0x11a6bf(0x147)]='‚ñº'):(_0x5b989f['style']['display']='none',_0x2239e1['textContent']='‚ñ≤');}function _0x5463(){const _0x55a770=['left','toString','activeFrame','layerList','boolean','top','rgba(0,0,0,0.3)','23317KtrrZQ','light','touchend','#newProjH','span','348vkKgLh','‰∏ã„Å´ÁßªÂãï','overflow','13335waiMRa','main-container','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x221024\x22\x20value=\x2264\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x221024\x22\x20value=\x2264\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','clearRect','querySelectorAll','menu-toggle-btn-close','createObjectStore','name','getAttribute','onclick','frames','startCell','appendChild','value','zIndex','ÈùûË°®Á§∫„Å´„Åô„Çã','‰∏ä„Å´ÁßªÂãï','layer-btn','layer-btn\x20layer-vis-btn','rgba(0,0,0,0.25)','innerHTML','constructor','visible','className','üëÅÔ∏è‚Äçüó®Ô∏è','menu-toggle-btn','touchAction','inline-block','add','floor','objectStoreNames','oncontextmenu','„Ç≥„Éû)','\x20ÈÄèÊòéÂ∫¶','target','textContent','onupgradeneeded','Ë°®Á§∫„Åô„Çã','\x20active','trim','warn','activeLayer','style','sidebar-open','px)\x20scale(','borderRadius','\x22\x20style=\x22width:72px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgTransparentBtn\x22\x20type=\x22button\x22\x20style=\x22margin-left:8px;\x22>ÈÄèÊòé</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:8px;justify-content:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgOkBtn\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgCancelBtn\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','hidden','selected','#dlgTransparentBtn','min','active','touchcancel','705JBbnkM','height','block','max','body','contains','classList','layers','innerWidth','div','#dlgAlpha','ÊèèÁîª„Åß„Åç„Å™„ÅÑ„É¨„Ç§„É§„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÉÅ„É•„Éº','fixed','function','transform','disabled','title','project-name','3379686UtJSbU','createElement','result','none','layer-thumb','search','background','#dlgCancelBtn','8px','offsetCells','dark','90513Ixlqhd','„É¨„Ç§„É§„Éº','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÈÄèÊòéÂ∫¶(0-100):\x20<input\x20type=\x22number\x22\x20id=\x22dlgAlpha\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','746CjVvpr','.section-content','.toggle-btn','.palette-color','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','forEach','flex','„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ','open','projectCount','Êñ∞„Åó„ÅÑÂêçÂâç„ÇíÂÖ•Âäõ','6555648HZOOUE','232IwQTAh','click','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:var(--surface);\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','absolute','preventDefault','getContext','error','remove','toolsToggleBtn','documentElement','new-project-dialog','button','100vh','round','90MZVimo','relative','stopPropagation','frameList','canvas','getElementById','querySelector','overlay-prev-layers','#000000','drawImage','display','apply','position','addEventListener','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;padding:18px;border-radius:8px;min-width:260px;text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:0\x200\x208px\x200;\x22>Ëâ≤„Å®ÈÄèÊòé„ÇíÈÅ∏Êäû</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22dlgColor\x22\x20value=\x22','(((.+)+)+)+$','frame-thumb','IndexedDB\x20„ÅÆ„Çπ„Éà„Ç¢„ÅåÂ≠òÂú®„Åó„Å™„ÅÑ„Åü„ÇÅÂÜç‰ΩúÊàê„ÅåÂøÖË¶Å„Åß„Åô','#dlgColor','3000','width','close','224984VOHTRj','onsuccess','save','deleteDatabase','transparent','length','100vw','center','onerror','inset','px,\x20','data-theme','alignItems'];_0x5463=function(){return _0x55a770;};return _0x5463();}function toggleSideMenu(_0x3b2fab){const _0x59c8e9=_0x1286,_0x30f757=document[_0x59c8e9(0x198)]('sidebar'),_0x26b8c1=document[_0x59c8e9(0x198)](_0x59c8e9(0x125)),_0x40633f=document[_0x59c8e9(0x198)](_0x59c8e9(0x13d)),_0x1c904c=document['getElementById']('menu-toggle-btn-close'),_0x3e50b9=_0x30f757['classList'][_0x59c8e9(0x15e)](_0x59c8e9(0x181));let _0x1a1ada=typeof _0x3b2fab===_0x59c8e9(0x119)?_0x3b2fab:!_0x3e50b9;_0x1a1ada?(_0x30f757[_0x59c8e9(0x15f)][_0x59c8e9(0x140)](_0x59c8e9(0x181)),_0x26b8c1[_0x59c8e9(0x15f)][_0x59c8e9(0x140)]('sidebar-open'),document[_0x59c8e9(0x15d)][_0x59c8e9(0x14e)]['overflow']=_0x59c8e9(0x153),document['body']['style'][_0x59c8e9(0x13e)]=_0x59c8e9(0x16e),window[_0x59c8e9(0x161)]<=0x384&&(_0x1c904c[_0x59c8e9(0x14e)]['display']=_0x59c8e9(0x15b),_0x40633f[_0x59c8e9(0x14e)][_0x59c8e9(0xfc)]=_0x59c8e9(0x16e))):(_0x30f757['classList'][_0x59c8e9(0x18c)](_0x59c8e9(0x181)),_0x26b8c1['classList'][_0x59c8e9(0x18c)](_0x59c8e9(0x14f)),document[_0x59c8e9(0x15d)]['style'][_0x59c8e9(0x123)]='',document[_0x59c8e9(0x15d)][_0x59c8e9(0x14e)][_0x59c8e9(0x13e)]='',window[_0x59c8e9(0x161)]<=0x384&&(_0x1c904c['style'][_0x59c8e9(0xfc)]=_0x59c8e9(0x16e),_0x40633f['style']['display']=_0x59c8e9(0x15b)));}function updateMenuBtnDisplay(){const _0xf647cf=_0x1286,_0x40a398=document[_0xf647cf(0x198)]('sidebar'),_0x5d7918=document[_0xf647cf(0x198)]('main-container'),_0x5823cc=document[_0xf647cf(0x198)](_0xf647cf(0x13d)),_0x8fda16=document[_0xf647cf(0x198)](_0xf647cf(0x129)),_0x1e50f3=document['getElementById'](_0xf647cf(0x18d));if(window[_0xf647cf(0x161)]>0x384){_0x40a398[_0xf647cf(0x15f)][_0xf647cf(0x18c)](_0xf647cf(0x181)),_0x5d7918[_0xf647cf(0x15f)][_0xf647cf(0x18c)]('sidebar-open'),_0x8fda16[_0xf647cf(0x14e)][_0xf647cf(0xfc)]=_0xf647cf(0x16e),_0x5823cc[_0xf647cf(0x14e)][_0xf647cf(0xfc)]='none';if(_0x1e50f3)_0x1e50f3[_0xf647cf(0x14e)]['display']=window[_0xf647cf(0x161)]>0x44c?'none':_0xf647cf(0x13f);document['body']['style']['overflow']='',document['body']['style'][_0xf647cf(0x13e)]='';}else{_0x40a398[_0xf647cf(0x15f)][_0xf647cf(0x15e)](_0xf647cf(0x181))?(_0x8fda16[_0xf647cf(0x14e)]['display']=_0xf647cf(0x15b),_0x5823cc[_0xf647cf(0x14e)][_0xf647cf(0xfc)]=_0xf647cf(0x16e)):(_0x8fda16['style'][_0xf647cf(0xfc)]=_0xf647cf(0x16e),_0x5823cc[_0xf647cf(0x14e)]['display']=_0xf647cf(0x15b));if(_0x1e50f3)_0x1e50f3[_0xf647cf(0x14e)][_0xf647cf(0xfc)]=_0xf647cf(0x13f);}}function updateTransform(){const _0xf36ebb=_0x1286,_0x43dea2='translate('+posX+_0xf36ebb(0x112)+posY+_0xf36ebb(0x150)+scale+')';canvas[_0xf36ebb(0x14e)][_0xf36ebb(0x167)]=_0x43dea2;const _0x432de6=document['getElementById'](_0xf36ebb(0x19a));if(_0x432de6)_0x432de6[_0xf36ebb(0x14e)][_0xf36ebb(0x167)]=_0x43dea2;}