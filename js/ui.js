(function(_0x2a68ac,_0x325ebc){const _0x48d704=_0x4463,_0x120d61=_0x2a68ac();while(!![]){try{const _0xda00e1=-parseInt(_0x48d704(0x16d))/0x1+parseInt(_0x48d704(0x1bd))/0x2+parseInt(_0x48d704(0x16c))/0x3*(parseInt(_0x48d704(0x14d))/0x4)+parseInt(_0x48d704(0x141))/0x5*(-parseInt(_0x48d704(0x14c))/0x6)+-parseInt(_0x48d704(0x164))/0x7*(-parseInt(_0x48d704(0x170))/0x8)+-parseInt(_0x48d704(0x163))/0x9+parseInt(_0x48d704(0x129))/0xa;if(_0xda00e1===_0x325ebc)break;else _0x120d61['push'](_0x120d61['shift']());}catch(_0x301319){_0x120d61['push'](_0x120d61['shift']());}}}(_0x5aa3,0x341c4));const _0x508ee8=(function(){let _0x1b5c4a=!![];return function(_0xf5290,_0x551504){const _0x2c5d62=_0x1b5c4a?function(){const _0x50135d=_0x4463;if(_0x551504){const _0x58891f=_0x551504[_0x50135d(0x136)](_0xf5290,arguments);return _0x551504=null,_0x58891f;}}:function(){};return _0x1b5c4a=![],_0x2c5d62;};}()),_0x4e322e=_0x508ee8(this,function(){const _0x3b55db=_0x4463;return _0x4e322e['toString']()[_0x3b55db(0x153)](_0x3b55db(0x175))[_0x3b55db(0x180)]()[_0x3b55db(0x171)](_0x4e322e)[_0x3b55db(0x153)]('(((.+)+)+)+$');});_0x4e322e();function updateCurrentColorSwatch(){const _0x3df0e9=_0x4463,_0x462bfb=document[_0x3df0e9(0x17f)](_0x3df0e9(0x138));if(!_0x462bfb)return;const _0x10f5cc=document['getElementById']('currentColorInfoText');_0x462bfb[_0x3df0e9(0x1b4)]='',_0x462bfb[_0x3df0e9(0x1bc)][_0x3df0e9(0x130)]=_0x3df0e9(0x190),_0x462bfb[_0x3df0e9(0x1bc)]['overflow']='hidden';let _0x1a93b4=document['createElement'](_0x3df0e9(0x19c));_0x1a93b4[_0x3df0e9(0x1bc)][_0x3df0e9(0x130)]='absolute',_0x1a93b4[_0x3df0e9(0x1bc)][_0x3df0e9(0x1a5)]='0',_0x1a93b4[_0x3df0e9(0x1bc)][_0x3df0e9(0x1ce)]=_0x3df0e9(0x13f),_0x1a93b4['style'][_0x3df0e9(0x133)]=_0x3df0e9(0x14b);let _0x4c9c82=document[_0x3df0e9(0x1a7)](_0x3df0e9(0x19c));_0x4c9c82[_0x3df0e9(0x1bc)][_0x3df0e9(0x130)]=_0x3df0e9(0x128),_0x4c9c82[_0x3df0e9(0x1bc)][_0x3df0e9(0x1a5)]='0',_0x4c9c82[_0x3df0e9(0x1bc)][_0x3df0e9(0x1ce)]='8px';const _0x5d792d=Math[_0x3df0e9(0x15a)]((currentAlpha||0x0)*0x64);if(currentColor===_0x3df0e9(0x1ad)||currentAlpha===0x0){_0x4c9c82[_0x3df0e9(0x1bc)]['background']='none',_0x462bfb[_0x3df0e9(0x161)]='ÈÄèÊòé';if(_0x10f5cc)_0x10f5cc['textContent']='ÈÄèÊòé\x20/\x200%';}else{_0x4c9c82[_0x3df0e9(0x1bc)][_0x3df0e9(0x133)]=hexToRgbaCss(currentColor,currentAlpha),_0x462bfb['title']=currentAlpha<0x1?currentColor+_0x3df0e9(0x176)+_0x5d792d+'%':currentColor;if(_0x10f5cc)_0x10f5cc[_0x3df0e9(0x12d)]=currentColor+'\x20/\x20'+_0x5d792d+'%';}_0x462bfb[_0x3df0e9(0x17b)](_0x1a93b4),_0x462bfb[_0x3df0e9(0x17b)](_0x4c9c82);}function updateProjectUI(){const _0x584b94=_0x4463,_0x3f26a1=document[_0x584b94(0x17f)](_0x584b94(0x140));_0x3f26a1[_0x584b94(0x1b4)]='';for(let _0x229d2d=0x0;_0x229d2d<projects[_0x584b94(0x186)];_0x229d2d++){const _0x5c8f49=document[_0x584b94(0x1a7)](_0x584b94(0x19c));_0x5c8f49[_0x584b94(0x17a)]=_0x584b94(0x12e)+(_0x229d2d===activeProject?'\x20active':''),_0x5c8f49[_0x584b94(0x1a2)]=()=>{const _0x40b827=_0x584b94;activeProject=_0x229d2d,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();if(typeof setExportInputsFromProject===_0x40b827(0x1b7))setExportInputsFromProject();},_0x5c8f49['oncontextmenu']=_0x2d1e48=>{const _0x3e14df=_0x584b94;_0x2d1e48[_0x3e14df(0x150)]();if(typeof editProjectName===_0x3e14df(0x1b7))try{editProjectName(_0x229d2d,_0x207187);}catch(_0x599d9){showRenameProjectDialog(_0x229d2d);}else showRenameProjectDialog(_0x229d2d);};let _0x4b2fc7=null;const _0x3305d9=()=>{_0x4b2fc7=setTimeout(()=>{const _0x47045d=_0x4463;if(typeof editProjectName===_0x47045d(0x1b7))try{editProjectName(_0x229d2d,_0x207187);}catch(_0x43235a){showRenameProjectDialog(_0x229d2d);}else showRenameProjectDialog(_0x229d2d);},0x258);},_0x3dddbc=()=>{if(_0x4b2fc7)clearTimeout(_0x4b2fc7);_0x4b2fc7=null;};_0x5c8f49['addEventListener'](_0x584b94(0x184),_0x3305d9,{'passive':!![]}),_0x5c8f49[_0x584b94(0x1c9)]('touchend',_0x3dddbc,{'passive':!![]}),_0x5c8f49[_0x584b94(0x1c9)](_0x584b94(0x1a0),_0x3dddbc,{'passive':!![]});const _0x207187=document['createElement'](_0x584b94(0x12f));_0x207187[_0x584b94(0x17a)]=_0x584b94(0x18c),_0x207187['textContent']=projects[_0x229d2d]['name']||'ÁîªÂÉè'+(_0x229d2d+0x1),_0x207187[_0x584b94(0x161)]=_0x584b94(0x131),_0x5c8f49[_0x584b94(0x17b)](_0x207187);const _0xda652c=document[_0x584b94(0x1a7)](_0x584b94(0x143));_0xda652c[_0x584b94(0x12d)]='ÂâäÈô§',_0xda652c[_0x584b94(0x17a)]=_0x584b94(0x149),_0xda652c[_0x584b94(0x196)]=projects[_0x584b94(0x186)]===0x1,_0xda652c[_0x584b94(0x1a2)]=_0x4f5860=>{const _0x4debb1=_0x584b94;_0x4f5860[_0x4debb1(0x192)](),removeProjectAt(_0x229d2d);},_0x5c8f49[_0x584b94(0x17b)](_0xda652c),_0x3f26a1[_0x584b94(0x17b)](_0x5c8f49);}document['getElementById']('projectCount')[_0x584b94(0x12d)]='('+projects['length']+'Êûö)';}function showRenameProjectDialog(_0x2d0f9f){const _0x3e508e=_0x4463,_0x1a8c72=projects[_0x2d0f9f],_0x2ea397=_0x1a8c72&&_0x1a8c72[_0x3e508e(0x1c2)]?_0x1a8c72[_0x3e508e(0x1c2)]:'ÁîªÂÉè'+(_0x2d0f9f+0x1),_0x31021e=prompt(_0x3e508e(0x17c),_0x2ea397);if(_0x31021e==null)return;const _0x5ccbec=_0x31021e[_0x3e508e(0x1c6)]();projects[_0x2d0f9f][_0x3e508e(0x1c2)]=_0x5ccbec||_0x2ea397,updateProjectUI();}function _0x5aa3(){const _0x319aae=['querySelector','15888AtmUad','381321SFInSn','rgba(0,0,0,0.3)','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','40ZeZiMH','constructor','click','.toggle-btn','createObjectStore','(((.+)+)+)+$','\x20ÈÄèÊòéÂ∫¶','#newProjW','px)\x20scale(','layer-thumb\x20large','className','appendChild','Êñ∞„Åó„ÅÑÂêçÂâç„ÇíÂÖ•Âäõ','deleteDatabase','onsuccess','getElementById','toString','none','#000000','layerList','touchstart','width','length','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÈÄèÊòéÂ∫¶(0-100):\x20<input\x20type=\x22number\x22\x20id=\x22dlgAlpha\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','key','inline-block','‰∏ã„Å´ÁßªÂãï','„É¨„Ç§„É§„Éº','project-name','canvas','„Ç≥„Éû)','layer-btn','relative','frameList','stopPropagation','activeFrame','center','4000','disabled','100vh','IndexedDB\x20„ÅÆ„Çπ„Éà„Ç¢„ÅåÂ≠òÂú®„Åó„Å™„ÅÑ„Åü„ÇÅÂÜç‰ΩúÊàê„ÅåÂøÖË¶Å„Åß„Åô','menu-toggle-btn','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:var(--surface);\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','.section-content','div','contains','Escape','forEach','touchcancel','documentElement','onclick','startCell','flex','inset','alignItems','createElement','#dlgAlpha','result','translate(','ÊèèÁîª„Åß„Åç„Å™„ÅÑ„É¨„Ç§„É§„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÉÅ„É•„Éº','touchAction','transparent','sidebar-open','#dlgColor','color-dialog','text','onblur','activeLayer','innerHTML','height','offsetCells','function','toolsToggleBtn','getAttribute','ÈùûË°®Á§∫„Å´„Åô„Çã','#dlgOkBtn','style','505494fiYJgm','top','\x20active','boolean','#newProjH','name','floor','input','clearRect','trim','classList','body','addEventListener','add','isArray','display','getContext','borderRadius','100vw','layer-item','project-name-edit','createDocumentFragment','selected','replaceWith','#newProjOkBtn','frameCount','absolute','3892380Qbpwir','min','layer-info','close','textContent','project-item','span','position','Âè≥„ÇØ„É™„ÉÉ„ÇØÔºàÈï∑Êäº„ÅóÔºâ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ','open','background','layerCount','justifyContent','apply','block','currentColorSwatch','#dlgTransparentBtn','px,\x20','restore','drawImage','overflow','layers','8px','projectList','20nUmTCJ','menu-toggle-btn-close','button','onerror','target','frames','frame-item','100px','project-btn','main-container','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','623550xITJuS','256bOEWBR','dark','focus','preventDefault','data-theme','visible','search','zIndex','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§','\x22\x20style=\x22width:72px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgTransparentBtn\x22\x20type=\x22button\x22\x20style=\x22margin-left:8px;\x22>ÈÄèÊòé</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:8px;justify-content:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgOkBtn\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgCancelBtn\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','globalAlpha','value','fixed','round','objectStoreNames','layer-actions','layer-row','warn','max','Ë°®Á§∫„Åô„Çã','title','error','1216611FvlWCN','230601aofCYS','rgba(0,0,0,0.25)','left','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíË§áË£Ω','innerWidth','3000','remove'];_0x5aa3=function(){return _0x319aae;};return _0x5aa3();}function showNewProjectDialog(_0x155124){const _0x512e66=_0x4463;let _0x2b8db3=document['getElementById']('new-project-dialog');if(_0x2b8db3)_0x2b8db3[_0x512e66(0x16a)]();const _0xa198b2=document[_0x512e66(0x1a7)](_0x512e66(0x19c));_0xa198b2['id']='new-project-dialog',_0xa198b2[_0x512e66(0x1bc)]['position']='fixed',_0xa198b2[_0x512e66(0x1bc)]['left']='0',_0xa198b2['style'][_0x512e66(0x1be)]='0',_0xa198b2[_0x512e66(0x1bc)][_0x512e66(0x185)]='100vw',_0xa198b2['style'][_0x512e66(0x1b5)]=_0x512e66(0x197),_0xa198b2[_0x512e66(0x1bc)][_0x512e66(0x133)]=_0x512e66(0x16e),_0xa198b2[_0x512e66(0x1bc)]['display']=_0x512e66(0x1a4),_0xa198b2[_0x512e66(0x1bc)][_0x512e66(0x1a6)]=_0x512e66(0x194),_0xa198b2[_0x512e66(0x1bc)][_0x512e66(0x135)]=_0x512e66(0x194),_0xa198b2[_0x512e66(0x1bc)][_0x512e66(0x154)]=_0x512e66(0x169),_0xa198b2[_0x512e66(0x1b4)]=_0x512e66(0x19a)+(projects[_0x512e66(0x186)]+0x1)+_0x512e66(0x16f),document[_0x512e66(0x1c8)][_0x512e66(0x17b)](_0xa198b2),_0xa198b2[_0x512e66(0x16b)](_0x512e66(0x126))[_0x512e66(0x1a2)]=()=>{const _0x9288a4=_0x512e66,_0x346f53=parseInt(_0xa198b2['querySelector'](_0x9288a4(0x177))[_0x9288a4(0x158)],0xa),_0x2148a0=parseInt(_0xa198b2[_0x9288a4(0x16b)](_0x9288a4(0x1c1))[_0x9288a4(0x158)],0xa),_0x5ae9b5=_0xa198b2[_0x9288a4(0x16b)]('#newProjName')[_0x9288a4(0x158)][_0x9288a4(0x1c6)]();_0xa198b2['remove']();if(_0x155124)_0x155124(_0x346f53,_0x2148a0,_0x5ae9b5);},_0xa198b2['querySelector']('#newProjCancelBtn')[_0x512e66(0x1a2)]=()=>{const _0x73b3ae=_0x512e66;_0xa198b2[_0x73b3ae(0x16a)]();};}function updateFrameUI(){const _0x6e6c98=_0x4463,_0x2bc8c9=document[_0x6e6c98(0x17f)](_0x6e6c98(0x191)),_0x37b16e=getCurrentProject();if(!_0x37b16e||!_0x37b16e['frames'])return;_0x2bc8c9[_0x6e6c98(0x1b4)]='';const _0x3bf4f6=document[_0x6e6c98(0x123)](),_0x466064=_0x37b16e[_0x6e6c98(0x146)][_0x6e6c98(0x186)],_0x5f15b7=0x40;for(let _0x2e465c=0x0;_0x2e465c<_0x466064;_0x2e465c++){const _0x4fa4bb=document[_0x6e6c98(0x1a7)](_0x6e6c98(0x19c));_0x4fa4bb[_0x6e6c98(0x17a)]=_0x6e6c98(0x147)+(_0x2e465c===_0x37b16e['activeFrame']?_0x6e6c98(0x1bf):''),_0x4fa4bb[_0x6e6c98(0x1a2)]=()=>{const _0x439bb4=_0x6e6c98;_0x37b16e[_0x439bb4(0x193)]=_0x2e465c,updateFrameUI(),updateLayerUI(),redrawAll();};if(_0x466064<=_0x5f15b7||Math['abs'](_0x2e465c-_0x37b16e[_0x6e6c98(0x193)])<=0x10){const _0x1217b6=document[_0x6e6c98(0x1a7)](_0x6e6c98(0x18d));_0x1217b6[_0x6e6c98(0x17a)]='frame-thumb',_0x1217b6[_0x6e6c98(0x185)]=0x20,_0x1217b6[_0x6e6c98(0x1b5)]=0x20;let _0x325b3b=_0x1217b6[_0x6e6c98(0x1cd)]('2d',{'willReadFrequently':!![]});_0x325b3b[_0x6e6c98(0x1c5)](0x0,0x0,0x20,0x20);const _0x26214a=_0x37b16e[_0x6e6c98(0x146)][_0x2e465c];if(_0x26214a&&Array[_0x6e6c98(0x1cb)](_0x26214a[_0x6e6c98(0x13e)]))for(let _0x17c324=0x0;_0x17c324<_0x26214a[_0x6e6c98(0x13e)][_0x6e6c98(0x186)];_0x17c324++){const _0x1ff205=_0x26214a['layers'][_0x17c324];if(_0x1ff205&&(_0x1ff205[_0x6e6c98(0x18d)]||_0x1ff205 instanceof HTMLCanvasElement)){const _0x59ddd4=_0x1ff205[_0x6e6c98(0x18d)]?_0x1ff205[_0x6e6c98(0x18d)]:_0x1ff205;if(_0x59ddd4&&_0x59ddd4['width']>0x0&&_0x59ddd4[_0x6e6c98(0x1b5)]>0x0){const _0x3f2617=_0x59ddd4[_0x6e6c98(0x185)],_0x152165=_0x59ddd4['height'],_0x41e7f8=Math[_0x6e6c98(0x12a)](_0x1217b6[_0x6e6c98(0x185)]/_0x3f2617,_0x1217b6[_0x6e6c98(0x1b5)]/_0x152165),_0x1c12c0=Math[_0x6e6c98(0x15a)](_0x3f2617*_0x41e7f8),_0x1b561d=Math[_0x6e6c98(0x15a)](_0x152165*_0x41e7f8),_0x20ad8a=Math['round']((_0x1217b6[_0x6e6c98(0x185)]-_0x1c12c0)/0x2),_0x487cde=Math['round']((_0x1217b6['height']-_0x1b561d)/0x2);_0x325b3b[_0x6e6c98(0x13c)](_0x59ddd4,0x0,0x0,_0x3f2617,_0x152165,_0x20ad8a,_0x487cde,_0x1c12c0,_0x1b561d);}}}_0x4fa4bb['appendChild'](_0x1217b6);}const _0x263a51=document[_0x6e6c98(0x1a7)](_0x6e6c98(0x12f));_0x263a51[_0x6e6c98(0x12d)]='F'+(_0x2e465c+0x1),_0x4fa4bb[_0x6e6c98(0x17b)](_0x263a51);const _0xfed722=document['createElement'](_0x6e6c98(0x143));_0xfed722[_0x6e6c98(0x12d)]='ÂâäÈô§',_0xfed722[_0x6e6c98(0x17a)]='frame-btn',_0xfed722[_0x6e6c98(0x196)]=_0x37b16e['frames']['length']===0x1,_0xfed722['onclick']=_0x7c2071=>{const _0x2eb7a7=_0x6e6c98;_0x7c2071[_0x2eb7a7(0x192)](),removeFrameAt(_0x2e465c);},_0x4fa4bb[_0x6e6c98(0x17b)](_0xfed722),_0x3bf4f6[_0x6e6c98(0x17b)](_0x4fa4bb);}_0x2bc8c9['appendChild'](_0x3bf4f6),document[_0x6e6c98(0x17f)](_0x6e6c98(0x127))[_0x6e6c98(0x12d)]='('+_0x37b16e['frames'][_0x6e6c98(0x186)]+_0x6e6c98(0x18e);}function updateLayerUI(){const _0x414d9=_0x4463,{layers:_0x44179c,activeLayer:_0x594208}=getCurrentFrame();document[_0x414d9(0x17f)](_0x414d9(0x134))[_0x414d9(0x12d)]='('+_0x44179c[_0x414d9(0x186)]+'Êûö)';const _0x354d06=document[_0x414d9(0x17f)](_0x414d9(0x183));_0x354d06[_0x414d9(0x1b4)]='';const _0x49ae36=document[_0x414d9(0x123)](),_0x8194c2=_0x44179c[_0x414d9(0x186)],_0x266799=0x40;for(let _0x39d457=_0x44179c['length']-0x1;_0x39d457>=0x0;_0x39d457--){const _0x214a25=document['createElement'](_0x414d9(0x19c));_0x214a25[_0x414d9(0x17a)]=_0x414d9(0x1d0)+(_0x39d457===_0x594208?'\x20active':''),_0x214a25[_0x414d9(0x1a2)]=_0x48f362=>{const _0x2b55f0=_0x414d9;if(_0x48f362[_0x2b55f0(0x145)]['classList']['contains'](_0x2b55f0(0x18f)))return;getCurrentFrame()[_0x2b55f0(0x1b3)]=_0x39d457,updateLayerUI(),redrawAll();};const _0x55d091=document['createElement']('div');_0x55d091[_0x414d9(0x17a)]=_0x414d9(0x15d);if(_0x8194c2<=_0x266799||Math['abs'](_0x39d457-_0x594208)<=0x10){const _0x5210fa=document[_0x414d9(0x1a7)](_0x414d9(0x18d));_0x5210fa['className']=_0x414d9(0x179),_0x5210fa[_0x414d9(0x185)]=0x30,_0x5210fa['height']=0x30;const _0x11fd57=_0x5210fa[_0x414d9(0x1cd)]('2d');_0x11fd57[_0x414d9(0x1c5)](0x0,0x0,_0x5210fa[_0x414d9(0x185)],_0x5210fa[_0x414d9(0x1b5)]),_0x11fd57[_0x414d9(0x157)]=_0x44179c[_0x39d457][_0x414d9(0x152)]===![]?0.3:0x1;let _0x29ead0=null;if(_0x44179c[_0x39d457]instanceof HTMLCanvasElement)_0x29ead0=_0x44179c[_0x39d457];else _0x44179c[_0x39d457][_0x414d9(0x18d)]instanceof HTMLCanvasElement&&(_0x29ead0=_0x44179c[_0x39d457][_0x414d9(0x18d)]);if(_0x29ead0&&_0x29ead0[_0x414d9(0x185)]>0x0&&_0x29ead0['height']>0x0){const _0x807d28=_0x29ead0['width'],_0x292c99=_0x29ead0['height'],_0x259933=Math[_0x414d9(0x12a)](_0x5210fa['width']/_0x807d28,_0x5210fa[_0x414d9(0x1b5)]/_0x292c99),_0x5e71bb=Math['round'](_0x807d28*_0x259933),_0x2c8e29=Math['round'](_0x292c99*_0x259933),_0x5d88c7=Math[_0x414d9(0x15a)]((_0x5210fa[_0x414d9(0x185)]-_0x5e71bb)/0x2),_0x2c82a0=Math[_0x414d9(0x15a)]((_0x5210fa[_0x414d9(0x1b5)]-_0x2c8e29)/0x2);_0x11fd57[_0x414d9(0x13c)](_0x29ead0,0x0,0x0,_0x807d28,_0x292c99,_0x5d88c7,_0x2c82a0,_0x5e71bb,_0x2c8e29);}else console[_0x414d9(0x15e)](_0x414d9(0x1ab),_0x44179c[_0x39d457]);_0x55d091[_0x414d9(0x17b)](_0x5210fa);}const _0x56e95c=document[_0x414d9(0x1a7)]('div');_0x56e95c[_0x414d9(0x17a)]=_0x414d9(0x12b);const _0x5e5d9f=_0x44179c[_0x39d457]&&_0x44179c[_0x39d457][_0x414d9(0x1c2)]?_0x44179c[_0x39d457][_0x414d9(0x1c2)]:_0x414d9(0x18b)+(_0x39d457+0x1),_0xadcbd1=document[_0x414d9(0x1a7)](_0x414d9(0x12f));_0xadcbd1[_0x414d9(0x12d)]=_0x5e5d9f,_0xadcbd1[_0x414d9(0x17a)]='layer-label',_0xadcbd1[_0x414d9(0x161)]='„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâçÁ∑®ÈõÜ',_0xadcbd1[_0x414d9(0x1a2)]=_0x53abb0=>{const _0x30ed92=_0x414d9;_0x53abb0[_0x30ed92(0x192)](),editLayerName(_0x39d457,_0xadcbd1);},_0x56e95c[_0x414d9(0x17b)](_0xadcbd1);const _0x5e47c2=document['createElement']('div');_0x5e47c2[_0x414d9(0x17a)]=_0x414d9(0x15c);const _0x3060ad=document[_0x414d9(0x1a7)]('button');_0x3060ad[_0x414d9(0x17a)]='layer-btn\x20layer-vis-btn',_0x3060ad['title']=_0x44179c[_0x39d457][_0x414d9(0x152)]===![]?_0x414d9(0x160):_0x414d9(0x1ba),_0x3060ad[_0x414d9(0x1b4)]=_0x44179c[_0x39d457][_0x414d9(0x152)]===![]?'üëÅÔ∏è‚Äçüó®Ô∏è':'üëÅÔ∏è',_0x3060ad[_0x414d9(0x1a2)]=_0x302172=>{const _0x323c6e=_0x414d9;_0x302172[_0x323c6e(0x192)](),_0x44179c[_0x39d457]['visible']=!_0x44179c[_0x39d457][_0x323c6e(0x152)],updateLayerUI(),redrawAll();},_0x5e47c2[_0x414d9(0x17b)](_0x3060ad);const _0x5365f=document['createElement'](_0x414d9(0x143));_0x5365f[_0x414d9(0x17a)]=_0x414d9(0x18f),_0x5365f['textContent']='Ë§áË£Ω',_0x5365f[_0x414d9(0x161)]=_0x414d9(0x167),_0x5365f[_0x414d9(0x1a2)]=_0x4527c4=>{const _0x575070=_0x414d9;_0x4527c4[_0x575070(0x192)](),duplicateLayerAt(_0x39d457);},_0x5e47c2[_0x414d9(0x17b)](_0x5365f);const _0x5ef629=document[_0x414d9(0x1a7)](_0x414d9(0x143));_0x5ef629[_0x414d9(0x12d)]='‚Üë',_0x5ef629[_0x414d9(0x17a)]=_0x414d9(0x18f),_0x5ef629[_0x414d9(0x161)]='‰∏ä„Å´ÁßªÂãï',_0x5ef629[_0x414d9(0x196)]=_0x39d457===_0x44179c[_0x414d9(0x186)]-0x1,_0x5ef629[_0x414d9(0x1a2)]=_0x4be74a=>{const _0x40de84=_0x414d9;_0x4be74a[_0x40de84(0x192)]();if(_0x39d457<_0x44179c[_0x40de84(0x186)]-0x1)swapLayer(_0x39d457,_0x39d457+0x1);},_0x5e47c2[_0x414d9(0x17b)](_0x5ef629);const _0x4a05cc=document['createElement'](_0x414d9(0x143));_0x4a05cc[_0x414d9(0x12d)]='‚Üì',_0x4a05cc[_0x414d9(0x17a)]=_0x414d9(0x18f),_0x4a05cc[_0x414d9(0x161)]=_0x414d9(0x18a),_0x4a05cc['disabled']=_0x39d457===0x0,_0x4a05cc['onclick']=_0x18b14e=>{const _0x32ad39=_0x414d9;_0x18b14e[_0x32ad39(0x192)]();if(_0x39d457>0x0)swapLayer(_0x39d457,_0x39d457-0x1);},_0x5e47c2['appendChild'](_0x4a05cc);const _0xa375fa=document['createElement'](_0x414d9(0x143));_0xa375fa[_0x414d9(0x12d)]='ÂâäÈô§',_0xa375fa['className']=_0x414d9(0x18f),_0xa375fa['title']=_0x414d9(0x155),_0xa375fa[_0x414d9(0x196)]=_0x44179c[_0x414d9(0x186)]===0x1,_0xa375fa[_0x414d9(0x1a2)]=_0x5e069f=>{_0x5e069f['stopPropagation'](),removeLayerAt(_0x39d457);},_0x5e47c2[_0x414d9(0x17b)](_0xa375fa),_0x56e95c[_0x414d9(0x17b)](_0x5e47c2),_0x55d091[_0x414d9(0x17b)](_0x56e95c),_0x214a25[_0x414d9(0x17b)](_0x55d091),_0x49ae36[_0x414d9(0x17b)](_0x214a25);}_0x354d06[_0x414d9(0x17b)](_0x49ae36);}function editLayerName(_0x3276e1,_0x3a8e72){const _0xae5941=_0x4463,_0xc4f135=getCurrentFrame();if(!_0xc4f135||!_0xc4f135[_0xae5941(0x13e)]||!_0xc4f135['layers'][_0x3276e1])return;const _0x21bb93=_0xc4f135[_0xae5941(0x13e)][_0x3276e1][_0xae5941(0x1c2)]||_0xae5941(0x18b)+(_0x3276e1+0x1),_0x55289b=document[_0xae5941(0x1a7)](_0xae5941(0x1c4));_0x55289b['type']=_0xae5941(0x1b1),_0x55289b[_0xae5941(0x17a)]=_0xae5941(0x122),_0x55289b[_0xae5941(0x158)]=_0x21bb93,_0x55289b[_0xae5941(0x1bc)][_0xae5941(0x185)]=_0xae5941(0x148),_0x55289b[_0xae5941(0x1b2)]=()=>{const _0x5649a6=_0xae5941;_0xc4f135['layers'][_0x3276e1][_0x5649a6(0x1c2)]=_0x55289b[_0x5649a6(0x158)][_0x5649a6(0x1c6)]()||_0x21bb93,updateLayerUI();try{redrawAll();}catch(_0xbeabea){}if(typeof requestAutoSave==='function')requestAutoSave();},_0x55289b['onkeydown']=_0x2f0e4c=>{const _0x371d82=_0xae5941;if(_0x2f0e4c[_0x371d82(0x188)]==='Enter')_0x55289b['blur']();_0x2f0e4c[_0x371d82(0x188)]===_0x371d82(0x19e)&&updateLayerUI();},_0x3a8e72[_0xae5941(0x125)](_0x55289b),_0x55289b[_0xae5941(0x14f)](),_0x55289b['select']();}function toggleTheme(){const _0xf2b57a=_0x4463;applyTheme(document[_0xf2b57a(0x1a1)][_0xf2b57a(0x1b9)](_0xf2b57a(0x151))===_0xf2b57a(0x14e)?'light':_0xf2b57a(0x14e));}function openDB(){return new Promise((_0x218842,_0x3aa3b1)=>{const _0x1102ea=_0x4463,_0x18271f=indexedDB[_0x1102ea(0x132)](dbName,0x2);_0x18271f['onupgradeneeded']=()=>{const _0x163788=_0x1102ea,_0x34a7dc=_0x18271f['result'];!_0x34a7dc[_0x163788(0x15b)][_0x163788(0x19d)](storeName)&&_0x34a7dc[_0x163788(0x174)](storeName);},_0x18271f[_0x1102ea(0x17e)]=()=>{const _0x15a945=_0x1102ea,_0x351e4c=_0x18271f[_0x15a945(0x1a9)];if(!_0x351e4c[_0x15a945(0x15b)][_0x15a945(0x19d)](storeName)){_0x351e4c[_0x15a945(0x12c)](),indexedDB[_0x15a945(0x17d)](dbName),_0x3aa3b1(new Error(_0x15a945(0x198)));return;}_0x218842(_0x351e4c);},_0x18271f[_0x1102ea(0x144)]=()=>_0x3aa3b1(_0x18271f[_0x1102ea(0x162)]);});}function openColorDialog(){const _0x42ccdb=_0x4463;if(document[_0x42ccdb(0x17f)](_0x42ccdb(0x1b0)))return;const _0x422be2=document[_0x42ccdb(0x1a7)](_0x42ccdb(0x19c));_0x422be2['id']=_0x42ccdb(0x1b0),_0x422be2['style'][_0x42ccdb(0x130)]=_0x42ccdb(0x159),_0x422be2[_0x42ccdb(0x1bc)][_0x42ccdb(0x166)]='0',_0x422be2[_0x42ccdb(0x1bc)]['top']='0',_0x422be2[_0x42ccdb(0x1bc)][_0x42ccdb(0x185)]=_0x42ccdb(0x1cf),_0x422be2[_0x42ccdb(0x1bc)]['height']=_0x42ccdb(0x197),_0x422be2[_0x42ccdb(0x1bc)][_0x42ccdb(0x1cc)]=_0x42ccdb(0x1a4),_0x422be2[_0x42ccdb(0x1bc)][_0x42ccdb(0x1a6)]=_0x42ccdb(0x194),_0x422be2['style'][_0x42ccdb(0x135)]=_0x42ccdb(0x194),_0x422be2[_0x42ccdb(0x1bc)][_0x42ccdb(0x154)]=_0x42ccdb(0x195),_0x422be2[_0x42ccdb(0x1bc)][_0x42ccdb(0x133)]=_0x42ccdb(0x165),_0x422be2[_0x42ccdb(0x1b4)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;padding:18px;border-radius:8px;min-width:260px;text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:0\x200\x208px\x200;\x22>Ëâ≤„Å®ÈÄèÊòé„ÇíÈÅ∏Êäû</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22dlgColor\x22\x20value=\x22'+(currentColor===_0x42ccdb(0x1ad)?_0x42ccdb(0x182):currentColor)+_0x42ccdb(0x187)+Math[_0x42ccdb(0x15a)](currentAlpha*0x64)+_0x42ccdb(0x156),document[_0x42ccdb(0x1c8)][_0x42ccdb(0x17b)](_0x422be2),_0x422be2[_0x42ccdb(0x16b)](_0x42ccdb(0x139))['onclick']=()=>{const _0x26baf4=_0x42ccdb,_0x5cd55a=_0x422be2[_0x26baf4(0x16b)]('#dlgAlpha');_0x5cd55a[_0x26baf4(0x158)]=0x0,_0x422be2[_0x26baf4(0x16b)](_0x26baf4(0x1af))['value']=_0x26baf4(0x182);},_0x422be2['querySelector'](_0x42ccdb(0x1bb))[_0x42ccdb(0x1a2)]=()=>{const _0x4c1df0=_0x42ccdb,_0x257570=_0x422be2['querySelector']('#dlgColor')[_0x4c1df0(0x158)],_0x2ff4fe=Math[_0x4c1df0(0x15f)](0x0,Math[_0x4c1df0(0x12a)](0x64,parseInt(_0x422be2[_0x4c1df0(0x16b)](_0x4c1df0(0x1a8))[_0x4c1df0(0x158)],0xa)||0x0));if(_0x2ff4fe===0x0){currentAlpha=0x0,currentColor=_0x4c1df0(0x1ad);if(colorPicker)colorPicker['value']=_0x4c1df0(0x182);}else{currentAlpha=_0x2ff4fe/0x64,currentColor=_0x257570;if(colorPicker)colorPicker[_0x4c1df0(0x158)]=_0x257570;}updateCurrentColorSwatch(),document['querySelectorAll']('.palette-color')[_0x4c1df0(0x19f)](_0x3faaa9=>_0x3faaa9[_0x4c1df0(0x1c7)][_0x4c1df0(0x16a)](_0x4c1df0(0x124))),_0x422be2[_0x4c1df0(0x16a)]();},_0x422be2[_0x42ccdb(0x16b)]('#dlgCancelBtn')[_0x42ccdb(0x1a2)]=()=>_0x422be2[_0x42ccdb(0x16a)](),_0x422be2[_0x42ccdb(0x1c9)](_0x42ccdb(0x172),_0x56bc57=>{const _0x524150=_0x42ccdb;if(_0x56bc57[_0x524150(0x145)]===_0x422be2)_0x422be2[_0x524150(0x16a)]();});}function updateLayerMove(_0x5234b0){const _0x1fc0d1=_0x4463;if(!layerMoveState['active'])return;const _0xb69369=getCanvasCoords(_0x5234b0),_0x1fd3b2={'x':Math[_0x1fc0d1(0x1c3)](_0xb69369['x']/cellSize),'y':Math[_0x1fc0d1(0x1c3)](_0xb69369['y']/cellSize)};layerMoveState[_0x1fc0d1(0x1b6)]['x']=_0x1fd3b2['x']-layerMoveState[_0x1fc0d1(0x1a3)]['x'],layerMoveState[_0x1fc0d1(0x1b6)]['y']=_0x1fd3b2['y']-layerMoveState[_0x1fc0d1(0x1a3)]['y'],redrawAll();const _0xa277fa=getCurrentFrame();if(!_0xa277fa)return;const _0x319db5=_0xa277fa[_0x1fc0d1(0x1b3)];if(_0x319db5==null)return;ctx['save'](),ctx['translate'](layerMoveState[_0x1fc0d1(0x1b6)]['x']*cellSize,layerMoveState[_0x1fc0d1(0x1b6)]['y']*cellSize),ctx[_0x1fc0d1(0x13c)](_0xa277fa['layers'][_0x319db5][_0x1fc0d1(0x18d)],0x0,0x0),ctx[_0x1fc0d1(0x13b)]();}function toggleSection(_0x3b2f61){const _0x7c6a8c=_0x4463,_0x3f36a8=document[_0x7c6a8c(0x17f)](_0x3b2f61),_0x2b8a8c=_0x3f36a8[_0x7c6a8c(0x16b)](_0x7c6a8c(0x19b)),_0x4cbf0f=_0x3f36a8[_0x7c6a8c(0x16b)](_0x7c6a8c(0x173));_0x2b8a8c[_0x7c6a8c(0x1bc)][_0x7c6a8c(0x1cc)]===_0x7c6a8c(0x181)?(_0x2b8a8c[_0x7c6a8c(0x1bc)][_0x7c6a8c(0x1cc)]='',_0x4cbf0f['textContent']='‚ñº'):(_0x2b8a8c[_0x7c6a8c(0x1bc)][_0x7c6a8c(0x1cc)]=_0x7c6a8c(0x181),_0x4cbf0f['textContent']='‚ñ≤');}function _0x4463(_0x583f2c,_0x2b847d){_0x583f2c=_0x583f2c-0x122;const _0x50293a=_0x5aa3();let _0x4e322e=_0x50293a[_0x583f2c];return _0x4e322e;}function toggleSideMenu(_0x318cb3){const _0x45cbab=_0x4463,_0x20bd96=document[_0x45cbab(0x17f)]('sidebar'),_0x25b65b=document[_0x45cbab(0x17f)](_0x45cbab(0x14a)),_0x31be65=document['getElementById'](_0x45cbab(0x199)),_0x24f8ec=document['getElementById'](_0x45cbab(0x142)),_0x7931b6=_0x20bd96['classList']['contains']('open');let _0x334877=typeof _0x318cb3===_0x45cbab(0x1c0)?_0x318cb3:!_0x7931b6;_0x334877?(_0x20bd96[_0x45cbab(0x1c7)][_0x45cbab(0x1ca)]('open'),_0x25b65b[_0x45cbab(0x1c7)]['add'](_0x45cbab(0x1ae)),document[_0x45cbab(0x1c8)][_0x45cbab(0x1bc)][_0x45cbab(0x13d)]='hidden',document[_0x45cbab(0x1c8)]['style'][_0x45cbab(0x1ac)]='none',window[_0x45cbab(0x168)]<=0x384&&(_0x24f8ec[_0x45cbab(0x1bc)][_0x45cbab(0x1cc)]=_0x45cbab(0x137),_0x31be65[_0x45cbab(0x1bc)][_0x45cbab(0x1cc)]=_0x45cbab(0x181))):(_0x20bd96[_0x45cbab(0x1c7)][_0x45cbab(0x16a)](_0x45cbab(0x132)),_0x25b65b[_0x45cbab(0x1c7)][_0x45cbab(0x16a)](_0x45cbab(0x1ae)),document[_0x45cbab(0x1c8)][_0x45cbab(0x1bc)][_0x45cbab(0x13d)]='',document['body']['style'][_0x45cbab(0x1ac)]='',window[_0x45cbab(0x168)]<=0x384&&(_0x24f8ec[_0x45cbab(0x1bc)][_0x45cbab(0x1cc)]=_0x45cbab(0x181),_0x31be65[_0x45cbab(0x1bc)][_0x45cbab(0x1cc)]=_0x45cbab(0x137)));}function updateMenuBtnDisplay(){const _0x412623=_0x4463,_0x45074c=document[_0x412623(0x17f)]('sidebar'),_0x1a6a2d=document[_0x412623(0x17f)](_0x412623(0x14a)),_0x2ab8d3=document[_0x412623(0x17f)](_0x412623(0x199)),_0x48ddf3=document[_0x412623(0x17f)](_0x412623(0x142)),_0x32fe22=document[_0x412623(0x17f)](_0x412623(0x1b8));if(window['innerWidth']>0x384){_0x45074c['classList'][_0x412623(0x16a)]('open'),_0x1a6a2d['classList']['remove'](_0x412623(0x1ae)),_0x48ddf3[_0x412623(0x1bc)][_0x412623(0x1cc)]='none',_0x2ab8d3[_0x412623(0x1bc)][_0x412623(0x1cc)]=_0x412623(0x181);if(_0x32fe22)_0x32fe22['style']['display']=window[_0x412623(0x168)]>0x44c?_0x412623(0x181):_0x412623(0x189);document['body']['style']['overflow']='',document[_0x412623(0x1c8)][_0x412623(0x1bc)]['touchAction']='';}else{_0x45074c[_0x412623(0x1c7)][_0x412623(0x19d)](_0x412623(0x132))?(_0x48ddf3[_0x412623(0x1bc)]['display']=_0x412623(0x137),_0x2ab8d3[_0x412623(0x1bc)][_0x412623(0x1cc)]='none'):(_0x48ddf3[_0x412623(0x1bc)][_0x412623(0x1cc)]=_0x412623(0x181),_0x2ab8d3[_0x412623(0x1bc)][_0x412623(0x1cc)]=_0x412623(0x137));if(_0x32fe22)_0x32fe22[_0x412623(0x1bc)][_0x412623(0x1cc)]=_0x412623(0x189);}}function updateTransform(){const _0x3c40ee=_0x4463;canvas[_0x3c40ee(0x1bc)]['transform']=_0x3c40ee(0x1aa)+posX+_0x3c40ee(0x13a)+posY+_0x3c40ee(0x178)+scale+')';}