const a0_0x1fd7e8=a0_0x272e;(function(_0x5a2f7e,_0x2fb1e2){const _0x167244=a0_0x272e,_0x5d9bb2=_0x5a2f7e();while(!![]){try{const _0x11bd3e=-parseInt(_0x167244(0xc2))/0x1*(parseInt(_0x167244(0x86))/0x2)+parseInt(_0x167244(0x12a))/0x3*(-parseInt(_0x167244(0x11e))/0x4)+parseInt(_0x167244(0xa9))/0x5+-parseInt(_0x167244(0x94))/0x6+parseInt(_0x167244(0x174))/0x7*(parseInt(_0x167244(0x101))/0x8)+-parseInt(_0x167244(0x144))/0x9*(parseInt(_0x167244(0x161))/0xa)+parseInt(_0x167244(0xb2))/0xb*(parseInt(_0x167244(0x12c))/0xc);if(_0x11bd3e===_0x2fb1e2)break;else _0x5d9bb2['push'](_0x5d9bb2['shift']());}catch(_0x1509f9){_0x5d9bb2['push'](_0x5d9bb2['shift']());}}}(a0_0x3f2b,0x2833c));const a0_0x4d3ef2=(function(){let _0x198e9d=!![];return function(_0x293358,_0x89b531){const _0x28d90b=_0x198e9d?function(){const _0x27317a=a0_0x272e;if(_0x89b531){const _0x397f4b=_0x89b531[_0x27317a(0x124)](_0x293358,arguments);return _0x89b531=null,_0x397f4b;}}:function(){};return _0x198e9d=![],_0x28d90b;};}()),a0_0x38b7be=a0_0x4d3ef2(this,function(){const _0x90eacb=a0_0x272e;return a0_0x38b7be['toString']()[_0x90eacb(0x16e)]('(((.+)+)+)+$')[_0x90eacb(0x12f)]()[_0x90eacb(0x176)](a0_0x38b7be)[_0x90eacb(0x16e)](_0x90eacb(0x189));});a0_0x38b7be();let canvas=document[a0_0x1fd7e8(0x195)]('canvas'),ctx=canvas['getContext']('2d'),cellSize=0x14,currentColor=a0_0x1fd7e8(0x17e),currentTool=a0_0x1fd7e8(0x8e),penSize=0x1,penMode=a0_0x1fd7e8(0xfe),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x3ccf75=0x10,_0x5570ad=0x10,_0x126cbb=''){const _0x9ef17f=a0_0x1fd7e8;let _0x808e5e=0x14,_0x3d01fa=[],_0x45b4ad=[],_0x23cb99=[],_0x55071a=document[_0x9ef17f(0x15a)]('canvas');_0x55071a[_0x9ef17f(0x139)]=_0x3ccf75*_0x808e5e,_0x55071a[_0x9ef17f(0x120)]=_0x5570ad*_0x808e5e,_0x3d01fa[_0x9ef17f(0x114)](_0x55071a),_0x45b4ad[_0x9ef17f(0x114)]([]),_0x23cb99[_0x9ef17f(0x114)]([]);let _0x4cce7b={'layers':_0x3d01fa,'activeLayer':0x0,'layerHistories':_0x45b4ad,'layerRedoStacks':_0x23cb99};return{'frames':[_0x4cce7b],'activeFrame':0x0,'width':_0x3ccf75,'height':_0x5570ad,'name':_0x126cbb||'画像'+(projects[_0x9ef17f(0xdc)]+0x1)};}function updateProjectUI(){const _0x53f2f3=a0_0x1fd7e8,_0x1cf4d5=document['getElementById'](_0x53f2f3(0x170));_0x1cf4d5[_0x53f2f3(0xd9)]='';for(let _0x249c70=0x0;_0x249c70<projects[_0x53f2f3(0xdc)];_0x249c70++){const _0x42e9b1=document[_0x53f2f3(0x15a)](_0x53f2f3(0x196));_0x42e9b1[_0x53f2f3(0x92)]='project-item'+(_0x249c70===activeProject?_0x53f2f3(0x99):''),_0x42e9b1['onclick']=()=>{activeProject=_0x249c70,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0xc5dd1e=document['createElement'](_0x53f2f3(0xef));_0xc5dd1e[_0x53f2f3(0x92)]=_0x53f2f3(0x179),_0xc5dd1e[_0x53f2f3(0x152)]=projects[_0x249c70][_0x53f2f3(0x133)]||'画像'+(_0x249c70+0x1),_0xc5dd1e[_0x53f2f3(0xa7)]=_0x53f2f3(0x113),_0xc5dd1e['onclick']=_0x147ddf=>{const _0x13f5ea=_0x53f2f3;_0x147ddf[_0x13f5ea(0x9d)](),editProjectName(_0x249c70,_0xc5dd1e);},_0x42e9b1[_0x53f2f3(0x10c)](_0xc5dd1e);const _0xcee06e=document[_0x53f2f3(0x15a)](_0x53f2f3(0xf9));_0xcee06e[_0x53f2f3(0x152)]='削除',_0xcee06e[_0x53f2f3(0x92)]=_0x53f2f3(0xbb),_0xcee06e['disabled']=projects[_0x53f2f3(0xdc)]===0x1,_0xcee06e[_0x53f2f3(0xab)]=_0x2c9f7f=>{const _0x72acdf=_0x53f2f3;_0x2c9f7f[_0x72acdf(0x9d)](),removeProjectAt(_0x249c70);},_0x42e9b1[_0x53f2f3(0x10c)](_0xcee06e),_0x1cf4d5[_0x53f2f3(0x10c)](_0x42e9b1);}document[_0x53f2f3(0x195)]('projectCount')[_0x53f2f3(0x152)]='('+projects[_0x53f2f3(0xdc)]+'枚)';}function editProjectName(_0x4b3ead,_0x47c14e){const _0x550163=a0_0x1fd7e8,_0xe4a51a=document[_0x550163(0x15a)](_0x550163(0xc9));_0xe4a51a[_0x550163(0x117)]=_0x550163(0x11d),_0xe4a51a[_0x550163(0x19c)]=projects[_0x4b3ead][_0x550163(0x133)]||'画像'+(_0x4b3ead+0x1),_0xe4a51a[_0x550163(0x92)]=_0x550163(0xbf),_0xe4a51a[_0x550163(0x1a3)][_0x550163(0x139)]=_0x550163(0x140),_0xe4a51a[_0x550163(0xb5)]=()=>{const _0x190c3e=_0x550163;projects[_0x4b3ead]['name']=_0xe4a51a[_0x190c3e(0x19c)][_0x190c3e(0xd4)]()||'画像'+(_0x4b3ead+0x1),updateProjectUI();},_0xe4a51a[_0x550163(0xf3)]=_0x4546df=>{const _0x1d5cef=_0x550163;if(_0x4546df[_0x1d5cef(0xee)]===_0x1d5cef(0x1ac))_0xe4a51a[_0x1d5cef(0x12b)]();},_0x47c14e[_0x550163(0xbc)](_0xe4a51a),_0xe4a51a[_0x550163(0x171)](),_0xe4a51a[_0x550163(0x169)]();}function showNewProjectDialog(_0xa81674){const _0x45384f=a0_0x1fd7e8;let _0x45846c=document[_0x45384f(0x195)](_0x45384f(0x158));if(_0x45846c)_0x45846c[_0x45384f(0xe4)]();const _0x331f81=document[_0x45384f(0x15a)]('div');_0x331f81['id']=_0x45384f(0x158),_0x331f81[_0x45384f(0x1a3)]['position']=_0x45384f(0x9c),_0x331f81[_0x45384f(0x1a3)][_0x45384f(0x197)]='0',_0x331f81['style'][_0x45384f(0x149)]='0',_0x331f81[_0x45384f(0x1a3)]['width']=_0x45384f(0xfa),_0x331f81[_0x45384f(0x1a3)][_0x45384f(0x120)]=_0x45384f(0x13d),_0x331f81[_0x45384f(0x1a3)]['background']=_0x45384f(0x13b),_0x331f81[_0x45384f(0x1a3)][_0x45384f(0xac)]=_0x45384f(0x121),_0x331f81[_0x45384f(0x1a3)][_0x45384f(0x11b)]='center',_0x331f81[_0x45384f(0x1a3)][_0x45384f(0x90)]='center',_0x331f81['style']['zIndex']='3000',_0x331f81[_0x45384f(0xd9)]=_0x45384f(0xdd)+(projects[_0x45384f(0xdc)]+0x1)+_0x45384f(0x13a),document[_0x45384f(0x16d)]['appendChild'](_0x331f81),_0x331f81[_0x45384f(0x8b)](_0x45384f(0x18e))[_0x45384f(0xab)]=()=>{const _0x2e8ea8=_0x45384f,_0x5c4340=parseInt(_0x331f81[_0x2e8ea8(0x8b)]('#newProjW')['value'],0xa),_0x1ad7ff=parseInt(_0x331f81['querySelector'](_0x2e8ea8(0x14a))[_0x2e8ea8(0x19c)],0xa),_0x361dfd=_0x331f81[_0x2e8ea8(0x8b)](_0x2e8ea8(0xf0))[_0x2e8ea8(0x19c)]['trim']();_0x331f81['remove']();if(_0xa81674)_0xa81674(_0x5c4340,_0x1ad7ff,_0x361dfd);},_0x331f81[_0x45384f(0x8b)]('#newProjCancelBtn')[_0x45384f(0xab)]=()=>{const _0x4c2a4c=_0x45384f;_0x331f81[_0x4c2a4c(0xe4)]();};}function addProject(){showNewProjectDialog((_0x4ac497,_0x1b3a4a,_0x213213)=>{const _0x55fe34=a0_0x272e;if(!Number[_0x55fe34(0xde)](_0x4ac497)||_0x4ac497<0x1)_0x4ac497=0x10;if(!Number[_0x55fe34(0xde)](_0x1b3a4a)||_0x1b3a4a<0x1)_0x1b3a4a=0x10;projects[_0x55fe34(0x114)](createProject(_0x4ac497,_0x1b3a4a,_0x213213)),activeProject=projects['length']-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x50cef6){const _0x2f3510=a0_0x1fd7e8;if(projects['length']<=0x1)return;projects[_0x2f3510(0xe5)](_0x50cef6,0x1);if(activeProject>=projects['length'])activeProject=projects[_0x2f3510(0xdc)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x100f17=a0_0x1fd7e8,_0x597e95=document[_0x100f17(0x195)](_0x100f17(0x11c)),_0x4b60f9=getCurrentProject();_0x597e95[_0x100f17(0xd9)]='';for(let _0x198555=0x0;_0x198555<_0x4b60f9[_0x100f17(0x110)]['length'];_0x198555++){const _0x198821=document[_0x100f17(0x15a)](_0x100f17(0x196));_0x198821[_0x100f17(0x92)]='frame-item'+(_0x198555===_0x4b60f9[_0x100f17(0xf1)]?'\x20active':''),_0x198821[_0x100f17(0xab)]=()=>{const _0x4ce371=_0x100f17;_0x4b60f9[_0x4ce371(0xf1)]=_0x198555,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x3e9fb3=document[_0x100f17(0x15a)](_0x100f17(0x10f));_0x3e9fb3[_0x100f17(0x92)]=_0x100f17(0x146),_0x3e9fb3[_0x100f17(0x139)]=0x20,_0x3e9fb3[_0x100f17(0x120)]=0x20;let _0x14f3a9=_0x3e9fb3[_0x100f17(0x17f)]('2d');_0x14f3a9[_0x100f17(0x19a)](0x0,0x0,0x20,0x20);for(let _0x1915ff=0x0;_0x1915ff<_0x4b60f9[_0x100f17(0x110)][_0x198555][_0x100f17(0xa2)][_0x100f17(0xdc)];_0x1915ff++){_0x14f3a9[_0x100f17(0xb7)](_0x4b60f9['frames'][_0x198555][_0x100f17(0xa2)][_0x1915ff],0x0,0x0,_0x3e9fb3[_0x100f17(0x139)],_0x3e9fb3['height']);}_0x198821[_0x100f17(0x10c)](_0x3e9fb3);const _0x32ec6c=document[_0x100f17(0x15a)](_0x100f17(0xef));_0x32ec6c[_0x100f17(0x152)]='F'+(_0x198555+0x1),_0x198821[_0x100f17(0x10c)](_0x32ec6c);const _0x1e02fa=document[_0x100f17(0x15a)](_0x100f17(0xf9));_0x1e02fa['textContent']='削除',_0x1e02fa[_0x100f17(0x92)]=_0x100f17(0xd6),_0x1e02fa[_0x100f17(0xc7)]=_0x4b60f9['frames']['length']===0x1,_0x1e02fa['onclick']=_0x15799b=>{const _0x5d5c02=_0x100f17;_0x15799b[_0x5d5c02(0x9d)](),removeFrameAt(_0x198555);},_0x198821['appendChild'](_0x1e02fa),_0x597e95[_0x100f17(0x10c)](_0x198821);}document[_0x100f17(0x195)]('frameCount')[_0x100f17(0x152)]='('+_0x4b60f9[_0x100f17(0x110)][_0x100f17(0xdc)]+_0x100f17(0xa1);}function addFrame(){const _0x33fdcc=a0_0x1fd7e8;let _0x35fb89=getCurrentProject(),_0x5ed3c3=_0x35fb89[_0x33fdcc(0x110)][_0x35fb89[_0x33fdcc(0xf1)]],_0x4aa769=_0x5ed3c3['layers'][_0x33fdcc(0xb0)](_0x30c035=>{const _0x5ed47a=_0x33fdcc;let _0x4110d4=document['createElement']('canvas');return _0x4110d4[_0x5ed47a(0x139)]=_0x30c035[_0x5ed47a(0x139)],_0x4110d4[_0x5ed47a(0x120)]=_0x30c035[_0x5ed47a(0x120)],_0x4110d4[_0x5ed47a(0x17f)]('2d')[_0x5ed47a(0xb7)](_0x30c035,0x0,0x0),_0x4110d4;}),_0x7982ff=_0x4aa769[_0x33fdcc(0xb0)](()=>[]),_0x4da1fd=_0x4aa769[_0x33fdcc(0xb0)](()=>[]),_0x4d98dc={'layers':_0x4aa769,'activeLayer':0x0,'layerHistories':_0x7982ff,'layerRedoStacks':_0x4da1fd};_0x35fb89['frames'][_0x33fdcc(0xe5)](_0x35fb89[_0x33fdcc(0xf1)]+0x1,0x0,_0x4d98dc),_0x35fb89[_0x33fdcc(0xf1)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x1b3da){const _0x2ccc9f=a0_0x1fd7e8;let _0x7f8f6d=getCurrentProject();if(_0x7f8f6d['frames'][_0x2ccc9f(0xdc)]<=0x1)return;_0x7f8f6d[_0x2ccc9f(0x110)][_0x2ccc9f(0xe5)](_0x1b3da,0x1);if(_0x7f8f6d[_0x2ccc9f(0xf1)]>=_0x7f8f6d[_0x2ccc9f(0x110)]['length'])_0x7f8f6d['activeFrame']=_0x7f8f6d['frames'][_0x2ccc9f(0xdc)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x45f1a4=a0_0x1fd7e8;return getCurrentProject()[_0x45f1a4(0x110)][getCurrentProject()[_0x45f1a4(0xf1)]];}function updateLayerUI(){const _0x549441=a0_0x1fd7e8;let {layers:_0x358092,activeLayer:_0x197572}=getCurrentFrame();document['getElementById']('layerCount')['textContent']='('+_0x358092[_0x549441(0xdc)]+'枚)';const _0x5cd51b=document['getElementById'](_0x549441(0x156));_0x5cd51b[_0x549441(0xd9)]='';for(let _0x1a880c=_0x358092['length']-0x1;_0x1a880c>=0x0;_0x1a880c--){const _0x33f13f=document[_0x549441(0x15a)](_0x549441(0x196));_0x33f13f[_0x549441(0x92)]=_0x549441(0x8d)+(_0x1a880c===_0x197572?'\x20active':''),_0x33f13f[_0x549441(0xab)]=_0x220cba=>{const _0x4dee4a=_0x549441;if(_0x220cba[_0x4dee4a(0xeb)][_0x4dee4a(0x17b)][_0x4dee4a(0x131)](_0x4dee4a(0x13e)))return;getCurrentFrame()['activeLayer']=_0x1a880c,updateLayerUI(),redrawAll();};const _0xf430a=document[_0x549441(0x15a)](_0x549441(0x10f));_0xf430a['className']=_0x549441(0xff),_0xf430a['width']=0x20,_0xf430a[_0x549441(0x120)]=0x20;let _0x323b8e=_0xf430a[_0x549441(0x17f)]('2d');_0x323b8e['clearRect'](0x0,0x0,0x20,0x20),_0x323b8e['drawImage'](_0x358092[_0x1a880c],0x0,0x0,_0xf430a[_0x549441(0x139)],_0xf430a[_0x549441(0x120)]),_0x33f13f[_0x549441(0x10c)](_0xf430a);const _0x3a3036=document[_0x549441(0x15a)](_0x549441(0xef));_0x3a3036[_0x549441(0x152)]='レイヤー'+(_0x1a880c+0x1),_0x33f13f[_0x549441(0x10c)](_0x3a3036);const _0x13c534=document['createElement']('button');_0x13c534['textContent']='↑',_0x13c534[_0x549441(0x92)]=_0x549441(0x13e),_0x13c534[_0x549441(0xa7)]=_0x549441(0xdb),_0x13c534[_0x549441(0xc7)]=_0x1a880c===_0x358092[_0x549441(0xdc)]-0x1,_0x13c534[_0x549441(0xab)]=_0x3977c7=>{const _0x56c062=_0x549441;_0x3977c7['stopPropagation'](),_0x1a880c<_0x358092[_0x56c062(0xdc)]-0x1&&swapLayer(_0x1a880c,_0x1a880c+0x1);},_0x33f13f[_0x549441(0x10c)](_0x13c534);const _0x597501=document[_0x549441(0x15a)](_0x549441(0xf9));_0x597501['textContent']='↓',_0x597501[_0x549441(0x92)]=_0x549441(0x13e),_0x597501[_0x549441(0xa7)]='下に移動',_0x597501[_0x549441(0xc7)]=_0x1a880c===0x0,_0x597501[_0x549441(0xab)]=_0x179535=>{_0x179535['stopPropagation'](),_0x1a880c>0x0&&swapLayer(_0x1a880c,_0x1a880c-0x1);},_0x33f13f['appendChild'](_0x597501);const _0x170ee6=document[_0x549441(0x15a)]('button');_0x170ee6['textContent']='削除',_0x170ee6[_0x549441(0x92)]='layer-btn',_0x170ee6['title']=_0x549441(0x199),_0x170ee6[_0x549441(0xc7)]=_0x358092[_0x549441(0xdc)]===0x1,_0x170ee6['onclick']=_0x4197ee=>{_0x4197ee['stopPropagation'](),removeLayerAt(_0x1a880c);},_0x33f13f['appendChild'](_0x170ee6),_0x5cd51b['appendChild'](_0x33f13f);}}function swapLayer(_0x62d355,_0x53bb0d){const _0x5e3a65=a0_0x1fd7e8;let _0x39a264=getCurrentFrame();[_0x39a264['layers'][_0x62d355],_0x39a264[_0x5e3a65(0xa2)][_0x53bb0d]]=[_0x39a264['layers'][_0x53bb0d],_0x39a264[_0x5e3a65(0xa2)][_0x62d355]],[_0x39a264[_0x5e3a65(0x188)][_0x62d355],_0x39a264[_0x5e3a65(0x188)][_0x53bb0d]]=[_0x39a264[_0x5e3a65(0x188)][_0x53bb0d],_0x39a264[_0x5e3a65(0x188)][_0x62d355]],[_0x39a264[_0x5e3a65(0x164)][_0x62d355],_0x39a264[_0x5e3a65(0x164)][_0x53bb0d]]=[_0x39a264[_0x5e3a65(0x164)][_0x53bb0d],_0x39a264[_0x5e3a65(0x164)][_0x62d355]];if(_0x39a264[_0x5e3a65(0xd5)]===_0x62d355)_0x39a264[_0x5e3a65(0xd5)]=_0x53bb0d;else{if(_0x39a264[_0x5e3a65(0xd5)]===_0x53bb0d)_0x39a264[_0x5e3a65(0xd5)]=_0x62d355;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x2085e9){const _0x2a8fa2=a0_0x1fd7e8;let _0x56c24d=getCurrentFrame();if(_0x56c24d['layers'][_0x2a8fa2(0xdc)]<=0x1)return;_0x56c24d[_0x2a8fa2(0xa2)][_0x2a8fa2(0xe5)](_0x2085e9,0x1),_0x56c24d[_0x2a8fa2(0x188)][_0x2a8fa2(0xe5)](_0x2085e9,0x1),_0x56c24d['layerRedoStacks'][_0x2a8fa2(0xe5)](_0x2085e9,0x1);if(_0x56c24d[_0x2a8fa2(0xd5)]>=_0x56c24d[_0x2a8fa2(0xa2)]['length'])_0x56c24d[_0x2a8fa2(0xd5)]=_0x56c24d[_0x2a8fa2(0xa2)][_0x2a8fa2(0xdc)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x56b26b=a0_0x1fd7e8;let _0x181a5e=getCurrentProject(),_0x3bc7db=getCurrentFrame(),_0x12fa1a=document['createElement'](_0x56b26b(0x10f));_0x12fa1a[_0x56b26b(0x139)]=_0x181a5e[_0x56b26b(0x139)]*cellSize,_0x12fa1a[_0x56b26b(0x120)]=_0x181a5e[_0x56b26b(0x120)]*cellSize,_0x3bc7db[_0x56b26b(0xa2)][_0x56b26b(0x114)](_0x12fa1a),_0x3bc7db['layerHistories']['push']([]),_0x3bc7db['layerRedoStacks'][_0x56b26b(0x114)]([]),_0x3bc7db['activeLayer']=_0x3bc7db[_0x56b26b(0xa2)][_0x56b26b(0xdc)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x4134a7=a0_0x1fd7e8;let _0x5afb6a=getCurrentFrame();if(_0x5afb6a[_0x4134a7(0xa2)][_0x4134a7(0xdc)]<=0x1)return;_0x5afb6a[_0x4134a7(0xa2)][_0x4134a7(0xe5)](_0x5afb6a['activeLayer'],0x1),_0x5afb6a['layerHistories']['splice'](_0x5afb6a[_0x4134a7(0xd5)],0x1),_0x5afb6a[_0x4134a7(0x164)][_0x4134a7(0xe5)](_0x5afb6a[_0x4134a7(0xd5)],0x1),_0x5afb6a[_0x4134a7(0xd5)]=Math[_0x4134a7(0xce)](0x0,_0x5afb6a[_0x4134a7(0xd5)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x5ed03d){const _0x20a5f7=a0_0x1fd7e8;getCurrentFrame()[_0x20a5f7(0xd5)]=parseInt(_0x5ed03d),updateLayerUI();}let PALETTE_COLORS=[a0_0x1fd7e8(0xdf),a0_0x1fd7e8(0x17a),a0_0x1fd7e8(0x181),a0_0x1fd7e8(0x160),a0_0x1fd7e8(0x125),a0_0x1fd7e8(0xb8),a0_0x1fd7e8(0x17e),a0_0x1fd7e8(0xf5),a0_0x1fd7e8(0x14e),a0_0x1fd7e8(0x128),a0_0x1fd7e8(0x10a),a0_0x1fd7e8(0x12e),a0_0x1fd7e8(0xea),a0_0x1fd7e8(0xcb),a0_0x1fd7e8(0x154),a0_0x1fd7e8(0xe6),a0_0x1fd7e8(0x15f),a0_0x1fd7e8(0xf7),'#800080',a0_0x1fd7e8(0x9f),a0_0x1fd7e8(0x16b)],currentAlpha=0x1;function setTool(_0x5107d0){const _0x5830b0=a0_0x1fd7e8;currentTool=_0x5107d0,document[_0x5830b0(0x17c)](_0x5830b0(0x135))[_0x5830b0(0x137)](_0x4b36d7=>{const _0x5502a2=_0x5830b0;_0x4b36d7['classList'][_0x5502a2(0x12d)](_0x5502a2(0x165),_0x4b36d7['dataset'][_0x5502a2(0x1a4)]===_0x5107d0);}),document[_0x5830b0(0x17c)](_0x5830b0(0xec))['forEach'](_0x10ccf1=>{const _0x194c39=_0x5830b0;_0x10ccf1[_0x194c39(0x17b)][_0x194c39(0x12d)](_0x194c39(0x165),_0x10ccf1[_0x194c39(0x8a)][_0x194c39(0x1a4)]===_0x5107d0);});}function setPenSize(_0x491322){const _0x497c3f=a0_0x1fd7e8;penSize=parseInt(_0x491322)||0x1;let _0x38ce08=document[_0x497c3f(0x195)]('penSize');if(_0x38ce08)_0x38ce08['value']=penSize;let _0x5a6a83=document[_0x497c3f(0x195)](_0x497c3f(0x167));if(_0x5a6a83)_0x5a6a83[_0x497c3f(0x19c)]=penSize;}function setPenMode(_0x13f50e){const _0x42edb0=a0_0x1fd7e8;penMode=_0x13f50e;let _0x3b0eba=document[_0x42edb0(0x195)](_0x42edb0(0xbe));if(_0x3b0eba)_0x3b0eba[_0x42edb0(0x19c)]=penMode;let _0x4dd732=document[_0x42edb0(0x195)](_0x42edb0(0xc0));if(_0x4dd732)_0x4dd732[_0x42edb0(0x19c)]=penMode;}function hexToRgba(_0x1d14d1,_0x156478=0x1){const _0x42bf50=a0_0x1fd7e8;if(_0x1d14d1==='transparent'||_0x1d14d1===_0x42bf50(0x136))return[0x0,0x0,0x0,0x0];_0x1d14d1=_0x1d14d1[_0x42bf50(0x194)]('#','');if(_0x1d14d1[_0x42bf50(0xdc)]===0x3)_0x1d14d1=_0x1d14d1['split']('')[_0x42bf50(0xb0)](_0x3f83fe=>_0x3f83fe+_0x3f83fe)['join']('');let _0x382dbf=parseInt(_0x1d14d1,0x10);return[_0x382dbf>>0x10&0xff,_0x382dbf>>0x8&0xff,_0x382dbf&0xff,Math[_0x42bf50(0x172)](0xff*_0x156478)];}function fillAt(_0x5bb72f,_0x2ee86c){const _0x577181=a0_0x1fd7e8;let _0xd054e7=getCurrentProject(),_0x405d34=getCurrentFrame(),_0x20a162=_0x405d34['layers'][_0x405d34[_0x577181(0xd5)]][_0x577181(0x17f)]('2d'),_0x2f4546=_0x20a162[_0x577181(0x1a5)](0x0,0x0,_0xd054e7['width']*cellSize,_0xd054e7[_0x577181(0x120)]*cellSize),_0x2961bb=_0x5bb72f*cellSize,_0x216f1a=_0x2ee86c*cellSize,_0x404ba9=getPixel(_0x2f4546,_0x2961bb,_0x216f1a),_0x1b6488=currentColor===_0x577181(0xdf)||currentColor==='#00000000'||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x404ba9,_0x1b6488))return;let _0x2d8911=[[_0x5bb72f,_0x2ee86c]],_0x1b0673=new Set();while(_0x2d8911['length']){let [_0x410be1,_0x53581a]=_0x2d8911[_0x577181(0x87)]();if(_0x410be1<0x0||_0x53581a<0x0||_0x410be1>=_0xd054e7['width']||_0x53581a>=_0xd054e7[_0x577181(0x120)])continue;let _0x147513=_0x410be1+','+_0x53581a;if(_0x1b0673['has'](_0x147513))continue;_0x1b0673[_0x577181(0x192)](_0x147513);let _0xff3379=_0x410be1*cellSize,_0x76dbba=_0x53581a*cellSize,_0x34ee8e=getPixel(_0x2f4546,_0xff3379,_0x76dbba);if(!colorsMatch(_0x34ee8e,_0x404ba9))continue;for(let _0x1dd117=0x0;_0x1dd117<cellSize;_0x1dd117++){for(let _0x503a11=0x0;_0x503a11<cellSize;_0x503a11++){setPixel(_0x2f4546,_0xff3379+_0x503a11,_0x76dbba+_0x1dd117,_0x1b6488);}}_0x2d8911[_0x577181(0x114)]([_0x410be1+0x1,_0x53581a]),_0x2d8911[_0x577181(0x114)]([_0x410be1-0x1,_0x53581a]),_0x2d8911[_0x577181(0x114)]([_0x410be1,_0x53581a+0x1]),_0x2d8911[_0x577181(0x114)]([_0x410be1,_0x53581a-0x1]);}_0x20a162['putImageData'](_0x2f4546,0x0,0x0),redrawAll();}function getPixel(_0x51b800,_0x4939e9,_0x2615e1){const _0x4d3474=a0_0x1fd7e8;let _0x4d25a9=(_0x2615e1*_0x51b800[_0x4d3474(0x139)]+_0x4939e9)*0x4;return[_0x51b800[_0x4d3474(0x159)][_0x4d25a9],_0x51b800['data'][_0x4d25a9+0x1],_0x51b800[_0x4d3474(0x159)][_0x4d25a9+0x2],_0x51b800['data'][_0x4d25a9+0x3]];}function setPixel(_0x5ad229,_0x1128a9,_0x32b4b4,_0x458797){const _0x3059ca=a0_0x1fd7e8;let _0x370c25=(_0x32b4b4*_0x5ad229[_0x3059ca(0x139)]+_0x1128a9)*0x4;_0x5ad229[_0x3059ca(0x159)][_0x370c25]=_0x458797[0x0],_0x5ad229[_0x3059ca(0x159)][_0x370c25+0x1]=_0x458797[0x1],_0x5ad229[_0x3059ca(0x159)][_0x370c25+0x2]=_0x458797[0x2],_0x5ad229[_0x3059ca(0x159)][_0x370c25+0x3]=_0x458797[0x3];}function colorsMatch(_0x31b823,_0x29c632){return _0x31b823[0x0]===_0x29c632[0x0]&&_0x31b823[0x1]===_0x29c632[0x1]&&_0x31b823[0x2]===_0x29c632[0x2]&&_0x31b823[0x3]===_0x29c632[0x3];}function handleMouseDown(_0x47ef55){const _0x2eae0d=a0_0x1fd7e8;isDrawing=!![];const _0x12d22f=canvas[_0x2eae0d(0x88)](),_0x3dc5a6=canvas['width']/_0x12d22f[_0x2eae0d(0x139)],_0x3ce9d2=canvas['height']/_0x12d22f[_0x2eae0d(0x120)],_0x3136f8=Math['floor']((_0x47ef55['clientX']-_0x12d22f[_0x2eae0d(0x197)])*_0x3dc5a6/cellSize),_0x11aaea=Math['floor']((_0x47ef55[_0x2eae0d(0x183)]-_0x12d22f[_0x2eae0d(0x149)])*_0x3ce9d2/cellSize);currentTool===_0x2eae0d(0x147)?(fillAt(_0x3136f8,_0x11aaea),saveHistory(),isDrawing=![]):drawDotXY(_0x3136f8,_0x11aaea);}function handleMouseMove(_0x5e3072){const _0xb7e7c7=a0_0x1fd7e8;if(!isDrawing)return;const _0x37d14b=canvas[_0xb7e7c7(0x88)](),_0x55aa09=canvas[_0xb7e7c7(0x139)]/_0x37d14b['width'],_0x2c2644=canvas['height']/_0x37d14b[_0xb7e7c7(0x120)],_0x2fc215=Math[_0xb7e7c7(0x145)]((_0x5e3072[_0xb7e7c7(0xf8)]-_0x37d14b['left'])*_0x55aa09/cellSize),_0x3b7a35=Math[_0xb7e7c7(0x145)]((_0x5e3072[_0xb7e7c7(0x183)]-_0x37d14b[_0xb7e7c7(0x149)])*_0x2c2644/cellSize);drawDotXY(_0x2fc215,_0x3b7a35);}function handleMouseUp(_0x86a723){isDrawing&&saveHistory(),isDrawing=![];}let lastTouch=null;function getTouchPos(_0x19af24){const _0xdd24d0=a0_0x1fd7e8,_0x3013f5=canvas['getBoundingClientRect']();let _0x133759=_0x19af24[_0xdd24d0(0x127)]&&_0x19af24[_0xdd24d0(0x127)][0x0]?_0x19af24[_0xdd24d0(0x127)][0x0]:_0x19af24[_0xdd24d0(0x185)][0x0];const _0x27d0a4=canvas[_0xdd24d0(0x139)]/_0x3013f5['width'],_0x439e11=canvas['height']/_0x3013f5['height'];return{'x':Math[_0xdd24d0(0x145)]((_0x133759['clientX']-_0x3013f5['left'])*_0x27d0a4/cellSize),'y':Math[_0xdd24d0(0x145)]((_0x133759[_0xdd24d0(0x183)]-_0x3013f5[_0xdd24d0(0x149)])*_0x439e11/cellSize)};}function handleTouchStart(_0x55b395){const _0x576db0=a0_0x1fd7e8;if(_0x55b395[_0x576db0(0x127)][_0x576db0(0xdc)]>0x1)return;_0x55b395[_0x576db0(0x111)](),isDrawing=!![];let _0x1cfd8a=getTouchPos(_0x55b395);lastTouch=_0x1cfd8a,currentTool===_0x576db0(0x147)?(fillAt(_0x1cfd8a['x'],_0x1cfd8a['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x1cfd8a['x'],_0x1cfd8a['y']);}function handleTouchMove(_0x2b1efe){const _0x511ce8=a0_0x1fd7e8;if(!isDrawing)return;if(_0x2b1efe[_0x511ce8(0x127)][_0x511ce8(0xdc)]>0x1)return;_0x2b1efe['preventDefault']();let _0xd91ac0=getTouchPos(_0x2b1efe);if(lastTouch){let _0x406c29=_0xd91ac0['x']-lastTouch['x'],_0x476d2e=_0xd91ac0['y']-lastTouch['y'],_0x52c029=Math['max'](Math[_0x511ce8(0xd1)](_0x406c29),Math[_0x511ce8(0xd1)](_0x476d2e));for(let _0xf3cb70=0x1;_0xf3cb70<=_0x52c029;_0xf3cb70++){let _0x6c2b80=Math['round'](lastTouch['x']+_0x406c29*_0xf3cb70/_0x52c029),_0x252a1c=Math[_0x511ce8(0x172)](lastTouch['y']+_0x476d2e*_0xf3cb70/_0x52c029);drawDotTouch(_0x6c2b80,_0x252a1c);}}else drawDotTouch(_0xd91ac0['x'],_0xd91ac0['y']);lastTouch=_0xd91ac0;}function handleTouchEnd(_0x4485e9){isDrawing&&saveHistory(),isDrawing=![],lastTouch=null;}function drawDotXY(_0x1f7873,_0xd11a8e){const _0x2053fa=a0_0x1fd7e8;let _0x3dc207=getCurrentProject(),_0x5c6913=getCurrentFrame();if(!_0x5c6913||!_0x3dc207)return;if(typeof _0x1f7873!==_0x2053fa(0xe1)||typeof _0xd11a8e!==_0x2053fa(0xe1)||_0x1f7873<0x0||_0xd11a8e<0x0||!Number[_0x2053fa(0xde)](_0x3dc207[_0x2053fa(0x139)])||!Number[_0x2053fa(0xde)](_0x3dc207['height'])||_0x1f7873>=_0x3dc207[_0x2053fa(0x139)]||_0xd11a8e>=_0x3dc207[_0x2053fa(0x120)]||!Array[_0x2053fa(0xd7)](_0x5c6913[_0x2053fa(0xa2)])||typeof _0x5c6913[_0x2053fa(0xd5)]!==_0x2053fa(0xe1)||!_0x5c6913[_0x2053fa(0xa2)][_0x5c6913[_0x2053fa(0xd5)]])return;let _0x455d4f=_0x5c6913[_0x2053fa(0xa2)][_0x5c6913[_0x2053fa(0xd5)]][_0x2053fa(0x17f)]('2d');if(!_0x455d4f)return;if(currentTool===_0x2053fa(0xba)||currentColor===_0x2053fa(0xdf)||currentColor===_0x2053fa(0x136)||currentAlpha===0x0)drawPenShape(_0x455d4f,_0x1f7873,_0xd11a8e,_0x2053fa(0x136),!![]);else{let _0x2c20e7=hexToRgba(currentColor,currentAlpha);_0x455d4f[_0x2053fa(0x130)](),_0x455d4f[_0x2053fa(0x173)]=_0x2c20e7[0x3]/0xff,drawPenShape(_0x455d4f,_0x1f7873,_0xd11a8e,_0x2053fa(0x129)+_0x2c20e7[0x0]+','+_0x2c20e7[0x1]+','+_0x2c20e7[0x2]+','+_0x2c20e7[0x3]/0xff+')',![]),_0x455d4f[_0x2053fa(0x163)]();}redrawAll();}function drawPenShape(_0x3e87f2,_0xb5493,_0x1d8198,_0xfb572e,_0x2221ab){const _0x3d2c07=a0_0x1fd7e8,_0x1b53c8=_0xb5493*cellSize,_0x5c8987=_0x1d8198*cellSize,_0x1b9ad4=penSize*cellSize;_0x2221ab?(_0x3e87f2[_0x3d2c07(0x130)](),_0x3e87f2[_0x3d2c07(0x11f)]='destination-out',penMode==='circle'?(_0x3e87f2[_0x3d2c07(0x107)](),_0x3e87f2[_0x3d2c07(0x193)](_0x1b53c8+cellSize/0x2,_0x5c8987+cellSize/0x2,_0x1b9ad4/0x2,0x0,Math['PI']*0x2),_0x3e87f2[_0x3d2c07(0x147)]()):_0x3e87f2['clearRect'](_0x1b53c8-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x5c8987-Math[_0x3d2c07(0x145)]((penSize-0x1)/0x2)*cellSize,_0x1b9ad4,_0x1b9ad4),_0x3e87f2[_0x3d2c07(0x163)]()):(_0x3e87f2[_0x3d2c07(0x130)](),_0x3e87f2[_0x3d2c07(0x177)]=_0xfb572e,penMode===_0x3d2c07(0x16c)?(_0x3e87f2[_0x3d2c07(0x107)](),_0x3e87f2[_0x3d2c07(0x193)](_0x1b53c8+cellSize/0x2,_0x5c8987+cellSize/0x2,_0x1b9ad4/0x2,0x0,Math['PI']*0x2),_0x3e87f2[_0x3d2c07(0x147)]()):_0x3e87f2[_0x3d2c07(0x91)](_0x1b53c8-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x5c8987-Math[_0x3d2c07(0x145)]((penSize-0x1)/0x2)*cellSize,_0x1b9ad4,_0x1b9ad4),_0x3e87f2[_0x3d2c07(0x163)]());}function drawDotTouch(_0x1085c0,_0x4906b4){const _0x2ed76f=a0_0x1fd7e8;let _0xd87658=getCurrentProject(),_0x21ae76=getCurrentFrame();if(_0x1085c0<0x0||_0x4906b4<0x0||_0x1085c0>=_0xd87658['width']||_0x4906b4>=_0xd87658[_0x2ed76f(0x120)])return;let _0x636c37=_0x21ae76[_0x2ed76f(0xa2)][_0x21ae76[_0x2ed76f(0xd5)]][_0x2ed76f(0x17f)]('2d');if(currentTool===_0x2ed76f(0xba)||currentColor===_0x2ed76f(0xdf)||currentColor===_0x2ed76f(0x136)||currentAlpha===0x0)drawPenShape(_0x636c37,_0x1085c0,_0x4906b4,'#00000000',!![]);else{let _0x36315b=hexToRgba(currentColor,currentAlpha);_0x636c37[_0x2ed76f(0x130)](),_0x636c37['globalAlpha']=_0x36315b[0x3]/0xff,drawPenShape(_0x636c37,_0x1085c0,_0x4906b4,_0x2ed76f(0x129)+_0x36315b[0x0]+','+_0x36315b[0x1]+','+_0x36315b[0x2]+','+_0x36315b[0x3]/0xff+')',![]),_0x636c37['restore']();}redrawAll();}function a0_0x272e(_0x43a476,_0x458e9b){const _0x41461f=a0_0x3f2b();return a0_0x272e=function(_0x38b7be,_0x4d3ef2){_0x38b7be=_0x38b7be-0x86;let _0x3f2bd1=_0x41461f[_0x38b7be];return _0x3f2bd1;},a0_0x272e(_0x43a476,_0x458e9b);}window[a0_0x1fd7e8(0x184)]=()=>{const _0x5ac9ef=a0_0x1fd7e8;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool('pen'),createPalette(),document[_0x5ac9ef(0x195)]('penSize')[_0x5ac9ef(0x19c)]=penSize,document[_0x5ac9ef(0x195)](_0x5ac9ef(0xbe))[_0x5ac9ef(0x19c)]=penMode,canvas['onmousemove']=handleMouseMove,canvas[_0x5ac9ef(0x1a6)]=handleMouseUp,canvas[_0x5ac9ef(0xc6)]=handleMouseUp,canvas['ontouchstart']=handleTouchStart,canvas[_0x5ac9ef(0x16a)]=handleTouchMove,canvas[_0x5ac9ef(0xe2)]=handleTouchEnd,canvas[_0x5ac9ef(0x175)]=handleTouchEnd,canvas['addEventListener'](_0x5ac9ef(0xbd),handleTouchStart,{'passive':![]}),canvas[_0x5ac9ef(0x118)]('touchmove',handleTouchMove,{'passive':![]}),canvas[_0x5ac9ef(0x118)]('touchend',handleTouchEnd,{'passive':![]}),canvas[_0x5ac9ef(0x118)](_0x5ac9ef(0x119),handleTouchEnd,{'passive':![]}),idbGet(_0x5ac9ef(0x1ab))&&loadProjectFromIDB();};function drawGrid(_0x160f5c,_0x14e52a){const _0x2f78bb=a0_0x1fd7e8;ctx['save'](),ctx[_0x2f78bb(0xa5)]=_0x2f78bb(0xfd);for(let _0x2b8a47=0x0;_0x2b8a47<=_0x160f5c;_0x2b8a47++){ctx[_0x2f78bb(0x107)](),ctx[_0x2f78bb(0xda)](_0x2b8a47*cellSize,0x0),ctx[_0x2f78bb(0x153)](_0x2b8a47*cellSize,_0x14e52a*cellSize),ctx[_0x2f78bb(0x10e)]();}for(let _0x194117=0x0;_0x194117<=_0x14e52a;_0x194117++){ctx[_0x2f78bb(0x107)](),ctx[_0x2f78bb(0xda)](0x0,_0x194117*cellSize),ctx['lineTo'](_0x160f5c*cellSize,_0x194117*cellSize),ctx[_0x2f78bb(0x10e)]();}ctx[_0x2f78bb(0x163)]();}function a0_0x3f2b(){const _0x1c8b30=['alignItems','frameList','text','156bRAqvj','globalCompositeOperation','height','flex','webp','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','apply','#cccccc','GIF','touches','#00ff00','rgba(','15993ODhmTe','blur','369204JxQBTM','toggle','#0000ff','toString','save','contains','selected','name','DOMContentLoaded','.tool-btn','#00000000','forEach','shift','width','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>幅:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>高さ:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>作成</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>キャンセル</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','rgba(0,0,0,0.3)','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>ペン</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','100vh','layer-btn','log','80px','sidebar-open','\x20selected','removeChild','9NQXDFz','floor','frame-thumb','fill','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20','top','#newProjH','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>塗りつぶし</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20太さ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','revokeObjectURL','createObjectURL','#ffff00','src','boolean','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','textContent','lineTo','#808000','removeEventListener','layerList','render','new-project-dialog','data','createElement','error','min','image/png','>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22','#008080','#888888','1484380TMLzrK','IndexedDBからプロジェクトを読み込んだチュー！','restore','layerRedoStacks','active','configure','palette-penSize','clear','select','ontouchmove','#ff69b4','circle','body','search','image/apng','projectList','focus','round','globalAlpha','1446739SSXBMO','ontouchcancel','constructor','fillStyle','#palette-alphaValue','project-name','#000000','classList','querySelectorAll','.webm','#ff0000','getContext','プロジェクトをIndexedDBに保存したチュー！','#444444','filter','clientY','onload','changedTouches','click','innerWidth','layerHistories','(((.+)+)+)+$','lib/gif.worker.js','palette-toolbar','result','color','#newProjOkBtn','nezumi-sketch.msketch','nezumi-animation.gif','.gif','add','arc','replace','getElementById','div','left','.toggle-btn','このレイヤーを削除','clearRect','.section-content','value','.section.collapsible\x20.section-content','activeProject','menu-toggle-btn','jpg','stringify','VideoEncoder','style','tool','getImageData','onmouseup','#palette-penMode','objectStore','palette-add-btn','get','nezumi-projects','Enter','81194GEXMgC','pop','getBoundingClientRect','projects','dataset','querySelector','createObjectStore','layer-item','pen','touchAction','justifyContent','fillRect','className','nezumi-sketch-db','1285452UiZmYB','application/json','open','background','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','\x20active','onerror','ontouchstart','fixed','stopPropagation','readonly','#c0c0c0','>丸ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20透明度:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','コマ)','layers','delete','oncomplete','strokeStyle','overflow','title','.palette-color','1036245UDUqRp','palette-alphaValue','onclick','display','then','anonymous','palette-color','map','encode','231aKUToE','transaction','put','onblur','パレットに色を追加','drawImage','#ffffff','.section.collapsible\x20.toggle-btn','eraser','project-btn','replaceWith','touchstart','penMode','project-name-edit','palette-penMode','byteLength','8xXXYUZ','vp8','menu-toggle-btn-close','#palette-penSize','onmouseleave','disabled','href','input','toDataURL','#800000','parse','buffer','max','onsuccess','alphaValue','abs','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','palette-alphaSlider','trim','activeLayer','frame-btn','isArray','touchend','innerHTML','moveTo','上に移動','length','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>新しい画像のサイズ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>名前:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22画像','isFinite','transparent','.apng','number','ontouchend','nezumi-sketch-save','remove','splice','#008000','nezumi-animation','readwrite','alphaSlider','#ff00ff','target','#palette-toolbar\x20.tool-btn','resize','key','span','#newProjName','activeFrame','sidebar','onkeydown','download','#ffa500','finished','#000080','clientX','button','100vw','close','colorPicker','#ccc','square','layer-thumb','none','8bsVugp','all','parentNode','main-container','oninput','<span\x20style=\x22font-size:13px;color:#888;\x22>透明</span>','beginPath','onmousedown','video/webm','#00ffff','jpeg','appendChild','touchmove','stroke','canvas','frames','preventDefault','block','クリックで名前を編集','push','color-palette','UPNG','type','addEventListener','touchcancel','readAsText'];a0_0x3f2b=function(){return _0x1c8b30;};return a0_0x3f2b();}function redrawAll(){const _0x3d5def=a0_0x1fd7e8;let _0x8f9957=getCurrentProject(),_0x1c3931=getCurrentFrame();canvas[_0x3d5def(0x139)]=_0x8f9957['width']*cellSize,canvas[_0x3d5def(0x120)]=_0x8f9957['height']*cellSize,ctx[_0x3d5def(0x19a)](0x0,0x0,canvas[_0x3d5def(0x139)],canvas['height']);for(let _0x1fa940=0x0;_0x1fa940<_0x1c3931[_0x3d5def(0xa2)][_0x3d5def(0xdc)];_0x1fa940++){ctx[_0x3d5def(0xb7)](_0x1c3931[_0x3d5def(0xa2)][_0x1fa940],0x0,0x0);}drawGrid(_0x8f9957[_0x3d5def(0x139)],_0x8f9957[_0x3d5def(0x120)]);}function saveHistory(){const _0x314261=a0_0x1fd7e8;let _0x14b0f2=getCurrentFrame(),_0x3a4d3a=_0x14b0f2['layerHistories'][_0x14b0f2[_0x314261(0xd5)]];_0x3a4d3a[_0x314261(0x114)](_0x14b0f2[_0x314261(0xa2)][_0x14b0f2[_0x314261(0xd5)]][_0x314261(0xca)]());if(_0x3a4d3a[_0x314261(0xdc)]>0x32)_0x3a4d3a[_0x314261(0x138)]();_0x14b0f2[_0x314261(0x164)][_0x14b0f2[_0x314261(0xd5)]]=[];}function undo(){const _0x25eb30=a0_0x1fd7e8;let _0x412e62=getCurrentFrame(),_0x415b86=_0x412e62[_0x25eb30(0x188)][_0x412e62[_0x25eb30(0xd5)]],_0x4580e5=_0x412e62[_0x25eb30(0x164)][_0x412e62[_0x25eb30(0xd5)]];if(!_0x415b86||_0x415b86[_0x25eb30(0xdc)]<0x2)return;_0x4580e5[_0x25eb30(0x114)](_0x415b86[_0x25eb30(0x87)]());let _0x428be8=new Image();_0x428be8['onload']=()=>{const _0x42ba0b=_0x25eb30;let _0xc96e9a=_0x412e62[_0x42ba0b(0xa2)][_0x412e62['activeLayer']][_0x42ba0b(0x17f)]('2d');_0xc96e9a[_0x42ba0b(0x19a)](0x0,0x0,_0x412e62[_0x42ba0b(0xa2)][_0x412e62[_0x42ba0b(0xd5)]][_0x42ba0b(0x139)],_0x412e62[_0x42ba0b(0xa2)][_0x412e62[_0x42ba0b(0xd5)]]['height']),_0xc96e9a['drawImage'](_0x428be8,0x0,0x0),redrawAll();},_0x428be8['src']=_0x415b86[_0x415b86[_0x25eb30(0xdc)]-0x1];}function redo(){const _0x3c93e7=a0_0x1fd7e8;let _0x49a2dc=getCurrentFrame(),_0x3c49eb=_0x49a2dc['layerHistories'][_0x49a2dc[_0x3c93e7(0xd5)]],_0x48b1e1=_0x49a2dc['layerRedoStacks'][_0x49a2dc['activeLayer']];if(!_0x48b1e1||_0x48b1e1[_0x3c93e7(0xdc)]===0x0)return;let _0x5e7e4e=_0x48b1e1[_0x3c93e7(0x87)]();_0x3c49eb['push'](_0x5e7e4e);let _0x512d07=new Image();_0x512d07[_0x3c93e7(0x184)]=()=>{const _0x2d12d3=_0x3c93e7;let _0x15349d=_0x49a2dc[_0x2d12d3(0xa2)][_0x49a2dc[_0x2d12d3(0xd5)]]['getContext']('2d');_0x15349d[_0x2d12d3(0x19a)](0x0,0x0,_0x49a2dc['layers'][_0x49a2dc[_0x2d12d3(0xd5)]][_0x2d12d3(0x139)],_0x49a2dc[_0x2d12d3(0xa2)][_0x49a2dc[_0x2d12d3(0xd5)]]['height']),_0x15349d[_0x2d12d3(0xb7)](_0x512d07,0x0,0x0),redrawAll();},_0x512d07[_0x3c93e7(0x14f)]=_0x5e7e4e;}function exportImage(_0x43028c){const _0x30c4de=a0_0x1fd7e8;let _0x573d0a=getCurrentProject(),_0x4e6bcd=_0x573d0a['frames'],_0x366e4b=_0x43028c===_0x30c4de(0x1a0)||_0x43028c==='jpeg'?'image/jpeg':'image/'+_0x43028c,_0x46527c=_0x4e6bcd[_0x30c4de(0xdc)]>0x1,_0x1f8c60=(_0x573d0a['name']||'nezumi-drawing')['replace'](/[\\/:*?"<>|]/g,'_');if(!_0x46527c){let _0x3e9c66=document[_0x30c4de(0x15a)](_0x30c4de(0x10f));_0x3e9c66['width']=_0x573d0a[_0x30c4de(0x139)]*cellSize,_0x3e9c66[_0x30c4de(0x120)]=_0x573d0a[_0x30c4de(0x120)]*cellSize;let _0x43c7e1=_0x3e9c66[_0x30c4de(0x17f)]('2d'),_0x2913f6=getCurrentFrame();for(let _0x554ee5=0x0;_0x554ee5<_0x2913f6['layers']['length'];_0x554ee5++){_0x43c7e1[_0x30c4de(0xb7)](_0x2913f6['layers'][_0x554ee5],0x0,0x0);}let _0x2fb816=document[_0x30c4de(0x15a)]('a');_0x2fb816['download']=_0x1f8c60+'.'+_0x43028c,_0x43028c===_0x30c4de(0x1a0)||_0x43028c===_0x30c4de(0x10b)?_0x2fb816[_0x30c4de(0xc8)]=_0x3e9c66[_0x30c4de(0xca)](_0x366e4b,0.92):_0x2fb816[_0x30c4de(0xc8)]=_0x3e9c66[_0x30c4de(0xca)](_0x366e4b),_0x2fb816['click']();}else{if(_0x43028c===_0x30c4de(0x122)&&typeof window['WebCodecs']!=='undefined')exportWebpAnimation(_0x4e6bcd,_0x573d0a['width']*cellSize,_0x573d0a['height']*cellSize,_0x1f8c60);else for(let _0x81058a=0x0;_0x81058a<_0x4e6bcd['length'];_0x81058a++){let _0x5523cd=document[_0x30c4de(0x15a)](_0x30c4de(0x10f));_0x5523cd[_0x30c4de(0x139)]=_0x573d0a[_0x30c4de(0x139)]*cellSize,_0x5523cd[_0x30c4de(0x120)]=_0x573d0a[_0x30c4de(0x120)]*cellSize;let _0x12f411=_0x5523cd[_0x30c4de(0x17f)]('2d'),_0xeb4492=_0x4e6bcd[_0x81058a];for(let _0x1169a8=0x0;_0x1169a8<_0xeb4492[_0x30c4de(0xa2)]['length'];_0x1169a8++){_0x12f411[_0x30c4de(0xb7)](_0xeb4492[_0x30c4de(0xa2)][_0x1169a8],0x0,0x0);}let _0xee62d=document['createElement']('a');_0xee62d['download']=_0x1f8c60+'-f'+(_0x81058a+0x1)+'.'+_0x43028c,_0x43028c===_0x30c4de(0x1a0)||_0x43028c===_0x30c4de(0x10b)?_0xee62d['href']=_0x5523cd['toDataURL'](_0x366e4b,0.92):_0xee62d['href']=_0x5523cd[_0x30c4de(0xca)](_0x366e4b),setTimeout(()=>_0xee62d['click'](),_0x81058a*0x64);}}}async function exportWebpAnimation(_0x2d2ca5,_0x241d7e,_0xb1be76,_0x1efd5f='nezumi-animation'){const _0x14ab55=a0_0x1fd7e8;if(!window['WebCodecs']||!window[_0x14ab55(0x1a2)]){alert('このブラウザはWebCodecsによるWEBPアニメーションに対応していません。');return;}const _0x3943cb=[],_0x11a6bd=new VideoEncoder({'output':_0x35a739=>_0x3943cb[_0x14ab55(0x114)](_0x35a739),'error':_0x3647c0=>console[_0x14ab55(0x15b)](_0x3647c0)});_0x11a6bd[_0x14ab55(0x166)]({'codec':_0x14ab55(0xc3),'width':_0x241d7e,'height':_0xb1be76,'framerate':0x5});for(let _0x1a384b=0x0;_0x1a384b<_0x2d2ca5['length'];_0x1a384b++){let _0x1c32ca=document[_0x14ab55(0x15a)](_0x14ab55(0x10f));_0x1c32ca[_0x14ab55(0x139)]=_0x241d7e,_0x1c32ca[_0x14ab55(0x120)]=_0xb1be76;let _0x527d3a=_0x1c32ca[_0x14ab55(0x17f)]('2d'),_0x2bf837=_0x2d2ca5[_0x1a384b];for(let _0x4c3049=0x0;_0x4c3049<_0x2bf837[_0x14ab55(0xa2)][_0x14ab55(0xdc)];_0x4c3049++){_0x527d3a['drawImage'](_0x2bf837[_0x14ab55(0xa2)][_0x4c3049],0x0,0x0);}let _0xf811be=await createImageBitmap(_0x1c32ca);_0x11a6bd['encode'](_0xf811be,{'keyFrame':!![],'duration':0xc8}),_0xf811be['close']();}await _0x11a6bd['flush'](),_0x11a6bd[_0x14ab55(0xfb)]();const _0x5cfa72=new Blob(_0x3943cb[_0x14ab55(0xb0)](_0x3ecb00=>_0x3ecb00[_0x14ab55(0xc1)]?_0x3ecb00:_0x3ecb00['data']),{'type':_0x14ab55(0x109)}),_0x162bc3=document[_0x14ab55(0x15a)]('a');_0x162bc3[_0x14ab55(0xf4)]=_0x1efd5f+_0x14ab55(0x17d),_0x162bc3[_0x14ab55(0xc8)]=URL[_0x14ab55(0x14d)](_0x5cfa72),_0x162bc3[_0x14ab55(0x186)]();}function exportGif(){const _0x432fb9=a0_0x1fd7e8;let _0x4acc05=getCurrentProject(),_0x5a8c67=_0x4acc05['frames'],_0x1cb8d4=_0x4acc05[_0x432fb9(0x139)]*cellSize,_0x567086=_0x4acc05[_0x432fb9(0x120)]*cellSize;const _0x2f31bd=_0x5a8c67[_0x432fb9(0xb0)](_0x22f821=>{const _0x54324c=_0x432fb9;let _0x3d06d7=document[_0x54324c(0x15a)](_0x54324c(0x10f));_0x3d06d7[_0x54324c(0x139)]=_0x1cb8d4,_0x3d06d7['height']=_0x567086;let _0x1645e4=_0x3d06d7[_0x54324c(0x17f)]('2d');for(let _0x56a763=0x0;_0x56a763<_0x22f821[_0x54324c(0xa2)][_0x54324c(0xdc)];_0x56a763++){_0x1645e4['drawImage'](_0x22f821[_0x54324c(0xa2)][_0x56a763],0x0,0x0);}return _0x3d06d7['toDataURL'](_0x54324c(0x15d));});Promise[_0x432fb9(0x102)](_0x2f31bd[_0x432fb9(0xb0)](_0x4fa23a=>{return new Promise(_0x4d64ae=>{const _0x6a2610=a0_0x272e,_0x460bfc=new Image();_0x460bfc['src']=_0x4fa23a,_0x460bfc[_0x6a2610(0x184)]=()=>_0x4d64ae(_0x460bfc);});}))[_0x432fb9(0xad)](_0x1f8d28=>{const _0x488ec2=_0x432fb9,_0x89ff49=_0x1f8d28[_0x488ec2(0x182)](_0xac448d=>_0xac448d[_0x488ec2(0x139)]>0x0&&_0xac448d['height']>0x0);if(_0x89ff49['length']===0x0){alert('GIFに変換できる画像がありません。');return;}const _0x48b8ce=(_0x4acc05['name']||_0x488ec2(0xe7))['replace'](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x89ff49,0x12c,_0x48b8ce+_0x488ec2(0x191));});}function exportApng(){const _0x30e5f4=a0_0x1fd7e8;let _0x12ee19=getCurrentProject(),_0x22681b=_0x12ee19[_0x30e5f4(0x110)],_0x86e7b=_0x12ee19['width']*cellSize,_0x31b1c0=_0x12ee19[_0x30e5f4(0x120)]*cellSize;const _0x4224b1=_0x22681b['map'](_0x8b26bc=>{const _0x1d1f40=_0x30e5f4;let _0x794936=document['createElement'](_0x1d1f40(0x10f));_0x794936[_0x1d1f40(0x139)]=_0x86e7b,_0x794936['height']=_0x31b1c0;let _0x24f7c9=_0x794936['getContext']('2d');for(let _0x19ed04=0x0;_0x19ed04<_0x8b26bc[_0x1d1f40(0xa2)][_0x1d1f40(0xdc)];_0x19ed04++){_0x24f7c9[_0x1d1f40(0xb7)](_0x8b26bc[_0x1d1f40(0xa2)][_0x19ed04],0x0,0x0);}let _0x31a3f4=new Image();return _0x31a3f4['src']=_0x794936[_0x1d1f40(0xca)](_0x1d1f40(0x15d)),_0x31a3f4;}),_0x4b5715=(_0x12ee19[_0x30e5f4(0x133)]||_0x30e5f4(0xe7))[_0x30e5f4(0x194)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x4224b1,_0x86e7b,_0x31b1c0,0x12c,_0x4b5715+_0x30e5f4(0xe0));}const dbName=a0_0x1fd7e8(0x93),storeName='keyval';function openDB(){return new Promise((_0x31e0a2,_0x20fe3a)=>{const _0x4915f9=a0_0x272e,_0x461739=indexedDB[_0x4915f9(0x96)](dbName,0x1);_0x461739['onupgradeneeded']=()=>{const _0x347a84=_0x4915f9;_0x461739[_0x347a84(0x18c)][_0x347a84(0x8c)](storeName);},_0x461739[_0x4915f9(0xcf)]=()=>_0x31e0a2(_0x461739[_0x4915f9(0x18c)]),_0x461739['onerror']=()=>_0x20fe3a(_0x461739[_0x4915f9(0x15b)]);});}async function idbSet(_0x16aa80,_0x449bbd){const _0x1ed95d=await openDB();return new Promise((_0x2d5a36,_0x5b1634)=>{const _0x44d6d4=a0_0x272e,_0xaddbaa=_0x1ed95d[_0x44d6d4(0xb3)](storeName,_0x44d6d4(0xe8));_0xaddbaa['objectStore'](storeName)[_0x44d6d4(0xb4)](_0x449bbd,_0x16aa80),_0xaddbaa[_0x44d6d4(0xa4)]=()=>_0x2d5a36(),_0xaddbaa[_0x44d6d4(0x9a)]=()=>_0x5b1634(_0xaddbaa[_0x44d6d4(0x15b)]);});}async function idbGet(_0x4e9290){const _0x3019ba=await openDB();return new Promise((_0x1d210c,_0x1bd9ca)=>{const _0x169d99=a0_0x272e,_0x548afd=_0x3019ba[_0x169d99(0xb3)](storeName,_0x169d99(0x9e)),_0x57980b=_0x548afd[_0x169d99(0x1a8)](storeName)[_0x169d99(0x1aa)](_0x4e9290);_0x57980b[_0x169d99(0xcf)]=()=>_0x1d210c(_0x57980b[_0x169d99(0x18c)]),_0x57980b[_0x169d99(0x9a)]=()=>_0x1bd9ca(_0x57980b[_0x169d99(0x15b)]);});}async function idbDelete(_0x3bf31b){const _0x1f1bb1=await openDB();return new Promise((_0x36f8be,_0x37c752)=>{const _0x164599=a0_0x272e,_0x10f4be=_0x1f1bb1['transaction'](storeName,_0x164599(0xe8));_0x10f4be[_0x164599(0x1a8)](storeName)[_0x164599(0xa3)](_0x3bf31b),_0x10f4be[_0x164599(0xa4)]=()=>_0x36f8be(),_0x10f4be[_0x164599(0x9a)]=()=>_0x37c752(_0x10f4be[_0x164599(0x15b)]);});}async function idbClear(){const _0x165a40=await openDB();return new Promise((_0x3af915,_0x49f06f)=>{const _0x680acc=a0_0x272e,_0x38060f=_0x165a40[_0x680acc(0xb3)](storeName,_0x680acc(0xe8));_0x38060f[_0x680acc(0x1a8)](storeName)[_0x680acc(0x168)](),_0x38060f[_0x680acc(0xa4)]=()=>_0x3af915(),_0x38060f[_0x680acc(0x9a)]=()=>_0x49f06f(_0x38060f[_0x680acc(0x15b)]);});}function saveProjectFile(){const _0x50624e=a0_0x1fd7e8,_0x5bffb6={'projects':projects[_0x50624e(0xb0)](_0x33acdc=>({'width':_0x33acdc[_0x50624e(0x139)],'height':_0x33acdc[_0x50624e(0x120)],'name':_0x33acdc['name']||'','activeFrame':_0x33acdc[_0x50624e(0xf1)],'frames':_0x33acdc['frames'][_0x50624e(0xb0)](_0x7b3c39=>({'activeLayer':_0x7b3c39[_0x50624e(0xd5)],'layers':_0x7b3c39['layers'][_0x50624e(0xb0)](_0x5b3194=>_0x5b3194['toDataURL']())}))})),'activeProject':activeProject},_0x2a61f6=new Blob([JSON[_0x50624e(0x1a1)](_0x5bffb6)],{'type':_0x50624e(0x95)}),_0x58ab6e=document[_0x50624e(0x15a)]('a');_0x58ab6e[_0x50624e(0xf4)]=_0x50624e(0x18f),_0x58ab6e['href']=URL[_0x50624e(0x14d)](_0x2a61f6),_0x58ab6e['click']();}function saveProjectFile(){const _0x48d46d=a0_0x1fd7e8,_0x12ac23={'projects':projects[_0x48d46d(0xb0)](_0x22a40c=>({'width':_0x22a40c[_0x48d46d(0x139)],'height':_0x22a40c['height'],'name':_0x22a40c[_0x48d46d(0x133)]||'','activeFrame':_0x22a40c[_0x48d46d(0xf1)],'frames':_0x22a40c['frames'][_0x48d46d(0xb0)](_0x3ce3cf=>({'activeLayer':_0x3ce3cf[_0x48d46d(0xd5)],'layers':_0x3ce3cf[_0x48d46d(0xa2)][_0x48d46d(0xb0)](_0x27e00b=>_0x27e00b[_0x48d46d(0xca)]())}))})),'activeProject':activeProject},_0x369301=new Blob([JSON['stringify'](_0x12ac23)],{'type':'application/json'}),_0x1970e4=document[_0x48d46d(0x15a)]('a');_0x1970e4['download']=_0x48d46d(0x18f),_0x1970e4['href']=URL[_0x48d46d(0x14d)](_0x369301),_0x1970e4[_0x48d46d(0x186)]();}async function saveProjectToIDB(){const _0x2cc0bd=a0_0x1fd7e8,_0x2e1136={'projects':projects[_0x2cc0bd(0xb0)](_0x2556d8=>({'width':_0x2556d8[_0x2cc0bd(0x139)],'height':_0x2556d8[_0x2cc0bd(0x120)],'name':_0x2556d8[_0x2cc0bd(0x133)]||'','activeFrame':_0x2556d8[_0x2cc0bd(0xf1)],'frames':_0x2556d8[_0x2cc0bd(0x110)][_0x2cc0bd(0xb0)](_0x237210=>({'activeLayer':_0x237210[_0x2cc0bd(0xd5)],'layers':_0x237210[_0x2cc0bd(0xa2)][_0x2cc0bd(0xb0)](_0x202e21=>_0x202e21['toDataURL']())}))})),'activeProject':activeProject};try{await idbSet(_0x2cc0bd(0xe3),_0x2e1136),console[_0x2cc0bd(0x13f)](_0x2cc0bd(0x180));}catch(_0x1ea477){console[_0x2cc0bd(0x15b)]('保存に失敗したチュー:',_0x1ea477);}}setInterval(()=>{saveProjectToIDB();},0x2710);function loadProjectFile(_0xc49fdc){const _0xcafa4b=a0_0x1fd7e8,_0x6bb0a6=_0xc49fdc[_0xcafa4b(0xeb)]['files'][0x0];if(!_0x6bb0a6)return;const _0x2c7917=new FileReader();_0x2c7917[_0xcafa4b(0x184)]=function(_0x12e593){const _0x4a1885=_0xcafa4b;try{const _0x4c2067=JSON[_0x4a1885(0xcc)](_0x12e593[_0x4a1885(0xeb)]['result']);projects=_0x4c2067[_0x4a1885(0x89)][_0x4a1885(0xb0)]((_0x10f629,_0x6093a9)=>{const _0x2b9695=_0x4a1885;let _0xf52426=createProject(_0x10f629[_0x2b9695(0x139)],_0x10f629[_0x2b9695(0x120)],_0x10f629['name']||'画像'+(_0x6093a9+0x1));return _0xf52426[_0x2b9695(0x110)]=_0x10f629[_0x2b9695(0x110)]['map'](_0x3fccd0=>{const _0x2c4bec=_0x2b9695;let _0x375021={'layers':[],'activeLayer':_0x3fccd0[_0x2c4bec(0xd5)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x554954=0x0;_0x554954<_0x3fccd0['layers']['length'];_0x554954++){let _0x33ff10=new Image();_0x33ff10[_0x2c4bec(0x14f)]=_0x3fccd0['layers'][_0x554954];let _0x3c1de8=document['createElement']('canvas');_0x3c1de8[_0x2c4bec(0x139)]=_0x10f629['width']*cellSize,_0x3c1de8[_0x2c4bec(0x120)]=_0x10f629['height']*cellSize,_0x33ff10['onload']=()=>{const _0x1922c3=_0x2c4bec;let _0xfed3e2=_0x3c1de8['getContext']('2d');_0xfed3e2[_0x1922c3(0x19a)](0x0,0x0,_0x3c1de8[_0x1922c3(0x139)],_0x3c1de8['height']),_0xfed3e2[_0x1922c3(0xb7)](_0x33ff10,0x0,0x0);},_0x33ff10['onload'](),_0x375021[_0x2c4bec(0xa2)][_0x2c4bec(0x114)](_0x3c1de8),_0x375021[_0x2c4bec(0x188)][_0x2c4bec(0x114)]([]),_0x375021[_0x2c4bec(0x164)][_0x2c4bec(0x114)]([]);}return _0x375021;}),_0xf52426[_0x2b9695(0xf1)]=_0x10f629[_0x2b9695(0xf1)],_0xf52426[_0x2b9695(0x133)]=_0x10f629[_0x2b9695(0x133)]||'画像'+(_0x6093a9+0x1),_0xf52426;}),activeProject=_0x4c2067[_0x4a1885(0x19e)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x4d42f2){alert('ファイルの読み込みに失敗しました。');}},_0x2c7917[_0xcafa4b(0x11a)](_0x6bb0a6);}async function loadProjectFromIDB(){const _0x4a007a=a0_0x1fd7e8;try{const _0x9c6ecd=await idbGet('nezumi-sketch-save');if(!_0x9c6ecd)return;projects=_0x9c6ecd[_0x4a007a(0x89)][_0x4a007a(0xb0)]((_0x1231dc,_0x352559)=>{const _0x22969e=_0x4a007a;let _0x3382ed=createProject(_0x1231dc[_0x22969e(0x139)],_0x1231dc[_0x22969e(0x120)],_0x1231dc[_0x22969e(0x133)]||'画像'+(_0x352559+0x1));return _0x3382ed[_0x22969e(0x110)]=_0x1231dc[_0x22969e(0x110)][_0x22969e(0xb0)](_0x48aa68=>{const _0x5d63e2=_0x22969e;let _0x571b08={'layers':[],'activeLayer':_0x48aa68[_0x5d63e2(0xd5)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x2c7306=0x0;_0x2c7306<_0x48aa68['layers']['length'];_0x2c7306++){let _0x56d503=new Image();_0x56d503[_0x5d63e2(0x14f)]=_0x48aa68['layers'][_0x2c7306];let _0x3a01a2=document[_0x5d63e2(0x15a)](_0x5d63e2(0x10f));_0x3a01a2[_0x5d63e2(0x139)]=_0x1231dc[_0x5d63e2(0x139)]*cellSize,_0x3a01a2['height']=_0x1231dc[_0x5d63e2(0x120)]*cellSize,_0x56d503[_0x5d63e2(0x184)]=()=>{const _0x4d5c49=_0x5d63e2;let _0x7d7eba=_0x3a01a2[_0x4d5c49(0x17f)]('2d');_0x7d7eba[_0x4d5c49(0x19a)](0x0,0x0,_0x3a01a2[_0x4d5c49(0x139)],_0x3a01a2[_0x4d5c49(0x120)]),_0x7d7eba['drawImage'](_0x56d503,0x0,0x0);},_0x571b08[_0x5d63e2(0xa2)][_0x5d63e2(0x114)](_0x3a01a2),_0x571b08[_0x5d63e2(0x188)][_0x5d63e2(0x114)]([]),_0x571b08['layerRedoStacks'][_0x5d63e2(0x114)]([]);}return _0x571b08;}),_0x3382ed[_0x22969e(0xf1)]=_0x1231dc[_0x22969e(0xf1)],_0x3382ed[_0x22969e(0x133)]=_0x1231dc[_0x22969e(0x133)]||'画像'+(_0x352559+0x1),_0x3382ed;}),activeProject=_0x9c6ecd[_0x4a007a(0x19e)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool('pen'),console[_0x4a007a(0x13f)](_0x4a007a(0x162));}catch(_0x9d152c){alert('IndexedDBからの読み込みに失敗したチュー…'),console[_0x4a007a(0x15b)](_0x9d152c);}}function wait(_0x312559){return new Promise(_0x21ed31=>setTimeout(_0x21ed31,_0x312559));}function initCanvas(){const _0x169899=a0_0x1fd7e8,_0x3f5052=parseInt(0x10),_0x567db5=parseInt(0x10);let _0xd0952e=getCurrentProject();_0xd0952e[_0x169899(0x139)]=_0x3f5052,_0xd0952e[_0x169899(0x120)]=_0x567db5,canvas[_0x169899(0x139)]=_0x3f5052*cellSize,canvas[_0x169899(0x120)]=_0x567db5*cellSize,_0xd0952e['layers']=[],_0xd0952e[_0x169899(0x188)]=[],_0xd0952e[_0x169899(0x164)]=[];let _0x5e9fa1=document[_0x169899(0x15a)]('canvas');_0x5e9fa1['width']=_0x3f5052*cellSize,_0x5e9fa1[_0x169899(0x120)]=_0x567db5*cellSize,_0xd0952e[_0x169899(0xa2)][_0x169899(0x114)](_0x5e9fa1),_0xd0952e[_0x169899(0x188)][_0x169899(0x114)]([]),_0xd0952e[_0x169899(0x164)][_0x169899(0x114)]([]),_0xd0952e[_0x169899(0xd5)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x169899(0x108)]=null,canvas['onmousemove']=null,canvas[_0x169899(0x1a6)]=null,canvas[_0x169899(0xc6)]=null,canvas['ontouchstart']=null,canvas[_0x169899(0x16a)]=null,canvas[_0x169899(0xe2)]=null,canvas['ontouchcancel']=null,canvas[_0x169899(0x155)]('touchstart',handleTouchStart),canvas['removeEventListener']('touchmove',handleTouchMove),canvas['removeEventListener'](_0x169899(0xd8),handleTouchEnd),canvas[_0x169899(0x155)](_0x169899(0x119),handleTouchEnd),canvas[_0x169899(0x108)]=handleMouseDown,canvas['onmousemove']=handleMouseMove,canvas[_0x169899(0x1a6)]=handleMouseUp,canvas[_0x169899(0xc6)]=handleMouseUp,canvas[_0x169899(0x9b)]=handleTouchStart,canvas[_0x169899(0x16a)]=handleTouchMove,canvas[_0x169899(0xe2)]=handleTouchEnd,canvas[_0x169899(0x175)]=handleTouchEnd,canvas[_0x169899(0x118)](_0x169899(0xbd),handleTouchStart,{'passive':![]}),canvas[_0x169899(0x118)](_0x169899(0x10d),handleTouchMove,{'passive':![]}),canvas[_0x169899(0x118)](_0x169899(0xd8),handleTouchEnd,{'passive':![]}),canvas[_0x169899(0x118)](_0x169899(0x119),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x24a38e=a0_0x1fd7e8,_0x416263=document[_0x24a38e(0x195)](_0x24a38e(0x115));if(!_0x416263)return;_0x416263['innerHTML']='',PALETTE_COLORS['forEach']((_0x1b829f,_0x558ca9)=>{const _0x1f96aa=_0x24a38e,_0x506529=document[_0x1f96aa(0x15a)](_0x1f96aa(0xf9));_0x506529[_0x1f96aa(0x92)]=_0x1f96aa(0xaf);_0x1b829f===_0x1f96aa(0xdf)||_0x1b829f===_0x1f96aa(0x136)?(_0x506529[_0x1f96aa(0x1a3)][_0x1f96aa(0x97)]=_0x1f96aa(0xd2),_0x506529[_0x1f96aa(0xa7)]='透明',_0x506529[_0x1f96aa(0xd9)]=_0x1f96aa(0x106)):(_0x506529[_0x1f96aa(0x1a3)][_0x1f96aa(0x97)]=_0x1b829f,_0x506529[_0x1f96aa(0xa7)]=_0x1b829f);_0x506529['onclick']=()=>{const _0x2bd405=_0x1f96aa;currentColor=_0x1b829f,_0x1b829f===_0x2bd405(0xdf)||_0x1b829f==='#00000000'?document['getElementById'](_0x2bd405(0xfc))['value']=_0x2bd405(0x17a):document[_0x2bd405(0x195)](_0x2bd405(0xfc))[_0x2bd405(0x19c)]=_0x1b829f,document[_0x2bd405(0x17c)](_0x2bd405(0xa8))[_0x2bd405(0x137)](_0x251269=>_0x251269['classList']['remove'](_0x2bd405(0x132))),_0x506529[_0x2bd405(0x17b)][_0x2bd405(0x192)]('selected');};if(_0x558ca9!==0x0){const _0x336cbe=document['createElement'](_0x1f96aa(0xef));_0x336cbe['textContent']='×',_0x336cbe[_0x1f96aa(0x92)]='palette-del-btn',_0x336cbe[_0x1f96aa(0xa7)]='この色をパレットから削除',_0x336cbe[_0x1f96aa(0xab)]=_0x38000e=>{const _0x45dcaf=_0x1f96aa;_0x38000e[_0x45dcaf(0x9d)](),PALETTE_COLORS[_0x45dcaf(0xdc)]>0x2&&(PALETTE_COLORS[_0x45dcaf(0xe5)](_0x558ca9,0x1),createPalette());},_0x506529[_0x1f96aa(0x10c)](_0x336cbe);}_0x416263[_0x1f96aa(0x10c)](_0x506529);});const _0x1cd61c=document['createElement'](_0x24a38e(0xf9));_0x1cd61c['className']=_0x24a38e(0x1a9),_0x1cd61c[_0x24a38e(0xa7)]=_0x24a38e(0xb6),_0x1cd61c['innerHTML']='+',_0x1cd61c[_0x24a38e(0xab)]=_0x3582e9=>{const _0x2e0387=_0x24a38e;_0x3582e9[_0x2e0387(0x9d)]();const _0x49e272=document[_0x2e0387(0x15a)]('input');_0x49e272[_0x2e0387(0x117)]=_0x2e0387(0x18d),_0x49e272[_0x2e0387(0x1a3)][_0x2e0387(0xac)]=_0x2e0387(0x100);let _0x3f2593=![];_0x49e272[_0x2e0387(0x105)]=_0x3f070f=>{const _0x55af65=_0x2e0387;!_0x3f2593&&(PALETTE_COLORS['push'](_0x3f070f['target'][_0x55af65(0x19c)]),createPalette(),_0x3f2593=!![],_0x49e272[_0x55af65(0xe4)]());},_0x49e272[_0x2e0387(0x118)](_0x2e0387(0x12b),()=>{const _0x54505b=_0x2e0387;if(!_0x3f2593)_0x49e272[_0x54505b(0xe4)]();}),_0x49e272[_0x2e0387(0x118)](_0x2e0387(0x186),_0x3b7fdc=>_0x3b7fdc[_0x2e0387(0x9d)]()),document[_0x2e0387(0x16d)][_0x2e0387(0x10c)](_0x49e272),_0x49e272[_0x2e0387(0x171)](),_0x49e272[_0x2e0387(0x186)]();},_0x416263[_0x24a38e(0x10c)](_0x1cd61c);let _0x386a6b=document[_0x24a38e(0x195)](_0x24a38e(0x18b));!_0x386a6b&&(_0x386a6b=document[_0x24a38e(0x15a)]('div'),_0x386a6b['id']=_0x24a38e(0x18b),_0x386a6b['className']=_0x24a38e(0x18b),_0x416263[_0x24a38e(0x103)]['appendChild'](_0x386a6b)),_0x386a6b[_0x24a38e(0xd9)]=_0x24a38e(0x98)+(currentTool===_0x24a38e(0x8e)?_0x24a38e(0x99):'')+_0x24a38e(0x13c)+(currentTool==='eraser'?_0x24a38e(0x99):'')+'\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>消しゴム</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn'+(currentTool==='fill'?'\x20active':'')+_0x24a38e(0x14b)+(penSize==0x1?_0x24a38e(0x142):'')+_0x24a38e(0x151)+(penSize==0x2?_0x24a38e(0x142):'')+'>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22'+(penSize==0x3?'\x20selected':'')+'>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22'+(penSize==0x4?'\x20selected':'')+_0x24a38e(0x15e)+(penMode===_0x24a38e(0xfe)?_0x24a38e(0x142):'')+'>四角ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22'+(penMode===_0x24a38e(0x16c)?'\x20selected':'')+_0x24a38e(0xa0)+Math[_0x24a38e(0x172)](currentAlpha*0x64)+_0x24a38e(0x123)+Math[_0x24a38e(0x172)](currentAlpha*0x64)+_0x24a38e(0x148),_0x386a6b[_0x24a38e(0x8b)](_0x24a38e(0xc5))['onchange']=_0x50b63a=>setPenSize(_0x50b63a[_0x24a38e(0xeb)][_0x24a38e(0x19c)]),_0x386a6b['querySelector'](_0x24a38e(0x1a7))['onchange']=_0x40773b=>setPenMode(_0x40773b[_0x24a38e(0xeb)][_0x24a38e(0x19c)]),_0x386a6b[_0x24a38e(0x17c)]('.tool-btn')['forEach'](_0x245612=>{const _0xe1ee7c=_0x24a38e;_0x245612[_0xe1ee7c(0xab)]=()=>setTool(_0x245612[_0xe1ee7c(0x8a)]['tool']);}),_0x386a6b[_0x24a38e(0x8b)]('#palette-alphaSlider')[_0x24a38e(0x105)]=_0x488c6e=>{const _0x218e18=_0x24a38e;setAlpha(_0x488c6e[_0x218e18(0xeb)]['value']),_0x386a6b['querySelector'](_0x218e18(0x178))['textContent']=_0x488c6e[_0x218e18(0xeb)][_0x218e18(0x19c)]+'%';let _0x39576=document['getElementById'](_0x218e18(0xe9)),_0x2d1544=document[_0x218e18(0x195)](_0x218e18(0xd0));if(_0x39576)_0x39576[_0x218e18(0x19c)]=_0x488c6e[_0x218e18(0xeb)][_0x218e18(0x19c)];if(_0x2d1544)_0x2d1544[_0x218e18(0x152)]=_0x488c6e[_0x218e18(0xeb)]['value']+'%';};}function setAlpha(_0x292b71){const _0x1dc82b=a0_0x1fd7e8;let _0x522558=Math[_0x1dc82b(0xce)](0x0,Math[_0x1dc82b(0x15c)](0x64,parseInt(_0x292b71,0xa)||0x0));currentAlpha=_0x522558/0x64;let _0x42e7dd=document[_0x1dc82b(0x195)]('alphaSlider'),_0x1bad21=document['getElementById'](_0x1dc82b(0xd0));if(_0x42e7dd)_0x42e7dd[_0x1dc82b(0x19c)]=_0x522558;if(_0x1bad21)_0x1bad21[_0x1dc82b(0x152)]=_0x522558+'%';let _0x38fda4=document[_0x1dc82b(0x195)]('palette-alphaSlider'),_0x49ed7d=document[_0x1dc82b(0x195)]('palette-alphaValue');if(_0x38fda4)_0x38fda4['value']=_0x522558;if(_0x49ed7d)_0x49ed7d[_0x1dc82b(0x152)]=_0x522558+'%';}document[a0_0x1fd7e8(0x118)](a0_0x1fd7e8(0x134),()=>{const _0x178872=a0_0x1fd7e8,_0x8e3e7f=document[_0x178872(0x195)](_0x178872(0xfc));_0x8e3e7f&&(_0x8e3e7f[_0x178872(0x105)]=_0x26b07b=>{const _0x5b9b68=_0x178872;currentColor=_0x26b07b[_0x5b9b68(0xeb)][_0x5b9b68(0x19c)],document[_0x5b9b68(0x17c)](_0x5b9b68(0xa8))['forEach'](_0x1185cc=>_0x1185cc[_0x5b9b68(0x17b)][_0x5b9b68(0xe4)](_0x5b9b68(0x132)));});const _0x49b01c=document['getElementById']('alphaSlider'),_0x4ec324=document[_0x178872(0x195)](_0x178872(0xd0));_0x49b01c&&_0x4ec324&&(_0x49b01c['oninput']=_0x3531c4=>{const _0x218101=_0x178872;setAlpha(_0x3531c4['target']['value']),_0x4ec324[_0x218101(0x152)]=_0x3531c4[_0x218101(0xeb)][_0x218101(0x19c)]+'%';let _0x335f6d=document[_0x218101(0x195)](_0x218101(0xd3)),_0x321f33=document[_0x218101(0x195)](_0x218101(0xaa));if(_0x335f6d)_0x335f6d['value']=_0x3531c4[_0x218101(0xeb)][_0x218101(0x19c)];if(_0x321f33)_0x321f33[_0x218101(0x152)]=_0x3531c4['target'][_0x218101(0x19c)]+'%';});});async function convertToGIF(_0x2e8787,_0x4316a3=0xc8,_0x59ee93=a0_0x1fd7e8(0x190)){const _0x183b0d=a0_0x1fd7e8,_0x496137=new window[(_0x183b0d(0x126))]({'workers':0x2,'quality':0xa,'workerScript':_0x183b0d(0x18a)});_0x2e8787['forEach'](_0x49b295=>_0x496137['addFrame'](_0x49b295,{'delay':_0x4316a3})),_0x496137['on'](_0x183b0d(0xf6),_0x481ec1=>{const _0x160c04=_0x183b0d,_0x14fb7a=URL['createObjectURL'](_0x481ec1),_0x36e8d9=document[_0x160c04(0x15a)]('a');_0x36e8d9[_0x160c04(0xc8)]=_0x14fb7a,_0x36e8d9[_0x160c04(0xf4)]=_0x59ee93,document[_0x160c04(0x16d)][_0x160c04(0x10c)](_0x36e8d9),_0x36e8d9[_0x160c04(0x186)](),setTimeout(()=>{const _0x2eee45=_0x160c04;document[_0x2eee45(0x16d)][_0x2eee45(0x143)](_0x36e8d9),URL[_0x2eee45(0x14c)](_0x14fb7a);},0x3e8);}),_0x496137[_0x183b0d(0x157)]();}function convertToAPNG(_0x49d924,_0x4adfc,_0x55bb25,_0x3d6f80=0xc8,_0x455efb='nezumi-animation.apng'){const _0x449c24=a0_0x1fd7e8,_0x5a878a=[],_0x8f7693=[],_0x5050f1=document[_0x449c24(0x15a)](_0x449c24(0x10f));_0x5050f1['width']=_0x4adfc,_0x5050f1[_0x449c24(0x120)]=_0x55bb25;const _0x284db3=_0x5050f1[_0x449c24(0x17f)]('2d');_0x49d924[_0x449c24(0x137)](_0x53f08b=>{const _0x3747dd=_0x449c24;_0x284db3[_0x3747dd(0x19a)](0x0,0x0,_0x4adfc,_0x55bb25),_0x284db3[_0x3747dd(0xb7)](_0x53f08b,0x0,0x0,_0x4adfc,_0x55bb25);const _0x41102a=_0x284db3[_0x3747dd(0x1a5)](0x0,0x0,_0x4adfc,_0x55bb25)[_0x3747dd(0x159)][_0x3747dd(0xcd)];_0x5a878a[_0x3747dd(0x114)](_0x41102a),_0x8f7693['push'](_0x3d6f80);});const _0x3e57a3=window[_0x449c24(0x116)][_0x449c24(0xb1)](_0x5a878a,_0x4adfc,_0x55bb25,0x0,_0x8f7693),_0x3f4862=URL[_0x449c24(0x14d)](new Blob([_0x3e57a3],{'type':_0x449c24(0x16f)})),_0x66c24d=document['createElement']('a');_0x66c24d[_0x449c24(0xc8)]=_0x3f4862,_0x66c24d[_0x449c24(0xf4)]=_0x455efb,document[_0x449c24(0x16d)][_0x449c24(0x10c)](_0x66c24d),_0x66c24d[_0x449c24(0x186)](),setTimeout(()=>{const _0x5165cc=_0x449c24;document[_0x5165cc(0x16d)]['removeChild'](_0x66c24d),URL[_0x5165cc(0x14c)](_0x3f4862);},0x3e8);}async function loadImages(_0x487841){const _0xc77728=a0_0x1fd7e8,_0x3e4478=await Promise[_0xc77728(0x102)](_0x487841[_0xc77728(0xb0)](_0x3936f6=>{return new Promise(_0x2f1180=>{const _0x10fbd3=a0_0x272e,_0x3ce6c9=new Image();_0x3ce6c9['crossOrigin']=_0x10fbd3(0xae),_0x3ce6c9['src']=_0x3936f6,_0x3ce6c9[_0x10fbd3(0x184)]=()=>_0x2f1180(_0x3ce6c9);});}));return _0x3e4478;}function toggleSection(_0x2d5592){const _0x26c9d3=a0_0x1fd7e8,_0x33baff=document[_0x26c9d3(0x195)](_0x2d5592),_0x9c162e=_0x33baff['querySelector'](_0x26c9d3(0x19b)),_0x6a9b30=_0x33baff[_0x26c9d3(0x8b)](_0x26c9d3(0x198));_0x9c162e[_0x26c9d3(0x1a3)]['display']===_0x26c9d3(0x100)?(_0x9c162e['style'][_0x26c9d3(0xac)]='',_0x6a9b30[_0x26c9d3(0x152)]='▼'):(_0x9c162e[_0x26c9d3(0x1a3)][_0x26c9d3(0xac)]='none',_0x6a9b30['textContent']='▲');}document['addEventListener']('DOMContentLoaded',()=>{const _0x4872fd=a0_0x1fd7e8;document['querySelectorAll'](_0x4872fd(0x19d))[_0x4872fd(0x137)](_0x224c0a=>_0x224c0a[_0x4872fd(0x1a3)][_0x4872fd(0xac)]=''),document[_0x4872fd(0x17c)](_0x4872fd(0xb9))[_0x4872fd(0x137)](_0x5ac89d=>_0x5ac89d['textContent']='▼');}),window[a0_0x1fd7e8(0x118)](a0_0x1fd7e8(0xed),updateMenuBtnDisplay),document[a0_0x1fd7e8(0x118)](a0_0x1fd7e8(0x134),updateMenuBtnDisplay);function toggleSideMenu(_0x473813){const _0x32978b=a0_0x1fd7e8,_0x20c925=document[_0x32978b(0x195)](_0x32978b(0xf2)),_0xee85f7=document['getElementById'](_0x32978b(0x104)),_0x37d0f5=document[_0x32978b(0x195)](_0x32978b(0x19f)),_0x319d90=document[_0x32978b(0x195)](_0x32978b(0xc4)),_0x190b10=_0x20c925['classList'][_0x32978b(0x131)](_0x32978b(0x96));let _0x2a0a1f=typeof _0x473813===_0x32978b(0x150)?_0x473813:!_0x190b10;_0x2a0a1f?(_0x20c925['classList']['add'](_0x32978b(0x96)),_0xee85f7[_0x32978b(0x17b)][_0x32978b(0x192)]('sidebar-open'),document[_0x32978b(0x16d)][_0x32978b(0x1a3)][_0x32978b(0xa6)]='hidden',document[_0x32978b(0x16d)][_0x32978b(0x1a3)][_0x32978b(0x8f)]='none',window[_0x32978b(0x187)]<=0x384&&(_0x319d90[_0x32978b(0x1a3)][_0x32978b(0xac)]='block',_0x37d0f5[_0x32978b(0x1a3)]['display']='none')):(_0x20c925[_0x32978b(0x17b)][_0x32978b(0xe4)](_0x32978b(0x96)),_0xee85f7[_0x32978b(0x17b)][_0x32978b(0xe4)](_0x32978b(0x141)),document['body']['style']['overflow']='',document[_0x32978b(0x16d)][_0x32978b(0x1a3)][_0x32978b(0x8f)]='',window[_0x32978b(0x187)]<=0x384&&(_0x319d90[_0x32978b(0x1a3)][_0x32978b(0xac)]=_0x32978b(0x100),_0x37d0f5[_0x32978b(0x1a3)][_0x32978b(0xac)]='block'));}function updateMenuBtnDisplay(){const _0x53f19c=a0_0x1fd7e8,_0x4c1f4d=document[_0x53f19c(0x195)]('sidebar'),_0x5ac7f7=document[_0x53f19c(0x195)](_0x53f19c(0x104)),_0x3aa259=document[_0x53f19c(0x195)]('menu-toggle-btn'),_0x45c653=document['getElementById'](_0x53f19c(0xc4));window[_0x53f19c(0x187)]>0x384?(_0x4c1f4d[_0x53f19c(0x17b)][_0x53f19c(0xe4)](_0x53f19c(0x96)),_0x5ac7f7['classList'][_0x53f19c(0xe4)]('sidebar-open'),_0x45c653['style']['display']=_0x53f19c(0x100),_0x3aa259['style'][_0x53f19c(0xac)]=_0x53f19c(0x100),document[_0x53f19c(0x16d)]['style'][_0x53f19c(0xa6)]='',document[_0x53f19c(0x16d)]['style'][_0x53f19c(0x8f)]=''):_0x4c1f4d[_0x53f19c(0x17b)][_0x53f19c(0x131)](_0x53f19c(0x96))?(_0x45c653[_0x53f19c(0x1a3)][_0x53f19c(0xac)]=_0x53f19c(0x112),_0x3aa259[_0x53f19c(0x1a3)][_0x53f19c(0xac)]='none'):(_0x45c653['style'][_0x53f19c(0xac)]='none',_0x3aa259[_0x53f19c(0x1a3)][_0x53f19c(0xac)]=_0x53f19c(0x112));}document[a0_0x1fd7e8(0x118)](a0_0x1fd7e8(0x186),function(_0x569a2b){const _0xc81ef=a0_0x1fd7e8;if(window[_0xc81ef(0x187)]>0x384)return;const _0x69c643=document['getElementById'](_0xc81ef(0xf2)),_0x541092=document[_0xc81ef(0x195)](_0xc81ef(0x104)),_0x27fdb5=document[_0xc81ef(0x195)]('menu-toggle-btn'),_0x3cc222=document['getElementById'](_0xc81ef(0xc4));!_0x69c643['contains'](_0x569a2b['target'])&&_0x569a2b[_0xc81ef(0xeb)]!==_0x27fdb5&&_0x569a2b[_0xc81ef(0xeb)]!==_0x3cc222&&(_0x69c643['classList']['remove'](_0xc81ef(0x96)),_0x541092[_0xc81ef(0x17b)][_0xc81ef(0xe4)]('sidebar-open'),_0x3cc222[_0xc81ef(0x1a3)][_0xc81ef(0xac)]=_0xc81ef(0x100),_0x27fdb5['style']['display']='block',document[_0xc81ef(0x16d)][_0xc81ef(0x1a3)][_0xc81ef(0xa6)]='',document['body'][_0xc81ef(0x1a3)][_0xc81ef(0x8f)]='');});