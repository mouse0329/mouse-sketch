const _0x31f034=_0x1f27;function _0x5daf(){const _0x2c374b=['exportQuality','webp','VideoEncoder','toDataURL','render','png','length','WebCodecs','nezumi-image','encode','GIFに変換中...','image/jpeg','getElementById','1088465ZJrnfw','getContext','buffer','jpg','click','127388nCCBVs','split','.apng','body','removeChild','apng','round','filter','blob','exportWidthPx','createElement','exportHeightPx','4073675tprGLr','clearRect','min','drawImage','src','(((.+)+)+)+$','vp8','2799741DkKliU','createObjectURL','GIF','APNGに変換中...','forEach','スプライトシートの拡大率を指定（例:\x201\x20=\x20元サイズ,\x202\x20=\x202倍）','name','push','flush','revokeObjectURL','toString','replace','image/','lib/gif.worker.js','frames','isFinite','activeFrame','data','GIFに変換できる画像がありません。','-layers.zip','visible','nezumi-spritesheet','addFrame','nezumi-animation','_spritesheet.png','.gif','map','close','layers','18391604iCuIFh','608202AeHmfe','3833024uhNenC','search','catch','file','undefined','activeLayer','.webm','nezumi-drawing','height','value','href','nezumi-animation.gif','apngExtSelect','layer-','isArray','APNGを生成できませんでした。フレームが空かもしれません。','all','byteLength','nezumi-layers','getImageData','jpeg','フレームがありません','このブラウザはWebCodecsによるWEBPアニメーションに対応していません。','-hidden','video/webm','canvas','.png','error','プロジェクトがありません','image/png','width','max','generateAsync','download','フレーム間の余白(px)\x20を指定（例:\x200）','appendChild'];_0x5daf=function(){return _0x2c374b;};return _0x5daf();}(function(_0x15499c,_0x3723d7){const _0x24054a=_0x1f27,_0x5b35bf=_0x15499c();while(!![]){try{const _0x2b979a=-parseInt(_0x24054a(0x9e))/0x1+parseInt(_0x24054a(0xa3))/0x2+-parseInt(_0x24054a(0xb6))/0x3+-parseInt(_0x24054a(0xd5))/0x4+parseInt(_0x24054a(0xaf))/0x5+parseInt(_0x24054a(0xd4))/0x6+parseInt(_0x24054a(0xd3))/0x7;if(_0x2b979a===_0x3723d7)break;else _0x5b35bf['push'](_0x5b35bf['shift']());}catch(_0x2b8577){_0x5b35bf['push'](_0x5b35bf['shift']());}}}(_0x5daf,0x99200));const _0x2f80df=(function(){let _0x4b689f=!![];return function(_0x5d5b41,_0x3f8636){const _0x54d6e5=_0x4b689f?function(){if(_0x3f8636){const _0x33d282=_0x3f8636['apply'](_0x5d5b41,arguments);return _0x3f8636=null,_0x33d282;}}:function(){};return _0x4b689f=![],_0x54d6e5;};}()),_0x40ff8a=_0x2f80df(this,function(){const _0x458b0b=_0x1f27;return _0x40ff8a[_0x458b0b(0xc0)]()[_0x458b0b(0xd6)](_0x458b0b(0xb4))[_0x458b0b(0xc0)]()['constructor'](_0x40ff8a)[_0x458b0b(0xd6)](_0x458b0b(0xb4));});_0x40ff8a();function getExportQuality(){const _0x2dc2b1=_0x1f27;var _0x5dbddc=document[_0x2dc2b1(0x9d)](_0x2dc2b1(0x91));return _0x5dbddc?parseInt(_0x5dbddc[_0x2dc2b1(0x76)],0xa):0x8;}function getExportSize(){const _0x330152=_0x1f27,_0xd8b040=getCurrentProject(),_0x5af5ad=_0xd8b040?_0xd8b040[_0x330152(0x8b)]*cellSize:0x0,_0x135fe1=_0xd8b040?_0xd8b040[_0x330152(0x75)]*cellSize:0x0,_0x426e59=document[_0x330152(0x9d)](_0x330152(0xac)),_0x5816de=document[_0x330152(0x9d)](_0x330152(0xae));let _0x1f7a40=_0x426e59?parseInt(_0x426e59['value'],0xa):NaN,_0x3fefc6=_0x5816de?parseInt(_0x5816de[_0x330152(0x76)],0xa):NaN;if(!Number[_0x330152(0xc5)](_0x1f7a40)||_0x1f7a40<=0x0)_0x1f7a40=NaN;if(!Number[_0x330152(0xc5)](_0x3fefc6)||_0x3fefc6<=0x0)_0x3fefc6=NaN;Number[_0x330152(0xc5)](_0x1f7a40)&&!Number[_0x330152(0xc5)](_0x3fefc6)&&_0x5af5ad>0x0&&_0x135fe1>0x0&&(_0x3fefc6=Math[_0x330152(0xa9)](_0x1f7a40*_0x135fe1/_0x5af5ad));Number[_0x330152(0xc5)](_0x3fefc6)&&!Number[_0x330152(0xc5)](_0x1f7a40)&&_0x5af5ad>0x0&&_0x135fe1>0x0&&(_0x1f7a40=Math[_0x330152(0xa9)](_0x3fefc6*_0x5af5ad/_0x135fe1));if(!Number[_0x330152(0xc5)](_0x1f7a40))_0x1f7a40=_0x5af5ad;if(!Number[_0x330152(0xc5)](_0x3fefc6))_0x3fefc6=_0x135fe1;return{'width':_0x1f7a40,'height':_0x3fefc6};}function exportCurrentFrameMergedPng(){const _0x186d34=_0x1f27,_0x2525f6=getCurrentProject(),_0x293f22=getCurrentFrame();if(!_0x2525f6||!_0x293f22)return;const {width:_0x5a5c9a,height:_0xb69b75}=getExportSize(),_0x315b1c=document[_0x186d34(0xad)](_0x186d34(0x86));_0x315b1c[_0x186d34(0x8b)]=_0x5a5c9a,_0x315b1c[_0x186d34(0x75)]=_0xb69b75;const _0x295f8a=_0x315b1c[_0x186d34(0x9f)]('2d');for(let _0x55e18c=0x0;_0x55e18c<(Array[_0x186d34(0x7b)](_0x293f22[_0x186d34(0xd2)])?_0x293f22[_0x186d34(0xd2)]['length']:0x0);_0x55e18c++){const _0x4e9943=_0x293f22[_0x186d34(0xd2)][_0x55e18c];if(!_0x4e9943)continue;const _0x198a9b=typeof _0x4e9943[_0x186d34(0xca)]!=='undefined'?_0x4e9943[_0x186d34(0xca)]:!![];if(!_0x198a9b)continue;const _0x44eaa3=_0x4e9943[_0x186d34(0x86)]?_0x4e9943[_0x186d34(0x86)]:_0x4e9943;if(_0x44eaa3)_0x295f8a[_0x186d34(0xb2)](_0x44eaa3,0x0,0x0,_0x5a5c9a,_0xb69b75);}const _0x33cfb2=document[_0x186d34(0xad)]('a'),_0x55230f=(_0x2525f6['name']||_0x186d34(0x99))[_0x186d34(0xc1)](/[\\/:*?"<>|]/g,'_');_0x33cfb2['download']=_0x55230f+_0x186d34(0x87),_0x33cfb2['href']=_0x315b1c[_0x186d34(0x94)](_0x186d34(0x8a)),_0x33cfb2['click']();}function exportCurrentFrameLayersPngZip(){const _0x434eea=_0x1f27,_0x544ed6=getCurrentProject(),_0x4367de=getCurrentFrame();if(!_0x544ed6||!_0x4367de)return;const _0x7924bc=_0x544ed6['width']*cellSize,_0x45270e=_0x544ed6[_0x434eea(0x75)]*cellSize,_0x35e862=new JSZip();for(let _0x15fd1b=0x0;_0x15fd1b<(Array[_0x434eea(0x7b)](_0x4367de['layers'])?_0x4367de[_0x434eea(0xd2)][_0x434eea(0x97)]:0x0);_0x15fd1b++){const _0x38d109=_0x4367de[_0x434eea(0xd2)][_0x15fd1b];if(!_0x38d109)continue;const _0x41febb=typeof _0x38d109['visible']!==_0x434eea(0x71)?_0x38d109[_0x434eea(0xca)]:!![],_0x160f46=_0x38d109[_0x434eea(0x86)]?_0x38d109['canvas']:_0x38d109;if(!_0x160f46)continue;const _0x2d3cc9=document['createElement']('canvas');_0x2d3cc9[_0x434eea(0x8b)]=_0x7924bc,_0x2d3cc9[_0x434eea(0x75)]=_0x45270e;const _0x1f24eb=_0x2d3cc9[_0x434eea(0x9f)]('2d');_0x1f24eb[_0x434eea(0xb0)](0x0,0x0,_0x7924bc,_0x45270e),_0x1f24eb[_0x434eea(0xb2)](_0x160f46,0x0,0x0);const _0x2b8420=_0x2d3cc9[_0x434eea(0x94)](_0x434eea(0x8a)),_0x48609d=_0x2b8420[_0x434eea(0xa4)](',')[0x1];_0x35e862[_0x434eea(0xd8)](_0x434eea(0x7a)+(_0x15fd1b+0x1)+(_0x41febb?'':_0x434eea(0x84))+_0x434eea(0x87),_0x48609d,{'base64':!![]});}const _0x3396aa=(_0x544ed6[_0x434eea(0xbc)]||_0x434eea(0x7f))[_0x434eea(0xc1)](/[\\/:*?"<>|]/g,'_');_0x35e862[_0x434eea(0x8d)]({'type':_0x434eea(0xab)})['then'](_0x1374be=>{const _0x1e3f73=_0x434eea,_0x3f50cd=document['createElement']('a');_0x3f50cd['href']=URL[_0x1e3f73(0xb7)](_0x1374be),_0x3f50cd[_0x1e3f73(0x8e)]=_0x3396aa+_0x1e3f73(0xc9),document[_0x1e3f73(0xa6)][_0x1e3f73(0x90)](_0x3f50cd),_0x3f50cd['click'](),setTimeout(()=>{const _0x2c04d5=_0x1e3f73;URL['revokeObjectURL'](_0x3f50cd['href']),document[_0x2c04d5(0xa6)][_0x2c04d5(0xa7)](_0x3f50cd);},0x4b0);});}function exportImage(_0x2f21b3){const _0x3024db=_0x1f27;let _0x3539c5=getCurrentProject(),_0x312ad7=_0x3539c5['frames'],_0x32f092=_0x2f21b3==='jpg'||_0x2f21b3==='jpeg'?_0x3024db(0x9c):_0x3024db(0xc2)+_0x2f21b3,_0x2a7d6e=_0x312ad7[_0x3024db(0x97)]>0x1;const {width:_0x33e881,height:_0x2f8cf1}=getExportSize();let _0x52ebf2=(_0x3539c5['name']||_0x3024db(0x74))[_0x3024db(0xc1)](/[\\/:*?"<>|]/g,'_');if(!_0x2a7d6e){let _0x26bcf8=document[_0x3024db(0xad)](_0x3024db(0x86));_0x26bcf8['width']=_0x33e881,_0x26bcf8[_0x3024db(0x75)]=_0x2f8cf1;let _0x704dbc=_0x26bcf8[_0x3024db(0x9f)]('2d'),_0x38a6a7=getCurrentFrame();for(let _0x5e676f=0x0;_0x5e676f<(Array[_0x3024db(0x7b)](_0x38a6a7[_0x3024db(0xd2)])?_0x38a6a7['layers'][_0x3024db(0x97)]:0x0);_0x5e676f++){const _0x5dc9ef=_0x38a6a7['layers'][_0x5e676f];if(!_0x5dc9ef)continue;const _0x3f8845=typeof _0x5dc9ef[_0x3024db(0xca)]!==_0x3024db(0x71)?_0x5dc9ef[_0x3024db(0xca)]:!![];if(!_0x3f8845)continue;const _0x162888=_0x5dc9ef[_0x3024db(0x86)]?_0x5dc9ef[_0x3024db(0x86)]:_0x5dc9ef;if(_0x162888)_0x704dbc['drawImage'](_0x162888,0x0,0x0,_0x33e881,_0x2f8cf1);}let _0x35b5b0=document[_0x3024db(0xad)]('a');_0x35b5b0[_0x3024db(0x8e)]=_0x52ebf2+'.'+_0x2f21b3;if(_0x2f21b3===_0x3024db(0xa1)||_0x2f21b3===_0x3024db(0x81)){let _0x6f55d9=getExportQuality(),_0x21a26f=Math[_0x3024db(0x8c)](0.1,Math[_0x3024db(0xb1)](0x1,_0x6f55d9/0xa));_0x35b5b0[_0x3024db(0x77)]=_0x26bcf8[_0x3024db(0x94)](_0x32f092,_0x21a26f);}else _0x2f21b3===_0x3024db(0x96)?_0x35b5b0[_0x3024db(0x77)]=_0x26bcf8[_0x3024db(0x94)](_0x32f092):_0x35b5b0[_0x3024db(0x77)]=_0x26bcf8[_0x3024db(0x94)](_0x32f092);_0x35b5b0[_0x3024db(0xa2)]();}else{if(_0x2f21b3===_0x3024db(0x92)&&typeof window[_0x3024db(0x98)]!==_0x3024db(0x71)){const {width:_0x3e0162,height:_0x42468a}=getExportSize();exportWebpAnimation(_0x312ad7,_0x3e0162,_0x42468a,_0x52ebf2);}else for(let _0x24927=0x0;_0x24927<_0x312ad7[_0x3024db(0x97)];_0x24927++){let _0x421fd7=document['createElement'](_0x3024db(0x86));_0x421fd7[_0x3024db(0x8b)]=_0x33e881,_0x421fd7[_0x3024db(0x75)]=_0x2f8cf1;let _0x1275d4=_0x421fd7[_0x3024db(0x9f)]('2d'),_0x1c0419=_0x312ad7[_0x24927];for(let _0x368c94=0x0;_0x368c94<(Array[_0x3024db(0x7b)](_0x1c0419[_0x3024db(0xd2)])?_0x1c0419['layers'][_0x3024db(0x97)]:0x0);_0x368c94++){const _0x5efcd6=_0x1c0419['layers'][_0x368c94];if(!_0x5efcd6)continue;const _0x97bd9=typeof _0x5efcd6[_0x3024db(0xca)]!==_0x3024db(0x71)?_0x5efcd6[_0x3024db(0xca)]:!![];if(!_0x97bd9)continue;const _0x391687=_0x5efcd6[_0x3024db(0x86)]?_0x5efcd6[_0x3024db(0x86)]:_0x5efcd6;if(_0x391687)_0x1275d4[_0x3024db(0xb2)](_0x391687,0x0,0x0,_0x33e881,_0x2f8cf1);}let _0x4f827e=document[_0x3024db(0xad)]('a');_0x4f827e[_0x3024db(0x8e)]=_0x52ebf2+'-f'+(_0x24927+0x1)+'.'+_0x2f21b3;if(_0x2f21b3===_0x3024db(0xa1)||_0x2f21b3===_0x3024db(0x81)){let _0xda0d89=getExportQuality(),_0x383f86=Math[_0x3024db(0x8c)](0.1,Math['min'](0x1,_0xda0d89/0xa));_0x4f827e[_0x3024db(0x77)]=_0x421fd7[_0x3024db(0x94)](_0x32f092,_0x383f86);}else _0x2f21b3===_0x3024db(0x96)?_0x4f827e[_0x3024db(0x77)]=_0x421fd7['toDataURL'](_0x32f092):_0x4f827e[_0x3024db(0x77)]=_0x421fd7['toDataURL'](_0x32f092);setTimeout(()=>_0x4f827e[_0x3024db(0xa2)](),_0x24927*0x64);}}}async function exportWebpAnimation(_0x3fd33f,_0x5df207,_0x195f1c,_0x1d987d=_0x31f034(0xcd)){const _0x4b92a0=_0x31f034;if(!window[_0x4b92a0(0x98)]||!window[_0x4b92a0(0x93)]){alert(_0x4b92a0(0x83));return;}const _0xe1307e=[],_0x29ee11=new VideoEncoder({'output':_0x3fe301=>_0xe1307e[_0x4b92a0(0xbd)](_0x3fe301),'error':_0xeb1189=>console['error'](_0xeb1189)});_0x29ee11['configure']({'codec':_0x4b92a0(0xb5),'width':_0x5df207,'height':_0x195f1c,'framerate':0x5});for(let _0x5a021b=0x0;_0x5a021b<_0x3fd33f[_0x4b92a0(0x97)];_0x5a021b++){let _0x4fb01e=document[_0x4b92a0(0xad)]('canvas');_0x4fb01e[_0x4b92a0(0x8b)]=_0x5df207,_0x4fb01e[_0x4b92a0(0x75)]=_0x195f1c;let _0x557d96=_0x4fb01e['getContext']('2d'),_0x2217fb=_0x3fd33f[_0x5a021b];for(let _0x1afe43=0x0;_0x1afe43<(Array[_0x4b92a0(0x7b)](_0x2217fb[_0x4b92a0(0xd2)])?_0x2217fb[_0x4b92a0(0xd2)]['length']:0x0);_0x1afe43++){const _0x198b38=_0x2217fb[_0x4b92a0(0xd2)][_0x1afe43];if(!_0x198b38)continue;const _0x2244be=typeof _0x198b38[_0x4b92a0(0xca)]!=='undefined'?_0x198b38['visible']:!![];if(!_0x2244be)continue;const _0x37e526=_0x198b38[_0x4b92a0(0x86)]?_0x198b38[_0x4b92a0(0x86)]:_0x198b38;if(_0x37e526)_0x557d96[_0x4b92a0(0xb2)](_0x37e526,0x0,0x0);}let _0x23fdfb=await createImageBitmap(_0x4fb01e);_0x29ee11[_0x4b92a0(0x9a)](_0x23fdfb,{'keyFrame':!![],'duration':0xc8}),_0x23fdfb['close']();}await _0x29ee11[_0x4b92a0(0xbe)](),_0x29ee11[_0x4b92a0(0xd1)]();const _0x63c29c=new Blob(_0xe1307e[_0x4b92a0(0xd0)](_0x4ee05c=>_0x4ee05c[_0x4b92a0(0x7e)]?_0x4ee05c:_0x4ee05c[_0x4b92a0(0xc7)]),{'type':_0x4b92a0(0x85)}),_0x152ebc=document[_0x4b92a0(0xad)]('a');_0x152ebc[_0x4b92a0(0x8e)]=_0x1d987d+_0x4b92a0(0x73),_0x152ebc[_0x4b92a0(0x77)]=URL['createObjectURL'](_0x63c29c),_0x152ebc['click']();}function exportGif(){const _0x26acd3=_0x31f034;try{showLoading(_0x26acd3(0x9b));}catch(_0x2cc4af){}let _0x55ed1d=getCurrentProject(),_0x5ea1fd=_0x55ed1d[_0x26acd3(0xc4)];const {width:_0x458fb0,height:_0x406891}=getExportSize(),_0x56adaf=_0x5ea1fd[_0x26acd3(0xd0)](_0x100dca=>{const _0x2a1e7f=_0x26acd3;let _0x496efd=document['createElement']('canvas');_0x496efd['width']=_0x458fb0,_0x496efd['height']=_0x406891;let _0x37d205=_0x496efd[_0x2a1e7f(0x9f)]('2d');for(let _0x7f680b=0x0;_0x7f680b<(Array[_0x2a1e7f(0x7b)](_0x100dca[_0x2a1e7f(0xd2)])?_0x100dca[_0x2a1e7f(0xd2)][_0x2a1e7f(0x97)]:0x0);_0x7f680b++){const _0xc19080=_0x100dca[_0x2a1e7f(0xd2)][_0x7f680b];if(!_0xc19080)continue;const _0x4b3631=typeof _0xc19080[_0x2a1e7f(0xca)]!==_0x2a1e7f(0x71)?_0xc19080[_0x2a1e7f(0xca)]:!![];if(!_0x4b3631)continue;const _0xa85f0e=_0xc19080[_0x2a1e7f(0x86)]?_0xc19080[_0x2a1e7f(0x86)]:_0xc19080;if(_0xa85f0e)_0x37d205[_0x2a1e7f(0xb2)](_0xa85f0e,0x0,0x0);}return _0x496efd[_0x2a1e7f(0x94)](_0x2a1e7f(0x8a));});Promise[_0x26acd3(0x7d)](_0x56adaf['map'](_0x409778=>{return new Promise(_0x38a99e=>{const _0x4ed1bd=_0x1f27,_0xe9ec80=new Image();_0xe9ec80[_0x4ed1bd(0xb3)]=_0x409778,_0xe9ec80['onload']=()=>_0x38a99e(_0xe9ec80);});}))['then'](_0x333828=>{const _0x14e0df=_0x26acd3,_0x56cdfd=_0x333828[_0x14e0df(0xaa)](_0x5af182=>_0x5af182[_0x14e0df(0x8b)]>0x0&&_0x5af182[_0x14e0df(0x75)]>0x0);if(_0x56cdfd[_0x14e0df(0x97)]===0x0){try{hideLoading();}catch(_0x43ac2d){}alert(_0x14e0df(0xc8));return;}const _0x497a06=(_0x55ed1d[_0x14e0df(0xbc)]||_0x14e0df(0xcd))['replace'](/[\\/:*?"<>|]/g,'_');let _0x132200=getExportQuality(),_0x5816a9=0x1f-_0x132200*0x3;convertToGIF(_0x56cdfd,animationDelay,_0x497a06+_0x14e0df(0xcf),_0x5816a9);})[_0x26acd3(0xd7)](_0x33708f=>{const _0x1ecc62=_0x26acd3;try{hideLoading();}catch(_0x4ba92d){};console[_0x1ecc62(0x88)](_0x33708f);});}function exportApng(){const _0x273871=_0x31f034;try{showLoading(_0x273871(0xb9));}catch(_0x5b266d){}let _0x1d448f=getCurrentProject(),_0x57ffcf=_0x1d448f[_0x273871(0xc4)];const {width:_0x41ec75,height:_0x31243a}=getExportSize(),_0x2455c6=_0x57ffcf['map'](_0xe14b1d=>{const _0x1cdbe6=_0x273871;let _0x190d09=document['createElement']('canvas');_0x190d09['width']=_0x41ec75,_0x190d09[_0x1cdbe6(0x75)]=_0x31243a;let _0x5ef2eb=_0x190d09[_0x1cdbe6(0x9f)]('2d');for(let _0x47f3b6=0x0;_0x47f3b6<(Array[_0x1cdbe6(0x7b)](_0xe14b1d[_0x1cdbe6(0xd2)])?_0xe14b1d[_0x1cdbe6(0xd2)][_0x1cdbe6(0x97)]:0x0);_0x47f3b6++){const _0x182a39=_0xe14b1d[_0x1cdbe6(0xd2)][_0x47f3b6];if(!_0x182a39)continue;const _0xc683c0=typeof _0x182a39[_0x1cdbe6(0xca)]!==_0x1cdbe6(0x71)?_0x182a39[_0x1cdbe6(0xca)]:!![];if(!_0xc683c0)continue;const _0x3f8f75=_0x182a39[_0x1cdbe6(0x86)]?_0x182a39[_0x1cdbe6(0x86)]:_0x182a39;if(_0x3f8f75)_0x5ef2eb[_0x1cdbe6(0xb2)](_0x3f8f75,0x0,0x0);}const _0x2f9549=_0x5ef2eb[_0x1cdbe6(0x80)](0x0,0x0,_0x41ec75,_0x31243a)['data'][_0x1cdbe6(0xa0)];return _0x2f9549;}),_0x1a83bb=(_0x1d448f[_0x273871(0xbc)]||_0x273871(0xcd))['replace'](/[\\/:*?"<>|]/g,'_'),_0x16c4a1=document[_0x273871(0x9d)](_0x273871(0x79)),_0x3a738c=_0x16c4a1?_0x16c4a1['value']:_0x273871(0xa8);let _0x31e345=getExportQuality(),_0x797360=Math[_0x273871(0x8c)](0x0,Math[_0x273871(0xb1)](0xa,0xb-_0x31e345));convertToAPNG(_0x2455c6,_0x41ec75,_0x31243a,animationDelay,_0x1a83bb+'.'+_0x3a738c,_0x797360);}async function convertToGIF(_0x4ff2b8,_0x2c2b70=0xc8,_0x1aed42=_0x31f034(0x78),_0x159f8d=0xa){const _0x4aa0e6=_0x31f034,_0x35f7d6=new window[(_0x4aa0e6(0xb8))]({'workers':0x2,'quality':_0x159f8d,'workerScript':_0x4aa0e6(0xc3)});_0x4ff2b8[_0x4aa0e6(0xba)](_0x1e790a=>_0x35f7d6[_0x4aa0e6(0xcc)](_0x1e790a,{'delay':_0x2c2b70})),_0x35f7d6['on']('finished',_0x248407=>{const _0x54603c=_0x4aa0e6,_0x44df0b=URL[_0x54603c(0xb7)](_0x248407),_0x540273=document['createElement']('a');_0x540273[_0x54603c(0x77)]=_0x44df0b,_0x540273[_0x54603c(0x8e)]=_0x1aed42,document['body']['appendChild'](_0x540273),_0x540273[_0x54603c(0xa2)](),setTimeout(()=>{const _0x11553f=_0x54603c;document[_0x11553f(0xa6)][_0x11553f(0xa7)](_0x540273),URL[_0x11553f(0xbf)](_0x44df0b);try{hideLoading();}catch(_0x571d57){}},0x3e8);}),_0x35f7d6[_0x4aa0e6(0x95)]();}function makeAPNGBlob(_0x1e3454,_0x16ce3d,_0x28a6f1,_0x40e75e=0xc8,_0x348e79=0x0){const _0x40e46f=_0x31f034,_0x5e59a7=[],_0x1286ef=[],_0xb6682d=document[_0x40e46f(0xad)](_0x40e46f(0x86));_0xb6682d['width']=_0x16ce3d,_0xb6682d[_0x40e46f(0x75)]=_0x28a6f1;const _0x104b57=_0xb6682d[_0x40e46f(0x9f)]('2d');_0x1e3454[_0x40e46f(0xba)](_0x3e0ae8=>{const _0x230546=_0x40e46f;if(_0x3e0ae8 instanceof ArrayBuffer){_0x5e59a7['push'](_0x3e0ae8),_0x1286ef[_0x230546(0xbd)](_0x40e75e);return;}_0x104b57[_0x230546(0xb0)](0x0,0x0,_0x16ce3d,_0x28a6f1);try{_0x104b57[_0x230546(0xb2)](_0x3e0ae8,0x0,0x0,_0x16ce3d,_0x28a6f1);}catch(_0x213ade){return;}const _0x32ed4a=_0x104b57['getImageData'](0x0,0x0,_0x16ce3d,_0x28a6f1)[_0x230546(0xc7)][_0x230546(0xa0)];_0x5e59a7[_0x230546(0xbd)](_0x32ed4a),_0x1286ef['push'](_0x40e75e);});if(!_0x5e59a7['length'])return null;const _0x5235c8=window['UPNG']['encode'](_0x5e59a7,_0x16ce3d,_0x28a6f1,_0x348e79,_0x1286ef);return new Blob([_0x5235c8],{'type':'image/apng'});}function _0x1f27(_0x55729d,_0x2f4c91){_0x55729d=_0x55729d-0x71;const _0x3c7507=_0x5daf();let _0x40ff8a=_0x3c7507[_0x55729d];return _0x40ff8a;}function convertToAPNG(_0x3901ab,_0x3d43cb,_0x17d69c,_0x1a8665=0xc8,_0x3de386='nezumi-animation.apng',_0x3d9b86=0x0){const _0x1d1006=_0x31f034,_0x1004ba=makeAPNGBlob(_0x3901ab,_0x3d43cb,_0x17d69c,_0x1a8665,_0x3d9b86);if(!_0x1004ba){try{hideLoading();}catch(_0x35700f){}alert(_0x1d1006(0x7c));return;}const _0xd14868=URL['createObjectURL'](_0x1004ba),_0x3718a8=document[_0x1d1006(0xad)]('a');_0x3718a8[_0x1d1006(0x77)]=_0xd14868,_0x3718a8[_0x1d1006(0x8e)]=_0x3de386,document[_0x1d1006(0xa6)]['appendChild'](_0x3718a8),_0x3718a8['click'](),setTimeout(()=>{const _0x45f58a=_0x1d1006;document['body'][_0x45f58a(0xa7)](_0x3718a8),URL[_0x45f58a(0xbf)](_0xd14868);try{hideLoading();}catch(_0xb2422f){}},0x3e8);}function exportSpriteSheetDialog(){const _0x5acd42=_0x31f034;let _0x4b3c09=prompt(_0x5acd42(0xbb),'1');if(_0x4b3c09===null)return;let _0x1e8771=Math[_0x5acd42(0x8c)](0x1,parseInt(_0x4b3c09,0xa)||0x1),_0x19cebf=prompt(_0x5acd42(0x8f),'0');if(_0x19cebf===null)return;let _0x187b10=Math['max'](0x0,parseInt(_0x19cebf,0xa)||0x0);exportSpriteSheet(_0x1e8771,_0x187b10);}function exportSpriteSheet(_0x18edf3=0x1,_0x2fe2d3=0x0){const _0x5ee073=_0x31f034,_0x177855=getCurrentProject();if(!_0x177855){alert(_0x5ee073(0x89));return;}const _0x1b5336=_0x177855['frames'];if(!_0x1b5336||_0x1b5336[_0x5ee073(0x97)]===0x0){alert(_0x5ee073(0x82));return;}const _0x1630d7=_0x177855['width']*cellSize,_0xdd6411=_0x177855[_0x5ee073(0x75)]*cellSize,_0x4faa79=_0x1630d7*_0x1b5336[_0x5ee073(0x97)]*_0x18edf3+Math[_0x5ee073(0x8c)](0x0,_0x1b5336['length']-0x1)*_0x2fe2d3,_0x3b2b4a=_0xdd6411*_0x18edf3,_0x1cccd3=document[_0x5ee073(0xad)](_0x5ee073(0x86));_0x1cccd3[_0x5ee073(0x8b)]=_0x4faa79,_0x1cccd3[_0x5ee073(0x75)]=_0x3b2b4a;const _0x593788=_0x1cccd3['getContext']('2d');_0x593788[_0x5ee073(0xb0)](0x0,0x0,_0x1cccd3[_0x5ee073(0x8b)],_0x1cccd3['height']);let _0x1ad9e2=0x0;for(let _0x5cccd5=0x0;_0x5cccd5<_0x1b5336[_0x5ee073(0x97)];_0x5cccd5++){let _0x2f3931=document[_0x5ee073(0xad)](_0x5ee073(0x86));_0x2f3931[_0x5ee073(0x8b)]=_0x1630d7,_0x2f3931[_0x5ee073(0x75)]=_0xdd6411;let _0x3e1df3=_0x2f3931[_0x5ee073(0x9f)]('2d');for(let _0x5e2f05=0x0;_0x5e2f05<(Array[_0x5ee073(0x7b)](_0x1b5336[_0x5cccd5][_0x5ee073(0xd2)])?_0x1b5336[_0x5cccd5][_0x5ee073(0xd2)][_0x5ee073(0x97)]:0x0);_0x5e2f05++){const _0x4d2c07=_0x1b5336[_0x5cccd5][_0x5ee073(0xd2)][_0x5e2f05];if(!_0x4d2c07)continue;const _0x1e5d94=typeof _0x4d2c07['visible']!==_0x5ee073(0x71)?_0x4d2c07[_0x5ee073(0xca)]:!![];if(!_0x1e5d94)continue;const _0x24e706=_0x4d2c07[_0x5ee073(0x86)]?_0x4d2c07[_0x5ee073(0x86)]:_0x4d2c07;if(_0x24e706)_0x3e1df3['drawImage'](_0x24e706,0x0,0x0);}_0x18edf3===0x1&&_0x2fe2d3===0x0?(_0x593788['drawImage'](_0x2f3931,_0x1ad9e2,0x0),_0x1ad9e2+=_0x1630d7):(_0x593788[_0x5ee073(0xb2)](_0x2f3931,0x0,0x0,_0x1630d7,_0xdd6411,_0x1ad9e2,0x0,_0x1630d7*_0x18edf3,_0xdd6411*_0x18edf3),_0x1ad9e2+=_0x1630d7*_0x18edf3),_0x5cccd5<_0x1b5336[_0x5ee073(0x97)]-0x1&&_0x2fe2d3>0x0&&(_0x1ad9e2+=_0x2fe2d3);}const _0x1d7d95=(_0x177855[_0x5ee073(0xbc)]||_0x5ee073(0xcb))[_0x5ee073(0xc1)](/[\\/:*?"<>|]/g,'_'),_0x5c5cbe=document[_0x5ee073(0xad)]('a');_0x5c5cbe['href']=_0x1cccd3[_0x5ee073(0x94)](_0x5ee073(0x8a)),_0x5c5cbe['download']=_0x1d7d95+_0x5ee073(0xce),document['body'][_0x5ee073(0x90)](_0x5c5cbe),_0x5c5cbe[_0x5ee073(0xa2)](),setTimeout(()=>{const _0x45f45d=_0x5ee073;document[_0x45f45d(0xa6)]['removeChild'](_0x5c5cbe);},0x3e8);}async function exportStandalone(){const _0x3f7a2e=_0x31f034;try{showLoading('書き出し中...');}catch(_0x144ae7){}let _0x1caec4=getCurrentProject(),_0x6e898=_0x1caec4[_0x3f7a2e(0xc4)];const _0x3d1a2a=_0x1caec4[_0x3f7a2e(0x8b)]*cellSize,_0x411ecf=_0x1caec4[_0x3f7a2e(0x75)]*cellSize,_0x270099=_0x6e898[_0x3f7a2e(0xd0)](_0x228687=>{const _0x4ab7b0=_0x3f7a2e;let _0xd5d559=document['createElement'](_0x4ab7b0(0x86));_0xd5d559[_0x4ab7b0(0x8b)]=_0x3d1a2a,_0xd5d559[_0x4ab7b0(0x75)]=_0x411ecf;let _0x348d70=_0xd5d559[_0x4ab7b0(0x9f)]('2d');for(let _0x2b7fd5=0x0;_0x2b7fd5<_0x228687[_0x4ab7b0(0xd2)]['length'];_0x2b7fd5++){const _0x7f075e=_0x228687['layers'][_0x2b7fd5]&&_0x228687[_0x4ab7b0(0xd2)][_0x2b7fd5][_0x4ab7b0(0x86)]?_0x228687[_0x4ab7b0(0xd2)][_0x2b7fd5][_0x4ab7b0(0x86)]:_0x228687['layers'][_0x2b7fd5];if(_0x7f075e)_0x348d70['drawImage'](_0x7f075e,0x0,0x0);}return _0x348d70['getImageData'](0x0,0x0,_0x3d1a2a,_0x411ecf)[_0x4ab7b0(0xc7)][_0x4ab7b0(0xa0)];}),_0xc5b93=(_0x1caec4[_0x3f7a2e(0xbc)]||_0x3f7a2e(0xcd))['replace'](/[\\/:*?"<>|]/g,'_'),_0x55e9e1=makeAPNGBlob(_0x270099,_0x3d1a2a,_0x411ecf,animationDelay),_0x23c0e7={'type':'nezumi-standalone','version':0x1,'project':{'width':_0x1caec4['width'],'height':_0x1caec4[_0x3f7a2e(0x75)],'name':_0x1caec4[_0x3f7a2e(0xbc)]||'','activeFrame':_0x1caec4[_0x3f7a2e(0xc6)],'frames':_0x1caec4['frames']['map'](_0x2a60e0=>({'activeLayer':_0x2a60e0[_0x3f7a2e(0x72)],'layers':_0x2a60e0[_0x3f7a2e(0xd2)]['map'](_0x5ba2b9=>_0x5ba2b9&&_0x5ba2b9['canvas']?_0x5ba2b9[_0x3f7a2e(0x86)][_0x3f7a2e(0x94)]():_0x5ba2b9&&_0x5ba2b9[_0x3f7a2e(0x94)]?_0x5ba2b9[_0x3f7a2e(0x94)]():null)}))}},_0xbb1b81=appendMetadataToBlob(_0x55e9e1,_0x23c0e7),_0x59fbaf=URL[_0x3f7a2e(0xb7)](_0xbb1b81),_0x31ebbb=document[_0x3f7a2e(0xad)]('a');_0x31ebbb[_0x3f7a2e(0x77)]=_0x59fbaf,_0x31ebbb['download']=_0xc5b93+_0x3f7a2e(0xa5),document[_0x3f7a2e(0xa6)][_0x3f7a2e(0x90)](_0x31ebbb);try{hideLoading();}catch(_0x4c56b3){}_0x31ebbb[_0x3f7a2e(0xa2)](),setTimeout(()=>{const _0x40cdfa=_0x3f7a2e;document['body'][_0x40cdfa(0xa7)](_0x31ebbb),URL[_0x40cdfa(0xbf)](_0x59fbaf);},0x3e8);}