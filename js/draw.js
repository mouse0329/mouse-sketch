const _0x3742e3=_0x1218;function _0x35d0(){const _0x64e62d=['canvas','isFinite','lineTo','3198915PSrIRZ','3302VdSTQg','lineCap','isArray','layers','getFullYear','33552QqcOcC','visible','rgb(','100%','padStart','search','width','height','beginPath','uuidv4','match','lineWidth','createImageData','162888dtwIkQ','palette-penMode','fillStyle','function','getElementById','21ZdFhqs','assign','globalAlpha','(((.+)+)+)+$','generateVersionFromNow','activeLayer','rgba(','getSeconds','penMode','number','pop','toString','getContext','restore','penSize','constructor','#ccc','fillRect','auto','string','strokeStyle','drawImage','encode','undefined','scanColorsPanel','transparent','add','value','random','save','stroke','warn','ceil','floor','push','moveTo','15760isguTi','getMonth','34YMjejX','min','now','randomUUID','getMinutes','data','timestamp','destination-out','replace','3585554ALwznp','getImageData','#00000000','flat','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','version','sqrt','palette-penSize','circle','source-over','80oCuWgb','butt','86588qhwTNo','145ItlVaJ','max','putImageData','style','length','globalCompositeOperation','eraser','display','slice','stringify','clearRect'];_0x35d0=function(){return _0x64e62d;};return _0x35d0();}(function(_0x17555a,_0x3a08f3){const _0x2531a3=_0x1218,_0x494ff2=_0x17555a();while(!![]){try{const _0x9860b=parseInt(_0x2531a3(0x1bf))/0x1*(parseInt(_0x2531a3(0x182))/0x2)+parseInt(_0x2531a3(0x199))/0x3*(parseInt(_0x2531a3(0x1d4))/0x4)+-parseInt(_0x2531a3(0x1d5))/0x5*(parseInt(_0x2531a3(0x187))/0x6)+parseInt(_0x2531a3(0x1c8))/0x7+-parseInt(_0x2531a3(0x1bd))/0x8+-parseInt(_0x2531a3(0x181))/0x9+-parseInt(_0x2531a3(0x1d2))/0xa*(-parseInt(_0x2531a3(0x194))/0xb);if(_0x9860b===_0x3a08f3)break;else _0x494ff2['push'](_0x494ff2['shift']());}catch(_0x5c05d7){_0x494ff2['push'](_0x494ff2['shift']());}}}(_0x35d0,0x4dd38));const _0x4e8edb=(function(){let _0x366471=!![];return function(_0x3a08dd,_0xf9c371){const _0x34ffac=_0x366471?function(){if(_0xf9c371){const _0xf2251c=_0xf9c371['apply'](_0x3a08dd,arguments);return _0xf9c371=null,_0xf2251c;}}:function(){};return _0x366471=![],_0x34ffac;};}()),_0x37707d=_0x4e8edb(this,function(){const _0x316e4c=_0x1218;return _0x37707d['toString']()[_0x316e4c(0x18c)]('(((.+)+)+)+$')[_0x316e4c(0x1a4)]()[_0x316e4c(0x1a8)](_0x37707d)['search'](_0x316e4c(0x19c));});_0x37707d();function setPenSize(_0x436e0e){const _0x38fbbe=_0x1218;penSize=parseInt(_0x436e0e)||0x1;let _0x2615f4=document[_0x38fbbe(0x198)](_0x38fbbe(0x1a7));if(_0x2615f4)_0x2615f4['value']=penSize;let _0x29c86b=document['getElementById'](_0x38fbbe(0x1cf));if(_0x29c86b)_0x29c86b[_0x38fbbe(0x1b4)]=penSize;}function setPenMode(_0x4baf55){const _0x1939fa=_0x1218;penMode=_0x4baf55;let _0x21e498=document[_0x1939fa(0x198)](_0x1939fa(0x1a1));if(_0x21e498)_0x21e498[_0x1939fa(0x1b4)]=penMode;let _0x4eba67=document[_0x1939fa(0x198)](_0x1939fa(0x195));if(_0x4eba67)_0x4eba67[_0x1939fa(0x1b4)]=penMode;}function isDrawableCanvas(_0x1dfacb){const _0x47fac5=_0x1218;if(!_0x1dfacb)return![];const _0x45b74a=_0x1dfacb[_0x47fac5(0x18d)],_0x24e81c=_0x1dfacb[_0x47fac5(0x18e)];return Number[_0x47fac5(0x1e1)](_0x45b74a)&&Number[_0x47fac5(0x1e1)](_0x24e81c)&&_0x45b74a>0x0&&_0x24e81c>0x0;}function fillAt(_0x402b20,_0x4ecbe8){const _0x37aa05=_0x1218;let _0x113be6=getCurrentProject(),_0xb53388=getCurrentFrame();if(!_0x113be6||!_0xb53388||typeof _0xb53388['activeLayer']!==_0x37aa05(0x1a2)||!_0xb53388[_0x37aa05(0x185)][_0xb53388[_0x37aa05(0x19e)]])return;const _0x4a513b=_0xb53388['layers'][_0xb53388[_0x37aa05(0x19e)]],_0xb2445c=_0x4a513b&&_0x4a513b['canvas']?_0x4a513b[_0x37aa05(0x1e0)]:_0x4a513b;if(!_0xb2445c||!_0xb2445c['getContext'])return;let _0x1b5195=_0xb2445c[_0x37aa05(0x1a5)]('2d',{'willReadFrequently':!![]}),_0x5c9ae9=_0x1b5195[_0x37aa05(0x1c9)](0x0,0x0,_0x113be6[_0x37aa05(0x18d)]*cellSize,_0x113be6[_0x37aa05(0x18e)]*cellSize),_0x226599=_0x402b20*cellSize,_0x4d982a=_0x4ecbe8*cellSize,_0x4e32e9=getPixel(_0x5c9ae9,_0x226599,_0x4d982a),_0x3998cb=currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x4e32e9,_0x3998cb))return;let _0x3574d8=[[_0x402b20,_0x4ecbe8]],_0x10bfb6=new Set();while(_0x3574d8[_0x37aa05(0x1d9)]){let [_0x573160,_0x4ce571]=_0x3574d8[_0x37aa05(0x1a3)]();if(_0x573160<0x0||_0x4ce571<0x0||_0x573160>=_0x113be6[_0x37aa05(0x18d)]||_0x4ce571>=_0x113be6[_0x37aa05(0x18e)])continue;let _0x511985=_0x573160+','+_0x4ce571;if(_0x10bfb6['has'](_0x511985))continue;_0x10bfb6[_0x37aa05(0x1b3)](_0x511985);let _0x11f8c5=_0x573160*cellSize,_0x1ada57=_0x4ce571*cellSize,_0x4a4b07=getPixel(_0x5c9ae9,_0x11f8c5,_0x1ada57);if(!colorsMatch(_0x4a4b07,_0x4e32e9))continue;for(let _0x1ca6ac=0x0;_0x1ca6ac<cellSize;_0x1ca6ac++){for(let _0x534cda=0x0;_0x534cda<cellSize;_0x534cda++){setPixel(_0x5c9ae9,_0x11f8c5+_0x534cda,_0x1ada57+_0x1ca6ac,_0x3998cb);}}_0x3574d8[_0x37aa05(0x1bb)]([_0x573160+0x1,_0x4ce571]),_0x3574d8['push']([_0x573160-0x1,_0x4ce571]),_0x3574d8[_0x37aa05(0x1bb)]([_0x573160,_0x4ce571+0x1]),_0x3574d8['push']([_0x573160,_0x4ce571-0x1]);}_0x1b5195['putImageData'](_0x5c9ae9,0x0,0x0),redrawAll();}function getPixel(_0xe8bb27,_0x1c14e4,_0x463565){const _0x55b039=_0x1218;let _0x2cb75c=(_0x463565*_0xe8bb27[_0x55b039(0x18d)]+_0x1c14e4)*0x4;return[_0xe8bb27['data'][_0x2cb75c],_0xe8bb27['data'][_0x2cb75c+0x1],_0xe8bb27[_0x55b039(0x1c4)][_0x2cb75c+0x2],_0xe8bb27[_0x55b039(0x1c4)][_0x2cb75c+0x3]];}function setPixel(_0x579165,_0x1ca95f,_0x452520,_0x4e85d4){const _0x27b5e=_0x1218;let _0x23e844=(_0x452520*_0x579165[_0x27b5e(0x18d)]+_0x1ca95f)*0x4;_0x579165[_0x27b5e(0x1c4)][_0x23e844]=_0x4e85d4[0x0],_0x579165[_0x27b5e(0x1c4)][_0x23e844+0x1]=_0x4e85d4[0x1],_0x579165['data'][_0x23e844+0x2]=_0x4e85d4[0x2],_0x579165[_0x27b5e(0x1c4)][_0x23e844+0x3]=_0x4e85d4[0x3];}function drawDotXY(_0x3ec07f,_0x2bd656){const _0x321d92=_0x1218;let _0x231586=getCurrentProject(),_0x1665af=getCurrentFrame();if(!_0x1665af||!_0x231586)return;if(typeof _0x3ec07f!==_0x321d92(0x1a2)||typeof _0x2bd656!==_0x321d92(0x1a2)||_0x3ec07f<0x0||_0x2bd656<0x0||!Number[_0x321d92(0x1e1)](_0x231586[_0x321d92(0x18d)])||!Number[_0x321d92(0x1e1)](_0x231586[_0x321d92(0x18e)])||_0x3ec07f>=_0x231586[_0x321d92(0x18d)]||_0x2bd656>=_0x231586[_0x321d92(0x18e)]||!Array[_0x321d92(0x184)](_0x1665af['layers'])||typeof _0x1665af['activeLayer']!==_0x321d92(0x1a2)||!_0x1665af[_0x321d92(0x185)][_0x1665af[_0x321d92(0x19e)]])return;const _0x3e19c4=_0x1665af[_0x321d92(0x185)][_0x1665af['activeLayer']],_0x45eee2=_0x3e19c4&&_0x3e19c4[_0x321d92(0x1e0)]?_0x3e19c4[_0x321d92(0x1e0)]:_0x3e19c4;if(!_0x45eee2||!_0x45eee2['getContext'])return;let _0x4d20d6=_0x45eee2[_0x321d92(0x1a5)]('2d');if(!_0x4d20d6)return;if(currentTool===_0x321d92(0x1db)||currentAlpha===0x0)drawPenShape(_0x4d20d6,_0x3ec07f,_0x2bd656,null,!![]);else{let _0x40df89=hexToRgba(currentColor,currentAlpha);_0x4d20d6[_0x321d92(0x1b6)](),penAlphaMode===_0x321d92(0x1cb)&&currentAlpha<0x1?(drawPenShape(_0x4d20d6,_0x3ec07f,_0x2bd656,null,!![]),drawPenShape(_0x4d20d6,_0x3ec07f,_0x2bd656,_0x40df89,![])):drawPenShape(_0x4d20d6,_0x3ec07f,_0x2bd656,_0x40df89,![]),_0x4d20d6['restore']();}blitLayerArea(_0x45eee2,_0x3ec07f,_0x2bd656,penSize);}function parseColorToRGBA(_0x37d689,_0x1ea263){const _0x565fe7=_0x1218;if(Array[_0x565fe7(0x184)](_0x37d689)&&_0x37d689[_0x565fe7(0x1d9)]>=0x4)return _0x37d689[_0x565fe7(0x1dd)](0x0,0x4);if(!_0x37d689||typeof _0x37d689!==_0x565fe7(0x1ac))return _0x1ea263||[0x0,0x0,0x0,0xff];if(_0x37d689===_0x565fe7(0x1ca)||_0x37d689['toLowerCase']()===_0x565fe7(0x1b2))return[0x0,0x0,0x0,0x0];const _0x2f9824=_0x37d689[_0x565fe7(0x191)](/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/i);if(_0x2f9824){const _0x5a347f=parseInt(_0x2f9824[0x1],0xa),_0x27513f=parseInt(_0x2f9824[0x2],0xa),_0x43b528=parseInt(_0x2f9824[0x3],0xa),_0x228acb=typeof _0x2f9824[0x4]!==_0x565fe7(0x1b0)?Math['round'](parseFloat(_0x2f9824[0x4])*0xff):0xff;return[_0x5a347f,_0x27513f,_0x43b528,_0x228acb];}try{return hexToRgba(_0x37d689);}catch(_0x17a761){return _0x1ea263||[0x0,0x0,0x0,0xff];}}function fillCellCircle(_0x2f4c42,_0x4c7f9a,_0x21df22,_0x41a851,_0xf470f2,_0x276886){const _0x1b4817=_0x1218,_0x5f2402=Math[_0x1b4817(0x1d6)](0x1,Math['round'](_0x41a851/cellSize)),_0x3516e6=_0x4c7f9a+_0x41a851/0x2,_0x3584a0=_0x21df22+_0x41a851/0x2,_0x492c90=_0x41a851/0x2;for(let _0x106052=0x0;_0x106052<_0x5f2402;_0x106052++){for(let _0x3bc60d=0x0;_0x3bc60d<_0x5f2402;_0x3bc60d++){const _0x323ab9=_0x4c7f9a+_0x3bc60d*cellSize,_0x2fa8d9=_0x21df22+_0x106052*cellSize,_0x4f38c8=_0x323ab9+cellSize/0x2,_0x49022a=_0x2fa8d9+cellSize/0x2,_0xf2fd6e=_0x4f38c8-_0x3516e6,_0x271ce8=_0x49022a-_0x3584a0,_0x307cd1=Math[_0x1b4817(0x1ce)](_0xf2fd6e*_0xf2fd6e+_0x271ce8*_0x271ce8);if(_0x307cd1<=_0x492c90+0.0001){if(_0x276886)_0x2f4c42[_0x1b4817(0x1df)](_0x323ab9,_0x2fa8d9,cellSize,cellSize);else _0xf470f2&&(_0x2f4c42[_0x1b4817(0x1b6)](),_0x2f4c42[_0x1b4817(0x19b)]=(_0xf470f2[0x3]||0xff)/0xff,_0x2f4c42[_0x1b4817(0x196)]=_0x1b4817(0x189)+_0xf470f2[0x0]+','+_0xf470f2[0x1]+','+_0xf470f2[0x2]+')',_0x2f4c42['fillRect'](_0x323ab9,_0x2fa8d9,cellSize,cellSize),_0x2f4c42[_0x1b4817(0x1a6)]());}}}}function _0x1218(_0x8cd9bd,_0x1eb33c){_0x8cd9bd=_0x8cd9bd-0x180;const _0x353297=_0x35d0();let _0x37707d=_0x353297[_0x8cd9bd];return _0x37707d;}function drawPenShape(_0x24e3d9,_0x268b3c,_0x373151,_0x52b328,_0x3a21f8){const _0x7e8021=_0x1218,_0x31e6e3=_0x268b3c*cellSize,_0x393a2d=_0x373151*cellSize,_0x227305=penSize*cellSize;if(_0x3a21f8)penMode===_0x7e8021(0x1d0)?fillCellCircle(_0x24e3d9,_0x31e6e3,_0x393a2d,_0x227305,null,!![]):_0x24e3d9[_0x7e8021(0x1df)](_0x31e6e3-Math[_0x7e8021(0x1ba)]((penSize-0x1)/0x2)*cellSize,_0x393a2d-Math[_0x7e8021(0x1ba)]((penSize-0x1)/0x2)*cellSize,_0x227305,_0x227305);else{if(penMode===_0x7e8021(0x1d0)){const _0x74e5ce=parseColorToRGBA(_0x52b328,[0x0,0x0,0x0,0xff]);fillCellCircle(_0x24e3d9,_0x31e6e3,_0x393a2d,_0x227305,_0x74e5ce,![]);}else _0x24e3d9[_0x7e8021(0x1b6)](),Array[_0x7e8021(0x184)](_0x52b328)&&_0x52b328['length']>=0x4?(_0x24e3d9['fillStyle']=_0x7e8021(0x19f)+_0x52b328[0x0]+','+_0x52b328[0x1]+','+_0x52b328[0x2]+',1)',_0x24e3d9[_0x7e8021(0x19b)]=(_0x52b328[0x3]||0xff)/0xff):_0x24e3d9[_0x7e8021(0x196)]=_0x52b328,_0x24e3d9[_0x7e8021(0x1aa)](_0x31e6e3-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x393a2d-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x227305,_0x227305),_0x24e3d9['restore']();}}function blitLayerArea(_0x1000dd,_0x3f5b8d,_0x20a946,_0x36879a,_0x1bdda0){const _0x41a591=_0x1218;if(!_0x1000dd||!_0x1000dd[_0x41a591(0x1a5)]||!isDrawableCanvas(_0x1000dd))return;const _0x35a17c=_0x36879a*cellSize,_0x270f94=Math[_0x41a591(0x1ba)]((_0x36879a-0x1)/0x2)*cellSize,_0x570ca8=_0x3f5b8d*cellSize-_0x270f94,_0x4f9f10=_0x20a946*cellSize-_0x270f94,_0xaf57ba=Math[_0x41a591(0x1d6)](0x0,_0x570ca8),_0x5c9a1f=Math['max'](0x0,_0x4f9f10),_0x3382e2=Math[_0x41a591(0x1c0)](canvas['width'],_0x570ca8+_0x35a17c),_0x28fe36=Math[_0x41a591(0x1c0)](canvas[_0x41a591(0x18e)],_0x4f9f10+_0x35a17c),_0x3ec11d=_0x3382e2-_0xaf57ba,_0x4eef9b=_0x28fe36-_0x5c9a1f;if(_0x3ec11d<=0x0||_0x4eef9b<=0x0)return;const _0x12dd0a=_0x1000dd[_0x41a591(0x1a5)]('2d');try{const _0x9e20f8=_0x12dd0a[_0x41a591(0x1c9)](_0xaf57ba,_0x5c9a1f,_0x3ec11d,_0x4eef9b),_0x5543fa=_0x9e20f8[_0x41a591(0x1c4)];if(penAlphaMode==='flat'){let _0x24d48a=!![];for(let _0x29bf18=0x3;_0x29bf18<_0x5543fa[_0x41a591(0x1d9)];_0x29bf18+=0x4){if(_0x5543fa[_0x29bf18]!==0x0){_0x24d48a=![];break;}}if(_0x24d48a){const _0x1d669d=ctx[_0x41a591(0x193)](_0x3ec11d,_0x4eef9b),_0x1933d3=_0x1d669d['data'];for(let _0x5ae6b8=0x0;_0x5ae6b8<_0x1933d3[_0x41a591(0x1d9)];_0x5ae6b8+=0x4){_0x1933d3[_0x5ae6b8]=_0x1bdda0['r'],_0x1933d3[_0x5ae6b8+0x1]=_0x1bdda0['g'],_0x1933d3[_0x5ae6b8+0x2]=_0x1bdda0['b'],_0x1933d3[_0x5ae6b8+0x3]=_0x1bdda0['a']!==undefined?_0x1bdda0['a']:0xff;}ctx[_0x41a591(0x1d7)](_0x1d669d,_0xaf57ba,_0x5c9a1f),drawGridArea(_0xaf57ba,_0x5c9a1f,_0x3ec11d,_0x4eef9b);return;}}ctx['drawImage'](_0x1000dd,_0xaf57ba,_0x5c9a1f,_0x3ec11d,_0x4eef9b,_0xaf57ba,_0x5c9a1f,_0x3ec11d,_0x4eef9b);}catch(_0x149e5e){redrawAll();return;}createPalette();const _0x3c8341=document[_0x41a591(0x198)](_0x41a591(0x1b1));if(_0x3c8341){const _0x151ea4=performance[_0x41a591(0x1c1)]();if(!lastColorScanAt||_0x151ea4-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x3d2656=scanImageColors();renderScanPanel(_0x3d2656),_0x3c8341['style'][_0x41a591(0x1dc)]='',lastColorScanAt=_0x151ea4;}}drawGridArea(_0xaf57ba,_0x5c9a1f,_0x3ec11d,_0x4eef9b);}function drawGridArea(_0x1e66f7,_0xa4acbe,_0x450086,_0x4321ca){const _0x37512e=_0x1218;if(!showGrid||!_0x450086||!_0x4321ca)return;ctx['save'](),ctx[_0x37512e(0x1ad)]='#ccc',ctx[_0x37512e(0x192)]=0x1,ctx[_0x37512e(0x183)]=_0x37512e(0x1d3);const _0x8e6038=0x1,_0x288c37=Math[_0x37512e(0x1d6)](0x0,Math[_0x37512e(0x1ba)]((_0x1e66f7-_0x8e6038)/cellSize)*cellSize),_0x271b00=Math[_0x37512e(0x1c0)](canvas[_0x37512e(0x18d)],Math[_0x37512e(0x1b9)]((_0x1e66f7+_0x450086+_0x8e6038)/cellSize)*cellSize),_0x43c251=Math['max'](0x0,Math[_0x37512e(0x1ba)]((_0xa4acbe-_0x8e6038)/cellSize)*cellSize),_0x1a82d3=Math[_0x37512e(0x1c0)](canvas['height'],Math['ceil']((_0xa4acbe+_0x4321ca+_0x8e6038)/cellSize)*cellSize);for(let _0x2e3eb0=_0x288c37;_0x2e3eb0<=_0x271b00;_0x2e3eb0+=cellSize){const _0x212899=_0x2e3eb0+0.5;ctx[_0x37512e(0x18f)](),ctx[_0x37512e(0x1bc)](_0x212899,_0x43c251),ctx['lineTo'](_0x212899,_0x1a82d3),ctx[_0x37512e(0x1b7)]();}for(let _0xe349b6=_0x43c251;_0xe349b6<=_0x1a82d3;_0xe349b6+=cellSize){const _0xcc043a=_0xe349b6+0.5;ctx[_0x37512e(0x18f)](),ctx[_0x37512e(0x1bc)](_0x288c37,_0xcc043a),ctx[_0x37512e(0x180)](_0x271b00,_0xcc043a),ctx['stroke']();}ctx[_0x37512e(0x1a6)]();}function drawDotTouch(_0xb3cfe0,_0x5d7a71){const _0x639dd=_0x1218;let _0x40951b=getCurrentProject(),_0x203554=getCurrentFrame();if(!_0x40951b||!_0x203554)return;if(_0xb3cfe0<0x0||_0x5d7a71<0x0||_0xb3cfe0>=_0x40951b['width']||_0x5d7a71>=_0x40951b[_0x639dd(0x18e)])return;const _0xb67fdc=_0x203554[_0x639dd(0x185)][_0x203554[_0x639dd(0x19e)]],_0x546208=_0xb67fdc&&_0xb67fdc[_0x639dd(0x1e0)]?_0xb67fdc['canvas']:_0xb67fdc;if(!_0x546208||!_0x546208[_0x639dd(0x1a5)])return;let _0x34b85a=_0x546208[_0x639dd(0x1a5)]('2d');if(currentTool===_0x639dd(0x1db)||currentAlpha===0x0)drawPenShape(_0x34b85a,_0xb3cfe0,_0x5d7a71,null,!![]);else{let _0x5020d7=hexToRgba(currentColor,currentAlpha);_0x34b85a['save'](),penAlphaMode==='flat'&&currentAlpha<0x1?(_0x34b85a['globalAlpha']=0x1,_0x34b85a[_0x639dd(0x1da)]=_0x639dd(0x1c6),drawPenShape(_0x34b85a,_0xb3cfe0,_0x5d7a71,null,!![]),_0x34b85a[_0x639dd(0x1da)]=_0x639dd(0x1d1),drawPenShape(_0x34b85a,_0xb3cfe0,_0x5d7a71,_0x5020d7,![])):drawPenShape(_0x34b85a,_0xb3cfe0,_0x5d7a71,_0x5020d7,![]),_0x34b85a[_0x639dd(0x1a6)]();}blitLayerArea(_0x546208,_0xb3cfe0,_0x5d7a71,penSize);}function drawGrid(_0x275c8d,_0x116ff3){const _0xe303d8=_0x1218;if(!showGrid)return;ctx[_0xe303d8(0x1b6)](),ctx[_0xe303d8(0x1ad)]=_0xe303d8(0x1a9),ctx['lineWidth']=0x1,ctx[_0xe303d8(0x183)]=_0xe303d8(0x1d3);for(let _0x31c51c=0x0;_0x31c51c<=_0x275c8d;_0x31c51c++){const _0x484b53=_0x31c51c*cellSize+0.5;ctx[_0xe303d8(0x18f)](),ctx[_0xe303d8(0x1bc)](_0x484b53,0x0),ctx[_0xe303d8(0x180)](_0x484b53,_0x116ff3*cellSize),ctx['stroke']();}for(let _0x23ecc3=0x0;_0x23ecc3<=_0x116ff3;_0x23ecc3++){const _0x196866=_0x23ecc3*cellSize+0.5;ctx[_0xe303d8(0x18f)](),ctx['moveTo'](0x0,_0x196866),ctx[_0xe303d8(0x180)](_0x275c8d*cellSize,_0x196866),ctx[_0xe303d8(0x1b7)]();}ctx[_0xe303d8(0x1a6)]();}function redrawAll(){const _0x44a4d4=_0x1218;let _0x4d9c03=getCurrentProject(),_0x177a52=getCurrentFrame();canvas[_0x44a4d4(0x18d)]=_0x4d9c03[_0x44a4d4(0x18d)]*cellSize,canvas['height']=_0x4d9c03[_0x44a4d4(0x18e)]*cellSize,ctx[_0x44a4d4(0x1df)](0x0,0x0,canvas[_0x44a4d4(0x18d)],canvas['height']);for(let _0xfbe759=0x0;_0xfbe759<(Array['isArray'](_0x177a52[_0x44a4d4(0x185)])?_0x177a52['layers'][_0x44a4d4(0x1d9)]:0x0);_0xfbe759++){const _0x52ec82=_0x177a52['layers'][_0xfbe759];if(!_0x52ec82)continue;const _0x4b4ae8=typeof _0x52ec82[_0x44a4d4(0x188)]!==_0x44a4d4(0x1b0)?_0x52ec82[_0x44a4d4(0x188)]:!![];if(!_0x4b4ae8)continue;const _0x30020e=_0x52ec82[_0x44a4d4(0x1e0)]?_0x52ec82[_0x44a4d4(0x1e0)]:_0x52ec82;if(!_0x30020e)continue;try{ctx[_0x44a4d4(0x1b6)]();dimFrontLayers&&typeof _0x177a52[_0x44a4d4(0x19e)]===_0x44a4d4(0x1a2)&&_0xfbe759>_0x177a52['activeLayer']?ctx[_0x44a4d4(0x19b)]=FRONT_LAYER_DIM_ALPHA:ctx[_0x44a4d4(0x19b)]=0x1;if(typeof HTMLCanvasElement!==_0x44a4d4(0x1b0)&&_0x30020e instanceof HTMLCanvasElement){if(isDrawableCanvas(_0x30020e))ctx[_0x44a4d4(0x1ae)](_0x30020e,0x0,0x0);}else{if(typeof HTMLImageElement!=='undefined'&&_0x30020e instanceof HTMLImageElement){if(_0x30020e['complete'])ctx['drawImage'](_0x30020e,0x0,0x0);}else{if(typeof OffscreenCanvas!==_0x44a4d4(0x1b0)&&_0x30020e instanceof OffscreenCanvas){if(isDrawableCanvas(_0x30020e))ctx[_0x44a4d4(0x1ae)](_0x30020e,0x0,0x0);}else try{if(isDrawableCanvas(_0x30020e))ctx[_0x44a4d4(0x1ae)](_0x30020e,0x0,0x0);}catch(_0x3944b6){}}}ctx[_0x44a4d4(0x1a6)]();}catch(_0x341847){console[_0x44a4d4(0x1b8)]('redrawAll:\x20failed\x20drawing\x20layer',_0x341847);}}drawGrid(_0x4d9c03[_0x44a4d4(0x18d)],_0x4d9c03['height']);wrapper&&(wrapper[_0x44a4d4(0x1d8)][_0x44a4d4(0x18d)]=_0x44a4d4(0x18a),wrapper['style'][_0x44a4d4(0x18e)]=_0x44a4d4(0x1ab));const _0x388020=document[_0x44a4d4(0x198)](_0x44a4d4(0x1b1));if(_0x388020){const _0x33e1a6=performance[_0x44a4d4(0x1c1)]();if(!lastColorScanAt||_0x33e1a6-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x8ae111=scanImageColors();renderScanPanel(_0x8ae111),_0x388020[_0x44a4d4(0x1d8)][_0x44a4d4(0x1dc)]='',lastColorScanAt=_0x33e1a6;}}}function uuidv4(){const _0x43b165=_0x1218;if(typeof crypto!==_0x43b165(0x1b0)&&typeof crypto[_0x43b165(0x1c2)]===_0x43b165(0x197))try{return crypto['randomUUID']();}catch(_0x4b5a63){}return _0x43b165(0x1cc)[_0x43b165(0x1c7)](/[xy]/g,_0x381bb0=>{const _0xdcf326=_0x43b165,_0x7b84a7=Math[_0xdcf326(0x1b5)]()*0x10|0x0,_0x358839=_0x381bb0==='x'?_0x7b84a7:_0x7b84a7&0x3|0x8;return _0x358839[_0xdcf326(0x1a4)](0x10);});}function generateVersionFromNow(){const _0x4af770=_0x1218,_0x3599db=new Date(),_0x72258=_0x3599db[_0x4af770(0x186)](),_0x2509f8=String(_0x3599db[_0x4af770(0x1be)]()+0x1)[_0x4af770(0x18b)](0x2,'0'),_0x2c9da0=String(_0x3599db['getDate']())[_0x4af770(0x18b)](0x2,'0'),_0x40a2f2=String(_0x3599db['getHours']())[_0x4af770(0x18b)](0x2,'0'),_0x38b024=String(_0x3599db[_0x4af770(0x1c3)]())[_0x4af770(0x18b)](0x2,'0'),_0x4e3f4b=String(_0x3599db[_0x4af770(0x1a0)]())[_0x4af770(0x18b)](0x2,'0');return _0x72258+'.'+_0x2509f8+'.'+_0x2c9da0+'.'+_0x40a2f2+_0x38b024+_0x4e3f4b;}function ensureMetadata(_0x48065c){const _0x231767=_0x1218,_0x826d89=Object[_0x231767(0x19a)]({},_0x48065c||{});if(!_0x826d89['id'])_0x826d89['id']=uuidv4();if(!_0x826d89['version'])_0x826d89[_0x231767(0x1cd)]=generateVersionFromNow();if(!_0x826d89['timestamp'])_0x826d89[_0x231767(0x1c5)]=new Date()['toISOString']();return _0x826d89;}function appendMetadataToBlob(_0x527e44,_0x4cc5a3){const _0x1e8660=_0x1218,_0x23f21c=ensureMetadata(_0x4cc5a3),_0x428857=new TextEncoder(),_0x100335=_0x428857[_0x1e8660(0x1af)](NEZUMI_METADATA_SIG),_0x4334e9=_0x428857[_0x1e8660(0x1af)](JSON[_0x1e8660(0x1de)](_0x23f21c));return new Blob([_0x527e44,_0x100335,_0x4334e9],{'type':_0x527e44['type']||'application/octet-stream'});}typeof window!=='undefined'&&(window[_0x3742e3(0x19d)]=generateVersionFromNow,window[_0x3742e3(0x190)]=uuidv4,window['ensureMetadata']=ensureMetadata);