const a0_0xed34dc=a0_0x39a8;(function(_0x28a183,_0x31455a){const _0x3ae016=a0_0x39a8,_0x10a2bd=_0x28a183();while(!![]){try{const _0x50f678=parseInt(_0x3ae016(0x1ee))/0x1*(-parseInt(_0x3ae016(0x21f))/0x2)+-parseInt(_0x3ae016(0x188))/0x3*(-parseInt(_0x3ae016(0x169))/0x4)+parseInt(_0x3ae016(0x1ed))/0x5*(parseInt(_0x3ae016(0x23f))/0x6)+-parseInt(_0x3ae016(0x1f1))/0x7*(-parseInt(_0x3ae016(0x24a))/0x8)+-parseInt(_0x3ae016(0x1d3))/0x9*(parseInt(_0x3ae016(0x287))/0xa)+-parseInt(_0x3ae016(0x209))/0xb+-parseInt(_0x3ae016(0x1ab))/0xc;if(_0x50f678===_0x31455a)break;else _0x10a2bd['push'](_0x10a2bd['shift']());}catch(_0x5bfe6d){_0x10a2bd['push'](_0x10a2bd['shift']());}}}(a0_0xcf00,0x346de));const a0_0x26a4ed=(function(){let _0x13eeae=!![];return function(_0x55f12c,_0x5796df){const _0x5d2097=_0x13eeae?function(){const _0x2cf413=a0_0x39a8;if(_0x5796df){const _0x345954=_0x5796df[_0x2cf413(0x140)](_0x55f12c,arguments);return _0x5796df=null,_0x345954;}}:function(){};return _0x13eeae=![],_0x5d2097;};}()),a0_0x56447e=a0_0x26a4ed(this,function(){const _0x216c05=a0_0x39a8;return a0_0x56447e[_0x216c05(0x1bf)]()[_0x216c05(0x236)]('(((.+)+)+)+$')[_0x216c05(0x1bf)]()['constructor'](a0_0x56447e)[_0x216c05(0x236)](_0x216c05(0x1f9));});a0_0x56447e();let canvas=document[a0_0xed34dc(0x25b)]('canvas'),ctx=canvas['getContext']('2d');function a0_0x39a8(_0x4ed754,_0xb1e171){_0x4ed754=_0x4ed754-0x132;const _0x4acddc=a0_0xcf00();let _0x56447e=_0x4acddc[_0x4ed754];return _0x56447e;}const wrapper=document['getElementById'](a0_0xed34dc(0x14d));let cellSize=0x14,currentColor=a0_0xed34dc(0x1cf),currentTool='pen',penSize=0x1,penMode='square',layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x2c45e6=0x10,_0x445724=0x10,_0x2fb9f3=''){const _0x4bef6b=a0_0xed34dc;let _0xbd9685=0x14,_0x2f1d8b=[],_0x121120=[],_0x1c588d=[],_0x16f5ee=document['createElement'](_0x4bef6b(0x191));_0x16f5ee[_0x4bef6b(0x24e)]=_0x2c45e6*_0xbd9685,_0x16f5ee['height']=_0x445724*_0xbd9685,_0x2f1d8b[_0x4bef6b(0x16f)](_0x16f5ee),_0x121120[_0x4bef6b(0x16f)]([]),_0x1c588d[_0x4bef6b(0x16f)]([]);let _0x2e2261={'layers':_0x2f1d8b,'activeLayer':0x0,'layerHistories':_0x121120,'layerRedoStacks':_0x1c588d};return{'frames':[_0x2e2261],'activeFrame':0x0,'width':_0x2c45e6,'height':_0x445724,'name':_0x2fb9f3||'ÁîªÂÉè'+(projects[_0x4bef6b(0x157)]+0x1)};}function updateProjectUI(){const _0x4e3da8=a0_0xed34dc,_0x5c7b70=document[_0x4e3da8(0x25b)](_0x4e3da8(0x184));_0x5c7b70[_0x4e3da8(0x289)]='';for(let _0x3cfe52=0x0;_0x3cfe52<projects[_0x4e3da8(0x157)];_0x3cfe52++){const _0x5cb9ef=document['createElement'](_0x4e3da8(0x257));_0x5cb9ef[_0x4e3da8(0x19f)]=_0x4e3da8(0x1f7)+(_0x3cfe52===activeProject?_0x4e3da8(0x220):''),_0x5cb9ef[_0x4e3da8(0x224)]=()=>{activeProject=_0x3cfe52,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x2f38ec=document[_0x4e3da8(0x246)]('span');_0x2f38ec[_0x4e3da8(0x19f)]=_0x4e3da8(0x29a),_0x2f38ec[_0x4e3da8(0x17b)]=projects[_0x3cfe52][_0x4e3da8(0x219)]||'ÁîªÂÉè'+(_0x3cfe52+0x1),_0x2f38ec[_0x4e3da8(0x16c)]=_0x4e3da8(0x1c4),_0x2f38ec[_0x4e3da8(0x224)]=_0x3890f1=>{const _0x1247c9=_0x4e3da8;_0x3890f1[_0x1247c9(0x134)](),editProjectName(_0x3cfe52,_0x2f38ec);},_0x5cb9ef[_0x4e3da8(0x216)](_0x2f38ec);const _0x49e8e3=document[_0x4e3da8(0x246)]('button');_0x49e8e3[_0x4e3da8(0x17b)]='ÂâäÈô§',_0x49e8e3['className']='project-btn',_0x49e8e3[_0x4e3da8(0x180)]=projects[_0x4e3da8(0x157)]===0x1,_0x49e8e3[_0x4e3da8(0x224)]=_0x43f9ff=>{_0x43f9ff['stopPropagation'](),removeProjectAt(_0x3cfe52);},_0x5cb9ef[_0x4e3da8(0x216)](_0x49e8e3),_0x5c7b70[_0x4e3da8(0x216)](_0x5cb9ef);}document[_0x4e3da8(0x25b)](_0x4e3da8(0x1b3))['textContent']='('+projects[_0x4e3da8(0x157)]+'Êûö)';}function editProjectName(_0x1d0a32,_0x181d31){const _0x4ad8b6=a0_0xed34dc,_0x2fe336=document[_0x4ad8b6(0x246)](_0x4ad8b6(0x158));_0x2fe336[_0x4ad8b6(0x1c9)]=_0x4ad8b6(0x1be),_0x2fe336[_0x4ad8b6(0x222)]=projects[_0x1d0a32]['name']||'ÁîªÂÉè'+(_0x1d0a32+0x1),_0x2fe336['className']='project-name-edit',_0x2fe336[_0x4ad8b6(0x1d8)][_0x4ad8b6(0x24e)]=_0x4ad8b6(0x21e),_0x2fe336[_0x4ad8b6(0x149)]=()=>{const _0x454009=_0x4ad8b6;projects[_0x1d0a32][_0x454009(0x219)]=_0x2fe336[_0x454009(0x222)][_0x454009(0x15e)]()||'ÁîªÂÉè'+(_0x1d0a32+0x1),updateProjectUI();},_0x2fe336[_0x4ad8b6(0x1c1)]=_0x3ded90=>{const _0x3bd377=_0x4ad8b6;if(_0x3ded90[_0x3bd377(0x155)]===_0x3bd377(0x1fb))_0x2fe336['blur']();},_0x181d31['replaceWith'](_0x2fe336),_0x2fe336[_0x4ad8b6(0x213)](),_0x2fe336['select']();}function showNewProjectDialog(_0x129bff){const _0xbbb07a=a0_0xed34dc;let _0x9ac3bd=document[_0xbbb07a(0x25b)](_0xbbb07a(0x270));if(_0x9ac3bd)_0x9ac3bd[_0xbbb07a(0x22a)]();const _0x553f87=document[_0xbbb07a(0x246)](_0xbbb07a(0x257));_0x553f87['id']=_0xbbb07a(0x270),_0x553f87[_0xbbb07a(0x1d8)][_0xbbb07a(0x25d)]=_0xbbb07a(0x255),_0x553f87['style'][_0xbbb07a(0x154)]='0',_0x553f87[_0xbbb07a(0x1d8)][_0xbbb07a(0x266)]='0',_0x553f87['style'][_0xbbb07a(0x24e)]=_0xbbb07a(0x22e),_0x553f87[_0xbbb07a(0x1d8)][_0xbbb07a(0x144)]=_0xbbb07a(0x179),_0x553f87[_0xbbb07a(0x1d8)][_0xbbb07a(0x145)]=_0xbbb07a(0x172),_0x553f87[_0xbbb07a(0x1d8)][_0xbbb07a(0x19a)]='flex',_0x553f87[_0xbbb07a(0x1d8)][_0xbbb07a(0x1d7)]=_0xbbb07a(0x293),_0x553f87[_0xbbb07a(0x1d8)][_0xbbb07a(0x208)]=_0xbbb07a(0x293),_0x553f87[_0xbbb07a(0x1d8)]['zIndex']=_0xbbb07a(0x200),_0x553f87[_0xbbb07a(0x289)]=_0xbbb07a(0x173)+(projects[_0xbbb07a(0x157)]+0x1)+_0xbbb07a(0x1ef),document['body'][_0xbbb07a(0x216)](_0x553f87),_0x553f87['querySelector'](_0xbbb07a(0x27b))[_0xbbb07a(0x224)]=()=>{const _0x3dfc14=_0xbbb07a,_0x4c8b50=parseInt(_0x553f87[_0x3dfc14(0x291)](_0x3dfc14(0x1ca))['value'],0xa),_0x4c759b=parseInt(_0x553f87[_0x3dfc14(0x291)](_0x3dfc14(0x21b))[_0x3dfc14(0x222)],0xa),_0x25ca0d=_0x553f87[_0x3dfc14(0x291)](_0x3dfc14(0x1b2))[_0x3dfc14(0x222)][_0x3dfc14(0x15e)]();_0x553f87[_0x3dfc14(0x22a)]();if(_0x129bff)_0x129bff(_0x4c8b50,_0x4c759b,_0x25ca0d);},_0x553f87[_0xbbb07a(0x291)](_0xbbb07a(0x21a))[_0xbbb07a(0x224)]=()=>{const _0x35206f=_0xbbb07a;_0x553f87[_0x35206f(0x22a)]();};}function addProject(){showNewProjectDialog((_0x3f0347,_0x133995,_0x4c6164)=>{const _0x904460=a0_0x39a8;if(!Number[_0x904460(0x198)](_0x3f0347)||_0x3f0347<0x1)_0x3f0347=0x10;if(!Number['isFinite'](_0x133995)||_0x133995<0x1)_0x133995=0x10;projects[_0x904460(0x16f)](createProject(_0x3f0347,_0x133995,_0x4c6164)),activeProject=projects['length']-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x175e0e){const _0x31a624=a0_0xed34dc;if(projects[_0x31a624(0x157)]<=0x1)return;projects[_0x31a624(0x1d2)](_0x175e0e,0x1);if(activeProject>=projects[_0x31a624(0x157)])activeProject=projects[_0x31a624(0x157)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x4bbc09=a0_0xed34dc,_0x446224=document[_0x4bbc09(0x25b)](_0x4bbc09(0x217)),_0x4864e6=getCurrentProject();_0x446224[_0x4bbc09(0x289)]='';for(let _0x474248=0x0;_0x474248<_0x4864e6['frames'][_0x4bbc09(0x157)];_0x474248++){const _0x13a88d=document[_0x4bbc09(0x246)]('div');_0x13a88d[_0x4bbc09(0x19f)]=_0x4bbc09(0x276)+(_0x474248===_0x4864e6[_0x4bbc09(0x146)]?'\x20active':''),_0x13a88d[_0x4bbc09(0x224)]=()=>{const _0x2c4c81=_0x4bbc09;_0x4864e6[_0x2c4c81(0x146)]=_0x474248,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x120191=document['createElement']('canvas');_0x120191[_0x4bbc09(0x19f)]='frame-thumb',_0x120191[_0x4bbc09(0x24e)]=0x20,_0x120191['height']=0x20;let _0x2c20f4=_0x120191[_0x4bbc09(0x1fa)]('2d');_0x2c20f4[_0x4bbc09(0x26a)](0x0,0x0,0x20,0x20);for(let _0x34eb9d=0x0;_0x34eb9d<_0x4864e6['frames'][_0x474248][_0x4bbc09(0x1e0)]['length'];_0x34eb9d++){_0x2c20f4[_0x4bbc09(0x1ce)](_0x4864e6['frames'][_0x474248][_0x4bbc09(0x1e0)][_0x34eb9d],0x0,0x0,_0x120191[_0x4bbc09(0x24e)],_0x120191[_0x4bbc09(0x144)]);}_0x13a88d[_0x4bbc09(0x216)](_0x120191);const _0x59a788=document[_0x4bbc09(0x246)]('span');_0x59a788[_0x4bbc09(0x17b)]='F'+(_0x474248+0x1),_0x13a88d[_0x4bbc09(0x216)](_0x59a788);const _0x2bbd8d=document[_0x4bbc09(0x246)](_0x4bbc09(0x22c));_0x2bbd8d[_0x4bbc09(0x17b)]='ÂâäÈô§',_0x2bbd8d[_0x4bbc09(0x19f)]='frame-btn',_0x2bbd8d[_0x4bbc09(0x180)]=_0x4864e6[_0x4bbc09(0x13b)]['length']===0x1,_0x2bbd8d[_0x4bbc09(0x224)]=_0x214b87=>{const _0xbc4f79=_0x4bbc09;_0x214b87[_0xbc4f79(0x134)](),removeFrameAt(_0x474248);},_0x13a88d[_0x4bbc09(0x216)](_0x2bbd8d),_0x446224[_0x4bbc09(0x216)](_0x13a88d);}document[_0x4bbc09(0x25b)]('frameCount')[_0x4bbc09(0x17b)]='('+_0x4864e6[_0x4bbc09(0x13b)][_0x4bbc09(0x157)]+_0x4bbc09(0x226);}function addFrame(){const _0x583a5f=a0_0xed34dc;let _0x30e855=getCurrentProject(),_0x353f2c=_0x30e855[_0x583a5f(0x13b)][_0x30e855['activeFrame']],_0x5631f4=_0x353f2c[_0x583a5f(0x1e0)]['map'](_0x3c76ad=>{const _0x419c01=_0x583a5f;let _0x4f242f=document[_0x419c01(0x246)](_0x419c01(0x191));return _0x4f242f['width']=_0x3c76ad[_0x419c01(0x24e)],_0x4f242f['height']=_0x3c76ad[_0x419c01(0x144)],_0x4f242f[_0x419c01(0x1fa)]('2d')['drawImage'](_0x3c76ad,0x0,0x0),_0x4f242f;}),_0x10c169=_0x5631f4[_0x583a5f(0x26e)](()=>[]),_0x273228=_0x5631f4[_0x583a5f(0x26e)](()=>[]),_0x1ab028={'layers':_0x5631f4,'activeLayer':0x0,'layerHistories':_0x10c169,'layerRedoStacks':_0x273228};_0x30e855[_0x583a5f(0x13b)][_0x583a5f(0x1d2)](_0x30e855[_0x583a5f(0x146)]+0x1,0x0,_0x1ab028),_0x30e855[_0x583a5f(0x146)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x2c1142){const _0xa67877=a0_0xed34dc;let _0x2c2aca=getCurrentProject();if(_0x2c2aca[_0xa67877(0x13b)][_0xa67877(0x157)]<=0x1)return;_0x2c2aca[_0xa67877(0x13b)][_0xa67877(0x1d2)](_0x2c1142,0x1);if(_0x2c2aca['activeFrame']>=_0x2c2aca[_0xa67877(0x13b)]['length'])_0x2c2aca[_0xa67877(0x146)]=_0x2c2aca[_0xa67877(0x13b)][_0xa67877(0x157)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){return getCurrentProject()['frames'][getCurrentProject()['activeFrame']];}function updateLayerUI(){const _0x380680=a0_0xed34dc;let {layers:_0x4d8399,activeLayer:_0x245e3b}=getCurrentFrame();document[_0x380680(0x25b)](_0x380680(0x1fc))[_0x380680(0x17b)]='('+_0x4d8399[_0x380680(0x157)]+'Êûö)';const _0x194631=document[_0x380680(0x25b)]('layerList');_0x194631['innerHTML']='';for(let _0x2c1784=_0x4d8399[_0x380680(0x157)]-0x1;_0x2c1784>=0x0;_0x2c1784--){const _0xa54b4e=document['createElement'](_0x380680(0x257));_0xa54b4e[_0x380680(0x19f)]='layer-item'+(_0x2c1784===_0x245e3b?_0x380680(0x220):''),_0xa54b4e[_0x380680(0x224)]=_0x5bd30f=>{const _0x46f86e=_0x380680;if(_0x5bd30f[_0x46f86e(0x19b)][_0x46f86e(0x1ae)][_0x46f86e(0x1d6)]('layer-btn'))return;getCurrentFrame()[_0x46f86e(0x29d)]=_0x2c1784,updateLayerUI(),redrawAll();};const _0x1f883b=document['createElement'](_0x380680(0x191));_0x1f883b[_0x380680(0x19f)]=_0x380680(0x132),_0x1f883b['width']=0x20,_0x1f883b[_0x380680(0x144)]=0x20;let _0x113f28=_0x1f883b[_0x380680(0x1fa)]('2d');_0x113f28[_0x380680(0x26a)](0x0,0x0,0x20,0x20),_0x113f28[_0x380680(0x1ce)](_0x4d8399[_0x2c1784],0x0,0x0,_0x1f883b['width'],_0x1f883b['height']),_0xa54b4e['appendChild'](_0x1f883b);const _0x2ea38e=document[_0x380680(0x246)](_0x380680(0x202));_0x2ea38e[_0x380680(0x17b)]=_0x380680(0x269)+(_0x2c1784+0x1),_0xa54b4e[_0x380680(0x216)](_0x2ea38e);const _0x3f0ef7=document['createElement'](_0x380680(0x22c));_0x3f0ef7[_0x380680(0x17b)]='‚Üë',_0x3f0ef7[_0x380680(0x19f)]='layer-btn',_0x3f0ef7[_0x380680(0x16c)]=_0x380680(0x1fd),_0x3f0ef7[_0x380680(0x180)]=_0x2c1784===_0x4d8399['length']-0x1,_0x3f0ef7['onclick']=_0x12b41f=>{const _0x1f45ee=_0x380680;_0x12b41f[_0x1f45ee(0x134)](),_0x2c1784<_0x4d8399[_0x1f45ee(0x157)]-0x1&&swapLayer(_0x2c1784,_0x2c1784+0x1);},_0xa54b4e[_0x380680(0x216)](_0x3f0ef7);const _0x24142a=document[_0x380680(0x246)](_0x380680(0x22c));_0x24142a[_0x380680(0x17b)]='‚Üì',_0x24142a[_0x380680(0x19f)]=_0x380680(0x1eb),_0x24142a[_0x380680(0x16c)]=_0x380680(0x238),_0x24142a[_0x380680(0x180)]=_0x2c1784===0x0,_0x24142a['onclick']=_0x40e51d=>{_0x40e51d['stopPropagation'](),_0x2c1784>0x0&&swapLayer(_0x2c1784,_0x2c1784-0x1);},_0xa54b4e['appendChild'](_0x24142a);const _0x417d8d=document[_0x380680(0x246)]('button');_0x417d8d['textContent']='ÂâäÈô§',_0x417d8d[_0x380680(0x19f)]='layer-btn',_0x417d8d[_0x380680(0x16c)]=_0x380680(0x1e8),_0x417d8d[_0x380680(0x180)]=_0x4d8399[_0x380680(0x157)]===0x1,_0x417d8d[_0x380680(0x224)]=_0x22005d=>{_0x22005d['stopPropagation'](),removeLayerAt(_0x2c1784);},_0xa54b4e[_0x380680(0x216)](_0x417d8d),_0x194631[_0x380680(0x216)](_0xa54b4e);}}function swapLayer(_0x59c900,_0x2ffa71){const _0x3cbb82=a0_0xed34dc;let _0x469e85=getCurrentFrame();[_0x469e85[_0x3cbb82(0x1e0)][_0x59c900],_0x469e85['layers'][_0x2ffa71]]=[_0x469e85[_0x3cbb82(0x1e0)][_0x2ffa71],_0x469e85[_0x3cbb82(0x1e0)][_0x59c900]],[_0x469e85['layerHistories'][_0x59c900],_0x469e85[_0x3cbb82(0x1a0)][_0x2ffa71]]=[_0x469e85['layerHistories'][_0x2ffa71],_0x469e85[_0x3cbb82(0x1a0)][_0x59c900]],[_0x469e85[_0x3cbb82(0x1b6)][_0x59c900],_0x469e85[_0x3cbb82(0x1b6)][_0x2ffa71]]=[_0x469e85[_0x3cbb82(0x1b6)][_0x2ffa71],_0x469e85['layerRedoStacks'][_0x59c900]];if(_0x469e85[_0x3cbb82(0x29d)]===_0x59c900)_0x469e85[_0x3cbb82(0x29d)]=_0x2ffa71;else{if(_0x469e85[_0x3cbb82(0x29d)]===_0x2ffa71)_0x469e85[_0x3cbb82(0x29d)]=_0x59c900;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x52bde2){const _0x195449=a0_0xed34dc;let _0x4e88ad=getCurrentFrame();if(_0x4e88ad[_0x195449(0x1e0)]['length']<=0x1)return;_0x4e88ad[_0x195449(0x1e0)][_0x195449(0x1d2)](_0x52bde2,0x1),_0x4e88ad[_0x195449(0x1a0)][_0x195449(0x1d2)](_0x52bde2,0x1),_0x4e88ad[_0x195449(0x1b6)][_0x195449(0x1d2)](_0x52bde2,0x1);if(_0x4e88ad[_0x195449(0x29d)]>=_0x4e88ad[_0x195449(0x1e0)]['length'])_0x4e88ad[_0x195449(0x29d)]=_0x4e88ad['layers'][_0x195449(0x157)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x24324c=a0_0xed34dc;let _0x110834=getCurrentProject(),_0x307d35=getCurrentFrame(),_0x443912=document['createElement'](_0x24324c(0x191));_0x443912[_0x24324c(0x24e)]=_0x110834[_0x24324c(0x24e)]*cellSize,_0x443912['height']=_0x110834[_0x24324c(0x144)]*cellSize,_0x307d35[_0x24324c(0x1e0)][_0x24324c(0x16f)](_0x443912),_0x307d35['layerHistories'][_0x24324c(0x16f)]([]),_0x307d35[_0x24324c(0x1b6)]['push']([]),_0x307d35[_0x24324c(0x29d)]=_0x307d35[_0x24324c(0x1e0)]['length']-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x141678=a0_0xed34dc;let _0x7b6a36=getCurrentFrame();if(_0x7b6a36[_0x141678(0x1e0)]['length']<=0x1)return;_0x7b6a36[_0x141678(0x1e0)][_0x141678(0x1d2)](_0x7b6a36[_0x141678(0x29d)],0x1),_0x7b6a36[_0x141678(0x1a0)][_0x141678(0x1d2)](_0x7b6a36[_0x141678(0x29d)],0x1),_0x7b6a36[_0x141678(0x1b6)]['splice'](_0x7b6a36[_0x141678(0x29d)],0x1),_0x7b6a36[_0x141678(0x29d)]=Math[_0x141678(0x233)](0x0,_0x7b6a36[_0x141678(0x29d)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x3851e2){const _0x204070=a0_0xed34dc;getCurrentFrame()[_0x204070(0x29d)]=parseInt(_0x3851e2),updateLayerUI();}let PALETTE_COLORS=[a0_0xed34dc(0x261),a0_0xed34dc(0x29e),a0_0xed34dc(0x1cc),'#888888',a0_0xed34dc(0x28c),'#ffffff',a0_0xed34dc(0x1cf),a0_0xed34dc(0x159),a0_0xed34dc(0x1a4),a0_0xed34dc(0x264),a0_0xed34dc(0x1ff),a0_0xed34dc(0x175),'#ff00ff',a0_0xed34dc(0x1a5),a0_0xed34dc(0x1c2),'#008000','#008080',a0_0xed34dc(0x1a1),a0_0xed34dc(0x17c),a0_0xed34dc(0x286),'#ff69b4'],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){const _0x336c4a=a0_0xed34dc;let _0x57569f=getCurrentProject();if(!_0x57569f||!_0x57569f[_0x336c4a(0x13b)]||_0x57569f['frames'][_0x336c4a(0x157)]<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0x3a7d48=_0x57569f[_0x336c4a(0x13b)];animationTimer=setInterval(()=>{const _0x4aa33c=_0x336c4a;ctx['clearRect'](0x0,0x0,canvas[_0x4aa33c(0x24e)],canvas[_0x4aa33c(0x144)]);let _0x35278d=_0x3a7d48[animationIndex];for(let _0x5877ac=0x0;_0x5877ac<_0x35278d['layers']['length'];_0x5877ac++){ctx['drawImage'](_0x35278d['layers'][_0x5877ac],0x0,0x0);}drawGrid(_0x57569f[_0x4aa33c(0x24e)],_0x57569f[_0x4aa33c(0x144)]),animationIndex=(animationIndex+0x1)%_0x3a7d48[_0x4aa33c(0x157)];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function setAnimationDelay(_0x5eb786){const _0x50b4ba=a0_0xed34dc;_0x5eb786=Math[_0x50b4ba(0x233)](0xa,parseInt(_0x5eb786,0xa)||0x12c),animationDelay=_0x5eb786,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x35fa30){const _0x13c83d=a0_0xed34dc;currentTool=_0x35fa30,document[_0x13c83d(0x1f5)](_0x13c83d(0x1b0))[_0x13c83d(0x136)](_0x572e35=>{const _0x93e20a=_0x13c83d;_0x572e35[_0x93e20a(0x1ae)]['toggle'](_0x93e20a(0x230),_0x572e35[_0x93e20a(0x15c)][_0x93e20a(0x20c)]===_0x35fa30);}),document[_0x13c83d(0x1f5)]('#palette-toolbar\x20.tool-btn')[_0x13c83d(0x136)](_0x17ecdf=>{const _0x38b00e=_0x13c83d;_0x17ecdf[_0x38b00e(0x1ae)]['toggle'](_0x38b00e(0x230),_0x17ecdf[_0x38b00e(0x15c)][_0x38b00e(0x20c)]===_0x35fa30);}),_0x35fa30===_0x13c83d(0x2a1)?canvas[_0x13c83d(0x1d8)][_0x13c83d(0x13c)]=_0x13c83d(0x272):canvas[_0x13c83d(0x1d8)][_0x13c83d(0x13c)]=_0x13c83d(0x274);}function setPenSize(_0x457c9a){const _0x3d9e03=a0_0xed34dc;penSize=parseInt(_0x457c9a)||0x1;let _0x5af9a6=document[_0x3d9e03(0x25b)](_0x3d9e03(0x25e));if(_0x5af9a6)_0x5af9a6[_0x3d9e03(0x222)]=penSize;let _0x1182fc=document[_0x3d9e03(0x25b)](_0x3d9e03(0x170));if(_0x1182fc)_0x1182fc[_0x3d9e03(0x222)]=penSize;}function setPenMode(_0x47d960){const _0x10e94a=a0_0xed34dc;penMode=_0x47d960;let _0x2d53e8=document['getElementById'](_0x10e94a(0x1ba));if(_0x2d53e8)_0x2d53e8[_0x10e94a(0x222)]=penMode;let _0x5013c=document[_0x10e94a(0x25b)](_0x10e94a(0x299));if(_0x5013c)_0x5013c['value']=penMode;}function hexToRgba(_0x4fd70c,_0x5365be=0x1){const _0x5320b5=a0_0xed34dc;if(_0x4fd70c===_0x5320b5(0x261)||_0x4fd70c===_0x5320b5(0x1dc))return[0x0,0x0,0x0,0x0];_0x4fd70c=_0x4fd70c[_0x5320b5(0x1e7)]('#','');if(_0x4fd70c[_0x5320b5(0x157)]===0x3)_0x4fd70c=_0x4fd70c[_0x5320b5(0x27e)]('')['map'](_0x2339ec=>_0x2339ec+_0x2339ec)[_0x5320b5(0x295)]('');let _0x261e60=parseInt(_0x4fd70c,0x10);return[_0x261e60>>0x10&0xff,_0x261e60>>0x8&0xff,_0x261e60&0xff,Math['round'](0xff*_0x5365be)];}function fillAt(_0x4bd6c0,_0x14a94d){const _0x5a192f=a0_0xed34dc;let _0x1b44b4=getCurrentProject(),_0x372b11=getCurrentFrame(),_0x75afd8=_0x372b11[_0x5a192f(0x1e0)][_0x372b11[_0x5a192f(0x29d)]]['getContext']('2d'),_0x5943d2=_0x75afd8[_0x5a192f(0x294)](0x0,0x0,_0x1b44b4[_0x5a192f(0x24e)]*cellSize,_0x1b44b4[_0x5a192f(0x144)]*cellSize),_0x5b011b=_0x4bd6c0*cellSize,_0x26ee35=_0x14a94d*cellSize,_0x585d0b=getPixel(_0x5943d2,_0x5b011b,_0x26ee35),_0x526672=currentColor===_0x5a192f(0x261)||currentColor===_0x5a192f(0x1dc)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x585d0b,_0x526672))return;let _0x562b95=[[_0x4bd6c0,_0x14a94d]],_0x487568=new Set();while(_0x562b95[_0x5a192f(0x157)]){let [_0x898b99,_0x4ca9d2]=_0x562b95[_0x5a192f(0x285)]();if(_0x898b99<0x0||_0x4ca9d2<0x0||_0x898b99>=_0x1b44b4['width']||_0x4ca9d2>=_0x1b44b4[_0x5a192f(0x144)])continue;let _0x20776e=_0x898b99+','+_0x4ca9d2;if(_0x487568[_0x5a192f(0x1c0)](_0x20776e))continue;_0x487568[_0x5a192f(0x251)](_0x20776e);let _0x1a0ed1=_0x898b99*cellSize,_0xd1cfb1=_0x4ca9d2*cellSize,_0x270018=getPixel(_0x5943d2,_0x1a0ed1,_0xd1cfb1);if(!colorsMatch(_0x270018,_0x585d0b))continue;for(let _0x156740=0x0;_0x156740<cellSize;_0x156740++){for(let _0x1956d9=0x0;_0x1956d9<cellSize;_0x1956d9++){setPixel(_0x5943d2,_0x1a0ed1+_0x1956d9,_0xd1cfb1+_0x156740,_0x526672);}}_0x562b95[_0x5a192f(0x16f)]([_0x898b99+0x1,_0x4ca9d2]),_0x562b95[_0x5a192f(0x16f)]([_0x898b99-0x1,_0x4ca9d2]),_0x562b95[_0x5a192f(0x16f)]([_0x898b99,_0x4ca9d2+0x1]),_0x562b95[_0x5a192f(0x16f)]([_0x898b99,_0x4ca9d2-0x1]);}_0x75afd8['putImageData'](_0x5943d2,0x0,0x0),redrawAll();}function getPixel(_0x4581c9,_0x2b0b97,_0x256be7){const _0x5637b3=a0_0xed34dc;let _0x53610f=(_0x256be7*_0x4581c9[_0x5637b3(0x24e)]+_0x2b0b97)*0x4;return[_0x4581c9['data'][_0x53610f],_0x4581c9[_0x5637b3(0x1dd)][_0x53610f+0x1],_0x4581c9[_0x5637b3(0x1dd)][_0x53610f+0x2],_0x4581c9['data'][_0x53610f+0x3]];}function setPixel(_0xfbd576,_0x48e2cc,_0x269d67,_0x2727f8){const _0x5eeefc=a0_0xed34dc;let _0x3d177c=(_0x269d67*_0xfbd576[_0x5eeefc(0x24e)]+_0x48e2cc)*0x4;_0xfbd576[_0x5eeefc(0x1dd)][_0x3d177c]=_0x2727f8[0x0],_0xfbd576[_0x5eeefc(0x1dd)][_0x3d177c+0x1]=_0x2727f8[0x1],_0xfbd576['data'][_0x3d177c+0x2]=_0x2727f8[0x2],_0xfbd576[_0x5eeefc(0x1dd)][_0x3d177c+0x3]=_0x2727f8[0x3];}function colorsMatch(_0x2cd25e,_0x1cb88f){return _0x2cd25e[0x0]===_0x1cb88f[0x0]&&_0x2cd25e[0x1]===_0x1cb88f[0x1]&&_0x2cd25e[0x2]===_0x1cb88f[0x2]&&_0x2cd25e[0x3]===_0x1cb88f[0x3];}function handleMouseDown(_0x3eb347){const _0x3f692a=a0_0xed34dc;isDrawing=!![];const _0x3376e0=getCanvasCoords(_0x3eb347),_0x50ac9d=Math[_0x3f692a(0x139)](_0x3376e0['x']/cellSize),_0x62f39=Math[_0x3f692a(0x139)](_0x3376e0['y']/cellSize);currentTool==='fill'?(fillAt(_0x50ac9d,_0x62f39),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x50ac9d,_0x62f39),lastMouse={'x':_0x50ac9d,'y':_0x62f39});}function handleMouseMove(_0x416d77){const _0x591541=a0_0xed34dc;if(!isDrawing)return;const _0x485e43=getCanvasCoords(_0x416d77),_0x36fcdb=Math[_0x591541(0x139)](_0x485e43['x']/cellSize),_0x4ae2c6=Math[_0x591541(0x139)](_0x485e43['y']/cellSize);if(!lastMouse){drawDotXY(_0x36fcdb,_0x4ae2c6),lastMouse={'x':_0x36fcdb,'y':_0x4ae2c6};return;}const _0x4747c0=_0x36fcdb-lastMouse['x'],_0x3fbf94=_0x4ae2c6-lastMouse['y'],_0x15d76a=Math[_0x591541(0x233)](Math['abs'](_0x4747c0),Math['abs'](_0x3fbf94));if(_0x15d76a<=0x1)drawDotXY(_0x36fcdb,_0x4ae2c6);else for(let _0x3b6110=0x1;_0x3b6110<=_0x15d76a;_0x3b6110++){const _0x182997=Math[_0x591541(0x1ac)](lastMouse['x']+_0x4747c0*_0x3b6110/_0x15d76a),_0x471f92=Math[_0x591541(0x1ac)](lastMouse['y']+_0x3fbf94*_0x3b6110/_0x15d76a);drawDotXY(_0x182997,_0x471f92);}lastMouse={'x':_0x36fcdb,'y':_0x4ae2c6};}function handleMouseUp(_0x3b06da){isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0x596e9f){const _0x3847f6=a0_0xed34dc,_0x3dd37b=canvas[_0x3847f6(0x26f)]();let _0x5918bb=_0x596e9f[_0x3847f6(0x176)]&&_0x596e9f[_0x3847f6(0x176)][0x0]?_0x596e9f['touches'][0x0]:_0x596e9f['changedTouches'][0x0];const _0x36ac1b=canvas[_0x3847f6(0x24e)]/_0x3dd37b[_0x3847f6(0x24e)],_0x17d4a2=canvas[_0x3847f6(0x144)]/_0x3dd37b[_0x3847f6(0x144)],_0x33022d=_0x5918bb[_0x3847f6(0x265)],_0x221dd4=_0x5918bb['clientY'],_0x33ac96=(_0x33022d-_0x3dd37b[_0x3847f6(0x154)])*_0x36ac1b,_0x4cc3fb=(_0x221dd4-_0x3dd37b[_0x3847f6(0x266)])*_0x17d4a2;return{'x':Math[_0x3847f6(0x139)](_0x33ac96/cellSize),'y':Math[_0x3847f6(0x139)](_0x4cc3fb/cellSize)};}function handleTouchStart(_0x21a042){const _0x4f2d1e=a0_0xed34dc;if(_0x21a042[_0x4f2d1e(0x176)][_0x4f2d1e(0x157)]===0x2){_0x21a042[_0x4f2d1e(0x14c)](),isPinching=!![],isDrawing=![];const _0xa96ccc=_0x21a042[_0x4f2d1e(0x176)][0x0],_0x5ecee2=_0x21a042[_0x4f2d1e(0x176)][0x1];pinchStartDistance=Math[_0x4f2d1e(0x203)](_0x5ecee2['clientX']-_0xa96ccc[_0x4f2d1e(0x265)],_0x5ecee2[_0x4f2d1e(0x25f)]-_0xa96ccc[_0x4f2d1e(0x25f)]),pinchStartMid={'clientX':(_0xa96ccc[_0x4f2d1e(0x265)]+_0x5ecee2[_0x4f2d1e(0x265)])/0x2,'clientY':(_0xa96ccc[_0x4f2d1e(0x25f)]+_0x5ecee2[_0x4f2d1e(0x25f)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x4f2d1e(0x26f)]();}else{if(_0x21a042[_0x4f2d1e(0x176)][_0x4f2d1e(0x157)]===0x1){_0x21a042[_0x4f2d1e(0x14c)]();if(isPinching)return;isDrawing=!![];let _0x216ec0=getTouchPos(_0x21a042);lastTouch=_0x216ec0,currentTool===_0x4f2d1e(0x23b)?(fillAt(_0x216ec0['x'],_0x216ec0['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x216ec0['x'],_0x216ec0['y']);}}}function handleTouchMove(_0x2e1f1f){const _0x2b0790=a0_0xed34dc;if(isPinching||_0x2e1f1f[_0x2b0790(0x176)]&&_0x2e1f1f[_0x2b0790(0x176)][_0x2b0790(0x157)]===0x2){_0x2e1f1f[_0x2b0790(0x14c)]();const _0x2070a6=_0x2e1f1f[_0x2b0790(0x176)][0x0],_0xfb7635=_0x2e1f1f[_0x2b0790(0x176)][0x1],_0x2a5dc2=Math[_0x2b0790(0x203)](_0xfb7635[_0x2b0790(0x265)]-_0x2070a6['clientX'],_0xfb7635[_0x2b0790(0x25f)]-_0x2070a6[_0x2b0790(0x25f)]),_0x3575cd={'clientX':(_0x2070a6[_0x2b0790(0x265)]+_0xfb7635[_0x2b0790(0x265)])/0x2,'clientY':(_0x2070a6[_0x2b0790(0x25f)]+_0xfb7635[_0x2b0790(0x25f)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x2a5dc2||0x1;const _0x1f821e=_0x2a5dc2/pinchStartDistance||0x1;let _0x43312a=pinchStartScale*_0x1f821e;_0x43312a=Math[_0x2b0790(0x1db)](Math['max'](_0x43312a,0.2),0x5);const _0x192e6e=pinchRect||canvas[_0x2b0790(0x26f)](),_0x3d9c12=(pinchStartMid[_0x2b0790(0x265)]-_0x192e6e[_0x2b0790(0x154)]-pinchStartPosX)/pinchStartScale,_0x471a27=(pinchStartMid[_0x2b0790(0x25f)]-_0x192e6e['top']-pinchStartPosY)/pinchStartScale;posX=_0x3575cd[_0x2b0790(0x265)]-_0x192e6e['left']-_0x3d9c12*_0x43312a,posY=_0x3575cd[_0x2b0790(0x25f)]-_0x192e6e['top']-_0x471a27*_0x43312a,scale=_0x43312a,updateTransform();return;}if(!isDrawing)return;if(_0x2e1f1f[_0x2b0790(0x176)]&&_0x2e1f1f[_0x2b0790(0x176)][_0x2b0790(0x157)]>0x1)return;_0x2e1f1f['preventDefault']();let _0x1b64bd=getTouchPos(_0x2e1f1f);if(lastTouch){let _0x53cb9d=Math[_0x2b0790(0x20f)]((_0x1b64bd['x']-lastTouch['x'])*cellSize),_0x39a56b=Math[_0x2b0790(0x20f)]((_0x1b64bd['y']-lastTouch['y'])*cellSize);if(_0x53cb9d>=PAN_CANCEL_DISTANCE||_0x39a56b>=PAN_CANCEL_DISTANCE){if(currentTool!=='pen'){isDrawing=![];return;}}}if(lastTouch){let _0x40f46d=_0x1b64bd['x']-lastTouch['x'],_0x1ee784=_0x1b64bd['y']-lastTouch['y'],_0x360ca5=Math['max'](Math['abs'](_0x40f46d),Math[_0x2b0790(0x20f)](_0x1ee784));for(let _0x5e18b9=0x1;_0x5e18b9<=_0x360ca5;_0x5e18b9++){let _0x22bea7=Math[_0x2b0790(0x1ac)](lastTouch['x']+_0x40f46d*_0x5e18b9/_0x360ca5),_0x196d35=Math['round'](lastTouch['y']+_0x1ee784*_0x5e18b9/_0x360ca5);drawDotTouch(_0x22bea7,_0x196d35);}}else drawDotTouch(_0x1b64bd['x'],_0x1b64bd['y']);lastTouch=_0x1b64bd;}function handleTouchEnd(_0x1627c2){const _0x2bc039=a0_0xed34dc;isPinching&&_0x1627c2['touches']&&_0x1627c2[_0x2bc039(0x176)][_0x2bc039(0x157)]<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null);isDrawing&&(!_0x1627c2['touches']||_0x1627c2[_0x2bc039(0x176)][_0x2bc039(0x157)]===0x0)&&saveHistory();if(_0x1627c2[_0x2bc039(0x176)]&&_0x1627c2[_0x2bc039(0x176)][_0x2bc039(0x157)]===0x1){let _0x399906=_0x1627c2[_0x2bc039(0x176)][0x0];lastTouch=getTouchPos({'touches':[_0x399906]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function drawDotXY(_0x1774bd,_0x370b45){const _0x9b230f=a0_0xed34dc;let _0x316589=getCurrentProject(),_0x55c62e=getCurrentFrame();if(!_0x55c62e||!_0x316589)return;if(typeof _0x1774bd!==_0x9b230f(0x137)||typeof _0x370b45!==_0x9b230f(0x137)||_0x1774bd<0x0||_0x370b45<0x0||!Number[_0x9b230f(0x198)](_0x316589['width'])||!Number['isFinite'](_0x316589['height'])||_0x1774bd>=_0x316589[_0x9b230f(0x24e)]||_0x370b45>=_0x316589[_0x9b230f(0x144)]||!Array['isArray'](_0x55c62e[_0x9b230f(0x1e0)])||typeof _0x55c62e[_0x9b230f(0x29d)]!=='number'||!_0x55c62e[_0x9b230f(0x1e0)][_0x55c62e[_0x9b230f(0x29d)]])return;let _0x4bcfc7=_0x55c62e[_0x9b230f(0x1e0)][_0x55c62e[_0x9b230f(0x29d)]][_0x9b230f(0x1fa)]('2d');if(!_0x4bcfc7)return;if(currentTool===_0x9b230f(0x215)||currentColor===_0x9b230f(0x261)||currentColor===_0x9b230f(0x1dc)||currentAlpha===0x0)drawPenShape(_0x4bcfc7,_0x1774bd,_0x370b45,_0x9b230f(0x1dc),!![]);else{let _0x597ce9=hexToRgba(currentColor,currentAlpha);_0x4bcfc7[_0x9b230f(0x15d)](),_0x4bcfc7[_0x9b230f(0x1b8)]=_0x597ce9[0x3]/0xff,drawPenShape(_0x4bcfc7,_0x1774bd,_0x370b45,'rgba('+_0x597ce9[0x0]+','+_0x597ce9[0x1]+','+_0x597ce9[0x2]+','+_0x597ce9[0x3]/0xff+')',![]),_0x4bcfc7['restore']();}redrawAll();}function drawPenShape(_0x47385e,_0x1d02e8,_0x4e3273,_0x5abae3,_0x4239a0){const _0x509303=a0_0xed34dc,_0x43e194=_0x1d02e8*cellSize,_0x45ef76=_0x4e3273*cellSize,_0x2e69c=penSize*cellSize;_0x4239a0?(_0x47385e['save'](),_0x47385e[_0x509303(0x1d4)]=_0x509303(0x1d9),penMode===_0x509303(0x1d1)?(_0x47385e[_0x509303(0x138)](),_0x47385e['arc'](_0x43e194+cellSize/0x2,_0x45ef76+cellSize/0x2,_0x2e69c/0x2,0x0,Math['PI']*0x2),_0x47385e[_0x509303(0x23b)]()):_0x47385e[_0x509303(0x26a)](_0x43e194-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x45ef76-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x2e69c,_0x2e69c),_0x47385e[_0x509303(0x24b)]()):(_0x47385e[_0x509303(0x15d)](),_0x47385e[_0x509303(0x1ad)]=_0x5abae3,penMode==='circle'?(_0x47385e[_0x509303(0x138)](),_0x47385e[_0x509303(0x28a)](_0x43e194+cellSize/0x2,_0x45ef76+cellSize/0x2,_0x2e69c/0x2,0x0,Math['PI']*0x2),_0x47385e[_0x509303(0x23b)]()):_0x47385e[_0x509303(0x23e)](_0x43e194-Math[_0x509303(0x139)]((penSize-0x1)/0x2)*cellSize,_0x45ef76-Math[_0x509303(0x139)]((penSize-0x1)/0x2)*cellSize,_0x2e69c,_0x2e69c),_0x47385e[_0x509303(0x24b)]());}function drawDotTouch(_0xac47a2,_0x32f8be){const _0x1bb639=a0_0xed34dc;let _0x1ac5c8=getCurrentProject(),_0x1e3892=getCurrentFrame();if(_0xac47a2<0x0||_0x32f8be<0x0||_0xac47a2>=_0x1ac5c8['width']||_0x32f8be>=_0x1ac5c8[_0x1bb639(0x144)])return;let _0xda7e4b=_0x1e3892['layers'][_0x1e3892[_0x1bb639(0x29d)]]['getContext']('2d');if(currentTool===_0x1bb639(0x215)||currentColor==='transparent'||currentColor===_0x1bb639(0x1dc)||currentAlpha===0x0)drawPenShape(_0xda7e4b,_0xac47a2,_0x32f8be,_0x1bb639(0x1dc),!![]);else{let _0x291ce4=hexToRgba(currentColor,currentAlpha);_0xda7e4b[_0x1bb639(0x15d)](),_0xda7e4b[_0x1bb639(0x1b8)]=_0x291ce4[0x3]/0xff,drawPenShape(_0xda7e4b,_0xac47a2,_0x32f8be,_0x1bb639(0x167)+_0x291ce4[0x0]+','+_0x291ce4[0x1]+','+_0x291ce4[0x2]+','+_0x291ce4[0x3]/0xff+')',![]),_0xda7e4b[_0x1bb639(0x24b)]();}redrawAll();}function applyTheme(_0x3666e7){const _0x1ee116=a0_0xed34dc;document['documentElement']['setAttribute'](_0x1ee116(0x292),_0x3666e7);const _0x5bfa9a=document[_0x1ee116(0x25b)](_0x1ee116(0x143));_0x5bfa9a&&(_0x5bfa9a[_0x1ee116(0x17b)]=_0x3666e7===_0x1ee116(0x1e4)?'‚òÄÔ∏è':'üåô',_0x5bfa9a['setAttribute'](_0x1ee116(0x277),_0x3666e7===_0x1ee116(0x1e4)),_0x5bfa9a[_0x1ee116(0x16c)]=_0x3666e7===_0x1ee116(0x1e4)?_0x1ee116(0x268):_0x1ee116(0x278)),localStorage[_0x1ee116(0x18e)](_0x1ee116(0x247),_0x3666e7);}function toggleTheme(){const _0xe7f071=a0_0xed34dc;applyTheme(document[_0xe7f071(0x23a)][_0xe7f071(0x281)]('data-theme')===_0xe7f071(0x1e4)?_0xe7f071(0x19d):_0xe7f071(0x1e4));}(function initTheme(){const _0xf6de3e=a0_0xed34dc,_0x326d8c=localStorage['getItem']('nezumi-theme')||(window['matchMedia']&&window['matchMedia'](_0xf6de3e(0x1e9))[_0xf6de3e(0x28f)]?_0xf6de3e(0x1e4):_0xf6de3e(0x19d));applyTheme(_0x326d8c),document[_0xf6de3e(0x18c)](_0xf6de3e(0x135),()=>{const _0x51db6a=_0xf6de3e,_0x5e8db8=document[_0x51db6a(0x25b)](_0x51db6a(0x143));_0x5e8db8&&(_0x5e8db8[_0x51db6a(0x18c)]('click',toggleTheme),_0x5e8db8[_0x51db6a(0x18c)]('keydown',_0xad68c1=>{const _0x1f8539=_0x51db6a;(_0xad68c1['key']===_0x1f8539(0x1fb)||_0xad68c1[_0x1f8539(0x155)]==='\x20')&&(_0xad68c1[_0x1f8539(0x14c)](),toggleTheme());}));});}(),window[a0_0xed34dc(0x19e)]=()=>{const _0x166bf7=a0_0xed34dc;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x166bf7(0x14e)),loadPaletteFromDB()['then'](()=>createPalette()),document['getElementById'](_0x166bf7(0x25e))[_0x166bf7(0x222)]=penSize,document[_0x166bf7(0x25b)]('penMode')[_0x166bf7(0x222)]=penMode;const _0x58df3d=document['getElementById'](_0x166bf7(0x1c6)),_0x15a219=document['getElementById'](_0x166bf7(0x194));_0x58df3d&&_0x15a219&&(_0x58df3d[_0x166bf7(0x222)]=animationDelay,_0x15a219[_0x166bf7(0x222)]=animationDelay,_0x58df3d[_0x166bf7(0x1f4)]=_0x12f688=>{const _0x4cb705=_0x166bf7;_0x15a219[_0x4cb705(0x222)]=_0x12f688[_0x4cb705(0x19b)][_0x4cb705(0x222)],setAnimationDelay(_0x12f688[_0x4cb705(0x19b)][_0x4cb705(0x222)]);},_0x15a219[_0x166bf7(0x1df)]=_0x418899=>{const _0x26bcc9=_0x166bf7;let _0x44c7fa=Math['max'](0xa,Math[_0x26bcc9(0x1db)](0x1388,parseInt(_0x418899[_0x26bcc9(0x19b)][_0x26bcc9(0x222)])||animationDelay));_0x58df3d['value']=_0x44c7fa,_0x15a219[_0x26bcc9(0x222)]=_0x44c7fa,setAnimationDelay(_0x44c7fa);}),canvas[_0x166bf7(0x151)]=handleMouseMove,canvas[_0x166bf7(0x29c)]=handleMouseUp,canvas[_0x166bf7(0x20d)]=handleMouseUp,canvas[_0x166bf7(0x260)]=handleTouchStart,canvas[_0x166bf7(0x273)]=handleTouchMove,canvas['ontouchend']=handleTouchEnd,canvas['ontouchcancel']=handleTouchEnd,canvas['addEventListener'](_0x166bf7(0x18b),handleTouchStart,{'passive':![]}),canvas[_0x166bf7(0x18c)](_0x166bf7(0x1c7),handleTouchMove,{'passive':![]}),canvas[_0x166bf7(0x18c)](_0x166bf7(0x1da),handleTouchEnd,{'passive':![]}),canvas[_0x166bf7(0x18c)](_0x166bf7(0x258),handleTouchEnd,{'passive':![]}),idbGet(_0x166bf7(0x280))&&loadProjectFromIDB();});function drawGrid(_0x3979d1,_0x34d3d6){const _0x4bcda6=a0_0xed34dc;ctx['save'](),ctx['strokeStyle']=_0x4bcda6(0x26d);for(let _0x12d12e=0x0;_0x12d12e<=_0x3979d1;_0x12d12e++){ctx['beginPath'](),ctx[_0x4bcda6(0x181)](_0x12d12e*cellSize,0x0),ctx[_0x4bcda6(0x1f6)](_0x12d12e*cellSize,_0x34d3d6*cellSize),ctx['stroke']();}for(let _0x2bfc9d=0x0;_0x2bfc9d<=_0x34d3d6;_0x2bfc9d++){ctx[_0x4bcda6(0x138)](),ctx['moveTo'](0x0,_0x2bfc9d*cellSize),ctx[_0x4bcda6(0x1f6)](_0x3979d1*cellSize,_0x2bfc9d*cellSize),ctx[_0x4bcda6(0x192)]();}ctx[_0x4bcda6(0x24b)]();}function redrawAll(){const _0x3b2cf5=a0_0xed34dc;let _0x5b1904=getCurrentProject(),_0x218018=getCurrentFrame();canvas[_0x3b2cf5(0x24e)]=_0x5b1904[_0x3b2cf5(0x24e)]*cellSize,canvas['height']=_0x5b1904[_0x3b2cf5(0x144)]*cellSize,ctx[_0x3b2cf5(0x26a)](0x0,0x0,canvas[_0x3b2cf5(0x24e)],canvas[_0x3b2cf5(0x144)]);for(let _0x714b48=0x0;_0x714b48<_0x218018[_0x3b2cf5(0x1e0)][_0x3b2cf5(0x157)];_0x714b48++){ctx[_0x3b2cf5(0x1ce)](_0x218018['layers'][_0x714b48],0x0,0x0);}drawGrid(_0x5b1904[_0x3b2cf5(0x24e)],_0x5b1904[_0x3b2cf5(0x144)]),wrapper&&(wrapper[_0x3b2cf5(0x1d8)][_0x3b2cf5(0x24e)]=_0x3b2cf5(0x27a),wrapper[_0x3b2cf5(0x1d8)]['height']=_0x3b2cf5(0x13a));}function saveHistory(){const _0x59cc4a=a0_0xed34dc;let _0x52946f=getCurrentFrame(),_0x2c323b=_0x52946f['layerHistories'][_0x52946f['activeLayer']];_0x2c323b[_0x59cc4a(0x16f)](_0x52946f[_0x59cc4a(0x1e0)][_0x52946f['activeLayer']][_0x59cc4a(0x201)]());if(_0x2c323b[_0x59cc4a(0x157)]>0x32)_0x2c323b['shift']();_0x52946f['layerRedoStacks'][_0x52946f[_0x59cc4a(0x29d)]]=[];}function undo(){const _0x448d0d=a0_0xed34dc;let _0x3df8c2=getCurrentFrame(),_0x3cffc1=_0x3df8c2[_0x448d0d(0x1a0)][_0x3df8c2[_0x448d0d(0x29d)]],_0x3696b6=_0x3df8c2[_0x448d0d(0x1b6)][_0x3df8c2['activeLayer']];if(!_0x3cffc1||_0x3cffc1[_0x448d0d(0x157)]<0x2)return;_0x3696b6[_0x448d0d(0x16f)](_0x3cffc1['pop']());let _0x8e0b8f=new Image();_0x8e0b8f['onload']=()=>{const _0x278095=_0x448d0d;let _0x5e626e=_0x3df8c2[_0x278095(0x1e0)][_0x3df8c2['activeLayer']][_0x278095(0x1fa)]('2d');_0x5e626e[_0x278095(0x26a)](0x0,0x0,_0x3df8c2[_0x278095(0x1e0)][_0x3df8c2[_0x278095(0x29d)]][_0x278095(0x24e)],_0x3df8c2[_0x278095(0x1e0)][_0x3df8c2[_0x278095(0x29d)]]['height']),_0x5e626e[_0x278095(0x1ce)](_0x8e0b8f,0x0,0x0),redrawAll();},_0x8e0b8f[_0x448d0d(0x14b)]=_0x3cffc1[_0x3cffc1[_0x448d0d(0x157)]-0x1];}function redo(){const _0x49388=a0_0xed34dc;let _0x18b3df=getCurrentFrame(),_0x571b59=_0x18b3df[_0x49388(0x1a0)][_0x18b3df['activeLayer']],_0x212815=_0x18b3df[_0x49388(0x1b6)][_0x18b3df['activeLayer']];if(!_0x212815||_0x212815[_0x49388(0x157)]===0x0)return;let _0x343561=_0x212815[_0x49388(0x285)]();_0x571b59['push'](_0x343561);let _0x4dcd0d=new Image();_0x4dcd0d['onload']=()=>{const _0x509b68=_0x49388;let _0x287811=_0x18b3df[_0x509b68(0x1e0)][_0x18b3df['activeLayer']]['getContext']('2d');_0x287811[_0x509b68(0x26a)](0x0,0x0,_0x18b3df['layers'][_0x18b3df[_0x509b68(0x29d)]][_0x509b68(0x24e)],_0x18b3df[_0x509b68(0x1e0)][_0x18b3df[_0x509b68(0x29d)]]['height']),_0x287811[_0x509b68(0x1ce)](_0x4dcd0d,0x0,0x0),redrawAll();},_0x4dcd0d[_0x49388(0x14b)]=_0x343561;}function exportImage(_0x31de66){const _0x5e44af=a0_0xed34dc;let _0x351125=getCurrentProject(),_0x23b5cc=_0x351125[_0x5e44af(0x13b)],_0x3d6343=_0x31de66===_0x5e44af(0x250)||_0x31de66===_0x5e44af(0x152)?_0x5e44af(0x16d):_0x5e44af(0x156)+_0x31de66,_0x4150f7=_0x23b5cc[_0x5e44af(0x157)]>0x1,_0x33bcc7=(_0x351125[_0x5e44af(0x219)]||_0x5e44af(0x1a6))[_0x5e44af(0x1e7)](/[\\/:*?"<>|]/g,'_');if(!_0x4150f7){let _0x52de50=document[_0x5e44af(0x246)](_0x5e44af(0x191));_0x52de50[_0x5e44af(0x24e)]=_0x351125[_0x5e44af(0x24e)]*cellSize,_0x52de50[_0x5e44af(0x144)]=_0x351125[_0x5e44af(0x144)]*cellSize;let _0xcf6d15=_0x52de50[_0x5e44af(0x1fa)]('2d'),_0x138b77=getCurrentFrame();for(let _0x52fa00=0x0;_0x52fa00<_0x138b77[_0x5e44af(0x1e0)][_0x5e44af(0x157)];_0x52fa00++){_0xcf6d15[_0x5e44af(0x1ce)](_0x138b77['layers'][_0x52fa00],0x0,0x0);}let _0x5669ff=document['createElement']('a');_0x5669ff[_0x5e44af(0x174)]=_0x33bcc7+'.'+_0x31de66,_0x31de66==='jpg'||_0x31de66==='jpeg'?_0x5669ff[_0x5e44af(0x28b)]=_0x52de50[_0x5e44af(0x201)](_0x3d6343,0.92):_0x5669ff[_0x5e44af(0x28b)]=_0x52de50[_0x5e44af(0x201)](_0x3d6343),_0x5669ff[_0x5e44af(0x195)]();}else{if(_0x31de66===_0x5e44af(0x211)&&typeof window[_0x5e44af(0x227)]!==_0x5e44af(0x178))exportWebpAnimation(_0x23b5cc,_0x351125[_0x5e44af(0x24e)]*cellSize,_0x351125[_0x5e44af(0x144)]*cellSize,_0x33bcc7);else for(let _0x3b77d3=0x0;_0x3b77d3<_0x23b5cc[_0x5e44af(0x157)];_0x3b77d3++){let _0x3bd074=document['createElement']('canvas');_0x3bd074['width']=_0x351125[_0x5e44af(0x24e)]*cellSize,_0x3bd074[_0x5e44af(0x144)]=_0x351125[_0x5e44af(0x144)]*cellSize;let _0x56fced=_0x3bd074[_0x5e44af(0x1fa)]('2d'),_0x1daac5=_0x23b5cc[_0x3b77d3];for(let _0x4a227d=0x0;_0x4a227d<_0x1daac5[_0x5e44af(0x1e0)][_0x5e44af(0x157)];_0x4a227d++){_0x56fced[_0x5e44af(0x1ce)](_0x1daac5[_0x5e44af(0x1e0)][_0x4a227d],0x0,0x0);}let _0x44a109=document['createElement']('a');_0x44a109[_0x5e44af(0x174)]=_0x33bcc7+'-f'+(_0x3b77d3+0x1)+'.'+_0x31de66,_0x31de66==='jpg'||_0x31de66===_0x5e44af(0x152)?_0x44a109[_0x5e44af(0x28b)]=_0x3bd074['toDataURL'](_0x3d6343,0.92):_0x44a109[_0x5e44af(0x28b)]=_0x3bd074['toDataURL'](_0x3d6343),setTimeout(()=>_0x44a109[_0x5e44af(0x195)](),_0x3b77d3*0x64);}}}async function exportWebpAnimation(_0x400b8c,_0x1d3b85,_0xc800ce,_0x49d410=a0_0xed34dc(0x15b)){const _0x1aa61f=a0_0xed34dc;if(!window[_0x1aa61f(0x227)]||!window['VideoEncoder']){alert(_0x1aa61f(0x1f3));return;}const _0x587b92=[],_0x4c4aee=new VideoEncoder({'output':_0x652b8b=>_0x587b92[_0x1aa61f(0x16f)](_0x652b8b),'error':_0x879b5a=>console[_0x1aa61f(0x248)](_0x879b5a)});_0x4c4aee[_0x1aa61f(0x166)]({'codec':_0x1aa61f(0x196),'width':_0x1d3b85,'height':_0xc800ce,'framerate':0x5});for(let _0x4bd940=0x0;_0x4bd940<_0x400b8c[_0x1aa61f(0x157)];_0x4bd940++){let _0x190778=document['createElement'](_0x1aa61f(0x191));_0x190778[_0x1aa61f(0x24e)]=_0x1d3b85,_0x190778[_0x1aa61f(0x144)]=_0xc800ce;let _0x233b18=_0x190778[_0x1aa61f(0x1fa)]('2d'),_0x38cae2=_0x400b8c[_0x4bd940];for(let _0x2dc4a2=0x0;_0x2dc4a2<_0x38cae2[_0x1aa61f(0x1e0)][_0x1aa61f(0x157)];_0x2dc4a2++){_0x233b18[_0x1aa61f(0x1ce)](_0x38cae2[_0x1aa61f(0x1e0)][_0x2dc4a2],0x0,0x0);}let _0x16e008=await createImageBitmap(_0x190778);_0x4c4aee[_0x1aa61f(0x288)](_0x16e008,{'keyFrame':!![],'duration':0xc8}),_0x16e008['close']();}await _0x4c4aee[_0x1aa61f(0x1b7)](),_0x4c4aee['close']();const _0x49d2fd=new Blob(_0x587b92[_0x1aa61f(0x26e)](_0x3c8eea=>_0x3c8eea[_0x1aa61f(0x234)]?_0x3c8eea:_0x3c8eea[_0x1aa61f(0x1dd)]),{'type':_0x1aa61f(0x29b)}),_0xde4931=document[_0x1aa61f(0x246)]('a');_0xde4931[_0x1aa61f(0x174)]=_0x49d410+_0x1aa61f(0x160),_0xde4931['href']=URL[_0x1aa61f(0x22f)](_0x49d2fd),_0xde4931[_0x1aa61f(0x195)]();}function exportGif(){const _0x2e1cc6=a0_0xed34dc;let _0x93f2c=getCurrentProject(),_0x1d1c18=_0x93f2c[_0x2e1cc6(0x13b)],_0x4443d7=_0x93f2c[_0x2e1cc6(0x24e)]*cellSize,_0x12af04=_0x93f2c['height']*cellSize;const _0x2200e9=_0x1d1c18[_0x2e1cc6(0x26e)](_0x908e3f=>{const _0x489907=_0x2e1cc6;let _0xd8311c=document['createElement']('canvas');_0xd8311c[_0x489907(0x24e)]=_0x4443d7,_0xd8311c[_0x489907(0x144)]=_0x12af04;let _0xdae93c=_0xd8311c[_0x489907(0x1fa)]('2d');for(let _0x3804d6=0x0;_0x3804d6<_0x908e3f['layers']['length'];_0x3804d6++){_0xdae93c[_0x489907(0x1ce)](_0x908e3f['layers'][_0x3804d6],0x0,0x0);}return _0xd8311c[_0x489907(0x201)](_0x489907(0x242));});Promise['all'](_0x2200e9[_0x2e1cc6(0x26e)](_0x27ae80=>{return new Promise(_0x592246=>{const _0x183118=a0_0x39a8,_0xc12276=new Image();_0xc12276[_0x183118(0x14b)]=_0x27ae80,_0xc12276[_0x183118(0x19e)]=()=>_0x592246(_0xc12276);});}))[_0x2e1cc6(0x1ea)](_0x338796=>{const _0x9b7f8=_0x2e1cc6,_0x2b7334=_0x338796['filter'](_0x5c61a2=>_0x5c61a2[_0x9b7f8(0x24e)]>0x0&&_0x5c61a2['height']>0x0);if(_0x2b7334[_0x9b7f8(0x157)]===0x0){alert(_0x9b7f8(0x228));return;}const _0x11c32e=(_0x93f2c[_0x9b7f8(0x219)]||_0x9b7f8(0x15b))['replace'](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x2b7334,animationDelay,_0x11c32e+'.gif');});}function exportApng(){const _0x3340bb=a0_0xed34dc;let _0x9acdf6=getCurrentProject(),_0x5a42dd=_0x9acdf6[_0x3340bb(0x13b)],_0x4cb52d=_0x9acdf6[_0x3340bb(0x24e)]*cellSize,_0x54d6af=_0x9acdf6['height']*cellSize;const _0x271ba7=_0x5a42dd[_0x3340bb(0x26e)](_0x348787=>{const _0x104d8a=_0x3340bb;let _0x286777=document[_0x104d8a(0x246)]('canvas');_0x286777[_0x104d8a(0x24e)]=_0x4cb52d,_0x286777[_0x104d8a(0x144)]=_0x54d6af;let _0x248eec=_0x286777[_0x104d8a(0x1fa)]('2d');for(let _0x552e2f=0x0;_0x552e2f<_0x348787[_0x104d8a(0x1e0)]['length'];_0x552e2f++){_0x248eec[_0x104d8a(0x1ce)](_0x348787[_0x104d8a(0x1e0)][_0x552e2f],0x0,0x0);}let _0x4dc426=new Image();return _0x4dc426[_0x104d8a(0x14b)]=_0x286777['toDataURL'](_0x104d8a(0x242)),_0x4dc426;}),_0x4cc5a9=(_0x9acdf6[_0x3340bb(0x219)]||'nezumi-animation')[_0x3340bb(0x1e7)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x271ba7,_0x4cb52d,_0x54d6af,animationDelay,_0x4cc5a9+_0x3340bb(0x1f0));}const dbName=a0_0xed34dc(0x256),storeName=a0_0xed34dc(0x182);function openDB(){return new Promise((_0x18599f,_0x4c66ae)=>{const _0x16d7be=a0_0x39a8,_0x116358=indexedDB[_0x16d7be(0x13f)](dbName,0x1);_0x116358['onupgradeneeded']=()=>{const _0x369de7=_0x16d7be;_0x116358[_0x369de7(0x297)][_0x369de7(0x15a)](storeName);},_0x116358[_0x16d7be(0x1e3)]=()=>_0x18599f(_0x116358['result']),_0x116358[_0x16d7be(0x161)]=()=>_0x4c66ae(_0x116358[_0x16d7be(0x248)]);});}async function idbSet(_0x6c4164,_0x1f3159){const _0x9b3895=await openDB();return new Promise((_0x2ac248,_0x2bcf28)=>{const _0x565bc7=a0_0x39a8,_0x39f288=_0x9b3895[_0x565bc7(0x214)](storeName,_0x565bc7(0x16b));_0x39f288[_0x565bc7(0x252)](storeName)[_0x565bc7(0x27d)](_0x1f3159,_0x6c4164),_0x39f288[_0x565bc7(0x15f)]=()=>_0x2ac248(),_0x39f288[_0x565bc7(0x161)]=()=>_0x2bcf28(_0x39f288[_0x565bc7(0x248)]);});}function a0_0xcf00(){const _0x4017ba=['querySelector','data-theme','center','getImageData','join','startsWith','result','hidden','palette-penMode','project-name','video/webm','onmouseup','activeLayer','#000000','alphaValue','UPNG','pan','layer-thumb','Ë™≠Ëæº„Ç®„É©„Éº','stopPropagation','DOMContentLoaded','forEach','number','beginPath','floor','auto','frames','cursor','render','buffer','open','apply','project','main-container','themeToggleBtn','height','background','activeFrame','all','addFrame','onblur','removeEventListener','src','preventDefault','canvas-container','pen','.section-content','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','onmousemove','jpeg','„Éï„Ç°„Ç§„É´„Å´„Éó„É≠„Ç∏„Çß„ÇØ„Éà„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇË™≠„ÅøËæº„Åø„Åß„Åç„Åæ„Åõ„Çì„ÄÇ','left','key','image/','length','input','#ffa500','createObjectStore','nezumi-animation','dataset','save','trim','oncomplete','.webm','onerror','pointermove','square','menu-toggle-btn-close','log','configure','rgba(','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','68mQcNiu','\x0a---NEZUMI_METADATA_START---\x0a','readwrite','title','image/jpeg','>‰∏∏„Éö„É≥</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ÈÄèÊòéÂ∫¶:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','push','palette-penSize','nezumi-palette','rgba(0,0,0,0.3)','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','download','#0000ff','touches','sidebar','undefined','100vh','innerWidth','textContent','#800080','/about?terms=true','px)\x20scale(','>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22','disabled','moveTo','keyval','none','projectList','image','firstChild','stringify','19254cMQypz','warn','onmousedown','touchstart','addEventListener','keydown','setItem','nezumi-animation.apng','sidebar-open','canvas','stroke','#palette-alphaSlider','animSpeedValue','click','vp8','#palette-alphaValue','isFinite','activeProject','display','target','pointerdown','light','onload','className','layerHistories','#000080','palette-alphaValue','deltaY','#ffff00','#800000','nezumi-drawing','nezumi-sketch.msketch','„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ','grabbing','releasePointerCapture','83964oBNTFE','round','fillStyle','classList','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>„Éö„É≥</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','.tool-btn','readAsArrayBuffer','#newProjName','projectCount','colorPicker','>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22','layerRedoStacks','flush','globalAlpha','anonymous','penMode','ontouchcancel','closePath','files','text','toString','has','onkeydown','#808000','setPointerCapture','„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ','revokeObjectURL','animSpeedRange','touchmove','body','type','#newProjW','resize','#444444','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>Ê∂à„Åó„Ç¥„É†</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','drawImage','#ff0000','pointerType','circle','splice','6957ElexyJ','globalCompositeOperation','#palette-penSize','contains','alignItems','style','destination-out','touchend','min','#00000000','data','overflow','onchange','layers','getItem','palette-alphaSlider','onsuccess','dark','match','selected','replace','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§','(prefers-color-scheme:\x20dark)','then','layer-btn','_spritesheet.png','6755DfABWO','1mucvXL','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','.apng','1358623twfQZz','pointerId','„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØWebCodecs„Å´„Çà„ÇãWEBP„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ','oninput','querySelectorAll','lineTo','project-item','keyup','(((.+)+)+)+$','getContext','Enter','layerCount','‰∏ä„Å´ÁßªÂãï','palette-toolbar','#00ffff','3000','toDataURL','span','hypot','„Åì„ÅÆËâ≤„Çí„Éë„É¨„ÉÉ„Éà„Åã„ÇâÂâäÈô§','palette-add-btn','touch','.section.collapsible\x20.section-content','justifyContent','2423443gQsRcU','touchAction','GIF','tool','onmouseleave','delete','abs','crossOrigin','webp','„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','focus','transaction','eraser','appendChild','frameList','block','name','#newProjCancelBtn','#newProjH','nezumi-animation.gif','„Éë„É¨„ÉÉ„Éà„Å´Ëâ≤„ÇíËøΩÂä†','80px','98678RYwTOC','\x20active','blur','value','application/octet-stream','onclick','nezumi_about_visited','„Ç≥„Éû)','WebCodecs','GIF„Å´Â§âÊèõ„Åß„Åç„ÇãÁîªÂÉè„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22undo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>undo</span>\x20Êàª„Åô\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22redo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>redo</span>\x20Êàª„Åô„ÇíÊàª„Åô\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','remove','projects','button','alphaSlider','100vw','createObjectURL','active','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','nezumi-standalone','max','byteLength','/index.html','search','„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü','‰∏ã„Å´ÁßªÂãï','color-palette','documentElement','fill','<span\x20style=\x22font-size:13px;color:#888;\x22>ÈÄèÊòé</span>','image/apng','fillRect','300BHXlLs','transform','Shift','image/png','catch','ontouchend','.section.collapsible\x20.toggle-btn','createElement','nezumi-theme','error','IndexedDB„Åã„Çâ„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº‚Ä¶','16QCPFSn','restore','zoomValue','px,\x20','width','pathname','jpg','add','objectStore','‰øùÂ≠ò„Ç®„É©„Éº','get','fixed','nezumi-sketch-db','div','touchcancel','menu-toggle-btn','pointerup','getElementById','.palette-color','position','penSize','clientY','ontouchstart','transparent','parse','‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº:','#00ff00','clientX','top','.toggle-btn','„É©„Ç§„Éà„ÉÜ„Éº„Éû„Å´ÂàáÊõø','„É¨„Ç§„É§„Éº','clearRect','application/json','color','#ccc','map','getBoundingClientRect','new-project-dialog','removeChild','grab','ontouchmove','crosshair','„Éï„É¨„Éº„É†„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','frame-item','aria-pressed','„ÉÄ„Éº„ÇØ„ÉÜ„Éº„Éû„Å´ÂàáÊõø','zoomSlider','100%','#newProjOkBtn','decode','put','split','lib/gif.worker.js','nezumi-projects','getAttribute','\x20selected','parentNode','unshift','pop','#c0c0c0','950gDGGxo','encode','innerHTML','arc','href','#cccccc','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','translate(','matches','slice'];a0_0xcf00=function(){return _0x4017ba;};return a0_0xcf00();}async function idbGet(_0x53b966){const _0x2b4a3f=await openDB();return new Promise((_0x40c77c,_0x2bf017)=>{const _0x2e79e9=a0_0x39a8,_0x31c810=_0x2b4a3f['transaction'](storeName,'readonly'),_0x17b226=_0x31c810[_0x2e79e9(0x252)](storeName)[_0x2e79e9(0x254)](_0x53b966);_0x17b226[_0x2e79e9(0x1e3)]=()=>_0x40c77c(_0x17b226[_0x2e79e9(0x297)]),_0x17b226[_0x2e79e9(0x161)]=()=>_0x2bf017(_0x17b226[_0x2e79e9(0x248)]);});}async function idbDelete(_0x29b37d){const _0x45a22f=await openDB();return new Promise((_0x2f2f49,_0x48302)=>{const _0x2916f4=a0_0x39a8,_0x47a547=_0x45a22f[_0x2916f4(0x214)](storeName,_0x2916f4(0x16b));_0x47a547[_0x2916f4(0x252)](storeName)[_0x2916f4(0x20e)](_0x29b37d),_0x47a547[_0x2916f4(0x15f)]=()=>_0x2f2f49(),_0x47a547[_0x2916f4(0x161)]=()=>_0x48302(_0x47a547[_0x2916f4(0x248)]);});}async function idbClear(){const _0x14dc91=await openDB();return new Promise((_0x39d088,_0x191aa3)=>{const _0xe823cc=a0_0x39a8,_0x3d1c35=_0x14dc91[_0xe823cc(0x214)](storeName,_0xe823cc(0x16b));_0x3d1c35[_0xe823cc(0x252)](storeName)['clear'](),_0x3d1c35[_0xe823cc(0x15f)]=()=>_0x39d088(),_0x3d1c35[_0xe823cc(0x161)]=()=>_0x191aa3(_0x3d1c35['error']);});}function saveProjectFile(){const _0x19c1ce=a0_0xed34dc,_0x171f5b={'projects':projects[_0x19c1ce(0x26e)](_0x59d39e=>({'width':_0x59d39e['width'],'height':_0x59d39e[_0x19c1ce(0x144)],'name':_0x59d39e['name']||'','activeFrame':_0x59d39e['activeFrame'],'frames':_0x59d39e[_0x19c1ce(0x13b)][_0x19c1ce(0x26e)](_0x426fea=>({'activeLayer':_0x426fea[_0x19c1ce(0x29d)],'layers':_0x426fea[_0x19c1ce(0x1e0)][_0x19c1ce(0x26e)](_0x2ba760=>_0x2ba760[_0x19c1ce(0x201)]())}))})),'activeProject':activeProject},_0x236843=new Blob([JSON[_0x19c1ce(0x187)](_0x171f5b)],{'type':_0x19c1ce(0x26b)}),_0x57f318=document[_0x19c1ce(0x246)]('a');_0x57f318['download']=_0x19c1ce(0x1a7),_0x57f318[_0x19c1ce(0x28b)]=URL[_0x19c1ce(0x22f)](_0x236843),_0x57f318[_0x19c1ce(0x195)]();}function saveProjectFile(){const _0x184d79=a0_0xed34dc,_0x450aff={'projects':projects[_0x184d79(0x26e)](_0x23cde6=>({'width':_0x23cde6[_0x184d79(0x24e)],'height':_0x23cde6[_0x184d79(0x144)],'name':_0x23cde6[_0x184d79(0x219)]||'','activeFrame':_0x23cde6[_0x184d79(0x146)],'frames':_0x23cde6[_0x184d79(0x13b)][_0x184d79(0x26e)](_0x8ec4e8=>({'activeLayer':_0x8ec4e8[_0x184d79(0x29d)],'layers':_0x8ec4e8[_0x184d79(0x1e0)][_0x184d79(0x26e)](_0x4f4c4b=>_0x4f4c4b[_0x184d79(0x201)]())}))})),'activeProject':activeProject},_0xd2efd7=new Blob([JSON[_0x184d79(0x187)](_0x450aff)],{'type':_0x184d79(0x26b)}),_0x785e70=document[_0x184d79(0x246)]('a');_0x785e70[_0x184d79(0x174)]='nezumi-sketch.msketch',_0x785e70[_0x184d79(0x28b)]=URL['createObjectURL'](_0xd2efd7),_0x785e70[_0x184d79(0x195)]();}async function saveProjectToIDB(){const _0x7cd318=a0_0xed34dc,_0x427841={'projects':projects[_0x7cd318(0x26e)](_0x47d796=>({'width':_0x47d796[_0x7cd318(0x24e)],'height':_0x47d796[_0x7cd318(0x144)],'name':_0x47d796[_0x7cd318(0x219)]||'','activeFrame':_0x47d796[_0x7cd318(0x146)],'frames':_0x47d796['frames'][_0x7cd318(0x26e)](_0xc92a3e=>({'activeLayer':_0xc92a3e[_0x7cd318(0x29d)],'layers':_0xc92a3e['layers'][_0x7cd318(0x26e)](_0x35d533=>_0x35d533[_0x7cd318(0x201)]())}))})),'activeProject':activeProject};try{await idbSet('nezumi-sketch-save',_0x427841),console[_0x7cd318(0x165)]('„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíIndexedDB„Å´‰øùÂ≠ò„Åó„Åü„ÉÅ„É•„ÉºÔºÅ');}catch(_0x454fcd){console[_0x7cd318(0x248)](_0x7cd318(0x263),_0x454fcd);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0xed34dc(0x18c)]('beforeunload',_0x4f9d52=>{saveProjectToIDB();});function loadProjectFile(_0x5316ad){const _0x24cb62=a0_0xed34dc,_0x1ce11f=_0x5316ad[_0x24cb62(0x19b)][_0x24cb62(0x1bd)][0x0];if(!_0x1ce11f)return;if(_0x1ce11f[_0x24cb62(0x1c9)]&&_0x1ce11f['type'][_0x24cb62(0x296)](_0x24cb62(0x185))){loadStandaloneFromFile(_0x1ce11f)[_0x24cb62(0x1ea)](_0x317108=>{alert('„Çπ„Çø„É≥„Éâ„Ç¢„É≠„É≥ÂΩ¢Âºè„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:\x20'+(_0x317108['name']||'ÁîªÂÉè'));})[_0x24cb62(0x243)](_0x272ef2=>{const _0x2c8e8d=_0x24cb62;console[_0x2c8e8d(0x189)](_0x272ef2),alert(_0x2c8e8d(0x153));});return;}const _0x2af2b1=new FileReader();_0x2af2b1['onload']=function(_0x18ec0e){const _0x51d5f0=_0x24cb62;try{const _0x2814df=JSON[_0x51d5f0(0x262)](_0x18ec0e[_0x51d5f0(0x19b)][_0x51d5f0(0x297)]);projects=_0x2814df['projects']['map']((_0x44ea4b,_0x37af38)=>{const _0x16c2a5=_0x51d5f0;let _0x4d6710=createProject(_0x44ea4b[_0x16c2a5(0x24e)],_0x44ea4b[_0x16c2a5(0x144)],_0x44ea4b[_0x16c2a5(0x219)]||'ÁîªÂÉè'+(_0x37af38+0x1));return _0x4d6710[_0x16c2a5(0x13b)]=_0x44ea4b[_0x16c2a5(0x13b)]['map'](_0x12596d=>{const _0x511ed1=_0x16c2a5;let _0x129db2={'layers':[],'activeLayer':_0x12596d[_0x511ed1(0x29d)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x502172=0x0;_0x502172<_0x12596d[_0x511ed1(0x1e0)][_0x511ed1(0x157)];_0x502172++){let _0x55d7c4=new Image();_0x55d7c4[_0x511ed1(0x14b)]=_0x12596d['layers'][_0x502172];let _0x2b4b83=document[_0x511ed1(0x246)](_0x511ed1(0x191));_0x2b4b83['width']=_0x44ea4b[_0x511ed1(0x24e)]*cellSize,_0x2b4b83[_0x511ed1(0x144)]=_0x44ea4b[_0x511ed1(0x144)]*cellSize,_0x55d7c4['onload']=()=>{const _0x4ff2c4=_0x511ed1;let _0x21ddc7=_0x2b4b83[_0x4ff2c4(0x1fa)]('2d');_0x21ddc7[_0x4ff2c4(0x26a)](0x0,0x0,_0x2b4b83[_0x4ff2c4(0x24e)],_0x2b4b83['height']),_0x21ddc7[_0x4ff2c4(0x1ce)](_0x55d7c4,0x0,0x0);},_0x55d7c4[_0x511ed1(0x19e)](),_0x129db2['layers'][_0x511ed1(0x16f)](_0x2b4b83),_0x129db2[_0x511ed1(0x1a0)][_0x511ed1(0x16f)]([]),_0x129db2['layerRedoStacks'][_0x511ed1(0x16f)]([]);}return _0x129db2;}),_0x4d6710[_0x16c2a5(0x146)]=_0x44ea4b[_0x16c2a5(0x146)],_0x4d6710[_0x16c2a5(0x219)]=_0x44ea4b['name']||'ÁîªÂÉè'+(_0x37af38+0x1),_0x4d6710;}),activeProject=_0x2814df['activeProject']||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0xf072){alert(_0x51d5f0(0x1a8));}},_0x2af2b1['readAsText'](_0x1ce11f);}async function loadProjectFromIDB(){const _0x8834f4=a0_0xed34dc;try{const _0x23c371=await idbGet('nezumi-sketch-save');if(!_0x23c371)return;projects=_0x23c371[_0x8834f4(0x22b)][_0x8834f4(0x26e)]((_0x2530ed,_0x41218d)=>{const _0x450751=_0x8834f4;let _0x1fa124=createProject(_0x2530ed[_0x450751(0x24e)],_0x2530ed[_0x450751(0x144)],_0x2530ed['name']||'ÁîªÂÉè'+(_0x41218d+0x1));return _0x1fa124[_0x450751(0x13b)]=_0x2530ed[_0x450751(0x13b)][_0x450751(0x26e)](_0x1345fa=>{const _0x5251e1=_0x450751;let _0x4add39={'layers':[],'activeLayer':_0x1345fa['activeLayer'],'layerHistories':[],'layerRedoStacks':[]};for(let _0x306137=0x0;_0x306137<_0x1345fa[_0x5251e1(0x1e0)][_0x5251e1(0x157)];_0x306137++){let _0x44c18d=new Image();_0x44c18d[_0x5251e1(0x14b)]=_0x1345fa[_0x5251e1(0x1e0)][_0x306137];let _0x19c815=document[_0x5251e1(0x246)]('canvas');_0x19c815[_0x5251e1(0x24e)]=_0x2530ed[_0x5251e1(0x24e)]*cellSize,_0x19c815[_0x5251e1(0x144)]=_0x2530ed[_0x5251e1(0x144)]*cellSize,_0x44c18d[_0x5251e1(0x19e)]=()=>{const _0x46751d=_0x5251e1;let _0xd342f8=_0x19c815[_0x46751d(0x1fa)]('2d');_0xd342f8[_0x46751d(0x26a)](0x0,0x0,_0x19c815[_0x46751d(0x24e)],_0x19c815[_0x46751d(0x144)]),_0xd342f8[_0x46751d(0x1ce)](_0x44c18d,0x0,0x0);},_0x4add39['layers'][_0x5251e1(0x16f)](_0x19c815),_0x4add39[_0x5251e1(0x1a0)][_0x5251e1(0x16f)]([]),_0x4add39[_0x5251e1(0x1b6)]['push']([]);}return _0x4add39;}),_0x1fa124[_0x450751(0x146)]=_0x2530ed[_0x450751(0x146)],_0x1fa124[_0x450751(0x219)]=_0x2530ed[_0x450751(0x219)]||'ÁîªÂÉè'+(_0x41218d+0x1),_0x1fa124;}),activeProject=_0x23c371[_0x8834f4(0x199)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool(_0x8834f4(0x14e)),console[_0x8834f4(0x165)]('IndexedDB„Åã„Çâ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Çì„Å†„ÉÅ„É•„ÉºÔºÅ');}catch(_0x4ac9b9){alert(_0x8834f4(0x249)),console['error'](_0x4ac9b9);}}function wait(_0x337d4a){return new Promise(_0x477d28=>setTimeout(_0x477d28,_0x337d4a));}function initCanvas(){const _0x22b9fc=a0_0xed34dc,_0x2fdf98=parseInt(0x10),_0x212ac5=parseInt(0x10);let _0x4b08d2=getCurrentProject();_0x4b08d2[_0x22b9fc(0x24e)]=_0x2fdf98,_0x4b08d2[_0x22b9fc(0x144)]=_0x212ac5,canvas[_0x22b9fc(0x24e)]=_0x2fdf98*cellSize,canvas[_0x22b9fc(0x144)]=_0x212ac5*cellSize,_0x4b08d2[_0x22b9fc(0x1e0)]=[],_0x4b08d2['layerHistories']=[],_0x4b08d2[_0x22b9fc(0x1b6)]=[];let _0x3b74b3=document['createElement']('canvas');_0x3b74b3['width']=_0x2fdf98*cellSize,_0x3b74b3[_0x22b9fc(0x144)]=_0x212ac5*cellSize,_0x4b08d2[_0x22b9fc(0x1e0)]['push'](_0x3b74b3),_0x4b08d2['layerHistories'][_0x22b9fc(0x16f)]([]),_0x4b08d2['layerRedoStacks']['push']([]),_0x4b08d2[_0x22b9fc(0x29d)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas['onmousedown']=null,canvas[_0x22b9fc(0x151)]=null,canvas[_0x22b9fc(0x29c)]=null,canvas[_0x22b9fc(0x20d)]=null,canvas[_0x22b9fc(0x260)]=null,canvas['ontouchmove']=null,canvas[_0x22b9fc(0x244)]=null,canvas[_0x22b9fc(0x1bb)]=null,canvas[_0x22b9fc(0x14a)](_0x22b9fc(0x18b),handleTouchStart),canvas['removeEventListener'](_0x22b9fc(0x1c7),handleTouchMove),canvas[_0x22b9fc(0x14a)](_0x22b9fc(0x1da),handleTouchEnd),canvas[_0x22b9fc(0x14a)](_0x22b9fc(0x258),handleTouchEnd),canvas[_0x22b9fc(0x18a)]=handleMouseDown,canvas[_0x22b9fc(0x151)]=handleMouseMove,canvas[_0x22b9fc(0x29c)]=handleMouseUp,canvas[_0x22b9fc(0x20d)]=handleMouseUp,canvas[_0x22b9fc(0x260)]=handleTouchStart,canvas[_0x22b9fc(0x273)]=handleTouchMove,canvas[_0x22b9fc(0x244)]=handleTouchEnd,canvas[_0x22b9fc(0x1bb)]=handleTouchEnd,canvas[_0x22b9fc(0x18c)]('touchstart',handleTouchStart,{'passive':![]}),canvas[_0x22b9fc(0x18c)]('touchmove',handleTouchMove,{'passive':![]}),canvas[_0x22b9fc(0x18c)](_0x22b9fc(0x1da),handleTouchEnd,{'passive':![]}),canvas[_0x22b9fc(0x18c)](_0x22b9fc(0x258),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x2bb1d9=a0_0xed34dc,_0x158c21=document[_0x2bb1d9(0x25b)](_0x2bb1d9(0x239));if(!_0x158c21)return;_0x158c21['innerHTML']='',PALETTE_COLORS['forEach']((_0xa79a41,_0x5f28f2)=>{const _0x216812=_0x2bb1d9,_0x47a6c0=document[_0x216812(0x246)](_0x216812(0x22c));_0x47a6c0[_0x216812(0x19f)]='palette-color';_0xa79a41===_0x216812(0x261)||_0xa79a41===_0x216812(0x1dc)?(_0x47a6c0[_0x216812(0x1d8)][_0x216812(0x145)]=_0x216812(0x231),_0x47a6c0[_0x216812(0x16c)]='ÈÄèÊòé',_0x47a6c0['innerHTML']=_0x216812(0x23c)):(_0x47a6c0[_0x216812(0x1d8)]['background']=_0xa79a41,_0x47a6c0['title']=_0xa79a41);_0x47a6c0[_0x216812(0x224)]=()=>{const _0x13323b=_0x216812;currentColor=_0xa79a41,_0xa79a41===_0x13323b(0x261)||_0xa79a41==='#00000000'?document[_0x13323b(0x25b)]('colorPicker')[_0x13323b(0x222)]=_0x13323b(0x29e):document[_0x13323b(0x25b)](_0x13323b(0x1b4))[_0x13323b(0x222)]=_0xa79a41,document['querySelectorAll'](_0x13323b(0x25c))[_0x13323b(0x136)](_0x1fad01=>_0x1fad01['classList'][_0x13323b(0x22a)]('selected')),_0x47a6c0['classList'][_0x13323b(0x251)]('selected');};if(_0x5f28f2!==0x0){const _0x27fd6e=document[_0x216812(0x246)](_0x216812(0x202));_0x27fd6e[_0x216812(0x17b)]='√ó',_0x27fd6e['className']='palette-del-btn',_0x27fd6e['title']=_0x216812(0x204),_0x27fd6e[_0x216812(0x224)]=_0x320a89=>{const _0x35f848=_0x216812;_0x320a89['stopPropagation'](),PALETTE_COLORS[_0x35f848(0x157)]>0x2&&(PALETTE_COLORS['splice'](_0x5f28f2,0x1),createPalette());},_0x47a6c0['appendChild'](_0x27fd6e);}_0x158c21['appendChild'](_0x47a6c0);});const _0x5efb4c=document[_0x2bb1d9(0x246)]('button');_0x5efb4c[_0x2bb1d9(0x19f)]=_0x2bb1d9(0x205),_0x5efb4c[_0x2bb1d9(0x16c)]=_0x2bb1d9(0x21d),_0x5efb4c[_0x2bb1d9(0x289)]='+',_0x5efb4c['onclick']=_0x34f1c4=>{const _0x2868dc=_0x2bb1d9;_0x34f1c4['stopPropagation']();const _0x464fed=document[_0x2868dc(0x246)](_0x2868dc(0x158));_0x464fed['type']=_0x2868dc(0x26c),_0x464fed[_0x2868dc(0x1d8)][_0x2868dc(0x19a)]=_0x2868dc(0x183);let _0x2257d7=![];_0x464fed[_0x2868dc(0x1f4)]=_0x3eab99=>{const _0x43ddb5=_0x2868dc;if(!_0x2257d7){PALETTE_COLORS[_0x43ddb5(0x284)](_0x3eab99['target'][_0x43ddb5(0x222)]);if(PALETTE_COLORS['length']>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x43ddb5(0x290)](0x0,0x18);savePaletteToDB(),createPalette(),_0x2257d7=!![],_0x464fed[_0x43ddb5(0x22a)]();}},_0x464fed['addEventListener'](_0x2868dc(0x221),()=>{const _0x2ad92c=_0x2868dc;if(!_0x2257d7)_0x464fed[_0x2ad92c(0x22a)]();}),_0x464fed[_0x2868dc(0x18c)](_0x2868dc(0x195),_0x4913e8=>_0x4913e8[_0x2868dc(0x134)]()),document[_0x2868dc(0x1c8)][_0x2868dc(0x216)](_0x464fed),_0x464fed['focus'](),_0x464fed['click']();},_0x158c21['insertBefore'](_0x5efb4c,_0x158c21[_0x2bb1d9(0x186)]);let _0x35d80c=document[_0x2bb1d9(0x25b)](_0x2bb1d9(0x1fe));!_0x35d80c&&(_0x35d80c=document[_0x2bb1d9(0x246)](_0x2bb1d9(0x257)),_0x35d80c['id']=_0x2bb1d9(0x1fe),_0x35d80c[_0x2bb1d9(0x19f)]=_0x2bb1d9(0x1fe),_0x158c21[_0x2bb1d9(0x283)][_0x2bb1d9(0x216)](_0x35d80c)),_0x35d80c[_0x2bb1d9(0x289)]=_0x2bb1d9(0x168)+(currentTool===_0x2bb1d9(0x14e)?_0x2bb1d9(0x220):'')+_0x2bb1d9(0x1af)+(currentTool===_0x2bb1d9(0x215)?_0x2bb1d9(0x220):'')+_0x2bb1d9(0x1cd)+(currentTool==='fill'?_0x2bb1d9(0x220):'')+'\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>Â°ó„Çä„Å§„Å∂„Åó</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Â§™„Åï:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22'+(penSize==0x1?_0x2bb1d9(0x282):'')+'>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22'+(penSize==0x2?_0x2bb1d9(0x282):'')+_0x2bb1d9(0x28d)+(penSize==0x3?_0x2bb1d9(0x282):'')+_0x2bb1d9(0x1b5)+(penSize==0x4?'\x20selected':'')+_0x2bb1d9(0x17f)+(penMode===_0x2bb1d9(0x163)?_0x2bb1d9(0x282):'')+'>ÂõõËßí„Éö„É≥</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22'+(penMode===_0x2bb1d9(0x1d1)?'\x20selected':'')+_0x2bb1d9(0x16e)+Math[_0x2bb1d9(0x1ac)](currentAlpha*0x64)+_0x2bb1d9(0x150)+Math[_0x2bb1d9(0x1ac)](currentAlpha*0x64)+_0x2bb1d9(0x229),_0x35d80c[_0x2bb1d9(0x291)](_0x2bb1d9(0x1d5))['onchange']=_0x397241=>setPenSize(_0x397241[_0x2bb1d9(0x19b)]['value']),_0x35d80c[_0x2bb1d9(0x291)]('#palette-penMode')[_0x2bb1d9(0x1df)]=_0x50277f=>setPenMode(_0x50277f[_0x2bb1d9(0x19b)][_0x2bb1d9(0x222)]),_0x35d80c[_0x2bb1d9(0x1f5)](_0x2bb1d9(0x1b0))[_0x2bb1d9(0x136)](_0x59a02a=>{const _0x585815=_0x2bb1d9;_0x59a02a[_0x585815(0x224)]=()=>setTool(_0x59a02a['dataset'][_0x585815(0x20c)]);}),_0x35d80c[_0x2bb1d9(0x291)](_0x2bb1d9(0x193))[_0x2bb1d9(0x1f4)]=_0x5debca=>{const _0x405dc5=_0x2bb1d9;setAlpha(_0x5debca['target'][_0x405dc5(0x222)]),_0x35d80c['querySelector'](_0x405dc5(0x197))[_0x405dc5(0x17b)]=_0x5debca['target'][_0x405dc5(0x222)]+'%';let _0x1f3d3f=document[_0x405dc5(0x25b)]('alphaSlider'),_0x120002=document[_0x405dc5(0x25b)](_0x405dc5(0x29f));if(_0x1f3d3f)_0x1f3d3f['value']=_0x5debca[_0x405dc5(0x19b)][_0x405dc5(0x222)];if(_0x120002)_0x120002[_0x405dc5(0x17b)]=_0x5debca['target'][_0x405dc5(0x222)]+'%';};}function setAlpha(_0x5e9aed){const _0x21e2b6=a0_0xed34dc;let _0x5ee5a0=Math[_0x21e2b6(0x233)](0x0,Math['min'](0x64,parseInt(_0x5e9aed,0xa)||0x0));currentAlpha=_0x5ee5a0/0x64;let _0x37c718=document[_0x21e2b6(0x25b)]('alphaSlider'),_0x3c325a=document['getElementById'](_0x21e2b6(0x29f));if(_0x37c718)_0x37c718['value']=_0x5ee5a0;if(_0x3c325a)_0x3c325a[_0x21e2b6(0x17b)]=_0x5ee5a0+'%';let _0x7f37b2=document['getElementById'](_0x21e2b6(0x1e2)),_0x489f12=document[_0x21e2b6(0x25b)](_0x21e2b6(0x1a2));if(_0x7f37b2)_0x7f37b2[_0x21e2b6(0x222)]=_0x5ee5a0;if(_0x489f12)_0x489f12[_0x21e2b6(0x17b)]=_0x5ee5a0+'%';}async function savePaletteToDB(){const _0xf2ac7d=a0_0xed34dc;try{await idbSet('nezumi-palette',PALETTE_COLORS);}catch(_0x354fdf){console[_0xf2ac7d(0x248)](_0xf2ac7d(0x253),_0x354fdf);}}async function loadPaletteFromDB(){const _0x3b42ef=a0_0xed34dc;try{const _0xe947a0=await idbGet(_0x3b42ef(0x171));Array['isArray'](_0xe947a0)&&_0xe947a0[_0x3b42ef(0x157)]&&(PALETTE_COLORS=_0xe947a0);}catch(_0x4b2ee2){console[_0x3b42ef(0x248)](_0x3b42ef(0x133),_0x4b2ee2);}}document[a0_0xed34dc(0x18c)](a0_0xed34dc(0x135),()=>{const _0x14504f=a0_0xed34dc,_0x14b104=document[_0x14504f(0x25b)](_0x14504f(0x1b4));_0x14b104&&(_0x14b104['oninput']=_0xc6561=>{const _0x1faefa=_0x14504f;currentColor=_0xc6561[_0x1faefa(0x19b)][_0x1faefa(0x222)],document[_0x1faefa(0x1f5)](_0x1faefa(0x25c))[_0x1faefa(0x136)](_0xff362f=>_0xff362f[_0x1faefa(0x1ae)][_0x1faefa(0x22a)](_0x1faefa(0x1e6)));});const _0x6391a3=document['getElementById'](_0x14504f(0x22d)),_0x47c801=document['getElementById'](_0x14504f(0x29f));_0x6391a3&&_0x47c801&&(_0x6391a3[_0x14504f(0x1f4)]=_0xe6cfba=>{const _0x216c84=_0x14504f;setAlpha(_0xe6cfba[_0x216c84(0x19b)]['value']),_0x47c801['textContent']=_0xe6cfba[_0x216c84(0x19b)][_0x216c84(0x222)]+'%';let _0x4e7135=document[_0x216c84(0x25b)](_0x216c84(0x1e2)),_0x3ff72c=document['getElementById'](_0x216c84(0x1a2));if(_0x4e7135)_0x4e7135['value']=_0xe6cfba[_0x216c84(0x19b)][_0x216c84(0x222)];if(_0x3ff72c)_0x3ff72c[_0x216c84(0x17b)]=_0xe6cfba['target'][_0x216c84(0x222)]+'%';});});async function convertToGIF(_0x1d9661,_0x2f29b1=0xc8,_0x283a37=a0_0xed34dc(0x21c)){const _0x2c4298=a0_0xed34dc,_0x1572bf=new window[(_0x2c4298(0x20b))]({'workers':0x2,'quality':0xa,'workerScript':_0x2c4298(0x27f)});_0x1d9661[_0x2c4298(0x136)](_0x7ec513=>_0x1572bf[_0x2c4298(0x148)](_0x7ec513,{'delay':_0x2f29b1})),_0x1572bf['on']('finished',_0x5b0a4f=>{const _0x11f9f6=_0x2c4298,_0x301d87=URL['createObjectURL'](_0x5b0a4f),_0x4419e8=document[_0x11f9f6(0x246)]('a');_0x4419e8['href']=_0x301d87,_0x4419e8['download']=_0x283a37,document[_0x11f9f6(0x1c8)]['appendChild'](_0x4419e8),_0x4419e8[_0x11f9f6(0x195)](),setTimeout(()=>{const _0x866f2c=_0x11f9f6;document[_0x866f2c(0x1c8)]['removeChild'](_0x4419e8),URL[_0x866f2c(0x1c5)](_0x301d87);},0x3e8);}),_0x1572bf[_0x2c4298(0x13d)]();}function makeAPNGBlob(_0x4779f,_0x1d3342,_0x7e660,_0xda65b2=0xc8){const _0x4d1a8d=a0_0xed34dc,_0x44ec9e=[],_0x56f979=[],_0x361970=document[_0x4d1a8d(0x246)](_0x4d1a8d(0x191));_0x361970[_0x4d1a8d(0x24e)]=_0x1d3342,_0x361970[_0x4d1a8d(0x144)]=_0x7e660;const _0x2a578a=_0x361970[_0x4d1a8d(0x1fa)]('2d');_0x4779f[_0x4d1a8d(0x136)](_0x541e39=>{const _0x155132=_0x4d1a8d;_0x2a578a[_0x155132(0x26a)](0x0,0x0,_0x1d3342,_0x7e660),_0x2a578a['drawImage'](_0x541e39,0x0,0x0,_0x1d3342,_0x7e660);const _0x3c4607=_0x2a578a['getImageData'](0x0,0x0,_0x1d3342,_0x7e660)[_0x155132(0x1dd)][_0x155132(0x13e)];_0x44ec9e['push'](_0x3c4607),_0x56f979[_0x155132(0x16f)](_0xda65b2);});const _0x55cdf1=window[_0x4d1a8d(0x2a0)]['encode'](_0x44ec9e,_0x1d3342,_0x7e660,0x0,_0x56f979);return new Blob([_0x55cdf1],{'type':_0x4d1a8d(0x23d)});}function convertToAPNG(_0x44c650,_0x18d078,_0x579a5a,_0x202d05=0xc8,_0x6bdd3=a0_0xed34dc(0x18f)){const _0x5189e3=a0_0xed34dc,_0x2b1c21=makeAPNGBlob(_0x44c650,_0x18d078,_0x579a5a,_0x202d05),_0x520ed6=URL[_0x5189e3(0x22f)](_0x2b1c21),_0x6561a2=document[_0x5189e3(0x246)]('a');_0x6561a2[_0x5189e3(0x28b)]=_0x520ed6,_0x6561a2[_0x5189e3(0x174)]=_0x6bdd3,document[_0x5189e3(0x1c8)][_0x5189e3(0x216)](_0x6561a2),_0x6561a2[_0x5189e3(0x195)](),setTimeout(()=>{document['body']['removeChild'](_0x6561a2),URL['revokeObjectURL'](_0x520ed6);},0x3e8);}async function loadImages(_0x48d956){const _0x2a1cc3=a0_0xed34dc,_0x2b0f97=await Promise[_0x2a1cc3(0x147)](_0x48d956[_0x2a1cc3(0x26e)](_0x4d3161=>{return new Promise(_0x5b72f4=>{const _0x42dca2=a0_0x39a8,_0x422aca=new Image();_0x422aca[_0x42dca2(0x210)]=_0x42dca2(0x1b9),_0x422aca[_0x42dca2(0x14b)]=_0x4d3161,_0x422aca[_0x42dca2(0x19e)]=()=>_0x5b72f4(_0x422aca);});}));return _0x2b0f97;}function exportSpriteSheetDialog(){const _0x1fa2a1=a0_0xed34dc;let _0x5d04d1=prompt('„Çπ„Éó„É©„Ç§„Éà„Ç∑„Éº„Éà„ÅÆÊã°Â§ßÁéá„ÇíÊåáÂÆöÔºà‰æã:\x201\x20=\x20ÂÖÉ„Çµ„Ç§„Ç∫,\x202\x20=\x202ÂÄçÔºâ','1');if(_0x5d04d1===null)return;let _0x55b8d2=Math[_0x1fa2a1(0x233)](0x1,parseInt(_0x5d04d1,0xa)||0x1),_0x2883bd=prompt('„Éï„É¨„Éº„É†Èñì„ÅÆ‰ΩôÁôΩ(px)\x20„ÇíÊåáÂÆöÔºà‰æã:\x200Ôºâ','0');if(_0x2883bd===null)return;let _0x16d75c=Math[_0x1fa2a1(0x233)](0x0,parseInt(_0x2883bd,0xa)||0x0);exportSpriteSheet(_0x55b8d2,_0x16d75c);}function exportSpriteSheet(_0x40e601=0x1,_0xa6a752=0x0){const _0x4314c8=a0_0xed34dc,_0x54827e=getCurrentProject();if(!_0x54827e){alert(_0x4314c8(0x212));return;}const _0x473e36=_0x54827e[_0x4314c8(0x13b)];if(!_0x473e36||_0x473e36[_0x4314c8(0x157)]===0x0){alert(_0x4314c8(0x275));return;}const _0x8bde1e=_0x54827e['width']*cellSize,_0xc535dd=_0x54827e['height']*cellSize,_0xcad4fa=_0x8bde1e*_0x473e36[_0x4314c8(0x157)]*_0x40e601+Math[_0x4314c8(0x233)](0x0,_0x473e36['length']-0x1)*_0xa6a752,_0x49cd5a=_0xc535dd*_0x40e601,_0x3237ba=document[_0x4314c8(0x246)](_0x4314c8(0x191));_0x3237ba['width']=_0xcad4fa,_0x3237ba['height']=_0x49cd5a;const _0x544628=_0x3237ba[_0x4314c8(0x1fa)]('2d');_0x544628[_0x4314c8(0x26a)](0x0,0x0,_0x3237ba[_0x4314c8(0x24e)],_0x3237ba[_0x4314c8(0x144)]);let _0x1ca5d9=0x0;for(let _0x3205ca=0x0;_0x3205ca<_0x473e36[_0x4314c8(0x157)];_0x3205ca++){let _0x5d4cc0=document['createElement']('canvas');_0x5d4cc0[_0x4314c8(0x24e)]=_0x8bde1e,_0x5d4cc0[_0x4314c8(0x144)]=_0xc535dd;let _0x42bfb5=_0x5d4cc0[_0x4314c8(0x1fa)]('2d');for(let _0x4e2155=0x0;_0x4e2155<_0x473e36[_0x3205ca][_0x4314c8(0x1e0)][_0x4314c8(0x157)];_0x4e2155++){_0x42bfb5[_0x4314c8(0x1ce)](_0x473e36[_0x3205ca][_0x4314c8(0x1e0)][_0x4e2155],0x0,0x0);}_0x40e601===0x1&&_0xa6a752===0x0?(_0x544628[_0x4314c8(0x1ce)](_0x5d4cc0,_0x1ca5d9,0x0),_0x1ca5d9+=_0x8bde1e):(_0x544628[_0x4314c8(0x1ce)](_0x5d4cc0,0x0,0x0,_0x8bde1e,_0xc535dd,_0x1ca5d9,0x0,_0x8bde1e*_0x40e601,_0xc535dd*_0x40e601),_0x1ca5d9+=_0x8bde1e*_0x40e601),_0x3205ca<_0x473e36[_0x4314c8(0x157)]-0x1&&_0xa6a752>0x0&&(_0x1ca5d9+=_0xa6a752);}const _0x3e0ea3=(_0x54827e[_0x4314c8(0x219)]||'nezumi-spritesheet')['replace'](/[\\/:*?"<>|]/g,'_'),_0x432058=document[_0x4314c8(0x246)]('a');_0x432058['href']=_0x3237ba[_0x4314c8(0x201)]('image/png'),_0x432058[_0x4314c8(0x174)]=_0x3e0ea3+_0x4314c8(0x1ec),document[_0x4314c8(0x1c8)][_0x4314c8(0x216)](_0x432058),_0x432058[_0x4314c8(0x195)](),setTimeout(()=>{const _0x3fdc82=_0x4314c8;document[_0x3fdc82(0x1c8)][_0x3fdc82(0x271)](_0x432058);},0x3e8);}const NEZUMI_METADATA_SIG=a0_0xed34dc(0x16a);function appendMetadataToBlob(_0x1d305b,_0x41d1f5){const _0x1588c1=a0_0xed34dc,_0x5f3410=new TextEncoder(),_0x49635b=_0x5f3410[_0x1588c1(0x288)](NEZUMI_METADATA_SIG),_0x59b6a7=_0x5f3410['encode'](JSON[_0x1588c1(0x187)](_0x41d1f5));return new Blob([_0x1d305b,_0x49635b,_0x59b6a7],{'type':_0x1d305b['type']||_0x1588c1(0x223)});}function indexOfSubarray(_0x4c6d50,_0x5e1b87){const _0x52dea3=a0_0xed34dc;for(let _0x5dbf3a=0x0;_0x5dbf3a<=_0x4c6d50[_0x52dea3(0x157)]-_0x5e1b87[_0x52dea3(0x157)];_0x5dbf3a++){let _0x317915=!![];for(let _0xaf4c6=0x0;_0xaf4c6<_0x5e1b87[_0x52dea3(0x157)];_0xaf4c6++){if(_0x4c6d50[_0x5dbf3a+_0xaf4c6]!==_0x5e1b87[_0xaf4c6]){_0x317915=![];break;}}if(_0x317915)return _0x5dbf3a;}return-0x1;}function extractMetadataFromArrayBuffer(_0x142340){const _0x1d632d=a0_0xed34dc,_0x45738f=new TextEncoder()[_0x1d632d(0x288)](NEZUMI_METADATA_SIG),_0x4b6ae2=new Uint8Array(_0x142340),_0xb32dbf=indexOfSubarray(_0x4b6ae2,_0x45738f);if(_0xb32dbf===-0x1)return null;const _0x18375f=_0x4b6ae2['subarray'](_0xb32dbf+_0x45738f[_0x1d632d(0x157)]);try{const _0x31a055=new TextDecoder()[_0x1d632d(0x27c)](_0x18375f);return JSON[_0x1d632d(0x262)](_0x31a055);}catch(_0x52ebab){return null;}}async function exportStandalone(){const _0x5b311f=a0_0xed34dc;let _0x54d1e1=getCurrentProject(),_0x3d1cd9=_0x54d1e1['frames'],_0x473672=_0x54d1e1[_0x5b311f(0x24e)]*cellSize,_0x3acc41=_0x54d1e1['height']*cellSize;const _0x51fc6e=_0x3d1cd9['map'](_0x4d7f83=>{const _0x15fb84=_0x5b311f;let _0x3c93dd=document[_0x15fb84(0x246)](_0x15fb84(0x191));_0x3c93dd[_0x15fb84(0x24e)]=_0x473672,_0x3c93dd[_0x15fb84(0x144)]=_0x3acc41;let _0x54b82d=_0x3c93dd[_0x15fb84(0x1fa)]('2d');for(let _0x84090b=0x0;_0x84090b<_0x4d7f83[_0x15fb84(0x1e0)][_0x15fb84(0x157)];_0x84090b++){_0x54b82d['drawImage'](_0x4d7f83[_0x15fb84(0x1e0)][_0x84090b],0x0,0x0);}let _0x278ae7=new Image();return _0x278ae7['src']=_0x3c93dd[_0x15fb84(0x201)]('image/png'),_0x278ae7;});await Promise['all'](_0x51fc6e[_0x5b311f(0x26e)](_0x23cee7=>new Promise(_0x4dbb34=>{_0x23cee7['onload']=_0x4dbb34;})))['catch'](()=>{});const _0x32f580=(_0x54d1e1['name']||_0x5b311f(0x15b))[_0x5b311f(0x1e7)](/[\\/:*?"<>|]/g,'_'),_0x203476=makeAPNGBlob(_0x51fc6e,_0x473672,_0x3acc41,animationDelay),_0x25671c={'type':_0x5b311f(0x232),'version':0x1,'project':{'width':_0x54d1e1[_0x5b311f(0x24e)],'height':_0x54d1e1['height'],'name':_0x54d1e1[_0x5b311f(0x219)]||'','activeFrame':_0x54d1e1[_0x5b311f(0x146)],'frames':_0x54d1e1[_0x5b311f(0x13b)][_0x5b311f(0x26e)](_0x31202a=>({'activeLayer':_0x31202a[_0x5b311f(0x29d)],'layers':_0x31202a[_0x5b311f(0x1e0)][_0x5b311f(0x26e)](_0x3cfd33=>_0x3cfd33[_0x5b311f(0x201)]())}))}},_0x22673f=appendMetadataToBlob(_0x203476,_0x25671c),_0x465c44=URL['createObjectURL'](_0x22673f),_0x36e4eb=document[_0x5b311f(0x246)]('a');_0x36e4eb[_0x5b311f(0x28b)]=_0x465c44,_0x36e4eb[_0x5b311f(0x174)]=_0x32f580+'.apng',document[_0x5b311f(0x1c8)][_0x5b311f(0x216)](_0x36e4eb),_0x36e4eb[_0x5b311f(0x195)](),setTimeout(()=>{const _0x52e67b=_0x5b311f;document[_0x52e67b(0x1c8)]['removeChild'](_0x36e4eb),URL[_0x52e67b(0x1c5)](_0x465c44);},0x3e8);}function loadStandaloneFromFile(_0x42072b){return new Promise((_0x20a9d5,_0x27d09f)=>{const _0x24317f=a0_0x39a8,_0x22bdbf=new FileReader();_0x22bdbf[_0x24317f(0x19e)]=_0xcd5787=>{const _0x1d8c0b=_0x24317f,_0x3be0c3=_0xcd5787[_0x1d8c0b(0x19b)]['result'],_0x1eeec7=extractMetadataFromArrayBuffer(_0x3be0c3);if(!_0x1eeec7||!_0x1eeec7[_0x1d8c0b(0x141)]){_0x27d09f(new Error(_0x1d8c0b(0x237)));return;}const _0x4267e7=_0x1eeec7[_0x1d8c0b(0x141)];try{const _0xc0cc2b=createProject(_0x4267e7[_0x1d8c0b(0x24e)],_0x4267e7[_0x1d8c0b(0x144)],_0x4267e7['name']||'ÁîªÂÉè');_0xc0cc2b[_0x1d8c0b(0x13b)]=_0x4267e7[_0x1d8c0b(0x13b)][_0x1d8c0b(0x26e)](_0x28b93e=>{const _0x4dd471=_0x1d8c0b;let _0x744ebe={'layers':[],'activeLayer':_0x28b93e[_0x4dd471(0x29d)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x410d6d=0x0;_0x410d6d<_0x28b93e[_0x4dd471(0x1e0)][_0x4dd471(0x157)];_0x410d6d++){let _0xd32e29=new Image();_0xd32e29[_0x4dd471(0x14b)]=_0x28b93e['layers'][_0x410d6d];let _0x1d0fe8=document[_0x4dd471(0x246)](_0x4dd471(0x191));_0x1d0fe8[_0x4dd471(0x24e)]=_0x4267e7[_0x4dd471(0x24e)]*cellSize,_0x1d0fe8[_0x4dd471(0x144)]=_0x4267e7[_0x4dd471(0x144)]*cellSize,_0xd32e29['onload']=()=>{const _0x40b8b8=_0x4dd471;let _0x52fd1f=_0x1d0fe8[_0x40b8b8(0x1fa)]('2d');_0x52fd1f['clearRect'](0x0,0x0,_0x1d0fe8[_0x40b8b8(0x24e)],_0x1d0fe8[_0x40b8b8(0x144)]),_0x52fd1f['drawImage'](_0xd32e29,0x0,0x0);},_0x744ebe[_0x4dd471(0x1e0)][_0x4dd471(0x16f)](_0x1d0fe8);}return _0x744ebe;}),projects['push'](_0xc0cc2b),activeProject=projects[_0x1d8c0b(0x157)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x20a9d5(_0xc0cc2b);}catch(_0x3b284a){_0x27d09f(_0x3b284a);}},_0x22bdbf[_0x24317f(0x161)]=_0x4b3737=>_0x27d09f(_0x4b3737),_0x22bdbf[_0x24317f(0x1b1)](_0x42072b);});}function toggleSection(_0x48b53f){const _0x543c5c=a0_0xed34dc,_0xb85bbd=document[_0x543c5c(0x25b)](_0x48b53f),_0x3584e3=_0xb85bbd[_0x543c5c(0x291)](_0x543c5c(0x14f)),_0x570f20=_0xb85bbd[_0x543c5c(0x291)](_0x543c5c(0x267));_0x3584e3[_0x543c5c(0x1d8)]['display']===_0x543c5c(0x183)?(_0x3584e3[_0x543c5c(0x1d8)][_0x543c5c(0x19a)]='',_0x570f20['textContent']='‚ñº'):(_0x3584e3[_0x543c5c(0x1d8)][_0x543c5c(0x19a)]='none',_0x570f20[_0x543c5c(0x17b)]='‚ñ≤');}document[a0_0xed34dc(0x18c)]('DOMContentLoaded',()=>{const _0x7109f9=a0_0xed34dc;document[_0x7109f9(0x1f5)](_0x7109f9(0x207))[_0x7109f9(0x136)](_0x4d8852=>_0x4d8852[_0x7109f9(0x1d8)]['display']=''),document[_0x7109f9(0x1f5)](_0x7109f9(0x245))[_0x7109f9(0x136)](_0xd0e649=>_0xd0e649[_0x7109f9(0x17b)]='‚ñº');}),window['addEventListener'](a0_0xed34dc(0x1cb),updateMenuBtnDisplay),document[a0_0xed34dc(0x18c)]('DOMContentLoaded',updateMenuBtnDisplay);function toggleSideMenu(_0x4ff277){const _0x49a9cd=a0_0xed34dc,_0x284020=document[_0x49a9cd(0x25b)]('sidebar'),_0x4fa83b=document['getElementById'](_0x49a9cd(0x142)),_0x387cb5=document[_0x49a9cd(0x25b)](_0x49a9cd(0x259)),_0x3e1e57=document[_0x49a9cd(0x25b)](_0x49a9cd(0x164)),_0x57a653=_0x284020[_0x49a9cd(0x1ae)][_0x49a9cd(0x1d6)](_0x49a9cd(0x13f));let _0x40413b=typeof _0x4ff277==='boolean'?_0x4ff277:!_0x57a653;_0x40413b?(_0x284020[_0x49a9cd(0x1ae)][_0x49a9cd(0x251)]('open'),_0x4fa83b[_0x49a9cd(0x1ae)][_0x49a9cd(0x251)](_0x49a9cd(0x190)),document['body'][_0x49a9cd(0x1d8)][_0x49a9cd(0x1de)]=_0x49a9cd(0x298),document['body']['style']['touchAction']=_0x49a9cd(0x183),window[_0x49a9cd(0x17a)]<=0x384&&(_0x3e1e57[_0x49a9cd(0x1d8)][_0x49a9cd(0x19a)]=_0x49a9cd(0x218),_0x387cb5[_0x49a9cd(0x1d8)][_0x49a9cd(0x19a)]=_0x49a9cd(0x183))):(_0x284020[_0x49a9cd(0x1ae)][_0x49a9cd(0x22a)](_0x49a9cd(0x13f)),_0x4fa83b['classList'][_0x49a9cd(0x22a)](_0x49a9cd(0x190)),document[_0x49a9cd(0x1c8)][_0x49a9cd(0x1d8)][_0x49a9cd(0x1de)]='',document[_0x49a9cd(0x1c8)][_0x49a9cd(0x1d8)][_0x49a9cd(0x20a)]='',window['innerWidth']<=0x384&&(_0x3e1e57[_0x49a9cd(0x1d8)][_0x49a9cd(0x19a)]='none',_0x387cb5[_0x49a9cd(0x1d8)][_0x49a9cd(0x19a)]='block'));}function updateMenuBtnDisplay(){const _0x9d5290=a0_0xed34dc,_0x7056fb=document[_0x9d5290(0x25b)](_0x9d5290(0x177)),_0x5e5075=document[_0x9d5290(0x25b)](_0x9d5290(0x142)),_0x310d17=document['getElementById'](_0x9d5290(0x259)),_0x145d53=document[_0x9d5290(0x25b)]('menu-toggle-btn-close');window[_0x9d5290(0x17a)]>0x384?(_0x7056fb['classList']['remove'](_0x9d5290(0x13f)),_0x5e5075['classList'][_0x9d5290(0x22a)]('sidebar-open'),_0x145d53[_0x9d5290(0x1d8)]['display']=_0x9d5290(0x183),_0x310d17[_0x9d5290(0x1d8)][_0x9d5290(0x19a)]=_0x9d5290(0x183),document[_0x9d5290(0x1c8)]['style']['overflow']='',document['body'][_0x9d5290(0x1d8)][_0x9d5290(0x20a)]=''):_0x7056fb['classList'][_0x9d5290(0x1d6)]('open')?(_0x145d53['style'][_0x9d5290(0x19a)]=_0x9d5290(0x218),_0x310d17[_0x9d5290(0x1d8)][_0x9d5290(0x19a)]=_0x9d5290(0x183)):(_0x145d53[_0x9d5290(0x1d8)][_0x9d5290(0x19a)]=_0x9d5290(0x183),_0x310d17['style'][_0x9d5290(0x19a)]=_0x9d5290(0x218));}document[a0_0xed34dc(0x18c)]('click',function(_0xbd37c0){const _0x3c0e08=a0_0xed34dc;if(window[_0x3c0e08(0x17a)]>0x384)return;const _0x45cf83=document[_0x3c0e08(0x25b)](_0x3c0e08(0x177)),_0x462a08=document[_0x3c0e08(0x25b)](_0x3c0e08(0x142)),_0x227a86=document[_0x3c0e08(0x25b)]('menu-toggle-btn'),_0xedf926=document['getElementById'](_0x3c0e08(0x164));!_0x45cf83[_0x3c0e08(0x1d6)](_0xbd37c0['target'])&&_0xbd37c0['target']!==_0x227a86&&_0xbd37c0[_0x3c0e08(0x19b)]!==_0xedf926&&(_0x45cf83['classList'][_0x3c0e08(0x22a)](_0x3c0e08(0x13f)),_0x462a08[_0x3c0e08(0x1ae)]['remove'](_0x3c0e08(0x190)),_0xedf926[_0x3c0e08(0x1d8)][_0x3c0e08(0x19a)]='none',_0x227a86[_0x3c0e08(0x1d8)][_0x3c0e08(0x19a)]='block',document[_0x3c0e08(0x1c8)]['style'][_0x3c0e08(0x1de)]='',document['body'][_0x3c0e08(0x1d8)][_0x3c0e08(0x20a)]='');}),(function(){const _0x371236=a0_0xed34dc;try{(location['pathname'][_0x371236(0x1e5)](/index\.html$/)||location[_0x371236(0x24f)]==='/'||location[_0x371236(0x24f)]===_0x371236(0x235))&&(!localStorage[_0x371236(0x1e1)](_0x371236(0x225))&&(localStorage['setItem'](_0x371236(0x225),'1'),location[_0x371236(0x28b)]=_0x371236(0x17d)));}catch(_0x5014a0){}}());let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document['addEventListener'](a0_0xed34dc(0x18d),_0x5802a2=>{const _0x38200b=a0_0xed34dc;if(_0x5802a2['key']===_0x38200b(0x241))shiftPressed=!![];}),document[a0_0xed34dc(0x18c)](a0_0xed34dc(0x1f8),_0x2296e4=>{const _0x39eb3f=a0_0xed34dc;if(_0x2296e4[_0x39eb3f(0x155)]===_0x39eb3f(0x241))shiftPressed=![];}),canvas['addEventListener'](a0_0xed34dc(0x19c),_0x4c6721=>{const _0x1fb757=a0_0xed34dc;if(_0x4c6721['pointerType']===_0x1fb757(0x206))return;currentTool==='pan'||shiftPressed?(dragging=!![],isDrawing=![],startX=_0x4c6721[_0x1fb757(0x265)],startY=_0x4c6721[_0x1fb757(0x25f)],lastX=posX,lastY=posY,canvas[_0x1fb757(0x1c3)](_0x4c6721[_0x1fb757(0x1f2)]),canvas[_0x1fb757(0x1d8)][_0x1fb757(0x13c)]=_0x1fb757(0x1a9)):(isDrawing=!![],pointerDownX=_0x4c6721[_0x1fb757(0x265)],pointerDownY=_0x4c6721[_0x1fb757(0x25f)],handleMouseDown(_0x4c6721),canvas[_0x1fb757(0x1c3)](_0x4c6721[_0x1fb757(0x1f2)]));}),canvas[a0_0xed34dc(0x18c)](a0_0xed34dc(0x162),_0x495692=>{const _0x564181=a0_0xed34dc;if(_0x495692[_0x564181(0x1d0)]===_0x564181(0x206))return;if(dragging)posX=lastX+(_0x495692[_0x564181(0x265)]-startX),posY=lastY+(_0x495692[_0x564181(0x25f)]-startY),updateTransform();else{if(isDrawing){if(currentTool!==_0x564181(0x14e)){const _0x1fb80f=Math[_0x564181(0x20f)](_0x495692[_0x564181(0x265)]-pointerDownX),_0x2b62d8=Math[_0x564181(0x20f)](_0x495692[_0x564181(0x25f)]-pointerDownY);if(_0x1fb80f>=PAN_CANCEL_DISTANCE||_0x2b62d8>=PAN_CANCEL_DISTANCE){isDrawing=![];try{handleMouseUp(_0x495692);}catch(_0x2d0399){}return;}}handleMouseMove(_0x495692);}}}),canvas[a0_0xed34dc(0x18c)](a0_0xed34dc(0x25a),_0x31f9ff=>{const _0x3412b0=a0_0xed34dc;if(_0x31f9ff[_0x3412b0(0x1d0)]===_0x3412b0(0x206))return;dragging=![];isDrawing&&handleMouseUp(_0x31f9ff);isDrawing=![];try{canvas[_0x3412b0(0x1aa)](_0x31f9ff[_0x3412b0(0x1f2)]);}catch(_0x409938){}if(currentTool===_0x3412b0(0x2a1))canvas['style'][_0x3412b0(0x13c)]='grab';else canvas[_0x3412b0(0x1d8)]['cursor']='crosshair';}),wrapper['addEventListener']('wheel',_0x4863f6=>{const _0x5fd347=a0_0xed34dc;_0x4863f6[_0x5fd347(0x14c)]();const _0x5f052c=canvas[_0x5fd347(0x26f)](),_0x1e9c4f=_0x4863f6['clientX'],_0x104b4e=_0x4863f6[_0x5fd347(0x25f)],_0x1fad0e=(_0x1e9c4f-_0x5f052c[_0x5fd347(0x154)]-posX)/scale,_0x8b3112=(_0x104b4e-_0x5f052c[_0x5fd347(0x266)]-posY)/scale,_0x138f30=_0x4863f6[_0x5fd347(0x1a3)]>0x0?0.9:1.1;let _0x1d824f=scale*_0x138f30;_0x1d824f=Math[_0x5fd347(0x1db)](Math[_0x5fd347(0x233)](_0x1d824f,0.2),0x5),posX=_0x1e9c4f-_0x5f052c['left']-_0x1fad0e*_0x1d824f,posY=_0x104b4e-_0x5f052c[_0x5fd347(0x266)]-_0x8b3112*_0x1d824f,scale=_0x1d824f,updateTransform();const _0x41a13a=document[_0x5fd347(0x25b)](_0x5fd347(0x279)),_0x299222=document[_0x5fd347(0x25b)]('zoomValue');if(_0x41a13a)_0x41a13a['value']=Math['round'](scale*0x64);if(_0x299222)_0x299222[_0x5fd347(0x17b)]=Math[_0x5fd347(0x1ac)](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x1829b6=a0_0xed34dc;canvas[_0x1829b6(0x1d8)][_0x1829b6(0x240)]=_0x1829b6(0x28e)+posX+_0x1829b6(0x24d)+posY+_0x1829b6(0x17e)+scale+')';}function setZoomValue(_0x21c8e2){const _0x1872a3=a0_0xed34dc,_0x33872b=Math['max'](0x14,Math['min'](0x1f4,parseInt(_0x21c8e2,0xa)||0x64)),_0xdf7ace=_0x33872b/0x64;scale=_0xdf7ace,updateTransform();const _0x59d75a=document[_0x1872a3(0x25b)](_0x1872a3(0x279)),_0x4182fe=document[_0x1872a3(0x25b)](_0x1872a3(0x24c));if(_0x59d75a)_0x59d75a[_0x1872a3(0x222)]=_0x33872b;if(_0x4182fe)_0x4182fe[_0x1872a3(0x17b)]=_0x33872b+'%';}function zoomIn(){const _0xe40537=a0_0xed34dc,_0x19171c=document[_0xe40537(0x25b)]('zoomSlider');let _0x4aa17a=_0x19171c?parseInt(_0x19171c[_0xe40537(0x222)],0xa):Math[_0xe40537(0x1ac)](scale*0x64);_0x4aa17a=Math['min'](0x1f4,_0x4aa17a+0xa),setZoomValue(_0x4aa17a);}function zoomOut(){const _0x4aff2f=a0_0xed34dc,_0x55d305=document['getElementById']('zoomSlider');let _0xccbf34=_0x55d305?parseInt(_0x55d305['value'],0xa):Math[_0x4aff2f(0x1ac)](scale*0x64);_0xccbf34=Math[_0x4aff2f(0x233)](0x14,_0xccbf34-0xa),setZoomValue(_0xccbf34);}const zs=document[a0_0xed34dc(0x25b)](a0_0xed34dc(0x279));if(zs)zs[a0_0xed34dc(0x1f4)]=_0x133512=>setZoomValue(_0x133512[a0_0xed34dc(0x19b)][a0_0xed34dc(0x222)]);const zv=document[a0_0xed34dc(0x25b)](a0_0xed34dc(0x24c));if(zv)zv[a0_0xed34dc(0x17b)]=Math[a0_0xed34dc(0x1ac)](scale*0x64)+'%';function getCanvasCoords(_0x4d70a2){const _0x5c0d89=a0_0xed34dc,_0x3cdd6d=canvas['getBoundingClientRect'](),_0x44bf00=canvas[_0x5c0d89(0x24e)]/_0x3cdd6d[_0x5c0d89(0x24e)],_0x6e08a7=canvas[_0x5c0d89(0x144)]/_0x3cdd6d['height'],_0x2bbcf6=(_0x4d70a2['clientX']-_0x3cdd6d['left'])*_0x44bf00,_0x234165=(_0x4d70a2[_0x5c0d89(0x25f)]-_0x3cdd6d[_0x5c0d89(0x266)])*_0x6e08a7;return{'x':_0x2bbcf6,'y':_0x234165};}function handleDrawStart(_0x2fbea6){const _0xb8569e=a0_0xed34dc,_0xd3a6a9=getCanvasCoords(_0x2fbea6);ctx[_0xb8569e(0x138)](),ctx[_0xb8569e(0x181)](_0xd3a6a9['x'],_0xd3a6a9['y']);}function handleDrawMove(_0x33fcad){const _0x20c993=a0_0xed34dc,_0x3424e0=getCanvasCoords(_0x33fcad);ctx[_0x20c993(0x1f6)](_0x3424e0['x'],_0x3424e0['y']),ctx[_0x20c993(0x192)]();}function handleDrawEnd(_0x4f33d5){const _0x284236=a0_0xed34dc;ctx[_0x284236(0x1bc)]();}