<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8" />
    <title>„Éç„Ç∫„Éü„Çπ„Ç±„ÉÉ„ÉÅ - Á∞°Âçò„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥‰ΩúÊàê„Éª„Éâ„ÉÉ„ÉàÁµµÂà∂‰Ωú„ÉÑ„Éº„É´</title>

    <!-- ‚úÖ SEO ÂØæÁ≠ñ -->
    <meta name="description" content="„Éç„Ç∫„Éü„Çπ„Ç±„ÉÉ„ÉÅ„ÅØ„ÄÅË™∞„Åß„ÇÇÁ∞°Âçò„Å´„Éâ„ÉÉ„ÉàÁµµ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Åå‰Ωú„Çå„ÇãÁÑ°Êñô„ÉÑ„Éº„É´„Åß„Åô„ÄÇ„É¨„Ç§„É§„Éº„Éª„Éï„É¨„Éº„É†ÂØæÂøú„ÄÅGIF„ÇÑAPNG„ÅÆÊõ∏„ÅçÂá∫„Åó„ÇÇÂèØËÉΩÔºÅ">
    <meta name="keywords" content="„Éâ„ÉÉ„ÉàÁµµ, „Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥, ÁÑ°Êñô, „ÉÑ„Éº„É´, GIF, APNG, Á∞°Âçò, „Éî„ÇØ„Çª„É´„Ç¢„Éº„Éà, „Éâ„ÉÉ„ÉàÁµµ„ÉÑ„Éº„É´">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="mouse0329">
        <link rel="manifest" href="manifest.json">
        <meta name="theme-color" content="#1976d2">

    <!-- ‚úÖ SNS „Ç∑„Çß„Ç¢ÂØæÂøú (OGP) -->
    <meta property="og:title" content="„Éç„Ç∫„Éü„Çπ„Ç±„ÉÉ„ÉÅ - „Éâ„ÉÉ„ÉàÁµµ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Âà∂‰Ωú„ÉÑ„Éº„É´">
    <meta property="og:description" content="Á∞°Âçò„Å´„Éâ„ÉÉ„ÉàÁµµ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Åå‰Ωú„Çå„ÇãÁÑ°Êñô„ÉÑ„Éº„É´ÔºÅGIF„ÉªAPNGÊõ∏„ÅçÂá∫„Åó„ÇÇÂØæÂøú„ÄÇ">
    <meta property="og:image" content="https://mouse-sketch.netlify.app/img/„Çπ„ÇØ„É™„Éº„É≥„Ç∑„Éß„ÉÉ„Éà.png">
    <meta property="og:url" content="https://mouse-sketch.netlify.app/">
    <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <!-- ‚úÖ Favicon -->
    <link rel="icon" href="nezumi-drawing_icon.webp" type="image/x-icon">

    <!-- ‚úÖ CSS / Google Fonts -->
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <!-- ‚úÖ JS„É©„Ç§„Éñ„É©„É™ -->
    <script src="lib/gif.js"></script>
    <script src="lib/gif.worker.js"></script>
    <script src="lib/UPNG.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pako/2.1.0/pako.min.js"></script>

    <meta name="google-site-verification" content="Af1CNAOQL69PRjpiLRod78siKGGd2nDL_PbQiPICB6E" />
</head>

<body>
    <header id="header">
        <div class="header-left">
            <h1>
                <img src="/img/nezumi-drawing_icon.webp" alt="„Éç„Ç∫„Éü„Çπ„Ç±„ÉÉ„ÉÅ„Ç¢„Ç§„Ç≥„É≥" class="header-icon" width="36">
                <span class="app-title">„Éç„Ç∫„Éü„Çπ„Ç±„ÉÉ„ÉÅ</span>
                <small class="app-sub">„Éâ„ÉÉ„ÉàÁµµ„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥Âà∂‰Ωú„ÉÑ„Éº„É´</small>
            </h1>
        </div>
        <div class="header-controls">
            <div class="header-actions">
                <button class="btn" onclick="addProject()"><span class="material-icons">add_photo_alternate</span> ÁîªÂÉèËøΩÂä†</button>
                <button class="btn" onclick="saveProjectFile()"><span class="material-icons">save</span> ‰øùÂ≠ò</button>
                <label class="file-load-label">
                    <input type="file" id="loadProjectFile" accept=".msketch,application/json,image/*" style="display:none" onchange="loadProjectFile(event)">
                    <span class="file-load-btn"><span class="material-icons">folder_open</span> Èñã„Åè</span>
                </label>
            </div>
            <div class="header-meta">
                <span id="projectCount"></span>
                <div id="projectList" aria-label="„Éó„É≠„Ç∏„Çß„ÇØ„Éà‰∏ÄË¶ß"></div>
            </div>
            <button id="aboutBtn" class="btn" onclick="showAboutDialog()"><span class="material-icons">info</span> „Åì„ÅÆ„Ç¢„Éó„É™„Å´„Å§„ÅÑ„Å¶</button>
            <button id="themeToggleBtn" class="icon-btn" aria-label="„ÉÜ„Éº„ÉûÂàáÊõø" title="„ÉÜ„Éº„ÉûÂàáÊõø">üåô</button>
            <button id="toolsToggleBtn" class="icon-btn" aria-label="„ÉÑ„Éº„É´„ÇíÈñã„Åè" title="„ÉÑ„Éº„É´" style="display:none;">üß∞</button>
            <button id="menu-toggle-btn" onclick="toggleSideMenu()" aria-label="„É°„Éã„É•„Éº„ÇíÈñã„Åè" style="display:none;">‚ò∞</button>
        </div>
    </header>

    <div id="main-container">
        <div id="sidebar" class="sidepanel">
            <button id="menu-toggle-btn-close" class="menu-close" onclick="toggleSideMenu()" style="display:none;" aria-label="„É°„Éã„É•„Éº„ÇíÈñâ„Åò„Çã">√ó</button>
            <div class="sidepanel-scroll" style="overflow: auto">

                <section class="section collapsible" id="frame-section">
                    <div class="section-header" onclick="toggleSection('frame-section')">
                        <h2>„Éï„É¨„Éº„É†</h2>
                        <span class="toggle-btn" id="toggle-frame-section">‚ñº</span>
                    </div>
                    <div class="section-content" id="frame-section-content">
                        <div id="frame-controls">
                            <button onclick="addFrame()">
                                <span class="material-icons" style="vertical-align: middle;">add_box</span> „Éï„É¨„Éº„É†ËøΩÂä†
                            </button>
                            <span id="frameCount"></span>
                            <button onclick="playAnimation()">
                                <span class="material-icons" style="vertical-align: middle;">play_arrow</span> ÂÜçÁîü
                            </button>
                            <button onclick="stopAnimation()">
                                <span class="material-icons" style="vertical-align: middle;">stop</span> ÂÅúÊ≠¢
                            </button>
                            <label style="margin-left:12px; display:flex; align-items:center; gap:8px; margin-top:8px;">
                                ÈÄüÂ∫¶(ms):
                                <input id="animSpeedRange" type="range" min="50" max="1000" step="10" value="300" style="vertical-align: middle; width:100px;">
                                <input id="animSpeedValue" type="number" min="50" max="5000" step="10" value="300" style="width:64px;">
                            </label>
            <script>
              if ('serviceWorker' in navigator) {
                window.addEventListener('load', function() {
                  navigator.serviceWorker.register('service-worker.js').then(function(registration) {
                    // ÁôªÈå≤ÊàêÂäü
                    console.log('ServiceWorker registration successful with scope: ', registration.scope);
                  }, function(err) {
                    // ÁôªÈå≤Â§±Êïó
                    console.log('ServiceWorker registration failed: ', err);
                  });
                });
              }
            </script>
                        </div>
                        <div id="frameList"></div>
                    </div>
                </section>

                <section class="section collapsible" id="layer-section">
                    <div class="section-header" onclick="toggleSection('layer-section')">
                        <h2>„É¨„Ç§„É§„Éº</h2>
                        <span class="toggle-btn" id="toggle-layer-section">‚ñº</span>
                    </div>
                    <div class="section-content" id="layer-section-content">
                        <div id="layer-controls">
                            <button onclick="addLayer()">
                                <span class="material-icons" style="vertical-align: middle;">layers</span> „É¨„Ç§„É§„ÉºËøΩÂä†
                            </button>
                            <button id="copyLayerBtn" class="layer-action-btn" title="„Ç¢„ÇØ„ÉÜ„Ç£„Éñ„É¨„Ç§„É§„Éº„Çí„Ç≥„Éî„Éº">„Ç≥„Éî„Éº</button>
                            <button id="pasteLayerBtn" class="layer-action-btn" title="„Ç≥„Éî„Éº„Åó„Åü„É¨„Ç§„É§„Éº„ÇíË≤º„Çä‰ªò„Åë" disabled>„Éö„Éº„Çπ„Éà</button>
                            <div style="display:flex; gap:6px; align-items:center; margin-top:8px;">
                                <button id="nudgeUpBtn" class="layer-action-btn" title="‰∏ä„Å´ÁßªÂãï">‚Üë</button>
                                <button id="nudgeLeftBtn" class="layer-action-btn" title="Â∑¶„Å´ÁßªÂãï">‚Üê</button>
                                <button id="nudgeRightBtn" class="layer-action-btn" title="Âè≥„Å´ÁßªÂãï">‚Üí</button>
                                <button id="nudgeDownBtn" class="layer-action-btn" title="‰∏ã„Å´ÁßªÂãï">‚Üì</button>
                                <label style="margin-left:6px; font-size:13px;">Èáè:<input id="nudgeStep" type="number" value="1" min="1" style="width:48px; margin-left:6px;"></label>
                            </div>
                            <span id="layerCount"></span>
                        </div>
                        <div id="layerList"></div>
                    </div>
                </section>
            </div>

            <section class="section" id="export-section">
                <div class="section-header">
                    <h2>Âá∫Âäõ</h2>
                </div>
                <div class="section-content">
                    <div class="export-group">
                        <label style="display:flex;align-items:center;gap:8px;margin-bottom:8px;">
                            ÁîªË≥™:
                            <input id="exportQuality" type="range" min="1" max="10" value="8" style="width:100px;">
                            <span id="exportQualityValue">8</span>
                        </label>
                        <button onclick="exportImage('png')">PNG</button>
                        <button onclick="exportGif()">GIF</button>
                        <button onclick="exportApng()">APNG</button>
                        <button id="exportStandaloneApngBtn" title="„Éó„É≠„Ç∏„Çß„ÇØ„ÉàÊÉÖÂ†±„ÇíÂüã„ÇÅËæº„Çì„Å†APNG„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ" onclick="exportStandalone()">APNGÔºà„É°„Çø„Éá„Éº„ÇøÂÖ•Ôºâ</button>
                        <button onclick="exportSpriteSheetDialog()">„Çπ„Éó„É©„Ç§„Éà„Ç∑„Éº„Éà</button>
                        <button id="exportFramesZipBtn" class="btn" onclick="exportFramesLayersZip()">ZIP‰øùÂ≠ò</button>
                    </div>
                </div>
            </section>
        </div>

        <div id="main-panel">
            <section class="section">
                <h2>„Ç≠„É£„É≥„Éê„Çπ</h2>
                <div id="canvas-container" style="overflow:auto; max-width:100vw; max-height:70vh;">
                    <canvas id="canvas" style="display:block; max-width:none; max-height:none;" tabindex="0" aria-label="ÊèèÁîª„Ç≠„É£„É≥„Éê„Çπ"></canvas>
                </div>
            </section>
            <div class="tool-btn-container" style="margin-top:12px;">
                <div id="color-palette" class="palette-bar"></div>
                </div>
        </div>

        <div id="right-panel" class="sidepanel">
            <section class="section collapsible" id="tools-right-section">
                <div class="section-header" onclick="toggleSection('tools-right-section')">
                    <h2>„ÉÑ„Éº„É´</h2>
                    <span class="toggle-btn">‚ñº</span>
                </div>
                <div class="section-content">
                    <div id="right-toolbar" class="right-toolbar">
                        <button class="tool-btn" data-tool="pen" onclick="setTool('pen')" title="„Éö„É≥"><span class="material-icons">edit</span></button>
                        <button class="tool-btn" data-tool="fill" onclick="setTool('fill')" title="Â°ó„Çä„Å§„Å∂„Åó"><span class="material-icons">format_color_fill</span></button>
                        <button class="tool-btn" data-tool="eraser" onclick="setTool('eraser')" title="Ê∂à„Åó„Ç¥„É†"><span class="material-icons">delete</span></button>
                        <button class="tool-btn" data-tool="pan" onclick="setTool('pan')" title="ÁßªÂãï"><span class="material-icons">open_with</span></button>
                        <button class="tool-btn" data-tool="moveLayer" onclick="setTool('moveLayer')" title="„É¨„Ç§„É§„ÉºÁßªÂãï"><span class="material-icons">transform</span></button>
                        
                        <div style="grid-column: span 2; display:flex; gap:8px; align-items:center; justify-content:center; margin: 8px 0;">
                            <div id="currentColorSwatch" style="width:32px; height:32px; border-radius:8px; border:2px solid #888; background:#ff0000;"></div>
                            <button id="openColorPickerBtn" title="„Ç´„É©„Éº„Éî„ÉÉ„Ç´„Éº„ÇíÈñã„Åè" style="flex:1;">
                                <span class="material-icons" style="vertical-align:middle;">palette</span> „Ç´„É©„Éº„Éî„ÉÉ„Ç´„Éº
                            </button>
                        </div>

                        <div style="grid-column: span 2; display:flex; gap:4px; margin-bottom:8px;">
                            <button id="undoBtn" onclick="undo()" style="flex:1;"><span class="material-icons">undo</span> Êàª„Åô</button>
                            <button id="redoBtn" onclick="redo()" style="flex:1;"><span class="material-icons">redo</span> ÈÄ≤„ÇÄ</button>
                        </div>

                        <div id="scanColorsPanel" class="used-colors-panel" style="margin-top:16px;"></div>

                        <label style="grid-column: span 2; display:flex; gap:8px; align-items:center; justify-content:center;">
                            Â§™„Åï:
                            <select id="penSize" onchange="setPenSize(this.value)">
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                            </select>
                            ÂΩ¢Áä∂:
                            <select id="penMode" onchange="setPenMode(this.value)">
                                <option value="square">ÂõõËßí</option>
                                <option value="circle">‰∏∏</option>
                            </select>
                            „Ç¢„É´„Éï„Ç°:
                            <select id="penAlphaMode" title="ÂçäÈÄèÊòéÈï∑Êäº„ÅóÊåôÂãï" value="flat">
                                <option value="normal">ÊøÉ„Åè„Å™„Çã</option>
                                <option value="flat">Âùá‰∏Ä</option>
                            </select>
                        </label>

                        <div style="grid-column: span 2; display:flex; gap:8px; align-items:center; justify-content:center; margin-top:8px;">
                            <button onclick="zoomOut()" title="„Ç∫„Éº„É†„Ç¢„Ç¶„Éà">-</button>
                            <input type="range" id="zoomSlider" min="20" max="500" value="100" style="width:80px;">
                            <button onclick="zoomIn()" title="„Ç∫„Éº„É†„Ç§„É≥">+</button>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </div>

<!-- „Éï„ÉÉ„Çø„Éº„Çí„ÉÄ„Ç§„Ç¢„É≠„Ç∞Âºè„Å´Â§âÊõ¥Ôºö„Éï„ÉÉ„Çø„ÉºË°®Á§∫„ÅØ„ÉÄ„Ç§„Ç¢„É≠„Ç∞„ÅßË°å„ÅÜ -->
        <footer style="display:none;" id="site-footer">
            <!-- „Éï„ÉÉ„Çø„Éº„Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅØ„ÉÄ„Ç§„Ç¢„É≠„Ç∞„ÅßË°®Á§∫„Åó„Åæ„Åô -->
        </footer>

    <!-- „É≠„Éº„Éâ‰∏≠„Ç™„Éº„Éê„Éº„É¨„Ç§ -->
    <div id="loading-overlay" style="display:none;">
      <div class="loading-box" role="status" aria-live="polite">
        <div class="spinner" aria-hidden="true"></div>
        <div id="loading-message">Ë™≠„ÅøËæº„Åø‰∏≠‚Ä¶</div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.0/jszip.min.js" referrerpolicy="no-referrer"></script>
<!-- ‚ë† „Ç∞„É≠„Éº„Éê„É´Â§âÊï∞ÂÆöÁæ©ÔºàÂøÖ„ÅöÊúÄÂàùÔºâ -->
<script src="js/globals.js"></script>

<!-- ‚ë° ÂÖ±ÈÄö„É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£ -->
<script src="js/misc.js"></script>

<!-- ‚ë¢ „Éá„Éº„Çø„ÉªÁä∂ÊÖãÁÆ°ÁêÜ -->
<script src="js/project.js"></script>
<script src="js/storage.js"></script>

<!-- ‚ë£ Ëâ≤„ÉªË®àÁÆóÁ≥ª -->
<script src="js/color.js"></script>
<script src="js/ColorPicker.js"></script>
<script src="js/ColorPickerDialog.js"></script>
<script src="js/ColorPickerPaletteDialog.js"></script>

<!-- ‚ë§ ÊèèÁîª„Ç®„É≥„Ç∏„É≥ -->
<script src="js/draw.js"></script>

<!-- ‚ë• UI„É≠„Ç∏„ÉÉ„ÇØ -->
<script src="js/ui.js"></script>

<!-- ‚ë¶ ExportÁ≥ªÔºàUI„ÇÑÊèèÁîª„Å´‰æùÂ≠ò„Åô„ÇãÔºâ -->
<script src="js/export.js"></script>

<!-- ‚ëß „Ç§„Éô„É≥„ÉàÁôªÈå≤ÔºàÂøÖ„ÅöÊúÄÂæåÔºÅÔºâ -->
<script src="js/event.js"></script>

</body>

</html>