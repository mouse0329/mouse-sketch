(function(_0x433877,_0x3f4eef){const _0x194b9e=_0x4e9e,_0x5bc0e7=_0x433877();while(!![]){try{const _0x5675d2=parseInt(_0x194b9e(0x20a))/0x1*(parseInt(_0x194b9e(0x20e))/0x2)+-parseInt(_0x194b9e(0x200))/0x3+-parseInt(_0x194b9e(0x21b))/0x4*(-parseInt(_0x194b9e(0x1d8))/0x5)+parseInt(_0x194b9e(0x204))/0x6*(-parseInt(_0x194b9e(0x1e7))/0x7)+-parseInt(_0x194b9e(0x20c))/0x8+parseInt(_0x194b9e(0x1dd))/0x9+-parseInt(_0x194b9e(0x21e))/0xa;if(_0x5675d2===_0x3f4eef)break;else _0x5bc0e7['push'](_0x5bc0e7['shift']());}catch(_0x1a1b32){_0x5bc0e7['push'](_0x5bc0e7['shift']());}}}(_0x2c60,0x4e377));const _0x4413e5=(function(){let _0x53eebe=!![];return function(_0x4b4482,_0x4621c3){const _0xa7a185=_0x53eebe?function(){if(_0x4621c3){const _0x41e4d9=_0x4621c3['apply'](_0x4b4482,arguments);return _0x4621c3=null,_0x41e4d9;}}:function(){};return _0x53eebe=![],_0xa7a185;};}()),_0x4e68f9=_0x4413e5(this,function(){const _0x1814a4=_0x4e9e;return _0x4e68f9[_0x1814a4(0x205)]()[_0x1814a4(0x1e8)](_0x1814a4(0x1f6))[_0x1814a4(0x205)]()[_0x1814a4(0x206)](_0x4e68f9)[_0x1814a4(0x1e8)](_0x1814a4(0x1f6));});function _0x2c60(){const _0x19d394=['from','color-palette','round','slice','rgba(','8px','stopPropagation','appendChild','selected','\x20透明度','getContext','(((.+)+)+)+$','onclick','min','splice','absolute','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','<span\x20style=\x22position:relative;z-index:1;font-size:13px;color:#888;\x22>透明</span>','remove','palette-color','title','377604uwtmbo','relative','button','scanColorsPanel','812496ZhblQw','toString','constructor','length','background','style','13879GKtsRx','borderRadius','3811832ekIPBd','position','72NjwgMw','insertBefore','toLowerCase','createElement','className','count','test','#00000000','replace','querySelectorAll','forEach','join','sort','20jNApnb','hidden','width','4004150ZLiVUj','set','add','getImageData','638195tvWPON','map','unshift','floor','この色をパレットから削除','4105170ybAVHH','innerHTML','span','inset','height','classList','#000000','textContent','split','transparent','14VAOYQN','search','data','firstChild'];_0x2c60=function(){return _0x19d394;};return _0x2c60();}function _0x4e9e(_0x4f29ba,_0x251e1a){_0x4f29ba=_0x4f29ba-0x1d8;const _0x31d070=_0x2c60();let _0x4e68f9=_0x31d070[_0x4f29ba];return _0x4e68f9;}_0x4e68f9();function hexToRgbaCss(_0x1d480e,_0x5c72ea){const _0x43bf5a=_0x4e9e;let _0x3c6e7d,_0x17c5ad,_0x2764fc,_0x58b3f4=_0x5c72ea;if(_0x1d480e[_0x43bf5a(0x207)]===0x9)_0x3c6e7d=parseInt(_0x1d480e[_0x43bf5a(0x1ee)](0x1,0x3),0x10),_0x17c5ad=parseInt(_0x1d480e[_0x43bf5a(0x1ee)](0x3,0x5),0x10),_0x2764fc=parseInt(_0x1d480e['slice'](0x5,0x7),0x10),_0x58b3f4=parseInt(_0x1d480e[_0x43bf5a(0x1ee)](0x7,0x9),0x10)/0xff;else{if(_0x1d480e[_0x43bf5a(0x207)]===0x7)_0x3c6e7d=parseInt(_0x1d480e[_0x43bf5a(0x1ee)](0x1,0x3),0x10),_0x17c5ad=parseInt(_0x1d480e[_0x43bf5a(0x1ee)](0x3,0x5),0x10),_0x2764fc=parseInt(_0x1d480e[_0x43bf5a(0x1ee)](0x5,0x7),0x10);else{if(_0x1d480e[_0x43bf5a(0x207)]===0x4)_0x3c6e7d=parseInt(_0x1d480e[0x1]+_0x1d480e[0x1],0x10),_0x17c5ad=parseInt(_0x1d480e[0x2]+_0x1d480e[0x2],0x10),_0x2764fc=parseInt(_0x1d480e[0x3]+_0x1d480e[0x3],0x10);else return _0x1d480e;}}return _0x43bf5a(0x1ef)+_0x3c6e7d+','+_0x17c5ad+','+_0x2764fc+','+_0x58b3f4+')';}function hexToRgba(_0xc91f3b,_0x44a683=0x1){const _0x4aa881=_0x4e9e;if(_0xc91f3b==='transparent'||_0xc91f3b===_0x4aa881(0x215))return[0x0,0x0,0x0,0x0];_0xc91f3b=_0xc91f3b[_0x4aa881(0x216)]('#','');if(_0xc91f3b[_0x4aa881(0x207)]===0x3)_0xc91f3b=_0xc91f3b[_0x4aa881(0x1e5)]('')[_0x4aa881(0x1d9)](_0x331d1c=>_0x331d1c+_0x331d1c)[_0x4aa881(0x219)]('');if(_0xc91f3b[_0x4aa881(0x207)]===0x8){const _0x2555f9=parseInt(_0xc91f3b[_0x4aa881(0x1ee)](0x0,0x2),0x10),_0x246762=parseInt(_0xc91f3b[_0x4aa881(0x1ee)](0x2,0x4),0x10),_0x75594d=parseInt(_0xc91f3b['slice'](0x4,0x6),0x10),_0x20006d=parseInt(_0xc91f3b[_0x4aa881(0x1ee)](0x6,0x8),0x10);return[_0x2555f9,_0x246762,_0x75594d,_0x20006d];}let _0x572660=parseInt(_0xc91f3b,0x10);return[_0x572660>>0x10&0xff,_0x572660>>0x8&0xff,_0x572660&0xff,Math['round'](0xff*_0x44a683)];}function colorsMatch(_0x2c3130,_0x2be1d3){return _0x2c3130[0x0]===_0x2be1d3[0x0]&&_0x2c3130[0x1]===_0x2be1d3[0x1]&&_0x2c3130[0x2]===_0x2be1d3[0x2]&&_0x2c3130[0x3]===_0x2be1d3[0x3];}function createPalette(){const _0x27dbbd=_0x4e9e,_0x1ab62c=document['getElementById'](_0x27dbbd(0x1ec));if(!_0x1ab62c)return;_0x1ab62c[_0x27dbbd(0x1de)]='',PALETTE_COLORS[_0x27dbbd(0x218)]((_0x4a4812,_0x37322b)=>{const _0x1bc46f=_0x27dbbd,_0x51ec82=document[_0x1bc46f(0x211)](_0x1bc46f(0x202));_0x51ec82[_0x1bc46f(0x212)]=_0x1bc46f(0x1fe),_0x51ec82[_0x1bc46f(0x209)][_0x1bc46f(0x20d)]=_0x1bc46f(0x201),_0x51ec82[_0x1bc46f(0x209)]['overflow']=_0x1bc46f(0x21c),_0x51ec82[_0x1bc46f(0x1de)]='';let _0xd23b20=document['createElement']('div');_0xd23b20[_0x1bc46f(0x209)][_0x1bc46f(0x20d)]=_0x1bc46f(0x1fa),_0xd23b20[_0x1bc46f(0x209)][_0x1bc46f(0x1e0)]='0',_0xd23b20['style'][_0x1bc46f(0x20b)]=_0x1bc46f(0x1f0),_0xd23b20[_0x1bc46f(0x209)]['background']=_0x1bc46f(0x1fb);let _0x7170d=document[_0x1bc46f(0x211)]('div');_0x7170d[_0x1bc46f(0x209)][_0x1bc46f(0x20d)]=_0x1bc46f(0x1fa),_0x7170d[_0x1bc46f(0x209)][_0x1bc46f(0x1e0)]='0',_0x7170d['style']['borderRadius']=_0x1bc46f(0x1f0);if(_0x4a4812===_0x1bc46f(0x1e6)||_0x4a4812===_0x1bc46f(0x215))_0x7170d[_0x1bc46f(0x209)][_0x1bc46f(0x208)]='none',_0x51ec82[_0x1bc46f(0x1ff)]='透明',_0x51ec82[_0x1bc46f(0x1de)]=_0x1bc46f(0x1fc);else{if(/^#([0-9a-f]{8})$/i[_0x1bc46f(0x214)](_0x4a4812)){_0x7170d['style'][_0x1bc46f(0x208)]=hexToRgbaCss(_0x4a4812,0x1);const [_0x2d9e91,_0x3a3d02,_0x3369aa,_0x514cd0]=hexToRgba(_0x4a4812),_0x2a7595=_0x514cd0/0xff;_0x51ec82[_0x1bc46f(0x1ff)]=rgbaToHex(_0x2d9e91,_0x3a3d02,_0x3369aa)+'\x20'+Math['round'](_0x2a7595*0x64)+'%';}else _0x4a4812[_0x1bc46f(0x210)]()===currentColor[_0x1bc46f(0x210)]()&&currentAlpha<0x1?(_0x7170d[_0x1bc46f(0x209)]['background']=hexToRgbaCss(_0x4a4812,currentAlpha),_0x51ec82[_0x1bc46f(0x1ff)]=_0x4a4812+_0x1bc46f(0x1f4)+Math[_0x1bc46f(0x1ed)](currentAlpha*0x64)+'%'):(_0x7170d[_0x1bc46f(0x209)][_0x1bc46f(0x208)]=_0x4a4812,_0x51ec82[_0x1bc46f(0x1ff)]=_0x4a4812);}_0x51ec82[_0x1bc46f(0x1f2)](_0xd23b20),_0x51ec82[_0x1bc46f(0x1f2)](_0x7170d),_0x51ec82[_0x1bc46f(0x1f7)]=()=>{const _0x28373a=_0x1bc46f;if(_0x4a4812===_0x28373a(0x1e6)||_0x4a4812===_0x28373a(0x215))currentColor='transparent',currentAlpha=0x0;else{if(/^#([0-9a-f]{8})$/i[_0x28373a(0x214)](_0x4a4812)){const [_0x30983a,_0x326be9,_0x5f272e,_0x23c0af]=hexToRgba(_0x4a4812);currentAlpha=_0x23c0af/0xff,currentColor=rgbaToHex(_0x30983a,_0x326be9,_0x5f272e);}else currentColor=_0x4a4812,currentAlpha=0x1;}updateCurrentColorSwatch(),document[_0x28373a(0x217)]('.palette-color')[_0x28373a(0x218)](_0x10a6fd=>_0x10a6fd[_0x28373a(0x1e2)][_0x28373a(0x1fd)](_0x28373a(0x1f3))),_0x51ec82[_0x28373a(0x1e2)][_0x28373a(0x220)](_0x28373a(0x1f3));};if(_0x37322b!==0x0){const _0x3ae5a4=document['createElement'](_0x1bc46f(0x1df));_0x3ae5a4[_0x1bc46f(0x1e4)]='×',_0x3ae5a4['className']='palette-del-btn',_0x3ae5a4[_0x1bc46f(0x1ff)]=_0x1bc46f(0x1dc),_0x3ae5a4[_0x1bc46f(0x1f7)]=_0x3d4691=>{const _0x1d65af=_0x1bc46f;_0x3d4691[_0x1d65af(0x1f1)](),PALETTE_COLORS[_0x1d65af(0x207)]>0x2&&(PALETTE_COLORS[_0x1d65af(0x1f9)](_0x37322b,0x1),createPalette());},_0x51ec82[_0x1bc46f(0x1f2)](_0x3ae5a4);}_0x1ab62c[_0x1bc46f(0x1f2)](_0x51ec82);});const _0x25eabc=document['createElement'](_0x27dbbd(0x202));_0x25eabc[_0x27dbbd(0x212)]='palette-add-btn',_0x25eabc[_0x27dbbd(0x1ff)]='パレットに色を追加',_0x25eabc[_0x27dbbd(0x1de)]='+',_0x25eabc[_0x27dbbd(0x1f7)]=_0x1264c8=>{const _0x31c29b=_0x27dbbd;_0x1264c8['stopPropagation'](),showColorPickerDialog({'color':currentColor===_0x31c29b(0x1e6)?_0x31c29b(0x1e3):currentColor,'alpha':currentAlpha,'okLabel':'追加','onChange':()=>{},'onOk':({hex:_0xbfb79c,rgba:_0x47f877,a:_0x1cf063})=>{const _0x37c2c1=_0x31c29b;if(_0x1cf063===0x0){if(PALETTE_COLORS[0x0]==='transparent')PALETTE_COLORS['splice'](0x1,0x0,_0x37c2c1(0x1e6));else PALETTE_COLORS['unshift'](_0x37c2c1(0x1e6));}else{const _0x702e9c=Math[_0x37c2c1(0x1ed)](_0x1cf063*0xff),_0x1eb087=_0x702e9c[_0x37c2c1(0x205)](0x10)['padStart'](0x2,'0');PALETTE_COLORS[_0x37c2c1(0x1da)](''+_0xbfb79c+_0x1eb087);}if(PALETTE_COLORS['length']>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x37c2c1(0x1ee)](0x0,0x18);savePaletteToDB(),createPalette();}});},_0x1ab62c[_0x27dbbd(0x20f)](_0x25eabc,_0x1ab62c[_0x27dbbd(0x1ea)]);const _0x39ad12=document['getElementById'](_0x27dbbd(0x203));if(_0x39ad12)_0x39ad12['style']['display']='';}function scanImageColors(){const _0x3bbf04=_0x4e9e,_0x4a5aa7=getCurrentProject(),_0x3e4ec6=getCurrentFrame();if(!_0x4a5aa7||!_0x3e4ec6)return[];const _0x37e9f4=new Map(),_0xd6c802=_0x4a5aa7[_0x3bbf04(0x21d)],_0x15c8fd=_0x4a5aa7[_0x3bbf04(0x1e1)],_0x5b6e40=canvas[_0x3bbf04(0x1f5)]('2d',{'willReadFrequently':!![]});for(let _0x23c008=0x0;_0x23c008<_0x15c8fd;_0x23c008++){for(let _0x141889=0x0;_0x141889<_0xd6c802;_0x141889++){const _0x283ff5=Math[_0x3bbf04(0x1f8)](Math[_0x3bbf04(0x1db)](_0x141889*cellSize+cellSize/0x2),canvas[_0x3bbf04(0x21d)]-0x1),_0x466166=Math[_0x3bbf04(0x1f8)](Math[_0x3bbf04(0x1db)](_0x23c008*cellSize+cellSize/0x2),canvas['height']-0x1),_0x43672e=_0x5b6e40[_0x3bbf04(0x221)](_0x283ff5,_0x466166,0x1,0x1)[_0x3bbf04(0x1e9)],_0x5e2a20=_0x43672e[0x0]+','+_0x43672e[0x1]+','+_0x43672e[0x2]+','+_0x43672e[0x3];_0x37e9f4[_0x3bbf04(0x21f)](_0x5e2a20,(_0x37e9f4['get'](_0x5e2a20)||0x0)+0x1);}}const _0x425799=Array[_0x3bbf04(0x1eb)](_0x37e9f4['entries']())[_0x3bbf04(0x1d9)](([_0x3426f1,_0x3db717])=>{const _0x5b071f=_0x3bbf04,[_0x55b605,_0x51ebcc,_0x50025a,_0x2212ec]=_0x3426f1[_0x5b071f(0x1e5)](',')['map'](_0x4fd4e7=>parseInt(_0x4fd4e7,0xa));return{'r':_0x55b605,'g':_0x51ebcc,'b':_0x50025a,'a':_0x2212ec,'count':_0x3db717};})[_0x3bbf04(0x21a)]((_0x34a4a2,_0x2b1b91)=>_0x2b1b91['count']-_0x34a4a2[_0x3bbf04(0x213)]);return _0x425799;}function rgbaToHex(_0x146982,_0x40d73b,_0x412b51){const _0x22ec64=_0x4e9e;return'#'+[_0x146982,_0x40d73b,_0x412b51][_0x22ec64(0x1d9)](_0x17fc09=>_0x17fc09[_0x22ec64(0x205)](0x10)['padStart'](0x2,'0'))[_0x22ec64(0x219)]('');}