const _0x5df01d=_0x2700;(function(_0x325488,_0x4080bb){const _0x372754=_0x2700,_0x3320f3=_0x325488();while(!![]){try{const _0x506511=-parseInt(_0x372754(0x232))/0x1*(parseInt(_0x372754(0x21c))/0x2)+parseInt(_0x372754(0x217))/0x3*(-parseInt(_0x372754(0x227))/0x4)+-parseInt(_0x372754(0x20e))/0x5*(-parseInt(_0x372754(0x22b))/0x6)+-parseInt(_0x372754(0x1f8))/0x7+parseInt(_0x372754(0x1dd))/0x8*(-parseInt(_0x372754(0x1fc))/0x9)+parseInt(_0x372754(0x22e))/0xa+parseInt(_0x372754(0x1f5))/0xb;if(_0x506511===_0x4080bb)break;else _0x3320f3['push'](_0x3320f3['shift']());}catch(_0x3a341a){_0x3320f3['push'](_0x3320f3['shift']());}}}(_0x5f4d,0x7b1e3));const _0x2fbce=(function(){let _0x153fc0=!![];return function(_0x2df9a0,_0x43ae4c){const _0x2838a7=_0x153fc0?function(){const _0x2ac36a=_0x2700;if(_0x43ae4c){const _0x1fe051=_0x43ae4c[_0x2ac36a(0x1df)](_0x2df9a0,arguments);return _0x43ae4c=null,_0x1fe051;}}:function(){};return _0x153fc0=![],_0x2838a7;};}()),_0x4d09b9=_0x2fbce(this,function(){const _0xaab4fd=_0x2700;return _0x4d09b9[_0xaab4fd(0x1ed)]()['search']('(((.+)+)+)+$')['toString']()[_0xaab4fd(0x222)](_0x4d09b9)[_0xaab4fd(0x20a)](_0xaab4fd(0x1d1));});_0x4d09b9();function getExportQuality(){const _0x4b85b4=_0x2700;var _0x35f0f5=document['getElementById']('exportQuality');return _0x35f0f5?parseInt(_0x35f0f5[_0x4b85b4(0x215)],0xa):0x8;}function getExportSize(){const _0x38ee0d=_0x2700,_0x10838f=getCurrentProject(),_0x361873=_0x10838f?_0x10838f['width']*cellSize:0x0,_0x52e5bb=_0x10838f?_0x10838f[_0x38ee0d(0x22f)]*cellSize:0x0,_0x239d76=document['getElementById'](_0x38ee0d(0x1f0)),_0x30258c=document['getElementById']('exportHeightPx');let _0x49335b=_0x239d76?parseInt(_0x239d76[_0x38ee0d(0x215)],0xa):NaN,_0x144a14=_0x30258c?parseInt(_0x30258c['value'],0xa):NaN;if(!Number['isFinite'](_0x49335b)||_0x49335b<=0x0)_0x49335b=NaN;if(!Number['isFinite'](_0x144a14)||_0x144a14<=0x0)_0x144a14=NaN;Number[_0x38ee0d(0x1d4)](_0x49335b)&&!Number[_0x38ee0d(0x1d4)](_0x144a14)&&_0x361873>0x0&&_0x52e5bb>0x0&&(_0x144a14=Math[_0x38ee0d(0x1e3)](_0x49335b*_0x52e5bb/_0x361873));Number[_0x38ee0d(0x1d4)](_0x144a14)&&!Number[_0x38ee0d(0x1d4)](_0x49335b)&&_0x361873>0x0&&_0x52e5bb>0x0&&(_0x49335b=Math[_0x38ee0d(0x1e3)](_0x144a14*_0x361873/_0x52e5bb));if(!Number[_0x38ee0d(0x1d4)](_0x49335b))_0x49335b=_0x361873;if(!Number[_0x38ee0d(0x1d4)](_0x144a14))_0x144a14=_0x52e5bb;return{'width':_0x49335b,'height':_0x144a14};}function _0x5f4d(){const _0x1860cf=['split','activeFrame','nezumi-animation','file','byteLength','1414616rXWhNy','nezumi-image','apply','replace','forEach','image/png','round','APNGを生成できませんでした。フレームが空かもしれません。','.webm','書き出し中...','vp8','click','createObjectURL','canvas','webp','_spritesheet.png','toString','clearRect','layers','exportWidthPx','getContext','catch','error','then','9369492SGuNvB','max','blob','3270659fkBRyk','-hidden','VideoEncoder','video/webm','9mjJxlg','nezumi-standalone','body','APNGに変換中...','activeLayer','onload','data','nezumi-spritesheet','GIFに変換できる画像がありません。','nezumi-animation.apng','revokeObjectURL','createElement','push','png','search','length','removeChild','スプライトシートの拡大率を指定（例:\x201\x20=\x20元サイズ,\x202\x20=\x202倍）','615RuRZqn','jpeg','nezumi-drawing','href','jpg','lib/gif.worker.js','width','value','frames','1257909sppOKf','プロジェクトがありません','GIF','image/','toDataURL','2bdINNG','このブラウザはWebCodecsによるWEBPアニメーションに対応していません。','.png','encode','buffer','filter','constructor','visible','drawImage','name','GIFに変換中...','4tXIgBR','nezumi-animation.gif','apng','min','42378mVFzuZ','configure','getImageData','5454900hUKuCp','height','undefined','close','698353BDKJFf','map','appendChild','isArray','(((.+)+)+)+$','render','.apng','isFinite','WebCodecs','フレーム間の余白(px)\x20を指定（例:\x200）','download'];_0x5f4d=function(){return _0x1860cf;};return _0x5f4d();}function exportCurrentFrameMergedPng(){const _0x55dc60=_0x2700,_0x5e69d1=getCurrentProject(),_0x486cf8=getCurrentFrame();if(!_0x5e69d1||!_0x486cf8)return;const {width:_0x171706,height:_0x908be8}=getExportSize(),_0x2ba3e0=document[_0x55dc60(0x207)](_0x55dc60(0x1ea));_0x2ba3e0['width']=_0x171706,_0x2ba3e0[_0x55dc60(0x22f)]=_0x908be8;const _0x473c52=_0x2ba3e0['getContext']('2d');for(let _0x56df96=0x0;_0x56df96<(Array[_0x55dc60(0x235)](_0x486cf8[_0x55dc60(0x1ef)])?_0x486cf8[_0x55dc60(0x1ef)][_0x55dc60(0x20b)]:0x0);_0x56df96++){const _0x33e2b1=_0x486cf8['layers'][_0x56df96];if(!_0x33e2b1)continue;const _0x512e5e=typeof _0x33e2b1['visible']!==_0x55dc60(0x230)?_0x33e2b1[_0x55dc60(0x223)]:!![];if(!_0x512e5e)continue;const _0x22c674=_0x33e2b1[_0x55dc60(0x1ea)]?_0x33e2b1[_0x55dc60(0x1ea)]:_0x33e2b1;if(_0x22c674)_0x473c52[_0x55dc60(0x224)](_0x22c674,0x0,0x0,_0x171706,_0x908be8);}const _0x1cf852=document[_0x55dc60(0x207)]('a'),_0x299260=(_0x5e69d1['name']||_0x55dc60(0x1de))[_0x55dc60(0x1e0)](/[\\/:*?"<>|]/g,'_');_0x1cf852['download']=_0x299260+_0x55dc60(0x21e),_0x1cf852[_0x55dc60(0x211)]=_0x2ba3e0[_0x55dc60(0x21b)](_0x55dc60(0x1e2)),_0x1cf852[_0x55dc60(0x1e8)]();}function exportCurrentFrameLayersPngZip(){const _0x1bdf65=_0x2700,_0x4bc46a=getCurrentProject(),_0x50be1c=getCurrentFrame();if(!_0x4bc46a||!_0x50be1c)return;const _0x4a3b73=_0x4bc46a[_0x1bdf65(0x214)]*cellSize,_0x388319=_0x4bc46a[_0x1bdf65(0x22f)]*cellSize,_0x53f380=new JSZip();for(let _0x283872=0x0;_0x283872<(Array[_0x1bdf65(0x235)](_0x50be1c['layers'])?_0x50be1c['layers'][_0x1bdf65(0x20b)]:0x0);_0x283872++){const _0x56db76=_0x50be1c[_0x1bdf65(0x1ef)][_0x283872];if(!_0x56db76)continue;const _0x3dac50=typeof _0x56db76[_0x1bdf65(0x223)]!==_0x1bdf65(0x230)?_0x56db76[_0x1bdf65(0x223)]:!![],_0x1d9448=_0x56db76['canvas']?_0x56db76[_0x1bdf65(0x1ea)]:_0x56db76;if(!_0x1d9448)continue;const _0x397b8a=document[_0x1bdf65(0x207)](_0x1bdf65(0x1ea));_0x397b8a['width']=_0x4a3b73,_0x397b8a[_0x1bdf65(0x22f)]=_0x388319;const _0x331fe8=_0x397b8a['getContext']('2d');_0x331fe8[_0x1bdf65(0x1ee)](0x0,0x0,_0x4a3b73,_0x388319),_0x331fe8['drawImage'](_0x1d9448,0x0,0x0);const _0xbae050=_0x397b8a['toDataURL'](_0x1bdf65(0x1e2)),_0x3e24ca=_0xbae050[_0x1bdf65(0x1d8)](',')[0x1];_0x53f380[_0x1bdf65(0x1db)]('layer-'+(_0x283872+0x1)+(_0x3dac50?'':_0x1bdf65(0x1f9))+'.png',_0x3e24ca,{'base64':!![]});}const _0x25ada3=(_0x4bc46a[_0x1bdf65(0x225)]||'nezumi-layers')[_0x1bdf65(0x1e0)](/[\\/:*?"<>|]/g,'_');_0x53f380['generateAsync']({'type':_0x1bdf65(0x1f7)})[_0x1bdf65(0x1f4)](_0x4f4174=>{const _0xc23ff2=_0x1bdf65,_0x4188e0=document['createElement']('a');_0x4188e0[_0xc23ff2(0x211)]=URL['createObjectURL'](_0x4f4174),_0x4188e0['download']=_0x25ada3+'-layers.zip',document[_0xc23ff2(0x1fe)]['appendChild'](_0x4188e0),_0x4188e0[_0xc23ff2(0x1e8)](),setTimeout(()=>{const _0x172217=_0xc23ff2;URL[_0x172217(0x206)](_0x4188e0[_0x172217(0x211)]),document['body'][_0x172217(0x20c)](_0x4188e0);},0x4b0);});}function exportImage(_0x524748){const _0x1c13fa=_0x2700;let _0x590d67=getCurrentProject(),_0x29c7b1=_0x590d67['frames'],_0x4c66e8=_0x524748==='jpg'||_0x524748===_0x1c13fa(0x20f)?'image/jpeg':_0x1c13fa(0x21a)+_0x524748,_0x2dd9d9=_0x29c7b1[_0x1c13fa(0x20b)]>0x1;const {width:_0xc2c8c0,height:_0x2205ca}=getExportSize();let _0x4fd4fe=(_0x590d67[_0x1c13fa(0x225)]||_0x1c13fa(0x210))[_0x1c13fa(0x1e0)](/[\\/:*?"<>|]/g,'_');if(!_0x2dd9d9){let _0x36aa3c=document[_0x1c13fa(0x207)](_0x1c13fa(0x1ea));_0x36aa3c[_0x1c13fa(0x214)]=_0xc2c8c0,_0x36aa3c[_0x1c13fa(0x22f)]=_0x2205ca;let _0x562898=_0x36aa3c['getContext']('2d'),_0x37ba2d=getCurrentFrame();for(let _0x54df71=0x0;_0x54df71<(Array['isArray'](_0x37ba2d[_0x1c13fa(0x1ef)])?_0x37ba2d[_0x1c13fa(0x1ef)][_0x1c13fa(0x20b)]:0x0);_0x54df71++){const _0x105203=_0x37ba2d[_0x1c13fa(0x1ef)][_0x54df71];if(!_0x105203)continue;const _0x5b6349=typeof _0x105203[_0x1c13fa(0x223)]!==_0x1c13fa(0x230)?_0x105203[_0x1c13fa(0x223)]:!![];if(!_0x5b6349)continue;const _0x11797e=_0x105203['canvas']?_0x105203[_0x1c13fa(0x1ea)]:_0x105203;if(_0x11797e)_0x562898[_0x1c13fa(0x224)](_0x11797e,0x0,0x0,_0xc2c8c0,_0x2205ca);}let _0x204021=document[_0x1c13fa(0x207)]('a');_0x204021[_0x1c13fa(0x1d7)]=_0x4fd4fe+'.'+_0x524748;if(_0x524748===_0x1c13fa(0x212)||_0x524748===_0x1c13fa(0x20f)){let _0x58edcb=getExportQuality(),_0x5cc621=Math[_0x1c13fa(0x1f6)](0.1,Math[_0x1c13fa(0x22a)](0x1,_0x58edcb/0xa));_0x204021[_0x1c13fa(0x211)]=_0x36aa3c[_0x1c13fa(0x21b)](_0x4c66e8,_0x5cc621);}else _0x524748===_0x1c13fa(0x209)?_0x204021[_0x1c13fa(0x211)]=_0x36aa3c['toDataURL'](_0x4c66e8):_0x204021[_0x1c13fa(0x211)]=_0x36aa3c[_0x1c13fa(0x21b)](_0x4c66e8);_0x204021[_0x1c13fa(0x1e8)]();}else{if(_0x524748===_0x1c13fa(0x1eb)&&typeof window[_0x1c13fa(0x1d5)]!==_0x1c13fa(0x230)){const {width:_0x49912b,height:_0x1f5200}=getExportSize();exportWebpAnimation(_0x29c7b1,_0x49912b,_0x1f5200,_0x4fd4fe);}else for(let _0xd11518=0x0;_0xd11518<_0x29c7b1[_0x1c13fa(0x20b)];_0xd11518++){let _0x240d85=document['createElement'](_0x1c13fa(0x1ea));_0x240d85['width']=_0xc2c8c0,_0x240d85['height']=_0x2205ca;let _0x15aee3=_0x240d85[_0x1c13fa(0x1f1)]('2d'),_0x419701=_0x29c7b1[_0xd11518];for(let _0x3fbadc=0x0;_0x3fbadc<(Array[_0x1c13fa(0x235)](_0x419701[_0x1c13fa(0x1ef)])?_0x419701[_0x1c13fa(0x1ef)][_0x1c13fa(0x20b)]:0x0);_0x3fbadc++){const _0x48c636=_0x419701[_0x1c13fa(0x1ef)][_0x3fbadc];if(!_0x48c636)continue;const _0x4458d4=typeof _0x48c636[_0x1c13fa(0x223)]!==_0x1c13fa(0x230)?_0x48c636[_0x1c13fa(0x223)]:!![];if(!_0x4458d4)continue;const _0x351711=_0x48c636[_0x1c13fa(0x1ea)]?_0x48c636[_0x1c13fa(0x1ea)]:_0x48c636;if(_0x351711)_0x15aee3[_0x1c13fa(0x224)](_0x351711,0x0,0x0,_0xc2c8c0,_0x2205ca);}let _0x471448=document[_0x1c13fa(0x207)]('a');_0x471448[_0x1c13fa(0x1d7)]=_0x4fd4fe+'-f'+(_0xd11518+0x1)+'.'+_0x524748;if(_0x524748===_0x1c13fa(0x212)||_0x524748===_0x1c13fa(0x20f)){let _0x2e0411=getExportQuality(),_0x5a0efc=Math['max'](0.1,Math[_0x1c13fa(0x22a)](0x1,_0x2e0411/0xa));_0x471448[_0x1c13fa(0x211)]=_0x240d85[_0x1c13fa(0x21b)](_0x4c66e8,_0x5a0efc);}else _0x524748===_0x1c13fa(0x209)?_0x471448[_0x1c13fa(0x211)]=_0x240d85[_0x1c13fa(0x21b)](_0x4c66e8):_0x471448[_0x1c13fa(0x211)]=_0x240d85[_0x1c13fa(0x21b)](_0x4c66e8);setTimeout(()=>_0x471448[_0x1c13fa(0x1e8)](),_0xd11518*0x64);}}}async function exportWebpAnimation(_0x519e8d,_0x4b4994,_0x47f9b3,_0x4ce38b='nezumi-animation'){const _0x2e5955=_0x2700;if(!window[_0x2e5955(0x1d5)]||!window[_0x2e5955(0x1fa)]){alert(_0x2e5955(0x21d));return;}const _0x3b0efa=[],_0x2bc6c1=new VideoEncoder({'output':_0x5dc6a5=>_0x3b0efa[_0x2e5955(0x208)](_0x5dc6a5),'error':_0xc9b17e=>console[_0x2e5955(0x1f3)](_0xc9b17e)});_0x2bc6c1[_0x2e5955(0x22c)]({'codec':_0x2e5955(0x1e7),'width':_0x4b4994,'height':_0x47f9b3,'framerate':0x5});for(let _0x33677b=0x0;_0x33677b<_0x519e8d[_0x2e5955(0x20b)];_0x33677b++){let _0x2bb3e7=document[_0x2e5955(0x207)](_0x2e5955(0x1ea));_0x2bb3e7[_0x2e5955(0x214)]=_0x4b4994,_0x2bb3e7['height']=_0x47f9b3;let _0xd13749=_0x2bb3e7[_0x2e5955(0x1f1)]('2d'),_0x51c339=_0x519e8d[_0x33677b];for(let _0x70424a=0x0;_0x70424a<(Array[_0x2e5955(0x235)](_0x51c339[_0x2e5955(0x1ef)])?_0x51c339[_0x2e5955(0x1ef)][_0x2e5955(0x20b)]:0x0);_0x70424a++){const _0x36fff3=_0x51c339['layers'][_0x70424a];if(!_0x36fff3)continue;const _0x2fdf7d=typeof _0x36fff3[_0x2e5955(0x223)]!==_0x2e5955(0x230)?_0x36fff3[_0x2e5955(0x223)]:!![];if(!_0x2fdf7d)continue;const _0x2ea1ab=_0x36fff3[_0x2e5955(0x1ea)]?_0x36fff3[_0x2e5955(0x1ea)]:_0x36fff3;if(_0x2ea1ab)_0xd13749[_0x2e5955(0x224)](_0x2ea1ab,0x0,0x0);}let _0x209242=await createImageBitmap(_0x2bb3e7);_0x2bc6c1['encode'](_0x209242,{'keyFrame':!![],'duration':0xc8}),_0x209242[_0x2e5955(0x231)]();}await _0x2bc6c1['flush'](),_0x2bc6c1[_0x2e5955(0x231)]();const _0x424152=new Blob(_0x3b0efa['map'](_0x3cf4cc=>_0x3cf4cc[_0x2e5955(0x1dc)]?_0x3cf4cc:_0x3cf4cc[_0x2e5955(0x202)]),{'type':_0x2e5955(0x1fb)}),_0x1c6bde=document[_0x2e5955(0x207)]('a');_0x1c6bde[_0x2e5955(0x1d7)]=_0x4ce38b+_0x2e5955(0x1e5),_0x1c6bde['href']=URL[_0x2e5955(0x1e9)](_0x424152),_0x1c6bde[_0x2e5955(0x1e8)]();}function exportGif(){const _0x19be76=_0x2700;try{showLoading(_0x19be76(0x226));}catch(_0x4bc567){}let _0x11cd76=getCurrentProject(),_0x374325=_0x11cd76[_0x19be76(0x216)];const {width:_0xecd7dc,height:_0x37c092}=getExportSize(),_0x4dbd1e=_0x374325[_0x19be76(0x233)](_0x2c5c21=>{const _0x1050f2=_0x19be76;let _0x23cf39=document[_0x1050f2(0x207)]('canvas');_0x23cf39[_0x1050f2(0x214)]=_0xecd7dc,_0x23cf39[_0x1050f2(0x22f)]=_0x37c092;let _0x5f4d48=_0x23cf39['getContext']('2d');for(let _0x1476ce=0x0;_0x1476ce<(Array[_0x1050f2(0x235)](_0x2c5c21['layers'])?_0x2c5c21[_0x1050f2(0x1ef)][_0x1050f2(0x20b)]:0x0);_0x1476ce++){const _0x4c3cc6=_0x2c5c21[_0x1050f2(0x1ef)][_0x1476ce];if(!_0x4c3cc6)continue;const _0x2602ce=typeof _0x4c3cc6[_0x1050f2(0x223)]!==_0x1050f2(0x230)?_0x4c3cc6['visible']:!![];if(!_0x2602ce)continue;const _0x1ebb00=_0x4c3cc6[_0x1050f2(0x1ea)]?_0x4c3cc6[_0x1050f2(0x1ea)]:_0x4c3cc6;if(_0x1ebb00)_0x5f4d48[_0x1050f2(0x224)](_0x1ebb00,0x0,0x0);}return _0x23cf39[_0x1050f2(0x21b)](_0x1050f2(0x1e2));});Promise['all'](_0x4dbd1e[_0x19be76(0x233)](_0xc4e7f8=>{return new Promise(_0x486239=>{const _0x549f9e=_0x2700,_0x1f6f1e=new Image();_0x1f6f1e['src']=_0xc4e7f8,_0x1f6f1e[_0x549f9e(0x201)]=()=>_0x486239(_0x1f6f1e);});}))[_0x19be76(0x1f4)](_0x476024=>{const _0x30ffb9=_0x19be76,_0x16b263=_0x476024[_0x30ffb9(0x221)](_0x3a110a=>_0x3a110a['width']>0x0&&_0x3a110a[_0x30ffb9(0x22f)]>0x0);if(_0x16b263[_0x30ffb9(0x20b)]===0x0){try{hideLoading();}catch(_0x4081aa){}alert(_0x30ffb9(0x204));return;}const _0x595935=(_0x11cd76[_0x30ffb9(0x225)]||_0x30ffb9(0x1da))['replace'](/[\\/:*?"<>|]/g,'_');let _0x569f89=getExportQuality(),_0x1b407f=0x1f-_0x569f89*0x3;convertToGIF(_0x16b263,animationDelay,_0x595935+'.gif',_0x1b407f);})[_0x19be76(0x1f2)](_0x1422ec=>{const _0x38d356=_0x19be76;try{hideLoading();}catch(_0x51d47f){};console[_0x38d356(0x1f3)](_0x1422ec);});}function _0x2700(_0x46ebd5,_0x1adbe8){_0x46ebd5=_0x46ebd5-0x1d1;const _0x1157eb=_0x5f4d();let _0x4d09b9=_0x1157eb[_0x46ebd5];return _0x4d09b9;}function exportApng(){const _0x4278ff=_0x2700;try{showLoading(_0x4278ff(0x1ff));}catch(_0x2cf79d){}let _0x14d097=getCurrentProject(),_0x474dca=_0x14d097[_0x4278ff(0x216)];const {width:_0x2af713,height:_0x239ca9}=getExportSize(),_0x40647b=_0x474dca['map'](_0x29f4d4=>{const _0x4e0235=_0x4278ff;let _0x1ebab8=document[_0x4e0235(0x207)](_0x4e0235(0x1ea));_0x1ebab8['width']=_0x2af713,_0x1ebab8[_0x4e0235(0x22f)]=_0x239ca9;let _0x3ae95f=_0x1ebab8[_0x4e0235(0x1f1)]('2d');for(let _0xed399c=0x0;_0xed399c<(Array[_0x4e0235(0x235)](_0x29f4d4[_0x4e0235(0x1ef)])?_0x29f4d4[_0x4e0235(0x1ef)]['length']:0x0);_0xed399c++){const _0x426c39=_0x29f4d4[_0x4e0235(0x1ef)][_0xed399c];if(!_0x426c39)continue;const _0x28622f=typeof _0x426c39[_0x4e0235(0x223)]!==_0x4e0235(0x230)?_0x426c39[_0x4e0235(0x223)]:!![];if(!_0x28622f)continue;const _0x1bd894=_0x426c39[_0x4e0235(0x1ea)]?_0x426c39[_0x4e0235(0x1ea)]:_0x426c39;if(_0x1bd894)_0x3ae95f[_0x4e0235(0x224)](_0x1bd894,0x0,0x0);}const _0x2d30c4=_0x3ae95f[_0x4e0235(0x22d)](0x0,0x0,_0x2af713,_0x239ca9)[_0x4e0235(0x202)][_0x4e0235(0x220)];return _0x2d30c4;}),_0x1b5a6b=(_0x14d097[_0x4278ff(0x225)]||_0x4278ff(0x1da))[_0x4278ff(0x1e0)](/[\\/:*?"<>|]/g,'_'),_0x3af63b=document['getElementById']('apngExtSelect'),_0x148da3=_0x3af63b?_0x3af63b['value']:_0x4278ff(0x229);let _0x4a1604=getExportQuality(),_0x261a52=Math['max'](0x0,Math[_0x4278ff(0x22a)](0xa,0xb-_0x4a1604));convertToAPNG(_0x40647b,_0x2af713,_0x239ca9,animationDelay,_0x1b5a6b+'.'+_0x148da3,_0x261a52);}async function convertToGIF(_0x1b7bc8,_0x36d31f=0xc8,_0xbcb1b9=_0x5df01d(0x228),_0x5cef1f=0xa){const _0x194ee9=_0x5df01d,_0x277650=new window[(_0x194ee9(0x219))]({'workers':0x2,'quality':_0x5cef1f,'workerScript':_0x194ee9(0x213)});_0x1b7bc8['forEach'](_0x33e33e=>_0x277650['addFrame'](_0x33e33e,{'delay':_0x36d31f})),_0x277650['on']('finished',_0xb5406f=>{const _0x535a22=_0x194ee9,_0x59dcb4=URL[_0x535a22(0x1e9)](_0xb5406f),_0x33bad3=document[_0x535a22(0x207)]('a');_0x33bad3[_0x535a22(0x211)]=_0x59dcb4,_0x33bad3[_0x535a22(0x1d7)]=_0xbcb1b9,document[_0x535a22(0x1fe)][_0x535a22(0x234)](_0x33bad3),_0x33bad3['click'](),setTimeout(()=>{const _0x145551=_0x535a22;document[_0x145551(0x1fe)]['removeChild'](_0x33bad3),URL[_0x145551(0x206)](_0x59dcb4);try{hideLoading();}catch(_0x249275){}},0x3e8);}),_0x277650[_0x194ee9(0x1d2)]();}function makeAPNGBlob(_0x496b21,_0x1c2269,_0x4314db,_0x3fa7b2=0xc8,_0x7ec96a=0x0){const _0x4a2152=_0x5df01d,_0x200e10=[],_0x1e7943=[],_0x47d46a=document[_0x4a2152(0x207)](_0x4a2152(0x1ea));_0x47d46a[_0x4a2152(0x214)]=_0x1c2269,_0x47d46a[_0x4a2152(0x22f)]=_0x4314db;const _0x180455=_0x47d46a[_0x4a2152(0x1f1)]('2d');_0x496b21[_0x4a2152(0x1e1)](_0x213c47=>{const _0x409bf1=_0x4a2152;if(_0x213c47 instanceof ArrayBuffer){_0x200e10[_0x409bf1(0x208)](_0x213c47),_0x1e7943['push'](_0x3fa7b2);return;}_0x180455['clearRect'](0x0,0x0,_0x1c2269,_0x4314db);try{_0x180455[_0x409bf1(0x224)](_0x213c47,0x0,0x0,_0x1c2269,_0x4314db);}catch(_0x16af8c){return;}const _0x345e7f=_0x180455['getImageData'](0x0,0x0,_0x1c2269,_0x4314db)[_0x409bf1(0x202)][_0x409bf1(0x220)];_0x200e10[_0x409bf1(0x208)](_0x345e7f),_0x1e7943[_0x409bf1(0x208)](_0x3fa7b2);});if(!_0x200e10[_0x4a2152(0x20b)])return null;const _0x117d4b=window['UPNG'][_0x4a2152(0x21f)](_0x200e10,_0x1c2269,_0x4314db,_0x7ec96a,_0x1e7943);return new Blob([_0x117d4b],{'type':'image/apng'});}function convertToAPNG(_0x469245,_0xd762ca,_0x2e29b9,_0x3a5bac=0xc8,_0x3c2201=_0x5df01d(0x205),_0x552f6c=0x0){const _0x2637ce=_0x5df01d,_0x497dad=makeAPNGBlob(_0x469245,_0xd762ca,_0x2e29b9,_0x3a5bac,_0x552f6c);if(!_0x497dad){try{hideLoading();}catch(_0x19dcf2){}alert(_0x2637ce(0x1e4));return;}const _0x1112c9=URL['createObjectURL'](_0x497dad),_0x40fff2=document[_0x2637ce(0x207)]('a');_0x40fff2[_0x2637ce(0x211)]=_0x1112c9,_0x40fff2[_0x2637ce(0x1d7)]=_0x3c2201,document[_0x2637ce(0x1fe)]['appendChild'](_0x40fff2),_0x40fff2[_0x2637ce(0x1e8)](),setTimeout(()=>{const _0x754032=_0x2637ce;document[_0x754032(0x1fe)][_0x754032(0x20c)](_0x40fff2),URL['revokeObjectURL'](_0x1112c9);try{hideLoading();}catch(_0x2a0f27){}},0x3e8);}function exportSpriteSheetDialog(){const _0x5a64ed=_0x5df01d;let _0x4c7787=prompt(_0x5a64ed(0x20d),'1');if(_0x4c7787===null)return;let _0x1f28a1=Math[_0x5a64ed(0x1f6)](0x1,parseInt(_0x4c7787,0xa)||0x1),_0x5b26b5=prompt(_0x5a64ed(0x1d6),'0');if(_0x5b26b5===null)return;let _0x3a7454=Math['max'](0x0,parseInt(_0x5b26b5,0xa)||0x0);exportSpriteSheet(_0x1f28a1,_0x3a7454);}function exportSpriteSheet(_0xa56b13=0x1,_0x21e1ca=0x0){const _0x5a1459=_0x5df01d,_0x1648b9=getCurrentProject();if(!_0x1648b9){alert(_0x5a1459(0x218));return;}const _0x3d1c19=_0x1648b9[_0x5a1459(0x216)];if(!_0x3d1c19||_0x3d1c19[_0x5a1459(0x20b)]===0x0){alert('フレームがありません');return;}const _0x4b19cd=_0x1648b9[_0x5a1459(0x214)]*cellSize,_0x353ea8=_0x1648b9[_0x5a1459(0x22f)]*cellSize,_0x567818=_0x4b19cd*_0x3d1c19['length']*_0xa56b13+Math[_0x5a1459(0x1f6)](0x0,_0x3d1c19[_0x5a1459(0x20b)]-0x1)*_0x21e1ca,_0x1211ea=_0x353ea8*_0xa56b13,_0x2d0ad9=document['createElement']('canvas');_0x2d0ad9[_0x5a1459(0x214)]=_0x567818,_0x2d0ad9['height']=_0x1211ea;const _0x5ab1ca=_0x2d0ad9['getContext']('2d');_0x5ab1ca['clearRect'](0x0,0x0,_0x2d0ad9[_0x5a1459(0x214)],_0x2d0ad9[_0x5a1459(0x22f)]);let _0x4c22eb=0x0;for(let _0x3d96fa=0x0;_0x3d96fa<_0x3d1c19[_0x5a1459(0x20b)];_0x3d96fa++){let _0x1d3dbe=document['createElement'](_0x5a1459(0x1ea));_0x1d3dbe[_0x5a1459(0x214)]=_0x4b19cd,_0x1d3dbe[_0x5a1459(0x22f)]=_0x353ea8;let _0x307fa5=_0x1d3dbe[_0x5a1459(0x1f1)]('2d');for(let _0x58e2f8=0x0;_0x58e2f8<(Array[_0x5a1459(0x235)](_0x3d1c19[_0x3d96fa][_0x5a1459(0x1ef)])?_0x3d1c19[_0x3d96fa][_0x5a1459(0x1ef)][_0x5a1459(0x20b)]:0x0);_0x58e2f8++){const _0x55e174=_0x3d1c19[_0x3d96fa][_0x5a1459(0x1ef)][_0x58e2f8];if(!_0x55e174)continue;const _0x6913e6=typeof _0x55e174[_0x5a1459(0x223)]!==_0x5a1459(0x230)?_0x55e174[_0x5a1459(0x223)]:!![];if(!_0x6913e6)continue;const _0x1a56eb=_0x55e174[_0x5a1459(0x1ea)]?_0x55e174[_0x5a1459(0x1ea)]:_0x55e174;if(_0x1a56eb)_0x307fa5[_0x5a1459(0x224)](_0x1a56eb,0x0,0x0);}_0xa56b13===0x1&&_0x21e1ca===0x0?(_0x5ab1ca[_0x5a1459(0x224)](_0x1d3dbe,_0x4c22eb,0x0),_0x4c22eb+=_0x4b19cd):(_0x5ab1ca['drawImage'](_0x1d3dbe,0x0,0x0,_0x4b19cd,_0x353ea8,_0x4c22eb,0x0,_0x4b19cd*_0xa56b13,_0x353ea8*_0xa56b13),_0x4c22eb+=_0x4b19cd*_0xa56b13),_0x3d96fa<_0x3d1c19[_0x5a1459(0x20b)]-0x1&&_0x21e1ca>0x0&&(_0x4c22eb+=_0x21e1ca);}const _0x2b9fe9=(_0x1648b9[_0x5a1459(0x225)]||_0x5a1459(0x203))[_0x5a1459(0x1e0)](/[\\/:*?"<>|]/g,'_'),_0x14655f=document[_0x5a1459(0x207)]('a');_0x14655f[_0x5a1459(0x211)]=_0x2d0ad9[_0x5a1459(0x21b)](_0x5a1459(0x1e2)),_0x14655f[_0x5a1459(0x1d7)]=_0x2b9fe9+_0x5a1459(0x1ec),document[_0x5a1459(0x1fe)][_0x5a1459(0x234)](_0x14655f),_0x14655f[_0x5a1459(0x1e8)](),setTimeout(()=>{const _0x5586ac=_0x5a1459;document['body'][_0x5586ac(0x20c)](_0x14655f);},0x3e8);}async function exportStandalone(){const _0x57e567=_0x5df01d;try{showLoading(_0x57e567(0x1e6));}catch(_0x50ad61){}let _0x462cf7=getCurrentProject(),_0x500313=_0x462cf7['frames'];const _0x18d41c=_0x462cf7[_0x57e567(0x214)]*cellSize,_0x5dc89a=_0x462cf7[_0x57e567(0x22f)]*cellSize,_0x19bd3b=_0x500313[_0x57e567(0x233)](_0x1fcdc2=>{const _0x49a38a=_0x57e567;let _0x1ec318=document['createElement'](_0x49a38a(0x1ea));_0x1ec318[_0x49a38a(0x214)]=_0x18d41c,_0x1ec318[_0x49a38a(0x22f)]=_0x5dc89a;let _0x21d36f=_0x1ec318[_0x49a38a(0x1f1)]('2d');for(let _0x541400=0x0;_0x541400<_0x1fcdc2['layers'][_0x49a38a(0x20b)];_0x541400++){const _0x3098f5=_0x1fcdc2[_0x49a38a(0x1ef)][_0x541400]&&_0x1fcdc2[_0x49a38a(0x1ef)][_0x541400][_0x49a38a(0x1ea)]?_0x1fcdc2[_0x49a38a(0x1ef)][_0x541400][_0x49a38a(0x1ea)]:_0x1fcdc2[_0x49a38a(0x1ef)][_0x541400];if(_0x3098f5)_0x21d36f[_0x49a38a(0x224)](_0x3098f5,0x0,0x0);}return _0x21d36f[_0x49a38a(0x22d)](0x0,0x0,_0x18d41c,_0x5dc89a)[_0x49a38a(0x202)]['buffer'];}),_0x27b0b3=(_0x462cf7[_0x57e567(0x225)]||_0x57e567(0x1da))[_0x57e567(0x1e0)](/[\\/:*?"<>|]/g,'_'),_0x2301ec=makeAPNGBlob(_0x19bd3b,_0x18d41c,_0x5dc89a,animationDelay),_0x1fdd38={'type':_0x57e567(0x1fd),'version':0x1,'project':{'width':_0x462cf7[_0x57e567(0x214)],'height':_0x462cf7[_0x57e567(0x22f)],'name':_0x462cf7[_0x57e567(0x225)]||'','activeFrame':_0x462cf7[_0x57e567(0x1d9)],'frames':_0x462cf7[_0x57e567(0x216)][_0x57e567(0x233)](_0x56046f=>({'activeLayer':_0x56046f[_0x57e567(0x200)],'layers':_0x56046f[_0x57e567(0x1ef)][_0x57e567(0x233)](_0x4097bf=>_0x4097bf&&_0x4097bf[_0x57e567(0x1ea)]?_0x4097bf['canvas'][_0x57e567(0x21b)]():_0x4097bf&&_0x4097bf[_0x57e567(0x21b)]?_0x4097bf[_0x57e567(0x21b)]():null)}))}},_0x5c214f=appendMetadataToBlob(_0x2301ec,_0x1fdd38),_0x37bdeb=URL['createObjectURL'](_0x5c214f),_0x20cee7=document[_0x57e567(0x207)]('a');_0x20cee7[_0x57e567(0x211)]=_0x37bdeb,_0x20cee7[_0x57e567(0x1d7)]=_0x27b0b3+_0x57e567(0x1d3),document[_0x57e567(0x1fe)][_0x57e567(0x234)](_0x20cee7);try{hideLoading();}catch(_0x639956){}_0x20cee7[_0x57e567(0x1e8)](),setTimeout(()=>{const _0xf66bd3=_0x57e567;document['body'][_0xf66bd3(0x20c)](_0x20cee7),URL[_0xf66bd3(0x206)](_0x37bdeb);},0x3e8);}