const _0x436c78=_0x1514;(function(_0x3b07d5,_0x1c20a6){const _0x4ce348=_0x1514,_0x243eb4=_0x3b07d5();while(!![]){try{const _0x46d3c8=parseInt(_0x4ce348(0x138))/0x1*(parseInt(_0x4ce348(0xd4))/0x2)+parseInt(_0x4ce348(0xce))/0x3*(-parseInt(_0x4ce348(0xd5))/0x4)+-parseInt(_0x4ce348(0xdc))/0x5*(-parseInt(_0x4ce348(0xdf))/0x6)+parseInt(_0x4ce348(0x136))/0x7*(parseInt(_0x4ce348(0xfa))/0x8)+parseInt(_0x4ce348(0xde))/0x9*(-parseInt(_0x4ce348(0x122))/0xa)+-parseInt(_0x4ce348(0xf4))/0xb*(-parseInt(_0x4ce348(0x117))/0xc)+parseInt(_0x4ce348(0x116))/0xd*(-parseInt(_0x4ce348(0x106))/0xe);if(_0x46d3c8===_0x1c20a6)break;else _0x243eb4['push'](_0x243eb4['shift']());}catch(_0x2ece9b){_0x243eb4['push'](_0x243eb4['shift']());}}}(_0x4d98,0xe1277));function _0x4d98(){const _0x20a031=['buffer','exportQuality','name','image/png','addFrame','appendChild','revokeObjectURL','1794114GhpVzA','exportWidthPx','22qDbgMS','max','image/apng','click','WebCodecs','3eSHpOI','blob','webp','スプライトシートの拡大率を指定（例:\x201\x20=\x20元サイズ,\x202\x20=\x202倍）','フレームがありません','exportHeightPx','116966pePDZo','1058812AWUZsd','nezumi-spritesheet','nezumi-layers','onload','APNGに変換中...','.webm','isArray','440ZPzHgn','png','3637323dPcgFW','17682mnglBS','finished','getContext','toString','removeChild','data','split','activeFrame','フレーム間の余白(px)\x20を指定（例:\x200）','function','search','GIFに変換中...','render','file','src','activeLayer','GIF','map','body','frames','createObjectURL','2097425AxpUYO','isFinite','nezumi-animation','error','byteLength','プロジェクトがありません','56ppgyZb','GIFに変換できる画像がありません。','-hidden','nezumi-export','UPNG','.png','.apng','-layers.zip','_spritesheet.png','clearRect','catch','href','12068aAoBkQ','download','jpeg','undefined','close','drawImage','nezumi-image','layer-','getImageData','canvas','createElement','encode','generateAsync','width','height','then','40755SNppRf','60jiWhME','layers','toDataURL','nezumi-drawing','jpg','lib/gif.worker.js','apply','flush','length','push','.gif','10LVpPJd','apngExtSelect','round','forEach','nezumi-standalone','(((.+)+)+)+$','value','all','image/jpeg','getElementById','replace','min','visible'];_0x4d98=function(){return _0x20a031;};return _0x4d98();}const _0x40e334=(function(){let _0x3a1168=!![];return function(_0x4e922b,_0x32c81a){const _0x2314b2=_0x3a1168?function(){const _0xa7c811=_0x1514;if(_0x32c81a){const _0x2413eb=_0x32c81a[_0xa7c811(0x11d)](_0x4e922b,arguments);return _0x32c81a=null,_0x2413eb;}}:function(){};return _0x3a1168=![],_0x2314b2;};}()),_0x3ba81a=_0x40e334(this,function(){const _0x453a71=_0x1514;return _0x3ba81a[_0x453a71(0xe2)]()[_0x453a71(0xe9)](_0x453a71(0x127))['toString']()['constructor'](_0x3ba81a)[_0x453a71(0xe9)](_0x453a71(0x127));});_0x3ba81a();function getExportQuality(){const _0x17cb11=_0x1514;var _0x2a4a9c=document[_0x17cb11(0x12b)](_0x17cb11(0x130));return _0x2a4a9c?parseInt(_0x2a4a9c[_0x17cb11(0x128)],0xa):0x8;}function _0x1514(_0x4add96,_0xfe9ef2){_0x4add96=_0x4add96-0xcc;const _0x2d9ea1=_0x4d98();let _0x3ba81a=_0x2d9ea1[_0x4add96];return _0x3ba81a;}function getExportSize(){const _0x1ac007=_0x1514,_0x5f3aea=getCurrentProject(),_0x20f11e=_0x5f3aea?_0x5f3aea[_0x1ac007(0x113)]*cellSize:0x0,_0x59d275=_0x5f3aea?_0x5f3aea['height']*cellSize:0x0,_0x135e98=document[_0x1ac007(0x12b)](_0x1ac007(0x137)),_0x9ce970=document['getElementById'](_0x1ac007(0xd3));let _0x1ddf64=_0x135e98?parseInt(_0x135e98[_0x1ac007(0x128)],0xa):NaN,_0x1196a7=_0x9ce970?parseInt(_0x9ce970[_0x1ac007(0x128)],0xa):NaN;if(!Number[_0x1ac007(0xf5)](_0x1ddf64)||_0x1ddf64<=0x0)_0x1ddf64=NaN;if(!Number[_0x1ac007(0xf5)](_0x1196a7)||_0x1196a7<=0x0)_0x1196a7=NaN;Number[_0x1ac007(0xf5)](_0x1ddf64)&&!Number[_0x1ac007(0xf5)](_0x1196a7)&&_0x20f11e>0x0&&_0x59d275>0x0&&(_0x1196a7=Math[_0x1ac007(0x124)](_0x1ddf64*_0x59d275/_0x20f11e));Number[_0x1ac007(0xf5)](_0x1196a7)&&!Number['isFinite'](_0x1ddf64)&&_0x20f11e>0x0&&_0x59d275>0x0&&(_0x1ddf64=Math[_0x1ac007(0x124)](_0x1196a7*_0x20f11e/_0x59d275));if(!Number[_0x1ac007(0xf5)](_0x1ddf64))_0x1ddf64=_0x20f11e;if(!Number[_0x1ac007(0xf5)](_0x1196a7))_0x1196a7=_0x59d275;return{'width':_0x1ddf64,'height':_0x1196a7};}function setExportInputsFromProject(){const _0xca0201=_0x1514,_0x11fb5c=document['getElementById'](_0xca0201(0x137)),_0x5c2b43=document[_0xca0201(0x12b)](_0xca0201(0xd3)),_0x5f35d7=getCurrentProject(),_0x5c41b1=_0x5f35d7&&Number[_0xca0201(0xf5)](_0x5f35d7[_0xca0201(0x113)])?_0x5f35d7[_0xca0201(0x113)]*cellSize:typeof canvas!=='undefined'&&canvas?canvas[_0xca0201(0x113)]:0x0,_0xb75eb0=_0x5f35d7&&Number[_0xca0201(0xf5)](_0x5f35d7[_0xca0201(0x114)])?_0x5f35d7['height']*cellSize:typeof canvas!==_0xca0201(0x109)&&canvas?canvas[_0xca0201(0x114)]:0x0;if(_0x11fb5c)_0x11fb5c[_0xca0201(0x128)]=_0x5c41b1;if(_0x5c2b43)_0x5c2b43['value']=_0xb75eb0;}function exportCurrentFrameMergedPng(){const _0x5d1a58=_0x1514,_0x44dd6a=getCurrentProject(),_0x1d448b=getCurrentFrame();if(!_0x44dd6a||!_0x1d448b)return;const {width:_0x257426,height:_0x103dab}=getExportSize(),_0x495cda=document[_0x5d1a58(0x110)](_0x5d1a58(0x10f));_0x495cda['width']=_0x257426,_0x495cda['height']=_0x103dab;const _0x4c4436=_0x495cda[_0x5d1a58(0xe1)]('2d');for(let _0x48caa9=0x0;_0x48caa9<(Array['isArray'](_0x1d448b[_0x5d1a58(0x118)])?_0x1d448b['layers'][_0x5d1a58(0x11f)]:0x0);_0x48caa9++){const _0x36894f=_0x1d448b[_0x5d1a58(0x118)][_0x48caa9];if(!_0x36894f)continue;const _0x522e68=typeof _0x36894f['visible']!==_0x5d1a58(0x109)?_0x36894f[_0x5d1a58(0x12e)]:!![];if(!_0x522e68)continue;const _0x1a6697=_0x36894f['canvas']?_0x36894f['canvas']:_0x36894f;if(_0x1a6697)_0x4c4436[_0x5d1a58(0x10b)](_0x1a6697,0x0,0x0,_0x257426,_0x103dab);}const _0xfc3b63=document['createElement']('a'),_0x2dbecb=(_0x44dd6a[_0x5d1a58(0x131)]||_0x5d1a58(0x10c))[_0x5d1a58(0x12c)](/[\\/:*?"<>|]/g,'_');_0xfc3b63[_0x5d1a58(0x107)]=_0x2dbecb+_0x5d1a58(0xff),_0xfc3b63[_0x5d1a58(0x105)]=_0x495cda[_0x5d1a58(0x119)]('image/png'),_0xfc3b63[_0x5d1a58(0xcc)]();}function exportCurrentFrameLayersPngZip(){const _0x2c80c8=_0x1514,_0x544d8b=getCurrentProject(),_0x2964df=getCurrentFrame();if(!_0x544d8b||!_0x2964df)return;const _0x5d72ba=_0x544d8b['width']*cellSize,_0x15f4e8=_0x544d8b[_0x2c80c8(0x114)]*cellSize,_0x7e15b3=new JSZip();for(let _0x53278e=0x0;_0x53278e<(Array[_0x2c80c8(0xdb)](_0x2964df[_0x2c80c8(0x118)])?_0x2964df[_0x2c80c8(0x118)][_0x2c80c8(0x11f)]:0x0);_0x53278e++){const _0xc4f3a9=_0x2964df['layers'][_0x53278e];if(!_0xc4f3a9)continue;const _0x1c0099=typeof _0xc4f3a9['visible']!==_0x2c80c8(0x109)?_0xc4f3a9['visible']:!![],_0x50f10b=_0xc4f3a9[_0x2c80c8(0x10f)]?_0xc4f3a9['canvas']:_0xc4f3a9;if(!_0x50f10b)continue;const _0x384bc1=document[_0x2c80c8(0x110)]('canvas');_0x384bc1['width']=_0x5d72ba,_0x384bc1[_0x2c80c8(0x114)]=_0x15f4e8;const _0x2a0860=_0x384bc1[_0x2c80c8(0xe1)]('2d');_0x2a0860[_0x2c80c8(0x103)](0x0,0x0,_0x5d72ba,_0x15f4e8),_0x2a0860[_0x2c80c8(0x10b)](_0x50f10b,0x0,0x0);const _0x311214=_0x384bc1['toDataURL'](_0x2c80c8(0x132)),_0x54d640=_0x311214[_0x2c80c8(0xe5)](',')[0x1];_0x7e15b3[_0x2c80c8(0xec)](_0x2c80c8(0x10d)+(_0x53278e+0x1)+(_0x1c0099?'':_0x2c80c8(0xfc))+'.png',_0x54d640,{'base64':!![]});}const _0x1eec8e=(_0x544d8b['name']||_0x2c80c8(0xd7))[_0x2c80c8(0x12c)](/[\\/:*?"<>|]/g,'_');_0x7e15b3[_0x2c80c8(0x112)]({'type':_0x2c80c8(0xcf)})[_0x2c80c8(0x115)](_0x4d29ce=>{const _0x3573cd=_0x2c80c8,_0x2b2fc9=document[_0x3573cd(0x110)]('a');_0x2b2fc9['href']=URL[_0x3573cd(0xf3)](_0x4d29ce),_0x2b2fc9[_0x3573cd(0x107)]=_0x1eec8e+_0x3573cd(0x101),document[_0x3573cd(0xf1)][_0x3573cd(0x134)](_0x2b2fc9),_0x2b2fc9[_0x3573cd(0xcc)](),setTimeout(()=>{const _0x48647e=_0x3573cd;URL[_0x48647e(0x135)](_0x2b2fc9[_0x48647e(0x105)]),document[_0x48647e(0xf1)]['removeChild'](_0x2b2fc9);},0x4b0);});}function exportImage(_0x4ce089){const _0x1e7026=_0x1514;let _0x18005b=getCurrentProject(),_0x2415be=_0x18005b[_0x1e7026(0xf2)],_0x46cf20=_0x4ce089===_0x1e7026(0x11b)||_0x4ce089===_0x1e7026(0x108)?_0x1e7026(0x12a):'image/'+_0x4ce089,_0x3c95ff=_0x2415be[_0x1e7026(0x11f)]>0x1;const {width:_0x58d5de,height:_0x27b667}=getExportSize();let _0x81f25b=(_0x18005b[_0x1e7026(0x131)]||_0x1e7026(0x11a))[_0x1e7026(0x12c)](/[\\/:*?"<>|]/g,'_');if(!_0x3c95ff){let _0x11d8e6=document[_0x1e7026(0x110)](_0x1e7026(0x10f));_0x11d8e6[_0x1e7026(0x113)]=_0x58d5de,_0x11d8e6[_0x1e7026(0x114)]=_0x27b667;let _0x1382f8=_0x11d8e6[_0x1e7026(0xe1)]('2d'),_0x23f936=getCurrentFrame();for(let _0x1ef431=0x0;_0x1ef431<(Array[_0x1e7026(0xdb)](_0x23f936[_0x1e7026(0x118)])?_0x23f936[_0x1e7026(0x118)][_0x1e7026(0x11f)]:0x0);_0x1ef431++){const _0xb775ac=_0x23f936[_0x1e7026(0x118)][_0x1ef431];if(!_0xb775ac)continue;const _0x1cbc38=typeof _0xb775ac[_0x1e7026(0x12e)]!==_0x1e7026(0x109)?_0xb775ac[_0x1e7026(0x12e)]:!![];if(!_0x1cbc38)continue;const _0x3dd232=_0xb775ac['canvas']?_0xb775ac[_0x1e7026(0x10f)]:_0xb775ac;if(_0x3dd232)_0x1382f8[_0x1e7026(0x10b)](_0x3dd232,0x0,0x0,_0x58d5de,_0x27b667);}let _0x5822f4=document[_0x1e7026(0x110)]('a');_0x5822f4[_0x1e7026(0x107)]=_0x81f25b+'.'+_0x4ce089;if(_0x4ce089===_0x1e7026(0x11b)||_0x4ce089===_0x1e7026(0x108)){let _0x486442=getExportQuality(),_0x3b04b5=Math['max'](0.1,Math[_0x1e7026(0x12d)](0x1,_0x486442/0xa));_0x5822f4[_0x1e7026(0x105)]=_0x11d8e6[_0x1e7026(0x119)](_0x46cf20,_0x3b04b5);}else _0x4ce089===_0x1e7026(0xdd)?_0x5822f4[_0x1e7026(0x105)]=_0x11d8e6[_0x1e7026(0x119)](_0x46cf20):_0x5822f4['href']=_0x11d8e6['toDataURL'](_0x46cf20);_0x5822f4[_0x1e7026(0xcc)]();}else{if(_0x4ce089===_0x1e7026(0xd0)&&typeof window[_0x1e7026(0xcd)]!==_0x1e7026(0x109)){const {width:_0x4cb1eb,height:_0xbe3c37}=getExportSize();exportWebpAnimation(_0x2415be,_0x4cb1eb,_0xbe3c37,_0x81f25b);}else for(let _0x3f180e=0x0;_0x3f180e<_0x2415be[_0x1e7026(0x11f)];_0x3f180e++){let _0x242a9d=document['createElement'](_0x1e7026(0x10f));_0x242a9d[_0x1e7026(0x113)]=_0x58d5de,_0x242a9d[_0x1e7026(0x114)]=_0x27b667;let _0x1cbacd=_0x242a9d[_0x1e7026(0xe1)]('2d'),_0x2a167e=_0x2415be[_0x3f180e];for(let _0x287235=0x0;_0x287235<(Array[_0x1e7026(0xdb)](_0x2a167e[_0x1e7026(0x118)])?_0x2a167e[_0x1e7026(0x118)][_0x1e7026(0x11f)]:0x0);_0x287235++){const _0x75123=_0x2a167e['layers'][_0x287235];if(!_0x75123)continue;const _0x3b16bb=typeof _0x75123[_0x1e7026(0x12e)]!==_0x1e7026(0x109)?_0x75123[_0x1e7026(0x12e)]:!![];if(!_0x3b16bb)continue;const _0x331830=_0x75123['canvas']?_0x75123['canvas']:_0x75123;if(_0x331830)_0x1cbacd[_0x1e7026(0x10b)](_0x331830,0x0,0x0,_0x58d5de,_0x27b667);}let _0x51fb0a=document[_0x1e7026(0x110)]('a');_0x51fb0a[_0x1e7026(0x107)]=_0x81f25b+'-f'+(_0x3f180e+0x1)+'.'+_0x4ce089;if(_0x4ce089==='jpg'||_0x4ce089===_0x1e7026(0x108)){let _0x14329f=getExportQuality(),_0x243b82=Math[_0x1e7026(0x139)](0.1,Math[_0x1e7026(0x12d)](0x1,_0x14329f/0xa));_0x51fb0a[_0x1e7026(0x105)]=_0x242a9d[_0x1e7026(0x119)](_0x46cf20,_0x243b82);}else _0x4ce089==='png'?_0x51fb0a[_0x1e7026(0x105)]=_0x242a9d[_0x1e7026(0x119)](_0x46cf20):_0x51fb0a['href']=_0x242a9d[_0x1e7026(0x119)](_0x46cf20);setTimeout(()=>_0x51fb0a[_0x1e7026(0xcc)](),_0x3f180e*0x64);}}}async function exportWebpAnimation(_0x18b5a3,_0x371c5e,_0x1a7c01,_0x1ddb96=_0x436c78(0xf6)){const _0x1bade9=_0x436c78;if(!window['WebCodecs']||!window['VideoEncoder']){alert('このブラウザはWebCodecsによるWEBPアニメーションに対応していません。');return;}const _0x31b546=[],_0x128d1b=new VideoEncoder({'output':_0x49936b=>_0x31b546[_0x1bade9(0x120)](_0x49936b),'error':_0x584eb8=>console[_0x1bade9(0xf7)](_0x584eb8)});_0x128d1b['configure']({'codec':'vp8','width':_0x371c5e,'height':_0x1a7c01,'framerate':0x5});for(let _0x2aa8b7=0x0;_0x2aa8b7<_0x18b5a3['length'];_0x2aa8b7++){let _0x24631a=document['createElement']('canvas');_0x24631a[_0x1bade9(0x113)]=_0x371c5e,_0x24631a[_0x1bade9(0x114)]=_0x1a7c01;let _0x3fac63=_0x24631a[_0x1bade9(0xe1)]('2d'),_0x3a2ef6=_0x18b5a3[_0x2aa8b7];for(let _0x341726=0x0;_0x341726<(Array['isArray'](_0x3a2ef6['layers'])?_0x3a2ef6[_0x1bade9(0x118)][_0x1bade9(0x11f)]:0x0);_0x341726++){const _0xa125e7=_0x3a2ef6[_0x1bade9(0x118)][_0x341726];if(!_0xa125e7)continue;const _0x5509ec=typeof _0xa125e7[_0x1bade9(0x12e)]!==_0x1bade9(0x109)?_0xa125e7['visible']:!![];if(!_0x5509ec)continue;const _0x226d73=_0xa125e7[_0x1bade9(0x10f)]?_0xa125e7['canvas']:_0xa125e7;if(_0x226d73)_0x3fac63[_0x1bade9(0x10b)](_0x226d73,0x0,0x0);}let _0x52d244=await createImageBitmap(_0x24631a);_0x128d1b['encode'](_0x52d244,{'keyFrame':!![],'duration':0xc8}),_0x52d244[_0x1bade9(0x10a)]();}await _0x128d1b[_0x1bade9(0x11e)](),_0x128d1b['close']();const _0x4ca773=new Blob(_0x31b546[_0x1bade9(0xf0)](_0x58eeca=>_0x58eeca[_0x1bade9(0xf8)]?_0x58eeca:_0x58eeca[_0x1bade9(0xe4)]),{'type':'video/webm'}),_0x25e29c=document['createElement']('a');_0x25e29c[_0x1bade9(0x107)]=_0x1ddb96+_0x1bade9(0xda),_0x25e29c[_0x1bade9(0x105)]=URL[_0x1bade9(0xf3)](_0x4ca773),_0x25e29c['click']();}function exportGif(){const _0x6defc=_0x436c78;try{showLoading(_0x6defc(0xea));}catch(_0x12d8f5){}let _0x88e6b=getCurrentProject(),_0x51eece=_0x88e6b[_0x6defc(0xf2)];const {width:_0x3771bc,height:_0x4fa370}=getExportSize(),_0x55a6d9=_0x51eece[_0x6defc(0xf0)](_0x2432a8=>{const _0x4bd562=_0x6defc;let _0x37b44a=document[_0x4bd562(0x110)](_0x4bd562(0x10f));_0x37b44a[_0x4bd562(0x113)]=_0x3771bc,_0x37b44a[_0x4bd562(0x114)]=_0x4fa370;let _0x4c1c70=_0x37b44a[_0x4bd562(0xe1)]('2d');for(let _0x4c11c7=0x0;_0x4c11c7<(Array[_0x4bd562(0xdb)](_0x2432a8[_0x4bd562(0x118)])?_0x2432a8[_0x4bd562(0x118)][_0x4bd562(0x11f)]:0x0);_0x4c11c7++){const _0x540d6e=_0x2432a8[_0x4bd562(0x118)][_0x4c11c7];if(!_0x540d6e)continue;const _0x31a22c=typeof _0x540d6e[_0x4bd562(0x12e)]!==_0x4bd562(0x109)?_0x540d6e[_0x4bd562(0x12e)]:!![];if(!_0x31a22c)continue;const _0x12fb0e=_0x540d6e[_0x4bd562(0x10f)]?_0x540d6e[_0x4bd562(0x10f)]:_0x540d6e;if(_0x12fb0e)_0x4c1c70[_0x4bd562(0x10b)](_0x12fb0e,0x0,0x0);}return _0x37b44a[_0x4bd562(0x119)](_0x4bd562(0x132));});Promise[_0x6defc(0x129)](_0x55a6d9[_0x6defc(0xf0)](_0x592f78=>{return new Promise(_0x4930c6=>{const _0x1ec984=_0x1514,_0x45472e=new Image();_0x45472e[_0x1ec984(0xed)]=_0x592f78,_0x45472e[_0x1ec984(0xd8)]=()=>_0x4930c6(_0x45472e);});}))[_0x6defc(0x115)](_0x6cd70e=>{const _0x20058b=_0x6defc,_0x57089a=_0x6cd70e['filter'](_0x43dffd=>_0x43dffd[_0x20058b(0x113)]>0x0&&_0x43dffd['height']>0x0);if(_0x57089a['length']===0x0){try{hideLoading();}catch(_0x81e8a9){}alert(_0x20058b(0xfb));return;}const _0x43307d=(_0x88e6b[_0x20058b(0x131)]||_0x20058b(0xf6))[_0x20058b(0x12c)](/[\\/:*?"<>|]/g,'_');let _0x1ec66d=getExportQuality(),_0x1f23cd=0x1f-_0x1ec66d*0x3;const _0x13703d={'type':_0x20058b(0xfd),'version':0x1,'project':{'width':_0x88e6b[_0x20058b(0x113)],'height':_0x88e6b[_0x20058b(0x114)],'name':_0x88e6b[_0x20058b(0x131)]||'','animationDelay':animationDelay,'frames':_0x88e6b[_0x20058b(0xf2)][_0x20058b(0xf0)](_0x22464b=>({'layers':_0x22464b[_0x20058b(0x118)][_0x20058b(0xf0)](_0x56a9b5=>_0x56a9b5&&_0x56a9b5[_0x20058b(0x131)]?_0x56a9b5[_0x20058b(0x131)]:'')}))}};convertToGIF(_0x57089a,animationDelay,_0x43307d+_0x20058b(0x121),_0x1f23cd,_0x13703d);})[_0x6defc(0x104)](_0x245460=>{try{hideLoading();}catch(_0xf4b367){};console['error'](_0x245460);});}function exportApng(){const _0x4febba=_0x436c78;try{showLoading(_0x4febba(0xd9));}catch(_0x253f5e){}let _0x428b4b=getCurrentProject(),_0x30e73a=_0x428b4b[_0x4febba(0xf2)];const {width:_0x46cfd8,height:_0x34f719}=getExportSize(),_0x1471e9=_0x30e73a[_0x4febba(0xf0)](_0xbe0248=>{const _0x147ce3=_0x4febba;let _0x2ae373=document[_0x147ce3(0x110)](_0x147ce3(0x10f));_0x2ae373[_0x147ce3(0x113)]=_0x46cfd8,_0x2ae373[_0x147ce3(0x114)]=_0x34f719;let _0xb3262c=_0x2ae373[_0x147ce3(0xe1)]('2d');for(let _0x423d23=0x0;_0x423d23<(Array[_0x147ce3(0xdb)](_0xbe0248[_0x147ce3(0x118)])?_0xbe0248[_0x147ce3(0x118)][_0x147ce3(0x11f)]:0x0);_0x423d23++){const _0x1f9354=_0xbe0248[_0x147ce3(0x118)][_0x423d23];if(!_0x1f9354)continue;const _0x1b3e2f=typeof _0x1f9354[_0x147ce3(0x12e)]!==_0x147ce3(0x109)?_0x1f9354[_0x147ce3(0x12e)]:!![];if(!_0x1b3e2f)continue;const _0x4eb112=_0x1f9354['canvas']?_0x1f9354[_0x147ce3(0x10f)]:_0x1f9354;if(_0x4eb112)_0xb3262c[_0x147ce3(0x10b)](_0x4eb112,0x0,0x0);}const _0x53d3e6=_0xb3262c[_0x147ce3(0x10e)](0x0,0x0,_0x46cfd8,_0x34f719)['data'][_0x147ce3(0x12f)];return _0x53d3e6;}),_0x1ab9bc=(_0x428b4b[_0x4febba(0x131)]||'nezumi-animation')[_0x4febba(0x12c)](/[\\/:*?"<>|]/g,'_'),_0x336bbb=document[_0x4febba(0x12b)](_0x4febba(0x123)),_0x460e94=_0x336bbb?_0x336bbb[_0x4febba(0x128)]:'apng';let _0x19fada=getExportQuality(),_0x178a44=Math[_0x4febba(0x139)](0x0,Math[_0x4febba(0x12d)](0xa,0xb-_0x19fada));const _0x178870={'type':_0x4febba(0xfd),'version':0x1,'project':{'width':_0x428b4b[_0x4febba(0x113)],'height':_0x428b4b[_0x4febba(0x114)],'name':_0x428b4b[_0x4febba(0x131)]||'','animationDelay':animationDelay,'frames':_0x428b4b['frames'][_0x4febba(0xf0)](_0x3e67dc=>({'layers':_0x3e67dc[_0x4febba(0x118)]['map'](_0x37426d=>_0x37426d&&_0x37426d['name']?_0x37426d['name']:'')}))}};convertToAPNG(_0x1471e9,_0x46cfd8,_0x34f719,animationDelay,_0x1ab9bc+'.'+_0x460e94,_0x178a44,_0x178870);}async function convertToGIF(_0x5edfe8,_0x232d2e=0xc8,_0x213de3='nezumi-animation.gif',_0x35e482=0xa,_0x2b6559=null){const _0x40e80d=_0x436c78,_0x37eea3=new window[(_0x40e80d(0xef))]({'workers':0x2,'quality':_0x35e482,'workerScript':_0x40e80d(0x11c)});_0x5edfe8[_0x40e80d(0x125)](_0x249989=>_0x37eea3[_0x40e80d(0x133)](_0x249989,{'delay':_0x232d2e})),_0x37eea3['on'](_0x40e80d(0xe0),_0x25c32f=>{const _0x180718=_0x40e80d,_0x138333=_0x2b6559&&typeof appendMetadataToBlob===_0x180718(0xe8)?appendMetadataToBlob(_0x25c32f,_0x2b6559):_0x25c32f,_0x324add=URL[_0x180718(0xf3)](_0x138333),_0x5467db=document[_0x180718(0x110)]('a');_0x5467db['href']=_0x324add,_0x5467db[_0x180718(0x107)]=_0x213de3,document[_0x180718(0xf1)]['appendChild'](_0x5467db),_0x5467db['click'](),setTimeout(()=>{const _0x4797fb=_0x180718;document['body'][_0x4797fb(0xe3)](_0x5467db),URL[_0x4797fb(0x135)](_0x324add);try{hideLoading();}catch(_0x4e9b70){}},0x3e8);}),_0x37eea3[_0x40e80d(0xeb)]();}function makeAPNGBlob(_0x3aec1c,_0x4b6960,_0x1ba4e8,_0xfd1bf4=0xc8,_0x301277=0x0){const _0x3707de=_0x436c78,_0x5e8154=[],_0x22c4cf=[],_0x92ca9f=document[_0x3707de(0x110)]('canvas');_0x92ca9f[_0x3707de(0x113)]=_0x4b6960,_0x92ca9f['height']=_0x1ba4e8;const _0x375dd0=_0x92ca9f['getContext']('2d');_0x3aec1c['forEach'](_0x193135=>{const _0x4ff547=_0x3707de;if(_0x193135 instanceof ArrayBuffer){_0x5e8154[_0x4ff547(0x120)](_0x193135),_0x22c4cf['push'](_0xfd1bf4);return;}_0x375dd0[_0x4ff547(0x103)](0x0,0x0,_0x4b6960,_0x1ba4e8);try{_0x375dd0[_0x4ff547(0x10b)](_0x193135,0x0,0x0,_0x4b6960,_0x1ba4e8);}catch(_0x3a1d13){return;}const _0x1bc191=_0x375dd0[_0x4ff547(0x10e)](0x0,0x0,_0x4b6960,_0x1ba4e8)['data'][_0x4ff547(0x12f)];_0x5e8154[_0x4ff547(0x120)](_0x1bc191),_0x22c4cf['push'](_0xfd1bf4);});if(!_0x5e8154['length'])return null;const _0x499f6e=window[_0x3707de(0xfe)][_0x3707de(0x111)](_0x5e8154,_0x4b6960,_0x1ba4e8,_0x301277,_0x22c4cf);return new Blob([_0x499f6e],{'type':_0x3707de(0x13a)});}function convertToAPNG(_0x483b3b,_0x44c59,_0x47e815,_0x4845c4=0xc8,_0x3cfa4e='nezumi-animation.apng',_0x5094f9=0x0,_0x3e68bd=null){const _0x5ca669=_0x436c78,_0x37b205=makeAPNGBlob(_0x483b3b,_0x44c59,_0x47e815,_0x4845c4,_0x5094f9);if(!_0x37b205){try{hideLoading();}catch(_0x294e4a){}alert('APNGを生成できませんでした。フレームが空かもしれません。');return;}const _0xfd260d=_0x3e68bd&&typeof appendMetadataToBlob===_0x5ca669(0xe8)?appendMetadataToBlob(_0x37b205,_0x3e68bd):_0x37b205,_0x3bce0b=URL[_0x5ca669(0xf3)](_0xfd260d),_0x413aed=document['createElement']('a');_0x413aed[_0x5ca669(0x105)]=_0x3bce0b,_0x413aed[_0x5ca669(0x107)]=_0x3cfa4e,document[_0x5ca669(0xf1)][_0x5ca669(0x134)](_0x413aed),_0x413aed['click'](),setTimeout(()=>{const _0x1e3f90=_0x5ca669;document['body']['removeChild'](_0x413aed),URL[_0x1e3f90(0x135)](_0x3bce0b);try{hideLoading();}catch(_0x53d2fc){}},0x3e8);}function exportSpriteSheetDialog(){const _0x4b0496=_0x436c78;let _0x25afda=prompt(_0x4b0496(0xd1),'1');if(_0x25afda===null)return;let _0x5a55ce=Math[_0x4b0496(0x139)](0x1,parseInt(_0x25afda,0xa)||0x1),_0x366fcb=prompt(_0x4b0496(0xe7),'0');if(_0x366fcb===null)return;let _0x10163f=Math['max'](0x0,parseInt(_0x366fcb,0xa)||0x0);exportSpriteSheet(_0x5a55ce,_0x10163f);}function exportSpriteSheet(_0x6e67d6=0x1,_0x3256ee=0x0){const _0x4cf456=_0x436c78,_0x2f1918=getCurrentProject();if(!_0x2f1918){alert(_0x4cf456(0xf9));return;}const _0x5a8e4f=_0x2f1918['frames'];if(!_0x5a8e4f||_0x5a8e4f[_0x4cf456(0x11f)]===0x0){alert(_0x4cf456(0xd2));return;}const _0x83c43c=_0x2f1918[_0x4cf456(0x113)]*cellSize,_0x1f00c2=_0x2f1918[_0x4cf456(0x114)]*cellSize,_0x4c1739=_0x83c43c*_0x5a8e4f[_0x4cf456(0x11f)]*_0x6e67d6+Math[_0x4cf456(0x139)](0x0,_0x5a8e4f[_0x4cf456(0x11f)]-0x1)*_0x3256ee,_0x421199=_0x1f00c2*_0x6e67d6,_0x28c789=document['createElement'](_0x4cf456(0x10f));_0x28c789[_0x4cf456(0x113)]=_0x4c1739,_0x28c789[_0x4cf456(0x114)]=_0x421199;const _0x774ddd=_0x28c789[_0x4cf456(0xe1)]('2d');_0x774ddd[_0x4cf456(0x103)](0x0,0x0,_0x28c789[_0x4cf456(0x113)],_0x28c789[_0x4cf456(0x114)]);let _0x2e85e6=0x0;for(let _0x4e3740=0x0;_0x4e3740<_0x5a8e4f[_0x4cf456(0x11f)];_0x4e3740++){let _0x23e624=document[_0x4cf456(0x110)](_0x4cf456(0x10f));_0x23e624['width']=_0x83c43c,_0x23e624[_0x4cf456(0x114)]=_0x1f00c2;let _0x551f31=_0x23e624[_0x4cf456(0xe1)]('2d');for(let _0x1b247e=0x0;_0x1b247e<(Array[_0x4cf456(0xdb)](_0x5a8e4f[_0x4e3740][_0x4cf456(0x118)])?_0x5a8e4f[_0x4e3740][_0x4cf456(0x118)][_0x4cf456(0x11f)]:0x0);_0x1b247e++){const _0x16135e=_0x5a8e4f[_0x4e3740][_0x4cf456(0x118)][_0x1b247e];if(!_0x16135e)continue;const _0x36d3ed=typeof _0x16135e['visible']!==_0x4cf456(0x109)?_0x16135e[_0x4cf456(0x12e)]:!![];if(!_0x36d3ed)continue;const _0x876b41=_0x16135e[_0x4cf456(0x10f)]?_0x16135e[_0x4cf456(0x10f)]:_0x16135e;if(_0x876b41)_0x551f31[_0x4cf456(0x10b)](_0x876b41,0x0,0x0);}_0x6e67d6===0x1&&_0x3256ee===0x0?(_0x774ddd[_0x4cf456(0x10b)](_0x23e624,_0x2e85e6,0x0),_0x2e85e6+=_0x83c43c):(_0x774ddd[_0x4cf456(0x10b)](_0x23e624,0x0,0x0,_0x83c43c,_0x1f00c2,_0x2e85e6,0x0,_0x83c43c*_0x6e67d6,_0x1f00c2*_0x6e67d6),_0x2e85e6+=_0x83c43c*_0x6e67d6),_0x4e3740<_0x5a8e4f[_0x4cf456(0x11f)]-0x1&&_0x3256ee>0x0&&(_0x2e85e6+=_0x3256ee);}const _0x4bd3e5=(_0x2f1918['name']||_0x4cf456(0xd6))[_0x4cf456(0x12c)](/[\\/:*?"<>|]/g,'_'),_0x105c59=document[_0x4cf456(0x110)]('a');_0x105c59[_0x4cf456(0x105)]=_0x28c789[_0x4cf456(0x119)](_0x4cf456(0x132)),_0x105c59[_0x4cf456(0x107)]=_0x4bd3e5+_0x4cf456(0x102),document[_0x4cf456(0xf1)][_0x4cf456(0x134)](_0x105c59),_0x105c59[_0x4cf456(0xcc)](),setTimeout(()=>{const _0x44f9b5=_0x4cf456;document['body'][_0x44f9b5(0xe3)](_0x105c59);},0x3e8);}async function exportStandalone(){const _0x2fbf2c=_0x436c78;try{showLoading('書き出し中...');}catch(_0x1f522e){}let _0x405fbb=getCurrentProject(),_0x52ab50=_0x405fbb[_0x2fbf2c(0xf2)];const _0x535e93=_0x405fbb[_0x2fbf2c(0x113)]*cellSize,_0x3c4e7f=_0x405fbb[_0x2fbf2c(0x114)]*cellSize,_0x4b4913=_0x52ab50[_0x2fbf2c(0xf0)](_0x5a9f19=>{const _0x1c0a0e=_0x2fbf2c;let _0x31ed5=document['createElement'](_0x1c0a0e(0x10f));_0x31ed5[_0x1c0a0e(0x113)]=_0x535e93,_0x31ed5[_0x1c0a0e(0x114)]=_0x3c4e7f;let _0x116c2a=_0x31ed5[_0x1c0a0e(0xe1)]('2d');for(let _0x57165d=0x0;_0x57165d<_0x5a9f19[_0x1c0a0e(0x118)][_0x1c0a0e(0x11f)];_0x57165d++){const _0x446626=_0x5a9f19['layers'][_0x57165d]&&_0x5a9f19[_0x1c0a0e(0x118)][_0x57165d]['canvas']?_0x5a9f19[_0x1c0a0e(0x118)][_0x57165d][_0x1c0a0e(0x10f)]:_0x5a9f19[_0x1c0a0e(0x118)][_0x57165d];if(_0x446626)_0x116c2a['drawImage'](_0x446626,0x0,0x0);}return _0x116c2a[_0x1c0a0e(0x10e)](0x0,0x0,_0x535e93,_0x3c4e7f)[_0x1c0a0e(0xe4)]['buffer'];}),_0x2ed074=(_0x405fbb[_0x2fbf2c(0x131)]||'nezumi-animation')[_0x2fbf2c(0x12c)](/[\\/:*?"<>|]/g,'_'),_0x390859=makeAPNGBlob(_0x4b4913,_0x535e93,_0x3c4e7f,animationDelay),_0x54ba83={'type':_0x2fbf2c(0x126),'version':0x1,'project':{'width':_0x405fbb[_0x2fbf2c(0x113)],'height':_0x405fbb[_0x2fbf2c(0x114)],'name':_0x405fbb['name']||'','activeFrame':_0x405fbb[_0x2fbf2c(0xe6)],'animationDelay':animationDelay,'frames':_0x405fbb[_0x2fbf2c(0xf2)][_0x2fbf2c(0xf0)](_0x4815d9=>({'activeLayer':_0x4815d9[_0x2fbf2c(0xee)],'layers':_0x4815d9['layers'][_0x2fbf2c(0xf0)](_0x234042=>({'data':_0x234042&&_0x234042[_0x2fbf2c(0x10f)]?_0x234042[_0x2fbf2c(0x10f)][_0x2fbf2c(0x119)]():_0x234042&&_0x234042[_0x2fbf2c(0x119)]?_0x234042[_0x2fbf2c(0x119)]():null,'name':_0x234042&&_0x234042['name']?_0x234042[_0x2fbf2c(0x131)]:''}))}))}},_0x7e526a=appendMetadataToBlob(_0x390859,_0x54ba83),_0x530627=URL['createObjectURL'](_0x7e526a),_0x562648=document[_0x2fbf2c(0x110)]('a');_0x562648[_0x2fbf2c(0x105)]=_0x530627,_0x562648[_0x2fbf2c(0x107)]=_0x2ed074+_0x2fbf2c(0x100),document[_0x2fbf2c(0xf1)][_0x2fbf2c(0x134)](_0x562648);try{hideLoading();}catch(_0x1c7b09){}_0x562648['click'](),setTimeout(()=>{const _0x429351=_0x2fbf2c;document[_0x429351(0xf1)][_0x429351(0xe3)](_0x562648),URL['revokeObjectURL'](_0x530627);},0x3e8);}