const a0_0x42db8f=a0_0x299f;(function(_0x35b864,_0x1600ca){const _0x47da59=a0_0x299f,_0x18d349=_0x35b864();while(!![]){try{const _0xe6ce47=parseInt(_0x47da59(0x198))/0x1+-parseInt(_0x47da59(0x21e))/0x2+parseInt(_0x47da59(0x25e))/0x3+parseInt(_0x47da59(0x161))/0x4*(-parseInt(_0x47da59(0x1c0))/0x5)+-parseInt(_0x47da59(0x143))/0x6+-parseInt(_0x47da59(0x1d5))/0x7+parseInt(_0x47da59(0x1c7))/0x8;if(_0xe6ce47===_0x1600ca)break;else _0x18d349['push'](_0x18d349['shift']());}catch(_0x233b0e){_0x18d349['push'](_0x18d349['shift']());}}}(a0_0xea5e,0x96cc2));const a0_0x2d7653=(function(){let _0xdfbcb9=!![];return function(_0x24415d,_0x390b79){const _0x10a137=_0xdfbcb9?function(){const _0x1cccd8=a0_0x299f;if(_0x390b79){const _0x2b82e3=_0x390b79[_0x1cccd8(0x1f3)](_0x24415d,arguments);return _0x390b79=null,_0x2b82e3;}}:function(){};return _0xdfbcb9=![],_0x10a137;};}()),a0_0x41fbe5=a0_0x2d7653(this,function(){const _0x3529de=a0_0x299f;return a0_0x41fbe5[_0x3529de(0x19b)]()['search'](_0x3529de(0x14f))[_0x3529de(0x19b)]()[_0x3529de(0x1a1)](a0_0x41fbe5)[_0x3529de(0x1d0)]('(((.+)+)+)+$');});a0_0x41fbe5();let canvas=document['getElementById'](a0_0x42db8f(0x1a2)),ctx=canvas[a0_0x42db8f(0x1e5)]('2d'),cellSize=0x14,currentColor=a0_0x42db8f(0x1bd),currentTool=a0_0x42db8f(0x1f7),penSize=0x1,penMode='square',layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x232009=0x10,_0x52ba52=0x10,_0x8afec4=''){const _0x22af65=a0_0x42db8f;let _0x53e206=0x14,_0x4840ca=[],_0x2ce2ec=[],_0x194a54=[],_0x4e96bd=document['createElement'](_0x22af65(0x1a2));_0x4e96bd[_0x22af65(0x249)]=_0x232009*_0x53e206,_0x4e96bd[_0x22af65(0x245)]=_0x52ba52*_0x53e206,_0x4840ca[_0x22af65(0x18e)](_0x4e96bd),_0x2ce2ec[_0x22af65(0x18e)]([]),_0x194a54['push']([]);let _0x2ab51c={'layers':_0x4840ca,'activeLayer':0x0,'layerHistories':_0x2ce2ec,'layerRedoStacks':_0x194a54};return{'frames':[_0x2ab51c],'activeFrame':0x0,'width':_0x232009,'height':_0x52ba52,'name':_0x8afec4||'画像'+(projects['length']+0x1)};}function updateProjectUI(){const _0xf31cd7=a0_0x42db8f,_0x1ed1dd=document[_0xf31cd7(0x194)](_0xf31cd7(0x160));_0x1ed1dd[_0xf31cd7(0x171)]='';for(let _0x32ccef=0x0;_0x32ccef<projects['length'];_0x32ccef++){const _0x1c81be=document['createElement'](_0xf31cd7(0x17d));_0x1c81be[_0xf31cd7(0x17b)]=_0xf31cd7(0x1da)+(_0x32ccef===activeProject?'\x20active':''),_0x1c81be['onclick']=()=>{activeProject=_0x32ccef,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x311016=document['createElement'](_0xf31cd7(0x21f));_0x311016['className']=_0xf31cd7(0x13a),_0x311016['textContent']=projects[_0x32ccef][_0xf31cd7(0x240)]||'画像'+(_0x32ccef+0x1),_0x311016[_0xf31cd7(0x192)]=_0xf31cd7(0x16e),_0x311016[_0xf31cd7(0x16a)]=_0x12c776=>{const _0x1f5da4=_0xf31cd7;_0x12c776[_0x1f5da4(0x201)](),editProjectName(_0x32ccef,_0x311016);},_0x1c81be[_0xf31cd7(0x1ca)](_0x311016);const _0x399951=document[_0xf31cd7(0x1fa)](_0xf31cd7(0x1fd));_0x399951[_0xf31cd7(0x22e)]='削除',_0x399951[_0xf31cd7(0x17b)]='project-btn',_0x399951[_0xf31cd7(0x1df)]=projects[_0xf31cd7(0x1aa)]===0x1,_0x399951[_0xf31cd7(0x16a)]=_0x40a29a=>{const _0x2db99f=_0xf31cd7;_0x40a29a[_0x2db99f(0x201)](),removeProjectAt(_0x32ccef);},_0x1c81be['appendChild'](_0x399951),_0x1ed1dd[_0xf31cd7(0x1ca)](_0x1c81be);}document[_0xf31cd7(0x194)]('projectCount')[_0xf31cd7(0x22e)]='('+projects[_0xf31cd7(0x1aa)]+'枚)';}function editProjectName(_0x347e7,_0x57d15e){const _0x4407ca=a0_0x42db8f,_0x3ebfe8=document[_0x4407ca(0x1fa)](_0x4407ca(0x153));_0x3ebfe8[_0x4407ca(0x16c)]=_0x4407ca(0x22b),_0x3ebfe8['value']=projects[_0x347e7][_0x4407ca(0x240)]||'画像'+(_0x347e7+0x1),_0x3ebfe8[_0x4407ca(0x17b)]='project-name-edit',_0x3ebfe8['style'][_0x4407ca(0x249)]=_0x4407ca(0x1b7),_0x3ebfe8[_0x4407ca(0x1ad)]=()=>{const _0x5d3368=_0x4407ca;projects[_0x347e7][_0x5d3368(0x240)]=_0x3ebfe8[_0x5d3368(0x21a)][_0x5d3368(0x19d)]()||'画像'+(_0x347e7+0x1),updateProjectUI();},_0x3ebfe8[_0x4407ca(0x214)]=_0x189331=>{const _0x1ec0ec=_0x4407ca;if(_0x189331[_0x1ec0ec(0x1b0)]===_0x1ec0ec(0x21d))_0x3ebfe8[_0x1ec0ec(0x1b8)]();},_0x57d15e[_0x4407ca(0x1db)](_0x3ebfe8),_0x3ebfe8[_0x4407ca(0x200)](),_0x3ebfe8[_0x4407ca(0x1fb)]();}function showNewProjectDialog(_0x33efe3){const _0x575247=a0_0x42db8f;let _0x537c8e=document[_0x575247(0x194)](_0x575247(0x1a5));if(_0x537c8e)_0x537c8e[_0x575247(0x1de)]();const _0x16e58e=document[_0x575247(0x1fa)](_0x575247(0x17d));_0x16e58e['id']=_0x575247(0x1a5),_0x16e58e[_0x575247(0x25f)]['position']=_0x575247(0x1b4),_0x16e58e[_0x575247(0x25f)]['left']='0',_0x16e58e[_0x575247(0x25f)][_0x575247(0x21b)]='0',_0x16e58e[_0x575247(0x25f)]['width']=_0x575247(0x212),_0x16e58e[_0x575247(0x25f)][_0x575247(0x245)]=_0x575247(0x1f2),_0x16e58e['style'][_0x575247(0x187)]=_0x575247(0x159),_0x16e58e[_0x575247(0x25f)][_0x575247(0x15d)]='flex',_0x16e58e[_0x575247(0x25f)]['alignItems']='center',_0x16e58e[_0x575247(0x25f)][_0x575247(0x237)]='center',_0x16e58e[_0x575247(0x25f)]['zIndex']='3000',_0x16e58e['innerHTML']=_0x575247(0x16d)+(projects['length']+0x1)+_0x575247(0x162),document[_0x575247(0x163)]['appendChild'](_0x16e58e),_0x16e58e[_0x575247(0x250)]('#newProjOkBtn')[_0x575247(0x16a)]=()=>{const _0xe4504b=_0x575247,_0x2aa72e=parseInt(_0x16e58e[_0xe4504b(0x250)]('#newProjW')[_0xe4504b(0x21a)],0xa),_0x45cf3b=parseInt(_0x16e58e[_0xe4504b(0x250)](_0xe4504b(0x1f8))['value'],0xa),_0x54b2e2=_0x16e58e['querySelector'](_0xe4504b(0x224))[_0xe4504b(0x21a)][_0xe4504b(0x19d)]();_0x16e58e['remove']();if(_0x33efe3)_0x33efe3(_0x2aa72e,_0x45cf3b,_0x54b2e2);},_0x16e58e[_0x575247(0x250)](_0x575247(0x148))[_0x575247(0x16a)]=()=>{const _0xb341bf=_0x575247;_0x16e58e[_0xb341bf(0x1de)]();};}function addProject(){showNewProjectDialog((_0x497314,_0x5963d3,_0x45da33)=>{const _0x1c68e6=a0_0x299f;if(!Number[_0x1c68e6(0x13f)](_0x497314)||_0x497314<0x1)_0x497314=0x10;if(!Number[_0x1c68e6(0x13f)](_0x5963d3)||_0x5963d3<0x1)_0x5963d3=0x10;projects[_0x1c68e6(0x18e)](createProject(_0x497314,_0x5963d3,_0x45da33)),activeProject=projects[_0x1c68e6(0x1aa)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x45f76d){const _0x8bec6d=a0_0x42db8f;if(projects['length']<=0x1)return;projects[_0x8bec6d(0x1e9)](_0x45f76d,0x1);if(activeProject>=projects[_0x8bec6d(0x1aa)])activeProject=projects[_0x8bec6d(0x1aa)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x219102=a0_0x42db8f,_0x1d6416=document['getElementById']('frameList'),_0x2afa4e=getCurrentProject();_0x1d6416['innerHTML']='';for(let _0x4ee894=0x0;_0x4ee894<_0x2afa4e[_0x219102(0x210)][_0x219102(0x1aa)];_0x4ee894++){const _0x1dd31f=document[_0x219102(0x1fa)](_0x219102(0x17d));_0x1dd31f[_0x219102(0x17b)]=_0x219102(0x17c)+(_0x4ee894===_0x2afa4e[_0x219102(0x20e)]?_0x219102(0x14b):''),_0x1dd31f[_0x219102(0x16a)]=()=>{const _0x356f0e=_0x219102;_0x2afa4e[_0x356f0e(0x20e)]=_0x4ee894,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x446b99=document[_0x219102(0x1fa)](_0x219102(0x1a2));_0x446b99['className']=_0x219102(0x1ce),_0x446b99['width']=0x20,_0x446b99[_0x219102(0x245)]=0x20;let _0x2d3eb9=_0x446b99[_0x219102(0x1e5)]('2d');_0x2d3eb9[_0x219102(0x24e)](0x0,0x0,0x20,0x20);for(let _0x3aac5c=0x0;_0x3aac5c<_0x2afa4e[_0x219102(0x210)][_0x4ee894][_0x219102(0x185)][_0x219102(0x1aa)];_0x3aac5c++){_0x2d3eb9[_0x219102(0x138)](_0x2afa4e[_0x219102(0x210)][_0x4ee894]['layers'][_0x3aac5c],0x0,0x0,_0x446b99['width'],_0x446b99[_0x219102(0x245)]);}_0x1dd31f[_0x219102(0x1ca)](_0x446b99);const _0x432af4=document['createElement'](_0x219102(0x21f));_0x432af4[_0x219102(0x22e)]='F'+(_0x4ee894+0x1),_0x1dd31f[_0x219102(0x1ca)](_0x432af4);const _0x39b638=document['createElement'](_0x219102(0x1fd));_0x39b638['textContent']='削除',_0x39b638[_0x219102(0x17b)]=_0x219102(0x182),_0x39b638[_0x219102(0x1df)]=_0x2afa4e[_0x219102(0x210)][_0x219102(0x1aa)]===0x1,_0x39b638[_0x219102(0x16a)]=_0x3eb15f=>{_0x3eb15f['stopPropagation'](),removeFrameAt(_0x4ee894);},_0x1dd31f[_0x219102(0x1ca)](_0x39b638),_0x1d6416['appendChild'](_0x1dd31f);}document[_0x219102(0x194)](_0x219102(0x1af))[_0x219102(0x22e)]='('+_0x2afa4e[_0x219102(0x210)]['length']+_0x219102(0x233);}function addFrame(){const _0x56bc81=a0_0x42db8f;let _0x581b26=getCurrentProject(),_0x1872e1=_0x581b26[_0x56bc81(0x210)][_0x581b26[_0x56bc81(0x20e)]],_0x221a69=_0x1872e1['layers']['map'](_0x3265b0=>{const _0x32588a=_0x56bc81;let _0x2bc2e7=document['createElement'](_0x32588a(0x1a2));return _0x2bc2e7[_0x32588a(0x249)]=_0x3265b0[_0x32588a(0x249)],_0x2bc2e7[_0x32588a(0x245)]=_0x3265b0[_0x32588a(0x245)],_0x2bc2e7[_0x32588a(0x1e5)]('2d')['drawImage'](_0x3265b0,0x0,0x0),_0x2bc2e7;}),_0x3d1de3=_0x221a69['map'](()=>[]),_0x40df10=_0x221a69[_0x56bc81(0x247)](()=>[]),_0x32c127={'layers':_0x221a69,'activeLayer':0x0,'layerHistories':_0x3d1de3,'layerRedoStacks':_0x40df10};_0x581b26[_0x56bc81(0x210)][_0x56bc81(0x1e9)](_0x581b26[_0x56bc81(0x20e)]+0x1,0x0,_0x32c127),_0x581b26[_0x56bc81(0x20e)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x115058){const _0x4ef49d=a0_0x42db8f;let _0x4224cd=getCurrentProject();if(_0x4224cd[_0x4ef49d(0x210)][_0x4ef49d(0x1aa)]<=0x1)return;_0x4224cd[_0x4ef49d(0x210)][_0x4ef49d(0x1e9)](_0x115058,0x1);if(_0x4224cd[_0x4ef49d(0x20e)]>=_0x4224cd[_0x4ef49d(0x210)][_0x4ef49d(0x1aa)])_0x4224cd[_0x4ef49d(0x20e)]=_0x4224cd[_0x4ef49d(0x210)][_0x4ef49d(0x1aa)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x18c4ac=a0_0x42db8f;return getCurrentProject()[_0x18c4ac(0x210)][getCurrentProject()[_0x18c4ac(0x20e)]];}function updateLayerUI(){const _0xd61fa3=a0_0x42db8f;let {layers:_0x534963,activeLayer:_0x2deb52}=getCurrentFrame();document[_0xd61fa3(0x194)]('layerCount')[_0xd61fa3(0x22e)]='('+_0x534963[_0xd61fa3(0x1aa)]+'枚)';const _0x423933=document[_0xd61fa3(0x194)](_0xd61fa3(0x229));_0x423933['innerHTML']='';for(let _0x5888e7=_0x534963[_0xd61fa3(0x1aa)]-0x1;_0x5888e7>=0x0;_0x5888e7--){const _0xb3267c=document[_0xd61fa3(0x1fa)](_0xd61fa3(0x17d));_0xb3267c[_0xd61fa3(0x17b)]=_0xd61fa3(0x226)+(_0x5888e7===_0x2deb52?'\x20active':''),_0xb3267c[_0xd61fa3(0x16a)]=_0x2cc013=>{const _0x34de0a=_0xd61fa3;if(_0x2cc013[_0x34de0a(0x1a0)]['classList'][_0x34de0a(0x238)]('layer-btn'))return;getCurrentFrame()['activeLayer']=_0x5888e7,updateLayerUI(),redrawAll();};const _0x695c4c=document[_0xd61fa3(0x1fa)](_0xd61fa3(0x1a2));_0x695c4c[_0xd61fa3(0x17b)]=_0xd61fa3(0x1cc),_0x695c4c[_0xd61fa3(0x249)]=0x20,_0x695c4c[_0xd61fa3(0x245)]=0x20;let _0x3bcb91=_0x695c4c['getContext']('2d');_0x3bcb91[_0xd61fa3(0x24e)](0x0,0x0,0x20,0x20),_0x3bcb91[_0xd61fa3(0x138)](_0x534963[_0x5888e7],0x0,0x0,_0x695c4c[_0xd61fa3(0x249)],_0x695c4c[_0xd61fa3(0x245)]),_0xb3267c[_0xd61fa3(0x1ca)](_0x695c4c);const _0x1eab2a=document[_0xd61fa3(0x1fa)](_0xd61fa3(0x21f));_0x1eab2a[_0xd61fa3(0x22e)]=_0xd61fa3(0x167)+(_0x5888e7+0x1),_0xb3267c['appendChild'](_0x1eab2a);const _0x15cd35=document[_0xd61fa3(0x1fa)](_0xd61fa3(0x1fd));_0x15cd35[_0xd61fa3(0x22e)]='↑',_0x15cd35['className']=_0xd61fa3(0x172),_0x15cd35[_0xd61fa3(0x192)]='上に移動',_0x15cd35[_0xd61fa3(0x1df)]=_0x5888e7===_0x534963[_0xd61fa3(0x1aa)]-0x1,_0x15cd35['onclick']=_0x346ff3=>{const _0x3312da=_0xd61fa3;_0x346ff3[_0x3312da(0x201)](),_0x5888e7<_0x534963[_0x3312da(0x1aa)]-0x1&&swapLayer(_0x5888e7,_0x5888e7+0x1);},_0xb3267c[_0xd61fa3(0x1ca)](_0x15cd35);const _0x22ca45=document['createElement'](_0xd61fa3(0x1fd));_0x22ca45[_0xd61fa3(0x22e)]='↓',_0x22ca45[_0xd61fa3(0x17b)]=_0xd61fa3(0x172),_0x22ca45['title']=_0xd61fa3(0x16f),_0x22ca45['disabled']=_0x5888e7===0x0,_0x22ca45['onclick']=_0x3b10a6=>{const _0x28e6d4=_0xd61fa3;_0x3b10a6[_0x28e6d4(0x201)](),_0x5888e7>0x0&&swapLayer(_0x5888e7,_0x5888e7-0x1);},_0xb3267c[_0xd61fa3(0x1ca)](_0x22ca45);const _0x24cac5=document[_0xd61fa3(0x1fa)](_0xd61fa3(0x1fd));_0x24cac5[_0xd61fa3(0x22e)]='削除',_0x24cac5['className']=_0xd61fa3(0x172),_0x24cac5[_0xd61fa3(0x192)]=_0xd61fa3(0x254),_0x24cac5[_0xd61fa3(0x1df)]=_0x534963[_0xd61fa3(0x1aa)]===0x1,_0x24cac5[_0xd61fa3(0x16a)]=_0x1d60ef=>{const _0x555871=_0xd61fa3;_0x1d60ef[_0x555871(0x201)](),removeLayerAt(_0x5888e7);},_0xb3267c['appendChild'](_0x24cac5),_0x423933[_0xd61fa3(0x1ca)](_0xb3267c);}}function swapLayer(_0x158510,_0x1fc1f7){const _0x79baca=a0_0x42db8f;let _0x71a06c=getCurrentFrame();[_0x71a06c[_0x79baca(0x185)][_0x158510],_0x71a06c[_0x79baca(0x185)][_0x1fc1f7]]=[_0x71a06c[_0x79baca(0x185)][_0x1fc1f7],_0x71a06c['layers'][_0x158510]],[_0x71a06c[_0x79baca(0x151)][_0x158510],_0x71a06c['layerHistories'][_0x1fc1f7]]=[_0x71a06c[_0x79baca(0x151)][_0x1fc1f7],_0x71a06c[_0x79baca(0x151)][_0x158510]],[_0x71a06c[_0x79baca(0x19f)][_0x158510],_0x71a06c[_0x79baca(0x19f)][_0x1fc1f7]]=[_0x71a06c[_0x79baca(0x19f)][_0x1fc1f7],_0x71a06c[_0x79baca(0x19f)][_0x158510]];if(_0x71a06c['activeLayer']===_0x158510)_0x71a06c[_0x79baca(0x1f5)]=_0x1fc1f7;else{if(_0x71a06c[_0x79baca(0x1f5)]===_0x1fc1f7)_0x71a06c['activeLayer']=_0x158510;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x4acad9){const _0x19d362=a0_0x42db8f;let _0x7b2cdf=getCurrentFrame();if(_0x7b2cdf['layers']['length']<=0x1)return;_0x7b2cdf['layers']['splice'](_0x4acad9,0x1),_0x7b2cdf[_0x19d362(0x151)]['splice'](_0x4acad9,0x1),_0x7b2cdf[_0x19d362(0x19f)][_0x19d362(0x1e9)](_0x4acad9,0x1);if(_0x7b2cdf[_0x19d362(0x1f5)]>=_0x7b2cdf[_0x19d362(0x185)][_0x19d362(0x1aa)])_0x7b2cdf[_0x19d362(0x1f5)]=_0x7b2cdf['layers'][_0x19d362(0x1aa)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x28f8fa=a0_0x42db8f;let _0x5774f7=getCurrentProject(),_0x89af40=getCurrentFrame(),_0x4b40be=document[_0x28f8fa(0x1fa)](_0x28f8fa(0x1a2));_0x4b40be[_0x28f8fa(0x249)]=_0x5774f7[_0x28f8fa(0x249)]*cellSize,_0x4b40be[_0x28f8fa(0x245)]=_0x5774f7['height']*cellSize,_0x89af40[_0x28f8fa(0x185)]['push'](_0x4b40be),_0x89af40[_0x28f8fa(0x151)]['push']([]),_0x89af40[_0x28f8fa(0x19f)][_0x28f8fa(0x18e)]([]),_0x89af40[_0x28f8fa(0x1f5)]=_0x89af40[_0x28f8fa(0x185)][_0x28f8fa(0x1aa)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x209fd2=a0_0x42db8f;let _0x5e0090=getCurrentFrame();if(_0x5e0090[_0x209fd2(0x185)][_0x209fd2(0x1aa)]<=0x1)return;_0x5e0090[_0x209fd2(0x185)][_0x209fd2(0x1e9)](_0x5e0090[_0x209fd2(0x1f5)],0x1),_0x5e0090[_0x209fd2(0x151)][_0x209fd2(0x1e9)](_0x5e0090[_0x209fd2(0x1f5)],0x1),_0x5e0090[_0x209fd2(0x19f)][_0x209fd2(0x1e9)](_0x5e0090['activeLayer'],0x1),_0x5e0090['activeLayer']=Math[_0x209fd2(0x211)](0x0,_0x5e0090[_0x209fd2(0x1f5)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0xb850ea){getCurrentFrame()['activeLayer']=parseInt(_0xb850ea),updateLayerUI();}let PALETTE_COLORS=[a0_0x42db8f(0x1e3),a0_0x42db8f(0x14d),'#444444',a0_0x42db8f(0x1e8),a0_0x42db8f(0x1f0),a0_0x42db8f(0x231),a0_0x42db8f(0x1bd),a0_0x42db8f(0x15f),a0_0x42db8f(0x139),a0_0x42db8f(0x183),'#00ffff',a0_0x42db8f(0x157),a0_0x42db8f(0x1f9),'#800000',a0_0x42db8f(0x146),a0_0x42db8f(0x205),a0_0x42db8f(0x1b2),a0_0x42db8f(0x1ea),a0_0x42db8f(0x1bb),a0_0x42db8f(0x24f),'#ff69b4'],currentAlpha=0x1;function setTool(_0x43fc21){const _0x520a89=a0_0x42db8f;currentTool=_0x43fc21,document['querySelectorAll'](_0x520a89(0x251))[_0x520a89(0x1e1)](_0x5ca9ae=>{const _0x58b8d5=_0x520a89;_0x5ca9ae['classList'][_0x58b8d5(0x184)](_0x58b8d5(0x197),_0x5ca9ae[_0x58b8d5(0x13c)][_0x58b8d5(0x1b3)]===_0x43fc21);}),document[_0x520a89(0x255)](_0x520a89(0x1a9))[_0x520a89(0x1e1)](_0x300207=>{const _0xfb8b14=_0x520a89;_0x300207['classList'][_0xfb8b14(0x184)]('active',_0x300207['dataset'][_0xfb8b14(0x1b3)]===_0x43fc21);});}function setPenSize(_0x15ad60){const _0x2fe687=a0_0x42db8f;penSize=parseInt(_0x15ad60)||0x1;let _0x21df94=document[_0x2fe687(0x194)](_0x2fe687(0x177));if(_0x21df94)_0x21df94[_0x2fe687(0x21a)]=penSize;let _0x5caa65=document['getElementById'](_0x2fe687(0x18a));if(_0x5caa65)_0x5caa65['value']=penSize;}function setPenMode(_0x484c35){const _0x485a77=a0_0x42db8f;penMode=_0x484c35;let _0x4b6361=document[_0x485a77(0x194)](_0x485a77(0x17a));if(_0x4b6361)_0x4b6361[_0x485a77(0x21a)]=penMode;let _0x4c075c=document[_0x485a77(0x194)](_0x485a77(0x219));if(_0x4c075c)_0x4c075c[_0x485a77(0x21a)]=penMode;}function hexToRgba(_0x5bf10f,_0x1707c1=0x1){const _0x369bf4=a0_0x42db8f;if(_0x5bf10f===_0x369bf4(0x1e3)||_0x5bf10f===_0x369bf4(0x1d1))return[0x0,0x0,0x0,0x0];_0x5bf10f=_0x5bf10f['replace']('#','');if(_0x5bf10f['length']===0x3)_0x5bf10f=_0x5bf10f['split']('')[_0x369bf4(0x247)](_0x9c2ec9=>_0x9c2ec9+_0x9c2ec9)[_0x369bf4(0x21c)]('');let _0x2b8b50=parseInt(_0x5bf10f,0x10);return[_0x2b8b50>>0x10&0xff,_0x2b8b50>>0x8&0xff,_0x2b8b50&0xff,Math[_0x369bf4(0x18c)](0xff*_0x1707c1)];}function fillAt(_0x348dfc,_0x210af6){const _0x1868cc=a0_0x42db8f;let _0x4240eb=getCurrentProject(),_0x54abe1=getCurrentFrame(),_0x2b7a3f=_0x54abe1['layers'][_0x54abe1['activeLayer']][_0x1868cc(0x1e5)]('2d'),_0x3f9f83=_0x2b7a3f['getImageData'](0x0,0x0,_0x4240eb[_0x1868cc(0x249)]*cellSize,_0x4240eb[_0x1868cc(0x245)]*cellSize),_0x7e8501=_0x348dfc*cellSize,_0x23193a=_0x210af6*cellSize,_0x581a1c=getPixel(_0x3f9f83,_0x7e8501,_0x23193a),_0x5f338e=currentColor===_0x1868cc(0x1e3)||currentColor==='#00000000'||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x581a1c,_0x5f338e))return;let _0x4d94f=[[_0x348dfc,_0x210af6]],_0x12c4a4=new Set();while(_0x4d94f[_0x1868cc(0x1aa)]){let [_0xf67ce2,_0x1c459d]=_0x4d94f[_0x1868cc(0x144)]();if(_0xf67ce2<0x0||_0x1c459d<0x0||_0xf67ce2>=_0x4240eb[_0x1868cc(0x249)]||_0x1c459d>=_0x4240eb[_0x1868cc(0x245)])continue;let _0x1a4df0=_0xf67ce2+','+_0x1c459d;if(_0x12c4a4['has'](_0x1a4df0))continue;_0x12c4a4[_0x1868cc(0x1e4)](_0x1a4df0);let _0x4caa0a=_0xf67ce2*cellSize,_0x2c880d=_0x1c459d*cellSize,_0x37fdf8=getPixel(_0x3f9f83,_0x4caa0a,_0x2c880d);if(!colorsMatch(_0x37fdf8,_0x581a1c))continue;for(let _0x12ee21=0x0;_0x12ee21<cellSize;_0x12ee21++){for(let _0x1f939e=0x0;_0x1f939e<cellSize;_0x1f939e++){setPixel(_0x3f9f83,_0x4caa0a+_0x1f939e,_0x2c880d+_0x12ee21,_0x5f338e);}}_0x4d94f[_0x1868cc(0x18e)]([_0xf67ce2+0x1,_0x1c459d]),_0x4d94f['push']([_0xf67ce2-0x1,_0x1c459d]),_0x4d94f['push']([_0xf67ce2,_0x1c459d+0x1]),_0x4d94f[_0x1868cc(0x18e)]([_0xf67ce2,_0x1c459d-0x1]);}_0x2b7a3f[_0x1868cc(0x1a6)](_0x3f9f83,0x0,0x0),redrawAll();}function getPixel(_0x3c8f91,_0xfc9fa1,_0xf79746){const _0xd55cf2=a0_0x42db8f;let _0x402a80=(_0xf79746*_0x3c8f91[_0xd55cf2(0x249)]+_0xfc9fa1)*0x4;return[_0x3c8f91[_0xd55cf2(0x1dd)][_0x402a80],_0x3c8f91[_0xd55cf2(0x1dd)][_0x402a80+0x1],_0x3c8f91[_0xd55cf2(0x1dd)][_0x402a80+0x2],_0x3c8f91[_0xd55cf2(0x1dd)][_0x402a80+0x3]];}function setPixel(_0x24c434,_0x4fb966,_0x14e3e9,_0x146dad){const _0x18117c=a0_0x42db8f;let _0x3742a6=(_0x14e3e9*_0x24c434[_0x18117c(0x249)]+_0x4fb966)*0x4;_0x24c434['data'][_0x3742a6]=_0x146dad[0x0],_0x24c434[_0x18117c(0x1dd)][_0x3742a6+0x1]=_0x146dad[0x1],_0x24c434[_0x18117c(0x1dd)][_0x3742a6+0x2]=_0x146dad[0x2],_0x24c434[_0x18117c(0x1dd)][_0x3742a6+0x3]=_0x146dad[0x3];}function colorsMatch(_0x5d8d50,_0x1e0fab){return _0x5d8d50[0x0]===_0x1e0fab[0x0]&&_0x5d8d50[0x1]===_0x1e0fab[0x1]&&_0x5d8d50[0x2]===_0x1e0fab[0x2]&&_0x5d8d50[0x3]===_0x1e0fab[0x3];}function handleMouseDown(_0xb114a3){const _0x56e5e2=a0_0x42db8f;isDrawing=!![];const _0x294ef3=canvas[_0x56e5e2(0x1ef)](),_0xf28631=canvas['width']/_0x294ef3[_0x56e5e2(0x249)],_0x4d4f06=canvas[_0x56e5e2(0x245)]/_0x294ef3['height'],_0x4b2a89=Math[_0x56e5e2(0x1eb)]((_0xb114a3['clientX']-_0x294ef3[_0x56e5e2(0x176)])*_0xf28631/cellSize),_0x10f060=Math[_0x56e5e2(0x1eb)]((_0xb114a3[_0x56e5e2(0x188)]-_0x294ef3[_0x56e5e2(0x21b)])*_0x4d4f06/cellSize);currentTool===_0x56e5e2(0x1fc)?(fillAt(_0x4b2a89,_0x10f060),saveHistory(),isDrawing=![]):drawDotXY(_0x4b2a89,_0x10f060);}function handleMouseMove(_0x48ba4d){const _0x57f678=a0_0x42db8f;if(!isDrawing)return;const _0x59e4b6=canvas[_0x57f678(0x1ef)](),_0x277643=canvas['width']/_0x59e4b6[_0x57f678(0x249)],_0x340d0e=canvas[_0x57f678(0x245)]/_0x59e4b6[_0x57f678(0x245)],_0x4569e6=Math[_0x57f678(0x1eb)]((_0x48ba4d[_0x57f678(0x1c4)]-_0x59e4b6[_0x57f678(0x176)])*_0x277643/cellSize),_0x59ca88=Math['floor']((_0x48ba4d[_0x57f678(0x188)]-_0x59e4b6[_0x57f678(0x21b)])*_0x340d0e/cellSize);drawDotXY(_0x4569e6,_0x59ca88);}function handleMouseUp(_0x42a9b7){isDrawing&&saveHistory(),isDrawing=![];}let lastTouch=null;function getTouchPos(_0x20247e){const _0x4a2d3b=a0_0x42db8f,_0x5ea90b=canvas['getBoundingClientRect']();let _0x5226c0=_0x20247e[_0x4a2d3b(0x193)]&&_0x20247e['touches'][0x0]?_0x20247e[_0x4a2d3b(0x193)][0x0]:_0x20247e['changedTouches'][0x0];const _0x461384=canvas['width']/_0x5ea90b[_0x4a2d3b(0x249)],_0x1ce637=canvas['height']/_0x5ea90b['height'];return{'x':Math['floor']((_0x5226c0[_0x4a2d3b(0x1c4)]-_0x5ea90b[_0x4a2d3b(0x176)])*_0x461384/cellSize),'y':Math[_0x4a2d3b(0x1eb)]((_0x5226c0[_0x4a2d3b(0x188)]-_0x5ea90b[_0x4a2d3b(0x21b)])*_0x1ce637/cellSize)};}function handleTouchStart(_0x4cd4dc){const _0x5940f0=a0_0x42db8f;if(_0x4cd4dc[_0x5940f0(0x193)]['length']>0x1)return;_0x4cd4dc[_0x5940f0(0x1be)](),isDrawing=!![];let _0x819db3=getTouchPos(_0x4cd4dc);lastTouch=_0x819db3,currentTool==='fill'?(fillAt(_0x819db3['x'],_0x819db3['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x819db3['x'],_0x819db3['y']);}function handleTouchMove(_0x24499e){const _0x46e420=a0_0x42db8f;if(!isDrawing)return;if(_0x24499e[_0x46e420(0x193)]['length']>0x1)return;_0x24499e['preventDefault']();let _0x45100e=getTouchPos(_0x24499e);if(lastTouch){let _0x5ac662=_0x45100e['x']-lastTouch['x'],_0x354a52=_0x45100e['y']-lastTouch['y'],_0x3a6b12=Math[_0x46e420(0x211)](Math[_0x46e420(0x165)](_0x5ac662),Math[_0x46e420(0x165)](_0x354a52));for(let _0x1dafcc=0x1;_0x1dafcc<=_0x3a6b12;_0x1dafcc++){let _0x151a78=Math[_0x46e420(0x18c)](lastTouch['x']+_0x5ac662*_0x1dafcc/_0x3a6b12),_0x2ac709=Math[_0x46e420(0x18c)](lastTouch['y']+_0x354a52*_0x1dafcc/_0x3a6b12);drawDotTouch(_0x151a78,_0x2ac709);}}else drawDotTouch(_0x45100e['x'],_0x45100e['y']);lastTouch=_0x45100e;}function handleTouchEnd(_0x1b6215){isDrawing&&saveHistory(),isDrawing=![],lastTouch=null;}function drawDotXY(_0x2beed3,_0x1e0599){const _0xa14434=a0_0x42db8f;let _0x116bae=getCurrentProject(),_0x5190a1=getCurrentFrame();if(!_0x5190a1||!_0x116bae)return;if(typeof _0x2beed3!==_0xa14434(0x1d4)||typeof _0x1e0599!==_0xa14434(0x1d4)||_0x2beed3<0x0||_0x1e0599<0x0||!Number[_0xa14434(0x13f)](_0x116bae[_0xa14434(0x249)])||!Number[_0xa14434(0x13f)](_0x116bae[_0xa14434(0x245)])||_0x2beed3>=_0x116bae['width']||_0x1e0599>=_0x116bae['height']||!Array['isArray'](_0x5190a1[_0xa14434(0x185)])||typeof _0x5190a1[_0xa14434(0x1f5)]!==_0xa14434(0x1d4)||!_0x5190a1['layers'][_0x5190a1['activeLayer']])return;let _0x3c919d=_0x5190a1[_0xa14434(0x185)][_0x5190a1[_0xa14434(0x1f5)]][_0xa14434(0x1e5)]('2d');if(!_0x3c919d)return;if(currentTool===_0xa14434(0x23b)||currentColor===_0xa14434(0x1e3)||currentColor==='#00000000'||currentAlpha===0x0)drawPenShape(_0x3c919d,_0x2beed3,_0x1e0599,_0xa14434(0x1d1),!![]);else{let _0x3800fd=hexToRgba(currentColor,currentAlpha);_0x3c919d[_0xa14434(0x256)](),_0x3c919d[_0xa14434(0x25b)]=_0x3800fd[0x3]/0xff,drawPenShape(_0x3c919d,_0x2beed3,_0x1e0599,_0xa14434(0x1cd)+_0x3800fd[0x0]+','+_0x3800fd[0x1]+','+_0x3800fd[0x2]+','+_0x3800fd[0x3]/0xff+')',![]),_0x3c919d['restore']();}redrawAll();}function drawPenShape(_0x587412,_0x357f2d,_0x57dc03,_0x55d9f4,_0x371113){const _0x4ab43b=a0_0x42db8f,_0x227f3e=_0x357f2d*cellSize,_0x1bd11f=_0x57dc03*cellSize,_0x12be48=penSize*cellSize;_0x371113?(_0x587412['save'](),_0x587412[_0x4ab43b(0x1c3)]='destination-out',penMode===_0x4ab43b(0x1b1)?(_0x587412[_0x4ab43b(0x208)](),_0x587412[_0x4ab43b(0x241)](_0x227f3e+cellSize/0x2,_0x1bd11f+cellSize/0x2,_0x12be48/0x2,0x0,Math['PI']*0x2),_0x587412[_0x4ab43b(0x1fc)]()):_0x587412[_0x4ab43b(0x24e)](_0x227f3e-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x1bd11f-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x12be48,_0x12be48),_0x587412[_0x4ab43b(0x217)]()):(_0x587412['save'](),_0x587412['fillStyle']=_0x55d9f4,penMode==='circle'?(_0x587412[_0x4ab43b(0x208)](),_0x587412[_0x4ab43b(0x241)](_0x227f3e+cellSize/0x2,_0x1bd11f+cellSize/0x2,_0x12be48/0x2,0x0,Math['PI']*0x2),_0x587412[_0x4ab43b(0x1fc)]()):_0x587412[_0x4ab43b(0x19c)](_0x227f3e-Math[_0x4ab43b(0x1eb)]((penSize-0x1)/0x2)*cellSize,_0x1bd11f-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x12be48,_0x12be48),_0x587412[_0x4ab43b(0x217)]());}function drawDotTouch(_0x10e53f,_0x39d280){const _0xea5b93=a0_0x42db8f;let _0x4b8ac6=getCurrentProject(),_0x27500a=getCurrentFrame();if(_0x10e53f<0x0||_0x39d280<0x0||_0x10e53f>=_0x4b8ac6[_0xea5b93(0x249)]||_0x39d280>=_0x4b8ac6['height'])return;let _0x80be69=_0x27500a['layers'][_0x27500a[_0xea5b93(0x1f5)]]['getContext']('2d');if(currentTool==='eraser'||currentColor===_0xea5b93(0x1e3)||currentColor===_0xea5b93(0x1d1)||currentAlpha===0x0)drawPenShape(_0x80be69,_0x10e53f,_0x39d280,_0xea5b93(0x1d1),!![]);else{let _0x17aa98=hexToRgba(currentColor,currentAlpha);_0x80be69['save'](),_0x80be69[_0xea5b93(0x25b)]=_0x17aa98[0x3]/0xff,drawPenShape(_0x80be69,_0x10e53f,_0x39d280,'rgba('+_0x17aa98[0x0]+','+_0x17aa98[0x1]+','+_0x17aa98[0x2]+','+_0x17aa98[0x3]/0xff+')',![]),_0x80be69[_0xea5b93(0x217)]();}redrawAll();}window[a0_0x42db8f(0x1c1)]=()=>{const _0x569031=a0_0x42db8f;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x569031(0x1f7)),createPalette(),document[_0x569031(0x194)](_0x569031(0x177))[_0x569031(0x21a)]=penSize,document[_0x569031(0x194)](_0x569031(0x17a))[_0x569031(0x21a)]=penMode,canvas[_0x569031(0x1e7)]=handleMouseMove,canvas[_0x569031(0x252)]=handleMouseUp,canvas[_0x569031(0x13d)]=handleMouseUp,canvas[_0x569031(0x18d)]=handleTouchStart,canvas[_0x569031(0x1e2)]=handleTouchMove,canvas['ontouchend']=handleTouchEnd,canvas[_0x569031(0x1ae)]=handleTouchEnd,canvas[_0x569031(0x23f)](_0x569031(0x25a),handleTouchStart,{'passive':![]}),canvas['addEventListener'](_0x569031(0x1a7),handleTouchMove,{'passive':![]}),canvas[_0x569031(0x23f)](_0x569031(0x1cb),handleTouchEnd,{'passive':![]}),canvas['addEventListener'](_0x569031(0x225),handleTouchEnd,{'passive':![]}),idbGet(_0x569031(0x203))&&loadProjectFromIDB();};function drawGrid(_0x5752ac,_0x208b7e){const _0x73cb3=a0_0x42db8f;ctx[_0x73cb3(0x256)](),ctx['strokeStyle']=_0x73cb3(0x1bc);for(let _0xf6a219=0x0;_0xf6a219<=_0x5752ac;_0xf6a219++){ctx['beginPath'](),ctx[_0x73cb3(0x14c)](_0xf6a219*cellSize,0x0),ctx['lineTo'](_0xf6a219*cellSize,_0x208b7e*cellSize),ctx['stroke']();}for(let _0x39082e=0x0;_0x39082e<=_0x208b7e;_0x39082e++){ctx[_0x73cb3(0x208)](),ctx[_0x73cb3(0x14c)](0x0,_0x39082e*cellSize),ctx['lineTo'](_0x5752ac*cellSize,_0x39082e*cellSize),ctx[_0x73cb3(0x145)]();}ctx[_0x73cb3(0x217)]();}function redrawAll(){const _0x2682ce=a0_0x42db8f;let _0x7e8f72=getCurrentProject(),_0x31fbff=getCurrentFrame();canvas['width']=_0x7e8f72[_0x2682ce(0x249)]*cellSize,canvas[_0x2682ce(0x245)]=_0x7e8f72[_0x2682ce(0x245)]*cellSize,ctx[_0x2682ce(0x24e)](0x0,0x0,canvas[_0x2682ce(0x249)],canvas[_0x2682ce(0x245)]);for(let _0x49ccf7=0x0;_0x49ccf7<_0x31fbff['layers']['length'];_0x49ccf7++){ctx[_0x2682ce(0x138)](_0x31fbff[_0x2682ce(0x185)][_0x49ccf7],0x0,0x0);}drawGrid(_0x7e8f72[_0x2682ce(0x249)],_0x7e8f72[_0x2682ce(0x245)]);}function saveHistory(){const _0x33a453=a0_0x42db8f;let _0xdd24f0=getCurrentFrame(),_0xecd18f=_0xdd24f0[_0x33a453(0x151)][_0xdd24f0[_0x33a453(0x1f5)]];_0xecd18f[_0x33a453(0x18e)](_0xdd24f0[_0x33a453(0x185)][_0xdd24f0[_0x33a453(0x1f5)]][_0x33a453(0x13e)]());if(_0xecd18f['length']>0x32)_0xecd18f[_0x33a453(0x230)]();_0xdd24f0[_0x33a453(0x19f)][_0xdd24f0[_0x33a453(0x1f5)]]=[];}function undo(){const _0x1dc2cd=a0_0x42db8f;let _0x4fc778=getCurrentFrame(),_0x4a6faa=_0x4fc778[_0x1dc2cd(0x151)][_0x4fc778[_0x1dc2cd(0x1f5)]],_0x510eba=_0x4fc778[_0x1dc2cd(0x19f)][_0x4fc778[_0x1dc2cd(0x1f5)]];if(!_0x4a6faa||_0x4a6faa[_0x1dc2cd(0x1aa)]<0x2)return;_0x510eba[_0x1dc2cd(0x18e)](_0x4a6faa[_0x1dc2cd(0x144)]());let _0x4c043a=new Image();_0x4c043a['onload']=()=>{const _0x22284f=_0x1dc2cd;let _0x34a17c=_0x4fc778[_0x22284f(0x185)][_0x4fc778['activeLayer']]['getContext']('2d');_0x34a17c[_0x22284f(0x24e)](0x0,0x0,_0x4fc778[_0x22284f(0x185)][_0x4fc778[_0x22284f(0x1f5)]][_0x22284f(0x249)],_0x4fc778[_0x22284f(0x185)][_0x4fc778[_0x22284f(0x1f5)]][_0x22284f(0x245)]),_0x34a17c[_0x22284f(0x138)](_0x4c043a,0x0,0x0),redrawAll();},_0x4c043a[_0x1dc2cd(0x17e)]=_0x4a6faa[_0x4a6faa[_0x1dc2cd(0x1aa)]-0x1];}function redo(){const _0xf74de1=a0_0x42db8f;let _0x3be5fc=getCurrentFrame(),_0x151ab1=_0x3be5fc[_0xf74de1(0x151)][_0x3be5fc[_0xf74de1(0x1f5)]],_0x594881=_0x3be5fc[_0xf74de1(0x19f)][_0x3be5fc[_0xf74de1(0x1f5)]];if(!_0x594881||_0x594881[_0xf74de1(0x1aa)]===0x0)return;let _0x404eac=_0x594881['pop']();_0x151ab1[_0xf74de1(0x18e)](_0x404eac);let _0x105038=new Image();_0x105038[_0xf74de1(0x1c1)]=()=>{const _0x205ce2=_0xf74de1;let _0x4ca32f=_0x3be5fc['layers'][_0x3be5fc[_0x205ce2(0x1f5)]][_0x205ce2(0x1e5)]('2d');_0x4ca32f[_0x205ce2(0x24e)](0x0,0x0,_0x3be5fc[_0x205ce2(0x185)][_0x3be5fc[_0x205ce2(0x1f5)]][_0x205ce2(0x249)],_0x3be5fc['layers'][_0x3be5fc[_0x205ce2(0x1f5)]][_0x205ce2(0x245)]),_0x4ca32f[_0x205ce2(0x138)](_0x105038,0x0,0x0),redrawAll();},_0x105038[_0xf74de1(0x17e)]=_0x404eac;}function a0_0x299f(_0x105fc8,_0xa59c5){const _0x3d0221=a0_0xea5e();return a0_0x299f=function(_0x41fbe5,_0x2d7653){_0x41fbe5=_0x41fbe5-0x138;let _0xea5e13=_0x3d0221[_0x41fbe5];return _0xea5e13;},a0_0x299f(_0x105fc8,_0xa59c5);}function exportImage(_0xefcd89){const _0x43a2ad=a0_0x42db8f;let _0x56dfcb=getCurrentProject(),_0xec47d4=_0x56dfcb[_0x43a2ad(0x210)],_0x4b570b=_0xefcd89===_0x43a2ad(0x24a)||_0xefcd89===_0x43a2ad(0x195)?_0x43a2ad(0x190):_0x43a2ad(0x181)+_0xefcd89,_0x7a26a5=_0xec47d4[_0x43a2ad(0x1aa)]>0x1,_0x332304=(_0x56dfcb[_0x43a2ad(0x240)]||'nezumi-drawing')['replace'](/[\\/:*?"<>|]/g,'_');if(!_0x7a26a5){let _0x3ceefd=document[_0x43a2ad(0x1fa)](_0x43a2ad(0x1a2));_0x3ceefd[_0x43a2ad(0x249)]=_0x56dfcb[_0x43a2ad(0x249)]*cellSize,_0x3ceefd[_0x43a2ad(0x245)]=_0x56dfcb[_0x43a2ad(0x245)]*cellSize;let _0x3357a2=_0x3ceefd[_0x43a2ad(0x1e5)]('2d'),_0x52f1c4=getCurrentFrame();for(let _0x3d8c98=0x0;_0x3d8c98<_0x52f1c4[_0x43a2ad(0x185)]['length'];_0x3d8c98++){_0x3357a2['drawImage'](_0x52f1c4['layers'][_0x3d8c98],0x0,0x0);}let _0x32d997=document['createElement']('a');_0x32d997[_0x43a2ad(0x142)]=_0x332304+'.'+_0xefcd89,_0xefcd89===_0x43a2ad(0x24a)||_0xefcd89===_0x43a2ad(0x195)?_0x32d997[_0x43a2ad(0x1ee)]=_0x3ceefd[_0x43a2ad(0x13e)](_0x4b570b,0.92):_0x32d997[_0x43a2ad(0x1ee)]=_0x3ceefd[_0x43a2ad(0x13e)](_0x4b570b),_0x32d997['click']();}else{if(_0xefcd89===_0x43a2ad(0x236)&&typeof window['WebCodecs']!=='undefined')exportWebpAnimation(_0xec47d4,_0x56dfcb[_0x43a2ad(0x249)]*cellSize,_0x56dfcb[_0x43a2ad(0x245)]*cellSize,_0x332304);else for(let _0x1ef8c1=0x0;_0x1ef8c1<_0xec47d4['length'];_0x1ef8c1++){let _0x30d7d9=document[_0x43a2ad(0x1fa)]('canvas');_0x30d7d9[_0x43a2ad(0x249)]=_0x56dfcb[_0x43a2ad(0x249)]*cellSize,_0x30d7d9['height']=_0x56dfcb['height']*cellSize;let _0x58a3ae=_0x30d7d9[_0x43a2ad(0x1e5)]('2d'),_0x20fc69=_0xec47d4[_0x1ef8c1];for(let _0x303519=0x0;_0x303519<_0x20fc69['layers'][_0x43a2ad(0x1aa)];_0x303519++){_0x58a3ae[_0x43a2ad(0x138)](_0x20fc69['layers'][_0x303519],0x0,0x0);}let _0x3a29c9=document[_0x43a2ad(0x1fa)]('a');_0x3a29c9[_0x43a2ad(0x142)]=_0x332304+'-f'+(_0x1ef8c1+0x1)+'.'+_0xefcd89,_0xefcd89===_0x43a2ad(0x24a)||_0xefcd89===_0x43a2ad(0x195)?_0x3a29c9['href']=_0x30d7d9[_0x43a2ad(0x13e)](_0x4b570b,0.92):_0x3a29c9[_0x43a2ad(0x1ee)]=_0x30d7d9[_0x43a2ad(0x13e)](_0x4b570b),setTimeout(()=>_0x3a29c9[_0x43a2ad(0x243)](),_0x1ef8c1*0x64);}}}async function exportWebpAnimation(_0x203d06,_0x3e5e62,_0x10e94c,_0x128d6b=a0_0x42db8f(0x150)){const _0x57d94e=a0_0x42db8f;if(!window[_0x57d94e(0x207)]||!window['VideoEncoder']){alert('このブラウザはWebCodecsによるWEBPアニメーションに対応していません。');return;}const _0x47ef8f=[],_0x13fd22=new VideoEncoder({'output':_0x1cf906=>_0x47ef8f['push'](_0x1cf906),'error':_0x5dcade=>console['error'](_0x5dcade)});_0x13fd22[_0x57d94e(0x1ec)]({'codec':_0x57d94e(0x260),'width':_0x3e5e62,'height':_0x10e94c,'framerate':0x5});for(let _0x3c535e=0x0;_0x3c535e<_0x203d06[_0x57d94e(0x1aa)];_0x3c535e++){let _0x3ada9f=document['createElement'](_0x57d94e(0x1a2));_0x3ada9f[_0x57d94e(0x249)]=_0x3e5e62,_0x3ada9f[_0x57d94e(0x245)]=_0x10e94c;let _0x155494=_0x3ada9f[_0x57d94e(0x1e5)]('2d'),_0x5e9360=_0x203d06[_0x3c535e];for(let _0x309327=0x0;_0x309327<_0x5e9360[_0x57d94e(0x185)][_0x57d94e(0x1aa)];_0x309327++){_0x155494[_0x57d94e(0x138)](_0x5e9360['layers'][_0x309327],0x0,0x0);}let _0x1e90ce=await createImageBitmap(_0x3ada9f);_0x13fd22[_0x57d94e(0x20a)](_0x1e90ce,{'keyFrame':!![],'duration':0xc8}),_0x1e90ce[_0x57d94e(0x248)]();}await _0x13fd22[_0x57d94e(0x258)](),_0x13fd22['close']();const _0x192e66=new Blob(_0x47ef8f[_0x57d94e(0x247)](_0x486d20=>_0x486d20[_0x57d94e(0x22c)]?_0x486d20:_0x486d20[_0x57d94e(0x1dd)]),{'type':_0x57d94e(0x222)}),_0x4568b9=document['createElement']('a');_0x4568b9[_0x57d94e(0x142)]=_0x128d6b+_0x57d94e(0x168),_0x4568b9[_0x57d94e(0x1ee)]=URL[_0x57d94e(0x149)](_0x192e66),_0x4568b9[_0x57d94e(0x243)]();}function exportGif(){const _0x3110ce=a0_0x42db8f;let _0x2f482d=getCurrentProject(),_0x5a96e7=_0x2f482d[_0x3110ce(0x210)],_0x5d365e=_0x2f482d[_0x3110ce(0x249)]*cellSize,_0x2d9ff4=_0x2f482d[_0x3110ce(0x245)]*cellSize;const _0x208a0c=_0x5a96e7[_0x3110ce(0x247)](_0x2d306b=>{const _0x553f7e=_0x3110ce;let _0x2956c8=document[_0x553f7e(0x1fa)]('canvas');_0x2956c8['width']=_0x5d365e,_0x2956c8[_0x553f7e(0x245)]=_0x2d9ff4;let _0x1d8a55=_0x2956c8[_0x553f7e(0x1e5)]('2d');for(let _0x428fae=0x0;_0x428fae<_0x2d306b['layers'][_0x553f7e(0x1aa)];_0x428fae++){_0x1d8a55['drawImage'](_0x2d306b[_0x553f7e(0x185)][_0x428fae],0x0,0x0);}return _0x2956c8[_0x553f7e(0x13e)](_0x553f7e(0x220));});Promise[_0x3110ce(0x141)](_0x208a0c[_0x3110ce(0x247)](_0x416121=>{return new Promise(_0x24a1b5=>{const _0x21c91a=a0_0x299f,_0x2e9f90=new Image();_0x2e9f90[_0x21c91a(0x17e)]=_0x416121,_0x2e9f90[_0x21c91a(0x1c1)]=()=>_0x24a1b5(_0x2e9f90);});}))[_0x3110ce(0x1c8)](_0x25c6c4=>{const _0x174c4c=_0x3110ce,_0x5e8f77=_0x25c6c4[_0x174c4c(0x253)](_0x3d2597=>_0x3d2597[_0x174c4c(0x249)]>0x0&&_0x3d2597[_0x174c4c(0x245)]>0x0);if(_0x5e8f77[_0x174c4c(0x1aa)]===0x0){alert(_0x174c4c(0x23a));return;}const _0x2f91f1=(_0x2f482d[_0x174c4c(0x240)]||_0x174c4c(0x150))[_0x174c4c(0x215)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x5e8f77,0x12c,_0x2f91f1+'.gif');});}function exportApng(){const _0x458fac=a0_0x42db8f;let _0x453a4d=getCurrentProject(),_0x1aa816=_0x453a4d[_0x458fac(0x210)],_0x38c91e=_0x453a4d[_0x458fac(0x249)]*cellSize,_0xd6832a=_0x453a4d['height']*cellSize;const _0x75789=_0x1aa816[_0x458fac(0x247)](_0x6a8a67=>{const _0x2733ed=_0x458fac;let _0x24abbf=document['createElement'](_0x2733ed(0x1a2));_0x24abbf['width']=_0x38c91e,_0x24abbf['height']=_0xd6832a;let _0x403cd7=_0x24abbf[_0x2733ed(0x1e5)]('2d');for(let _0xa996a3=0x0;_0xa996a3<_0x6a8a67[_0x2733ed(0x185)][_0x2733ed(0x1aa)];_0xa996a3++){_0x403cd7[_0x2733ed(0x138)](_0x6a8a67['layers'][_0xa996a3],0x0,0x0);}let _0x4d5b30=new Image();return _0x4d5b30[_0x2733ed(0x17e)]=_0x24abbf['toDataURL'](_0x2733ed(0x220)),_0x4d5b30;}),_0x337c2f=(_0x453a4d[_0x458fac(0x240)]||_0x458fac(0x150))['replace'](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x75789,_0x38c91e,_0xd6832a,0x12c,_0x337c2f+_0x458fac(0x166));}const dbName=a0_0x42db8f(0x1d7),storeName=a0_0x42db8f(0x1d9);function openDB(){return new Promise((_0x889dba,_0x43733e)=>{const _0x22f88f=a0_0x299f,_0x1dcf35=indexedDB['open'](dbName,0x1);_0x1dcf35[_0x22f88f(0x257)]=()=>{const _0x10a6fa=_0x22f88f;_0x1dcf35[_0x10a6fa(0x1bf)][_0x10a6fa(0x20f)](storeName);},_0x1dcf35['onsuccess']=()=>_0x889dba(_0x1dcf35[_0x22f88f(0x1bf)]),_0x1dcf35[_0x22f88f(0x173)]=()=>_0x43733e(_0x1dcf35[_0x22f88f(0x178)]);});}async function idbSet(_0x2460e5,_0x3e8330){const _0x29ba0f=await openDB();return new Promise((_0x23e7f1,_0x1da395)=>{const _0x40076b=a0_0x299f,_0x439eba=_0x29ba0f[_0x40076b(0x1e6)](storeName,'readwrite');_0x439eba['objectStore'](storeName)[_0x40076b(0x179)](_0x3e8330,_0x2460e5),_0x439eba[_0x40076b(0x14a)]=()=>_0x23e7f1(),_0x439eba[_0x40076b(0x173)]=()=>_0x1da395(_0x439eba[_0x40076b(0x178)]);});}function a0_0xea5e(){const _0x478d9c=['.tool-btn','onmouseup','filter','このレイヤーを削除','querySelectorAll','save','onupgradeneeded','flush','IndexedDBからの読み込みに失敗したチュー…','touchstart','globalAlpha','projects','getImageData','1015242hinIwf','style','vp8','\x20selected','render','drawImage','#ffff00','project-name','onsuccess','dataset','onmouseleave','toDataURL','isFinite','onchange','all','download','1667784tQtkov','pop','stroke','#808000','プロジェクトをIndexedDBに保存したチュー！','#newProjCancelBtn','createObjectURL','oncomplete','\x20active','moveTo','#000000','.section.collapsible\x20.section-content','(((.+)+)+)+$','nezumi-animation','layerHistories','>四角ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22','input','removeEventListener','palette-alphaSlider','objectStore','#0000ff','UPNG','rgba(0,0,0,0.3)','log','.palette-color','#palette-penMode','display','GIF','#ffa500','projectList','3382756DxwPDY','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>幅:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>高さ:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>作成</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>キャンセル</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','body','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>ペン</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','abs','.apng','レイヤー','.webm','finished','onclick','readonly','type','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>新しい画像のサイズ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>名前:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22画像','クリックで名前を編集','下に移動','square','innerHTML','layer-btn','onerror','addFrame','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22undo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>undo</span>\x20戻す\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22redo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>redo</span>\x20戻すを戻す\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','left','penSize','error','put','penMode','className','frame-item','div','src','alphaValue','files','image/','frame-btn','#00ff00','toggle','layers','touchAction','background','clientY','alphaSlider','palette-penSize','palette-toolbar','round','ontouchstart','push','.section-content','image/jpeg','palette-color','title','touches','getElementById','jpeg','beforeunload','active','558383cyNmZm','onmousedown','block','toString','fillRect','trim','nezumi-animation.gif','layerRedoStacks','target','constructor','canvas','menu-toggle-btn','#palette-penSize','new-project-dialog','putImageData','touchmove','palette-del-btn','#palette-toolbar\x20.tool-btn','length','clear','.section.collapsible\x20.toggle-btn','onblur','ontouchcancel','frameCount','key','circle','#008080','tool','fixed','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','main-container','80px','blur','DOMContentLoaded','open','#800080','#ccc','#ff0000','preventDefault','result','5MsuVIg','onload','.toggle-btn','globalCompositeOperation','clientX','activeProject','pathname','15960488gVhamc','then','保存に失敗したチュー:','appendChild','touchend','layer-thumb','rgba(','frame-thumb','oninput','search','#00000000','image/apng','hidden','number','5158146taKKIO','>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22','nezumi-sketch-db','menu-toggle-btn-close','keyval','project-item','replaceWith','selected','data','remove','disabled','#palette-alphaSlider','forEach','ontouchmove','transparent','add','getContext','transaction','onmousemove','#888888','splice','#000080','floor','configure','setItem','href','getBoundingClientRect','#cccccc','/index.html','100vh','apply','sidebar','activeLayer','>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22','pen','#newProjH','#ff00ff','createElement','select','fill','button','classList','anonymous','focus','stopPropagation','nezumi-sketch-save','nezumi-projects','readAsText','#008000','readwrite','WebCodecs','beginPath','palette-alphaValue','encode','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>塗りつぶし</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20太さ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','color','sidebar-open','activeFrame','createObjectStore','frames','max','100vw','parentNode','onkeydown','replace','revokeObjectURL','restore','ontouchend','palette-penMode','value','top','join','Enter','827322ECOHIJ','span','image/png','stringify','video/webm','#palette-alphaValue','#newProjName','touchcancel','layer-item','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','removeChild','layerList','nezumi_about_visited','text','byteLength','getItem','textContent','match','shift','#ffffff','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>消しゴム</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','コマ)','innerWidth','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','webp','justifyContent','contains','application/json','GIFに変換できる画像がありません。','eraser','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','IndexedDBからプロジェクトを読み込んだチュー！','colorPicker','addEventListener','name','arc','none','click','palette-add-btn','height','/about?terms=true','map','close','width','jpg','delete','overflow','>丸ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20透明度:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','clearRect','#c0c0c0','querySelector'];a0_0xea5e=function(){return _0x478d9c;};return a0_0xea5e();}async function idbGet(_0xfb8038){const _0xd35369=await openDB();return new Promise((_0xaf906,_0x1ffb89)=>{const _0x33182e=a0_0x299f,_0x456594=_0xd35369[_0x33182e(0x1e6)](storeName,_0x33182e(0x16b)),_0x1ce161=_0x456594[_0x33182e(0x156)](storeName)['get'](_0xfb8038);_0x1ce161[_0x33182e(0x13b)]=()=>_0xaf906(_0x1ce161[_0x33182e(0x1bf)]),_0x1ce161['onerror']=()=>_0x1ffb89(_0x1ce161[_0x33182e(0x178)]);});}async function idbDelete(_0xda377c){const _0xd3eea4=await openDB();return new Promise((_0x2cb47f,_0x38126d)=>{const _0x32ff8a=a0_0x299f,_0x130653=_0xd3eea4[_0x32ff8a(0x1e6)](storeName,_0x32ff8a(0x206));_0x130653[_0x32ff8a(0x156)](storeName)[_0x32ff8a(0x24b)](_0xda377c),_0x130653[_0x32ff8a(0x14a)]=()=>_0x2cb47f(),_0x130653[_0x32ff8a(0x173)]=()=>_0x38126d(_0x130653['error']);});}async function idbClear(){const _0x40342c=await openDB();return new Promise((_0x71caf2,_0x1669f3)=>{const _0x33276d=a0_0x299f,_0x48dd12=_0x40342c[_0x33276d(0x1e6)](storeName,_0x33276d(0x206));_0x48dd12['objectStore'](storeName)[_0x33276d(0x1ab)](),_0x48dd12[_0x33276d(0x14a)]=()=>_0x71caf2(),_0x48dd12[_0x33276d(0x173)]=()=>_0x1669f3(_0x48dd12['error']);});}function saveProjectFile(){const _0x4e1098=a0_0x42db8f,_0x8b5b84={'projects':projects[_0x4e1098(0x247)](_0x59562c=>({'width':_0x59562c[_0x4e1098(0x249)],'height':_0x59562c[_0x4e1098(0x245)],'name':_0x59562c[_0x4e1098(0x240)]||'','activeFrame':_0x59562c[_0x4e1098(0x20e)],'frames':_0x59562c['frames']['map'](_0x46a099=>({'activeLayer':_0x46a099[_0x4e1098(0x1f5)],'layers':_0x46a099[_0x4e1098(0x185)]['map'](_0x28ede2=>_0x28ede2['toDataURL']())}))})),'activeProject':activeProject},_0x5908a7=new Blob([JSON[_0x4e1098(0x221)](_0x8b5b84)],{'type':_0x4e1098(0x239)}),_0x5096e9=document['createElement']('a');_0x5096e9['download']='nezumi-sketch.msketch',_0x5096e9[_0x4e1098(0x1ee)]=URL[_0x4e1098(0x149)](_0x5908a7),_0x5096e9[_0x4e1098(0x243)]();}function saveProjectFile(){const _0x222dad=a0_0x42db8f,_0x3edfbf={'projects':projects[_0x222dad(0x247)](_0x4ba926=>({'width':_0x4ba926[_0x222dad(0x249)],'height':_0x4ba926[_0x222dad(0x245)],'name':_0x4ba926['name']||'','activeFrame':_0x4ba926[_0x222dad(0x20e)],'frames':_0x4ba926[_0x222dad(0x210)]['map'](_0x2c6f48=>({'activeLayer':_0x2c6f48[_0x222dad(0x1f5)],'layers':_0x2c6f48[_0x222dad(0x185)][_0x222dad(0x247)](_0x45b015=>_0x45b015['toDataURL']())}))})),'activeProject':activeProject},_0x5402fb=new Blob([JSON[_0x222dad(0x221)](_0x3edfbf)],{'type':'application/json'}),_0x52bdd1=document['createElement']('a');_0x52bdd1[_0x222dad(0x142)]='nezumi-sketch.msketch',_0x52bdd1[_0x222dad(0x1ee)]=URL['createObjectURL'](_0x5402fb),_0x52bdd1[_0x222dad(0x243)]();}async function saveProjectToIDB(){const _0x51ba05=a0_0x42db8f,_0x72484c={'projects':projects[_0x51ba05(0x247)](_0x2ed149=>({'width':_0x2ed149[_0x51ba05(0x249)],'height':_0x2ed149[_0x51ba05(0x245)],'name':_0x2ed149['name']||'','activeFrame':_0x2ed149[_0x51ba05(0x20e)],'frames':_0x2ed149['frames']['map'](_0x2211ae=>({'activeLayer':_0x2211ae[_0x51ba05(0x1f5)],'layers':_0x2211ae[_0x51ba05(0x185)][_0x51ba05(0x247)](_0x3372e6=>_0x3372e6['toDataURL']())}))})),'activeProject':activeProject};try{await idbSet(_0x51ba05(0x202),_0x72484c),console[_0x51ba05(0x15a)](_0x51ba05(0x147));}catch(_0x3ce731){console[_0x51ba05(0x178)](_0x51ba05(0x1c9),_0x3ce731);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x42db8f(0x23f)](a0_0x42db8f(0x196),_0x45ab3d=>{saveProjectToIDB();});function loadProjectFile(_0x494aa2){const _0xe270ab=a0_0x42db8f,_0x4f57a4=_0x494aa2[_0xe270ab(0x1a0)][_0xe270ab(0x180)][0x0];if(!_0x4f57a4)return;const _0x25b29f=new FileReader();_0x25b29f['onload']=function(_0xdb6dd1){const _0x500c38=_0xe270ab;try{const _0x1be7ac=JSON['parse'](_0xdb6dd1['target']['result']);projects=_0x1be7ac['projects'][_0x500c38(0x247)]((_0x4921f9,_0x5c7f82)=>{const _0x9ebd71=_0x500c38;let _0xe749a9=createProject(_0x4921f9['width'],_0x4921f9[_0x9ebd71(0x245)],_0x4921f9[_0x9ebd71(0x240)]||'画像'+(_0x5c7f82+0x1));return _0xe749a9[_0x9ebd71(0x210)]=_0x4921f9[_0x9ebd71(0x210)][_0x9ebd71(0x247)](_0x41d84d=>{const _0x489f78=_0x9ebd71;let _0x23c876={'layers':[],'activeLayer':_0x41d84d[_0x489f78(0x1f5)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x50da4f=0x0;_0x50da4f<_0x41d84d[_0x489f78(0x185)][_0x489f78(0x1aa)];_0x50da4f++){let _0x47ce8d=new Image();_0x47ce8d[_0x489f78(0x17e)]=_0x41d84d['layers'][_0x50da4f];let _0x59bd82=document[_0x489f78(0x1fa)](_0x489f78(0x1a2));_0x59bd82[_0x489f78(0x249)]=_0x4921f9['width']*cellSize,_0x59bd82[_0x489f78(0x245)]=_0x4921f9[_0x489f78(0x245)]*cellSize,_0x47ce8d[_0x489f78(0x1c1)]=()=>{const _0x576c93=_0x489f78;let _0x42f8aa=_0x59bd82[_0x576c93(0x1e5)]('2d');_0x42f8aa[_0x576c93(0x24e)](0x0,0x0,_0x59bd82[_0x576c93(0x249)],_0x59bd82[_0x576c93(0x245)]),_0x42f8aa[_0x576c93(0x138)](_0x47ce8d,0x0,0x0);},_0x47ce8d[_0x489f78(0x1c1)](),_0x23c876[_0x489f78(0x185)][_0x489f78(0x18e)](_0x59bd82),_0x23c876[_0x489f78(0x151)]['push']([]),_0x23c876['layerRedoStacks'][_0x489f78(0x18e)]([]);}return _0x23c876;}),_0xe749a9[_0x9ebd71(0x20e)]=_0x4921f9['activeFrame'],_0xe749a9[_0x9ebd71(0x240)]=_0x4921f9['name']||'画像'+(_0x5c7f82+0x1),_0xe749a9;}),activeProject=_0x1be7ac[_0x500c38(0x1c5)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x2c41df){alert('ファイルの読み込みに失敗しました。');}},_0x25b29f[_0xe270ab(0x204)](_0x4f57a4);}async function loadProjectFromIDB(){const _0x3b0af8=a0_0x42db8f;try{const _0x3bad1d=await idbGet(_0x3b0af8(0x202));if(!_0x3bad1d)return;projects=_0x3bad1d[_0x3b0af8(0x25c)][_0x3b0af8(0x247)]((_0xfdb774,_0x1af5e0)=>{const _0x19072b=_0x3b0af8;let _0x43bb1c=createProject(_0xfdb774[_0x19072b(0x249)],_0xfdb774[_0x19072b(0x245)],_0xfdb774[_0x19072b(0x240)]||'画像'+(_0x1af5e0+0x1));return _0x43bb1c[_0x19072b(0x210)]=_0xfdb774[_0x19072b(0x210)]['map'](_0x58cb84=>{const _0xfdf2da=_0x19072b;let _0x22c4c5={'layers':[],'activeLayer':_0x58cb84[_0xfdf2da(0x1f5)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x1ff045=0x0;_0x1ff045<_0x58cb84[_0xfdf2da(0x185)][_0xfdf2da(0x1aa)];_0x1ff045++){let _0x57a796=new Image();_0x57a796['src']=_0x58cb84[_0xfdf2da(0x185)][_0x1ff045];let _0x281890=document['createElement'](_0xfdf2da(0x1a2));_0x281890[_0xfdf2da(0x249)]=_0xfdb774[_0xfdf2da(0x249)]*cellSize,_0x281890['height']=_0xfdb774[_0xfdf2da(0x245)]*cellSize,_0x57a796[_0xfdf2da(0x1c1)]=()=>{const _0x199791=_0xfdf2da;let _0x2f1b2b=_0x281890[_0x199791(0x1e5)]('2d');_0x2f1b2b['clearRect'](0x0,0x0,_0x281890[_0x199791(0x249)],_0x281890[_0x199791(0x245)]),_0x2f1b2b[_0x199791(0x138)](_0x57a796,0x0,0x0);},_0x22c4c5['layers'][_0xfdf2da(0x18e)](_0x281890),_0x22c4c5['layerHistories'][_0xfdf2da(0x18e)]([]),_0x22c4c5[_0xfdf2da(0x19f)][_0xfdf2da(0x18e)]([]);}return _0x22c4c5;}),_0x43bb1c[_0x19072b(0x20e)]=_0xfdb774[_0x19072b(0x20e)],_0x43bb1c[_0x19072b(0x240)]=_0xfdb774['name']||'画像'+(_0x1af5e0+0x1),_0x43bb1c;}),activeProject=_0x3bad1d[_0x3b0af8(0x1c5)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool(_0x3b0af8(0x1f7)),console[_0x3b0af8(0x15a)](_0x3b0af8(0x23d));}catch(_0x3055bc){alert(_0x3b0af8(0x259)),console[_0x3b0af8(0x178)](_0x3055bc);}}function wait(_0x104983){return new Promise(_0x40af75=>setTimeout(_0x40af75,_0x104983));}function initCanvas(){const _0x21ac0b=a0_0x42db8f,_0x420b15=parseInt(0x10),_0x431508=parseInt(0x10);let _0x369992=getCurrentProject();_0x369992['width']=_0x420b15,_0x369992[_0x21ac0b(0x245)]=_0x431508,canvas['width']=_0x420b15*cellSize,canvas[_0x21ac0b(0x245)]=_0x431508*cellSize,_0x369992['layers']=[],_0x369992['layerHistories']=[],_0x369992[_0x21ac0b(0x19f)]=[];let _0xf93352=document[_0x21ac0b(0x1fa)]('canvas');_0xf93352['width']=_0x420b15*cellSize,_0xf93352[_0x21ac0b(0x245)]=_0x431508*cellSize,_0x369992[_0x21ac0b(0x185)][_0x21ac0b(0x18e)](_0xf93352),_0x369992[_0x21ac0b(0x151)]['push']([]),_0x369992[_0x21ac0b(0x19f)][_0x21ac0b(0x18e)]([]),_0x369992['activeLayer']=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x21ac0b(0x199)]=null,canvas[_0x21ac0b(0x1e7)]=null,canvas[_0x21ac0b(0x252)]=null,canvas[_0x21ac0b(0x13d)]=null,canvas['ontouchstart']=null,canvas[_0x21ac0b(0x1e2)]=null,canvas[_0x21ac0b(0x218)]=null,canvas[_0x21ac0b(0x1ae)]=null,canvas[_0x21ac0b(0x154)](_0x21ac0b(0x25a),handleTouchStart),canvas['removeEventListener'](_0x21ac0b(0x1a7),handleTouchMove),canvas[_0x21ac0b(0x154)](_0x21ac0b(0x1cb),handleTouchEnd),canvas['removeEventListener']('touchcancel',handleTouchEnd),canvas['onmousedown']=handleMouseDown,canvas['onmousemove']=handleMouseMove,canvas[_0x21ac0b(0x252)]=handleMouseUp,canvas[_0x21ac0b(0x13d)]=handleMouseUp,canvas['ontouchstart']=handleTouchStart,canvas[_0x21ac0b(0x1e2)]=handleTouchMove,canvas[_0x21ac0b(0x218)]=handleTouchEnd,canvas[_0x21ac0b(0x1ae)]=handleTouchEnd,canvas['addEventListener'](_0x21ac0b(0x25a),handleTouchStart,{'passive':![]}),canvas[_0x21ac0b(0x23f)](_0x21ac0b(0x1a7),handleTouchMove,{'passive':![]}),canvas[_0x21ac0b(0x23f)]('touchend',handleTouchEnd,{'passive':![]}),canvas[_0x21ac0b(0x23f)](_0x21ac0b(0x225),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x38da5c=a0_0x42db8f,_0x5e684a=document[_0x38da5c(0x194)]('color-palette');if(!_0x5e684a)return;_0x5e684a[_0x38da5c(0x171)]='',PALETTE_COLORS['forEach']((_0x1711af,_0x1184c1)=>{const _0xae9769=_0x38da5c,_0x3ff1d3=document[_0xae9769(0x1fa)](_0xae9769(0x1fd));_0x3ff1d3[_0xae9769(0x17b)]=_0xae9769(0x191);_0x1711af===_0xae9769(0x1e3)||_0x1711af===_0xae9769(0x1d1)?(_0x3ff1d3[_0xae9769(0x25f)][_0xae9769(0x187)]=_0xae9769(0x227),_0x3ff1d3[_0xae9769(0x192)]='透明',_0x3ff1d3[_0xae9769(0x171)]='<span\x20style=\x22font-size:13px;color:#888;\x22>透明</span>'):(_0x3ff1d3['style'][_0xae9769(0x187)]=_0x1711af,_0x3ff1d3[_0xae9769(0x192)]=_0x1711af);_0x3ff1d3[_0xae9769(0x16a)]=()=>{const _0x262060=_0xae9769;currentColor=_0x1711af,_0x1711af===_0x262060(0x1e3)||_0x1711af===_0x262060(0x1d1)?document[_0x262060(0x194)](_0x262060(0x23e))[_0x262060(0x21a)]='#000000':document[_0x262060(0x194)](_0x262060(0x23e))['value']=_0x1711af,document[_0x262060(0x255)]('.palette-color')[_0x262060(0x1e1)](_0x129d0c=>_0x129d0c[_0x262060(0x1fe)][_0x262060(0x1de)](_0x262060(0x1dc))),_0x3ff1d3['classList']['add']('selected');};if(_0x1184c1!==0x0){const _0x4e7627=document[_0xae9769(0x1fa)](_0xae9769(0x21f));_0x4e7627[_0xae9769(0x22e)]='×',_0x4e7627[_0xae9769(0x17b)]=_0xae9769(0x1a8),_0x4e7627['title']='この色をパレットから削除',_0x4e7627[_0xae9769(0x16a)]=_0x63b93f=>{const _0x4a5de7=_0xae9769;_0x63b93f[_0x4a5de7(0x201)](),PALETTE_COLORS[_0x4a5de7(0x1aa)]>0x2&&(PALETTE_COLORS[_0x4a5de7(0x1e9)](_0x1184c1,0x1),createPalette());},_0x3ff1d3['appendChild'](_0x4e7627);}_0x5e684a[_0xae9769(0x1ca)](_0x3ff1d3);});const _0x3dc3ef=document[_0x38da5c(0x1fa)](_0x38da5c(0x1fd));_0x3dc3ef['className']=_0x38da5c(0x244),_0x3dc3ef['title']='パレットに色を追加',_0x3dc3ef[_0x38da5c(0x171)]='+',_0x3dc3ef[_0x38da5c(0x16a)]=_0x3734f9=>{const _0xe6835=_0x38da5c;_0x3734f9[_0xe6835(0x201)]();const _0x117571=document[_0xe6835(0x1fa)](_0xe6835(0x153));_0x117571[_0xe6835(0x16c)]=_0xe6835(0x20c),_0x117571[_0xe6835(0x25f)][_0xe6835(0x15d)]=_0xe6835(0x242);let _0x21fb7e=![];_0x117571[_0xe6835(0x1cf)]=_0x40af76=>{const _0x2fe4ef=_0xe6835;!_0x21fb7e&&(PALETTE_COLORS[_0x2fe4ef(0x18e)](_0x40af76[_0x2fe4ef(0x1a0)][_0x2fe4ef(0x21a)]),createPalette(),_0x21fb7e=!![],_0x117571['remove']());},_0x117571[_0xe6835(0x23f)](_0xe6835(0x1b8),()=>{if(!_0x21fb7e)_0x117571['remove']();}),_0x117571[_0xe6835(0x23f)](_0xe6835(0x243),_0x1ad2e7=>_0x1ad2e7[_0xe6835(0x201)]()),document[_0xe6835(0x163)]['appendChild'](_0x117571),_0x117571[_0xe6835(0x200)](),_0x117571[_0xe6835(0x243)]();},_0x5e684a[_0x38da5c(0x1ca)](_0x3dc3ef);let _0x531d87=document[_0x38da5c(0x194)]('palette-toolbar');!_0x531d87&&(_0x531d87=document[_0x38da5c(0x1fa)](_0x38da5c(0x17d)),_0x531d87['id']=_0x38da5c(0x18b),_0x531d87[_0x38da5c(0x17b)]=_0x38da5c(0x18b),_0x5e684a[_0x38da5c(0x213)][_0x38da5c(0x1ca)](_0x531d87)),_0x531d87['innerHTML']='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn'+(currentTool===_0x38da5c(0x1f7)?_0x38da5c(0x14b):'')+_0x38da5c(0x164)+(currentTool===_0x38da5c(0x23b)?_0x38da5c(0x14b):'')+_0x38da5c(0x232)+(currentTool===_0x38da5c(0x1fc)?_0x38da5c(0x14b):'')+_0x38da5c(0x20b)+(penSize==0x1?'\x20selected':'')+_0x38da5c(0x23c)+(penSize==0x2?_0x38da5c(0x261):'')+_0x38da5c(0x1b5)+(penSize==0x3?_0x38da5c(0x261):'')+_0x38da5c(0x1d6)+(penSize==0x4?_0x38da5c(0x261):'')+_0x38da5c(0x1f6)+(penMode===_0x38da5c(0x170)?_0x38da5c(0x261):'')+_0x38da5c(0x152)+(penMode===_0x38da5c(0x1b1)?_0x38da5c(0x261):'')+_0x38da5c(0x24d)+Math[_0x38da5c(0x18c)](currentAlpha*0x64)+_0x38da5c(0x235)+Math['round'](currentAlpha*0x64)+_0x38da5c(0x175),_0x531d87[_0x38da5c(0x250)](_0x38da5c(0x1a4))['onchange']=_0x2ac057=>setPenSize(_0x2ac057[_0x38da5c(0x1a0)][_0x38da5c(0x21a)]),_0x531d87[_0x38da5c(0x250)](_0x38da5c(0x15c))[_0x38da5c(0x140)]=_0x94ce09=>setPenMode(_0x94ce09[_0x38da5c(0x1a0)][_0x38da5c(0x21a)]),_0x531d87[_0x38da5c(0x255)](_0x38da5c(0x251))[_0x38da5c(0x1e1)](_0x413d40=>{const _0x2301ef=_0x38da5c;_0x413d40[_0x2301ef(0x16a)]=()=>setTool(_0x413d40[_0x2301ef(0x13c)][_0x2301ef(0x1b3)]);}),_0x531d87[_0x38da5c(0x250)](_0x38da5c(0x1e0))[_0x38da5c(0x1cf)]=_0x418484=>{const _0x45985f=_0x38da5c;setAlpha(_0x418484[_0x45985f(0x1a0)]['value']),_0x531d87[_0x45985f(0x250)](_0x45985f(0x223))[_0x45985f(0x22e)]=_0x418484['target'][_0x45985f(0x21a)]+'%';let _0x53f611=document['getElementById']('alphaSlider'),_0x4ba051=document[_0x45985f(0x194)](_0x45985f(0x17f));if(_0x53f611)_0x53f611[_0x45985f(0x21a)]=_0x418484[_0x45985f(0x1a0)][_0x45985f(0x21a)];if(_0x4ba051)_0x4ba051[_0x45985f(0x22e)]=_0x418484['target']['value']+'%';};}function setAlpha(_0x3a2821){const _0x529781=a0_0x42db8f;let _0x442ad3=Math[_0x529781(0x211)](0x0,Math['min'](0x64,parseInt(_0x3a2821,0xa)||0x0));currentAlpha=_0x442ad3/0x64;let _0x26f766=document[_0x529781(0x194)]('alphaSlider'),_0x1bfdd0=document[_0x529781(0x194)](_0x529781(0x17f));if(_0x26f766)_0x26f766['value']=_0x442ad3;if(_0x1bfdd0)_0x1bfdd0[_0x529781(0x22e)]=_0x442ad3+'%';let _0x102ef6=document[_0x529781(0x194)](_0x529781(0x155)),_0x3bf07e=document['getElementById'](_0x529781(0x209));if(_0x102ef6)_0x102ef6[_0x529781(0x21a)]=_0x442ad3;if(_0x3bf07e)_0x3bf07e[_0x529781(0x22e)]=_0x442ad3+'%';}document[a0_0x42db8f(0x23f)]('DOMContentLoaded',()=>{const _0x4651f5=a0_0x42db8f,_0xb3249d=document[_0x4651f5(0x194)]('colorPicker');_0xb3249d&&(_0xb3249d[_0x4651f5(0x1cf)]=_0xa43c6f=>{const _0x1b9eff=_0x4651f5;currentColor=_0xa43c6f[_0x1b9eff(0x1a0)][_0x1b9eff(0x21a)],document[_0x1b9eff(0x255)](_0x1b9eff(0x15b))[_0x1b9eff(0x1e1)](_0x3b8e83=>_0x3b8e83[_0x1b9eff(0x1fe)][_0x1b9eff(0x1de)](_0x1b9eff(0x1dc)));});const _0x17d9d3=document['getElementById'](_0x4651f5(0x189)),_0x3ccbdb=document['getElementById']('alphaValue');_0x17d9d3&&_0x3ccbdb&&(_0x17d9d3[_0x4651f5(0x1cf)]=_0x20bb9c=>{const _0x4d49e6=_0x4651f5;setAlpha(_0x20bb9c[_0x4d49e6(0x1a0)][_0x4d49e6(0x21a)]),_0x3ccbdb['textContent']=_0x20bb9c[_0x4d49e6(0x1a0)][_0x4d49e6(0x21a)]+'%';let _0x547358=document['getElementById'](_0x4d49e6(0x155)),_0x33679c=document[_0x4d49e6(0x194)](_0x4d49e6(0x209));if(_0x547358)_0x547358['value']=_0x20bb9c[_0x4d49e6(0x1a0)][_0x4d49e6(0x21a)];if(_0x33679c)_0x33679c[_0x4d49e6(0x22e)]=_0x20bb9c[_0x4d49e6(0x1a0)][_0x4d49e6(0x21a)]+'%';});});async function convertToGIF(_0x19a611,_0x2981dd=0xc8,_0x249211=a0_0x42db8f(0x19e)){const _0x23aa79=a0_0x42db8f,_0x156bf5=new window[(_0x23aa79(0x15e))]({'workers':0x2,'quality':0xa,'workerScript':'lib/gif.worker.js'});_0x19a611[_0x23aa79(0x1e1)](_0x5e4595=>_0x156bf5[_0x23aa79(0x174)](_0x5e4595,{'delay':_0x2981dd})),_0x156bf5['on'](_0x23aa79(0x169),_0x1497ee=>{const _0x5cf622=_0x23aa79,_0xe9b504=URL['createObjectURL'](_0x1497ee),_0x12d0c1=document[_0x5cf622(0x1fa)]('a');_0x12d0c1[_0x5cf622(0x1ee)]=_0xe9b504,_0x12d0c1[_0x5cf622(0x142)]=_0x249211,document[_0x5cf622(0x163)][_0x5cf622(0x1ca)](_0x12d0c1),_0x12d0c1[_0x5cf622(0x243)](),setTimeout(()=>{const _0x2addd5=_0x5cf622;document[_0x2addd5(0x163)][_0x2addd5(0x228)](_0x12d0c1),URL[_0x2addd5(0x216)](_0xe9b504);},0x3e8);}),_0x156bf5[_0x23aa79(0x262)]();}function convertToAPNG(_0x2dec00,_0x3180ee,_0x33f1e1,_0xb1cbd2=0xc8,_0x1d24f8='nezumi-animation.apng'){const _0x4ec437=a0_0x42db8f,_0x526b03=[],_0x43ef06=[],_0x183e72=document[_0x4ec437(0x1fa)](_0x4ec437(0x1a2));_0x183e72[_0x4ec437(0x249)]=_0x3180ee,_0x183e72[_0x4ec437(0x245)]=_0x33f1e1;const _0xf5d78a=_0x183e72[_0x4ec437(0x1e5)]('2d');_0x2dec00['forEach'](_0x3bbf2c=>{const _0x15ab04=_0x4ec437;_0xf5d78a[_0x15ab04(0x24e)](0x0,0x0,_0x3180ee,_0x33f1e1),_0xf5d78a['drawImage'](_0x3bbf2c,0x0,0x0,_0x3180ee,_0x33f1e1);const _0x19329e=_0xf5d78a[_0x15ab04(0x25d)](0x0,0x0,_0x3180ee,_0x33f1e1)[_0x15ab04(0x1dd)]['buffer'];_0x526b03['push'](_0x19329e),_0x43ef06['push'](_0xb1cbd2);});const _0x4552e7=window[_0x4ec437(0x158)][_0x4ec437(0x20a)](_0x526b03,_0x3180ee,_0x33f1e1,0x0,_0x43ef06),_0x174fba=URL[_0x4ec437(0x149)](new Blob([_0x4552e7],{'type':_0x4ec437(0x1d2)})),_0x2003e1=document[_0x4ec437(0x1fa)]('a');_0x2003e1['href']=_0x174fba,_0x2003e1[_0x4ec437(0x142)]=_0x1d24f8,document['body'][_0x4ec437(0x1ca)](_0x2003e1),_0x2003e1[_0x4ec437(0x243)](),setTimeout(()=>{const _0x348a9c=_0x4ec437;document[_0x348a9c(0x163)]['removeChild'](_0x2003e1),URL[_0x348a9c(0x216)](_0x174fba);},0x3e8);}async function loadImages(_0x53cce5){const _0x23c870=a0_0x42db8f,_0x5cde2c=await Promise[_0x23c870(0x141)](_0x53cce5[_0x23c870(0x247)](_0x273b25=>{return new Promise(_0x1ca26a=>{const _0x25e9c3=a0_0x299f,_0x537391=new Image();_0x537391['crossOrigin']=_0x25e9c3(0x1ff),_0x537391['src']=_0x273b25,_0x537391[_0x25e9c3(0x1c1)]=()=>_0x1ca26a(_0x537391);});}));return _0x5cde2c;}function toggleSection(_0x2bf834){const _0x578b57=a0_0x42db8f,_0x5dc4f1=document[_0x578b57(0x194)](_0x2bf834),_0x11d4ed=_0x5dc4f1[_0x578b57(0x250)](_0x578b57(0x18f)),_0x77d370=_0x5dc4f1[_0x578b57(0x250)](_0x578b57(0x1c2));_0x11d4ed[_0x578b57(0x25f)][_0x578b57(0x15d)]==='none'?(_0x11d4ed[_0x578b57(0x25f)][_0x578b57(0x15d)]='',_0x77d370['textContent']='▼'):(_0x11d4ed[_0x578b57(0x25f)][_0x578b57(0x15d)]=_0x578b57(0x242),_0x77d370[_0x578b57(0x22e)]='▲');}document[a0_0x42db8f(0x23f)]('DOMContentLoaded',()=>{const _0x1102b5=a0_0x42db8f;document[_0x1102b5(0x255)](_0x1102b5(0x14e))['forEach'](_0x2d063e=>_0x2d063e[_0x1102b5(0x25f)]['display']=''),document[_0x1102b5(0x255)](_0x1102b5(0x1ac))['forEach'](_0x2183d0=>_0x2183d0[_0x1102b5(0x22e)]='▼');}),window['addEventListener']('resize',updateMenuBtnDisplay),document[a0_0x42db8f(0x23f)](a0_0x42db8f(0x1b9),updateMenuBtnDisplay);function toggleSideMenu(_0x181d01){const _0x31f832=a0_0x42db8f,_0x3cc877=document[_0x31f832(0x194)](_0x31f832(0x1f4)),_0x49c6c1=document[_0x31f832(0x194)](_0x31f832(0x1b6)),_0x5c69b5=document[_0x31f832(0x194)]('menu-toggle-btn'),_0x4fcb88=document[_0x31f832(0x194)](_0x31f832(0x1d8)),_0x27b597=_0x3cc877['classList'][_0x31f832(0x238)]('open');let _0x107782=typeof _0x181d01==='boolean'?_0x181d01:!_0x27b597;_0x107782?(_0x3cc877[_0x31f832(0x1fe)][_0x31f832(0x1e4)](_0x31f832(0x1ba)),_0x49c6c1[_0x31f832(0x1fe)][_0x31f832(0x1e4)](_0x31f832(0x20d)),document[_0x31f832(0x163)][_0x31f832(0x25f)][_0x31f832(0x24c)]=_0x31f832(0x1d3),document['body'][_0x31f832(0x25f)][_0x31f832(0x186)]=_0x31f832(0x242),window[_0x31f832(0x234)]<=0x384&&(_0x4fcb88['style'][_0x31f832(0x15d)]=_0x31f832(0x19a),_0x5c69b5[_0x31f832(0x25f)][_0x31f832(0x15d)]=_0x31f832(0x242))):(_0x3cc877[_0x31f832(0x1fe)][_0x31f832(0x1de)](_0x31f832(0x1ba)),_0x49c6c1[_0x31f832(0x1fe)][_0x31f832(0x1de)]('sidebar-open'),document[_0x31f832(0x163)][_0x31f832(0x25f)][_0x31f832(0x24c)]='',document[_0x31f832(0x163)][_0x31f832(0x25f)][_0x31f832(0x186)]='',window[_0x31f832(0x234)]<=0x384&&(_0x4fcb88[_0x31f832(0x25f)]['display']='none',_0x5c69b5['style'][_0x31f832(0x15d)]=_0x31f832(0x19a)));}function updateMenuBtnDisplay(){const _0x480d8f=a0_0x42db8f,_0x18b2ba=document[_0x480d8f(0x194)](_0x480d8f(0x1f4)),_0x381cee=document[_0x480d8f(0x194)](_0x480d8f(0x1b6)),_0x5c20e2=document[_0x480d8f(0x194)](_0x480d8f(0x1a3)),_0x19115a=document[_0x480d8f(0x194)](_0x480d8f(0x1d8));window[_0x480d8f(0x234)]>0x384?(_0x18b2ba[_0x480d8f(0x1fe)]['remove'](_0x480d8f(0x1ba)),_0x381cee[_0x480d8f(0x1fe)][_0x480d8f(0x1de)](_0x480d8f(0x20d)),_0x19115a[_0x480d8f(0x25f)][_0x480d8f(0x15d)]=_0x480d8f(0x242),_0x5c20e2[_0x480d8f(0x25f)][_0x480d8f(0x15d)]=_0x480d8f(0x242),document[_0x480d8f(0x163)][_0x480d8f(0x25f)][_0x480d8f(0x24c)]='',document['body'][_0x480d8f(0x25f)][_0x480d8f(0x186)]=''):_0x18b2ba[_0x480d8f(0x1fe)][_0x480d8f(0x238)](_0x480d8f(0x1ba))?(_0x19115a['style'][_0x480d8f(0x15d)]=_0x480d8f(0x19a),_0x5c20e2['style'][_0x480d8f(0x15d)]='none'):(_0x19115a[_0x480d8f(0x25f)][_0x480d8f(0x15d)]=_0x480d8f(0x242),_0x5c20e2[_0x480d8f(0x25f)]['display']=_0x480d8f(0x19a));}document['addEventListener']('click',function(_0x114294){const _0x4ea79c=a0_0x42db8f;if(window[_0x4ea79c(0x234)]>0x384)return;const _0x1150c4=document[_0x4ea79c(0x194)](_0x4ea79c(0x1f4)),_0x997a69=document['getElementById'](_0x4ea79c(0x1b6)),_0x464a90=document[_0x4ea79c(0x194)](_0x4ea79c(0x1a3)),_0x36f006=document[_0x4ea79c(0x194)](_0x4ea79c(0x1d8));!_0x1150c4[_0x4ea79c(0x238)](_0x114294[_0x4ea79c(0x1a0)])&&_0x114294[_0x4ea79c(0x1a0)]!==_0x464a90&&_0x114294[_0x4ea79c(0x1a0)]!==_0x36f006&&(_0x1150c4['classList'][_0x4ea79c(0x1de)](_0x4ea79c(0x1ba)),_0x997a69['classList'][_0x4ea79c(0x1de)](_0x4ea79c(0x20d)),_0x36f006[_0x4ea79c(0x25f)][_0x4ea79c(0x15d)]=_0x4ea79c(0x242),_0x464a90[_0x4ea79c(0x25f)][_0x4ea79c(0x15d)]=_0x4ea79c(0x19a),document[_0x4ea79c(0x163)][_0x4ea79c(0x25f)]['overflow']='',document[_0x4ea79c(0x163)][_0x4ea79c(0x25f)][_0x4ea79c(0x186)]='');}),(function(){const _0x3f65a5=a0_0x42db8f;try{(location[_0x3f65a5(0x1c6)][_0x3f65a5(0x22f)](/index\.html$/)||location[_0x3f65a5(0x1c6)]==='/'||location[_0x3f65a5(0x1c6)]===_0x3f65a5(0x1f1))&&(!localStorage[_0x3f65a5(0x22d)](_0x3f65a5(0x22a))&&(localStorage[_0x3f65a5(0x1ed)](_0x3f65a5(0x22a),'1'),location[_0x3f65a5(0x1ee)]=_0x3f65a5(0x246)));}catch(_0x4dbf37){}}());