(function(_0x571608,_0x38cbef){const _0xe64f4=_0x9378,_0xb75c9d=_0x571608();while(!![]){try{const _0x581e72=-parseInt(_0xe64f4(0x90))/0x1+-parseInt(_0xe64f4(0xb2))/0x2+parseInt(_0xe64f4(0xa0))/0x3+parseInt(_0xe64f4(0xc2))/0x4+parseInt(_0xe64f4(0x99))/0x5+-parseInt(_0xe64f4(0xd5))/0x6*(parseInt(_0xe64f4(0xa2))/0x7)+-parseInt(_0xe64f4(0xc0))/0x8*(-parseInt(_0xe64f4(0x8f))/0x9);if(_0x581e72===_0x38cbef)break;else _0xb75c9d['push'](_0xb75c9d['shift']());}catch(_0x1add3e){_0xb75c9d['push'](_0xb75c9d['shift']());}}}(_0x1dd5,0x93c30));const _0x1d0c01=(function(){let _0x133eb5=!![];return function(_0x102b06,_0x413e32){const _0x25afff=_0x133eb5?function(){const _0x3e2437=_0x9378;if(_0x413e32){const _0x11ff30=_0x413e32[_0x3e2437(0xa3)](_0x102b06,arguments);return _0x413e32=null,_0x11ff30;}}:function(){};return _0x133eb5=![],_0x25afff;};}()),_0x22683e=_0x1d0c01(this,function(){const _0x1ed8cb=_0x9378;return _0x22683e[_0x1ed8cb(0xc6)]()[_0x1ed8cb(0xd8)](_0x1ed8cb(0xc4))[_0x1ed8cb(0xc6)]()[_0x1ed8cb(0xd0)](_0x22683e)[_0x1ed8cb(0xd8)]('(((.+)+)+)+$');});_0x22683e();function hexToRgbaCss(_0x26dd49,_0x5f0e9f){const _0x549b11=_0x9378;let _0x237027,_0x1e79c7,_0x50d3e5,_0x2afac5=_0x5f0e9f;if(_0x26dd49['length']===0x9)_0x237027=parseInt(_0x26dd49[_0x549b11(0xad)](0x1,0x3),0x10),_0x1e79c7=parseInt(_0x26dd49['slice'](0x3,0x5),0x10),_0x50d3e5=parseInt(_0x26dd49['slice'](0x5,0x7),0x10),_0x2afac5=parseInt(_0x26dd49[_0x549b11(0xad)](0x7,0x9),0x10)/0xff;else{if(_0x26dd49[_0x549b11(0xaf)]===0x7)_0x237027=parseInt(_0x26dd49[_0x549b11(0xad)](0x1,0x3),0x10),_0x1e79c7=parseInt(_0x26dd49['slice'](0x3,0x5),0x10),_0x50d3e5=parseInt(_0x26dd49[_0x549b11(0xad)](0x5,0x7),0x10);else{if(_0x26dd49['length']===0x4)_0x237027=parseInt(_0x26dd49[0x1]+_0x26dd49[0x1],0x10),_0x1e79c7=parseInt(_0x26dd49[0x2]+_0x26dd49[0x2],0x10),_0x50d3e5=parseInt(_0x26dd49[0x3]+_0x26dd49[0x3],0x10);else return _0x26dd49;}}return _0x549b11(0xb3)+_0x237027+','+_0x1e79c7+','+_0x50d3e5+','+_0x2afac5+')';}function hexToRgba(_0x4e4293,_0x1c5013=0x1){const _0xacd3ff=_0x9378;if(_0x4e4293===_0xacd3ff(0xb8)||_0x4e4293===_0xacd3ff(0xa6))return[0x0,0x0,0x0,0x0];_0x4e4293=_0x4e4293[_0xacd3ff(0xc1)]('#','');if(_0x4e4293[_0xacd3ff(0xaf)]===0x3)_0x4e4293=_0x4e4293[_0xacd3ff(0xca)]('')[_0xacd3ff(0x98)](_0x564b31=>_0x564b31+_0x564b31)[_0xacd3ff(0xb7)]('');if(_0x4e4293['length']===0x8){const _0x644e13=parseInt(_0x4e4293[_0xacd3ff(0xad)](0x0,0x2),0x10),_0x2d0739=parseInt(_0x4e4293[_0xacd3ff(0xad)](0x2,0x4),0x10),_0x178578=parseInt(_0x4e4293[_0xacd3ff(0xad)](0x4,0x6),0x10),_0x23df88=parseInt(_0x4e4293['slice'](0x6,0x8),0x10);return[_0x644e13,_0x2d0739,_0x178578,_0x23df88];}let _0x4dfd3b=parseInt(_0x4e4293,0x10);return[_0x4dfd3b>>0x10&0xff,_0x4dfd3b>>0x8&0xff,_0x4dfd3b&0xff,Math['round'](0xff*_0x1c5013)];}function _0x9378(_0x3bb97,_0x24da9c){_0x3bb97=_0x3bb97-0x8d;const _0x7a456=_0x1dd5();let _0x22683e=_0x7a456[_0x3bb97];return _0x22683e;}function _0x1dd5(){const _0x379cce=['.palette-color','absolute','button','50344UZtwrI','replace','3387020EXyrOg','style','(((.+)+)+)+$','getContext','toString','classList','8px','hidden','split','width','min','div','scanColorsPanel','createElement','constructor','getElementById','toLowerCase','get','className','41154VlQEFB','firstChild','floor','search','title','borderRadius','splice','72yYcguy','734997OuTrJU','data','querySelectorAll','<span\x20style=\x22position:relative;z-index:1;font-size:13px;color:#888;\x22>透明</span>','appendChild','padStart','overflow','innerHTML','map','3417935qaBWUH','test','color-palette','パレットに色を追加','entries','round','remove','2364735cSKiKs','background','133XzyBKO','apply','selected','add','#00000000','getImageData','inset','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','set','\x20透明度','insertBefore','slice','palette-color','length','forEach','unshift','1796762eDQstr','rgba(','height','count','position','join','transparent','textContent','from','onclick','stopPropagation'];_0x1dd5=function(){return _0x379cce;};return _0x1dd5();}function colorsMatch(_0x3b99b8,_0x3f6b9b){return _0x3b99b8[0x0]===_0x3f6b9b[0x0]&&_0x3b99b8[0x1]===_0x3f6b9b[0x1]&&_0x3b99b8[0x2]===_0x3f6b9b[0x2]&&_0x3b99b8[0x3]===_0x3f6b9b[0x3];}function createPalette(){const _0x95201c=_0x9378,_0x5624db=document['getElementById'](_0x95201c(0x9b));if(!_0x5624db)return;_0x5624db[_0x95201c(0x97)]='',PALETTE_COLORS['forEach']((_0x28635e,_0x2b94e8)=>{const _0x3dc123=_0x95201c,_0x3844b7=document[_0x3dc123(0xcf)](_0x3dc123(0xbf));_0x3844b7[_0x3dc123(0xd4)]=_0x3dc123(0xae),_0x3844b7[_0x3dc123(0xc3)][_0x3dc123(0xb6)]='relative',_0x3844b7[_0x3dc123(0xc3)][_0x3dc123(0x96)]=_0x3dc123(0xc9),_0x3844b7[_0x3dc123(0x97)]='';let _0x586f10=document[_0x3dc123(0xcf)](_0x3dc123(0xcd));_0x586f10['style'][_0x3dc123(0xb6)]='absolute',_0x586f10[_0x3dc123(0xc3)][_0x3dc123(0xa8)]='0',_0x586f10[_0x3dc123(0xc3)][_0x3dc123(0x8d)]=_0x3dc123(0xc8),_0x586f10[_0x3dc123(0xc3)][_0x3dc123(0xa1)]=_0x3dc123(0xa9);let _0x2faa6f=document[_0x3dc123(0xcf)]('div');_0x2faa6f[_0x3dc123(0xc3)][_0x3dc123(0xb6)]=_0x3dc123(0xbe),_0x2faa6f['style']['inset']='0',_0x2faa6f['style'][_0x3dc123(0x8d)]=_0x3dc123(0xc8);if(_0x28635e===_0x3dc123(0xb8)||_0x28635e===_0x3dc123(0xa6))_0x2faa6f[_0x3dc123(0xc3)][_0x3dc123(0xa1)]='none',_0x3844b7['title']='透明',_0x3844b7['innerHTML']=_0x3dc123(0x93);else{if(/^#([0-9a-f]{8})$/i[_0x3dc123(0x9a)](_0x28635e)){_0x2faa6f['style'][_0x3dc123(0xa1)]=hexToRgbaCss(_0x28635e,0x1);const [_0x197b66,_0x2038d0,_0x24b3ac,_0x56d25a]=hexToRgba(_0x28635e),_0x5a89dc=_0x56d25a/0xff;_0x3844b7[_0x3dc123(0xd9)]=rgbaToHex(_0x197b66,_0x2038d0,_0x24b3ac)+'\x20'+Math[_0x3dc123(0x9e)](_0x5a89dc*0x64)+'%';}else _0x28635e[_0x3dc123(0xd2)]()===currentColor['toLowerCase']()&&currentAlpha<0x1?(_0x2faa6f['style']['background']=hexToRgbaCss(_0x28635e,currentAlpha),_0x3844b7['title']=_0x28635e+_0x3dc123(0xab)+Math[_0x3dc123(0x9e)](currentAlpha*0x64)+'%'):(_0x2faa6f[_0x3dc123(0xc3)][_0x3dc123(0xa1)]=_0x28635e,_0x3844b7[_0x3dc123(0xd9)]=_0x28635e);}_0x3844b7[_0x3dc123(0x94)](_0x586f10),_0x3844b7[_0x3dc123(0x94)](_0x2faa6f),_0x3844b7[_0x3dc123(0xbb)]=()=>{const _0x584e33=_0x3dc123;if(_0x28635e==='transparent'||_0x28635e==='#00000000')currentColor=_0x584e33(0xb8),currentAlpha=0x0;else{if(/^#([0-9a-f]{8})$/i[_0x584e33(0x9a)](_0x28635e)){const [_0x144aea,_0x5b18b7,_0x71736,_0x33ae68]=hexToRgba(_0x28635e);currentAlpha=_0x33ae68/0xff,currentColor=rgbaToHex(_0x144aea,_0x5b18b7,_0x71736);}else currentColor=_0x28635e,currentAlpha=0x1;}updateCurrentColorSwatch(),document[_0x584e33(0x92)](_0x584e33(0xbd))[_0x584e33(0xb0)](_0xca1b29=>_0xca1b29[_0x584e33(0xc7)][_0x584e33(0x9f)](_0x584e33(0xa4))),_0x3844b7[_0x584e33(0xc7)][_0x584e33(0xa5)](_0x584e33(0xa4));};if(_0x2b94e8!==0x0){const _0xdb54f8=document[_0x3dc123(0xcf)]('span');_0xdb54f8[_0x3dc123(0xb9)]='×',_0xdb54f8[_0x3dc123(0xd4)]='palette-del-btn',_0xdb54f8[_0x3dc123(0xd9)]='この色をパレットから削除',_0xdb54f8['onclick']=_0x37a5b5=>{const _0x1e14e3=_0x3dc123;_0x37a5b5['stopPropagation'](),PALETTE_COLORS[_0x1e14e3(0xaf)]>0x2&&(PALETTE_COLORS[_0x1e14e3(0x8e)](_0x2b94e8,0x1),createPalette());},_0x3844b7[_0x3dc123(0x94)](_0xdb54f8);}_0x5624db[_0x3dc123(0x94)](_0x3844b7);});const _0x44f168=document['createElement'](_0x95201c(0xbf));_0x44f168[_0x95201c(0xd4)]='palette-add-btn',_0x44f168[_0x95201c(0xd9)]=_0x95201c(0x9c),_0x44f168['innerHTML']='+',_0x44f168[_0x95201c(0xbb)]=_0x2d02f5=>{const _0x520854=_0x95201c;_0x2d02f5[_0x520854(0xbc)](),showColorPickerDialog({'color':currentColor===_0x520854(0xb8)?'#000000':currentColor,'alpha':currentAlpha,'okLabel':'追加','onChange':()=>{},'onOk':({hex:_0x343389,rgba:_0x24d4cb,a:_0x190f53})=>{const _0x5cbdf4=_0x520854;if(_0x190f53===0x0){if(PALETTE_COLORS[0x0]==='transparent')PALETTE_COLORS[_0x5cbdf4(0x8e)](0x1,0x0,_0x5cbdf4(0xb8));else PALETTE_COLORS[_0x5cbdf4(0xb1)](_0x5cbdf4(0xb8));}else{const _0x517099=Math['round'](_0x190f53*0xff),_0x33abd7=_0x517099[_0x5cbdf4(0xc6)](0x10)[_0x5cbdf4(0x95)](0x2,'0');PALETTE_COLORS[_0x5cbdf4(0xb1)](''+_0x343389+_0x33abd7);}if(PALETTE_COLORS[_0x5cbdf4(0xaf)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x5cbdf4(0xad)](0x0,0x18);savePaletteToDB(),createPalette();}});},_0x5624db[_0x95201c(0xac)](_0x44f168,_0x5624db[_0x95201c(0xd6)]);const _0x54ce7f=document[_0x95201c(0xd1)](_0x95201c(0xce));if(_0x54ce7f)_0x54ce7f['style']['display']='';}function scanImageColors(){const _0x5e661a=_0x9378,_0x5ae618=getCurrentProject(),_0x4a388f=getCurrentFrame();if(!_0x5ae618||!_0x4a388f)return[];const _0x1afd8b=new Map(),_0x28af7f=_0x5ae618[_0x5e661a(0xcb)],_0x1d35b9=_0x5ae618['height'],_0x342185=canvas[_0x5e661a(0xc5)]('2d',{'willReadFrequently':!![]});for(let _0x55f475=0x0;_0x55f475<_0x1d35b9;_0x55f475++){for(let _0x2d979d=0x0;_0x2d979d<_0x28af7f;_0x2d979d++){const _0x4ca5e7=Math['min'](Math[_0x5e661a(0xd7)](_0x2d979d*cellSize+cellSize/0x2),canvas[_0x5e661a(0xcb)]-0x1),_0x2d0ba0=Math[_0x5e661a(0xcc)](Math[_0x5e661a(0xd7)](_0x55f475*cellSize+cellSize/0x2),canvas[_0x5e661a(0xb4)]-0x1),_0x4f22a8=_0x342185[_0x5e661a(0xa7)](_0x4ca5e7,_0x2d0ba0,0x1,0x1)[_0x5e661a(0x91)],_0x126034=_0x4f22a8[0x0]+','+_0x4f22a8[0x1]+','+_0x4f22a8[0x2]+','+_0x4f22a8[0x3];_0x1afd8b[_0x5e661a(0xaa)](_0x126034,(_0x1afd8b[_0x5e661a(0xd3)](_0x126034)||0x0)+0x1);}}const _0xef9300=Array[_0x5e661a(0xba)](_0x1afd8b[_0x5e661a(0x9d)]())[_0x5e661a(0x98)](([_0x509eb0,_0x2d550f])=>{const _0x2565e7=_0x5e661a,[_0x414587,_0x4d1be9,_0x3b76d1,_0x7c60b6]=_0x509eb0['split'](',')[_0x2565e7(0x98)](_0x167abd=>parseInt(_0x167abd,0xa));return{'r':_0x414587,'g':_0x4d1be9,'b':_0x3b76d1,'a':_0x7c60b6,'count':_0x2d550f};})['sort']((_0x5299c5,_0x46f3e6)=>_0x46f3e6[_0x5e661a(0xb5)]-_0x5299c5[_0x5e661a(0xb5)]);return _0xef9300;}function rgbaToHex(_0x162dde,_0x5ad916,_0x5cc57d){const _0x1a1bcf=_0x9378;return'#'+[_0x162dde,_0x5ad916,_0x5cc57d][_0x1a1bcf(0x98)](_0x200a9b=>_0x200a9b['toString'](0x10)['padStart'](0x2,'0'))[_0x1a1bcf(0xb7)]('');}