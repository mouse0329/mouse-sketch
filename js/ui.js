(function(_0x4bc10b,_0x568793){const _0x14f6ea=_0x50ad,_0x1a01be=_0x4bc10b();while(!![]){try{const _0x43aed7=parseInt(_0x14f6ea(0x23b))/0x1+parseInt(_0x14f6ea(0x237))/0x2+parseInt(_0x14f6ea(0x26a))/0x3*(parseInt(_0x14f6ea(0x1f3))/0x4)+-parseInt(_0x14f6ea(0x262))/0x5+-parseInt(_0x14f6ea(0x215))/0x6*(-parseInt(_0x14f6ea(0x27a))/0x7)+parseInt(_0x14f6ea(0x20a))/0x8*(-parseInt(_0x14f6ea(0x1f9))/0x9)+-parseInt(_0x14f6ea(0x24e))/0xa;if(_0x43aed7===_0x568793)break;else _0x1a01be['push'](_0x1a01be['shift']());}catch(_0x4e2678){_0x1a01be['push'](_0x1a01be['shift']());}}}(_0x5143,0xd3f65));function _0x5143(){const _0x4f0daf=['center','objectStoreNames','length','forEach','activeLayer','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíË§áË£Ω','appendChild','„É¨„Ç§„É§„Éº','project-btn','dark','#newProjName','innerWidth','8px','menu-toggle-btn-close','classList','clearRect','\x20active','2438910ZiVXel','flex','ÈùûË°®Á§∫„Å´„Åô„Çã','3000','toolsToggleBtn','üëÅÔ∏è','round','#newProjOkBtn','489588bMqlDG','#dlgTransparentBtn','querySelectorAll','background','layer-item','floor','sidebar-open','frames','style','\x20ÈÄèÊòéÂ∫¶','frameCount','touchAction','save','alignItems','sidebar','color-dialog','1228479rTpWFj','\x22\x20style=\x22width:72px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgTransparentBtn\x22\x20type=\x22button\x22\x20style=\x22margin-left:8px;\x22>ÈÄèÊòé</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:8px;justify-content:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgOkBtn\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgCancelBtn\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','fixed','search','.toggle-btn','drawImage','oncontextmenu','disabled','px,\x20','touchstart','onerror','hidden','activeFrame','transparent','frame-item','className','rgba(0,0,0,0.25)','top','onsuccess','new-project-dialog','#dlgOkBtn','.section-content','active','stopPropagation','main-container','querySelector','12yDipuy','addEventListener','transform','display','canvas','createElement','243603HDMhEs','IndexedDB\x20„ÅÆ„Çπ„Éà„Ç¢„ÅåÂ≠òÂú®„Åó„Å™„ÅÑ„Åü„ÇÅÂÜç‰ΩúÊàê„ÅåÂøÖË¶Å„Åß„Åô','relative','(((.+)+)+)+$','remove','open','inline-block','constructor','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','min','width','#newProjH','apply','project-item','max','height','Ë°®Á§∫„Åô„Çã','8XefVLY','getContext','warn','layer-info','data-theme','title','target','value','frame-btn','button','#dlgColor','12FfmYnF','add','currentColorInfoText','inset','none','left','frameList','justifyContent','frame-thumb','.palette-color','‰∏ä„Å´ÁßªÂãï','‰∏ã„Å´ÁßªÂãï','100vh','project-name','body','layer-label','100vw','close','rgba(0,0,0,0.3)','currentColorSwatch','layerCount','touchend','startCell','touchcancel','result','„Ç≥„Éû)','layer-btn','offsetCells','click','deleteDatabase','translate(','layer-actions','menu-toggle-btn','overflow','1665848EnXrpD','contains','layers','#newProjW','622917TDWVKe','visible','div','Êñ∞„Åó„ÅÑÂêçÂâç„ÇíÂÖ•Âäõ','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÈÄèÊòéÂ∫¶(0-100):\x20<input\x20type=\x22number\x22\x20id=\x22dlgAlpha\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:var(--surface);\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','textContent','getElementById','position','#dlgCancelBtn','span','layer-btn\x20layer-vis-btn','innerHTML','trim','zIndex','#000000','name','absolute','block','9133770BYtwRg','#newProjCancelBtn','onclick'];_0x5143=function(){return _0x4f0daf;};return _0x5143();}const _0x57cd3a=(function(){let _0x2e2a54=!![];return function(_0x3029b8,_0x44dc2b){const _0x4b06f9=_0x2e2a54?function(){const _0x3ea9ea=_0x50ad;if(_0x44dc2b){const _0x131d00=_0x44dc2b[_0x3ea9ea(0x205)](_0x3029b8,arguments);return _0x44dc2b=null,_0x131d00;}}:function(){};return _0x2e2a54=![],_0x4b06f9;};}()),_0x37099c=_0x57cd3a(this,function(){const _0x15afc3=_0x50ad;return _0x37099c['toString']()[_0x15afc3(0x27d)](_0x15afc3(0x1fc))['toString']()[_0x15afc3(0x200)](_0x37099c)[_0x15afc3(0x27d)]('(((.+)+)+)+$');});_0x37099c();function updateCurrentColorSwatch(){const _0x4b7b27=_0x50ad,_0x3295ec=document[_0x4b7b27(0x242)](_0x4b7b27(0x228));if(!_0x3295ec)return;const _0x59e8f4=document[_0x4b7b27(0x242)](_0x4b7b27(0x217));_0x3295ec[_0x4b7b27(0x247)]='',_0x3295ec['style'][_0x4b7b27(0x243)]=_0x4b7b27(0x1fb),_0x3295ec['style'][_0x4b7b27(0x236)]=_0x4b7b27(0x1e4);let _0x5dc17e=document[_0x4b7b27(0x1f8)](_0x4b7b27(0x23d));_0x5dc17e['style']['position']=_0x4b7b27(0x24c),_0x5dc17e[_0x4b7b27(0x272)][_0x4b7b27(0x218)]='0',_0x5dc17e[_0x4b7b27(0x272)]['borderRadius']='8px',_0x5dc17e[_0x4b7b27(0x272)][_0x4b7b27(0x26d)]=_0x4b7b27(0x201);let _0x6a4ff8=document['createElement'](_0x4b7b27(0x23d));_0x6a4ff8[_0x4b7b27(0x272)][_0x4b7b27(0x243)]=_0x4b7b27(0x24c),_0x6a4ff8[_0x4b7b27(0x272)][_0x4b7b27(0x218)]='0',_0x6a4ff8[_0x4b7b27(0x272)]['borderRadius']=_0x4b7b27(0x25d);const _0x39a6d1=Math['round']((currentAlpha||0x0)*0x64);if(currentColor===_0x4b7b27(0x1e6)||currentAlpha===0x0){_0x6a4ff8[_0x4b7b27(0x272)][_0x4b7b27(0x26d)]=_0x4b7b27(0x219),_0x3295ec['title']='ÈÄèÊòé';if(_0x59e8f4)_0x59e8f4[_0x4b7b27(0x241)]='ÈÄèÊòé\x20/\x200%';}else{_0x6a4ff8[_0x4b7b27(0x272)][_0x4b7b27(0x26d)]=hexToRgbaCss(currentColor,currentAlpha),_0x3295ec[_0x4b7b27(0x20f)]=currentAlpha<0x1?currentColor+_0x4b7b27(0x273)+_0x39a6d1+'%':currentColor;if(_0x59e8f4)_0x59e8f4['textContent']=currentColor+'\x20/\x20'+_0x39a6d1+'%';}_0x3295ec['appendChild'](_0x5dc17e),_0x3295ec[_0x4b7b27(0x257)](_0x6a4ff8);}function updateProjectUI(){const _0x1a97f8=_0x50ad,_0x4e8357=document[_0x1a97f8(0x242)]('projectList');_0x4e8357[_0x1a97f8(0x247)]='';for(let _0x54eb76=0x0;_0x54eb76<projects[_0x1a97f8(0x253)];_0x54eb76++){const _0xefcecc=document[_0x1a97f8(0x1f8)](_0x1a97f8(0x23d));_0xefcecc[_0x1a97f8(0x1e8)]=_0x1a97f8(0x206)+(_0x54eb76===activeProject?_0x1a97f8(0x261):''),_0xefcecc[_0x1a97f8(0x250)]=()=>{activeProject=_0x54eb76,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();},_0xefcecc[_0x1a97f8(0x280)]=_0x59d13b=>{_0x59d13b['preventDefault'](),showRenameProjectDialog(_0x54eb76);};let _0x581a9b=null;const _0x4dc19b=()=>{_0x581a9b=setTimeout(()=>{showRenameProjectDialog(_0x54eb76);},0x258);},_0xfb31d8=()=>{if(_0x581a9b)clearTimeout(_0x581a9b);_0x581a9b=null;};_0xefcecc[_0x1a97f8(0x1f4)](_0x1a97f8(0x1e2),_0x4dc19b,{'passive':!![]}),_0xefcecc[_0x1a97f8(0x1f4)](_0x1a97f8(0x22a),_0xfb31d8,{'passive':!![]}),_0xefcecc[_0x1a97f8(0x1f4)](_0x1a97f8(0x22c),_0xfb31d8,{'passive':!![]});const _0x10c312=document[_0x1a97f8(0x1f8)]('span');_0x10c312[_0x1a97f8(0x1e8)]=_0x1a97f8(0x222),_0x10c312['textContent']=projects[_0x54eb76][_0x1a97f8(0x24b)]||'ÁîªÂÉè'+(_0x54eb76+0x1),_0x10c312[_0x1a97f8(0x20f)]='„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ',_0x10c312['onclick']=_0x156ea7=>{_0x156ea7['stopPropagation'](),editProjectName(_0x54eb76,_0x10c312);},_0xefcecc[_0x1a97f8(0x257)](_0x10c312);const _0x586699=document[_0x1a97f8(0x1f8)](_0x1a97f8(0x213));_0x586699[_0x1a97f8(0x241)]='ÂâäÈô§',_0x586699['className']=_0x1a97f8(0x259),_0x586699[_0x1a97f8(0x281)]=projects[_0x1a97f8(0x253)]===0x1,_0x586699[_0x1a97f8(0x250)]=_0x3c298a=>{const _0x4201d9=_0x1a97f8;_0x3c298a[_0x4201d9(0x1f0)](),removeProjectAt(_0x54eb76);},_0xefcecc[_0x1a97f8(0x257)](_0x586699),_0x4e8357[_0x1a97f8(0x257)](_0xefcecc);}document[_0x1a97f8(0x242)]('projectCount')['textContent']='('+projects[_0x1a97f8(0x253)]+'Êûö)';}function _0x50ad(_0x5c41a5,_0x1a0036){_0x5c41a5=_0x5c41a5-0x1e2;const _0x824be9=_0x5143();let _0x37099c=_0x824be9[_0x5c41a5];return _0x37099c;}function showRenameProjectDialog(_0x118036){const _0x5984f2=_0x50ad,_0x4c5488=projects[_0x118036],_0x239e32=_0x4c5488&&_0x4c5488[_0x5984f2(0x24b)]?_0x4c5488[_0x5984f2(0x24b)]:'ÁîªÂÉè'+(_0x118036+0x1),_0x518c20=prompt(_0x5984f2(0x23e),_0x239e32);if(_0x518c20==null)return;const _0x502d23=_0x518c20[_0x5984f2(0x248)]();projects[_0x118036][_0x5984f2(0x24b)]=_0x502d23||_0x239e32,updateProjectUI();}function showNewProjectDialog(_0x5637d0){const _0x137359=_0x50ad;let _0x7a1b59=document[_0x137359(0x242)]('new-project-dialog');if(_0x7a1b59)_0x7a1b59[_0x137359(0x1fd)]();const _0x2e93ca=document[_0x137359(0x1f8)]('div');_0x2e93ca['id']=_0x137359(0x1ec),_0x2e93ca[_0x137359(0x272)][_0x137359(0x243)]=_0x137359(0x27c),_0x2e93ca[_0x137359(0x272)]['left']='0',_0x2e93ca[_0x137359(0x272)][_0x137359(0x1ea)]='0',_0x2e93ca[_0x137359(0x272)][_0x137359(0x203)]='100vw',_0x2e93ca[_0x137359(0x272)]['height']=_0x137359(0x221),_0x2e93ca[_0x137359(0x272)][_0x137359(0x26d)]=_0x137359(0x227),_0x2e93ca[_0x137359(0x272)]['display']=_0x137359(0x263),_0x2e93ca[_0x137359(0x272)][_0x137359(0x277)]='center',_0x2e93ca['style'][_0x137359(0x21c)]=_0x137359(0x251),_0x2e93ca[_0x137359(0x272)][_0x137359(0x249)]=_0x137359(0x265),_0x2e93ca['innerHTML']=_0x137359(0x240)+(projects['length']+0x1)+'\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document['body']['appendChild'](_0x2e93ca),_0x2e93ca[_0x137359(0x1f2)](_0x137359(0x269))[_0x137359(0x250)]=()=>{const _0x5cea2f=_0x137359,_0x1fd373=parseInt(_0x2e93ca[_0x5cea2f(0x1f2)](_0x5cea2f(0x23a))[_0x5cea2f(0x211)],0xa),_0x10b1c1=parseInt(_0x2e93ca[_0x5cea2f(0x1f2)](_0x5cea2f(0x204))[_0x5cea2f(0x211)],0xa),_0x2ea495=_0x2e93ca[_0x5cea2f(0x1f2)](_0x5cea2f(0x25b))[_0x5cea2f(0x211)][_0x5cea2f(0x248)]();_0x2e93ca['remove']();if(_0x5637d0)_0x5637d0(_0x1fd373,_0x10b1c1,_0x2ea495);},_0x2e93ca[_0x137359(0x1f2)](_0x137359(0x24f))[_0x137359(0x250)]=()=>{const _0x55b71f=_0x137359;_0x2e93ca[_0x55b71f(0x1fd)]();};}function updateFrameUI(){const _0x3dde5d=_0x50ad,_0x458706=document[_0x3dde5d(0x242)](_0x3dde5d(0x21b)),_0x501ee4=getCurrentProject();if(!_0x501ee4||!_0x501ee4['frames'])return;_0x458706['innerHTML']='';for(let _0x533349=0x0;_0x533349<_0x501ee4[_0x3dde5d(0x271)]['length'];_0x533349++){const _0x37ac8f=document[_0x3dde5d(0x1f8)]('div');_0x37ac8f[_0x3dde5d(0x1e8)]=_0x3dde5d(0x1e7)+(_0x533349===_0x501ee4[_0x3dde5d(0x1e5)]?_0x3dde5d(0x261):''),_0x37ac8f[_0x3dde5d(0x250)]=()=>{_0x501ee4['activeFrame']=_0x533349,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x66c4d4=document[_0x3dde5d(0x1f8)](_0x3dde5d(0x1f7));_0x66c4d4['className']=_0x3dde5d(0x21d),_0x66c4d4[_0x3dde5d(0x203)]=0x20,_0x66c4d4['height']=0x20;let _0x4074fc=_0x66c4d4[_0x3dde5d(0x20b)]('2d',{'willReadFrequently':!![]});_0x4074fc[_0x3dde5d(0x260)](0x0,0x0,0x20,0x20);for(let _0x4f6bb7=0x0;_0x4f6bb7<_0x501ee4[_0x3dde5d(0x271)][_0x533349][_0x3dde5d(0x239)]['length'];_0x4f6bb7++){const _0x2c422c=_0x501ee4['frames'][_0x533349]['layers'][_0x4f6bb7];_0x2c422c&&_0x2c422c['canvas']&&_0x4074fc[_0x3dde5d(0x27f)](_0x2c422c['canvas'],0x0,0x0,_0x66c4d4[_0x3dde5d(0x203)],_0x66c4d4[_0x3dde5d(0x208)]);}_0x37ac8f['appendChild'](_0x66c4d4);const _0x49d7ae=document[_0x3dde5d(0x1f8)](_0x3dde5d(0x245));_0x49d7ae[_0x3dde5d(0x241)]='F'+(_0x533349+0x1),_0x37ac8f[_0x3dde5d(0x257)](_0x49d7ae);const _0x5c7f3f=document[_0x3dde5d(0x1f8)]('button');_0x5c7f3f[_0x3dde5d(0x241)]='ÂâäÈô§',_0x5c7f3f[_0x3dde5d(0x1e8)]=_0x3dde5d(0x212),_0x5c7f3f[_0x3dde5d(0x281)]=_0x501ee4[_0x3dde5d(0x271)]['length']===0x1,_0x5c7f3f['onclick']=_0x42fd5e=>{const _0x3b21c2=_0x3dde5d;_0x42fd5e[_0x3b21c2(0x1f0)](),removeFrameAt(_0x533349);},_0x37ac8f[_0x3dde5d(0x257)](_0x5c7f3f),_0x458706[_0x3dde5d(0x257)](_0x37ac8f);}document['getElementById'](_0x3dde5d(0x274))['textContent']='('+_0x501ee4[_0x3dde5d(0x271)][_0x3dde5d(0x253)]+_0x3dde5d(0x22e);}function updateLayerUI(){const _0x5d3f1d=_0x50ad,{layers:_0x2df052,activeLayer:_0x5a2714}=getCurrentFrame();document[_0x5d3f1d(0x242)](_0x5d3f1d(0x229))[_0x5d3f1d(0x241)]='('+_0x2df052[_0x5d3f1d(0x253)]+'Êûö)';const _0x26cc32=document['getElementById']('layerList');_0x26cc32[_0x5d3f1d(0x247)]='';for(let _0x3a9a97=_0x2df052[_0x5d3f1d(0x253)]-0x1;_0x3a9a97>=0x0;_0x3a9a97--){const _0x30f083=document['createElement']('div');_0x30f083['className']=_0x5d3f1d(0x26e)+(_0x3a9a97===_0x5a2714?'\x20active':''),_0x30f083[_0x5d3f1d(0x250)]=_0x1cc629=>{const _0x42f9ab=_0x5d3f1d;if(_0x1cc629[_0x42f9ab(0x210)]['classList'][_0x42f9ab(0x238)](_0x42f9ab(0x22f)))return;getCurrentFrame()['activeLayer']=_0x3a9a97,updateLayerUI(),redrawAll();};const _0x177434=document[_0x5d3f1d(0x1f8)](_0x5d3f1d(0x23d));_0x177434[_0x5d3f1d(0x1e8)]='layer-row';const _0x4eb8a4=document[_0x5d3f1d(0x1f8)](_0x5d3f1d(0x1f7));_0x4eb8a4['className']='layer-thumb\x20large',_0x4eb8a4[_0x5d3f1d(0x203)]=0x30,_0x4eb8a4[_0x5d3f1d(0x208)]=0x30;const _0x23fe12=_0x4eb8a4['getContext']('2d');_0x23fe12[_0x5d3f1d(0x260)](0x0,0x0,_0x4eb8a4[_0x5d3f1d(0x203)],_0x4eb8a4['height']),_0x23fe12['globalAlpha']=_0x2df052[_0x3a9a97]['visible']===![]?0.3:0x1;let _0x34cdea=null;if(_0x2df052[_0x3a9a97]instanceof HTMLCanvasElement)_0x34cdea=_0x2df052[_0x3a9a97];else _0x2df052[_0x3a9a97][_0x5d3f1d(0x1f7)]instanceof HTMLCanvasElement&&(_0x34cdea=_0x2df052[_0x3a9a97][_0x5d3f1d(0x1f7)]);_0x34cdea&&_0x34cdea[_0x5d3f1d(0x203)]>0x0&&_0x34cdea['height']>0x0?_0x23fe12['drawImage'](_0x34cdea,0x0,0x0,_0x4eb8a4[_0x5d3f1d(0x203)],_0x4eb8a4[_0x5d3f1d(0x208)]):console[_0x5d3f1d(0x20c)]('ÊèèÁîª„Åß„Åç„Å™„ÅÑ„É¨„Ç§„É§„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÉÅ„É•„Éº',_0x2df052[_0x3a9a97]);_0x177434[_0x5d3f1d(0x257)](_0x4eb8a4);const _0x3a0921=document[_0x5d3f1d(0x1f8)](_0x5d3f1d(0x23d));_0x3a0921['className']=_0x5d3f1d(0x20d);const _0x500ddd=document['createElement'](_0x5d3f1d(0x23d));_0x500ddd['textContent']=_0x5d3f1d(0x258)+(_0x3a9a97+0x1),_0x500ddd[_0x5d3f1d(0x1e8)]=_0x5d3f1d(0x224),_0x3a0921['appendChild'](_0x500ddd);const _0x569d19=document[_0x5d3f1d(0x1f8)](_0x5d3f1d(0x23d));_0x569d19[_0x5d3f1d(0x1e8)]=_0x5d3f1d(0x234);const _0x322023=document[_0x5d3f1d(0x1f8)]('button');_0x322023[_0x5d3f1d(0x1e8)]=_0x5d3f1d(0x246),_0x322023['title']=_0x2df052[_0x3a9a97][_0x5d3f1d(0x23c)]===![]?_0x5d3f1d(0x209):_0x5d3f1d(0x264),_0x322023['innerHTML']=_0x2df052[_0x3a9a97][_0x5d3f1d(0x23c)]===![]?'üëÅÔ∏è‚Äçüó®Ô∏è':_0x5d3f1d(0x267),_0x322023[_0x5d3f1d(0x250)]=_0x411c26=>{const _0x4cc2e4=_0x5d3f1d;_0x411c26[_0x4cc2e4(0x1f0)](),_0x2df052[_0x3a9a97][_0x4cc2e4(0x23c)]=!_0x2df052[_0x3a9a97][_0x4cc2e4(0x23c)],updateLayerUI(),redrawAll();},_0x569d19[_0x5d3f1d(0x257)](_0x322023);const _0x2a0f7b=document[_0x5d3f1d(0x1f8)](_0x5d3f1d(0x213));_0x2a0f7b['className']='layer-btn',_0x2a0f7b[_0x5d3f1d(0x241)]='Ë§áË£Ω',_0x2a0f7b['title']=_0x5d3f1d(0x256),_0x2a0f7b[_0x5d3f1d(0x250)]=_0x183829=>{const _0x5527a0=_0x5d3f1d;_0x183829[_0x5527a0(0x1f0)](),duplicateLayerAt(_0x3a9a97);},_0x569d19['appendChild'](_0x2a0f7b);const _0x5e275b=document[_0x5d3f1d(0x1f8)](_0x5d3f1d(0x213));_0x5e275b[_0x5d3f1d(0x241)]='‚Üë',_0x5e275b[_0x5d3f1d(0x1e8)]=_0x5d3f1d(0x22f),_0x5e275b[_0x5d3f1d(0x20f)]=_0x5d3f1d(0x21f),_0x5e275b[_0x5d3f1d(0x281)]=_0x3a9a97===_0x2df052[_0x5d3f1d(0x253)]-0x1,_0x5e275b[_0x5d3f1d(0x250)]=_0x1760c5=>{const _0x24bcc5=_0x5d3f1d;_0x1760c5[_0x24bcc5(0x1f0)]();if(_0x3a9a97<_0x2df052[_0x24bcc5(0x253)]-0x1)swapLayer(_0x3a9a97,_0x3a9a97+0x1);},_0x569d19[_0x5d3f1d(0x257)](_0x5e275b);const _0x18f2c3=document['createElement'](_0x5d3f1d(0x213));_0x18f2c3[_0x5d3f1d(0x241)]='‚Üì',_0x18f2c3[_0x5d3f1d(0x1e8)]=_0x5d3f1d(0x22f),_0x18f2c3[_0x5d3f1d(0x20f)]=_0x5d3f1d(0x220),_0x18f2c3[_0x5d3f1d(0x281)]=_0x3a9a97===0x0,_0x18f2c3[_0x5d3f1d(0x250)]=_0x2269ec=>{const _0x23892d=_0x5d3f1d;_0x2269ec[_0x23892d(0x1f0)]();if(_0x3a9a97>0x0)swapLayer(_0x3a9a97,_0x3a9a97-0x1);},_0x569d19[_0x5d3f1d(0x257)](_0x18f2c3);const _0x314d6f=document[_0x5d3f1d(0x1f8)](_0x5d3f1d(0x213));_0x314d6f[_0x5d3f1d(0x241)]='ÂâäÈô§',_0x314d6f[_0x5d3f1d(0x1e8)]='layer-btn',_0x314d6f[_0x5d3f1d(0x20f)]='„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§',_0x314d6f[_0x5d3f1d(0x281)]=_0x2df052['length']===0x1,_0x314d6f[_0x5d3f1d(0x250)]=_0x40c367=>{const _0x2e386d=_0x5d3f1d;_0x40c367[_0x2e386d(0x1f0)](),removeLayerAt(_0x3a9a97);},_0x569d19[_0x5d3f1d(0x257)](_0x314d6f),_0x3a0921[_0x5d3f1d(0x257)](_0x569d19),_0x177434[_0x5d3f1d(0x257)](_0x3a0921),_0x30f083['appendChild'](_0x177434),_0x26cc32[_0x5d3f1d(0x257)](_0x30f083);}}function toggleTheme(){const _0x83f1a8=_0x50ad;applyTheme(document['documentElement']['getAttribute'](_0x83f1a8(0x20e))===_0x83f1a8(0x25a)?'light':_0x83f1a8(0x25a));}function openDB(){return new Promise((_0x5912b8,_0x4a3375)=>{const _0x26fdbf=_0x50ad,_0x4f104b=indexedDB['open'](dbName,0x2);_0x4f104b['onupgradeneeded']=()=>{const _0x52a600=_0x50ad,_0x5ff323=_0x4f104b[_0x52a600(0x22d)];!_0x5ff323[_0x52a600(0x252)][_0x52a600(0x238)](storeName)&&_0x5ff323['createObjectStore'](storeName);},_0x4f104b[_0x26fdbf(0x1eb)]=()=>{const _0x221b7d=_0x26fdbf,_0x56077e=_0x4f104b['result'];if(!_0x56077e[_0x221b7d(0x252)]['contains'](storeName)){_0x56077e[_0x221b7d(0x226)](),indexedDB[_0x221b7d(0x232)](dbName),_0x4a3375(new Error(_0x221b7d(0x1fa)));return;}_0x5912b8(_0x56077e);},_0x4f104b[_0x26fdbf(0x1e3)]=()=>_0x4a3375(_0x4f104b['error']);});}function openColorDialog(){const _0x1f3aec=_0x50ad;if(document[_0x1f3aec(0x242)](_0x1f3aec(0x279)))return;const _0x535f63=document[_0x1f3aec(0x1f8)](_0x1f3aec(0x23d));_0x535f63['id']=_0x1f3aec(0x279),_0x535f63['style'][_0x1f3aec(0x243)]='fixed',_0x535f63['style'][_0x1f3aec(0x21a)]='0',_0x535f63['style'][_0x1f3aec(0x1ea)]='0',_0x535f63['style'][_0x1f3aec(0x203)]=_0x1f3aec(0x225),_0x535f63[_0x1f3aec(0x272)]['height']=_0x1f3aec(0x221),_0x535f63[_0x1f3aec(0x272)]['display']=_0x1f3aec(0x263),_0x535f63[_0x1f3aec(0x272)][_0x1f3aec(0x277)]=_0x1f3aec(0x251),_0x535f63[_0x1f3aec(0x272)]['justifyContent']=_0x1f3aec(0x251),_0x535f63[_0x1f3aec(0x272)][_0x1f3aec(0x249)]='4000',_0x535f63[_0x1f3aec(0x272)][_0x1f3aec(0x26d)]=_0x1f3aec(0x1e9),_0x535f63[_0x1f3aec(0x247)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;padding:18px;border-radius:8px;min-width:260px;text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:0\x200\x208px\x200;\x22>Ëâ≤„Å®ÈÄèÊòé„ÇíÈÅ∏Êäû</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22dlgColor\x22\x20value=\x22'+(currentColor===_0x1f3aec(0x1e6)?_0x1f3aec(0x24a):currentColor)+_0x1f3aec(0x23f)+Math[_0x1f3aec(0x268)](currentAlpha*0x64)+_0x1f3aec(0x27b),document[_0x1f3aec(0x223)][_0x1f3aec(0x257)](_0x535f63),_0x535f63[_0x1f3aec(0x1f2)](_0x1f3aec(0x26b))[_0x1f3aec(0x250)]=()=>{const _0x176460=_0x1f3aec,_0x369e21=_0x535f63['querySelector']('#dlgAlpha');_0x369e21[_0x176460(0x211)]=0x0,_0x535f63['querySelector']('#dlgColor')[_0x176460(0x211)]=_0x176460(0x24a);},_0x535f63[_0x1f3aec(0x1f2)](_0x1f3aec(0x1ed))['onclick']=()=>{const _0x2c0edc=_0x1f3aec,_0x3e26c9=_0x535f63[_0x2c0edc(0x1f2)](_0x2c0edc(0x214))[_0x2c0edc(0x211)],_0x3d0fee=Math[_0x2c0edc(0x207)](0x0,Math[_0x2c0edc(0x202)](0x64,parseInt(_0x535f63[_0x2c0edc(0x1f2)]('#dlgAlpha')[_0x2c0edc(0x211)],0xa)||0x0));if(_0x3d0fee===0x0){currentAlpha=0x0,currentColor='transparent';if(colorPicker)colorPicker[_0x2c0edc(0x211)]=_0x2c0edc(0x24a);}else{currentAlpha=_0x3d0fee/0x64,currentColor=_0x3e26c9;if(colorPicker)colorPicker[_0x2c0edc(0x211)]=_0x3e26c9;}updateCurrentColorSwatch(),document[_0x2c0edc(0x26c)](_0x2c0edc(0x21e))[_0x2c0edc(0x254)](_0x4c636e=>_0x4c636e['classList']['remove']('selected')),_0x535f63[_0x2c0edc(0x1fd)]();},_0x535f63['querySelector'](_0x1f3aec(0x244))['onclick']=()=>_0x535f63['remove'](),_0x535f63[_0x1f3aec(0x1f4)](_0x1f3aec(0x231),_0x2b09ef=>{const _0x4c5f09=_0x1f3aec;if(_0x2b09ef[_0x4c5f09(0x210)]===_0x535f63)_0x535f63['remove']();});}function updateLayerMove(_0x32ab58){const _0x279859=_0x50ad;if(!layerMoveState[_0x279859(0x1ef)])return;const _0x14d4bf=getCanvasCoords(_0x32ab58),_0x3a8fcc={'x':Math['floor'](_0x14d4bf['x']/cellSize),'y':Math[_0x279859(0x26f)](_0x14d4bf['y']/cellSize)};layerMoveState[_0x279859(0x230)]['x']=_0x3a8fcc['x']-layerMoveState[_0x279859(0x22b)]['x'],layerMoveState['offsetCells']['y']=_0x3a8fcc['y']-layerMoveState[_0x279859(0x22b)]['y'],redrawAll();const _0x4c37eb=getCurrentFrame();if(!_0x4c37eb)return;const _0x4bf499=_0x4c37eb[_0x279859(0x255)];if(_0x4bf499==null)return;ctx[_0x279859(0x276)](),ctx['translate'](layerMoveState[_0x279859(0x230)]['x']*cellSize,layerMoveState[_0x279859(0x230)]['y']*cellSize),ctx['drawImage'](_0x4c37eb[_0x279859(0x239)][_0x4bf499]['canvas'],0x0,0x0),ctx['restore']();}function toggleSection(_0x292c39){const _0x5286d6=_0x50ad,_0x3b7a31=document[_0x5286d6(0x242)](_0x292c39),_0x5a31c8=_0x3b7a31['querySelector'](_0x5286d6(0x1ee)),_0x1fd678=_0x3b7a31['querySelector'](_0x5286d6(0x27e));_0x5a31c8[_0x5286d6(0x272)][_0x5286d6(0x1f6)]===_0x5286d6(0x219)?(_0x5a31c8[_0x5286d6(0x272)][_0x5286d6(0x1f6)]='',_0x1fd678[_0x5286d6(0x241)]='‚ñº'):(_0x5a31c8[_0x5286d6(0x272)][_0x5286d6(0x1f6)]=_0x5286d6(0x219),_0x1fd678[_0x5286d6(0x241)]='‚ñ≤');}function toggleSideMenu(_0x33ce71){const _0x2e28bc=_0x50ad,_0x55e41e=document[_0x2e28bc(0x242)](_0x2e28bc(0x278)),_0x180836=document['getElementById'](_0x2e28bc(0x1f1)),_0x1af084=document[_0x2e28bc(0x242)](_0x2e28bc(0x235)),_0x5dfa99=document['getElementById'](_0x2e28bc(0x25e)),_0x97038f=_0x55e41e['classList'][_0x2e28bc(0x238)](_0x2e28bc(0x1fe));let _0x15c9a1=typeof _0x33ce71==='boolean'?_0x33ce71:!_0x97038f;_0x15c9a1?(_0x55e41e['classList'][_0x2e28bc(0x216)](_0x2e28bc(0x1fe)),_0x180836['classList']['add'](_0x2e28bc(0x270)),document['body'][_0x2e28bc(0x272)][_0x2e28bc(0x236)]='hidden',document['body'][_0x2e28bc(0x272)][_0x2e28bc(0x275)]=_0x2e28bc(0x219),window['innerWidth']<=0x384&&(_0x5dfa99['style']['display']=_0x2e28bc(0x24d),_0x1af084['style'][_0x2e28bc(0x1f6)]='none')):(_0x55e41e['classList'][_0x2e28bc(0x1fd)](_0x2e28bc(0x1fe)),_0x180836['classList'][_0x2e28bc(0x1fd)](_0x2e28bc(0x270)),document[_0x2e28bc(0x223)][_0x2e28bc(0x272)][_0x2e28bc(0x236)]='',document[_0x2e28bc(0x223)][_0x2e28bc(0x272)]['touchAction']='',window[_0x2e28bc(0x25c)]<=0x384&&(_0x5dfa99[_0x2e28bc(0x272)]['display']='none',_0x1af084[_0x2e28bc(0x272)]['display']='block'));}function updateMenuBtnDisplay(){const _0x27df83=_0x50ad,_0x22225a=document[_0x27df83(0x242)](_0x27df83(0x278)),_0x9b0ac4=document[_0x27df83(0x242)]('main-container'),_0x5cd01b=document[_0x27df83(0x242)](_0x27df83(0x235)),_0x4e70f1=document[_0x27df83(0x242)]('menu-toggle-btn-close'),_0x7056c3=document['getElementById'](_0x27df83(0x266));if(window[_0x27df83(0x25c)]>0x384){_0x22225a[_0x27df83(0x25f)][_0x27df83(0x1fd)](_0x27df83(0x1fe)),_0x9b0ac4[_0x27df83(0x25f)][_0x27df83(0x1fd)](_0x27df83(0x270)),_0x4e70f1[_0x27df83(0x272)][_0x27df83(0x1f6)]=_0x27df83(0x219),_0x5cd01b[_0x27df83(0x272)][_0x27df83(0x1f6)]='none';if(_0x7056c3)_0x7056c3[_0x27df83(0x272)][_0x27df83(0x1f6)]=window[_0x27df83(0x25c)]>0x44c?_0x27df83(0x219):_0x27df83(0x1ff);document[_0x27df83(0x223)][_0x27df83(0x272)]['overflow']='',document['body'][_0x27df83(0x272)][_0x27df83(0x275)]='';}else{_0x22225a[_0x27df83(0x25f)]['contains'](_0x27df83(0x1fe))?(_0x4e70f1[_0x27df83(0x272)][_0x27df83(0x1f6)]='block',_0x5cd01b['style'][_0x27df83(0x1f6)]=_0x27df83(0x219)):(_0x4e70f1[_0x27df83(0x272)][_0x27df83(0x1f6)]=_0x27df83(0x219),_0x5cd01b[_0x27df83(0x272)][_0x27df83(0x1f6)]=_0x27df83(0x24d));if(_0x7056c3)_0x7056c3[_0x27df83(0x272)][_0x27df83(0x1f6)]=_0x27df83(0x1ff);}}function updateTransform(){const _0x27e49c=_0x50ad;canvas['style'][_0x27e49c(0x1f5)]=_0x27e49c(0x233)+posX+_0x27e49c(0x282)+posY+'px)\x20scale('+scale+')';}