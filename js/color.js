function _0xb39b(){const _0x26a2eb=['count','この色をパレットから削除','set','3541UpdLtH','slice','round','from','width','className','hidden','test','stopPropagation','constructor','transparent','9YVQTXZ','add','length','palette-color','background','パレットに色を追加','floor','querySelectorAll','position','min','<span\x20style=\x22position:relative;z-index:1;font-size:13px;color:#888;\x22>透明</span>','padStart','firstChild','overflow','color-palette','appendChild','palette-del-btn','8px','#000000','232565zlYoaJ','176316ChpqLH','67697qOkaGa','282ufmCOv','(((.+)+)+)+$','forEach','.palette-color','map','search','toLowerCase','title','createElement','borderRadius','getElementById','innerHTML','entries','style','4033160RveRwQ','26jXyHAd','857133huBGAf','absolute','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','div','splice','data','toString','classList','getImageData','inset','split','palette-add-btn','relative','onclick','insertBefore','#00000000','get','1134192IHNzpw','span','unshift','button'];_0xb39b=function(){return _0x26a2eb;};return _0xb39b();}(function(_0x5d9b0f,_0x1f1b66){const _0x3319d8=_0x215c,_0x167e75=_0x5d9b0f();while(!![]){try{const _0x1c23d0=-parseInt(_0x3319d8(0x165))/0x1*(parseInt(_0x3319d8(0x14c))/0x2)+-parseInt(_0x3319d8(0x14d))/0x3+-parseInt(_0x3319d8(0x184))/0x4+parseInt(_0x3319d8(0x183))/0x5+parseInt(_0x3319d8(0x186))/0x6*(parseInt(_0x3319d8(0x185))/0x7)+-parseInt(_0x3319d8(0x15e))/0x8*(parseInt(_0x3319d8(0x170))/0x9)+parseInt(_0x3319d8(0x14b))/0xa;if(_0x1c23d0===_0x1f1b66)break;else _0x167e75['push'](_0x167e75['shift']());}catch(_0x19cbf4){_0x167e75['push'](_0x167e75['shift']());}}}(_0xb39b,0x5e6d1));const _0xd2c67c=(function(){let _0x2f15fc=!![];return function(_0x109c0a,_0x32daa4){const _0x1d0bc2=_0x2f15fc?function(){if(_0x32daa4){const _0x366f3a=_0x32daa4['apply'](_0x109c0a,arguments);return _0x32daa4=null,_0x366f3a;}}:function(){};return _0x2f15fc=![],_0x1d0bc2;};}()),_0x240690=_0xd2c67c(this,function(){const _0x2a9b65=_0x215c;return _0x240690[_0x2a9b65(0x153)]()[_0x2a9b65(0x18b)](_0x2a9b65(0x187))[_0x2a9b65(0x153)]()[_0x2a9b65(0x16e)](_0x240690)[_0x2a9b65(0x18b)]('(((.+)+)+)+$');});function _0x215c(_0x422cd7,_0x404357){_0x422cd7=_0x422cd7-0x147;const _0x2932a3=_0xb39b();let _0x240690=_0x2932a3[_0x422cd7];return _0x240690;}_0x240690();function hexToRgbaCss(_0x51105c,_0x26e822){const _0x235c64=_0x215c;let _0x31ade5,_0x3b263f,_0x378a5d,_0x58b53c=_0x26e822;if(_0x51105c[_0x235c64(0x172)]===0x9)_0x31ade5=parseInt(_0x51105c['slice'](0x1,0x3),0x10),_0x3b263f=parseInt(_0x51105c[_0x235c64(0x166)](0x3,0x5),0x10),_0x378a5d=parseInt(_0x51105c[_0x235c64(0x166)](0x5,0x7),0x10),_0x58b53c=parseInt(_0x51105c[_0x235c64(0x166)](0x7,0x9),0x10)/0xff;else{if(_0x51105c[_0x235c64(0x172)]===0x7)_0x31ade5=parseInt(_0x51105c['slice'](0x1,0x3),0x10),_0x3b263f=parseInt(_0x51105c[_0x235c64(0x166)](0x3,0x5),0x10),_0x378a5d=parseInt(_0x51105c[_0x235c64(0x166)](0x5,0x7),0x10);else{if(_0x51105c[_0x235c64(0x172)]===0x4)_0x31ade5=parseInt(_0x51105c[0x1]+_0x51105c[0x1],0x10),_0x3b263f=parseInt(_0x51105c[0x2]+_0x51105c[0x2],0x10),_0x378a5d=parseInt(_0x51105c[0x3]+_0x51105c[0x3],0x10);else return _0x51105c;}}return'rgba('+_0x31ade5+','+_0x3b263f+','+_0x378a5d+','+_0x58b53c+')';}function hexToRgba(_0x3eec83,_0x375c96=0x1){const _0x3f676e=_0x215c;if(_0x3eec83===_0x3f676e(0x16f)||_0x3eec83==='#00000000')return[0x0,0x0,0x0,0x0];_0x3eec83=_0x3eec83['replace']('#','');if(_0x3eec83[_0x3f676e(0x172)]===0x3)_0x3eec83=_0x3eec83[_0x3f676e(0x157)]('')[_0x3f676e(0x18a)](_0x30e1bb=>_0x30e1bb+_0x30e1bb)['join']('');if(_0x3eec83[_0x3f676e(0x172)]===0x8){const _0x6e6f4e=parseInt(_0x3eec83[_0x3f676e(0x166)](0x0,0x2),0x10),_0x4935af=parseInt(_0x3eec83['slice'](0x2,0x4),0x10),_0x12beda=parseInt(_0x3eec83[_0x3f676e(0x166)](0x4,0x6),0x10),_0x44cdd5=parseInt(_0x3eec83[_0x3f676e(0x166)](0x6,0x8),0x10);return[_0x6e6f4e,_0x4935af,_0x12beda,_0x44cdd5];}let _0x252020=parseInt(_0x3eec83,0x10);return[_0x252020>>0x10&0xff,_0x252020>>0x8&0xff,_0x252020&0xff,Math[_0x3f676e(0x167)](0xff*_0x375c96)];}function colorsMatch(_0x15caed,_0x26ee9c){return _0x15caed[0x0]===_0x26ee9c[0x0]&&_0x15caed[0x1]===_0x26ee9c[0x1]&&_0x15caed[0x2]===_0x26ee9c[0x2]&&_0x15caed[0x3]===_0x26ee9c[0x3];}function createPalette(){const _0x3b66d0=_0x215c,_0x567526=document['getElementById'](_0x3b66d0(0x17e));if(!_0x567526)return;_0x567526[_0x3b66d0(0x148)]='',PALETTE_COLORS['forEach']((_0x581f70,_0xba6c49)=>{const _0x41af4a=_0x3b66d0,_0x31933b=document[_0x41af4a(0x18e)](_0x41af4a(0x161));_0x31933b[_0x41af4a(0x16a)]=_0x41af4a(0x173),_0x31933b[_0x41af4a(0x14a)][_0x41af4a(0x178)]=_0x41af4a(0x159),_0x31933b[_0x41af4a(0x14a)][_0x41af4a(0x17d)]=_0x41af4a(0x16b),_0x31933b[_0x41af4a(0x148)]='';let _0x559a59=document[_0x41af4a(0x18e)](_0x41af4a(0x150));_0x559a59['style'][_0x41af4a(0x178)]='absolute',_0x559a59[_0x41af4a(0x14a)][_0x41af4a(0x156)]='0',_0x559a59[_0x41af4a(0x14a)][_0x41af4a(0x18f)]=_0x41af4a(0x181),_0x559a59[_0x41af4a(0x14a)][_0x41af4a(0x174)]=_0x41af4a(0x14f);let _0xc2673e=document[_0x41af4a(0x18e)](_0x41af4a(0x150));_0xc2673e[_0x41af4a(0x14a)][_0x41af4a(0x178)]=_0x41af4a(0x14e),_0xc2673e[_0x41af4a(0x14a)][_0x41af4a(0x156)]='0',_0xc2673e[_0x41af4a(0x14a)][_0x41af4a(0x18f)]='8px';if(_0x581f70==='transparent'||_0x581f70===_0x41af4a(0x15c))_0xc2673e['style'][_0x41af4a(0x174)]='none',_0x31933b['title']='透明',_0x31933b[_0x41af4a(0x148)]=_0x41af4a(0x17a);else{if(/^#([0-9a-f]{8})$/i[_0x41af4a(0x16c)](_0x581f70)){_0xc2673e[_0x41af4a(0x14a)][_0x41af4a(0x174)]=hexToRgbaCss(_0x581f70,0x1);const [_0x533d64,_0x4cdf6c,_0x32a56b,_0x496bb4]=hexToRgba(_0x581f70),_0x2c9ea7=_0x496bb4/0xff;_0x31933b[_0x41af4a(0x18d)]=rgbaToHex(_0x533d64,_0x4cdf6c,_0x32a56b)+'\x20'+Math[_0x41af4a(0x167)](_0x2c9ea7*0x64)+'%';}else _0x581f70[_0x41af4a(0x18c)]()===currentColor[_0x41af4a(0x18c)]()&&currentAlpha<0x1?(_0xc2673e[_0x41af4a(0x14a)][_0x41af4a(0x174)]=hexToRgbaCss(_0x581f70,currentAlpha),_0x31933b[_0x41af4a(0x18d)]=_0x581f70+'\x20透明度'+Math[_0x41af4a(0x167)](currentAlpha*0x64)+'%'):(_0xc2673e[_0x41af4a(0x14a)][_0x41af4a(0x174)]=_0x581f70,_0x31933b[_0x41af4a(0x18d)]=_0x581f70);}_0x31933b[_0x41af4a(0x17f)](_0x559a59),_0x31933b[_0x41af4a(0x17f)](_0xc2673e),_0x31933b[_0x41af4a(0x15a)]=()=>{const _0x90bc68=_0x41af4a;if(_0x581f70===_0x90bc68(0x16f)||_0x581f70==='#00000000')currentColor=_0x90bc68(0x16f),currentAlpha=0x0;else{if(/^#([0-9a-f]{8})$/i[_0x90bc68(0x16c)](_0x581f70)){const [_0x24cc24,_0xc846a9,_0x1a0b4f,_0x4c291d]=hexToRgba(_0x581f70);currentAlpha=_0x4c291d/0xff,currentColor=rgbaToHex(_0x24cc24,_0xc846a9,_0x1a0b4f);}else currentColor=_0x581f70,currentAlpha=0x1;}updateCurrentColorSwatch(),document[_0x90bc68(0x177)](_0x90bc68(0x189))[_0x90bc68(0x188)](_0x4efa71=>_0x4efa71[_0x90bc68(0x154)]['remove']('selected')),_0x31933b[_0x90bc68(0x154)][_0x90bc68(0x171)]('selected');};if(_0xba6c49!==0x0){const _0x3eee7d=document[_0x41af4a(0x18e)](_0x41af4a(0x15f));_0x3eee7d['textContent']='×',_0x3eee7d[_0x41af4a(0x16a)]=_0x41af4a(0x180),_0x3eee7d[_0x41af4a(0x18d)]=_0x41af4a(0x163),_0x3eee7d[_0x41af4a(0x15a)]=_0x56e186=>{const _0x429401=_0x41af4a;_0x56e186[_0x429401(0x16d)](),PALETTE_COLORS['length']>0x2&&(PALETTE_COLORS['splice'](_0xba6c49,0x1),createPalette());},_0x31933b[_0x41af4a(0x17f)](_0x3eee7d);}_0x567526[_0x41af4a(0x17f)](_0x31933b);});const _0x56c977=document[_0x3b66d0(0x18e)]('button');_0x56c977[_0x3b66d0(0x16a)]=_0x3b66d0(0x158),_0x56c977['title']=_0x3b66d0(0x175),_0x56c977[_0x3b66d0(0x148)]='+',_0x56c977['onclick']=_0x44410c=>{const _0x2c662a=_0x3b66d0;_0x44410c[_0x2c662a(0x16d)](),showColorPickerDialog({'color':currentColor===_0x2c662a(0x16f)?_0x2c662a(0x182):currentColor,'alpha':currentAlpha,'okLabel':'追加','onChange':()=>{},'onOk':({hex:_0x312fec,rgba:_0x7a6bc8,a:_0x1acc47})=>{const _0x26af5a=_0x2c662a;if(_0x1acc47===0x0){if(PALETTE_COLORS[0x0]===_0x26af5a(0x16f))PALETTE_COLORS[_0x26af5a(0x151)](0x1,0x0,_0x26af5a(0x16f));else PALETTE_COLORS[_0x26af5a(0x160)]('transparent');}else{const _0x11b574=Math[_0x26af5a(0x167)](_0x1acc47*0xff),_0x2cb4d0=_0x11b574[_0x26af5a(0x153)](0x10)[_0x26af5a(0x17b)](0x2,'0');PALETTE_COLORS[_0x26af5a(0x160)](''+_0x312fec+_0x2cb4d0);}if(PALETTE_COLORS['length']>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x26af5a(0x166)](0x0,0x18);savePaletteToDB(),createPalette();}});},_0x567526[_0x3b66d0(0x15b)](_0x56c977,_0x567526[_0x3b66d0(0x17c)]);const _0x4b9561=document[_0x3b66d0(0x147)]('scanColorsPanel');if(_0x4b9561)_0x4b9561[_0x3b66d0(0x14a)]['display']='';}function scanImageColors(){const _0x16f98b=_0x215c,_0x53727c=getCurrentProject(),_0x4b1bbd=getCurrentFrame();if(!_0x53727c||!_0x4b1bbd)return[];const _0x455b1f=new Map(),_0x2da2d0=_0x53727c[_0x16f98b(0x169)],_0x158549=_0x53727c['height'],_0x3ec367=canvas['getContext']('2d',{'willReadFrequently':!![]});for(let _0x2f5d28=0x0;_0x2f5d28<_0x158549;_0x2f5d28++){for(let _0x1013b5=0x0;_0x1013b5<_0x2da2d0;_0x1013b5++){const _0x53a373=Math[_0x16f98b(0x179)](Math[_0x16f98b(0x176)](_0x1013b5*cellSize+cellSize/0x2),canvas[_0x16f98b(0x169)]-0x1),_0x43a2fd=Math[_0x16f98b(0x179)](Math[_0x16f98b(0x176)](_0x2f5d28*cellSize+cellSize/0x2),canvas['height']-0x1),_0x3ff44b=_0x3ec367[_0x16f98b(0x155)](_0x53a373,_0x43a2fd,0x1,0x1)[_0x16f98b(0x152)],_0x11be85=_0x3ff44b[0x0]+','+_0x3ff44b[0x1]+','+_0x3ff44b[0x2]+','+_0x3ff44b[0x3];_0x455b1f[_0x16f98b(0x164)](_0x11be85,(_0x455b1f[_0x16f98b(0x15d)](_0x11be85)||0x0)+0x1);}}const _0x1775bf=Array[_0x16f98b(0x168)](_0x455b1f[_0x16f98b(0x149)]())['map'](([_0x326fac,_0xdac712])=>{const _0x98a546=_0x16f98b,[_0x1e7a52,_0x239410,_0xbaf1a3,_0x47092d]=_0x326fac['split'](',')[_0x98a546(0x18a)](_0x35a1dd=>parseInt(_0x35a1dd,0xa));return{'r':_0x1e7a52,'g':_0x239410,'b':_0xbaf1a3,'a':_0x47092d,'count':_0xdac712};})['sort']((_0xe1116c,_0x500a2c)=>_0x500a2c[_0x16f98b(0x162)]-_0xe1116c[_0x16f98b(0x162)]);return _0x1775bf;}function rgbaToHex(_0x3f0d2b,_0x38397e,_0x2ee3e8){const _0x5b3c3b=_0x215c;return'#'+[_0x3f0d2b,_0x38397e,_0x2ee3e8][_0x5b3c3b(0x18a)](_0x4374b8=>_0x4374b8[_0x5b3c3b(0x153)](0x10)[_0x5b3c3b(0x17b)](0x2,'0'))['join']('');}