(function(_0x43541b,_0x4d4803){const _0x5e32c8=a0_0x111e,_0xaa6108=_0x43541b();while(!![]){try{const _0x5d31ed=parseInt(_0x5e32c8(0x148))/0x1+-parseInt(_0x5e32c8(0x1f1))/0x2+-parseInt(_0x5e32c8(0xf1))/0x3*(-parseInt(_0x5e32c8(0xf4))/0x4)+-parseInt(_0x5e32c8(0x94))/0x5+parseInt(_0x5e32c8(0x103))/0x6+parseInt(_0x5e32c8(0x172))/0x7+-parseInt(_0x5e32c8(0x198))/0x8;if(_0x5d31ed===_0x4d4803)break;else _0xaa6108['push'](_0xaa6108['shift']());}catch(_0x175d99){_0xaa6108['push'](_0xaa6108['shift']());}}}(a0_0x3c67,0x21478));const a0_0x413a03=a0_0x35c9;(function(_0x2eb15c,_0xd48f66){const _0x41906e=a0_0x111e,_0x4f5f5a=(function(){let _0x350fd2=!![];return function(_0xced230,_0x1a97a3){const _0x8197c8=_0x350fd2?function(){const _0x51b50e=a0_0x111e;if(_0x1a97a3){const _0x54dfe1=_0x1a97a3[_0x51b50e(0x9b)](_0xced230,arguments);return _0x1a97a3=null,_0x54dfe1;}}:function(){};return _0x350fd2=![],_0x8197c8;};}()),_0x52d2b1=_0x4f5f5a(this,function(){const _0x3f3d02=a0_0x111e;return _0x52d2b1['toString']()[_0x3f3d02(0x1a2)]('(((.+)+)+)+$')[_0x3f3d02(0x15e)]()[_0x3f3d02(0xac)](_0x52d2b1)['search'](_0x3f3d02(0x9d));});_0x52d2b1();const _0x3a1d50=a0_0x35c9,_0x48b996=_0x2eb15c();while(!![]){try{const _0x2f7e68=-parseInt(_0x3a1d50(0x1da))/0x1*(parseInt(_0x3a1d50(0xd1))/0x2)+parseInt(_0x3a1d50(0x19f))/0x3*(parseInt(_0x3a1d50(0x153))/0x4)+-parseInt(_0x3a1d50(0x1b6))/0x5+parseInt(_0x3a1d50(0x1d4))/0x6+-parseInt(_0x3a1d50(0x1ae))/0x7+-parseInt(_0x3a1d50(0xe5))/0x8+parseInt(_0x3a1d50(0x122))/0x9;if(_0x2f7e68===_0xd48f66)break;else _0x48b996[_0x41906e(0xd1)](_0x48b996[_0x41906e(0x1c8)]());}catch(_0x216bdb){_0x48b996[_0x41906e(0xd1)](_0x48b996[_0x41906e(0x1c8)]());}}}(a0_0x9b6b,0x7d653));const a0_0x521960=a0_0x56c5;(function(_0x12b652,_0x4eae05){const _0x38aa1f=a0_0x111e,_0x11e837=a0_0x35c9,_0x263b6f=(function(){let _0x297b47=!![];return function(_0x1b971e,_0x558a42){const _0x53381e=_0x297b47?function(){const _0x664502=a0_0x35c9;if(_0x558a42){const _0x4caaec=_0x558a42[_0x664502(0x1e8)](_0x1b971e,arguments);return _0x558a42=null,_0x4caaec;}}:function(){};return _0x297b47=![],_0x53381e;};}()),_0xf4264c=_0x263b6f(this,function(){const _0x2c90d1=a0_0x111e,_0x27e79e=a0_0x35c9;return _0xf4264c[_0x27e79e(0x17b)]()[_0x2c90d1(0x1a2)](_0x27e79e(0x102))[_0x2c90d1(0x15e)]()[_0x27e79e(0x1f8)](_0xf4264c)[_0x2c90d1(0x1a2)](_0x27e79e(0x102));});_0xf4264c();const _0x4bf176=a0_0x56c5,_0x546853=_0x12b652();while(!![]){try{const _0x19f425=-parseInt(_0x4bf176(0x192))/0x1*(parseInt(_0x4bf176(0x14b))/0x2)+-parseInt(_0x4bf176(0x19e))/0x3*(parseInt(_0x4bf176(0x12e))/0x4)+parseInt(_0x4bf176(0xe2))/0x5*(parseInt(_0x4bf176(0x1cf))/0x6)+-parseInt(_0x4bf176(0xe7))/0x7*(-parseInt(_0x4bf176(0xf4))/0x8)+parseInt(_0x4bf176(0x133))/0x9+parseInt(_0x4bf176(0x11b))/0xa+parseInt(_0x4bf176(0x172))/0xb*(-parseInt(_0x4bf176(0x1ce))/0xc);if(_0x19f425===_0x4eae05)break;else _0x546853[_0x38aa1f(0xd1)](_0x546853[_0x11e837(0x1c0)]());}catch(_0x16f9b9){_0x546853[_0x11e837(0x14c)](_0x546853[_0x11e837(0x1c0)]());}}}(a0_0x22a5,0xba2f1));const a0_0x5049d9=a0_0xce2f;(function(_0x26e951,_0x1b7285){const _0x1f703b=a0_0x56c5,_0xc1dd59=a0_0xce2f,_0x1b9766=_0x26e951();while(!![]){try{const _0x15683f=parseInt(_0xc1dd59(0x17d))/0x1*(-parseInt(_0xc1dd59(0x227))/0x2)+parseInt(_0xc1dd59(0xff))/0x3*(-parseInt(_0xc1dd59(0xef))/0x4)+parseInt(_0xc1dd59(0x21d))/0x5+parseInt(_0xc1dd59(0x128))/0x6*(parseInt(_0xc1dd59(0xeb))/0x7)+-parseInt(_0xc1dd59(0x12f))/0x8+-parseInt(_0xc1dd59(0x209))/0x9*(-parseInt(_0xc1dd59(0x1b9))/0xa)+-parseInt(_0xc1dd59(0x204))/0xb;if(_0x15683f===_0x1b7285)break;else _0x1b9766[_0x1f703b(0x1d9)](_0x1b9766[_0x1f703b(0x128)]());}catch(_0x1edda4){_0x1b9766[_0x1f703b(0x1d9)](_0x1b9766[_0x1f703b(0x128)]());}}}(a0_0x243d,0x97cd8));const a0_0x38aafa=a0_0x1925;(function(_0x46285d,_0x26c90a){const _0xcaab5c=a0_0x56c5,_0x3c1579=a0_0xce2f,_0x1711e0=a0_0x1925,_0x5bb5b2=_0x46285d();while(!![]){try{const _0x5b96b8=parseInt(_0x1711e0(0x26d))/0x1*(parseInt(_0x1711e0(0x20a))/0x2)+-parseInt(_0x1711e0(0x24d))/0x3+-parseInt(_0x1711e0(0x284))/0x4+parseInt(_0x1711e0(0x1cb))/0x5+-parseInt(_0x1711e0(0x1e9))/0x6+-parseInt(_0x1711e0(0x2b9))/0x7*(parseInt(_0x1711e0(0x26e))/0x8)+parseInt(_0x1711e0(0x28d))/0x9*(parseInt(_0x1711e0(0x271))/0xa);if(_0x5b96b8===_0x26c90a)break;else _0x5bb5b2[_0x3c1579(0x19e)](_0x5bb5b2[_0xcaab5c(0x128)]());}catch(_0x369ff1){_0x5bb5b2[_0x3c1579(0x19e)](_0x5bb5b2[_0x3c1579(0x1f9)]());}}}(a0_0x5ad1,0x65d10));const a0_0x53f6c7=(function(){const _0x237e32=(function(){let _0x1ce2f5=!![];return function(_0x538d47,_0x6fc657){const _0x2e3cce=_0x1ce2f5?function(){const _0x238745=a0_0x35c9;if(_0x6fc657){const _0x422af8=_0x6fc657[_0x238745(0x1e8)](_0x538d47,arguments);return _0x6fc657=null,_0x422af8;}}:function(){};return _0x1ce2f5=![],_0x2e3cce;};}()),_0x4f986c=(function(){const _0x4768ce=_0x237e32(this,function(){const _0x41b9b3=a0_0x111e,_0x2040b1=a0_0x35c9,_0x451edd=a0_0x56c5;return _0x4768ce[_0x2040b1(0x17b)]()[_0x41b9b3(0x1a2)](_0x451edd(0x142))[_0x451edd(0xe6)]()[_0x451edd(0x11d)](_0x4768ce)[_0x451edd(0x1ef)](_0x451edd(0x142));});_0x4768ce();let _0x82a41b=!![];return function(_0x180a2a,_0x14e53e){const _0x4ba1a2=_0x82a41b?function(){const _0x438053=a0_0xce2f;if(_0x14e53e){const _0x23621b=_0x14e53e[_0x438053(0x106)](_0x180a2a,arguments);return _0x14e53e=null,_0x23621b;}}:function(){};return _0x82a41b=![],_0x4ba1a2;};}()),_0x577b65=_0x4f986c(this,function(){const _0x1eb805=a0_0x56c5,_0x320d79=a0_0xce2f;return _0x577b65[_0x1eb805(0xe6)]()[_0x1eb805(0x1ef)](_0x320d79(0xe4))[_0x320d79(0x163)]()[_0x320d79(0x1b4)](_0x577b65)[_0x320d79(0x153)](_0x320d79(0xe4));});_0x577b65();let _0x5eb6f7=!![];return function(_0xc769c2,_0x285f26){const _0x2ffb4e=_0x5eb6f7?function(){const _0xe52357=a0_0x1925;if(_0x285f26){const _0x2bdffa=_0x285f26[_0xe52357(0x2b0)](_0xc769c2,arguments);return _0x285f26=null,_0x2bdffa;}}:function(){};return _0x5eb6f7=![],_0x2ffb4e;};}()),a0_0x5506da=a0_0x53f6c7(this,function(){const _0x12ddaf=a0_0x35c9,_0x7a5be8=a0_0xce2f,_0xa591c2=a0_0x1925;return a0_0x5506da[_0xa591c2(0x279)]()[_0xa591c2(0x1ac)](_0xa591c2(0x197))[_0x7a5be8(0x163)]()[_0xa591c2(0x28c)](a0_0x5506da)[_0xa591c2(0x1ac)](_0x12ddaf(0x102));});a0_0x5506da();let canvas=document[a0_0x38aafa(0x275)](a0_0x5049d9(0x20f)),ctx=canvas[a0_0x38aafa(0x2c6)]('2d');const wrapper=document[a0_0x38aafa(0x275)](a0_0x38aafa(0x1cf));let cellSize=0x14,currentColor=a0_0x38aafa(0x265),currentTool=a0_0x38aafa(0x182),penSize=0x1,penMode=a0_0x38aafa(0x2e2),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x4ce487=0x10,_0x384300=0x10,_0x178311=''){const _0x9a2067=a0_0x5049d9,_0x55f1de=a0_0x38aafa;let _0x5ee066=0x14,_0x3fe30a=[],_0x16f6b4=[],_0x4849fe=[],_0x4de774=document[_0x55f1de(0x1d6)](_0x55f1de(0x19d));_0x4de774[_0x55f1de(0x1b8)]=_0x4ce487*_0x5ee066,_0x4de774[_0x55f1de(0x27c)]=_0x384300*_0x5ee066,_0x3fe30a[_0x55f1de(0x278)](_0x4de774),_0x16f6b4[_0x55f1de(0x278)]([]),_0x4849fe[_0x55f1de(0x278)]([]);let _0x55236={'layers':_0x3fe30a,'activeLayer':0x0,'layerHistories':_0x16f6b4,'layerRedoStacks':_0x4849fe};return{'frames':[_0x55236],'activeFrame':0x0,'width':_0x4ce487,'height':_0x384300,'name':_0x178311||'画像'+(projects[_0x9a2067(0xf5)]+0x1)};}function updateProjectUI(){const _0x281495=a0_0x35c9,_0x15454a=a0_0x56c5,_0x225fe5=a0_0x5049d9,_0x19f225=a0_0x38aafa,_0x5019f4=document[_0x19f225(0x275)](_0x19f225(0x228));_0x5019f4[_0x19f225(0x25f)]='';for(let _0x187325=0x0;_0x187325<projects[_0x19f225(0x1c4)];_0x187325++){const _0x2d3a57=document[_0x225fe5(0x1f6)](_0x281495(0xd5));_0x2d3a57[_0x19f225(0x252)]=_0x19f225(0x2bc)+(_0x187325===activeProject?_0x19f225(0x1e4):''),_0x2d3a57[_0x19f225(0x234)]=()=>{activeProject=_0x187325,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x573987=document[_0x225fe5(0x1f6)](_0x19f225(0x28e));_0x573987[_0x19f225(0x252)]=_0x19f225(0x1d4),_0x573987[_0x19f225(0x221)]=projects[_0x187325][_0x19f225(0x2e6)]||'画像'+(_0x187325+0x1),_0x573987[_0x19f225(0x198)]=_0x225fe5(0x210),_0x573987[_0x15454a(0xbf)]=_0x1d1bdb=>{const _0x39da56=_0x19f225;_0x1d1bdb[_0x39da56(0x214)](),editProjectName(_0x187325,_0x573987);},_0x2d3a57[_0x19f225(0x237)](_0x573987);const _0x376488=document[_0x19f225(0x1d6)](_0x19f225(0x2a4));_0x376488[_0x19f225(0x221)]='削除',_0x376488[_0x19f225(0x252)]=_0x19f225(0x27a),_0x376488[_0x225fe5(0x1d1)]=projects[_0x19f225(0x1c4)]===0x1,_0x376488[_0x19f225(0x234)]=_0x4b06d3=>{const _0x17b53e=_0x19f225;_0x4b06d3[_0x17b53e(0x214)](),removeProjectAt(_0x187325);},_0x2d3a57[_0x225fe5(0x1c2)](_0x376488),_0x5019f4[_0x19f225(0x237)](_0x2d3a57);}document[_0x19f225(0x275)](_0x19f225(0x1ed))[_0x281495(0xf3)]='('+projects[_0x19f225(0x1c4)]+'枚)';}function editProjectName(_0xa210ec,_0x77326c){const _0x11b764=a0_0x5049d9,_0x5dc7fa=a0_0x38aafa,_0x3046e8=document[_0x5dc7fa(0x1d6)](_0x5dc7fa(0x295));_0x3046e8[_0x5dc7fa(0x17d)]=_0x5dc7fa(0x23e),_0x3046e8[_0x11b764(0x12e)]=projects[_0xa210ec][_0x5dc7fa(0x2e6)]||'画像'+(_0xa210ec+0x1),_0x3046e8[_0x11b764(0x15c)]=_0x5dc7fa(0x186),_0x3046e8[_0x11b764(0x1bb)][_0x5dc7fa(0x1b8)]=_0x5dc7fa(0x29d),_0x3046e8[_0x5dc7fa(0x1f4)]=()=>{const _0x2d4163=_0x5dc7fa;projects[_0xa210ec][_0x2d4163(0x2e6)]=_0x3046e8[_0x2d4163(0x24e)][_0x2d4163(0x19b)]()||'画像'+(_0xa210ec+0x1),updateProjectUI();},_0x3046e8[_0x5dc7fa(0x2ca)]=_0x45cc53=>{const _0x17c7dc=_0x11b764,_0xf0d66c=_0x5dc7fa;if(_0x45cc53[_0x17c7dc(0x181)]===_0xf0d66c(0x276))_0x3046e8[_0xf0d66c(0x1ef)]();},_0x77326c[_0x5dc7fa(0x2e8)](_0x3046e8),_0x3046e8[_0x5dc7fa(0x2be)](),_0x3046e8[_0x5dc7fa(0x1aa)]();}function showNewProjectDialog(_0x8e78c6){const _0x3f3ff3=a0_0x56c5,_0x10bc96=a0_0x5049d9,_0x4a0757=a0_0x38aafa;let _0x42ab12=document[_0x4a0757(0x275)](_0x10bc96(0x14f));if(_0x42ab12)_0x42ab12[_0x4a0757(0x187)]();const _0xc42a7f=document[_0x4a0757(0x1d6)](_0x4a0757(0x2c9));_0xc42a7f['id']=_0x4a0757(0x1db),_0xc42a7f[_0x4a0757(0x1f8)][_0x4a0757(0x1f7)]=_0x4a0757(0x1e3),_0xc42a7f[_0x4a0757(0x1f8)][_0x4a0757(0x2a7)]='0',_0xc42a7f[_0x4a0757(0x1f8)][_0x10bc96(0xf8)]='0',_0xc42a7f[_0x3f3ff3(0x178)][_0x4a0757(0x1b8)]=_0x10bc96(0x183),_0xc42a7f[_0x3f3ff3(0x178)][_0x4a0757(0x27c)]=_0x4a0757(0x1f1),_0xc42a7f[_0x4a0757(0x1f8)][_0x10bc96(0x142)]=_0x4a0757(0x180),_0xc42a7f[_0x4a0757(0x1f8)][_0x4a0757(0x2f0)]=_0x4a0757(0x20c),_0xc42a7f[_0x4a0757(0x1f8)][_0x4a0757(0x19e)]=_0x4a0757(0x243),_0xc42a7f[_0x4a0757(0x1f8)][_0x4a0757(0x1fd)]=_0x4a0757(0x243),_0xc42a7f[_0x10bc96(0x1bb)][_0x4a0757(0x24b)]=_0x4a0757(0x1c9),_0xc42a7f[_0x4a0757(0x25f)]=_0x10bc96(0x156)+(projects[_0x10bc96(0xf5)]+0x1)+_0x10bc96(0x21e),document[_0x10bc96(0x1c5)][_0x4a0757(0x237)](_0xc42a7f),_0xc42a7f[_0x4a0757(0x2c0)](_0x4a0757(0x2e4))[_0x4a0757(0x234)]=()=>{const _0x429820=_0x3f3ff3,_0x75c53=_0x10bc96,_0x360afe=_0x4a0757,_0x5459a9=parseInt(_0xc42a7f[_0x360afe(0x2c0)](_0x75c53(0x129))[_0x360afe(0x24e)],0xa),_0x55f851=parseInt(_0xc42a7f[_0x360afe(0x2c0)](_0x360afe(0x1b0))[_0x75c53(0x12e)],0xa),_0xcb11a2=_0xc42a7f[_0x360afe(0x2c0)](_0x429820(0x1d4))[_0x360afe(0x24e)][_0x360afe(0x19b)]();_0xc42a7f[_0x360afe(0x187)]();if(_0x8e78c6)_0x8e78c6(_0x5459a9,_0x55f851,_0xcb11a2);},_0xc42a7f[_0x4a0757(0x2c0)](_0x4a0757(0x1f9))[_0x4a0757(0x234)]=()=>{const _0x33391e=_0x10bc96;_0xc42a7f[_0x33391e(0x1e9)]();};}function addProject(){showNewProjectDialog((_0x4409bd,_0x36f427,_0xdcf761)=>{const _0x17c695=a0_0xce2f,_0x4257b3=a0_0x1925;if(!Number[_0x4257b3(0x28b)](_0x4409bd)||_0x4409bd<0x1)_0x4409bd=0x10;if(!Number[_0x4257b3(0x28b)](_0x36f427)||_0x36f427<0x1)_0x36f427=0x10;projects[_0x4257b3(0x278)](createProject(_0x4409bd,_0x36f427,_0xdcf761)),activeProject=projects[_0x17c695(0xf5)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x20b47c){const _0x128ae2=a0_0x38aafa;if(projects[_0x128ae2(0x1c4)]<=0x1)return;projects[_0x128ae2(0x2b7)](_0x20b47c,0x1);if(activeProject>=projects[_0x128ae2(0x1c4)])activeProject=projects[_0x128ae2(0x1c4)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x3828ba=a0_0x56c5,_0x5d0325=a0_0x5049d9,_0x34e97b=a0_0x38aafa,_0x174b1e=document[_0x3828ba(0x182)](_0x34e97b(0x1c6)),_0x13004e=getCurrentProject();_0x174b1e[_0x3828ba(0x175)]='';for(let _0x59d822=0x0;_0x59d822<_0x13004e[_0x5d0325(0x17f)][_0x3828ba(0xd7)];_0x59d822++){const _0x944c43=document[_0x34e97b(0x1d6)](_0x34e97b(0x2c9));_0x944c43[_0x34e97b(0x252)]=_0x34e97b(0x254)+(_0x59d822===_0x13004e[_0x34e97b(0x2a5)]?_0x34e97b(0x1e4):''),_0x944c43[_0x34e97b(0x234)]=()=>{const _0x4150fb=_0x34e97b;_0x13004e[_0x4150fb(0x2a5)]=_0x59d822,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x34fba2=document[_0x5d0325(0x1f6)](_0x34e97b(0x19d));_0x34fba2[_0x34e97b(0x252)]=_0x34e97b(0x1da),_0x34fba2[_0x34e97b(0x1b8)]=0x20,_0x34fba2[_0x34e97b(0x27c)]=0x20;let _0x3218e4=_0x34fba2[_0x34e97b(0x2c6)]('2d');_0x3218e4[_0x34e97b(0x22d)](0x0,0x0,0x20,0x20);for(let _0x5a015b=0x0;_0x5a015b<_0x13004e[_0x5d0325(0x17f)][_0x59d822][_0x34e97b(0x262)][_0x3828ba(0xd7)];_0x5a015b++){_0x3218e4[_0x34e97b(0x1ff)](_0x13004e[_0x34e97b(0x2b3)][_0x59d822][_0x34e97b(0x262)][_0x5a015b],0x0,0x0,_0x34fba2[_0x34e97b(0x1b8)],_0x34fba2[_0x34e97b(0x27c)]);}_0x944c43[_0x5d0325(0x1c2)](_0x34fba2);const _0x7dd052=document[_0x5d0325(0x1f6)](_0x34e97b(0x28e));_0x7dd052[_0x34e97b(0x221)]='F'+(_0x59d822+0x1),_0x944c43[_0x34e97b(0x237)](_0x7dd052);const _0x5a0948=document[_0x34e97b(0x1d6)](_0x3828ba(0x1e1));_0x5a0948[_0x34e97b(0x221)]='削除',_0x5a0948[_0x34e97b(0x252)]=_0x34e97b(0x286),_0x5a0948[_0x34e97b(0x256)]=_0x13004e[_0x34e97b(0x2b3)][_0x34e97b(0x1c4)]===0x1,_0x5a0948[_0x34e97b(0x234)]=_0xfbe4ee=>{const _0x52ec05=_0x34e97b;_0xfbe4ee[_0x52ec05(0x214)](),removeFrameAt(_0x59d822);},_0x944c43[_0x34e97b(0x237)](_0x5a0948),_0x174b1e[_0x34e97b(0x237)](_0x944c43);}document[_0x34e97b(0x275)](_0x34e97b(0x240))[_0x5d0325(0x154)]='('+_0x13004e[_0x34e97b(0x2b3)][_0x34e97b(0x1c4)]+_0x34e97b(0x2c4);}function addFrame(){const _0x30fb56=a0_0x56c5,_0x9f2ef=a0_0x38aafa;let _0x303937=getCurrentProject(),_0x232433=_0x303937[_0x9f2ef(0x2b3)][_0x303937[_0x9f2ef(0x2a5)]],_0x53b157=_0x232433[_0x9f2ef(0x262)][_0x9f2ef(0x294)](_0x1445f2=>{const _0x28c059=a0_0xce2f,_0x262100=_0x9f2ef;let _0x3ee5e7=document[_0x262100(0x1d6)](_0x28c059(0x20f));return _0x3ee5e7[_0x262100(0x1b8)]=_0x1445f2[_0x262100(0x1b8)],_0x3ee5e7[_0x262100(0x27c)]=_0x1445f2[_0x262100(0x27c)],_0x3ee5e7[_0x262100(0x2c6)]('2d')[_0x262100(0x1ff)](_0x1445f2,0x0,0x0),_0x3ee5e7;}),_0x287a17=_0x53b157[_0x9f2ef(0x294)](()=>[]),_0x4a507f=_0x53b157[_0x9f2ef(0x294)](()=>[]),_0x3598fb={'layers':_0x53b157,'activeLayer':0x0,'layerHistories':_0x287a17,'layerRedoStacks':_0x4a507f};_0x303937[_0x9f2ef(0x2b3)][_0x9f2ef(0x2b7)](_0x303937[_0x9f2ef(0x2a5)]+0x1,0x0,_0x3598fb),_0x303937[_0x30fb56(0x1ca)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x663982){const _0x54aa5d=a0_0x56c5,_0x4e45d0=a0_0x5049d9,_0x1d09fb=a0_0x38aafa;let _0x1cd7ef=getCurrentProject();if(_0x1cd7ef[_0x54aa5d(0x145)][_0x1d09fb(0x1c4)]<=0x1)return;_0x1cd7ef[_0x4e45d0(0x17f)][_0x4e45d0(0xed)](_0x663982,0x1);if(_0x1cd7ef[_0x1d09fb(0x2a5)]>=_0x1cd7ef[_0x54aa5d(0x145)][_0x1d09fb(0x1c4)])_0x1cd7ef[_0x4e45d0(0x12c)]=_0x1cd7ef[_0x1d09fb(0x2b3)][_0x1d09fb(0x1c4)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x46f02d=a0_0x38aafa;return getCurrentProject()[_0x46f02d(0x2b3)][getCurrentProject()[_0x46f02d(0x2a5)]];}function updateLayerUI(){const _0x557e06=a0_0x56c5,_0x5cac18=a0_0x5049d9,_0x14d664=a0_0x38aafa;let {layers:_0x301204,activeLayer:_0x18e00c}=getCurrentFrame();document[_0x14d664(0x275)](_0x5cac18(0x118))[_0x14d664(0x221)]='('+_0x301204[_0x5cac18(0xf5)]+'枚)';const _0x3d1019=document[_0x14d664(0x275)](_0x14d664(0x23b));_0x3d1019[_0x5cac18(0x1ea)]='';for(let _0x3628b8=_0x301204[_0x14d664(0x1c4)]-0x1;_0x3628b8>=0x0;_0x3628b8--){const _0xbe1237=document[_0x14d664(0x1d6)](_0x5cac18(0x1f1));_0xbe1237[_0x5cac18(0x15c)]=_0x14d664(0x2d7)+(_0x3628b8===_0x18e00c?_0x14d664(0x1e4):''),_0xbe1237[_0x5cac18(0x19d)]=_0x1ade22=>{const _0x895eae=a0_0x56c5,_0x3a9409=_0x14d664;if(_0x1ade22[_0x3a9409(0x2e5)][_0x3a9409(0x22b)][_0x895eae(0xbc)](_0x3a9409(0x20e)))return;getCurrentFrame()[_0x3a9409(0x1b5)]=_0x3628b8,updateLayerUI(),redrawAll();};const _0x261ca6=document[_0x557e06(0xdd)](_0x14d664(0x19d));_0x261ca6[_0x14d664(0x252)]=_0x14d664(0x1f2),_0x261ca6[_0x14d664(0x1b8)]=0x20,_0x261ca6[_0x14d664(0x27c)]=0x20;let _0x522990=_0x261ca6[_0x14d664(0x2c6)]('2d');_0x522990[_0x5cac18(0x172)](0x0,0x0,0x20,0x20),_0x522990[_0x14d664(0x1ff)](_0x301204[_0x3628b8],0x0,0x0,_0x261ca6[_0x14d664(0x1b8)],_0x261ca6[_0x14d664(0x27c)]),_0xbe1237[_0x14d664(0x237)](_0x261ca6);const _0x308c51=document[_0x5cac18(0x1f6)](_0x14d664(0x28e));_0x308c51[_0x14d664(0x221)]=_0x14d664(0x2d6)+(_0x3628b8+0x1),_0xbe1237[_0x14d664(0x237)](_0x308c51);const _0x2818d3=document[_0x14d664(0x1d6)](_0x14d664(0x2a4));_0x2818d3[_0x14d664(0x221)]='↑',_0x2818d3[_0x14d664(0x252)]=_0x14d664(0x20e),_0x2818d3[_0x5cac18(0x124)]=_0x5cac18(0x101),_0x2818d3[_0x14d664(0x256)]=_0x3628b8===_0x301204[_0x14d664(0x1c4)]-0x1,_0x2818d3[_0x14d664(0x234)]=_0x23d905=>{const _0x17f2fc=a0_0x35c9,_0xdb3d2a=_0x14d664;_0x23d905[_0x17f2fc(0x156)](),_0x3628b8<_0x301204[_0xdb3d2a(0x1c4)]-0x1&&swapLayer(_0x3628b8,_0x3628b8+0x1);},_0xbe1237[_0x14d664(0x237)](_0x2818d3);const _0x31b08e=document[_0x5cac18(0x1f6)](_0x5cac18(0x1bf));_0x31b08e[_0x5cac18(0x154)]='↓',_0x31b08e[_0x5cac18(0x15c)]=_0x14d664(0x20e),_0x31b08e[_0x557e06(0xed)]=_0x5cac18(0x186),_0x31b08e[_0x14d664(0x256)]=_0x3628b8===0x0,_0x31b08e[_0x5cac18(0x19d)]=_0x3b2871=>{const _0x15893d=_0x14d664;_0x3b2871[_0x15893d(0x214)](),_0x3628b8>0x0&&swapLayer(_0x3628b8,_0x3628b8-0x1);},_0xbe1237[_0x14d664(0x237)](_0x31b08e);const _0x41a733=document[_0x14d664(0x1d6)](_0x14d664(0x2a4));_0x41a733[_0x14d664(0x221)]='削除',_0x41a733[_0x14d664(0x252)]=_0x14d664(0x20e),_0x41a733[_0x14d664(0x198)]=_0x5cac18(0xdf),_0x41a733[_0x14d664(0x256)]=_0x301204[_0x14d664(0x1c4)]===0x1,_0x41a733[_0x14d664(0x234)]=_0x1ff39f=>{const _0x376425=_0x14d664;_0x1ff39f[_0x376425(0x214)](),removeLayerAt(_0x3628b8);},_0xbe1237[_0x14d664(0x237)](_0x41a733),_0x3d1019[_0x14d664(0x237)](_0xbe1237);}}function swapLayer(_0x4f5b1f,_0xb1ee5d){const _0x5428b1=a0_0x5049d9,_0x561955=a0_0x38aafa;let _0x296873=getCurrentFrame();[_0x296873[_0x561955(0x262)][_0x4f5b1f],_0x296873[_0x561955(0x262)][_0xb1ee5d]]=[_0x296873[_0x561955(0x262)][_0xb1ee5d],_0x296873[_0x561955(0x262)][_0x4f5b1f]],[_0x296873[_0x561955(0x29c)][_0x4f5b1f],_0x296873[_0x5428b1(0x195)][_0xb1ee5d]]=[_0x296873[_0x561955(0x29c)][_0xb1ee5d],_0x296873[_0x5428b1(0x195)][_0x4f5b1f]],[_0x296873[_0x561955(0x2d0)][_0x4f5b1f],_0x296873[_0x561955(0x2d0)][_0xb1ee5d]]=[_0x296873[_0x561955(0x2d0)][_0xb1ee5d],_0x296873[_0x561955(0x2d0)][_0x4f5b1f]];if(_0x296873[_0x561955(0x1b5)]===_0x4f5b1f)_0x296873[_0x561955(0x1b5)]=_0xb1ee5d;else{if(_0x296873[_0x5428b1(0x215)]===_0xb1ee5d)_0x296873[_0x561955(0x1b5)]=_0x4f5b1f;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x545df8){const _0x4483de=a0_0x5049d9,_0x58c886=a0_0x38aafa;let _0x1141ed=getCurrentFrame();if(_0x1141ed[_0x58c886(0x262)][_0x58c886(0x1c4)]<=0x1)return;_0x1141ed[_0x58c886(0x262)][_0x58c886(0x2b7)](_0x545df8,0x1),_0x1141ed[_0x58c886(0x29c)][_0x58c886(0x2b7)](_0x545df8,0x1),_0x1141ed[_0x4483de(0x179)][_0x4483de(0xed)](_0x545df8,0x1);if(_0x1141ed[_0x58c886(0x1b5)]>=_0x1141ed[_0x58c886(0x262)][_0x58c886(0x1c4)])_0x1141ed[_0x4483de(0x215)]=_0x1141ed[_0x58c886(0x262)][_0x58c886(0x1c4)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x52c846=a0_0x5049d9,_0x10aa0d=a0_0x38aafa;let _0x4c26bf=getCurrentProject(),_0x24a2c3=getCurrentFrame(),_0x24e6e4=document[_0x10aa0d(0x1d6)](_0x10aa0d(0x19d));_0x24e6e4[_0x52c846(0x190)]=_0x4c26bf[_0x52c846(0x190)]*cellSize,_0x24e6e4[_0x10aa0d(0x27c)]=_0x4c26bf[_0x52c846(0x13b)]*cellSize,_0x24a2c3[_0x10aa0d(0x262)][_0x10aa0d(0x278)](_0x24e6e4),_0x24a2c3[_0x10aa0d(0x29c)][_0x10aa0d(0x278)]([]),_0x24a2c3[_0x10aa0d(0x2d0)][_0x52c846(0x19e)]([]),_0x24a2c3[_0x52c846(0x215)]=_0x24a2c3[_0x10aa0d(0x262)][_0x52c846(0xf5)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x581563=a0_0x56c5,_0xa8e813=a0_0x5049d9,_0x15f27b=a0_0x38aafa;let _0x3a7b51=getCurrentFrame();if(_0x3a7b51[_0x15f27b(0x262)][_0x15f27b(0x1c4)]<=0x1)return;_0x3a7b51[_0xa8e813(0x13d)][_0xa8e813(0xed)](_0x3a7b51[_0x15f27b(0x1b5)],0x1),_0x3a7b51[_0x15f27b(0x29c)][_0x15f27b(0x2b7)](_0x3a7b51[_0x15f27b(0x1b5)],0x1),_0x3a7b51[_0x15f27b(0x2d0)][_0x581563(0x1e6)](_0x3a7b51[_0x15f27b(0x1b5)],0x1),_0x3a7b51[_0x15f27b(0x1b5)]=Math[_0xa8e813(0x107)](0x0,_0x3a7b51[_0x15f27b(0x1b5)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x44dd9b){const _0x4ed261=a0_0x38aafa;getCurrentFrame()[_0x4ed261(0x1b5)]=parseInt(_0x44dd9b),updateLayerUI();}let PALETTE_COLORS=[a0_0x38aafa(0x1f3),a0_0x38aafa(0x1ba),a0_0x38aafa(0x244),a0_0x38aafa(0x19a),a0_0x38aafa(0x281),a0_0x5049d9(0x1da),a0_0x38aafa(0x265),a0_0x38aafa(0x2c2),a0_0x38aafa(0x266),a0_0x5049d9(0x194),a0_0x38aafa(0x29a),a0_0x38aafa(0x296),a0_0x38aafa(0x291),a0_0x38aafa(0x1b9),a0_0x38aafa(0x1ee),a0_0x38aafa(0x202),a0_0x38aafa(0x26c),a0_0x38aafa(0x269),a0_0x38aafa(0x219),a0_0x5049d9(0x147),a0_0x38aafa(0x25b)],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){const _0x1fb776=a0_0x5049d9,_0x15887a=a0_0x38aafa;let _0x45f38c=getCurrentProject();if(!_0x45f38c||!_0x45f38c[_0x1fb776(0x17f)]||_0x45f38c[_0x15887a(0x2b3)][_0x15887a(0x1c4)]<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0xafecdb=_0x45f38c[_0x15887a(0x2b3)];animationTimer=setInterval(()=>{const _0x1f4c80=_0x1fb776,_0x3d6e01=_0x15887a;ctx[_0x1f4c80(0x172)](0x0,0x0,canvas[_0x3d6e01(0x1b8)],canvas[_0x3d6e01(0x27c)]);let _0x52b9d7=_0xafecdb[animationIndex];for(let _0x1e391f=0x0;_0x1e391f<_0x52b9d7[_0x3d6e01(0x262)][_0x3d6e01(0x1c4)];_0x1e391f++){ctx[_0x3d6e01(0x1ff)](_0x52b9d7[_0x1f4c80(0x13d)][_0x1e391f],0x0,0x0);}drawGrid(_0x45f38c[_0x3d6e01(0x1b8)],_0x45f38c[_0x3d6e01(0x27c)]),animationIndex=(animationIndex+0x1)%_0xafecdb[_0x3d6e01(0x1c4)];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function a0_0x111e(_0xdd67b2,_0x6aad40){_0xdd67b2=_0xdd67b2-0x87;const _0xcb1793=a0_0x3c67();let _0x32cd19=_0xcb1793[_0xdd67b2];return _0x32cd19;}function setAnimationDelay(_0x25708e){const _0x440f7f=a0_0x38aafa;_0x25708e=Math[_0x440f7f(0x2c3)](0xa,parseInt(_0x25708e,0xa)||0x12c),animationDelay=_0x25708e,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x4a85d1){const _0x51a929=a0_0x56c5,_0x1eeb22=a0_0x5049d9,_0x582926=a0_0x38aafa;currentTool=_0x4a85d1,document[_0x582926(0x29b)](_0x582926(0x191))[_0x51a929(0x14c)](_0x46f9ce=>{const _0x5494da=_0x51a929,_0x527289=_0x582926;_0x46f9ce[_0x5494da(0x100)][_0x527289(0x29f)](_0x527289(0x1a9),_0x46f9ce[_0x527289(0x2ba)][_0x527289(0x1be)]===_0x4a85d1);}),document[_0x582926(0x29b)](_0x1eeb22(0x16f))[_0x582926(0x1bd)](_0x3129fe=>{const _0x58ff1b=_0x1eeb22,_0x20217d=_0x582926;_0x3129fe[_0x58ff1b(0x176)][_0x20217d(0x29f)](_0x20217d(0x1a9),_0x3129fe[_0x20217d(0x2ba)][_0x20217d(0x1be)]===_0x4a85d1);}),_0x4a85d1===_0x582926(0x232)?canvas[_0x1eeb22(0x1bb)][_0x1eeb22(0x151)]=_0x582926(0x231):canvas[_0x582926(0x1f8)][_0x582926(0x2bd)]=_0x1eeb22(0x10c);}function setPenSize(_0x244d40){const _0x37cc13=a0_0x5049d9,_0x387850=a0_0x38aafa;penSize=parseInt(_0x244d40)||0x1;let _0x19eca6=document[_0x37cc13(0x192)](_0x387850(0x1c3));if(_0x19eca6)_0x19eca6[_0x387850(0x24e)]=penSize;let _0x3ae140=document[_0x387850(0x275)](_0x387850(0x250));if(_0x3ae140)_0x3ae140[_0x387850(0x24e)]=penSize;}function setPenMode(_0x7e65f1){const _0xba5c6=a0_0x38aafa;penMode=_0x7e65f1;let _0x2ad750=document[_0xba5c6(0x275)](_0xba5c6(0x23a));if(_0x2ad750)_0x2ad750[_0xba5c6(0x24e)]=penMode;let _0xc750e4=document[_0xba5c6(0x275)](_0xba5c6(0x1a1));if(_0xc750e4)_0xc750e4[_0xba5c6(0x24e)]=penMode;}function a0_0x5ad1(){const _0x10a926=a0_0x111e,_0x5d1da3=a0_0x35c9,_0x2a13fa=a0_0x56c5,_0x3c17a2=a0_0x5049d9,_0x471ff5=[_0x3c17a2(0x1db),_0x3c17a2(0x16a),_0x2a13fa(0x1e6),_0x3c17a2(0x125),_0x3c17a2(0x18c),_0x2a13fa(0xc1),_0x3c17a2(0x165),_0x3c17a2(0x1f0),_0x3c17a2(0x151),_0x3c17a2(0x18a),_0x3c17a2(0x1d9),_0x3c17a2(0x126),_0x3c17a2(0x1b8),_0x3c17a2(0x19a),_0x3c17a2(0x107),_0x3c17a2(0x1a6),_0x3c17a2(0x181),_0x3c17a2(0x162),_0x3c17a2(0x191),_0x5d1da3(0x1b2),_0x3c17a2(0x1f1),_0x3c17a2(0x17e),_0x3c17a2(0x178),_0x2a13fa(0x1c0),_0x3c17a2(0x17c),_0x3c17a2(0x226),_0x5d1da3(0x224),_0x3c17a2(0x179),_0x3c17a2(0x1c9),_0x3c17a2(0x21a),_0x3c17a2(0x1f7),_0x3c17a2(0xe1),_0x3c17a2(0x1e3),_0x5d1da3(0x1bf),_0x3c17a2(0x170),_0x3c17a2(0x158),_0x2a13fa(0x165),_0x3c17a2(0x22e),_0x3c17a2(0xe8),_0x3c17a2(0x142),_0x3c17a2(0x123),_0x3c17a2(0x1c6),_0x5d1da3(0x188),_0x3c17a2(0x1cd),_0x3c17a2(0x1c4),_0x2a13fa(0xf9),_0x2a13fa(0x1a1),_0x3c17a2(0x1f2),_0x10a926(0x1e9),_0x3c17a2(0x1c1),_0x2a13fa(0xe0),_0x3c17a2(0x114),_0x3c17a2(0x11b),_0x5d1da3(0x11e),_0x3c17a2(0x237),_0x3c17a2(0x144),_0x2a13fa(0xab),_0x3c17a2(0x122),_0x3c17a2(0x148),_0x2a13fa(0x114),_0x2a13fa(0x110),_0x2a13fa(0x10e),_0x2a13fa(0x1c5),_0x3c17a2(0x1b2),_0x3c17a2(0x1e8),_0x3c17a2(0x238),_0x3c17a2(0x180),_0x3c17a2(0x231),_0x3c17a2(0x11a),_0x3c17a2(0x1fd),_0x2a13fa(0x1af),_0x3c17a2(0x110),_0x3c17a2(0xfc),_0x3c17a2(0x1aa),_0x3c17a2(0x233),_0x3c17a2(0xf0),_0x3c17a2(0x22f),_0x3c17a2(0x224),_0x3c17a2(0xdb),_0x3c17a2(0x1af),_0x3c17a2(0x100),_0x3c17a2(0x219),_0x3c17a2(0x14c),_0x5d1da3(0x117),_0x3c17a2(0x20e),_0x3c17a2(0xf8),_0x2a13fa(0x142),_0x2a13fa(0xed),_0x3c17a2(0x15e),_0x2a13fa(0x1cb),_0x2a13fa(0x1a0),_0x3c17a2(0x188),_0x3c17a2(0x20f),_0x5d1da3(0x15b),_0x3c17a2(0x160),_0x3c17a2(0x10e),_0x3c17a2(0x206),_0x3c17a2(0x14d),_0x2a13fa(0xd2),_0x2a13fa(0xde),_0x3c17a2(0x1a9),_0x2a13fa(0x162),_0x3c17a2(0xfe),_0x3c17a2(0x169),_0x3c17a2(0x19f),_0x3c17a2(0xdc),_0x3c17a2(0x173),_0x5d1da3(0x130),_0x2a13fa(0x1f9),_0x10a926(0x1d6),_0x2a13fa(0x1c9),_0x5d1da3(0x14f),_0x2a13fa(0xb2),_0x2a13fa(0xba),_0x3c17a2(0x1ec),_0x3c17a2(0x1be),_0x2a13fa(0xc0),_0x3c17a2(0x121),_0x3c17a2(0x14a),_0x3c17a2(0x190),_0x3c17a2(0xf2),_0x3c17a2(0x202),_0x3c17a2(0x1d8),_0x3c17a2(0x155),_0x3c17a2(0x10a),_0x2a13fa(0xf2),_0x2a13fa(0xc8),_0x3c17a2(0x196),_0x3c17a2(0x236),_0x5d1da3(0x1db),_0x3c17a2(0xde),_0x3c17a2(0xf5),_0x2a13fa(0x1fc),_0x3c17a2(0x140),_0x3c17a2(0x22c),_0x3c17a2(0x1a4),_0x3c17a2(0x1d0),_0x2a13fa(0x1c4),_0x5d1da3(0x228),_0x3c17a2(0x13a),_0x2a13fa(0x12f),_0x3c17a2(0x187),_0x3c17a2(0x235),_0x3c17a2(0x208),_0x3c17a2(0x19c),_0x3c17a2(0x174),_0x3c17a2(0x1fb),_0x3c17a2(0x108),_0x3c17a2(0xe5),_0x3c17a2(0x1f6),_0x2a13fa(0x128),_0x3c17a2(0x102),_0x3c17a2(0x211),_0x3c17a2(0x198),_0x3c17a2(0x14f),_0x2a13fa(0x113),_0x2a13fa(0x1b0),_0x3c17a2(0x189),_0x3c17a2(0x1b5),_0x3c17a2(0xec),_0x5d1da3(0x162),_0x3c17a2(0x22a),_0x3c17a2(0x18e),_0x3c17a2(0x223),_0x2a13fa(0x19f),_0x3c17a2(0x138),_0x3c17a2(0x1bc),_0x3c17a2(0x1c5),_0x3c17a2(0x234),_0x3c17a2(0x11e),_0x3c17a2(0xdd),_0x2a13fa(0x16a),_0x3c17a2(0x1c8),_0x10a926(0x189),_0x3c17a2(0x1c0),_0x3c17a2(0x117),_0x3c17a2(0x1ca),_0x2a13fa(0x1c7),_0x3c17a2(0x1a5),_0x3c17a2(0x15d),_0x3c17a2(0x218),_0x3c17a2(0x10d),_0x3c17a2(0x185),_0x2a13fa(0x178),_0x3c17a2(0x229),_0x3c17a2(0xe0),_0x2a13fa(0x1bd),_0x3c17a2(0x1b7),_0x3c17a2(0x1ce),_0x3c17a2(0x1df),_0x3c17a2(0x230),_0x2a13fa(0xd4),_0x3c17a2(0x159),_0x2a13fa(0x18a),_0x3c17a2(0x175),_0x3c17a2(0x1d6),_0x3c17a2(0x20d),_0x3c17a2(0x157),_0x3c17a2(0x1fa),_0x3c17a2(0x103),_0x2a13fa(0x17f),_0x3c17a2(0x1e7),_0x3c17a2(0x200),_0x3c17a2(0xfa),_0x2a13fa(0xb3),_0x2a13fa(0x11e),_0x3c17a2(0x1d2),_0x3c17a2(0x12a),_0x3c17a2(0x141),_0x3c17a2(0x1fe),_0x3c17a2(0x1ef),_0x3c17a2(0x15a),_0x3c17a2(0x1de),_0x3c17a2(0x10b),_0x3c17a2(0x171),_0x3c17a2(0x1d7),_0x3c17a2(0x1e0),_0x3c17a2(0x207),_0x3c17a2(0x232),_0x3c17a2(0x14b),_0x3c17a2(0x1a3),_0x3c17a2(0x17a),_0x3c17a2(0x166),_0x3c17a2(0x16c),_0x3c17a2(0x154),_0x3c17a2(0x18b),_0x3c17a2(0x20b),_0x3c17a2(0xea),_0x2a13fa(0x169),_0x3c17a2(0x1f8),_0x5d1da3(0x163),_0x2a13fa(0x17b),_0x3c17a2(0x1ba),_0x2a13fa(0x176),_0x3c17a2(0x176),_0x3c17a2(0x1f4),_0x3c17a2(0x172),_0x3c17a2(0x16b),_0x3c17a2(0x1eb),_0x2a13fa(0x11f),_0x3c17a2(0x199),_0x5d1da3(0x20b),_0x2a13fa(0xd0),_0x3c17a2(0x19d),_0x2a13fa(0xc6),_0x3c17a2(0x109),_0x3c17a2(0x1c2),_0x3c17a2(0x21f),_0x3c17a2(0x1e1),_0x2a13fa(0x190),'layerList',_0x3c17a2(0x177),_0x2a13fa(0x147),_0x2a13fa(0x1a3),_0x3c17a2(0x1f5),_0x3c17a2(0x112),_0x5d1da3(0x133),_0x3c17a2(0x1dd),_0x3c17a2(0x1ae),_0x3c17a2(0x17b),_0x3c17a2(0x16e),_0x3c17a2(0x1b6),_0x10a926(0x156),_0x3c17a2(0x1d4),_0x3c17a2(0x132),_0x3c17a2(0x116),_0x3c17a2(0x145),_0x3c17a2(0x19b),_0x3c17a2(0x22d),_0x3c17a2(0x12e),_0x3c17a2(0x1a7),_0x3c17a2(0x225),_0x2a13fa(0x15c),_0x2a13fa(0xc9),_0x3c17a2(0xf7),_0x2a13fa(0x195),_0x3c17a2(0x134),_0x3c17a2(0x1d1),_0x3c17a2(0x20c),_0x2a13fa(0x153),_0x3c17a2(0x130),_0x3c17a2(0x1d5),_0x3c17a2(0x1e4),_0x3c17a2(0x143),_0x3c17a2(0x12b),_0x3c17a2(0x1e2),_0x3c17a2(0x1ea),_0x5d1da3(0xe9),_0x2a13fa(0x136),_0x3c17a2(0x13d),_0x5d1da3(0x1a5),_0x2a13fa(0x173),_0x5d1da3(0x152),_0x3c17a2(0x13c),_0x3c17a2(0x164),_0x5d1da3(0x17e),_0x3c17a2(0x15f),_0x3c17a2(0x11d),_0x3c17a2(0xe6),_0x2a13fa(0x140),_0x3c17a2(0x212),_0x3c17a2(0x137),_0x3c17a2(0x167),_0x3c17a2(0x1dc),_0x3c17a2(0x120),_0x5d1da3(0x16f),_0x3c17a2(0x228),_0x3c17a2(0x1e6),_0x5d1da3(0x116),_0x3c17a2(0x14e),_0x3c17a2(0x1ff),_0x3c17a2(0x19e),_0x3c17a2(0x163),_0x3c17a2(0x21b),_0x3c17a2(0x1cb),_0x2a13fa(0x1ff),_0x3c17a2(0x127),_0x3c17a2(0x21c),_0x3c17a2(0x13f),_0x3c17a2(0x1b0),_0x3c17a2(0x105),_0x5d1da3(0x19c),_0x3c17a2(0x161),_0x3c17a2(0x139),_0x3c17a2(0x119),_0x3c17a2(0x1b1),_0x5d1da3(0x169),_0x3c17a2(0x20a),_0x5d1da3(0x1be),_0x3c17a2(0x1e5),_0x3c17a2(0x115),_0x3c17a2(0x1b4),_0x2a13fa(0x1ba),_0x3c17a2(0x111),_0x2a13fa(0x163),_0x3c17a2(0x1ad),_0x3c17a2(0x10f),_0x3c17a2(0x104),_0x3c17a2(0x113),_0x3c17a2(0x18f),_0x3c17a2(0x182),_0x3c17a2(0x222),_0x3c17a2(0x11c),_0x3c17a2(0x213),_0x3c17a2(0x214),_0x10a926(0x149),_0x3c17a2(0xe9),_0x3c17a2(0x195),_0x2a13fa(0x129),_0x3c17a2(0x1cc),_0x3c17a2(0x184),_0x3c17a2(0x1cf),_0x3c17a2(0x1b3),_0x3c17a2(0x152),_0x3c17a2(0x220),_0x3c17a2(0x1bf),_0x3c17a2(0x12c),_0x3c17a2(0x146),_0x2a13fa(0x127),_0x5d1da3(0xf1),_0x3c17a2(0x131),_0x3c17a2(0x1bd),_0x3c17a2(0x1f3),_0x3c17a2(0x22b),_0x3c17a2(0x221),_0x3c17a2(0x135),_0x3c17a2(0xe3),_0x3c17a2(0x106),_0x5d1da3(0x121),_0x3c17a2(0x1ed),_0x3c17a2(0x17f),_0x3c17a2(0x1c7)];return a0_0x5ad1=function(){return _0x471ff5;},a0_0x5ad1();}function hexToRgba(_0x1db8a0,_0x15681e=0x1){const _0x5da817=a0_0x5049d9,_0x8a9afc=a0_0x38aafa;if(_0x1db8a0===_0x8a9afc(0x1f3)||_0x1db8a0===_0x8a9afc(0x25c))return[0x0,0x0,0x0,0x0];_0x1db8a0=_0x1db8a0[_0x8a9afc(0x27d)]('#','');if(_0x1db8a0[_0x8a9afc(0x1c4)]===0x3)_0x1db8a0=_0x1db8a0[_0x8a9afc(0x285)]('')[_0x5da817(0x18f)](_0x4cf7a0=>_0x4cf7a0+_0x4cf7a0)[_0x5da817(0xf9)]('');let _0x4e7c26=parseInt(_0x1db8a0,0x10);return[_0x4e7c26>>0x10&0xff,_0x4e7c26>>0x8&0xff,_0x4e7c26&0xff,Math[_0x8a9afc(0x26f)](0xff*_0x15681e)];}function fillAt(_0x20e6a8,_0x5ad8fe){const _0xbbde1f=a0_0x35c9,_0x357dcc=a0_0x56c5,_0x21003a=a0_0x5049d9,_0x5d48de=a0_0x38aafa;let _0x57f2dc=getCurrentProject(),_0x204617=getCurrentFrame(),_0x4a9a51=_0x204617[_0x5d48de(0x262)][_0x204617[_0x5d48de(0x1b5)]][_0x5d48de(0x2c6)]('2d'),_0x2a0e4c=_0x4a9a51[_0x5d48de(0x287)](0x0,0x0,_0x57f2dc[_0x5d48de(0x1b8)]*cellSize,_0x57f2dc[_0x5d48de(0x27c)]*cellSize),_0x47637c=_0x20e6a8*cellSize,_0x2a209c=_0x5ad8fe*cellSize,_0xb69622=getPixel(_0x2a0e4c,_0x47637c,_0x2a209c),_0x557bd0=currentColor===_0x21003a(0x1a5)||currentColor===_0x5d48de(0x25c)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0xb69622,_0x557bd0))return;let _0x382d02=[[_0x20e6a8,_0x5ad8fe]],_0x5950fc=new Set();while(_0x382d02[_0x5d48de(0x1c4)]){let [_0x25b6d4,_0x427907]=_0x382d02[_0xbbde1f(0x15e)]();if(_0x25b6d4<0x0||_0x427907<0x0||_0x25b6d4>=_0x57f2dc[_0x357dcc(0x13a)]||_0x427907>=_0x57f2dc[_0x5d48de(0x27c)])continue;let _0x2e5e4d=_0x25b6d4+','+_0x427907;if(_0x5950fc[_0x5d48de(0x2bb)](_0x2e5e4d))continue;_0x5950fc[_0x5d48de(0x1de)](_0x2e5e4d);let _0x37380e=_0x25b6d4*cellSize,_0xe15803=_0x427907*cellSize,_0x7a43f1=getPixel(_0x2a0e4c,_0x37380e,_0xe15803);if(!colorsMatch(_0x7a43f1,_0xb69622))continue;for(let _0x129f29=0x0;_0x129f29<cellSize;_0x129f29++){for(let _0x28b41e=0x0;_0x28b41e<cellSize;_0x28b41e++){setPixel(_0x2a0e4c,_0x37380e+_0x28b41e,_0xe15803+_0x129f29,_0x557bd0);}}_0x382d02[_0x5d48de(0x278)]([_0x25b6d4+0x1,_0x427907]),_0x382d02[_0x5d48de(0x278)]([_0x25b6d4-0x1,_0x427907]),_0x382d02[_0x5d48de(0x278)]([_0x25b6d4,_0x427907+0x1]),_0x382d02[_0x21003a(0x19e)]([_0x25b6d4,_0x427907-0x1]);}_0x4a9a51[_0x5d48de(0x19f)](_0x2a0e4c,0x0,0x0),redrawAll();}function getPixel(_0xa1736f,_0x6b8dc,_0x3a682d){const _0x8389d7=a0_0x56c5,_0x48c014=a0_0x5049d9,_0x19acd1=a0_0x38aafa;let _0x5193e9=(_0x3a682d*_0xa1736f[_0x8389d7(0x13a)]+_0x6b8dc)*0x4;return[_0xa1736f[_0x8389d7(0x136)][_0x5193e9],_0xa1736f[_0x48c014(0x15b)][_0x5193e9+0x1],_0xa1736f[_0x19acd1(0x261)][_0x5193e9+0x2],_0xa1736f[_0x19acd1(0x261)][_0x5193e9+0x3]];}function setPixel(_0x400f03,_0x566fd0,_0x313b34,_0x27b32a){const _0x3bafd9=a0_0x56c5,_0x5a92bb=a0_0x38aafa;let _0x3b1b12=(_0x313b34*_0x400f03[_0x5a92bb(0x1b8)]+_0x566fd0)*0x4;_0x400f03[_0x5a92bb(0x261)][_0x3b1b12]=_0x27b32a[0x0],_0x400f03[_0x5a92bb(0x261)][_0x3b1b12+0x1]=_0x27b32a[0x1],_0x400f03[_0x3bafd9(0x136)][_0x3b1b12+0x2]=_0x27b32a[0x2],_0x400f03[_0x5a92bb(0x261)][_0x3b1b12+0x3]=_0x27b32a[0x3];}function colorsMatch(_0x57de16,_0x4a1f63){return _0x57de16[0x0]===_0x4a1f63[0x0]&&_0x57de16[0x1]===_0x4a1f63[0x1]&&_0x57de16[0x2]===_0x4a1f63[0x2]&&_0x57de16[0x3]===_0x4a1f63[0x3];}function handleMouseDown(_0x39d2ff){const _0x4498e1=a0_0x5049d9,_0x1214f6=a0_0x38aafa;isDrawing=!![];const _0x370324=getCanvasCoords(_0x39d2ff),_0x2246a0=Math[_0x1214f6(0x1a7)](_0x370324['x']/cellSize),_0x1db64d=Math[_0x4498e1(0xfe)](_0x370324['y']/cellSize);currentTool===_0x1214f6(0x1a8)?(fillAt(_0x2246a0,_0x1db64d),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x2246a0,_0x1db64d),lastMouse={'x':_0x2246a0,'y':_0x1db64d});}function handleMouseMove(_0x3821c7){const _0x2ad79b=a0_0x5049d9,_0x4232cd=a0_0x38aafa;if(!isDrawing)return;const _0x3455ca=getCanvasCoords(_0x3821c7),_0x1a9312=Math[_0x4232cd(0x1a7)](_0x3455ca['x']/cellSize),_0x617eca=Math[_0x4232cd(0x1a7)](_0x3455ca['y']/cellSize);if(!lastMouse){drawDotXY(_0x1a9312,_0x617eca),lastMouse={'x':_0x1a9312,'y':_0x617eca};return;}const _0x1b6c0e=_0x1a9312-lastMouse['x'],_0x52b570=_0x617eca-lastMouse['y'],_0x5cf825=Math[_0x4232cd(0x2c3)](Math[_0x4232cd(0x1a6)](_0x1b6c0e),Math[_0x4232cd(0x1a6)](_0x52b570));if(_0x5cf825<=0x1)drawDotXY(_0x1a9312,_0x617eca);else for(let _0x5b8d79=0x1;_0x5b8d79<=_0x5cf825;_0x5b8d79++){const _0x5a1529=Math[_0x2ad79b(0x167)](lastMouse['x']+_0x1b6c0e*_0x5b8d79/_0x5cf825),_0xf64040=Math[_0x4232cd(0x26f)](lastMouse['y']+_0x52b570*_0x5b8d79/_0x5cf825);drawDotXY(_0x5a1529,_0xf64040);}lastMouse={'x':_0x1a9312,'y':_0x617eca};}function handleMouseUp(_0x36cc4c){isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0x2936b2){const _0x417bee=a0_0x5049d9,_0x3fc0e4=a0_0x38aafa,_0x49c1ac=canvas[_0x3fc0e4(0x280)]();let _0xe32157=_0x2936b2[_0x3fc0e4(0x2d8)]&&_0x2936b2[_0x3fc0e4(0x2d8)][0x0]?_0x2936b2[_0x3fc0e4(0x2d8)][0x0]:_0x2936b2[_0x417bee(0x203)][0x0];const _0x5ad961=canvas[_0x3fc0e4(0x1b8)]/_0x49c1ac[_0x417bee(0x190)],_0x42b969=canvas[_0x3fc0e4(0x27c)]/_0x49c1ac[_0x3fc0e4(0x27c)],_0x3dd646=_0xe32157[_0x3fc0e4(0x193)],_0x477360=_0xe32157[_0x3fc0e4(0x25d)],_0x454b31=(_0x3dd646-_0x49c1ac[_0x3fc0e4(0x2a7)])*_0x5ad961,_0x22078f=(_0x477360-_0x49c1ac[_0x3fc0e4(0x196)])*_0x42b969;return{'x':Math[_0x3fc0e4(0x1a7)](_0x454b31/cellSize),'y':Math[_0x3fc0e4(0x1a7)](_0x22078f/cellSize)};}function handleTouchStart(_0x5dfab9){const _0x33e985=a0_0x56c5,_0xf7fca8=a0_0x5049d9,_0x356ff3=a0_0x38aafa;if(_0x5dfab9[_0xf7fca8(0x158)][_0x356ff3(0x1c4)]===0x2){_0x5dfab9[_0x356ff3(0x1ce)](),isPinching=!![],isDrawing=![];const _0x2586d0=_0x5dfab9[_0x356ff3(0x2d8)][0x0],_0xb500fb=_0x5dfab9[_0x356ff3(0x2d8)][0x1];pinchStartDistance=Math[_0x356ff3(0x18d)](_0xb500fb[_0x33e985(0x119)]-_0x2586d0[_0x356ff3(0x193)],_0xb500fb[_0x356ff3(0x25d)]-_0x2586d0[_0xf7fca8(0x12b)]),pinchStartMid={'clientX':(_0x2586d0[_0x356ff3(0x193)]+_0xb500fb[_0x356ff3(0x193)])/0x2,'clientY':(_0x2586d0[_0x356ff3(0x25d)]+_0xb500fb[_0x356ff3(0x25d)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x356ff3(0x280)]();}else{if(_0x5dfab9[_0x356ff3(0x2d8)][_0x356ff3(0x1c4)]===0x1){_0x5dfab9[_0xf7fca8(0x187)]();if(isPinching)return;isDrawing=!![];let _0x40b4ee=getTouchPos(_0x5dfab9);lastTouch=_0x40b4ee,currentTool===_0x356ff3(0x1a8)?(fillAt(_0x40b4ee['x'],_0x40b4ee['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x40b4ee['x'],_0x40b4ee['y']);}}}function handleTouchMove(_0x4e52bb){const _0x19571f=a0_0x35c9,_0x2a3990=a0_0x56c5,_0x3c1188=a0_0x5049d9,_0x17bb06=a0_0x38aafa;if(isPinching||_0x4e52bb[_0x17bb06(0x2d8)]&&_0x4e52bb[_0x3c1188(0x158)][_0x17bb06(0x1c4)]===0x2){_0x4e52bb[_0x17bb06(0x1ce)]();const _0x401301=_0x4e52bb[_0x17bb06(0x2d8)][0x0],_0x39dbd6=_0x4e52bb[_0x17bb06(0x2d8)][0x1],_0x1ee9c7=Math[_0x2a3990(0xaf)](_0x39dbd6[_0x17bb06(0x193)]-_0x401301[_0x17bb06(0x193)],_0x39dbd6[_0x3c1188(0x12b)]-_0x401301[_0x17bb06(0x25d)]),_0x2043fb={'clientX':(_0x401301[_0x17bb06(0x193)]+_0x39dbd6[_0x17bb06(0x193)])/0x2,'clientY':(_0x401301[_0x3c1188(0x12b)]+_0x39dbd6[_0x17bb06(0x25d)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x1ee9c7||0x1;const _0x50c31e=_0x1ee9c7/pinchStartDistance||0x1;let _0x3c41cf=pinchStartScale*_0x50c31e;_0x3c41cf=Math[_0x3c1188(0x18d)](Math[_0x17bb06(0x2c3)](_0x3c41cf,0.2),0x5);const _0x440dd1=pinchRect||canvas[_0x3c1188(0x1b0)](),_0x306a43=(pinchStartMid[_0x17bb06(0x193)]-_0x440dd1[_0x17bb06(0x2a7)]-pinchStartPosX)/pinchStartScale,_0x463205=(pinchStartMid[_0x3c1188(0x12b)]-_0x440dd1[_0x17bb06(0x196)]-pinchStartPosY)/pinchStartScale;posX=_0x2043fb[_0x17bb06(0x193)]-_0x440dd1[_0x17bb06(0x2a7)]-_0x306a43*_0x3c41cf,posY=_0x2043fb[_0x19571f(0x19d)]-_0x440dd1[_0x17bb06(0x196)]-_0x463205*_0x3c41cf,scale=_0x3c41cf,updateTransform();return;}if(!isDrawing)return;if(_0x4e52bb[_0x19571f(0xc9)]&&_0x4e52bb[_0x17bb06(0x2d8)][_0x3c1188(0xf5)]>0x1)return;_0x4e52bb[_0x2a3990(0xfd)]();let _0x308cf8=getTouchPos(_0x4e52bb);if(lastTouch){let _0x2fbf92=Math[_0x17bb06(0x1a6)]((_0x308cf8['x']-lastTouch['x'])*cellSize),_0x4fcfcc=Math[_0x17bb06(0x1a6)]((_0x308cf8['y']-lastTouch['y'])*cellSize);if(_0x2fbf92>=PAN_CANCEL_DISTANCE||_0x4fcfcc>=PAN_CANCEL_DISTANCE){if(currentTool!==_0x17bb06(0x182)){isDrawing=![];return;}}}if(lastTouch){let _0x404f12=_0x308cf8['x']-lastTouch['x'],_0x379525=_0x308cf8['y']-lastTouch['y'],_0x1c71b5=Math[_0x3c1188(0x107)](Math[_0x3c1188(0x11f)](_0x404f12),Math[_0x17bb06(0x1a6)](_0x379525));for(let _0x5dae30=0x1;_0x5dae30<=_0x1c71b5;_0x5dae30++){let _0x3c9d1e=Math[_0x17bb06(0x26f)](lastTouch['x']+_0x404f12*_0x5dae30/_0x1c71b5),_0x2f5a6e=Math[_0x17bb06(0x26f)](lastTouch['y']+_0x379525*_0x5dae30/_0x1c71b5);drawDotTouch(_0x3c9d1e,_0x2f5a6e);}}else drawDotTouch(_0x308cf8['x'],_0x308cf8['y']);lastTouch=_0x308cf8;}function handleTouchEnd(_0x32df55){const _0x390671=a0_0x111e,_0x331e64=a0_0x5049d9,_0x3eb680=a0_0x38aafa;isPinching&&_0x32df55[_0x3eb680(0x2d8)]&&_0x32df55[_0x331e64(0x158)][_0x3eb680(0x1c4)]<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null),isDrawing&&(!_0x32df55[_0x331e64(0x158)]||_0x32df55[_0x3eb680(0x2d8)][_0x390671(0x1df)]===0x0)&&saveHistory();if(_0x32df55[_0x331e64(0x158)]&&_0x32df55[_0x3eb680(0x2d8)][_0x3eb680(0x1c4)]===0x1){let _0x409e14=_0x32df55[_0x3eb680(0x2d8)][0x0];lastTouch=getTouchPos({'touches':[_0x409e14]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function drawDotXY(_0x5899dc,_0x359a07){const _0x337501=a0_0x35c9,_0x10be0c=a0_0x56c5,_0x4f385b=a0_0x5049d9,_0x58416a=a0_0x38aafa;let _0x1f7249=getCurrentProject(),_0x3a44bf=getCurrentFrame();if(!_0x3a44bf||!_0x1f7249)return;if(typeof _0x5899dc!==_0x58416a(0x1a2)||typeof _0x359a07!==_0x58416a(0x1a2)||_0x5899dc<0x0||_0x359a07<0x0||!Number[_0x337501(0xe7)](_0x1f7249[_0x4f385b(0x190)])||!Number[_0x4f385b(0x115)](_0x1f7249[_0x58416a(0x27c)])||_0x5899dc>=_0x1f7249[_0x4f385b(0x190)]||_0x359a07>=_0x1f7249[_0x58416a(0x27c)]||!Array[_0x58416a(0x19c)](_0x3a44bf[_0x4f385b(0x13d)])||typeof _0x3a44bf[_0x58416a(0x1b5)]!==_0x58416a(0x1a2)||!_0x3a44bf[_0x58416a(0x262)][_0x3a44bf[_0x4f385b(0x215)]])return;let _0x5a6e5e=_0x3a44bf[_0x58416a(0x262)][_0x3a44bf[_0x4f385b(0x215)]][_0x58416a(0x2c6)]('2d');if(!_0x5a6e5e)return;if(currentTool===_0x10be0c(0xd1)||currentColor===_0x58416a(0x1f3)||currentColor===_0x58416a(0x25c)||currentAlpha===0x0)drawPenShape(_0x5a6e5e,_0x5899dc,_0x359a07,_0x58416a(0x25c),!![]);else{let _0x20cdbc=hexToRgba(currentColor,currentAlpha);_0x5a6e5e[_0x58416a(0x1fe)](),_0x5a6e5e[_0x58416a(0x2a0)]=_0x20cdbc[0x3]/0xff,drawPenShape(_0x5a6e5e,_0x5899dc,_0x359a07,_0x58416a(0x210)+_0x20cdbc[0x0]+','+_0x20cdbc[0x1]+','+_0x20cdbc[0x2]+','+_0x20cdbc[0x3]/0xff+')',![]),_0x5a6e5e[_0x58416a(0x2df)]();}redrawAll();}function drawPenShape(_0x232063,_0x43cad8,_0x5d6bc9,_0x1269f9,_0x1fb1a5){const _0x288fa9=a0_0x56c5,_0x4bcfa8=a0_0x5049d9,_0x49f2c4=a0_0x38aafa,_0x51a73e=_0x43cad8*cellSize,_0x29691d=_0x5d6bc9*cellSize,_0x5916bb=penSize*cellSize;_0x1fb1a5?(_0x232063[_0x49f2c4(0x1fe)](),_0x232063[_0x49f2c4(0x20d)]=_0x49f2c4(0x2d5),penMode===_0x49f2c4(0x2ea)?(_0x232063[_0x49f2c4(0x2eb)](),_0x232063[_0x49f2c4(0x24a)](_0x51a73e+cellSize/0x2,_0x29691d+cellSize/0x2,_0x5916bb/0x2,0x0,Math['PI']*0x2),_0x232063[_0x49f2c4(0x1a8)]()):_0x232063[_0x49f2c4(0x22d)](_0x51a73e-Math[_0x49f2c4(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x29691d-Math[_0x49f2c4(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x5916bb,_0x5916bb),_0x232063[_0x49f2c4(0x2df)]()):(_0x232063[_0x49f2c4(0x1fe)](),_0x232063[_0x49f2c4(0x2aa)]=_0x1269f9,penMode===_0x49f2c4(0x2ea)?(_0x232063[_0x4bcfa8(0x237)](),_0x232063[_0x49f2c4(0x24a)](_0x51a73e+cellSize/0x2,_0x29691d+cellSize/0x2,_0x5916bb/0x2,0x0,Math['PI']*0x2),_0x232063[_0x288fa9(0x10d)]()):_0x232063[_0x49f2c4(0x216)](_0x51a73e-Math[_0x4bcfa8(0xfe)]((penSize-0x1)/0x2)*cellSize,_0x29691d-Math[_0x49f2c4(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x5916bb,_0x5916bb),_0x232063[_0x49f2c4(0x2df)]());}function a0_0x22a5(){const _0x179a89=a0_0x111e,_0x4112fe=a0_0x35c9,_0x2c8680=[_0x4112fe(0x184),_0x179a89(0xed),_0x179a89(0x12a),_0x4112fe(0x1bd),_0x4112fe(0x1e1),_0x179a89(0x144),'#palette-toolbar\x20.tool-btn',_0x4112fe(0x13b),_0x179a89(0x14f),_0x4112fe(0x14d),_0x4112fe(0x20d),_0x4112fe(0x213),_0x4112fe(0x1c8),_0x4112fe(0x112),_0x179a89(0x15c),_0x4112fe(0x102),_0x179a89(0x8e),_0x4112fe(0x103),_0x4112fe(0x11f),_0x4112fe(0x189),_0x179a89(0x131),_0x4112fe(0x134),_0x4112fe(0x19e),_0x179a89(0x191),_0x4112fe(0x12c),_0x4112fe(0x16c),'onload',_0x4112fe(0xfa),_0x179a89(0x10a),_0x4112fe(0x1df),_0x4112fe(0x16b),_0x4112fe(0xc8),_0x4112fe(0x20e),_0x4112fe(0xd0),_0x179a89(0xa9),_0x4112fe(0x1ca),_0x4112fe(0x1b7),_0x4112fe(0x1ab),_0x4112fe(0x14a),_0x4112fe(0x18f),_0x4112fe(0x1e8),_0x4112fe(0xea),_0x179a89(0x10d),_0x4112fe(0x144),_0x179a89(0x88),_0x4112fe(0x1c5),_0x4112fe(0x20a),_0x4112fe(0x171),'touchmove',_0x4112fe(0x199),_0x4112fe(0xf0),_0x4112fe(0xca),_0x4112fe(0x179),_0x4112fe(0x113),_0x4112fe(0x215),_0x179a89(0x11f),_0x4112fe(0x124),_0x179a89(0xef),_0x4112fe(0x1ef),_0x4112fe(0x19a),'application/octet-stream',_0x4112fe(0x187),_0x4112fe(0x203),'1780284xxbNLL',_0x4112fe(0x178),'GIF',_0x4112fe(0x1a8),_0x179a89(0xd8),_0x4112fe(0x180),_0x4112fe(0x151),_0x179a89(0x182),'documentElement',_0x4112fe(0x16a),_0x4112fe(0x108),_0x179a89(0x1e8),_0x4112fe(0x183),_0x4112fe(0x1ee),_0x4112fe(0x211),_0x4112fe(0x1b0),_0x4112fe(0x116),_0x4112fe(0x17d),_0x4112fe(0x1d3),_0x179a89(0x1af),_0x4112fe(0x216),_0x4112fe(0x1bb),_0x4112fe(0x14b),_0x4112fe(0xe3),_0x4112fe(0x21b),_0x4112fe(0x15c),_0x179a89(0x16d),'Enter',_0x4112fe(0x157),_0x179a89(0x111),_0x4112fe(0x21d),_0x179a89(0x121),_0x4112fe(0x17a),_0x4112fe(0x143),_0x4112fe(0x1f3),_0x4112fe(0x119),_0x4112fe(0xde),_0x4112fe(0xff),_0x4112fe(0x141),_0x4112fe(0xec),_0x4112fe(0xe0),'9167048BqRjmr',_0x4112fe(0x21f),_0x4112fe(0xef),_0x179a89(0x1b1),_0x4112fe(0xcf),'trim',_0x4112fe(0x132),_0x4112fe(0xf7),_0x179a89(0xa4),_0x4112fe(0xf8),_0x4112fe(0x202),_0x4112fe(0x19d),_0x4112fe(0x104),_0x4112fe(0x18d),_0x4112fe(0x175),_0x4112fe(0xe2),_0x4112fe(0xf3),_0x4112fe(0xeb),_0x4112fe(0x1e6),'encode',_0x179a89(0xf3),_0x179a89(0x15a),_0x179a89(0x11b),_0x4112fe(0x13a),_0x179a89(0x1ba),_0x4112fe(0xf5),'#ff69b4',_0x4112fe(0x109),_0x4112fe(0x1b5),_0x4112fe(0x115),_0x4112fe(0x170),_0x4112fe(0x201),_0x4112fe(0x1fc),_0x4112fe(0x21c),_0x4112fe(0x1fb),_0x179a89(0x15b),_0x4112fe(0x16d),_0x4112fe(0x1f1),_0x179a89(0x13e),_0x4112fe(0x17c),_0x4112fe(0x138),_0x4112fe(0x1c9),'then',_0x179a89(0x15f),_0x4112fe(0x168),_0x4112fe(0x181),_0x4112fe(0x10e),_0x4112fe(0x1d2),_0x4112fe(0xcc),_0x4112fe(0xf2),_0x4112fe(0x15f),'72fOvfXp',_0x179a89(0xb4),_0x179a89(0x162),_0x179a89(0x17d),'result',_0x179a89(0x1ee),_0x4112fe(0x210),_0x4112fe(0x194),_0x4112fe(0x218),_0x4112fe(0xfe),_0x4112fe(0x1e9),'push',_0x179a89(0x16f),_0x179a89(0x163),_0x4112fe(0x1c1),_0x4112fe(0x12a),_0x4112fe(0x1ce),'このブラウザはWebCodecsによるWEBPアニメーションに対応していません。',_0x4112fe(0x1ba),_0x4112fe(0x145),_0x4112fe(0x18a),_0x4112fe(0x11a),'render',_0x179a89(0x100),_0x4112fe(0x12e),_0x4112fe(0xda),_0x4112fe(0x11b),_0x4112fe(0x10d),_0x4112fe(0x226),_0x179a89(0xf9),_0x4112fe(0x16e),_0x4112fe(0x205),_0x179a89(0x14b),'search','onmouseup',_0x4112fe(0xfb),_0x4112fe(0x1a4),_0x4112fe(0x172),_0x4112fe(0x12f),_0x4112fe(0x1dc),_0x4112fe(0x156),_0x4112fe(0xd7),_0x4112fe(0x10c),_0x4112fe(0x1d8),_0x4112fe(0x196),_0x4112fe(0x14e),_0x4112fe(0x158),_0x4112fe(0x219),_0x4112fe(0x190),_0x179a89(0xbb),_0x4112fe(0x177),_0x4112fe(0x111),'click',_0x4112fe(0x148),_0x4112fe(0x197),_0x4112fe(0x200),_0x4112fe(0x1d7),_0x4112fe(0x1a3),_0x179a89(0x147),_0x4112fe(0x1af),_0x4112fe(0xcb),_0x179a89(0x138),_0x4112fe(0x1d9),_0x4112fe(0x1f0),_0x4112fe(0x154),_0x4112fe(0x1ea),_0x4112fe(0x137),_0x4112fe(0x1f5),_0x4112fe(0x212),_0x4112fe(0x1ed),_0x4112fe(0x15e),_0x179a89(0x139),_0x179a89(0x150),_0x4112fe(0x223),_0x4112fe(0x1b9),_0x4112fe(0xfc),_0x179a89(0x1f5),_0x4112fe(0x1e3),_0x4112fe(0x1ff),_0x4112fe(0x185),_0x4112fe(0x1f9),_0x179a89(0xfc),_0x4112fe(0xf4),_0x4112fe(0x1a1),_0x4112fe(0x1b8),_0x179a89(0x106),_0x179a89(0xc9),_0x179a89(0x137),_0x179a89(0x17f),_0x4112fe(0xfd),_0x4112fe(0x120),_0x179a89(0x89),_0x4112fe(0x20f),_0x4112fe(0x21e),_0x4112fe(0x1ec),_0x179a89(0x177),_0x4112fe(0x1bc),_0x4112fe(0x1c4),_0x179a89(0x102),_0x4112fe(0x165),_0x4112fe(0x135),_0x179a89(0xec),_0x4112fe(0x227),_0x4112fe(0x1b4),_0x4112fe(0x206),_0x4112fe(0x1c2),_0x4112fe(0xdb),_0x179a89(0x1e4),'max',_0x179a89(0x1ca),_0x4112fe(0x1c6),_0x4112fe(0x17b),_0x4112fe(0x176),_0x179a89(0x1a8),_0x4112fe(0x13f),_0x4112fe(0x15d),_0x4112fe(0x161),_0x179a89(0xb8),_0x4112fe(0x208),_0x179a89(0x157),_0x4112fe(0x1c3),_0x4112fe(0x17f),_0x4112fe(0x1ac),_0x179a89(0x105),_0x4112fe(0x217),_0x4112fe(0x221),_0x4112fe(0x136),_0x179a89(0x194),_0x4112fe(0x19b),_0x4112fe(0x1f6),_0x179a89(0xb2),_0x4112fe(0x1fe),_0x4112fe(0xdd),_0x4112fe(0x159),_0x4112fe(0xdf),_0x4112fe(0x1cd),_0x4112fe(0x150),_0x4112fe(0x1a6),_0x4112fe(0x18e),_0x4112fe(0x166),_0x179a89(0xc0),_0x4112fe(0x1eb),_0x4112fe(0x1d1),_0x4112fe(0x160),_0x4112fe(0x191),_0x4112fe(0x195),_0x4112fe(0x110),_0x4112fe(0x13d),_0x4112fe(0x164),_0x4112fe(0x1d0),_0x4112fe(0x142),_0x4112fe(0xdc),_0x4112fe(0x147),_0x179a89(0xad),_0x4112fe(0x146),_0x4112fe(0x1c7),_0x4112fe(0x1e2),_0x4112fe(0x220),_0x4112fe(0x125),'canvas-container',_0x4112fe(0x1d6),_0x4112fe(0x1f2),_0x4112fe(0x20c),_0x179a89(0x10e),_0x4112fe(0x192),_0x179a89(0xbe),_0x4112fe(0x1f8),_0x4112fe(0xe1),_0x179a89(0x183),_0x179a89(0x174),_0x179a89(0xb3),_0x4112fe(0x209),_0x179a89(0x10b),_0x4112fe(0x18c),_0x179a89(0x8f),_0x179a89(0x190),_0x4112fe(0x1b1),_0x179a89(0x1c8),_0x4112fe(0x214),_0x4112fe(0x20b),_0x4112fe(0xe8),_0x4112fe(0x222),_0x4112fe(0x1ad),_0x4112fe(0x123),_0x179a89(0xa3),_0x179a89(0x1d8),_0x4112fe(0x1cc),_0x4112fe(0x107)];return a0_0x22a5=function(){return _0x2c8680;},a0_0x22a5();}function a0_0x243d(){const _0x46cd7c=a0_0x111e,_0x343dc4=a0_0x35c9,_0x64e10b=a0_0x56c5,_0x4e8813=[_0x64e10b(0xc2),_0x64e10b(0x1e8),_0x343dc4(0xd6),_0x46cd7c(0xe7),_0x64e10b(0x177),_0x64e10b(0x1a2),_0x64e10b(0x171),_0x64e10b(0x1d2),_0x64e10b(0x1be),_0x343dc4(0x1dd),_0x64e10b(0x166),_0x64e10b(0x1b8),_0x343dc4(0x106),_0x64e10b(0x1f0),_0x64e10b(0xb9),_0x64e10b(0xff),_0x343dc4(0x1cf),_0x64e10b(0x144),_0x64e10b(0x105),_0x64e10b(0x1c1),_0x64e10b(0xcd),_0x64e10b(0x1fb),_0x64e10b(0x106),_0x46cd7c(0x171),_0x64e10b(0x1ae),_0x64e10b(0x1a5),_0x64e10b(0x19a),_0x64e10b(0x1ad),_0x64e10b(0xaa),_0x64e10b(0xaf),_0x64e10b(0x104),_0x64e10b(0x1f2),_0x64e10b(0x1db),_0x64e10b(0x1d7),_0x64e10b(0xb1),_0x64e10b(0x116),_0x64e10b(0x1e4),'beginPath',_0x64e10b(0xf1),_0x64e10b(0x181),_0x343dc4(0xce),_0x343dc4(0xd3),_0x64e10b(0x188),_0x64e10b(0x191),_0x64e10b(0x1f4),_0x64e10b(0x1ed),_0x343dc4(0x140),_0x64e10b(0xf8),_0x64e10b(0x168),_0x64e10b(0x142),_0x64e10b(0x1e9),_0x343dc4(0x1a0),_0x64e10b(0xf2),_0x64e10b(0x157),_0x64e10b(0x102),_0x64e10b(0x13d),_0x64e10b(0x13e),_0x64e10b(0x1aa),_0x64e10b(0x1e6),_0x64e10b(0xc4),_0x64e10b(0x18c),_0x64e10b(0xad),_0x343dc4(0x193),_0x64e10b(0xbb),_0x64e10b(0xae),_0x64e10b(0x190),_0x46cd7c(0x1df),_0x343dc4(0x129),_0x64e10b(0x194),_0x64e10b(0xe8),_0x64e10b(0x1d6),_0x64e10b(0x115),_0x343dc4(0x13c),_0x64e10b(0x150),_0x64e10b(0xac),_0x64e10b(0x1bf),_0x343dc4(0xd8),_0x64e10b(0x16b),_0x46cd7c(0x1d4),_0x64e10b(0x18f),_0x64e10b(0xdc),_0x64e10b(0x18b),_0x64e10b(0x1f7),_0x64e10b(0x15b),_0x64e10b(0xe3),_0x64e10b(0x1d5),_0x64e10b(0x1fd),_0x64e10b(0x14c),_0x64e10b(0x18e),_0x343dc4(0x10f),_0x64e10b(0x1b1),_0x64e10b(0x14f),_0x343dc4(0x101),_0x64e10b(0x14a),_0x64e10b(0x103),_0x64e10b(0x131),_0x343dc4(0x198),_0x64e10b(0x158),_0x64e10b(0x134),_0x343dc4(0x1d5),_0x64e10b(0x1cc),_0x64e10b(0xdb),_0x343dc4(0xd4),_0x64e10b(0x14d),_0x64e10b(0x1b4),_0x64e10b(0xe1),_0x343dc4(0x225),_0x343dc4(0x15e),_0x64e10b(0x162),_0x64e10b(0xeb),_0x64e10b(0x1c2),_0x64e10b(0x16c),_0x64e10b(0x196),_0x64e10b(0xed),_0x64e10b(0x1fa),_0x343dc4(0x1de),_0x64e10b(0xf5),_0x64e10b(0x187),_0x343dc4(0x11d),_0x64e10b(0x10f),_0x64e10b(0x1a6),_0x343dc4(0x1d2),_0x64e10b(0xb2),_0x64e10b(0x149),_0x64e10b(0x1d8),_0x64e10b(0x15a),_0x343dc4(0x10a),_0x343dc4(0x12b),_0x64e10b(0xf6),_0x64e10b(0x199),_0x64e10b(0x1e5),_0x343dc4(0x1e2),_0x343dc4(0xed),_0x64e10b(0x200),_0x64e10b(0x197),_0x343dc4(0xe6),_0x64e10b(0x1ff),_0x64e10b(0xfe),_0x64e10b(0x1c8),_0x64e10b(0x16a),_0x64e10b(0x154),_0x64e10b(0xe4),_0x64e10b(0x126),_0x343dc4(0x167),_0x64e10b(0x180),_0x64e10b(0x1bb),_0x343dc4(0xf9),_0x64e10b(0x1d0),_0x64e10b(0xd6),_0x343dc4(0x204),_0x343dc4(0x158),_0x64e10b(0x170),_0x46cd7c(0x1a7),_0x64e10b(0x119),_0x64e10b(0x152),_0x64e10b(0x18d),_0x64e10b(0x123),_0x64e10b(0xf9),_0x64e10b(0x1b9),_0x64e10b(0xfa),_0x343dc4(0x130),_0x64e10b(0x1ab),_0x64e10b(0x135),_0x343dc4(0x13e),_0x64e10b(0xc5),_0x64e10b(0x13b),_0x64e10b(0xfc),_0x64e10b(0x1f6),_0x64e10b(0x136),_0x343dc4(0xf4),_0x64e10b(0x117),_0x64e10b(0x17a),_0x64e10b(0xf3),_0x64e10b(0xea),_0x64e10b(0x155),_0x343dc4(0x1fa),_0x343dc4(0x17b),_0x64e10b(0x1fe),_0x46cd7c(0x16b),_0x343dc4(0x1e0),_0x64e10b(0x122),_0x64e10b(0x11a),_0x343dc4(0x142),_0x64e10b(0x16d),_0x64e10b(0x160),_0x64e10b(0x1da),_0x64e10b(0x1e0),_0x343dc4(0x1e5),_0x64e10b(0x139),_0x64e10b(0x146),_0x343dc4(0x182),_0x46cd7c(0x116),_0x64e10b(0x19d),_0x343dc4(0x149),_0x343dc4(0xcd),_0x64e10b(0x100),_0x343dc4(0x131),_0x64e10b(0x16f),_0x46cd7c(0xde),_0x64e10b(0x17d),_0x64e10b(0x138),_0x64e10b(0xef),_0x64e10b(0x13f),_0x64e10b(0x198),_0x64e10b(0x145),_0x64e10b(0xcf),_0x343dc4(0xd9),_0x343dc4(0x1f7),_0x64e10b(0x1e2),_0x64e10b(0x1c3),_0x64e10b(0x118),_0x64e10b(0x1dc),_0x64e10b(0xfd),_0x343dc4(0x114),_0x64e10b(0x1eb),_0x64e10b(0xda),_0x64e10b(0x1e3),_0x343dc4(0x155),_0x64e10b(0xba),_0x64e10b(0x167),_0x64e10b(0x120),_0x64e10b(0x13a),_0x343dc4(0x11c),_0x64e10b(0x182),_0x343dc4(0x220),_0x64e10b(0x1de),_0x64e10b(0x11c),_0x64e10b(0xbe),_0x64e10b(0x1ee),_0x64e10b(0x13c),_0x64e10b(0xc3),_0x343dc4(0x1e4),_0x64e10b(0x12b),_0x64e10b(0x159),_0x64e10b(0xbf),_0x64e10b(0x1d9),_0x64e10b(0x121),_0x64e10b(0x15f),_0x64e10b(0xb5),_0x64e10b(0xb7),_0x343dc4(0x144),_0x64e10b(0x164),_0x64e10b(0xce),_0x46cd7c(0xfa),_0x64e10b(0x1b6),_0x64e10b(0x1a7),_0x46cd7c(0xdd),_0x64e10b(0xd3),_0x64e10b(0x132),_0x343dc4(0x1e7),_0x64e10b(0x1f5),_0x343dc4(0x10b),_0x64e10b(0x174),_0x64e10b(0xf7),_0x64e10b(0xc7),_0x64e10b(0x156),_0x343dc4(0xf6),_0x64e10b(0x11d),_0x64e10b(0xd5),_0x64e10b(0xe5),_0x64e10b(0x1b3),_0x64e10b(0xb6),_0x64e10b(0x17e),_0x64e10b(0x1bc),_0x343dc4(0x151),_0x64e10b(0x17c),_0x64e10b(0x186),_0x64e10b(0x14e),_0x343dc4(0x145),_0x46cd7c(0x117),_0x343dc4(0xee),_0x64e10b(0xb4),_0x64e10b(0xab),_0x64e10b(0x1ac),_0x64e10b(0x1dd),_0x64e10b(0x183),_0x64e10b(0x16e),_0x64e10b(0x10b),_0x64e10b(0x161),_0x64e10b(0x1b2),_0x64e10b(0x1df),_0x343dc4(0x207),_0x64e10b(0xd1),_0x64e10b(0xe9),'globalAlpha',_0x343dc4(0x126),_0x64e10b(0x19c),_0x64e10b(0x111),_0x46cd7c(0x1e9),_0x343dc4(0x139),_0x64e10b(0x184),_0x64e10b(0x141),_0x343dc4(0x128),_0x343dc4(0x1a7),_0x64e10b(0x189),_0x64e10b(0x1a9),_0x64e10b(0x1ec),_0x343dc4(0x105),_0x64e10b(0xb0),_0x64e10b(0xf0),_0x64e10b(0x143),_0x64e10b(0xcb),_0x64e10b(0x1ea),_0x64e10b(0xb8),_0x64e10b(0xca),_0x64e10b(0x1b5),_0x343dc4(0x1cb),_0x64e10b(0x1cd),_0x64e10b(0x124),_0x64e10b(0x1d1),_0x64e10b(0x1af),_0x64e10b(0x175),_0x64e10b(0x185),_0x343dc4(0xd2),_0x64e10b(0x1f1),_0x64e10b(0xd8),_0x343dc4(0x100),_0x64e10b(0x1a8),_0x64e10b(0x1c6),_0x343dc4(0x18b),_0x64e10b(0x1d3),_0x343dc4(0x1a2),_0x64e10b(0xbc),_0x64e10b(0xdd),_0x64e10b(0x1f3),_0x343dc4(0xe4),_0x64e10b(0x128),_0x343dc4(0x127),_0x343dc4(0x1b3),_0x343dc4(0x1f4),_0x64e10b(0x1b7),_0x64e10b(0x107),_0x64e10b(0x125),_0x64e10b(0xfb),_0x46cd7c(0xe0),_0x64e10b(0x12d),_0x343dc4(0x1fd),_0x64e10b(0x19b),_0x64e10b(0x163),_0x343dc4(0x1aa),_0x64e10b(0x1a4),_0x64e10b(0x10c),_0x46cd7c(0x14d),_0x64e10b(0x130),_0x64e10b(0x1f8),_0x64e10b(0xec),_0x64e10b(0x10a),_0x64e10b(0x148),_0x64e10b(0x112),_0x64e10b(0x101),_0x64e10b(0xdf)];return a0_0x243d=function(){return _0x4e8813;},a0_0x243d();}function drawDotTouch(_0x301320,_0x2903c1){const _0x3768fd=a0_0x111e,_0x4844c4=a0_0x35c9,_0xabbbad=a0_0x56c5,_0x6a4696=a0_0x5049d9,_0x389480=a0_0x38aafa;let _0xdfee34=getCurrentProject(),_0x38f2b1=getCurrentFrame();if(_0x301320<0x0||_0x2903c1<0x0||_0x301320>=_0xdfee34[_0x389480(0x1b8)]||_0x2903c1>=_0xdfee34[_0x389480(0x27c)])return;let _0x54f438=_0x38f2b1[_0x389480(0x262)][_0x38f2b1[_0x389480(0x1b5)]][_0xabbbad(0xee)]('2d');if(currentTool===_0x4844c4(0x120)||currentColor===_0x4844c4(0x15a)||currentColor===_0x389480(0x25c)||currentAlpha===0x0)drawPenShape(_0x54f438,_0x301320,_0x2903c1,_0x389480(0x25c),!![]);else{let _0x24fd28=hexToRgba(currentColor,currentAlpha);_0x54f438[_0x389480(0x1fe)](),_0x54f438[_0x389480(0x2a0)]=_0x24fd28[0x3]/0xff,drawPenShape(_0x54f438,_0x301320,_0x2903c1,_0x6a4696(0x12a)+_0x24fd28[0x0]+','+_0x24fd28[0x1]+','+_0x24fd28[0x2]+','+_0x24fd28[0x3]/0xff+')',![]),_0x54f438[_0x3768fd(0x1de)]();}redrawAll();}function applyTheme(_0x46ffa6){const _0x526bd8=a0_0x5049d9,_0x41b916=a0_0x38aafa;document[_0x41b916(0x199)][_0x41b916(0x2b4)](_0x41b916(0x206),_0x46ffa6);const _0x152c9d=document[_0x41b916(0x275)](_0x41b916(0x189));_0x152c9d&&(_0x152c9d[_0x526bd8(0x154)]=_0x46ffa6===_0x526bd8(0x122)?'☀️':'🌙',_0x152c9d[_0x41b916(0x2b4)](_0x41b916(0x2a9),_0x46ffa6===_0x526bd8(0x122)),_0x152c9d[_0x526bd8(0x124)]=_0x46ffa6===_0x41b916(0x2ee)?_0x526bd8(0x1ee):_0x41b916(0x1d0)),localStorage[_0x41b916(0x1fc)](_0x41b916(0x1a4),_0x46ffa6);}function toggleTheme(){const _0x689c75=a0_0x5049d9,_0x558c5f=a0_0x38aafa;applyTheme(document[_0x689c75(0x15e)][_0x689c75(0xe2)](_0x558c5f(0x206))===_0x558c5f(0x2ee)?_0x558c5f(0x21b):_0x558c5f(0x2ee));}(function initTheme(){const _0x4026e1=a0_0x56c5,_0x40c991=a0_0x5049d9,_0x5150a0=a0_0x38aafa,_0x158b1f=localStorage[_0x5150a0(0x1d5)](_0x5150a0(0x1a4))||(window[_0x40c991(0xe3)]&&window[_0x5150a0(0x2af)](_0x5150a0(0x208))[_0x4026e1(0xd9)]?_0x40c991(0x122):_0x5150a0(0x21b));applyTheme(_0x158b1f),document[_0x5150a0(0x21d)](_0x5150a0(0x293),()=>{const _0x3ae725=_0x4026e1,_0x183601=_0x5150a0,_0x37bfdb=document[_0x183601(0x275)](_0x183601(0x189));_0x37bfdb&&(_0x37bfdb[_0x183601(0x21d)](_0x3ae725(0xab),toggleTheme),_0x37bfdb[_0x183601(0x21d)](_0x183601(0x1cc),_0x3d703a=>{const _0x428a33=_0x183601;(_0x3d703a[_0x428a33(0x2c5)]===_0x428a33(0x276)||_0x3d703a[_0x428a33(0x2c5)]==='\x20')&&(_0x3d703a[_0x428a33(0x1ce)](),toggleTheme());}));});}(),window[a0_0x521960(0x14d)]=()=>{const _0x137d3a=a0_0x521960,_0x86b38a=a0_0x5049d9,_0xb469c0=a0_0x38aafa;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x86b38a(0x238)),loadPaletteFromDB()[_0xb469c0(0x17f)](()=>createPalette()),document[_0x137d3a(0x182)](_0x137d3a(0x191))[_0xb469c0(0x24e)]=penSize,document[_0xb469c0(0x275)](_0x86b38a(0xf4))[_0xb469c0(0x24e)]=penMode;const _0x13f951=document[_0xb469c0(0x275)](_0xb469c0(0x229)),_0x1bdccb=document[_0xb469c0(0x275)](_0xb469c0(0x205));_0x13f951&&_0x1bdccb&&(_0x13f951[_0x86b38a(0x12e)]=animationDelay,_0x1bdccb[_0xb469c0(0x24e)]=animationDelay,_0x13f951[_0xb469c0(0x28a)]=_0x7399f4=>{const _0x504323=_0x86b38a,_0x39e4db=_0xb469c0;_0x1bdccb[_0x504323(0x12e)]=_0x7399f4[_0x39e4db(0x2e5)][_0x39e4db(0x24e)],setAnimationDelay(_0x7399f4[_0x39e4db(0x2e5)][_0x39e4db(0x24e)]);},_0x1bdccb[_0xb469c0(0x222)]=_0x5c4aef=>{const _0x46175d=_0x137d3a,_0x4b9cf3=_0x86b38a,_0x2fc6c8=_0xb469c0;let _0x3c046e=Math[_0x2fc6c8(0x2c3)](0xa,Math[_0x4b9cf3(0x18d)](0x1388,parseInt(_0x5c4aef[_0x2fc6c8(0x2e5)][_0x46175d(0x149)])||animationDelay));_0x13f951[_0x2fc6c8(0x24e)]=_0x3c046e,_0x1bdccb[_0x4b9cf3(0x12e)]=_0x3c046e,setAnimationDelay(_0x3c046e);}),canvas[_0xb469c0(0x239)]=handleMouseMove,canvas[_0xb469c0(0x238)]=handleMouseUp,canvas[_0xb469c0(0x1b7)]=handleMouseUp,canvas[_0xb469c0(0x21a)]=handleTouchStart,canvas[_0xb469c0(0x267)]=handleTouchMove,canvas[_0xb469c0(0x212)]=handleTouchEnd,canvas[_0xb469c0(0x2ac)]=handleTouchEnd,canvas[_0xb469c0(0x21d)](_0x86b38a(0x1d8),handleTouchStart,{'passive':![]}),canvas[_0xb469c0(0x21d)](_0xb469c0(0x28f),handleTouchMove,{'passive':![]}),canvas[_0x86b38a(0x1a3)](_0xb469c0(0x1e1),handleTouchEnd,{'passive':![]}),canvas[_0xb469c0(0x21d)](_0xb469c0(0x1b6),handleTouchEnd,{'passive':![]}),idbGet(_0xb469c0(0x263))&&loadProjectFromIDB();});function drawGrid(_0x5aa7d0,_0x2d21cf){const _0x46e7f6=a0_0x521960,_0x4f9348=a0_0x5049d9,_0x843dfc=a0_0x38aafa;ctx[_0x843dfc(0x1fe)](),ctx[_0x843dfc(0x2b5)]=_0x843dfc(0x26b);for(let _0x120c43=0x0;_0x120c43<=_0x5aa7d0;_0x120c43++){ctx[_0x843dfc(0x2eb)](),ctx[_0x843dfc(0x29e)](_0x120c43*cellSize,0x0),ctx[_0x46e7f6(0xae)](_0x120c43*cellSize,_0x2d21cf*cellSize),ctx[_0x4f9348(0x201)]();}for(let _0x1d772b=0x0;_0x1d772b<=_0x2d21cf;_0x1d772b++){ctx[_0x46e7f6(0x108)](),ctx[_0x843dfc(0x29e)](0x0,_0x1d772b*cellSize),ctx[_0x4f9348(0xf3)](_0x5aa7d0*cellSize,_0x1d772b*cellSize),ctx[_0x843dfc(0x2d9)]();}ctx[_0x843dfc(0x2df)]();}function redrawAll(){const _0x1eccb4=a0_0x521960,_0x4ea469=a0_0x5049d9,_0x3372=a0_0x38aafa;let _0x4912c7=getCurrentProject(),_0x27af91=getCurrentFrame();canvas[_0x3372(0x1b8)]=_0x4912c7[_0x3372(0x1b8)]*cellSize,canvas[_0x3372(0x27c)]=_0x4912c7[_0x3372(0x27c)]*cellSize,ctx[_0x4ea469(0x172)](0x0,0x0,canvas[_0x3372(0x1b8)],canvas[_0x1eccb4(0x1ff)]);for(let _0x557fef=0x0;_0x557fef<_0x27af91[_0x3372(0x262)][_0x4ea469(0xf5)];_0x557fef++){ctx[_0x4ea469(0x230)](_0x27af91[_0x3372(0x262)][_0x557fef],0x0,0x0);}drawGrid(_0x4912c7[_0x4ea469(0x190)],_0x4912c7[_0x3372(0x27c)]),wrapper&&(wrapper[_0x3372(0x1f8)][_0x4ea469(0x190)]=_0x3372(0x2d3),wrapper[_0x3372(0x1f8)][_0x3372(0x27c)]=_0x3372(0x1ae));}function saveHistory(){const _0x3901ca=a0_0x521960,_0x446d43=a0_0x5049d9,_0x2bfe46=a0_0x38aafa;let _0x422f5e=getCurrentFrame(),_0x8d86c5=_0x422f5e[_0x2bfe46(0x29c)][_0x422f5e[_0x2bfe46(0x1b5)]];_0x8d86c5[_0x446d43(0x19e)](_0x422f5e[_0x2bfe46(0x262)][_0x422f5e[_0x2bfe46(0x1b5)]][_0x3901ca(0xd5)]());if(_0x8d86c5[_0x2bfe46(0x1c4)]>0x32)_0x8d86c5[_0x2bfe46(0x1d7)]();_0x422f5e[_0x2bfe46(0x2d0)][_0x422f5e[_0x446d43(0x215)]]=[];}function undo(){const _0x4eb888=a0_0x521960,_0x19c1d7=a0_0x5049d9,_0x372986=a0_0x38aafa;let _0x170feb=getCurrentFrame(),_0x476da5=_0x170feb[_0x372986(0x29c)][_0x170feb[_0x19c1d7(0x215)]],_0x5e8b98=_0x170feb[_0x372986(0x2d0)][_0x170feb[_0x372986(0x1b5)]];if(!_0x476da5||_0x476da5[_0x372986(0x1c4)]<0x2)return;_0x5e8b98[_0x19c1d7(0x19e)](_0x476da5[_0x4eb888(0xbd)]());let _0x45e098=new Image();_0x45e098[_0x372986(0x185)]=()=>{const _0x1f2cff=_0x19c1d7,_0x3b193f=_0x372986;let _0x4a8d3e=_0x170feb[_0x3b193f(0x262)][_0x170feb[_0x3b193f(0x1b5)]][_0x3b193f(0x2c6)]('2d');_0x4a8d3e[_0x3b193f(0x22d)](0x0,0x0,_0x170feb[_0x3b193f(0x262)][_0x170feb[_0x1f2cff(0x215)]][_0x3b193f(0x1b8)],_0x170feb[_0x3b193f(0x262)][_0x170feb[_0x3b193f(0x1b5)]][_0x3b193f(0x27c)]),_0x4a8d3e[_0x1f2cff(0x230)](_0x45e098,0x0,0x0),redrawAll();},_0x45e098[_0x19c1d7(0x1ec)]=_0x476da5[_0x476da5[_0x4eb888(0xd7)]-0x1];}function redo(){const _0x58af9b=a0_0x5049d9,_0x11979d=a0_0x38aafa;let _0x3e6dac=getCurrentFrame(),_0x521df2=_0x3e6dac[_0x58af9b(0x195)][_0x3e6dac[_0x58af9b(0x215)]],_0x1bf461=_0x3e6dac[_0x58af9b(0x179)][_0x3e6dac[_0x58af9b(0x215)]];if(!_0x1bf461||_0x1bf461[_0x58af9b(0xf5)]===0x0)return;let _0x4b1598=_0x1bf461[_0x11979d(0x1ea)]();_0x521df2[_0x58af9b(0x19e)](_0x4b1598);let _0xf61bf0=new Image();_0xf61bf0[_0x11979d(0x185)]=()=>{const _0x2a9196=a0_0x56c5,_0x1bcff6=_0x58af9b,_0x1835a6=_0x11979d;let _0x4d2a25=_0x3e6dac[_0x1bcff6(0x13d)][_0x3e6dac[_0x1835a6(0x1b5)]][_0x1835a6(0x2c6)]('2d');_0x4d2a25[_0x1835a6(0x22d)](0x0,0x0,_0x3e6dac[_0x1835a6(0x262)][_0x3e6dac[_0x1835a6(0x1b5)]][_0x2a9196(0x13a)],_0x3e6dac[_0x1bcff6(0x13d)][_0x3e6dac[_0x1bcff6(0x215)]][_0x1835a6(0x27c)]),_0x4d2a25[_0x1835a6(0x1ff)](_0xf61bf0,0x0,0x0),redrawAll();},_0xf61bf0[_0x11979d(0x1b3)]=_0x4b1598;}function exportImage(_0x415827){const _0x40ff97=a0_0x521960,_0x39a759=a0_0x5049d9,_0x576f17=a0_0x38aafa;let _0xe5a532=getCurrentProject(),_0x557b0c=_0xe5a532[_0x576f17(0x2b3)],_0x1a6364=_0x415827===_0x576f17(0x248)||_0x415827===_0x576f17(0x242)?_0x576f17(0x18a):_0x576f17(0x203)+_0x415827,_0x2c08b7=_0x557b0c[_0x576f17(0x1c4)]>0x1,_0x169059=(_0xe5a532[_0x576f17(0x2e6)]||_0x576f17(0x200))[_0x576f17(0x27d)](/[\\/:*?"<>|]/g,'_');if(!_0x2c08b7){let _0x1f1bfe=document[_0x576f17(0x1d6)](_0x576f17(0x19d));_0x1f1bfe[_0x39a759(0x190)]=_0xe5a532[_0x576f17(0x1b8)]*cellSize,_0x1f1bfe[_0x40ff97(0x1ff)]=_0xe5a532[_0x576f17(0x27c)]*cellSize;let _0x283cf6=_0x1f1bfe[_0x39a759(0x162)]('2d'),_0x1caf00=getCurrentFrame();for(let _0x59fe1a=0x0;_0x59fe1a<_0x1caf00[_0x576f17(0x262)][_0x576f17(0x1c4)];_0x59fe1a++){_0x283cf6[_0x39a759(0x230)](_0x1caf00[_0x576f17(0x262)][_0x59fe1a],0x0,0x0);}let _0x79c559=document[_0x576f17(0x1d6)]('a');_0x79c559[_0x576f17(0x215)]=_0x169059+'.'+_0x415827,_0x415827===_0x576f17(0x248)||_0x415827===_0x39a759(0x1dd)?_0x79c559[_0x39a759(0x1a4)]=_0x1f1bfe[_0x576f17(0x1df)](_0x1a6364,0.92):_0x79c559[_0x576f17(0x1c8)]=_0x1f1bfe[_0x576f17(0x1df)](_0x1a6364),_0x79c559[_0x39a759(0x1c3)]();}else{if(_0x415827===_0x576f17(0x1bf)&&typeof window[_0x576f17(0x2da)]!==_0x576f17(0x225))exportWebpAnimation(_0x557b0c,_0xe5a532[_0x576f17(0x1b8)]*cellSize,_0xe5a532[_0x576f17(0x27c)]*cellSize,_0x169059);else for(let _0x2be42d=0x0;_0x2be42d<_0x557b0c[_0x576f17(0x1c4)];_0x2be42d++){let _0x43dbd4=document[_0x576f17(0x1d6)](_0x576f17(0x19d));_0x43dbd4[_0x576f17(0x1b8)]=_0xe5a532[_0x576f17(0x1b8)]*cellSize,_0x43dbd4[_0x576f17(0x27c)]=_0xe5a532[_0x576f17(0x27c)]*cellSize;let _0x3070fa=_0x43dbd4[_0x39a759(0x162)]('2d'),_0x31a92f=_0x557b0c[_0x2be42d];for(let _0x567328=0x0;_0x567328<_0x31a92f[_0x576f17(0x262)][_0x576f17(0x1c4)];_0x567328++){_0x3070fa[_0x576f17(0x1ff)](_0x31a92f[_0x39a759(0x13d)][_0x567328],0x0,0x0);}let _0xdfe96f=document[_0x576f17(0x1d6)]('a');_0xdfe96f[_0x576f17(0x215)]=_0x169059+'-f'+(_0x2be42d+0x1)+'.'+_0x415827,_0x415827===_0x576f17(0x248)||_0x415827===_0x576f17(0x242)?_0xdfe96f[_0x39a759(0x1a4)]=_0x43dbd4[_0x576f17(0x1df)](_0x1a6364,0.92):_0xdfe96f[_0x576f17(0x1c8)]=_0x43dbd4[_0x39a759(0x1b5)](_0x1a6364),setTimeout(()=>_0xdfe96f[_0x576f17(0x2ed)](),_0x2be42d*0x64);}}}async function exportWebpAnimation(_0x50dae1,_0x49d09c,_0x12e9e5,_0x455e31=a0_0x38aafa(0x21f)){const _0xba2826=a0_0x521960,_0xc2f039=a0_0x5049d9,_0x4576e8=a0_0x38aafa;if(!window[_0x4576e8(0x2da)]||!window[_0x4576e8(0x194)]){alert(_0x4576e8(0x27b));return;}const _0xa69bc5=[],_0x24ba7f=new VideoEncoder({'output':_0x3954db=>_0xa69bc5[_0x4576e8(0x278)](_0x3954db),'error':_0x59fee4=>console[_0xc2f039(0x1e8)](_0x59fee4)});_0x24ba7f[_0x4576e8(0x2a8)]({'codec':_0x4576e8(0x2d2),'width':_0x49d09c,'height':_0x12e9e5,'framerate':0x5});for(let _0x230dc0=0x0;_0x230dc0<_0x50dae1[_0xc2f039(0xf5)];_0x230dc0++){let _0x34ff04=document[_0x4576e8(0x1d6)](_0x4576e8(0x19d));_0x34ff04[_0x4576e8(0x1b8)]=_0x49d09c,_0x34ff04[_0x4576e8(0x27c)]=_0x12e9e5;let _0x319503=_0x34ff04[_0x4576e8(0x2c6)]('2d'),_0x575b7c=_0x50dae1[_0x230dc0];for(let _0x3a8427=0x0;_0x3a8427<_0x575b7c[_0x4576e8(0x262)][_0xc2f039(0xf5)];_0x3a8427++){_0x319503[_0x4576e8(0x1ff)](_0x575b7c[_0x4576e8(0x262)][_0x3a8427],0x0,0x0);}let _0x532b4a=await createImageBitmap(_0x34ff04);_0x24ba7f[_0x4576e8(0x1e2)](_0x532b4a,{'keyFrame':!![],'duration':0xc8}),_0x532b4a[_0x4576e8(0x2e3)]();}await _0x24ba7f[_0x4576e8(0x209)](),_0x24ba7f[_0x4576e8(0x2e3)]();const _0x48220f=new Blob(_0xa69bc5[_0x4576e8(0x294)](_0x5d32ef=>_0x5d32ef[_0x4576e8(0x2c8)]?_0x5d32ef:_0x5d32ef[_0x4576e8(0x261)]),{'type':_0xba2826(0x193)}),_0x37bd8e=document[_0x4576e8(0x1d6)]('a');_0x37bd8e[_0x4576e8(0x215)]=_0x455e31+_0x4576e8(0x257),_0x37bd8e[_0x4576e8(0x1c8)]=URL[_0x4576e8(0x201)](_0x48220f),_0x37bd8e[_0x4576e8(0x2ed)]();}function exportGif(){const _0x47127f=a0_0x38aafa;let _0x3ee0d7=getCurrentProject(),_0x4fe967=_0x3ee0d7[_0x47127f(0x2b3)],_0x48533c=_0x3ee0d7[_0x47127f(0x1b8)]*cellSize,_0x3b1463=_0x3ee0d7[_0x47127f(0x27c)]*cellSize;const _0x2f128f=_0x4fe967[_0x47127f(0x294)](_0x420266=>{const _0x3cbc45=a0_0xce2f,_0x5b18dc=_0x47127f;let _0x2b6f87=document[_0x3cbc45(0x1f6)]('canvas');_0x2b6f87[_0x5b18dc(0x1b8)]=_0x48533c,_0x2b6f87[_0x5b18dc(0x27c)]=_0x3b1463;let _0x299763=_0x2b6f87[_0x3cbc45(0x162)]('2d');for(let _0x1064f6=0x0;_0x1064f6<_0x420266[_0x5b18dc(0x262)][_0x3cbc45(0xf5)];_0x1064f6++){_0x299763[_0x5b18dc(0x1ff)](_0x420266[_0x5b18dc(0x262)][_0x1064f6],0x0,0x0);}return _0x2b6f87[_0x5b18dc(0x1df)](_0x5b18dc(0x1fa));});Promise[_0x47127f(0x25a)](_0x2f128f[_0x47127f(0x294)](_0x1f1123=>{return new Promise(_0x2e90cb=>{const _0x271c55=a0_0x1925,_0x1b7349=new Image();_0x1b7349[_0x271c55(0x1b3)]=_0x1f1123,_0x1b7349[_0x271c55(0x185)]=()=>_0x2e90cb(_0x1b7349);});}))[_0x47127f(0x17f)](_0x520945=>{const _0x4bc8e5=a0_0xce2f,_0x24d044=_0x47127f,_0x1fe6ab=_0x520945[_0x24d044(0x268)](_0x105b31=>_0x105b31[_0x24d044(0x1b8)]>0x0&&_0x105b31[_0x24d044(0x27c)]>0x0);if(_0x1fe6ab[_0x4bc8e5(0xf5)]===0x0){alert(_0x24d044(0x1fb));return;}const _0x59ab60=(_0x3ee0d7[_0x24d044(0x2e6)]||_0x24d044(0x21f))[_0x24d044(0x27d)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x1fe6ab,animationDelay,_0x59ab60+_0x24d044(0x2d1));});}function exportApng(){const _0x67056=a0_0x35c9,_0x3c9911=a0_0x5049d9,_0x30170e=a0_0x38aafa;let _0x3f7084=getCurrentProject(),_0x398e52=_0x3f7084[_0x30170e(0x2b3)],_0x441a94=_0x3f7084[_0x30170e(0x1b8)]*cellSize,_0x79586=_0x3f7084[_0x67056(0x118)]*cellSize;const _0x85a154=_0x398e52[_0x30170e(0x294)](_0x1785aa=>{const _0x5c9890=a0_0xce2f,_0x1e1112=_0x30170e;let _0x2b786b=document[_0x1e1112(0x1d6)](_0x1e1112(0x19d));_0x2b786b[_0x5c9890(0x190)]=_0x441a94,_0x2b786b[_0x1e1112(0x27c)]=_0x79586;let _0x3b51f9=_0x2b786b[_0x5c9890(0x162)]('2d');for(let _0x2d897f=0x0;_0x2d897f<_0x1785aa[_0x1e1112(0x262)][_0x1e1112(0x1c4)];_0x2d897f++){_0x3b51f9[_0x5c9890(0x230)](_0x1785aa[_0x1e1112(0x262)][_0x2d897f],0x0,0x0);}let _0x53ccbf=new Image();return _0x53ccbf[_0x1e1112(0x1b3)]=_0x2b786b[_0x5c9890(0x1b5)](_0x1e1112(0x1fa)),_0x53ccbf;}),_0x243d90=(_0x3f7084[_0x3c9911(0x1c1)]||_0x30170e(0x21f))[_0x30170e(0x27d)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x85a154,_0x441a94,_0x79586,animationDelay,_0x243d90+_0x30170e(0x274));}const dbName=a0_0x38aafa(0x292),storeName=a0_0x38aafa(0x22e);function openDB(){return new Promise((_0x5f02b6,_0x57ffbb)=>{const _0x575d89=a0_0x56c5,_0x2f3d27=a0_0xce2f,_0x3dcb51=a0_0x1925,_0x3109f3=indexedDB[_0x2f3d27(0x144)](dbName,0x1);_0x3109f3[_0x3dcb51(0x273)]=()=>{const _0x99c549=a0_0x35c9,_0x56e353=_0x2f3d27;_0x3109f3[_0x56e353(0x219)][_0x99c549(0x173)](storeName);},_0x3109f3[_0x575d89(0xcc)]=()=>_0x5f02b6(_0x3109f3[_0x2f3d27(0x219)]),_0x3109f3[_0x3dcb51(0x1c5)]=()=>_0x57ffbb(_0x3109f3[_0x3dcb51(0x181)]);});}async function idbSet(_0x21418b,_0x2b04fe){const _0x4f37e4=await openDB();return new Promise((_0x4ae3d6,_0x371eb9)=>{const _0x1f0efb=a0_0xce2f,_0x11e034=a0_0x1925,_0x4335c5=_0x4f37e4[_0x11e034(0x27f)](storeName,_0x11e034(0x259));_0x4335c5[_0x11e034(0x226)](storeName)[_0x11e034(0x297)](_0x2b04fe,_0x21418b),_0x4335c5[_0x11e034(0x2a3)]=()=>_0x4ae3d6(),_0x4335c5[_0x1f0efb(0x149)]=()=>_0x371eb9(_0x4335c5[_0x1f0efb(0x1e8)]);});}async function idbGet(_0x115635){const _0x312625=await openDB();return new Promise((_0x5b48cd,_0x5c3285)=>{const _0x6905c6=a0_0xce2f,_0x5df689=a0_0x1925,_0x336268=_0x312625[_0x5df689(0x27f)](storeName,_0x5df689(0x223)),_0x1517b7=_0x336268[_0x5df689(0x226)](storeName)[_0x5df689(0x2b8)](_0x115635);_0x1517b7[_0x5df689(0x260)]=()=>_0x5b48cd(_0x1517b7[_0x6905c6(0x219)]),_0x1517b7[_0x5df689(0x1c5)]=()=>_0x5c3285(_0x1517b7[_0x5df689(0x181)]);});}async function idbDelete(_0x868862){const _0x2be477=await openDB();return new Promise((_0x247937,_0x2822f9)=>{const _0x21f228=a0_0x56c5,_0x1d94e8=a0_0xce2f,_0x281a3d=a0_0x1925,_0x5cad28=_0x2be477[_0x1d94e8(0x13f)](storeName,_0x1d94e8(0x130));_0x5cad28[_0x281a3d(0x226)](storeName)[_0x21f228(0x109)](_0x868862),_0x5cad28[_0x281a3d(0x2a3)]=()=>_0x247937(),_0x5cad28[_0x281a3d(0x1c5)]=()=>_0x2822f9(_0x5cad28[_0x1d94e8(0x1e8)]);});}async function idbClear(){const _0x80e574=await openDB();return new Promise((_0x4e2240,_0x146987)=>{const _0x589e6f=a0_0x56c5,_0x264255=a0_0xce2f,_0x4e4075=a0_0x1925,_0xf2a5f=_0x80e574[_0x4e4075(0x27f)](storeName,_0x4e4075(0x259));_0xf2a5f[_0x4e4075(0x226)](storeName)[_0x4e4075(0x1e0)](),_0xf2a5f[_0x264255(0x220)]=()=>_0x4e2240(),_0xf2a5f[_0x4e4075(0x1c5)]=()=>_0x146987(_0xf2a5f[_0x589e6f(0x1d1)]);});}function saveProjectFile(){const _0x88bfbd=a0_0x521960,_0x1accc2=a0_0x5049d9,_0x186be6=a0_0x38aafa,_0x1c3330={'projects':projects[_0x186be6(0x294)](_0x444bfe=>({'width':_0x444bfe[_0x186be6(0x1b8)],'height':_0x444bfe[_0x186be6(0x27c)],'name':_0x444bfe[_0x186be6(0x2e6)]||'','activeFrame':_0x444bfe[_0x186be6(0x2a5)],'frames':_0x444bfe[_0x186be6(0x2b3)][_0x186be6(0x294)](_0x163361=>({'activeLayer':_0x163361[_0x186be6(0x1b5)],'layers':_0x163361[_0x1accc2(0x13d)][_0x186be6(0x294)](_0x3c350d=>_0x3c350d[_0x186be6(0x1df)]())}))})),'activeProject':activeProject},_0x309bda=new Blob([JSON[_0x186be6(0x1e5)](_0x1c3330)],{'type':_0x186be6(0x299)}),_0xec1a59=document[_0x186be6(0x1d6)]('a');_0xec1a59[_0x88bfbd(0xf0)]=_0x1accc2(0x1d9),_0xec1a59[_0x186be6(0x1c8)]=URL[_0x186be6(0x201)](_0x309bda),_0xec1a59[_0x186be6(0x2ed)]();}function a0_0x1925(_0x2e79ac,_0x5e6b08){_0x2e79ac=_0x2e79ac-0x17d;const _0x98a344=a0_0x5ad1();let _0x202eaa=_0x98a344[_0x2e79ac];return _0x202eaa;}function saveProjectFile(){const _0x225b92=a0_0x5049d9,_0x56ae4e=a0_0x38aafa,_0x24cea1={'projects':projects[_0x56ae4e(0x294)](_0x5c3542=>({'width':_0x5c3542[_0x225b92(0x190)],'height':_0x5c3542[_0x56ae4e(0x27c)],'name':_0x5c3542[_0x56ae4e(0x2e6)]||'','activeFrame':_0x5c3542[_0x56ae4e(0x2a5)],'frames':_0x5c3542[_0x56ae4e(0x2b3)][_0x56ae4e(0x294)](_0x3cfa75=>({'activeLayer':_0x3cfa75[_0x56ae4e(0x1b5)],'layers':_0x3cfa75[_0x56ae4e(0x262)][_0x56ae4e(0x294)](_0x2ce2ad=>_0x2ce2ad[_0x56ae4e(0x1df)]())}))})),'activeProject':activeProject},_0x3306b3=new Blob([JSON[_0x56ae4e(0x1e5)](_0x24cea1)],{'type':_0x56ae4e(0x299)}),_0x4eb5a1=document[_0x56ae4e(0x1d6)]('a');_0x4eb5a1[_0x56ae4e(0x215)]=_0x56ae4e(0x2bf),_0x4eb5a1[_0x56ae4e(0x1c8)]=URL[_0x56ae4e(0x201)](_0x3306b3),_0x4eb5a1[_0x56ae4e(0x2ed)]();}async function saveProjectToIDB(){const _0x553b89=a0_0x5049d9,_0x27c247=a0_0x38aafa,_0x1707bd={'projects':projects[_0x553b89(0x18f)](_0x71c967=>({'width':_0x71c967[_0x27c247(0x1b8)],'height':_0x71c967[_0x27c247(0x27c)],'name':_0x71c967[_0x27c247(0x2e6)]||'','activeFrame':_0x71c967[_0x27c247(0x2a5)],'frames':_0x71c967[_0x27c247(0x2b3)][_0x27c247(0x294)](_0x146b47=>({'activeLayer':_0x146b47[_0x27c247(0x1b5)],'layers':_0x146b47[_0x27c247(0x262)][_0x553b89(0x18f)](_0x10aef3=>_0x10aef3[_0x27c247(0x1df)]())}))})),'activeProject':activeProject};try{await idbSet(_0x553b89(0x11b),_0x1707bd),console[_0x553b89(0x1a0)](_0x27c247(0x21c));}catch(_0x1ceb86){console[_0x27c247(0x181)](_0x553b89(0x133),_0x1ceb86);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x38aafa(0x21d)](a0_0x38aafa(0x22c),_0x504ec4=>{saveProjectToIDB();});function loadProjectFile(_0x4795af){const _0x18cf19=a0_0x5049d9,_0x385e6f=a0_0x38aafa,_0x312b0d=_0x4795af[_0x18cf19(0x1d3)][_0x385e6f(0x23c)][0x0];if(!_0x312b0d)return;if(_0x312b0d[_0x385e6f(0x17d)]&&_0x312b0d[_0x385e6f(0x17d)][_0x385e6f(0x1a3)](_0x18cf19(0xfd))){loadStandaloneFromFile(_0x312b0d)[_0x18cf19(0xf1)](_0xdba9b4=>{const _0x4f9a67=_0x385e6f;alert(_0x4f9a67(0x283)+(_0xdba9b4[_0x4f9a67(0x2e6)]||'画像'));})[_0x385e6f(0x1c7)](_0x4bf2a2=>{const _0x459d17=_0x385e6f;console[_0x459d17(0x2c1)](_0x4bf2a2),alert(_0x459d17(0x2d4));});return;}const _0x48e005=new FileReader();_0x48e005[_0x385e6f(0x185)]=function(_0x2a9010){const _0x74d51e=_0x385e6f;try{const _0x1793d6=JSON[_0x74d51e(0x288)](_0x2a9010[_0x74d51e(0x2e5)][_0x74d51e(0x192)]);projects=_0x1793d6[_0x74d51e(0x24f)][_0x74d51e(0x294)]((_0x5dd387,_0x2e58a6)=>{const _0x5c924=a0_0xce2f,_0x594e87=_0x74d51e;let _0x59e90e=createProject(_0x5dd387[_0x5c924(0x190)],_0x5dd387[_0x594e87(0x27c)],_0x5dd387[_0x594e87(0x2e6)]||'画像'+(_0x2e58a6+0x1));return _0x59e90e[_0x594e87(0x2b3)]=_0x5dd387[_0x5c924(0x17f)][_0x594e87(0x294)](_0x89d3fe=>{const _0x2fc0c1=a0_0x56c5,_0xa45ece=_0x5c924,_0x45b1b6=_0x594e87;let _0x457c64={'layers':[],'activeLayer':_0x89d3fe[_0x45b1b6(0x1b5)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x2dd9c8=0x0;_0x2dd9c8<_0x89d3fe[_0xa45ece(0x13d)][_0xa45ece(0xf5)];_0x2dd9c8++){let _0x5c36ba=new Image();_0x5c36ba[_0x45b1b6(0x1b3)]=_0x89d3fe[_0x45b1b6(0x262)][_0x2dd9c8];let _0x5d389a=document[_0x45b1b6(0x1d6)](_0x45b1b6(0x19d));_0x5d389a[_0x45b1b6(0x1b8)]=_0x5dd387[_0x45b1b6(0x1b8)]*cellSize,_0x5d389a[_0x2fc0c1(0x1ff)]=_0x5dd387[_0x45b1b6(0x27c)]*cellSize,_0x5c36ba[_0x45b1b6(0x185)]=()=>{const _0x550aca=_0x2fc0c1,_0x8e6ef3=_0x45b1b6;let _0x411922=_0x5d389a[_0x8e6ef3(0x2c6)]('2d');_0x411922[_0x550aca(0x151)](0x0,0x0,_0x5d389a[_0x8e6ef3(0x1b8)],_0x5d389a[_0x8e6ef3(0x27c)]),_0x411922[_0x8e6ef3(0x1ff)](_0x5c36ba,0x0,0x0);},_0x5c36ba[_0x2fc0c1(0x14d)](),_0x457c64[_0x45b1b6(0x262)][_0x45b1b6(0x278)](_0x5d389a),_0x457c64[_0xa45ece(0x195)][_0x45b1b6(0x278)]([]),_0x457c64[_0x45b1b6(0x2d0)][_0x45b1b6(0x278)]([]);}return _0x457c64;}),_0x59e90e[_0x594e87(0x2a5)]=_0x5dd387[_0x5c924(0x12c)],_0x59e90e[_0x5c924(0x1c1)]=_0x5dd387[_0x594e87(0x2e6)]||'画像'+(_0x2e58a6+0x1),_0x59e90e;}),activeProject=_0x1793d6[_0x74d51e(0x23d)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x5c38ea){alert(_0x74d51e(0x211));}},_0x48e005[_0x18cf19(0x197)](_0x312b0d);}async function loadProjectFromIDB(){const _0x17bdb6=a0_0x35c9,_0x5b1afd=a0_0x521960,_0x203eee=a0_0x5049d9,_0x49833f=a0_0x38aafa;try{const _0x23404c=await idbGet(_0x49833f(0x2e9));if(!_0x23404c)return;projects=_0x23404c[_0x5b1afd(0x1b6)][_0x203eee(0x18f)]((_0x402095,_0x2146fb)=>{const _0x3ff417=_0x5b1afd,_0x17e709=_0x49833f;let _0x3393ac=createProject(_0x402095[_0x17e709(0x1b8)],_0x402095[_0x17e709(0x27c)],_0x402095[_0x3ff417(0x179)]||'画像'+(_0x2146fb+0x1));return _0x3393ac[_0x17e709(0x2b3)]=_0x402095[_0x17e709(0x2b3)][_0x17e709(0x294)](_0x45a9e1=>{const _0x8a737e=a0_0x35c9,_0x21b47a=a0_0xce2f,_0x3c9068=_0x17e709;let _0x19adf0={'layers':[],'activeLayer':_0x45a9e1[_0x21b47a(0x215)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x3289cb=0x0;_0x3289cb<_0x45a9e1[_0x3c9068(0x262)][_0x3c9068(0x1c4)];_0x3289cb++){let _0x232b22=new Image();_0x232b22[_0x3c9068(0x1b3)]=_0x45a9e1[_0x3c9068(0x262)][_0x3289cb];let _0x587ca8=document[_0x21b47a(0x1f6)](_0x3c9068(0x19d));_0x587ca8[_0x21b47a(0x190)]=_0x402095[_0x8a737e(0x13b)]*cellSize,_0x587ca8[_0x3c9068(0x27c)]=_0x402095[_0x3c9068(0x27c)]*cellSize,_0x232b22[_0x3c9068(0x185)]=()=>{const _0x136768=_0x21b47a,_0xf23e2d=_0x3c9068;let _0x4d4752=_0x587ca8[_0x136768(0x162)]('2d');_0x4d4752[_0xf23e2d(0x22d)](0x0,0x0,_0x587ca8[_0xf23e2d(0x1b8)],_0x587ca8[_0x136768(0x13b)]),_0x4d4752[_0xf23e2d(0x1ff)](_0x232b22,0x0,0x0);},_0x19adf0[_0x3c9068(0x262)][_0x3c9068(0x278)](_0x587ca8),_0x19adf0[_0x3c9068(0x29c)][_0x3c9068(0x278)]([]),_0x19adf0[_0x3c9068(0x2d0)][_0x3c9068(0x278)]([]);}return _0x19adf0;}),_0x3393ac[_0x17e709(0x2a5)]=_0x402095[_0x17e709(0x2a5)],_0x3393ac[_0x17e709(0x2e6)]=_0x402095['name']||'画像'+(_0x2146fb+0x1),_0x3393ac;}),activeProject=_0x23404c[_0x49833f(0x23d)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool(_0x49833f(0x182)),console[_0x17bdb6(0x21a)](_0x49833f(0x282));}catch(_0x44d7e0){alert(_0x49833f(0x2cd)),console[_0x203eee(0x1e8)](_0x44d7e0);}}function wait(_0x599c76){return new Promise(_0x39cba4=>setTimeout(_0x39cba4,_0x599c76));}function initCanvas(){const _0x3b57fb=a0_0x521960,_0x5ba6af=a0_0x5049d9,_0x5bf784=a0_0x38aafa,_0x487cb6=parseInt(0x10),_0x383bcd=parseInt(0x10);let _0x4c696f=getCurrentProject();_0x4c696f[_0x5bf784(0x1b8)]=_0x487cb6,_0x4c696f[_0x5bf784(0x27c)]=_0x383bcd,canvas[_0x5bf784(0x1b8)]=_0x487cb6*cellSize,canvas[_0x5bf784(0x27c)]=_0x383bcd*cellSize,_0x4c696f[_0x5bf784(0x262)]=[],_0x4c696f[_0x5bf784(0x29c)]=[],_0x4c696f[_0x5bf784(0x2d0)]=[];let _0x5a3794=document[_0x5bf784(0x1d6)](_0x5bf784(0x19d));_0x5a3794[_0x5bf784(0x1b8)]=_0x487cb6*cellSize,_0x5a3794[_0x5bf784(0x27c)]=_0x383bcd*cellSize,_0x4c696f[_0x5bf784(0x262)][_0x5ba6af(0x19e)](_0x5a3794),_0x4c696f[_0x5bf784(0x29c)][_0x5bf784(0x278)]([]),_0x4c696f[_0x5bf784(0x2d0)][_0x5ba6af(0x19e)]([]),_0x4c696f[_0x5bf784(0x1b5)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x5bf784(0x1f5)]=null,canvas[_0x5ba6af(0x1e1)]=null,canvas[_0x5bf784(0x238)]=null,canvas[_0x5bf784(0x1b7)]=null,canvas[_0x5bf784(0x21a)]=null,canvas[_0x5bf784(0x267)]=null,canvas[_0x5bf784(0x212)]=null,canvas[_0x5bf784(0x2ac)]=null,canvas[_0x5bf784(0x2a6)](_0x5ba6af(0x1d8),handleTouchStart),canvas[_0x5bf784(0x2a6)](_0x5bf784(0x28f),handleTouchMove),canvas[_0x5bf784(0x2a6)](_0x5bf784(0x1e1),handleTouchEnd),canvas[_0x5bf784(0x2a6)](_0x5bf784(0x1b6),handleTouchEnd),canvas[_0x5bf784(0x1f5)]=handleMouseDown,canvas[_0x5bf784(0x239)]=handleMouseMove,canvas[_0x5bf784(0x238)]=handleMouseUp,canvas[_0x5bf784(0x1b7)]=handleMouseUp,canvas[_0x5bf784(0x21a)]=handleTouchStart,canvas[_0x5bf784(0x267)]=handleTouchMove,canvas[_0x3b57fb(0x107)]=handleTouchEnd,canvas[_0x5bf784(0x2ac)]=handleTouchEnd,canvas[_0x5bf784(0x21d)](_0x5bf784(0x1bb),handleTouchStart,{'passive':![]}),canvas[_0x5bf784(0x21d)](_0x5ba6af(0x205),handleTouchMove,{'passive':![]}),canvas[_0x5bf784(0x21d)](_0x5bf784(0x1e1),handleTouchEnd,{'passive':![]}),canvas[_0x3b57fb(0x15e)](_0x5bf784(0x1b6),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x3d86f=a0_0x35c9,_0x150b57=a0_0x521960,_0x214333=a0_0x5049d9,_0x395859=a0_0x38aafa,_0x1f591f=document[_0x395859(0x275)](_0x395859(0x230));if(!_0x1f591f)return;_0x1f591f[_0x395859(0x25f)]='',PALETTE_COLORS[_0x395859(0x1bd)]((_0x37c32d,_0x32a832)=>{const _0xf06c31=a0_0x56c5,_0x464aac=a0_0xce2f,_0xbb5876=_0x395859,_0x22959a=document[_0xbb5876(0x1d6)](_0xbb5876(0x2a4));_0x22959a[_0x464aac(0x15c)]=_0x464aac(0x1fc),_0x37c32d===_0x464aac(0x1a5)||_0x37c32d===_0xbb5876(0x25c)?(_0x22959a[_0xbb5876(0x1f8)][_0xbb5876(0x2dc)]=_0xf06c31(0x137),_0x22959a[_0xbb5876(0x198)]='透明',_0x22959a[_0xbb5876(0x25f)]=_0xbb5876(0x224)):(_0x22959a[_0xbb5876(0x1f8)][_0xbb5876(0x2dc)]=_0x37c32d,_0x22959a[_0x464aac(0x124)]=_0x37c32d),_0x22959a[_0xbb5876(0x234)]=()=>{const _0x36d156=_0xbb5876;currentColor=_0x37c32d,_0x37c32d===_0x36d156(0x1f3)||_0x37c32d===_0x36d156(0x25c)?document[_0x36d156(0x275)](_0x36d156(0x1a0))[_0x36d156(0x24e)]=_0x36d156(0x1ba):document[_0x36d156(0x275)](_0x36d156(0x1a0))[_0x36d156(0x24e)]=_0x37c32d,document[_0x36d156(0x29b)](_0x36d156(0x1e6))[_0x36d156(0x1bd)](_0x336e85=>_0x336e85[_0x36d156(0x22b)][_0x36d156(0x187)](_0x36d156(0x2dd))),_0x22959a[_0x36d156(0x22b)][_0x36d156(0x1de)](_0x36d156(0x2dd));};if(_0x32a832!==0x0){const _0x5c288c=document[_0xbb5876(0x1d6)](_0xbb5876(0x28e));_0x5c288c[_0xbb5876(0x221)]='×',_0x5c288c[_0xbb5876(0x252)]=_0xbb5876(0x2c7),_0x5c288c[_0xbb5876(0x198)]=_0xbb5876(0x2e7),_0x5c288c[_0xbb5876(0x234)]=_0x1e43fe=>{const _0xc4d393=_0xbb5876;_0x1e43fe[_0xc4d393(0x214)](),PALETTE_COLORS[_0xc4d393(0x1c4)]>0x2&&(PALETTE_COLORS[_0xc4d393(0x2b7)](_0x32a832,0x1),createPalette());},_0x22959a[_0xbb5876(0x237)](_0x5c288c);}_0x1f591f[_0xbb5876(0x237)](_0x22959a);});const _0x284dbf=document[_0x395859(0x1d6)](_0x395859(0x2a4));_0x284dbf[_0x150b57(0xc9)]=_0x395859(0x20b),_0x284dbf[_0x395859(0x198)]=_0x395859(0x2cc),_0x284dbf[_0x395859(0x25f)]='+',_0x284dbf[_0x395859(0x234)]=_0x2679ff=>{const _0x126b11=_0x150b57,_0x35563c=a0_0xce2f,_0x7f4922=_0x395859;_0x2679ff[_0x35563c(0x15a)]();const _0x529c0c=document[_0x7f4922(0x1d6)](_0x7f4922(0x295));_0x529c0c[_0x7f4922(0x17d)]=_0x7f4922(0x1ca),_0x529c0c['style'][_0x7f4922(0x2f0)]=_0x7f4922(0x1b1);let _0x1dd43e=![];_0x529c0c[_0x7f4922(0x28a)]=_0x459307=>{const _0xdfd3d=a0_0x35c9,_0xc30e2=a0_0x56c5,_0x3de7a8=_0x35563c,_0x913043=_0x7f4922;if(!_0x1dd43e){PALETTE_COLORS[_0xdfd3d(0x1a9)](_0x459307[_0x913043(0x2e5)][_0xc30e2(0x149)]);if(PALETTE_COLORS[_0x3de7a8(0xf5)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x913043(0x1f6)](0x0,0x18);savePaletteToDB(),createPalette(),_0x1dd43e=!![],_0x529c0c[_0x913043(0x187)]();}},_0x529c0c[_0x7f4922(0x21d)](_0x35563c(0x1c0),()=>{const _0x349a27=_0x7f4922;if(!_0x1dd43e)_0x529c0c[_0x349a27(0x187)]();}),_0x529c0c[_0x7f4922(0x21d)](_0x126b11(0xab),_0xd93231=>_0xd93231[_0x35563c(0x15a)]()),document[_0x7f4922(0x1e8)][_0x7f4922(0x237)](_0x529c0c),_0x529c0c[_0x7f4922(0x2be)](),_0x529c0c[_0x7f4922(0x2ed)]();},_0x1f591f[_0x395859(0x1d3)](_0x284dbf,_0x1f591f[_0x214333(0x216)]);let _0xce3a5c=document[_0x214333(0x192)](_0x214333(0x1e2));!_0xce3a5c&&(_0xce3a5c=document[_0x214333(0x1f6)](_0x395859(0x2c9)),_0xce3a5c['id']=_0x395859(0x25e),_0xce3a5c[_0x395859(0x252)]=_0x3d86f(0x1ea),_0x1f591f[_0x214333(0xfb)][_0x395859(0x237)](_0xce3a5c)),_0xce3a5c[_0x214333(0x1ea)]=_0x395859(0x253)+(currentTool===_0x395859(0x182)?_0x395859(0x1e4):'')+_0x395859(0x2ad)+(currentTool===_0x395859(0x2e0)?_0x395859(0x1e4):'')+_0x214333(0x168)+(currentTool===_0x395859(0x1a8)?_0x395859(0x1e4):'')+_0x395859(0x1d9)+(penSize==0x1?_0x214333(0x213):'')+_0x395859(0x1dd)+(penSize==0x2?_0x395859(0x298):'')+_0x395859(0x18e)+(penSize==0x3?_0x395859(0x298):'')+_0x214333(0x1a2)+(penSize==0x4?_0x395859(0x298):'')+_0x214333(0x1ac)+(penMode===_0x214333(0x150)?_0x395859(0x298):'')+_0x150b57(0x1e7)+(penMode===_0x395859(0x2ea)?_0x214333(0x213):'')+_0x214333(0x1ab)+Math[_0x395859(0x26f)](currentAlpha*0x64)+_0x395859(0x233)+Math[_0x395859(0x26f)](currentAlpha*0x64)+_0x395859(0x1eb),_0xce3a5c[_0x214333(0x126)](_0x395859(0x246))[_0x395859(0x222)]=_0x4ccbdb=>setPenSize(_0x4ccbdb[_0x214333(0x1d3)][_0x395859(0x24e)]),_0xce3a5c[_0x395859(0x2c0)](_0x395859(0x2b2))[_0x395859(0x222)]=_0x5204f0=>setPenMode(_0x5204f0[_0x395859(0x2e5)][_0x395859(0x24e)]),_0xce3a5c[_0x395859(0x29b)](_0x150b57(0x16b))[_0x395859(0x1bd)](_0x216caa=>{const _0x2e51b6=_0x150b57,_0x4a1be3=_0x214333,_0x3bf0df=_0x395859;_0x216caa[_0x3bf0df(0x234)]=()=>setTool(_0x216caa[_0x2e51b6(0xc1)][_0x4a1be3(0xe7)]);}),_0xce3a5c[_0x395859(0x2c0)](_0x395859(0x241))[_0x395859(0x28a)]=_0x5c9f4a=>{const _0x8d0769=_0x214333,_0x24ebf2=_0x395859;setAlpha(_0x5c9f4a[_0x24ebf2(0x2e5)][_0x8d0769(0x12e)]),_0xce3a5c[_0x24ebf2(0x2c0)](_0x24ebf2(0x227))[_0x24ebf2(0x221)]=_0x5c9f4a[_0x24ebf2(0x2e5)][_0x24ebf2(0x24e)]+'%';let _0x2762c0=document[_0x8d0769(0x192)](_0x24ebf2(0x1d8)),_0x330b1e=document[_0x24ebf2(0x275)](_0x24ebf2(0x213));if(_0x2762c0)_0x2762c0[_0x8d0769(0x12e)]=_0x5c9f4a[_0x24ebf2(0x2e5)][_0x24ebf2(0x24e)];if(_0x330b1e)_0x330b1e[_0x24ebf2(0x221)]=_0x5c9f4a[_0x8d0769(0x1d3)][_0x24ebf2(0x24e)]+'%';};}function setAlpha(_0x3eedaf){const _0x3b1dbc=a0_0x5049d9,_0x2345cd=a0_0x38aafa;let _0x11fc67=Math[_0x2345cd(0x2c3)](0x0,Math[_0x2345cd(0x1b2)](0x64,parseInt(_0x3eedaf,0xa)||0x0));currentAlpha=_0x11fc67/0x64;let _0x507a8c=document[_0x2345cd(0x275)](_0x2345cd(0x1d8)),_0xa58309=document[_0x2345cd(0x275)](_0x3b1dbc(0x1ef));if(_0x507a8c)_0x507a8c[_0x3b1dbc(0x12e)]=_0x11fc67;if(_0xa58309)_0xa58309[_0x2345cd(0x221)]=_0x11fc67+'%';let _0x159289=document[_0x2345cd(0x275)](_0x2345cd(0x247)),_0x27b7de=document[_0x2345cd(0x275)](_0x2345cd(0x245));if(_0x159289)_0x159289[_0x2345cd(0x24e)]=_0x11fc67;if(_0x27b7de)_0x27b7de[_0x2345cd(0x221)]=_0x11fc67+'%';}async function savePaletteToDB(){const _0x77a26f=a0_0x5049d9,_0x5832d2=a0_0x38aafa;try{await idbSet(_0x5832d2(0x2e1),PALETTE_COLORS);}catch(_0x35635c){console[_0x5832d2(0x181)](_0x77a26f(0x1a8),_0x35635c);}}async function loadPaletteFromDB(){const _0x4691b9=a0_0x38aafa;try{const _0x1ba47f=await idbGet(_0x4691b9(0x2e1));Array[_0x4691b9(0x19c)](_0x1ba47f)&&_0x1ba47f[_0x4691b9(0x1c4)]&&(PALETTE_COLORS=_0x1ba47f);}catch(_0x9ddf44){console[_0x4691b9(0x181)](_0x4691b9(0x195),_0x9ddf44);}}document[a0_0x5049d9(0x1a3)](a0_0x5049d9(0x113),()=>{const _0x257d8f=a0_0x5049d9,_0x3aff2d=a0_0x38aafa,_0x3ed03b=document[_0x257d8f(0x192)](_0x3aff2d(0x1a0));_0x3ed03b&&(_0x3ed03b[_0x3aff2d(0x28a)]=_0x12ab98=>{const _0x25731c=_0x3aff2d;currentColor=_0x12ab98[_0x25731c(0x2e5)][_0x25731c(0x24e)],document[_0x25731c(0x29b)](_0x25731c(0x1e6))[_0x25731c(0x1bd)](_0x4c77b8=>_0x4c77b8[_0x25731c(0x22b)][_0x25731c(0x187)](_0x25731c(0x2dd)));});const _0x55c505=document[_0x3aff2d(0x275)](_0x3aff2d(0x1d8)),_0x13a116=document[_0x3aff2d(0x275)](_0x3aff2d(0x213));_0x55c505&&_0x13a116&&(_0x55c505[_0x257d8f(0x1e5)]=_0x1bfd9a=>{const _0x51849e=a0_0x56c5,_0x3f0c78=_0x257d8f,_0x4c4016=_0x3aff2d;setAlpha(_0x1bfd9a[_0x4c4016(0x2e5)][_0x4c4016(0x24e)]),_0x13a116[_0x4c4016(0x221)]=_0x1bfd9a[_0x4c4016(0x2e5)][_0x3f0c78(0x12e)]+'%';let _0x1e8023=document[_0x3f0c78(0x192)](_0x4c4016(0x247)),_0x534c3c=document[_0x3f0c78(0x192)](_0x4c4016(0x245));if(_0x1e8023)_0x1e8023[_0x51849e(0x149)]=_0x1bfd9a[_0x4c4016(0x2e5)][_0x4c4016(0x24e)];if(_0x534c3c)_0x534c3c[_0x4c4016(0x221)]=_0x1bfd9a[_0x4c4016(0x2e5)][_0x3f0c78(0x12e)]+'%';});});async function convertToGIF(_0x1bb6d0,_0x1a0593=0xc8,_0x491e14=a0_0x38aafa(0x1d1)){const _0x13bf5c=a0_0x111e,_0x155a46=a0_0x38aafa,_0x1fce1d=new window[(_0x155a46(0x190))]({'workers':0x2,'quality':0xa,'workerScript':_0x13bf5c(0x17a)});_0x1bb6d0[_0x155a46(0x1bd)](_0x26c424=>_0x1fce1d[_0x155a46(0x2a2)](_0x26c424,{'delay':_0x1a0593})),_0x1fce1d['on'](_0x155a46(0x235),_0x3e2b56=>{const _0x986150=a0_0x56c5,_0x6c162f=a0_0xce2f,_0xaf969a=_0x155a46,_0x28abe9=URL[_0x6c162f(0x159)](_0x3e2b56),_0x67b118=document[_0xaf969a(0x1d6)]('a');_0x67b118[_0x6c162f(0x1a4)]=_0x28abe9,_0x67b118[_0x986150(0xf0)]=_0x491e14,document[_0xaf969a(0x1e8)][_0x6c162f(0x1c2)](_0x67b118),_0x67b118[_0xaf969a(0x2ed)](),setTimeout(()=>{const _0x3b6267=_0xaf969a;document[_0x3b6267(0x1e8)][_0x3b6267(0x1dc)](_0x67b118),URL[_0x3b6267(0x255)](_0x28abe9);},0x3e8);}),_0x1fce1d[_0x155a46(0x1c1)]();}function makeAPNGBlob(_0x4202b7,_0x5e8d6d,_0x10919a,_0x3e0735=0xc8){const _0x31ac1b=a0_0x5049d9,_0xc763bb=a0_0x38aafa,_0x2360c7=[],_0x507081=[],_0x1e9eb3=document[_0xc763bb(0x1d6)](_0xc763bb(0x19d));_0x1e9eb3[_0x31ac1b(0x190)]=_0x5e8d6d,_0x1e9eb3[_0x31ac1b(0x13b)]=_0x10919a;const _0x22ea77=_0x1e9eb3[_0xc763bb(0x2c6)]('2d');_0x4202b7[_0xc763bb(0x1bd)](_0x242047=>{const _0x108dc8=_0x31ac1b,_0x15305c=_0xc763bb;_0x22ea77[_0x15305c(0x22d)](0x0,0x0,_0x5e8d6d,_0x10919a),_0x22ea77[_0x108dc8(0x230)](_0x242047,0x0,0x0,_0x5e8d6d,_0x10919a);const _0x3ba3e5=_0x22ea77[_0x15305c(0x287)](0x0,0x0,_0x5e8d6d,_0x10919a)[_0x15305c(0x261)][_0x108dc8(0x16d)];_0x2360c7[_0x108dc8(0x19e)](_0x3ba3e5),_0x507081[_0x108dc8(0x19e)](_0x3e0735);});const _0x3173c1=window[_0xc763bb(0x21e)][_0xc763bb(0x1e2)](_0x2360c7,_0x5e8d6d,_0x10919a,0x0,_0x507081);return new Blob([_0x3173c1],{'type':_0xc763bb(0x18f)});}function convertToAPNG(_0x375bdd,_0x5c58a1,_0x1e8369,_0x299410=0xc8,_0x25a942=a0_0x38aafa(0x2ef)){const _0xc04d95=a0_0x35c9,_0x4b7818=a0_0x5049d9,_0x13647f=a0_0x38aafa,_0x281dbd=makeAPNGBlob(_0x375bdd,_0x5c58a1,_0x1e8369,_0x299410),_0x5985ae=URL[_0x4b7818(0x159)](_0x281dbd),_0x140a2d=document[_0xc04d95(0x227)]('a');_0x140a2d[_0x13647f(0x1c8)]=_0x5985ae,_0x140a2d[_0x13647f(0x215)]=_0x25a942,document[_0x13647f(0x1e8)][_0x13647f(0x237)](_0x140a2d),_0x140a2d[_0x4b7818(0x1c3)](),setTimeout(()=>{const _0x4c04b9=_0x13647f;document[_0x4c04b9(0x1e8)][_0x4c04b9(0x1dc)](_0x140a2d),URL[_0x4c04b9(0x255)](_0x5985ae);},0x3e8);}async function loadImages(_0x1d9e67){const _0x2d6708=a0_0x521960,_0x3dfe84=a0_0x38aafa,_0x12e19f=await Promise[_0x2d6708(0x184)](_0x1d9e67[_0x3dfe84(0x294)](_0x512601=>{return new Promise(_0x200b27=>{const _0x593dc1=a0_0x1925,_0x74d328=new Image();_0x74d328[_0x593dc1(0x290)]=_0x593dc1(0x26a),_0x74d328[_0x593dc1(0x1b3)]=_0x512601,_0x74d328[_0x593dc1(0x185)]=()=>_0x200b27(_0x74d328);});}));return _0x12e19f;}function exportSpriteSheetDialog(){const _0x206d7e=a0_0x5049d9,_0x41b687=a0_0x38aafa;let _0x2732a0=prompt(_0x206d7e(0x1a1),'1');if(_0x2732a0===null)return;let _0x979847=Math[_0x41b687(0x2c3)](0x1,parseInt(_0x2732a0,0xa)||0x1),_0x445dc5=prompt(_0x41b687(0x264),'0');if(_0x445dc5===null)return;let _0x435b4f=Math[_0x41b687(0x2c3)](0x0,parseInt(_0x445dc5,0xa)||0x0);exportSpriteSheet(_0x979847,_0x435b4f);}function exportSpriteSheet(_0x4ce16a=0x1,_0x544e60=0x0){const _0x14c46a=a0_0x35c9,_0x472511=a0_0x521960,_0x3d7ccc=a0_0x5049d9,_0x560257=a0_0x38aafa,_0x481ce5=getCurrentProject();if(!_0x481ce5){alert(_0x560257(0x272));return;}const _0x114f14=_0x481ce5[_0x14c46a(0x11f)];if(!_0x114f14||_0x114f14[_0x560257(0x1c4)]===0x0){alert(_0x560257(0x2cf));return;}const _0x52fa4b=_0x481ce5[_0x560257(0x1b8)]*cellSize,_0x4ff14b=_0x481ce5[_0x560257(0x27c)]*cellSize,_0x3f7bbd=_0x52fa4b*_0x114f14[_0x560257(0x1c4)]*_0x4ce16a+Math[_0x560257(0x2c3)](0x0,_0x114f14[_0x560257(0x1c4)]-0x1)*_0x544e60,_0x5a6b5d=_0x4ff14b*_0x4ce16a,_0x2f118a=document[_0x472511(0xdd)](_0x560257(0x19d));_0x2f118a[_0x560257(0x1b8)]=_0x3f7bbd,_0x2f118a[_0x3d7ccc(0x13b)]=_0x5a6b5d;const _0x41a699=_0x2f118a[_0x560257(0x2c6)]('2d');_0x41a699[_0x560257(0x22d)](0x0,0x0,_0x2f118a[_0x560257(0x1b8)],_0x2f118a[_0x560257(0x27c)]);let _0x1d228f=0x0;for(let _0x2893c1=0x0;_0x2893c1<_0x114f14[_0x560257(0x1c4)];_0x2893c1++){let _0x3a7998=document[_0x560257(0x1d6)](_0x472511(0x112));_0x3a7998[_0x3d7ccc(0x190)]=_0x52fa4b,_0x3a7998[_0x560257(0x27c)]=_0x4ff14b;let _0x4bf90f=_0x3a7998[_0x560257(0x2c6)]('2d');for(let _0x4f0daa=0x0;_0x4f0daa<_0x114f14[_0x2893c1][_0x3d7ccc(0x13d)][_0x3d7ccc(0xf5)];_0x4f0daa++){_0x4bf90f[_0x560257(0x1ff)](_0x114f14[_0x2893c1][_0x560257(0x262)][_0x4f0daa],0x0,0x0);}_0x4ce16a===0x1&&_0x544e60===0x0?(_0x41a699[_0x3d7ccc(0x230)](_0x3a7998,_0x1d228f,0x0),_0x1d228f+=_0x52fa4b):(_0x41a699[_0x560257(0x1ff)](_0x3a7998,0x0,0x0,_0x52fa4b,_0x4ff14b,_0x1d228f,0x0,_0x52fa4b*_0x4ce16a,_0x4ff14b*_0x4ce16a),_0x1d228f+=_0x52fa4b*_0x4ce16a),_0x2893c1<_0x114f14[_0x3d7ccc(0xf5)]-0x1&&_0x544e60>0x0&&(_0x1d228f+=_0x544e60);}const _0x4742bb=(_0x481ce5[_0x560257(0x2e6)]||_0x560257(0x2ab))[_0x3d7ccc(0x127)](/[\\/:*?"<>|]/g,'_'),_0x3e57a9=document[_0x560257(0x1d6)]('a');_0x3e57a9[_0x472511(0x164)]=_0x2f118a[_0x3d7ccc(0x1b5)](_0x3d7ccc(0xe0)),_0x3e57a9[_0x560257(0x215)]=_0x4742bb+_0x560257(0x217),document[_0x560257(0x1e8)][_0x560257(0x237)](_0x3e57a9),_0x3e57a9[_0x560257(0x2ed)](),setTimeout(()=>{const _0x397402=_0x3d7ccc;document[_0x397402(0x1c5)][_0x397402(0x136)](_0x3e57a9);},0x3e8);}const NEZUMI_METADATA_SIG=a0_0x38aafa(0x258);function appendMetadataToBlob(_0x3dbcc6,_0x366a57){const _0x233443=a0_0x38aafa,_0xee9628=new TextEncoder(),_0x23072c=_0xee9628[_0x233443(0x1e2)](NEZUMI_METADATA_SIG),_0x5d49bd=_0xee9628[_0x233443(0x1e2)](JSON[_0x233443(0x1e5)](_0x366a57));return new Blob([_0x3dbcc6,_0x23072c,_0x5d49bd],{'type':_0x3dbcc6[_0x233443(0x17d)]||_0x233443(0x2cb)});}function indexOfSubarray(_0x28bf7d,_0x1a510e){const _0x53561d=a0_0x5049d9,_0x1656a3=a0_0x38aafa;for(let _0x1ffca8=0x0;_0x1ffca8<=_0x28bf7d[_0x1656a3(0x1c4)]-_0x1a510e[_0x53561d(0xf5)];_0x1ffca8++){let _0x4fe614=!![];for(let _0x33a5ad=0x0;_0x33a5ad<_0x1a510e[_0x1656a3(0x1c4)];_0x33a5ad++){if(_0x28bf7d[_0x1ffca8+_0x33a5ad]!==_0x1a510e[_0x33a5ad]){_0x4fe614=![];break;}}if(_0x4fe614)return _0x1ffca8;}return-0x1;}function extractMetadataFromArrayBuffer(_0x1be664){const _0x228037=a0_0x5049d9,_0x4c8e5c=a0_0x38aafa,_0x39f812=new TextEncoder()[_0x4c8e5c(0x1e2)](NEZUMI_METADATA_SIG),_0x33e8fe=new Uint8Array(_0x1be664),_0x29e4ea=indexOfSubarray(_0x33e8fe,_0x39f812);if(_0x29e4ea===-0x1)return null;const _0x479984=_0x33e8fe[_0x4c8e5c(0x236)](_0x29e4ea+_0x39f812[_0x228037(0xf5)]);try{const _0x5e591e=new TextDecoder()[_0x4c8e5c(0x27e)](_0x479984);return JSON[_0x4c8e5c(0x288)](_0x5e591e);}catch(_0x3dd8a8){return null;}}async function exportStandalone(){const _0x63cc33=a0_0x35c9,_0x52fd27=a0_0x521960,_0x12ad55=a0_0x5049d9,_0x55c15a=a0_0x38aafa;let _0x1bb267=getCurrentProject(),_0x4f91ab=_0x1bb267[_0x12ad55(0x17f)],_0x419bf9=_0x1bb267[_0x55c15a(0x1b8)]*cellSize,_0x407c04=_0x1bb267[_0x55c15a(0x27c)]*cellSize;const _0x54ece5=_0x4f91ab[_0x55c15a(0x294)](_0x585b1b=>{const _0x102fa4=_0x12ad55,_0x7b6c13=_0x55c15a;let _0x28d301=document[_0x7b6c13(0x1d6)](_0x7b6c13(0x19d));_0x28d301[_0x7b6c13(0x1b8)]=_0x419bf9,_0x28d301[_0x7b6c13(0x27c)]=_0x407c04;let _0x39ca30=_0x28d301[_0x7b6c13(0x2c6)]('2d');for(let _0x14d876=0x0;_0x14d876<_0x585b1b[_0x102fa4(0x13d)][_0x7b6c13(0x1c4)];_0x14d876++){_0x39ca30[_0x7b6c13(0x1ff)](_0x585b1b[_0x102fa4(0x13d)][_0x14d876],0x0,0x0);}let _0x3716ab=new Image();return _0x3716ab[_0x7b6c13(0x1b3)]=_0x28d301[_0x102fa4(0x1b5)](_0x7b6c13(0x1fa)),_0x3716ab;});await Promise[_0x55c15a(0x25a)](_0x54ece5[_0x55c15a(0x294)](_0xcfaac5=>new Promise(_0x3253dd=>{const _0x5cd22e=_0x55c15a;_0xcfaac5[_0x5cd22e(0x185)]=_0x3253dd;})))[_0x63cc33(0xe0)](()=>{});const _0x27123c=(_0x1bb267[_0x55c15a(0x2e6)]||_0x55c15a(0x21f))[_0x55c15a(0x27d)](/[\\/:*?"<>|]/g,'_'),_0x155d9a=makeAPNGBlob(_0x54ece5,_0x419bf9,_0x407c04,animationDelay),_0x30069d={'type':_0x55c15a(0x207),'version':0x1,'project':{'width':_0x1bb267[_0x55c15a(0x1b8)],'height':_0x1bb267[_0x55c15a(0x27c)],'name':_0x1bb267[_0x55c15a(0x2e6)]||'','activeFrame':_0x1bb267[_0x12ad55(0x12c)],'frames':_0x1bb267[_0x55c15a(0x2b3)][_0x55c15a(0x294)](_0x52699f=>({'activeLayer':_0x52699f[_0x55c15a(0x1b5)],'layers':_0x52699f[_0x52fd27(0x1c8)][_0x55c15a(0x294)](_0x3d695a=>_0x3d695a[_0x55c15a(0x1df)]())}))}},_0x43d682=appendMetadataToBlob(_0x155d9a,_0x30069d),_0x13780d=URL[_0x55c15a(0x201)](_0x43d682),_0x1d63e7=document[_0x12ad55(0x1f6)]('a');_0x1d63e7[_0x55c15a(0x1c8)]=_0x13780d,_0x1d63e7[_0x55c15a(0x215)]=_0x27123c+_0x12ad55(0x1e6),document[_0x55c15a(0x1e8)][_0x52fd27(0xb4)](_0x1d63e7),_0x1d63e7[_0x55c15a(0x2ed)](),setTimeout(()=>{const _0xe4d28=_0x55c15a;document[_0xe4d28(0x1e8)][_0xe4d28(0x1dc)](_0x1d63e7),URL[_0xe4d28(0x255)](_0x13780d);},0x3e8);}function loadStandaloneFromFile(_0x5b03ff){return new Promise((_0x247775,_0x100913)=>{const _0x561b87=a0_0x1925,_0x39b464=new FileReader();_0x39b464[_0x561b87(0x185)]=_0x17b2a1=>{const _0x437e38=a0_0x35c9,_0x119f78=a0_0xce2f,_0x57e40e=_0x561b87,_0x4bf959=_0x17b2a1[_0x57e40e(0x2e5)][_0x57e40e(0x192)],_0x32cf7e=extractMetadataFromArrayBuffer(_0x4bf959);if(!_0x32cf7e||!_0x32cf7e[_0x437e38(0x186)]){_0x100913(new Error(_0x57e40e(0x20f)));return;}const _0x2a4f2a=_0x32cf7e[_0x57e40e(0x22f)];try{const _0x56581e=createProject(_0x2a4f2a[_0x57e40e(0x1b8)],_0x2a4f2a[_0x57e40e(0x27c)],_0x2a4f2a[_0x57e40e(0x2e6)]||'画像');_0x56581e[_0x57e40e(0x2b3)]=_0x2a4f2a[_0x57e40e(0x2b3)][_0x119f78(0x18f)](_0x415e89=>{const _0x537888=_0x437e38,_0x2d7801=_0x119f78,_0x2a6940=_0x57e40e;let _0x368cee={'layers':[],'activeLayer':_0x415e89[_0x2d7801(0x215)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x37e2c8=0x0;_0x37e2c8<_0x415e89[_0x2a6940(0x262)][_0x2a6940(0x1c4)];_0x37e2c8++){let _0x2f0ba3=new Image();_0x2f0ba3[_0x2a6940(0x1b3)]=_0x415e89[_0x2d7801(0x13d)][_0x37e2c8];let _0x11addb=document[_0x2d7801(0x1f6)](_0x2a6940(0x19d));_0x11addb[_0x2a6940(0x1b8)]=_0x2a4f2a[_0x537888(0x13b)]*cellSize,_0x11addb[_0x2a6940(0x27c)]=_0x2a4f2a[_0x2d7801(0x13b)]*cellSize,_0x2f0ba3[_0x2d7801(0x11a)]=()=>{const _0x1539ca=_0x2d7801,_0x2ec4d8=_0x2a6940;let _0x1b3d62=_0x11addb[_0x2ec4d8(0x2c6)]('2d');_0x1b3d62[_0x2ec4d8(0x22d)](0x0,0x0,_0x11addb[_0x2ec4d8(0x1b8)],_0x11addb[_0x2ec4d8(0x27c)]),_0x1b3d62[_0x1539ca(0x230)](_0x2f0ba3,0x0,0x0);},_0x368cee[_0x2d7801(0x13d)][_0x2a6940(0x278)](_0x11addb);}return _0x368cee;}),projects[_0x57e40e(0x278)](_0x56581e),activeProject=projects[_0x57e40e(0x1c4)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x247775(_0x56581e);}catch(_0x161aaf){_0x100913(_0x161aaf);}},_0x39b464[_0x561b87(0x1c5)]=_0x29763a=>_0x100913(_0x29763a),_0x39b464['readAsArrayBuffer'](_0x5b03ff);});}function toggleSection(_0x102d50){const _0xdd610b=a0_0x111e,_0x140e20=a0_0x521960,_0x54301e=a0_0x5049d9,_0x5656d4=a0_0x38aafa,_0x50c0b9=document[_0x5656d4(0x275)](_0x102d50),_0x393893=_0x50c0b9[_0x5656d4(0x2c0)](_0x5656d4(0x218)),_0x646451=_0x50c0b9[_0x5656d4(0x2c0)](_0x5656d4(0x277));_0x393893[_0xdd610b(0x1d9)][_0x5656d4(0x2f0)]===_0x54301e(0x12d)?(_0x393893[_0x5656d4(0x1f8)][_0x5656d4(0x2f0)]='',_0x646451[_0x5656d4(0x221)]='▼'):(_0x393893[_0x5656d4(0x1f8)][_0x140e20(0x114)]=_0x5656d4(0x1b1),_0x646451[_0x5656d4(0x221)]='▲');}document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x293),()=>{const _0x5bc7c8=a0_0x5049d9,_0x27ce1f=a0_0x38aafa;document[_0x5bc7c8(0xe9)](_0x27ce1f(0x204))[_0x27ce1f(0x1bd)](_0x5f2bda=>_0x5f2bda[_0x27ce1f(0x1f8)][_0x27ce1f(0x2f0)]=''),document[_0x5bc7c8(0xe9)](_0x5bc7c8(0xf6))[_0x5bc7c8(0x10a)](_0x161e88=>_0x161e88[_0x27ce1f(0x221)]='▼');}),window[a0_0x38aafa(0x21d)](a0_0x38aafa(0x251),updateMenuBtnDisplay),document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x293),updateMenuBtnDisplay);function a0_0x56c5(_0x4a2dee,_0x4e484d){_0x4a2dee=_0x4a2dee-0xaa;const _0x1899c5=a0_0x22a5();let _0x12e57a=_0x1899c5[_0x4a2dee];return _0x12e57a;}function toggleSideMenu(_0xc642f3){const _0x8deee=a0_0x35c9,_0x59c6ed=a0_0x521960,_0x143f3b=a0_0x5049d9,_0x1961aa=a0_0x38aafa,_0x36607d=document[_0x8deee(0x116)](_0x143f3b(0x226)),_0x218902=document[_0x1961aa(0x275)](_0x1961aa(0x183)),_0x3c162a=document[_0x1961aa(0x275)](_0x1961aa(0x18b)),_0x44156e=document[_0x1961aa(0x275)](_0x1961aa(0x1b4)),_0x5e51d0=_0x36607d[_0x1961aa(0x22b)][_0x1961aa(0x23f)](_0x59c6ed(0x1bb));let _0x492c28=typeof _0xc642f3===_0x1961aa(0x1af)?_0xc642f3:!_0x5e51d0;_0x492c28?(_0x36607d[_0x143f3b(0x176)][_0x1961aa(0x1de)](_0x1961aa(0x2ec)),_0x218902[_0x1961aa(0x22b)][_0x143f3b(0x189)](_0x1961aa(0x2a1)),document[_0x143f3b(0x1c5)][_0x59c6ed(0x178)][_0x59c6ed(0x14a)]=_0x1961aa(0x289),document[_0x1961aa(0x1e8)][_0x1961aa(0x1f8)][_0x1961aa(0x1ec)]=_0x1961aa(0x1b1),window[_0x1961aa(0x22a)]<=0x384&&(_0x44156e[_0x59c6ed(0x178)][_0x1961aa(0x2f0)]=_0x1961aa(0x1d2),_0x3c162a[_0x8deee(0x151)][_0x1961aa(0x2f0)]=_0x1961aa(0x1b1))):(_0x36607d[_0x59c6ed(0x100)][_0x143f3b(0x1e9)](_0x143f3b(0x144)),_0x218902[_0x1961aa(0x22b)][_0x59c6ed(0x1af)](_0x1961aa(0x2a1)),document[_0x1961aa(0x1e8)][_0x1961aa(0x1f8)][_0x143f3b(0x110)]='',document[_0x1961aa(0x1e8)][_0x1961aa(0x1f8)][_0x1961aa(0x1ec)]='',window[_0x1961aa(0x22a)]<=0x384&&(_0x44156e[_0x1961aa(0x1f8)][_0x143f3b(0x193)]=_0x1961aa(0x1b1),_0x3c162a[_0x143f3b(0x1bb)][_0x1961aa(0x2f0)]=_0x59c6ed(0x15d)));}function updateMenuBtnDisplay(){const _0x15c968=a0_0x35c9,_0x12cc3d=a0_0x521960,_0x5b1512=a0_0x5049d9,_0x4c6c10=a0_0x38aafa,_0x246a76=document[_0x4c6c10(0x275)](_0x5b1512(0x226)),_0x4959bc=document[_0x15c968(0x116)](_0x4c6c10(0x183)),_0xad1d33=document[_0x5b1512(0x192)](_0x4c6c10(0x18b)),_0x307d53=document[_0x4c6c10(0x275)](_0x4c6c10(0x1b4));window[_0x4c6c10(0x22a)]>0x384?(_0x246a76[_0x4c6c10(0x22b)][_0x5b1512(0x1e9)](_0x4c6c10(0x2ec)),_0x4959bc[_0x4c6c10(0x22b)][_0x4c6c10(0x187)](_0x4c6c10(0x2a1)),_0x307d53[_0x5b1512(0x1bb)][_0x4c6c10(0x2f0)]=_0x5b1512(0x12d),_0xad1d33[_0x4c6c10(0x1f8)][_0x4c6c10(0x2f0)]=_0x4c6c10(0x1b1),document[_0x4c6c10(0x1e8)][_0x4c6c10(0x1f8)][_0x4c6c10(0x188)]='',document[_0x4c6c10(0x1e8)][_0x4c6c10(0x1f8)][_0x5b1512(0x13e)]=''):_0x246a76[_0x4c6c10(0x22b)][_0x4c6c10(0x23f)](_0x5b1512(0x144))?(_0x307d53[_0x5b1512(0x1bb)][_0x4c6c10(0x2f0)]=_0x4c6c10(0x1d2),_0xad1d33[_0x4c6c10(0x1f8)][_0x4c6c10(0x2f0)]=_0x4c6c10(0x1b1)):(_0x307d53[_0x4c6c10(0x1f8)][_0x4c6c10(0x2f0)]=_0x4c6c10(0x1b1),_0xad1d33[_0x4c6c10(0x1f8)][_0x12cc3d(0x114)]=_0x4c6c10(0x1d2));}document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x2ed),function(_0x2de695){const _0x27eacf=a0_0x35c9,_0x140212=a0_0x521960,_0x15e345=a0_0x5049d9,_0xa1d71e=a0_0x38aafa;if(window[_0xa1d71e(0x22a)]>0x384)return;const _0x626d09=document[_0xa1d71e(0x275)](_0xa1d71e(0x2ce)),_0x3daa69=document[_0xa1d71e(0x275)](_0x27eacf(0x174)),_0x528715=document[_0xa1d71e(0x275)](_0xa1d71e(0x18b)),_0x29a23b=document[_0xa1d71e(0x275)](_0x15e345(0x1be));!_0x626d09[_0xa1d71e(0x23f)](_0x2de695[_0xa1d71e(0x2e5)])&&_0x2de695[_0xa1d71e(0x2e5)]!==_0x528715&&_0x2de695[_0xa1d71e(0x2e5)]!==_0x29a23b&&(_0x626d09[_0xa1d71e(0x22b)][_0xa1d71e(0x187)](_0xa1d71e(0x2ec)),_0x3daa69[_0xa1d71e(0x22b)][_0xa1d71e(0x187)](_0xa1d71e(0x2a1)),_0x29a23b[_0xa1d71e(0x1f8)][_0xa1d71e(0x2f0)]=_0x140212(0xb2),_0x528715[_0xa1d71e(0x1f8)][_0xa1d71e(0x2f0)]=_0xa1d71e(0x1d2),document[_0xa1d71e(0x1e8)][_0xa1d71e(0x1f8)][_0xa1d71e(0x188)]='',document[_0x15e345(0x1c5)][_0xa1d71e(0x1f8)][_0xa1d71e(0x1ec)]='');}),(function(){const _0x80082d=a0_0x38aafa;try{(location[_0x80082d(0x1ad)][_0x80082d(0x18c)](/index\.html$/)||location[_0x80082d(0x1ad)]==='/'||location[_0x80082d(0x1ad)]===_0x80082d(0x2b1))&&(!localStorage[_0x80082d(0x1d5)](_0x80082d(0x249))&&(localStorage[_0x80082d(0x1fc)](_0x80082d(0x249),'1'),location[_0x80082d(0x1c8)]=_0x80082d(0x2ae)));}catch(_0x1cc5b3){}}());function a0_0x35c9(_0xbf9da3,_0x1beea4){_0xbf9da3=_0xbf9da3-0xc8;const _0x28bc01=a0_0x9b6b();let _0x3a7f49=_0x28bc01[_0xbf9da3];return _0x3a7f49;}let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x1cc),_0x21cb4c=>{const _0x9e4b7b=a0_0x38aafa;if(_0x21cb4c[_0x9e4b7b(0x2c5)]===_0x9e4b7b(0x24c))shiftPressed=!![];}),document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x1ab),_0x77de73=>{const _0x1b20f1=a0_0x38aafa;if(_0x77de73[_0x1b20f1(0x2c5)]===_0x1b20f1(0x24c))shiftPressed=![];}),canvas[a0_0x5049d9(0x1a3)](a0_0x38aafa(0x1cd),_0x202837=>{const _0x756d30=a0_0x521960,_0x25e548=a0_0x5049d9,_0x10b410=a0_0x38aafa;if(_0x202837[_0x10b410(0x220)]===_0x10b410(0x1a5))return;currentTool===_0x10b410(0x232)||shiftPressed?(dragging=!![],isDrawing=![],startX=_0x202837[_0x10b410(0x193)],startY=_0x202837[_0x10b410(0x25d)],lastX=posX,lastY=posY,canvas[_0x10b410(0x1f0)](_0x202837[_0x10b410(0x270)]),canvas[_0x10b410(0x1f8)][_0x10b410(0x2bd)]=_0x10b410(0x1c2)):(isDrawing=!![],pointerDownX=_0x202837[_0x10b410(0x193)],pointerDownY=_0x202837[_0x25e548(0x12b)],handleMouseDown(_0x202837),canvas[_0x756d30(0x1cc)](_0x202837[_0x10b410(0x270)]));}),canvas[a0_0x38aafa(0x21d)](a0_0x38aafa(0x17e),_0x57ea46=>{const _0x16d0d9=a0_0x521960,_0x52d711=a0_0x38aafa;if(_0x57ea46[_0x52d711(0x220)]===_0x52d711(0x1a5))return;if(dragging)posX=lastX+(_0x57ea46[_0x52d711(0x193)]-startX),posY=lastY+(_0x57ea46[_0x16d0d9(0x1a6)]-startY),updateTransform();else{if(isDrawing){if(currentTool!==_0x52d711(0x182)){const _0x3de830=Math[_0x52d711(0x1a6)](_0x57ea46[_0x52d711(0x193)]-pointerDownX),_0x37d95c=Math[_0x52d711(0x1a6)](_0x57ea46[_0x52d711(0x25d)]-pointerDownY);if(_0x3de830>=PAN_CANCEL_DISTANCE||_0x37d95c>=PAN_CANCEL_DISTANCE){isDrawing=![];try{handleMouseUp(_0x57ea46);}catch(_0x17fa55){}return;}}handleMouseMove(_0x57ea46);}}}),canvas[a0_0x38aafa(0x21d)](a0_0x38aafa(0x2de),_0x3079d5=>{const _0x198775=a0_0x521960,_0x5d7d5e=a0_0x5049d9,_0x438d21=a0_0x38aafa;if(_0x3079d5[_0x438d21(0x220)]===_0x438d21(0x1a5))return;dragging=![],isDrawing&&handleMouseUp(_0x3079d5),isDrawing=![];try{canvas[_0x5d7d5e(0x217)](_0x3079d5[_0x438d21(0x270)]);}catch(_0x49b526){}if(currentTool===_0x198775(0x12a))canvas[_0x438d21(0x1f8)][_0x438d21(0x2bd)]=_0x198775(0xc3);else canvas[_0x438d21(0x1f8)][_0x5d7d5e(0x151)]=_0x5d7d5e(0x10c);}),wrapper[a0_0x38aafa(0x21d)](a0_0x521960(0x12c),_0x23490e=>{const _0x572e2c=a0_0x5049d9,_0x16d5a4=a0_0x38aafa;_0x23490e[_0x572e2c(0x187)]();const _0x3009d1=canvas[_0x572e2c(0x1b0)](),_0x55c2ec=_0x23490e[_0x16d5a4(0x193)],_0x4df796=_0x23490e[_0x16d5a4(0x25d)],_0x3497a1=(_0x55c2ec-_0x3009d1[_0x16d5a4(0x2a7)]-posX)/scale,_0x3e9516=(_0x4df796-_0x3009d1[_0x16d5a4(0x196)]-posY)/scale,_0x4a5d34=_0x23490e[_0x16d5a4(0x1e7)]>0x0?0.9:1.1;let _0x163337=scale*_0x4a5d34;_0x163337=Math[_0x16d5a4(0x1b2)](Math[_0x16d5a4(0x2c3)](_0x163337,0.2),0x5),posX=_0x55c2ec-_0x3009d1[_0x16d5a4(0x2a7)]-_0x3497a1*_0x163337,posY=_0x4df796-_0x3009d1[_0x16d5a4(0x196)]-_0x3e9516*_0x163337,scale=_0x163337,updateTransform();const _0x3695e9=document[_0x16d5a4(0x275)](_0x572e2c(0x155)),_0x59c980=document[_0x16d5a4(0x275)](_0x16d5a4(0x2b6));if(_0x3695e9)_0x3695e9[_0x16d5a4(0x24e)]=Math[_0x16d5a4(0x26f)](scale*0x64);if(_0x59c980)_0x59c980[_0x16d5a4(0x221)]=Math[_0x16d5a4(0x26f)](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x39875c=a0_0x5049d9,_0xb6fd5=a0_0x38aafa;canvas[_0xb6fd5(0x1f8)][_0x39875c(0xee)]=_0xb6fd5(0x184)+posX+_0xb6fd5(0x1c0)+posY+_0x39875c(0xda)+scale+')';}function setZoomValue(_0x32752e){const _0x3d2433=a0_0x5049d9,_0x19e0c0=a0_0x38aafa,_0x51118e=Math[_0x3d2433(0x107)](0x14,Math[_0x19e0c0(0x1b2)](0x1f4,parseInt(_0x32752e,0xa)||0x64)),_0x4997a7=_0x51118e/0x64;scale=_0x4997a7,updateTransform();const _0x57d71f=document[_0x19e0c0(0x275)](_0x19e0c0(0x1bc)),_0x7eb0bc=document[_0x19e0c0(0x275)](_0x19e0c0(0x2b6));if(_0x57d71f)_0x57d71f[_0x19e0c0(0x24e)]=_0x51118e;if(_0x7eb0bc)_0x7eb0bc[_0x19e0c0(0x221)]=_0x51118e+'%';}function zoomIn(){const _0x2d2bef=a0_0x38aafa,_0x5df9b6=document[_0x2d2bef(0x275)](_0x2d2bef(0x1bc));let _0x1d7ba5=_0x5df9b6?parseInt(_0x5df9b6[_0x2d2bef(0x24e)],0xa):Math[_0x2d2bef(0x26f)](scale*0x64);_0x1d7ba5=Math[_0x2d2bef(0x1b2)](0x1f4,_0x1d7ba5+0xa),setZoomValue(_0x1d7ba5);}function zoomOut(){const _0x32e23b=a0_0x521960,_0x4a97d3=a0_0x38aafa,_0x91e660=document[_0x4a97d3(0x275)](_0x32e23b(0x135));let _0x58d12e=_0x91e660?parseInt(_0x91e660[_0x4a97d3(0x24e)],0xa):Math[_0x4a97d3(0x26f)](scale*0x64);_0x58d12e=Math[_0x4a97d3(0x2c3)](0x14,_0x58d12e-0xa),setZoomValue(_0x58d12e);}const zs=document[a0_0x38aafa(0x275)](a0_0x413a03(0x12d));if(zs)zs[a0_0x38aafa(0x28a)]=_0x2418a2=>setZoomValue(_0x2418a2[a0_0x5049d9(0x1d3)][a0_0x38aafa(0x24e)]);function a0_0x9b6b(){const _0x2ffa39=a0_0x111e,_0x596785=['jpeg',_0x2ffa39(0x127),_0x2ffa39(0xea),_0x2ffa39(0x1d3),'touchstart',_0x2ffa39(0x114),_0x2ffa39(0xd7),_0x2ffa39(0x1a9),_0x2ffa39(0xba),_0x2ffa39(0xcc),_0x2ffa39(0x101),_0x2ffa39(0xa7),_0x2ffa39(0x169),_0x2ffa39(0x1db),_0x2ffa39(0xbc),'byteLength',_0x2ffa39(0x188),'nezumi-theme',_0x2ffa39(0xbd),_0x2ffa39(0xdc),'closePath',_0x2ffa39(0x19b),_0x2ffa39(0xe3),_0x2ffa39(0x159),_0x2ffa39(0x164),_0x2ffa39(0x1df),_0x2ffa39(0xb1),_0x2ffa39(0x97),_0x2ffa39(0xb0),_0x2ffa39(0x1c8),_0x2ffa39(0x18f),'この色をパレットから削除',_0x2ffa39(0x13b),_0x2ffa39(0x175),_0x2ffa39(0x123),'#palette-penSize',_0x2ffa39(0x8d),_0x2ffa39(0x12c),_0x2ffa39(0xd4),_0x2ffa39(0x1f4),_0x2ffa39(0x166),_0x2ffa39(0x1ed),_0x2ffa39(0x99),_0x2ffa39(0x13a),_0x2ffa39(0x181),'ダークテーマに切替',_0x2ffa39(0x1a5),_0x2ffa39(0x180),_0x2ffa39(0x19c),_0x2ffa39(0x1bb),_0x2ffa39(0x1bd),'onblur',_0x2ffa39(0x19f),'pathname','スプライトシートの拡大率を指定（例:\x201\x20=\x20元サイズ,\x202\x20=\x202倍）',_0x2ffa39(0xda),_0x2ffa39(0x1b4),_0x2ffa39(0x133),_0x2ffa39(0x1bf),_0x2ffa39(0x193),'themeToggleBtn',_0x2ffa39(0x1c3),_0x2ffa39(0x17c),_0x2ffa39(0x115),_0x2ffa39(0x1d0),_0x2ffa39(0x167),_0x2ffa39(0x1e6),_0x2ffa39(0xcd),_0x2ffa39(0x16a),_0x2ffa39(0x9b),_0x2ffa39(0x16e),_0x2ffa39(0x141),_0x2ffa39(0xc4),_0x2ffa39(0x122),_0x2ffa39(0x186),'flush',_0x2ffa39(0xab),_0x2ffa39(0x19d),_0x2ffa39(0xe2),_0x2ffa39(0xce),_0x2ffa39(0x1eb),'palette-color',_0x2ffa39(0x93),'getAttribute',_0x2ffa39(0xa1),_0x2ffa39(0xac),_0x2ffa39(0x153),'getContext','GIFに変換できる画像がありません。',_0x2ffa39(0x129),'changedTouches',_0x2ffa39(0x158),_0x2ffa39(0xee),_0x2ffa39(0x13c),_0x2ffa39(0x1da),_0x2ffa39(0x11a),_0x2ffa39(0x1aa),'nezumi-animation.apng','image/png',_0x2ffa39(0x118),'moveTo',_0x2ffa39(0x1c6),'round',_0x2ffa39(0x128),_0x2ffa39(0x8c),_0x2ffa39(0x176),_0x2ffa39(0x1bc),'\x0a---NEZUMI_METADATA_START---\x0a',_0x2ffa39(0x168),'#newProjName',_0x2ffa39(0x161),_0x2ffa39(0x110),_0x2ffa39(0xdf),_0x2ffa39(0x1cd),_0x2ffa39(0xe8),'fillStyle',_0x2ffa39(0xa6),'join',_0x2ffa39(0x155),_0x2ffa39(0x88),_0x2ffa39(0x1e1),_0x2ffa39(0x195),'penMode',_0x2ffa39(0x18b),_0x2ffa39(0x1c4),'display',_0x2ffa39(0x18a),_0x2ffa39(0xaa),_0x2ffa39(0xe7),_0x2ffa39(0x11d),_0x2ffa39(0x1cf),_0x2ffa39(0x1ce),_0x2ffa39(0x108),'458555ntXURF',_0x2ffa39(0x8a),_0x2ffa39(0x14f),_0x2ffa39(0x12e),_0x2ffa39(0x8b),_0x2ffa39(0x1ae),_0x2ffa39(0x96),_0x2ffa39(0x1c0),_0x2ffa39(0xff),'transaction',_0x2ffa39(0xd9),_0x2ffa39(0x9e),_0x2ffa39(0x187),_0x2ffa39(0x1a1),_0x2ffa39(0x15f),_0x2ffa39(0x1b8),'#cccccc',_0x2ffa39(0xaf),_0x2ffa39(0xe1),_0x2ffa39(0xc3),'put',_0x2ffa39(0x143),_0x2ffa39(0xf7),_0x2ffa39(0x126),'preventDefault',_0x2ffa39(0x1e5),_0x2ffa39(0x1e3),_0x2ffa39(0x1e7),_0x2ffa39(0x10c),_0x2ffa39(0x199),_0x2ffa39(0x146),_0x2ffa39(0x12f),_0x2ffa39(0xed),_0x2ffa39(0x10f),_0x2ffa39(0x106),_0x2ffa39(0x1c9),'nezumi-palette',_0x2ffa39(0x1ea),_0x2ffa39(0x113),_0x2ffa39(0x182),_0x2ffa39(0x109),'stroke',_0x2ffa39(0x1c7),_0x2ffa39(0x151),_0x2ffa39(0xd2),'className',_0x2ffa39(0x14a),_0x2ffa39(0xf0),_0x2ffa39(0x160),'ontouchstart',_0x2ffa39(0x1f6),_0x2ffa39(0x1f0),_0x2ffa39(0xf6),_0x2ffa39(0x1b2),_0x2ffa39(0xcb),_0x2ffa39(0x1a6),_0x2ffa39(0x170),_0x2ffa39(0x1d1),_0x2ffa39(0xe9),_0x2ffa39(0x9d),_0x2ffa39(0xae),_0x2ffa39(0x13d),_0x2ffa39(0x1a3),_0x2ffa39(0x87),_0x2ffa39(0xd0),_0x2ffa39(0x197),_0x2ffa39(0xc7),_0x2ffa39(0x1cb),_0x2ffa39(0x1a0),_0x2ffa39(0x95),_0x2ffa39(0x1c5),_0x2ffa39(0xfe),_0x2ffa39(0xd3),_0x2ffa39(0xd6),_0x2ffa39(0xa0),_0x2ffa39(0x9c),_0x2ffa39(0x14c),_0x2ffa39(0x11c),_0x2ffa39(0xf5),_0x2ffa39(0x1ac),_0x2ffa39(0xc8),_0x2ffa39(0xbb),_0x2ffa39(0x107),'onchange','\x20selected',_0x2ffa39(0x136),'#newProjW',_0x2ffa39(0x145),_0x2ffa39(0x1c2),'eraser','/index.html','15948648zMXkzo',_0x2ffa39(0xf2),'.tool-btn',_0x2ffa39(0x119),'3000',_0x2ffa39(0xcf),_0x2ffa39(0x140),_0x2ffa39(0x16c),'body',_0x2ffa39(0x15d),_0x2ffa39(0x192),'zoomSlider','splice',_0x2ffa39(0x120),_0x2ffa39(0x1a2),'files',_0x2ffa39(0x11e),_0x2ffa39(0xa2),_0x2ffa39(0x17b),_0x2ffa39(0x92),'replace',_0x2ffa39(0xb6),_0x2ffa39(0x13f),'jpg',_0x2ffa39(0x1b5),_0x2ffa39(0x1b9),_0x2ffa39(0xe5),_0x2ffa39(0x12b),_0x2ffa39(0x1ad),'justifyContent',_0x2ffa39(0xe6),'onkeydown',_0x2ffa39(0x1e2),_0x2ffa39(0x132),_0x2ffa39(0x1dd),_0x2ffa39(0x124),_0x2ffa39(0xfd),'rgba(',_0x2ffa39(0xa8),_0x2ffa39(0x10d),_0x2ffa39(0x1cc),_0x2ffa39(0x179),_0x2ffa39(0xd1),_0x2ffa39(0xeb),_0x2ffa39(0x17e),_0x2ffa39(0x1b3),_0x2ffa39(0x98),'style',_0x2ffa39(0x165),_0x2ffa39(0x178),_0x2ffa39(0xc1),_0x2ffa39(0x18d),_0x2ffa39(0x112),_0x2ffa39(0x196),_0x2ffa39(0xb7),_0x2ffa39(0x1d5),_0x2ffa39(0x137),_0x2ffa39(0x104),_0x2ffa39(0xd5),_0x2ffa39(0x18c),_0x2ffa39(0x1a4),_0x2ffa39(0xb5),'onupgradeneeded',_0x2ffa39(0xe4),_0x2ffa39(0x154),_0x2ffa39(0xdb),_0x2ffa39(0x9a),_0x2ffa39(0x14e),_0x2ffa39(0xf8),_0x2ffa39(0x18e),_0x2ffa39(0xc5),_0x2ffa39(0x1ec),'projectList',_0x2ffa39(0x116),_0x2ffa39(0x12d),'floor',_0x2ffa39(0xc2),'プロジェクトがありません',_0x2ffa39(0x130),_0x2ffa39(0x142),_0x2ffa39(0x91),_0x2ffa39(0x1f2),_0x2ffa39(0x17f),_0x2ffa39(0xca),_0x2ffa39(0xbf),_0x2ffa39(0x9f),_0x2ffa39(0xa5),'fixed','14lKJKdV',_0x2ffa39(0x15e),_0x2ffa39(0x1b6),_0x2ffa39(0x1dc),'filter','download','firstChild','layers',_0x2ffa39(0xfb),'10376090telBQC',_0x2ffa39(0x90),'finished',_0x2ffa39(0x1af),'onmouseleave',_0x2ffa39(0x1de),_0x2ffa39(0x152),_0x2ffa39(0x1b7),_0x2ffa39(0x1be),_0x2ffa39(0x125),_0x2ffa39(0x19a),_0x2ffa39(0x1ef),_0x2ffa39(0x1d2),_0x2ffa39(0x135),_0x2ffa39(0x185),_0x2ffa39(0x134),'then',_0x2ffa39(0x1f3),_0x2ffa39(0x1b0),'get',_0x2ffa39(0x19e),'DOMContentLoaded','href',_0x2ffa39(0x1ab),_0x2ffa39(0x173),'IndexedDBからプロジェクトを読み込んだチュー！',_0x2ffa39(0x1c1),_0x2ffa39(0x1d7),_0x2ffa39(0xc6),_0x2ffa39(0xb9),_0x2ffa39(0x1e0),_0x2ffa39(0x184)];return a0_0x9b6b=function(){return _0x596785;},a0_0x9b6b();}function a0_0xce2f(_0x404b65,_0x45df86){_0x404b65=_0x404b65-0xda;const _0xd8c8be=a0_0x243d();let _0xfe085b=_0xd8c8be[_0x404b65];return _0xfe085b;}const zv=document[a0_0x38aafa(0x275)](a0_0x5049d9(0x16a));if(zv)zv[a0_0x5049d9(0x154)]=Math[a0_0x521960(0x122)](scale*0x64)+'%';function getCanvasCoords(_0x80b27f){const _0x58fa16=a0_0x413a03,_0x53f5aa=a0_0x5049d9,_0x29777c=a0_0x38aafa,_0x7513c2=canvas[_0x58fa16(0x19b)](),_0x5bf11d=canvas[_0x53f5aa(0x190)]/_0x7513c2[_0x29777c(0x1b8)],_0x524351=canvas[_0x29777c(0x27c)]/_0x7513c2[_0x29777c(0x27c)],_0xce521a=(_0x80b27f[_0x29777c(0x193)]-_0x7513c2[_0x29777c(0x2a7)])*_0x5bf11d,_0x28e5b1=(_0x80b27f[_0x29777c(0x25d)]-_0x7513c2[_0x29777c(0x196)])*_0x524351;return{'x':_0xce521a,'y':_0x28e5b1};}function handleDrawStart(_0x618531){const _0x21e125=a0_0x38aafa,_0x4461f0=getCanvasCoords(_0x618531);ctx[_0x21e125(0x2eb)](),ctx[_0x21e125(0x29e)](_0x4461f0['x'],_0x4461f0['y']);}function handleDrawMove(_0xb846fe){const _0x3a9d4c=a0_0x5049d9,_0x22daa0=a0_0x38aafa,_0x553177=getCanvasCoords(_0xb846fe);ctx[_0x3a9d4c(0xf3)](_0x553177['x'],_0x553177['y']),ctx[_0x22daa0(0x2d9)]();}function handleDrawEnd(_0xe55bb5){const _0x2bac77=a0_0x38aafa;ctx[_0x2bac77(0x2db)]();}function a0_0x3c67(){const _0x1dfa80=['10XJZHgl','parentNode','ファイルにプロジェクトメタデータが見つかりませんでした。読み込みできません。','activeLayer','undefined','#ff00ff','nezumi-projects','frame-thumb','(prefers-color-scheme:\x20dark)','isFinite','data-theme','dark','sidebar-open','106659LdiXrH','14236XjzBgT','remove','12EnOyEt','4802050CMYWrO','#palette-penMode','palette-add-btn','querySelectorAll','add','コマ)','_spritesheet.png','webp','メタデータが見つかりませんでした','boolean','stringify','/about?terms=true','#000000','matches','1391112hIqzLW','alignItems','tool','onsuccess','frame-item','createElement','keyup','colorPicker','new-project-dialog','nezumi-sketch.msketch','block','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>消しゴム</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','Shift','#800000','alphaSlider','stopPropagation','693928GhthjY','innerHTML','removeChild','clearRect','blur','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>塗りつぶし</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20太さ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','flex','ontouchcancel','slice','isArray','フレームがありません','close','touchAction','このレイヤーを削除','penSize','toDataURL','keyval','button','14uGmiOY','selected','translate(','.gif','open','zoomSlider','animSpeedValue','207RSftqX','forEach','decode','keydown','cursor','activeProject','video/webm','crossOrigin','7364640yMKFng','ontouchmove','palette-del-btn','transparent','appendChild','px,\x20','#00ff00','IndexedDBからの読み込みに失敗したチュー…','lineTo','保存エラー','palette-penSize','toggle','.section-content','palette-toolbar','abs','pointermove','#444444','circle','3747624BaPwRo','3937560ufqvBg','60575XyUkXJ','#00ffff','nezumi-sketch-save','readAsText','matchMedia','9UjjHrQ','focus','touches','onclick','setPointerCapture','layer-item','frame-btn','touchend','subarray','palette-alphaSlider','getContext','addFrame','buffer','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','vp8','.section.collapsible\x20.section-content','nezumi_about_visited','toString','div','releasePointerCapture','#00000000','removeEventListener','light','252qMzMxb','#ff0000','oninput','#ffa500','image/jpeg','none','>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22','has','.section.collapsible\x20.toggle-btn','973508Cqoyrz','3313824QVIVOZ','pointerType','1663240xvhpIM','#newProjCancelBtn','39662ysLMsz','getBoundingClientRect','map','ライトテーマに切替','clientX','#c0c0c0','2937692dmuIuo','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22undo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>undo</span>\x20戻す\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22redo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>redo</span>\x20戻すを戻す\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','lib/gif.worker.js','読込エラー','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','error','10188tVdTJu','main-container','activeFrame','#0000ff','name','color-palette','beforeunload','ontouchend','contains','select','insertBefore','#808000','8fhqvtN','nezumi-drawing','putImageData','63psIyud','background','下に移動','ファイルの読み込みに失敗しました。','overflow','140942YGNfmW','querySelector','保存に失敗したチュー:','animSpeedRange','fillRect','deltaY','877944UnHeyA','objectStore','project-item','#800080','all','warn','match','hypot','center','split','search','pointerId','pop','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','menu-toggle-btn','プロジェクトをIndexedDBに保存したチュー！','top','palette-penMode','onmousedown','setAttribute','getElementById','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>新しい画像のサイズ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>名前:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22画像','#888888','project','beginPath','99eaBytn','18959ijBvyJ','#newProjH','grabbing','100vh','touchcancel','100vw','application/json','width','setItem','2471826kAkssG','<span\x20style=\x22font-size:13px;color:#888;\x22>透明</span>','arc','#newProjOkBtn','project-btn','image/apng','clientY','frames','nezumi-animation','disabled','getItem','title','configure','shift','resize','frameList','aria-pressed','nezumi-animation.gif','80px','onmousemove','anonymous','transform','alphaValue','readwrite','classList','上に移動','createObjectURL','auto','value','parse','style','21479103enQVXi','px)\x20scale(','pointerup','addEventListener','restore','length','destination-out','#008000','fill','layer-btn','247055AHBsKT','catch','palette-alphaValue','clear','UPNG','target','revokeObjectURL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','getImageData','frameCount','nezumi-spritesheet','クリックで名前を編集','menu-toggle-btn-close','21294LqkmrD','createObjectStore','project-name','rgba(0,0,0,0.3)','grab','zIndex','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>幅:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>高さ:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>作成</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>キャンセル</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','log','startsWith','number','globalCompositeOperation','pan','canvas','save','.toggle-btn','1710315EwWIGP','100%','layerCount','min','740250Xwpmxw','readonly','image/','hidden','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>ペン</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','#ffff00','projectCount','apply','#008080','(((.+)+)+)+$','src','.palette-color','WebCodecs','input','#palette-alphaSlider','pointerdown','text','フレーム間の余白(px)\x20を指定（例:\x200）','#000080','6565944uViiCR','image','スタンドアロン形式のプロジェクトを読み込みました:\x20','wheel','zoomValue','constructor','type','\x20active','3bZOlqa','レイヤー','data','square','active','114TnziLr','.apng','oncomplete','onerror','.webm','#ccc','replaceWith','height','left','project-name-edit','layerHistories','6806842iHrSfp','span','>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22','strokeStyle','>四角ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22','drawImage','layer-thumb','3BIZZMa','projects','VideoEncoder','sidebar','#ffffff','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','pen','1023636OyXKxu','position','nezumi-standalone','>丸ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20透明度:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','push','textContent','crosshair','color','nezumi-sketch-db','delete','unshift','innerWidth','398826GXnyRZ','5zFczyy','#palette-alphaValue','6685nRmUxK','touch','layerRedoStacks','194866cGotcP','stroke','key','パレットに色を追加','dataset'];a0_0x3c67=function(){return _0x1dfa80;};return a0_0x3c67();}