const a0_0x521960=a0_0x56c5;(function(_0x17e26a,_0x21ba16){const _0x165ba4=a0_0x56c5,_0x1cec8c=_0x17e26a();while(!![]){try{const _0x20bfe2=-parseInt(_0x165ba4(0x192))/0x1*(parseInt(_0x165ba4(0x14b))/0x2)+-parseInt(_0x165ba4(0x19e))/0x3*(parseInt(_0x165ba4(0x12e))/0x4)+parseInt(_0x165ba4(0xe2))/0x5*(parseInt(_0x165ba4(0x1cf))/0x6)+-parseInt(_0x165ba4(0xe7))/0x7*(-parseInt(_0x165ba4(0xf4))/0x8)+parseInt(_0x165ba4(0x133))/0x9+parseInt(_0x165ba4(0x11b))/0xa+parseInt(_0x165ba4(0x172))/0xb*(-parseInt(_0x165ba4(0x1ce))/0xc);if(_0x20bfe2===_0x21ba16)break;else _0x1cec8c['push'](_0x1cec8c['shift']());}catch(_0x481d96){_0x1cec8c['push'](_0x1cec8c['shift']());}}}(a0_0x22a5,0xba2f1));const a0_0x5049d9=a0_0xce2f;(function(_0x4ac547,_0x57a3c1){const _0x41d796=a0_0x56c5,_0x37a013=a0_0xce2f,_0x263c88=_0x4ac547();while(!![]){try{const _0x35f0f3=parseInt(_0x37a013(0x17d))/0x1*(-parseInt(_0x37a013(0x227))/0x2)+parseInt(_0x37a013(0xff))/0x3*(-parseInt(_0x37a013(0xef))/0x4)+parseInt(_0x37a013(0x21d))/0x5+parseInt(_0x37a013(0x128))/0x6*(parseInt(_0x37a013(0xeb))/0x7)+-parseInt(_0x37a013(0x12f))/0x8+-parseInt(_0x37a013(0x209))/0x9*(-parseInt(_0x37a013(0x1b9))/0xa)+-parseInt(_0x37a013(0x204))/0xb;if(_0x35f0f3===_0x57a3c1)break;else _0x263c88[_0x41d796(0x1d9)](_0x263c88[_0x41d796(0x128)]());}catch(_0x5b41eb){_0x263c88[_0x41d796(0x1d9)](_0x263c88[_0x41d796(0x128)]());}}}(a0_0x243d,0x97cd8));const a0_0x38aafa=a0_0x1925;(function(_0x3f8cf9,_0x2c50bc){const _0x5952b0=a0_0x56c5,_0x35ff13=a0_0xce2f,_0x1de0d8=a0_0x1925,_0x15c7b7=_0x3f8cf9();while(!![]){try{const _0x1cbc06=parseInt(_0x1de0d8(0x26d))/0x1*(parseInt(_0x1de0d8(0x20a))/0x2)+-parseInt(_0x1de0d8(0x24d))/0x3+-parseInt(_0x1de0d8(0x284))/0x4+parseInt(_0x1de0d8(0x1cb))/0x5+-parseInt(_0x1de0d8(0x1e9))/0x6+-parseInt(_0x1de0d8(0x2b9))/0x7*(parseInt(_0x1de0d8(0x26e))/0x8)+parseInt(_0x1de0d8(0x28d))/0x9*(parseInt(_0x1de0d8(0x271))/0xa);if(_0x1cbc06===_0x2c50bc)break;else _0x15c7b7[_0x35ff13(0x19e)](_0x15c7b7[_0x5952b0(0x128)]());}catch(_0x25478e){_0x15c7b7[_0x35ff13(0x19e)](_0x15c7b7[_0x35ff13(0x1f9)]());}}}(a0_0x5ad1,0x65d10));const a0_0x53f6c7=(function(){const _0x3b3077=(function(){let _0x319b19=!![];return function(_0x396cb1,_0x1eb4b4){const _0xf6fb7a=_0x319b19?function(){if(_0x1eb4b4){const _0x52bc02=_0x1eb4b4['apply'](_0x396cb1,arguments);return _0x1eb4b4=null,_0x52bc02;}}:function(){};return _0x319b19=![],_0xf6fb7a;};}()),_0x464d2d=(function(){const _0x4ffdf1=_0x3b3077(this,function(){const _0x1aec01=a0_0x56c5;return _0x4ffdf1['toString']()['search'](_0x1aec01(0x142))[_0x1aec01(0xe6)]()[_0x1aec01(0x11d)](_0x4ffdf1)[_0x1aec01(0x1ef)](_0x1aec01(0x142));});_0x4ffdf1();let _0x41d0d8=!![];return function(_0x5c448b,_0x526d87){const _0x37c752=_0x41d0d8?function(){const _0x14b584=a0_0xce2f;if(_0x526d87){const _0x97c431=_0x526d87[_0x14b584(0x106)](_0x5c448b,arguments);return _0x526d87=null,_0x97c431;}}:function(){};return _0x41d0d8=![],_0x37c752;};}()),_0x4aef04=_0x464d2d(this,function(){const _0x4ae68e=a0_0x56c5,_0x42dbc1=a0_0xce2f;return _0x4aef04[_0x4ae68e(0xe6)]()[_0x4ae68e(0x1ef)](_0x42dbc1(0xe4))[_0x42dbc1(0x163)]()[_0x42dbc1(0x1b4)](_0x4aef04)[_0x42dbc1(0x153)](_0x42dbc1(0xe4));});_0x4aef04();let _0x20e3f1=!![];return function(_0x4bfb4d,_0x1818c8){const _0x33df70=_0x20e3f1?function(){const _0x2aef15=a0_0x1925;if(_0x1818c8){const _0xdecdf3=_0x1818c8[_0x2aef15(0x2b0)](_0x4bfb4d,arguments);return _0x1818c8=null,_0xdecdf3;}}:function(){};return _0x20e3f1=![],_0x33df70;};}()),a0_0x5506da=a0_0x53f6c7(this,function(){const _0x525072=a0_0xce2f,_0x3dca12=a0_0x1925;return a0_0x5506da[_0x3dca12(0x279)]()[_0x3dca12(0x1ac)](_0x3dca12(0x197))[_0x525072(0x163)]()[_0x3dca12(0x28c)](a0_0x5506da)[_0x3dca12(0x1ac)]('(((.+)+)+)+$');});a0_0x5506da();let canvas=document[a0_0x38aafa(0x275)](a0_0x5049d9(0x20f)),ctx=canvas[a0_0x38aafa(0x2c6)]('2d');const wrapper=document[a0_0x38aafa(0x275)](a0_0x38aafa(0x1cf));let cellSize=0x14,currentColor=a0_0x38aafa(0x265),currentTool=a0_0x38aafa(0x182),penSize=0x1,penMode=a0_0x38aafa(0x2e2),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x4ea9e6=0x10,_0x42a719=0x10,_0x1695f9=''){const _0x38a36c=a0_0x5049d9,_0x1aaa41=a0_0x38aafa;let _0x3c5cfa=0x14,_0x566926=[],_0x56e5ee=[],_0x1dedef=[],_0x17962f=document[_0x1aaa41(0x1d6)](_0x1aaa41(0x19d));_0x17962f[_0x1aaa41(0x1b8)]=_0x4ea9e6*_0x3c5cfa,_0x17962f[_0x1aaa41(0x27c)]=_0x42a719*_0x3c5cfa,_0x566926[_0x1aaa41(0x278)](_0x17962f),_0x56e5ee[_0x1aaa41(0x278)]([]),_0x1dedef[_0x1aaa41(0x278)]([]);let _0x12efaa={'layers':_0x566926,'activeLayer':0x0,'layerHistories':_0x56e5ee,'layerRedoStacks':_0x1dedef};return{'frames':[_0x12efaa],'activeFrame':0x0,'width':_0x4ea9e6,'height':_0x42a719,'name':_0x1695f9||'画像'+(projects[_0x38a36c(0xf5)]+0x1)};}function updateProjectUI(){const _0x45a399=a0_0x56c5,_0x4145cc=a0_0x5049d9,_0x75128e=a0_0x38aafa,_0x27fe14=document[_0x75128e(0x275)](_0x75128e(0x228));_0x27fe14[_0x75128e(0x25f)]='';for(let _0x34a340=0x0;_0x34a340<projects[_0x75128e(0x1c4)];_0x34a340++){const _0x3d4544=document[_0x4145cc(0x1f6)]('div');_0x3d4544[_0x75128e(0x252)]=_0x75128e(0x2bc)+(_0x34a340===activeProject?_0x75128e(0x1e4):''),_0x3d4544[_0x75128e(0x234)]=()=>{activeProject=_0x34a340,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x239dae=document[_0x4145cc(0x1f6)](_0x75128e(0x28e));_0x239dae[_0x75128e(0x252)]=_0x75128e(0x1d4),_0x239dae[_0x75128e(0x221)]=projects[_0x34a340][_0x75128e(0x2e6)]||'画像'+(_0x34a340+0x1),_0x239dae[_0x75128e(0x198)]=_0x4145cc(0x210),_0x239dae[_0x45a399(0xbf)]=_0x2bb093=>{const _0x298002=_0x75128e;_0x2bb093[_0x298002(0x214)](),editProjectName(_0x34a340,_0x239dae);},_0x3d4544[_0x75128e(0x237)](_0x239dae);const _0x3db16d=document[_0x75128e(0x1d6)](_0x75128e(0x2a4));_0x3db16d[_0x75128e(0x221)]='削除',_0x3db16d[_0x75128e(0x252)]=_0x75128e(0x27a),_0x3db16d[_0x4145cc(0x1d1)]=projects[_0x75128e(0x1c4)]===0x1,_0x3db16d[_0x75128e(0x234)]=_0x5d2400=>{const _0x50d539=_0x75128e;_0x5d2400[_0x50d539(0x214)](),removeProjectAt(_0x34a340);},_0x3d4544[_0x4145cc(0x1c2)](_0x3db16d),_0x27fe14[_0x75128e(0x237)](_0x3d4544);}document[_0x75128e(0x275)](_0x75128e(0x1ed))['textContent']='('+projects[_0x75128e(0x1c4)]+'枚)';}function editProjectName(_0x2de42f,_0x44f55e){const _0x2b84a1=a0_0x5049d9,_0x24cffc=a0_0x38aafa,_0x3f5243=document[_0x24cffc(0x1d6)](_0x24cffc(0x295));_0x3f5243[_0x24cffc(0x17d)]=_0x24cffc(0x23e),_0x3f5243[_0x2b84a1(0x12e)]=projects[_0x2de42f][_0x24cffc(0x2e6)]||'画像'+(_0x2de42f+0x1),_0x3f5243[_0x2b84a1(0x15c)]=_0x24cffc(0x186),_0x3f5243[_0x2b84a1(0x1bb)][_0x24cffc(0x1b8)]=_0x24cffc(0x29d),_0x3f5243[_0x24cffc(0x1f4)]=()=>{const _0x731f89=_0x24cffc;projects[_0x2de42f][_0x731f89(0x2e6)]=_0x3f5243[_0x731f89(0x24e)][_0x731f89(0x19b)]()||'画像'+(_0x2de42f+0x1),updateProjectUI();},_0x3f5243[_0x24cffc(0x2ca)]=_0x5104d9=>{const _0x27207b=_0x2b84a1,_0x843254=_0x24cffc;if(_0x5104d9[_0x27207b(0x181)]===_0x843254(0x276))_0x3f5243[_0x843254(0x1ef)]();},_0x44f55e[_0x24cffc(0x2e8)](_0x3f5243),_0x3f5243[_0x24cffc(0x2be)](),_0x3f5243[_0x24cffc(0x1aa)]();}function showNewProjectDialog(_0x2456e3){const _0x5e3737=a0_0x56c5,_0x33443a=a0_0x5049d9,_0x353610=a0_0x38aafa;let _0x2405b6=document[_0x353610(0x275)](_0x33443a(0x14f));if(_0x2405b6)_0x2405b6[_0x353610(0x187)]();const _0x32b9f1=document[_0x353610(0x1d6)](_0x353610(0x2c9));_0x32b9f1['id']=_0x353610(0x1db),_0x32b9f1[_0x353610(0x1f8)][_0x353610(0x1f7)]=_0x353610(0x1e3),_0x32b9f1[_0x353610(0x1f8)][_0x353610(0x2a7)]='0',_0x32b9f1[_0x353610(0x1f8)][_0x33443a(0xf8)]='0',_0x32b9f1[_0x5e3737(0x178)][_0x353610(0x1b8)]=_0x33443a(0x183),_0x32b9f1[_0x5e3737(0x178)][_0x353610(0x27c)]=_0x353610(0x1f1),_0x32b9f1[_0x353610(0x1f8)][_0x33443a(0x142)]=_0x353610(0x180),_0x32b9f1[_0x353610(0x1f8)][_0x353610(0x2f0)]=_0x353610(0x20c),_0x32b9f1[_0x353610(0x1f8)][_0x353610(0x19e)]=_0x353610(0x243),_0x32b9f1[_0x353610(0x1f8)][_0x353610(0x1fd)]=_0x353610(0x243),_0x32b9f1[_0x33443a(0x1bb)][_0x353610(0x24b)]=_0x353610(0x1c9),_0x32b9f1[_0x353610(0x25f)]=_0x33443a(0x156)+(projects[_0x33443a(0xf5)]+0x1)+_0x33443a(0x21e),document[_0x33443a(0x1c5)][_0x353610(0x237)](_0x32b9f1),_0x32b9f1[_0x353610(0x2c0)](_0x353610(0x2e4))[_0x353610(0x234)]=()=>{const _0x2be8df=_0x5e3737,_0xb3098a=_0x33443a,_0x861bf0=_0x353610,_0x4e3c5b=parseInt(_0x32b9f1[_0x861bf0(0x2c0)](_0xb3098a(0x129))[_0x861bf0(0x24e)],0xa),_0x2c5dc8=parseInt(_0x32b9f1[_0x861bf0(0x2c0)](_0x861bf0(0x1b0))[_0xb3098a(0x12e)],0xa),_0x3e533f=_0x32b9f1[_0x861bf0(0x2c0)](_0x2be8df(0x1d4))[_0x861bf0(0x24e)][_0x861bf0(0x19b)]();_0x32b9f1[_0x861bf0(0x187)]();if(_0x2456e3)_0x2456e3(_0x4e3c5b,_0x2c5dc8,_0x3e533f);},_0x32b9f1[_0x353610(0x2c0)](_0x353610(0x1f9))[_0x353610(0x234)]=()=>{const _0x498ab2=_0x33443a;_0x32b9f1[_0x498ab2(0x1e9)]();};}function addProject(){showNewProjectDialog((_0xaf3cbe,_0x49fd88,_0xc4f76a)=>{const _0x18d3e4=a0_0xce2f,_0x50a3ce=a0_0x1925;if(!Number[_0x50a3ce(0x28b)](_0xaf3cbe)||_0xaf3cbe<0x1)_0xaf3cbe=0x10;if(!Number[_0x50a3ce(0x28b)](_0x49fd88)||_0x49fd88<0x1)_0x49fd88=0x10;projects[_0x50a3ce(0x278)](createProject(_0xaf3cbe,_0x49fd88,_0xc4f76a)),activeProject=projects[_0x18d3e4(0xf5)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x380176){const _0x477ef8=a0_0x38aafa;if(projects[_0x477ef8(0x1c4)]<=0x1)return;projects[_0x477ef8(0x2b7)](_0x380176,0x1);if(activeProject>=projects[_0x477ef8(0x1c4)])activeProject=projects[_0x477ef8(0x1c4)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x47c658=a0_0x56c5,_0x26526c=a0_0x5049d9,_0x461e24=a0_0x38aafa,_0x4a8243=document[_0x47c658(0x182)](_0x461e24(0x1c6)),_0x2bf399=getCurrentProject();_0x4a8243[_0x47c658(0x175)]='';for(let _0x4b9649=0x0;_0x4b9649<_0x2bf399[_0x26526c(0x17f)][_0x47c658(0xd7)];_0x4b9649++){const _0x85a3be=document[_0x461e24(0x1d6)](_0x461e24(0x2c9));_0x85a3be[_0x461e24(0x252)]=_0x461e24(0x254)+(_0x4b9649===_0x2bf399[_0x461e24(0x2a5)]?_0x461e24(0x1e4):''),_0x85a3be[_0x461e24(0x234)]=()=>{const _0x1b4e16=_0x461e24;_0x2bf399[_0x1b4e16(0x2a5)]=_0x4b9649,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x5a6627=document[_0x26526c(0x1f6)](_0x461e24(0x19d));_0x5a6627[_0x461e24(0x252)]=_0x461e24(0x1da),_0x5a6627[_0x461e24(0x1b8)]=0x20,_0x5a6627[_0x461e24(0x27c)]=0x20;let _0xbc3875=_0x5a6627[_0x461e24(0x2c6)]('2d');_0xbc3875[_0x461e24(0x22d)](0x0,0x0,0x20,0x20);for(let _0x23f34a=0x0;_0x23f34a<_0x2bf399[_0x26526c(0x17f)][_0x4b9649][_0x461e24(0x262)][_0x47c658(0xd7)];_0x23f34a++){_0xbc3875[_0x461e24(0x1ff)](_0x2bf399[_0x461e24(0x2b3)][_0x4b9649][_0x461e24(0x262)][_0x23f34a],0x0,0x0,_0x5a6627[_0x461e24(0x1b8)],_0x5a6627[_0x461e24(0x27c)]);}_0x85a3be[_0x26526c(0x1c2)](_0x5a6627);const _0x148be8=document[_0x26526c(0x1f6)](_0x461e24(0x28e));_0x148be8[_0x461e24(0x221)]='F'+(_0x4b9649+0x1),_0x85a3be[_0x461e24(0x237)](_0x148be8);const _0x431a97=document[_0x461e24(0x1d6)](_0x47c658(0x1e1));_0x431a97[_0x461e24(0x221)]='削除',_0x431a97[_0x461e24(0x252)]=_0x461e24(0x286),_0x431a97[_0x461e24(0x256)]=_0x2bf399[_0x461e24(0x2b3)][_0x461e24(0x1c4)]===0x1,_0x431a97[_0x461e24(0x234)]=_0x145a75=>{const _0x5609fe=_0x461e24;_0x145a75[_0x5609fe(0x214)](),removeFrameAt(_0x4b9649);},_0x85a3be[_0x461e24(0x237)](_0x431a97),_0x4a8243[_0x461e24(0x237)](_0x85a3be);}document[_0x461e24(0x275)](_0x461e24(0x240))[_0x26526c(0x154)]='('+_0x2bf399[_0x461e24(0x2b3)][_0x461e24(0x1c4)]+_0x461e24(0x2c4);}function addFrame(){const _0x15ff3f=a0_0x56c5,_0x40cdc4=a0_0x38aafa;let _0x73e1b7=getCurrentProject(),_0x4a8f27=_0x73e1b7[_0x40cdc4(0x2b3)][_0x73e1b7[_0x40cdc4(0x2a5)]],_0x461f11=_0x4a8f27[_0x40cdc4(0x262)][_0x40cdc4(0x294)](_0xd2d7ca=>{const _0x4eab75=a0_0xce2f,_0x2472c3=_0x40cdc4;let _0x5f0ac0=document[_0x2472c3(0x1d6)](_0x4eab75(0x20f));return _0x5f0ac0[_0x2472c3(0x1b8)]=_0xd2d7ca[_0x2472c3(0x1b8)],_0x5f0ac0[_0x2472c3(0x27c)]=_0xd2d7ca[_0x2472c3(0x27c)],_0x5f0ac0[_0x2472c3(0x2c6)]('2d')[_0x2472c3(0x1ff)](_0xd2d7ca,0x0,0x0),_0x5f0ac0;}),_0x41ca22=_0x461f11[_0x40cdc4(0x294)](()=>[]),_0x3b890e=_0x461f11[_0x40cdc4(0x294)](()=>[]),_0x3b6a98={'layers':_0x461f11,'activeLayer':0x0,'layerHistories':_0x41ca22,'layerRedoStacks':_0x3b890e};_0x73e1b7[_0x40cdc4(0x2b3)][_0x40cdc4(0x2b7)](_0x73e1b7[_0x40cdc4(0x2a5)]+0x1,0x0,_0x3b6a98),_0x73e1b7[_0x15ff3f(0x1ca)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x524899){const _0x38bc35=a0_0x56c5,_0x2778e9=a0_0x5049d9,_0x2b4f5d=a0_0x38aafa;let _0x195d91=getCurrentProject();if(_0x195d91[_0x38bc35(0x145)][_0x2b4f5d(0x1c4)]<=0x1)return;_0x195d91[_0x2778e9(0x17f)][_0x2778e9(0xed)](_0x524899,0x1);if(_0x195d91[_0x2b4f5d(0x2a5)]>=_0x195d91[_0x38bc35(0x145)][_0x2b4f5d(0x1c4)])_0x195d91[_0x2778e9(0x12c)]=_0x195d91[_0x2b4f5d(0x2b3)][_0x2b4f5d(0x1c4)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x36e66a=a0_0x38aafa;return getCurrentProject()[_0x36e66a(0x2b3)][getCurrentProject()[_0x36e66a(0x2a5)]];}function updateLayerUI(){const _0x35374d=a0_0x56c5,_0x118738=a0_0x5049d9,_0x228a7e=a0_0x38aafa;let {layers:_0x42dc8d,activeLayer:_0x4453b0}=getCurrentFrame();document[_0x228a7e(0x275)](_0x118738(0x118))[_0x228a7e(0x221)]='('+_0x42dc8d[_0x118738(0xf5)]+'枚)';const _0x2ac33a=document[_0x228a7e(0x275)](_0x228a7e(0x23b));_0x2ac33a[_0x118738(0x1ea)]='';for(let _0x3a95d6=_0x42dc8d[_0x228a7e(0x1c4)]-0x1;_0x3a95d6>=0x0;_0x3a95d6--){const _0x416cb7=document[_0x228a7e(0x1d6)](_0x118738(0x1f1));_0x416cb7[_0x118738(0x15c)]=_0x228a7e(0x2d7)+(_0x3a95d6===_0x4453b0?_0x228a7e(0x1e4):''),_0x416cb7[_0x118738(0x19d)]=_0x41dbc3=>{const _0x500180=a0_0x56c5,_0x19baa3=_0x228a7e;if(_0x41dbc3[_0x19baa3(0x2e5)][_0x19baa3(0x22b)][_0x500180(0xbc)](_0x19baa3(0x20e)))return;getCurrentFrame()[_0x19baa3(0x1b5)]=_0x3a95d6,updateLayerUI(),redrawAll();};const _0xab3c54=document[_0x35374d(0xdd)](_0x228a7e(0x19d));_0xab3c54[_0x228a7e(0x252)]=_0x228a7e(0x1f2),_0xab3c54[_0x228a7e(0x1b8)]=0x20,_0xab3c54[_0x228a7e(0x27c)]=0x20;let _0x3323ed=_0xab3c54[_0x228a7e(0x2c6)]('2d');_0x3323ed[_0x118738(0x172)](0x0,0x0,0x20,0x20),_0x3323ed[_0x228a7e(0x1ff)](_0x42dc8d[_0x3a95d6],0x0,0x0,_0xab3c54[_0x228a7e(0x1b8)],_0xab3c54[_0x228a7e(0x27c)]),_0x416cb7[_0x228a7e(0x237)](_0xab3c54);const _0x5571bd=document[_0x118738(0x1f6)](_0x228a7e(0x28e));_0x5571bd[_0x228a7e(0x221)]=_0x228a7e(0x2d6)+(_0x3a95d6+0x1),_0x416cb7[_0x228a7e(0x237)](_0x5571bd);const _0x1ab330=document[_0x228a7e(0x1d6)](_0x228a7e(0x2a4));_0x1ab330[_0x228a7e(0x221)]='↑',_0x1ab330[_0x228a7e(0x252)]=_0x228a7e(0x20e),_0x1ab330[_0x118738(0x124)]=_0x118738(0x101),_0x1ab330[_0x228a7e(0x256)]=_0x3a95d6===_0x42dc8d[_0x228a7e(0x1c4)]-0x1,_0x1ab330[_0x228a7e(0x234)]=_0x1f9cbe=>{const _0xd2b5ee=_0x228a7e;_0x1f9cbe['stopPropagation'](),_0x3a95d6<_0x42dc8d[_0xd2b5ee(0x1c4)]-0x1&&swapLayer(_0x3a95d6,_0x3a95d6+0x1);},_0x416cb7[_0x228a7e(0x237)](_0x1ab330);const _0x2d0c75=document[_0x118738(0x1f6)](_0x118738(0x1bf));_0x2d0c75[_0x118738(0x154)]='↓',_0x2d0c75[_0x118738(0x15c)]=_0x228a7e(0x20e),_0x2d0c75[_0x35374d(0xed)]=_0x118738(0x186),_0x2d0c75[_0x228a7e(0x256)]=_0x3a95d6===0x0,_0x2d0c75[_0x118738(0x19d)]=_0x308eb6=>{const _0x39ac8f=_0x228a7e;_0x308eb6[_0x39ac8f(0x214)](),_0x3a95d6>0x0&&swapLayer(_0x3a95d6,_0x3a95d6-0x1);},_0x416cb7[_0x228a7e(0x237)](_0x2d0c75);const _0x270853=document[_0x228a7e(0x1d6)](_0x228a7e(0x2a4));_0x270853[_0x228a7e(0x221)]='削除',_0x270853[_0x228a7e(0x252)]=_0x228a7e(0x20e),_0x270853[_0x228a7e(0x198)]=_0x118738(0xdf),_0x270853[_0x228a7e(0x256)]=_0x42dc8d[_0x228a7e(0x1c4)]===0x1,_0x270853[_0x228a7e(0x234)]=_0x349b19=>{const _0x5a6cca=_0x228a7e;_0x349b19[_0x5a6cca(0x214)](),removeLayerAt(_0x3a95d6);},_0x416cb7[_0x228a7e(0x237)](_0x270853),_0x2ac33a[_0x228a7e(0x237)](_0x416cb7);}}function swapLayer(_0x412fc2,_0x375cf6){const _0x4f1cd=a0_0x5049d9,_0x4d95da=a0_0x38aafa;let _0x112cce=getCurrentFrame();[_0x112cce[_0x4d95da(0x262)][_0x412fc2],_0x112cce[_0x4d95da(0x262)][_0x375cf6]]=[_0x112cce[_0x4d95da(0x262)][_0x375cf6],_0x112cce[_0x4d95da(0x262)][_0x412fc2]],[_0x112cce[_0x4d95da(0x29c)][_0x412fc2],_0x112cce[_0x4f1cd(0x195)][_0x375cf6]]=[_0x112cce[_0x4d95da(0x29c)][_0x375cf6],_0x112cce[_0x4f1cd(0x195)][_0x412fc2]],[_0x112cce[_0x4d95da(0x2d0)][_0x412fc2],_0x112cce[_0x4d95da(0x2d0)][_0x375cf6]]=[_0x112cce[_0x4d95da(0x2d0)][_0x375cf6],_0x112cce[_0x4d95da(0x2d0)][_0x412fc2]];if(_0x112cce[_0x4d95da(0x1b5)]===_0x412fc2)_0x112cce[_0x4d95da(0x1b5)]=_0x375cf6;else{if(_0x112cce[_0x4f1cd(0x215)]===_0x375cf6)_0x112cce[_0x4d95da(0x1b5)]=_0x412fc2;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x4ac36c){const _0x1a2526=a0_0x5049d9,_0x490679=a0_0x38aafa;let _0x35a5d4=getCurrentFrame();if(_0x35a5d4[_0x490679(0x262)][_0x490679(0x1c4)]<=0x1)return;_0x35a5d4[_0x490679(0x262)][_0x490679(0x2b7)](_0x4ac36c,0x1),_0x35a5d4[_0x490679(0x29c)][_0x490679(0x2b7)](_0x4ac36c,0x1),_0x35a5d4[_0x1a2526(0x179)][_0x1a2526(0xed)](_0x4ac36c,0x1);if(_0x35a5d4[_0x490679(0x1b5)]>=_0x35a5d4[_0x490679(0x262)][_0x490679(0x1c4)])_0x35a5d4[_0x1a2526(0x215)]=_0x35a5d4[_0x490679(0x262)][_0x490679(0x1c4)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x384c58=a0_0x5049d9,_0x3783d7=a0_0x38aafa;let _0xe8b5b4=getCurrentProject(),_0x2df363=getCurrentFrame(),_0x5c20b5=document[_0x3783d7(0x1d6)](_0x3783d7(0x19d));_0x5c20b5[_0x384c58(0x190)]=_0xe8b5b4[_0x384c58(0x190)]*cellSize,_0x5c20b5[_0x3783d7(0x27c)]=_0xe8b5b4[_0x384c58(0x13b)]*cellSize,_0x2df363[_0x3783d7(0x262)][_0x3783d7(0x278)](_0x5c20b5),_0x2df363[_0x3783d7(0x29c)][_0x3783d7(0x278)]([]),_0x2df363[_0x3783d7(0x2d0)][_0x384c58(0x19e)]([]),_0x2df363[_0x384c58(0x215)]=_0x2df363[_0x3783d7(0x262)][_0x384c58(0xf5)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x3a8a3f=a0_0x56c5,_0x53a5e8=a0_0x5049d9,_0x336db5=a0_0x38aafa;let _0x1eaa5d=getCurrentFrame();if(_0x1eaa5d[_0x336db5(0x262)][_0x336db5(0x1c4)]<=0x1)return;_0x1eaa5d[_0x53a5e8(0x13d)][_0x53a5e8(0xed)](_0x1eaa5d[_0x336db5(0x1b5)],0x1),_0x1eaa5d[_0x336db5(0x29c)][_0x336db5(0x2b7)](_0x1eaa5d[_0x336db5(0x1b5)],0x1),_0x1eaa5d[_0x336db5(0x2d0)][_0x3a8a3f(0x1e6)](_0x1eaa5d[_0x336db5(0x1b5)],0x1),_0x1eaa5d[_0x336db5(0x1b5)]=Math[_0x53a5e8(0x107)](0x0,_0x1eaa5d[_0x336db5(0x1b5)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x12ac95){const _0x2646e6=a0_0x38aafa;getCurrentFrame()[_0x2646e6(0x1b5)]=parseInt(_0x12ac95),updateLayerUI();}let PALETTE_COLORS=[a0_0x38aafa(0x1f3),a0_0x38aafa(0x1ba),a0_0x38aafa(0x244),a0_0x38aafa(0x19a),a0_0x38aafa(0x281),a0_0x5049d9(0x1da),a0_0x38aafa(0x265),a0_0x38aafa(0x2c2),a0_0x38aafa(0x266),a0_0x5049d9(0x194),a0_0x38aafa(0x29a),a0_0x38aafa(0x296),a0_0x38aafa(0x291),a0_0x38aafa(0x1b9),a0_0x38aafa(0x1ee),a0_0x38aafa(0x202),a0_0x38aafa(0x26c),a0_0x38aafa(0x269),a0_0x38aafa(0x219),a0_0x5049d9(0x147),a0_0x38aafa(0x25b)],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){const _0x28e213=a0_0x5049d9,_0x3149f8=a0_0x38aafa;let _0x7691e9=getCurrentProject();if(!_0x7691e9||!_0x7691e9[_0x28e213(0x17f)]||_0x7691e9[_0x3149f8(0x2b3)][_0x3149f8(0x1c4)]<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0x28bdb1=_0x7691e9[_0x3149f8(0x2b3)];animationTimer=setInterval(()=>{const _0x3be8c2=_0x28e213,_0x1cb7ce=_0x3149f8;ctx[_0x3be8c2(0x172)](0x0,0x0,canvas[_0x1cb7ce(0x1b8)],canvas[_0x1cb7ce(0x27c)]);let _0x5b5902=_0x28bdb1[animationIndex];for(let _0x49f5c0=0x0;_0x49f5c0<_0x5b5902[_0x1cb7ce(0x262)][_0x1cb7ce(0x1c4)];_0x49f5c0++){ctx[_0x1cb7ce(0x1ff)](_0x5b5902[_0x3be8c2(0x13d)][_0x49f5c0],0x0,0x0);}drawGrid(_0x7691e9[_0x1cb7ce(0x1b8)],_0x7691e9[_0x1cb7ce(0x27c)]),animationIndex=(animationIndex+0x1)%_0x28bdb1[_0x1cb7ce(0x1c4)];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function setAnimationDelay(_0x225cf2){const _0x496285=a0_0x38aafa;_0x225cf2=Math[_0x496285(0x2c3)](0xa,parseInt(_0x225cf2,0xa)||0x12c),animationDelay=_0x225cf2,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x3d311f){const _0x1af5e3=a0_0x56c5,_0x3ab333=a0_0x5049d9,_0x51fc12=a0_0x38aafa;currentTool=_0x3d311f,document[_0x51fc12(0x29b)](_0x51fc12(0x191))[_0x1af5e3(0x14c)](_0x319d4c=>{const _0x517350=_0x1af5e3,_0x17515b=_0x51fc12;_0x319d4c[_0x517350(0x100)][_0x17515b(0x29f)](_0x17515b(0x1a9),_0x319d4c[_0x17515b(0x2ba)][_0x17515b(0x1be)]===_0x3d311f);}),document[_0x51fc12(0x29b)](_0x3ab333(0x16f))[_0x51fc12(0x1bd)](_0x53cdfe=>{const _0x1ec88d=_0x3ab333,_0x4872a7=_0x51fc12;_0x53cdfe[_0x1ec88d(0x176)][_0x4872a7(0x29f)](_0x4872a7(0x1a9),_0x53cdfe[_0x4872a7(0x2ba)][_0x4872a7(0x1be)]===_0x3d311f);}),_0x3d311f===_0x51fc12(0x232)?canvas[_0x3ab333(0x1bb)][_0x3ab333(0x151)]=_0x51fc12(0x231):canvas[_0x51fc12(0x1f8)][_0x51fc12(0x2bd)]=_0x3ab333(0x10c);}function setPenSize(_0x2c155c){const _0x463d76=a0_0x5049d9,_0x354a62=a0_0x38aafa;penSize=parseInt(_0x2c155c)||0x1;let _0x890140=document[_0x463d76(0x192)](_0x354a62(0x1c3));if(_0x890140)_0x890140[_0x354a62(0x24e)]=penSize;let _0x4edb65=document[_0x354a62(0x275)](_0x354a62(0x250));if(_0x4edb65)_0x4edb65[_0x354a62(0x24e)]=penSize;}function setPenMode(_0x135d2a){const _0xd3bd44=a0_0x38aafa;penMode=_0x135d2a;let _0x11e9b1=document[_0xd3bd44(0x275)](_0xd3bd44(0x23a));if(_0x11e9b1)_0x11e9b1[_0xd3bd44(0x24e)]=penMode;let _0x53196c=document[_0xd3bd44(0x275)](_0xd3bd44(0x1a1));if(_0x53196c)_0x53196c[_0xd3bd44(0x24e)]=penMode;}function a0_0x5ad1(){const _0x30f2bd=a0_0x56c5,_0x558d76=a0_0x5049d9,_0x2870aa=[_0x558d76(0x1db),_0x558d76(0x16a),_0x30f2bd(0x1e6),_0x558d76(0x125),_0x558d76(0x18c),_0x30f2bd(0xc1),_0x558d76(0x165),_0x558d76(0x1f0),_0x558d76(0x151),_0x558d76(0x18a),_0x558d76(0x1d9),_0x558d76(0x126),_0x558d76(0x1b8),_0x558d76(0x19a),_0x558d76(0x107),_0x558d76(0x1a6),_0x558d76(0x181),_0x558d76(0x162),_0x558d76(0x191),'byteLength',_0x558d76(0x1f1),_0x558d76(0x17e),_0x558d76(0x178),_0x30f2bd(0x1c0),_0x558d76(0x17c),_0x558d76(0x226),'フレームがありません',_0x558d76(0x179),_0x558d76(0x1c9),_0x558d76(0x21a),_0x558d76(0x1f7),_0x558d76(0xe1),_0x558d76(0x1e3),'レイヤー',_0x558d76(0x170),_0x558d76(0x158),_0x30f2bd(0x165),_0x558d76(0x22e),_0x558d76(0xe8),_0x558d76(0x142),_0x558d76(0x123),_0x558d76(0x1c6),'restore',_0x558d76(0x1cd),_0x558d76(0x1c4),_0x30f2bd(0xf9),_0x30f2bd(0x1a1),_0x558d76(0x1f2),'target',_0x558d76(0x1c1),_0x30f2bd(0xe0),_0x558d76(0x114),_0x558d76(0x11b),'circle',_0x558d76(0x237),_0x558d76(0x144),_0x30f2bd(0xab),_0x558d76(0x122),_0x558d76(0x148),_0x30f2bd(0x114),_0x30f2bd(0x110),_0x30f2bd(0x10e),_0x30f2bd(0x1c5),_0x558d76(0x1b2),_0x558d76(0x1e8),_0x558d76(0x238),_0x558d76(0x180),_0x558d76(0x231),_0x558d76(0x11a),_0x558d76(0x1fd),_0x30f2bd(0x1af),_0x558d76(0x110),_0x558d76(0xfc),_0x558d76(0x1aa),_0x558d76(0x233),_0x558d76(0xf0),_0x558d76(0x22f),_0x558d76(0x224),_0x558d76(0xdb),_0x558d76(0x1af),_0x558d76(0x100),_0x558d76(0x219),_0x558d76(0x14c),'VideoEncoder',_0x558d76(0x20e),_0x558d76(0xf8),_0x30f2bd(0x142),_0x30f2bd(0xed),_0x558d76(0x15e),_0x30f2bd(0x1cb),_0x30f2bd(0x1a0),_0x558d76(0x188),_0x558d76(0x20f),'alignItems',_0x558d76(0x160),_0x558d76(0x10e),_0x558d76(0x206),_0x558d76(0x14d),_0x30f2bd(0xd2),_0x30f2bd(0xde),_0x558d76(0x1a9),_0x30f2bd(0x162),_0x558d76(0xfe),_0x558d76(0x169),_0x558d76(0x19f),_0x558d76(0xdc),_0x558d76(0x173),'search',_0x30f2bd(0x1f9),'auto',_0x30f2bd(0x1c9),'#newProjH',_0x30f2bd(0xb2),_0x30f2bd(0xba),_0x558d76(0x1ec),_0x558d76(0x1be),_0x30f2bd(0xc0),_0x558d76(0x121),_0x558d76(0x14a),_0x558d76(0x190),_0x558d76(0xf2),_0x558d76(0x202),_0x558d76(0x1d8),_0x558d76(0x155),_0x558d76(0x10a),_0x30f2bd(0xf2),_0x30f2bd(0xc8),_0x558d76(0x196),_0x558d76(0x236),'grabbing',_0x558d76(0xde),_0x558d76(0xf5),_0x30f2bd(0x1fc),_0x558d76(0x140),_0x558d76(0x22c),_0x558d76(0x1a4),_0x558d76(0x1d0),_0x30f2bd(0x1c4),'458555ntXURF',_0x558d76(0x13a),_0x30f2bd(0x12f),_0x558d76(0x187),_0x558d76(0x235),_0x558d76(0x208),_0x558d76(0x19c),_0x558d76(0x174),_0x558d76(0x1fb),_0x558d76(0x108),_0x558d76(0xe5),_0x558d76(0x1f6),_0x30f2bd(0x128),_0x558d76(0x102),_0x558d76(0x211),_0x558d76(0x198),_0x558d76(0x14f),_0x30f2bd(0x113),_0x30f2bd(0x1b0),_0x558d76(0x189),_0x558d76(0x1b5),_0x558d76(0xec),'touchend',_0x558d76(0x22a),_0x558d76(0x18e),_0x558d76(0x223),_0x30f2bd(0x19f),_0x558d76(0x138),_0x558d76(0x1bc),_0x558d76(0x1c5),_0x558d76(0x234),_0x558d76(0x11e),_0x558d76(0xdd),_0x30f2bd(0x16a),_0x558d76(0x1c8),'#808000',_0x558d76(0x1c0),_0x558d76(0x117),_0x558d76(0x1ca),_0x30f2bd(0x1c7),_0x558d76(0x1a5),_0x558d76(0x15d),_0x558d76(0x218),_0x558d76(0x10d),_0x558d76(0x185),_0x30f2bd(0x178),_0x558d76(0x229),_0x558d76(0xe0),_0x30f2bd(0x1bd),_0x558d76(0x1b7),_0x558d76(0x1ce),_0x558d76(0x1df),_0x558d76(0x230),_0x30f2bd(0xd4),_0x558d76(0x159),_0x30f2bd(0x18a),_0x558d76(0x175),_0x558d76(0x1d6),_0x558d76(0x20d),_0x558d76(0x157),_0x558d76(0x1fa),_0x558d76(0x103),_0x30f2bd(0x17f),_0x558d76(0x1e7),_0x558d76(0x200),_0x558d76(0xfa),_0x30f2bd(0xb3),_0x30f2bd(0x11e),_0x558d76(0x1d2),_0x558d76(0x12a),_0x558d76(0x141),_0x558d76(0x1fe),_0x558d76(0x1ef),_0x558d76(0x15a),_0x558d76(0x1de),_0x558d76(0x10b),_0x558d76(0x171),_0x558d76(0x1d7),_0x558d76(0x1e0),_0x558d76(0x207),_0x558d76(0x232),_0x558d76(0x14b),_0x558d76(0x1a3),_0x558d76(0x17a),_0x558d76(0x166),_0x558d76(0x16c),_0x558d76(0x154),_0x558d76(0x18b),_0x558d76(0x20b),_0x558d76(0xea),_0x30f2bd(0x169),_0x558d76(0x1f8),'#palette-alphaValue',_0x30f2bd(0x17b),_0x558d76(0x1ba),_0x30f2bd(0x176),_0x558d76(0x176),_0x558d76(0x1f4),_0x558d76(0x172),_0x558d76(0x16b),_0x558d76(0x1eb),_0x30f2bd(0x11f),_0x558d76(0x199),'pan',_0x30f2bd(0xd0),_0x558d76(0x19d),_0x30f2bd(0xc6),_0x558d76(0x109),_0x558d76(0x1c2),_0x558d76(0x21f),_0x558d76(0x1e1),_0x30f2bd(0x190),'layerList',_0x558d76(0x177),_0x30f2bd(0x147),_0x30f2bd(0x1a3),_0x558d76(0x1f5),_0x558d76(0x112),'#palette-alphaSlider',_0x558d76(0x1dd),_0x558d76(0x1ae),_0x558d76(0x17b),_0x558d76(0x16e),_0x558d76(0x1b6),'palette-alphaSlider',_0x558d76(0x1d4),_0x558d76(0x132),_0x558d76(0x116),_0x558d76(0x145),_0x558d76(0x19b),_0x558d76(0x22d),_0x558d76(0x12e),_0x558d76(0x1a7),_0x558d76(0x225),_0x30f2bd(0x15c),_0x30f2bd(0xc9),_0x558d76(0xf7),_0x30f2bd(0x195),_0x558d76(0x134),_0x558d76(0x1d1),_0x558d76(0x20c),_0x30f2bd(0x153),_0x558d76(0x130),_0x558d76(0x1d5),_0x558d76(0x1e4),_0x558d76(0x143),_0x558d76(0x12b),_0x558d76(0x1e2),_0x558d76(0x1ea),'onsuccess',_0x30f2bd(0x136),_0x558d76(0x13d),'nezumi-projects',_0x30f2bd(0x173),'#ff0000',_0x558d76(0x13c),_0x558d76(0x164),'filter',_0x558d76(0x15f),_0x558d76(0x11d),_0x558d76(0xe6),_0x30f2bd(0x140),_0x558d76(0x212),_0x558d76(0x137),_0x558d76(0x167),_0x558d76(0x1dc),_0x558d76(0x120),'プロジェクトがありません',_0x558d76(0x228),_0x558d76(0x1e6),'getElementById',_0x558d76(0x14e),_0x558d76(0x1ff),_0x558d76(0x19e),_0x558d76(0x163),_0x558d76(0x21b),_0x558d76(0x1cb),_0x30f2bd(0x1ff),_0x558d76(0x127),_0x558d76(0x21c),_0x558d76(0x13f),_0x558d76(0x1b0),_0x558d76(0x105),'IndexedDBからプロジェクトを読み込んだチュー！',_0x558d76(0x161),_0x558d76(0x139),_0x558d76(0x119),_0x558d76(0x1b1),'getImageData',_0x558d76(0x20a),'hidden',_0x558d76(0x1e5),_0x558d76(0x115),_0x558d76(0x1b4),_0x30f2bd(0x1ba),_0x558d76(0x111),_0x30f2bd(0x163),_0x558d76(0x1ad),_0x558d76(0x10f),_0x558d76(0x104),_0x558d76(0x113),_0x558d76(0x18f),_0x558d76(0x182),_0x558d76(0x222),_0x558d76(0x11c),_0x558d76(0x213),_0x558d76(0x214),'#00ffff',_0x558d76(0xe9),_0x558d76(0x195),_0x30f2bd(0x129),_0x558d76(0x1cc),_0x558d76(0x184),_0x558d76(0x1cf),_0x558d76(0x1b3),_0x558d76(0x152),_0x558d76(0x220),_0x558d76(0x1bf),_0x558d76(0x12c),_0x558d76(0x146),_0x30f2bd(0x127),'configure',_0x558d76(0x131),_0x558d76(0x1bd),_0x558d76(0x1f3),_0x558d76(0x22b),_0x558d76(0x221),_0x558d76(0x135),_0x558d76(0xe3),_0x558d76(0x106),'/index.html',_0x558d76(0x1ed),_0x558d76(0x17f),_0x558d76(0x1c7)];return a0_0x5ad1=function(){return _0x2870aa;},a0_0x5ad1();}function hexToRgba(_0x338bd6,_0x320bc9=0x1){const _0x130d94=a0_0x5049d9,_0xc40a78=a0_0x38aafa;if(_0x338bd6===_0xc40a78(0x1f3)||_0x338bd6===_0xc40a78(0x25c))return[0x0,0x0,0x0,0x0];_0x338bd6=_0x338bd6[_0xc40a78(0x27d)]('#','');if(_0x338bd6[_0xc40a78(0x1c4)]===0x3)_0x338bd6=_0x338bd6[_0xc40a78(0x285)]('')[_0x130d94(0x18f)](_0x57ba81=>_0x57ba81+_0x57ba81)[_0x130d94(0xf9)]('');let _0x206baa=parseInt(_0x338bd6,0x10);return[_0x206baa>>0x10&0xff,_0x206baa>>0x8&0xff,_0x206baa&0xff,Math[_0xc40a78(0x26f)](0xff*_0x320bc9)];}function fillAt(_0x213765,_0x220216){const _0x30d3ea=a0_0x56c5,_0x50c94c=a0_0x5049d9,_0x591953=a0_0x38aafa;let _0x45e2f3=getCurrentProject(),_0x14601e=getCurrentFrame(),_0x4cde96=_0x14601e[_0x591953(0x262)][_0x14601e[_0x591953(0x1b5)]][_0x591953(0x2c6)]('2d'),_0x448c06=_0x4cde96[_0x591953(0x287)](0x0,0x0,_0x45e2f3[_0x591953(0x1b8)]*cellSize,_0x45e2f3[_0x591953(0x27c)]*cellSize),_0x30eaa1=_0x213765*cellSize,_0x11e7f9=_0x220216*cellSize,_0x401b5e=getPixel(_0x448c06,_0x30eaa1,_0x11e7f9),_0x1509b1=currentColor===_0x50c94c(0x1a5)||currentColor===_0x591953(0x25c)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x401b5e,_0x1509b1))return;let _0x110e6d=[[_0x213765,_0x220216]],_0x317935=new Set();while(_0x110e6d[_0x591953(0x1c4)]){let [_0x43a692,_0x3309e9]=_0x110e6d['pop']();if(_0x43a692<0x0||_0x3309e9<0x0||_0x43a692>=_0x45e2f3[_0x30d3ea(0x13a)]||_0x3309e9>=_0x45e2f3[_0x591953(0x27c)])continue;let _0x1038e5=_0x43a692+','+_0x3309e9;if(_0x317935[_0x591953(0x2bb)](_0x1038e5))continue;_0x317935[_0x591953(0x1de)](_0x1038e5);let _0x1e5ed1=_0x43a692*cellSize,_0x3bda58=_0x3309e9*cellSize,_0x5db863=getPixel(_0x448c06,_0x1e5ed1,_0x3bda58);if(!colorsMatch(_0x5db863,_0x401b5e))continue;for(let _0x2824dd=0x0;_0x2824dd<cellSize;_0x2824dd++){for(let _0x62cc0c=0x0;_0x62cc0c<cellSize;_0x62cc0c++){setPixel(_0x448c06,_0x1e5ed1+_0x62cc0c,_0x3bda58+_0x2824dd,_0x1509b1);}}_0x110e6d[_0x591953(0x278)]([_0x43a692+0x1,_0x3309e9]),_0x110e6d[_0x591953(0x278)]([_0x43a692-0x1,_0x3309e9]),_0x110e6d[_0x591953(0x278)]([_0x43a692,_0x3309e9+0x1]),_0x110e6d[_0x50c94c(0x19e)]([_0x43a692,_0x3309e9-0x1]);}_0x4cde96[_0x591953(0x19f)](_0x448c06,0x0,0x0),redrawAll();}function getPixel(_0x929639,_0x1779da,_0x2537e5){const _0x586624=a0_0x56c5,_0x59a766=a0_0x5049d9,_0x133d09=a0_0x38aafa;let _0x502440=(_0x2537e5*_0x929639[_0x586624(0x13a)]+_0x1779da)*0x4;return[_0x929639[_0x586624(0x136)][_0x502440],_0x929639[_0x59a766(0x15b)][_0x502440+0x1],_0x929639[_0x133d09(0x261)][_0x502440+0x2],_0x929639[_0x133d09(0x261)][_0x502440+0x3]];}function setPixel(_0x3f4856,_0x985532,_0x4998ce,_0x1f1589){const _0x210c9a=a0_0x56c5,_0xcf7bd1=a0_0x38aafa;let _0x3ab5e1=(_0x4998ce*_0x3f4856[_0xcf7bd1(0x1b8)]+_0x985532)*0x4;_0x3f4856[_0xcf7bd1(0x261)][_0x3ab5e1]=_0x1f1589[0x0],_0x3f4856[_0xcf7bd1(0x261)][_0x3ab5e1+0x1]=_0x1f1589[0x1],_0x3f4856[_0x210c9a(0x136)][_0x3ab5e1+0x2]=_0x1f1589[0x2],_0x3f4856[_0xcf7bd1(0x261)][_0x3ab5e1+0x3]=_0x1f1589[0x3];}function colorsMatch(_0x47a30c,_0x3089df){return _0x47a30c[0x0]===_0x3089df[0x0]&&_0x47a30c[0x1]===_0x3089df[0x1]&&_0x47a30c[0x2]===_0x3089df[0x2]&&_0x47a30c[0x3]===_0x3089df[0x3];}function handleMouseDown(_0x10a82c){const _0x4324c5=a0_0x5049d9,_0x4576ce=a0_0x38aafa;isDrawing=!![];const _0x41cad8=getCanvasCoords(_0x10a82c),_0x31b658=Math[_0x4576ce(0x1a7)](_0x41cad8['x']/cellSize),_0x299d25=Math[_0x4324c5(0xfe)](_0x41cad8['y']/cellSize);currentTool===_0x4576ce(0x1a8)?(fillAt(_0x31b658,_0x299d25),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x31b658,_0x299d25),lastMouse={'x':_0x31b658,'y':_0x299d25});}function handleMouseMove(_0x4f2080){const _0x5c9a7b=a0_0x5049d9,_0x271964=a0_0x38aafa;if(!isDrawing)return;const _0x39e6bc=getCanvasCoords(_0x4f2080),_0x48f8c8=Math[_0x271964(0x1a7)](_0x39e6bc['x']/cellSize),_0x5f5083=Math[_0x271964(0x1a7)](_0x39e6bc['y']/cellSize);if(!lastMouse){drawDotXY(_0x48f8c8,_0x5f5083),lastMouse={'x':_0x48f8c8,'y':_0x5f5083};return;}const _0x2626d7=_0x48f8c8-lastMouse['x'],_0xd910b7=_0x5f5083-lastMouse['y'],_0x1fa7d9=Math[_0x271964(0x2c3)](Math[_0x271964(0x1a6)](_0x2626d7),Math[_0x271964(0x1a6)](_0xd910b7));if(_0x1fa7d9<=0x1)drawDotXY(_0x48f8c8,_0x5f5083);else for(let _0x37f0d0=0x1;_0x37f0d0<=_0x1fa7d9;_0x37f0d0++){const _0x129000=Math[_0x5c9a7b(0x167)](lastMouse['x']+_0x2626d7*_0x37f0d0/_0x1fa7d9),_0xc204ba=Math[_0x271964(0x26f)](lastMouse['y']+_0xd910b7*_0x37f0d0/_0x1fa7d9);drawDotXY(_0x129000,_0xc204ba);}lastMouse={'x':_0x48f8c8,'y':_0x5f5083};}function handleMouseUp(_0x56b9cb){isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0x49b863){const _0x2beca7=a0_0x5049d9,_0x343751=a0_0x38aafa,_0x599d0a=canvas[_0x343751(0x280)]();let _0x4cb57d=_0x49b863[_0x343751(0x2d8)]&&_0x49b863[_0x343751(0x2d8)][0x0]?_0x49b863[_0x343751(0x2d8)][0x0]:_0x49b863[_0x2beca7(0x203)][0x0];const _0x5ef92d=canvas[_0x343751(0x1b8)]/_0x599d0a[_0x2beca7(0x190)],_0x4cbd86=canvas[_0x343751(0x27c)]/_0x599d0a[_0x343751(0x27c)],_0x3a6afd=_0x4cb57d[_0x343751(0x193)],_0x16aab4=_0x4cb57d[_0x343751(0x25d)],_0x14fc52=(_0x3a6afd-_0x599d0a[_0x343751(0x2a7)])*_0x5ef92d,_0x389b60=(_0x16aab4-_0x599d0a[_0x343751(0x196)])*_0x4cbd86;return{'x':Math[_0x343751(0x1a7)](_0x14fc52/cellSize),'y':Math[_0x343751(0x1a7)](_0x389b60/cellSize)};}function handleTouchStart(_0x2420b3){const _0x2680a1=a0_0x56c5,_0x316181=a0_0x5049d9,_0x4b5eb1=a0_0x38aafa;if(_0x2420b3[_0x316181(0x158)][_0x4b5eb1(0x1c4)]===0x2){_0x2420b3[_0x4b5eb1(0x1ce)](),isPinching=!![],isDrawing=![];const _0x4b851d=_0x2420b3[_0x4b5eb1(0x2d8)][0x0],_0x2c3a56=_0x2420b3[_0x4b5eb1(0x2d8)][0x1];pinchStartDistance=Math[_0x4b5eb1(0x18d)](_0x2c3a56[_0x2680a1(0x119)]-_0x4b851d[_0x4b5eb1(0x193)],_0x2c3a56[_0x4b5eb1(0x25d)]-_0x4b851d[_0x316181(0x12b)]),pinchStartMid={'clientX':(_0x4b851d[_0x4b5eb1(0x193)]+_0x2c3a56[_0x4b5eb1(0x193)])/0x2,'clientY':(_0x4b851d[_0x4b5eb1(0x25d)]+_0x2c3a56[_0x4b5eb1(0x25d)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x4b5eb1(0x280)]();}else{if(_0x2420b3[_0x4b5eb1(0x2d8)][_0x4b5eb1(0x1c4)]===0x1){_0x2420b3[_0x316181(0x187)]();if(isPinching)return;isDrawing=!![];let _0x3e7bd2=getTouchPos(_0x2420b3);lastTouch=_0x3e7bd2,currentTool===_0x4b5eb1(0x1a8)?(fillAt(_0x3e7bd2['x'],_0x3e7bd2['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x3e7bd2['x'],_0x3e7bd2['y']);}}}function handleTouchMove(_0x535e05){const _0x13f718=a0_0x56c5,_0x2023b8=a0_0x5049d9,_0xf51d9a=a0_0x38aafa;if(isPinching||_0x535e05[_0xf51d9a(0x2d8)]&&_0x535e05[_0x2023b8(0x158)][_0xf51d9a(0x1c4)]===0x2){_0x535e05[_0xf51d9a(0x1ce)]();const _0x28a52f=_0x535e05[_0xf51d9a(0x2d8)][0x0],_0x380fb1=_0x535e05[_0xf51d9a(0x2d8)][0x1],_0x393318=Math[_0x13f718(0xaf)](_0x380fb1[_0xf51d9a(0x193)]-_0x28a52f[_0xf51d9a(0x193)],_0x380fb1[_0x2023b8(0x12b)]-_0x28a52f[_0xf51d9a(0x25d)]),_0x51a643={'clientX':(_0x28a52f[_0xf51d9a(0x193)]+_0x380fb1[_0xf51d9a(0x193)])/0x2,'clientY':(_0x28a52f[_0x2023b8(0x12b)]+_0x380fb1[_0xf51d9a(0x25d)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x393318||0x1;const _0x311bea=_0x393318/pinchStartDistance||0x1;let _0x3b9fb2=pinchStartScale*_0x311bea;_0x3b9fb2=Math[_0x2023b8(0x18d)](Math[_0xf51d9a(0x2c3)](_0x3b9fb2,0.2),0x5);const _0x1746d8=pinchRect||canvas[_0x2023b8(0x1b0)](),_0x4ed709=(pinchStartMid[_0xf51d9a(0x193)]-_0x1746d8[_0xf51d9a(0x2a7)]-pinchStartPosX)/pinchStartScale,_0x5e290f=(pinchStartMid[_0x2023b8(0x12b)]-_0x1746d8[_0xf51d9a(0x196)]-pinchStartPosY)/pinchStartScale;posX=_0x51a643[_0xf51d9a(0x193)]-_0x1746d8[_0xf51d9a(0x2a7)]-_0x4ed709*_0x3b9fb2,posY=_0x51a643['clientY']-_0x1746d8[_0xf51d9a(0x196)]-_0x5e290f*_0x3b9fb2,scale=_0x3b9fb2,updateTransform();return;}if(!isDrawing)return;if(_0x535e05['touches']&&_0x535e05[_0xf51d9a(0x2d8)][_0x2023b8(0xf5)]>0x1)return;_0x535e05[_0x13f718(0xfd)]();let _0x356f0e=getTouchPos(_0x535e05);if(lastTouch){let _0x5437da=Math[_0xf51d9a(0x1a6)]((_0x356f0e['x']-lastTouch['x'])*cellSize),_0x537a13=Math[_0xf51d9a(0x1a6)]((_0x356f0e['y']-lastTouch['y'])*cellSize);if(_0x5437da>=PAN_CANCEL_DISTANCE||_0x537a13>=PAN_CANCEL_DISTANCE){if(currentTool!==_0xf51d9a(0x182)){isDrawing=![];return;}}}if(lastTouch){let _0x51a091=_0x356f0e['x']-lastTouch['x'],_0xa29689=_0x356f0e['y']-lastTouch['y'],_0x1af201=Math[_0x2023b8(0x107)](Math[_0x2023b8(0x11f)](_0x51a091),Math[_0xf51d9a(0x1a6)](_0xa29689));for(let _0x35b466=0x1;_0x35b466<=_0x1af201;_0x35b466++){let _0x2ff03c=Math[_0xf51d9a(0x26f)](lastTouch['x']+_0x51a091*_0x35b466/_0x1af201),_0x119b27=Math[_0xf51d9a(0x26f)](lastTouch['y']+_0xa29689*_0x35b466/_0x1af201);drawDotTouch(_0x2ff03c,_0x119b27);}}else drawDotTouch(_0x356f0e['x'],_0x356f0e['y']);lastTouch=_0x356f0e;}function handleTouchEnd(_0x1b0698){const _0x3fe731=a0_0x5049d9,_0x1346d1=a0_0x38aafa;isPinching&&_0x1b0698[_0x1346d1(0x2d8)]&&_0x1b0698[_0x3fe731(0x158)][_0x1346d1(0x1c4)]<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null),isDrawing&&(!_0x1b0698[_0x3fe731(0x158)]||_0x1b0698[_0x1346d1(0x2d8)]['length']===0x0)&&saveHistory();if(_0x1b0698[_0x3fe731(0x158)]&&_0x1b0698[_0x1346d1(0x2d8)][_0x1346d1(0x1c4)]===0x1){let _0x4f2994=_0x1b0698[_0x1346d1(0x2d8)][0x0];lastTouch=getTouchPos({'touches':[_0x4f2994]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function drawDotXY(_0x233bd9,_0x3c4e9e){const _0x214bb1=a0_0x56c5,_0x190b1f=a0_0x5049d9,_0x1985dc=a0_0x38aafa;let _0x4f66e2=getCurrentProject(),_0x33c766=getCurrentFrame();if(!_0x33c766||!_0x4f66e2)return;if(typeof _0x233bd9!==_0x1985dc(0x1a2)||typeof _0x3c4e9e!==_0x1985dc(0x1a2)||_0x233bd9<0x0||_0x3c4e9e<0x0||!Number['isFinite'](_0x4f66e2[_0x190b1f(0x190)])||!Number[_0x190b1f(0x115)](_0x4f66e2[_0x1985dc(0x27c)])||_0x233bd9>=_0x4f66e2[_0x190b1f(0x190)]||_0x3c4e9e>=_0x4f66e2[_0x1985dc(0x27c)]||!Array[_0x1985dc(0x19c)](_0x33c766[_0x190b1f(0x13d)])||typeof _0x33c766[_0x1985dc(0x1b5)]!==_0x1985dc(0x1a2)||!_0x33c766[_0x1985dc(0x262)][_0x33c766[_0x190b1f(0x215)]])return;let _0x2545f4=_0x33c766[_0x1985dc(0x262)][_0x33c766[_0x190b1f(0x215)]][_0x1985dc(0x2c6)]('2d');if(!_0x2545f4)return;if(currentTool===_0x214bb1(0xd1)||currentColor===_0x1985dc(0x1f3)||currentColor===_0x1985dc(0x25c)||currentAlpha===0x0)drawPenShape(_0x2545f4,_0x233bd9,_0x3c4e9e,_0x1985dc(0x25c),!![]);else{let _0x599072=hexToRgba(currentColor,currentAlpha);_0x2545f4[_0x1985dc(0x1fe)](),_0x2545f4[_0x1985dc(0x2a0)]=_0x599072[0x3]/0xff,drawPenShape(_0x2545f4,_0x233bd9,_0x3c4e9e,_0x1985dc(0x210)+_0x599072[0x0]+','+_0x599072[0x1]+','+_0x599072[0x2]+','+_0x599072[0x3]/0xff+')',![]),_0x2545f4[_0x1985dc(0x2df)]();}redrawAll();}function drawPenShape(_0x99ab28,_0x25faf2,_0x198e04,_0x2e216c,_0x405d0c){const _0x11aa28=a0_0x56c5,_0x48c4f4=a0_0x5049d9,_0x4aa92e=a0_0x38aafa,_0x435dcb=_0x25faf2*cellSize,_0x84f153=_0x198e04*cellSize,_0x575525=penSize*cellSize;_0x405d0c?(_0x99ab28[_0x4aa92e(0x1fe)](),_0x99ab28[_0x4aa92e(0x20d)]=_0x4aa92e(0x2d5),penMode===_0x4aa92e(0x2ea)?(_0x99ab28[_0x4aa92e(0x2eb)](),_0x99ab28[_0x4aa92e(0x24a)](_0x435dcb+cellSize/0x2,_0x84f153+cellSize/0x2,_0x575525/0x2,0x0,Math['PI']*0x2),_0x99ab28[_0x4aa92e(0x1a8)]()):_0x99ab28[_0x4aa92e(0x22d)](_0x435dcb-Math[_0x4aa92e(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x84f153-Math[_0x4aa92e(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x575525,_0x575525),_0x99ab28[_0x4aa92e(0x2df)]()):(_0x99ab28[_0x4aa92e(0x1fe)](),_0x99ab28[_0x4aa92e(0x2aa)]=_0x2e216c,penMode===_0x4aa92e(0x2ea)?(_0x99ab28[_0x48c4f4(0x237)](),_0x99ab28[_0x4aa92e(0x24a)](_0x435dcb+cellSize/0x2,_0x84f153+cellSize/0x2,_0x575525/0x2,0x0,Math['PI']*0x2),_0x99ab28[_0x11aa28(0x10d)]()):_0x99ab28[_0x4aa92e(0x216)](_0x435dcb-Math[_0x48c4f4(0xfe)]((penSize-0x1)/0x2)*cellSize,_0x84f153-Math[_0x4aa92e(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x575525,_0x575525),_0x99ab28[_0x4aa92e(0x2df)]());}function a0_0x22a5(){const _0x596b76=['1710315EwWIGP','isFinite','zoomSlider','data','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','#444444','#palette-toolbar\x20.tool-btn','width','touches','frame-thumb','<span\x20style=\x22font-size:13px;color:#888;\x22>透明</span>','194866cGotcP','207RSftqX','#008080','.section.collapsible\x20.section-content','(((.+)+)+)+$','save','\x20active','frames','layer-item','activeProject','読込エラー','value','overflow','140942YGNfmW','forEach','onload','menu-toggle-btn-close','colorPicker','themeToggleBtn','clearRect','number','\x0a---NEZUMI_METADATA_START---\x0a','transaction','スタンドアロン形式のプロジェクトを読み込みました:\x20','rgba(0,0,0,0.3)','closePath','replaceWith','nezumi-animation.gif','readwrite','apply','resize','block','addEventListener','log','keyval','.gif','abs','touchmove','href','stroke','decode','fixed','matchMedia','undefined','touchAction','.tool-btn','dark','zoomValue','setAttribute','application/octet-stream','onmouseleave','onmousedown','1780284xxbNLL','フレーム間の余白(px)\x20を指定（例:\x200）','GIF','innerHTML','innerWidth','firstChild','style','name','documentElement','projectList','deltaY','UPNG','10376090telBQC','flush','#00000000','px)\x20scale(','getElementById','pointerup','all','project','fillStyle','252qMzMxb','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22undo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>undo</span>\x20戻す\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22redo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>redo</span>\x20戻すを戻す\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','nezumi-sketch.msketch','#008000','nezumi-sketch-db','973508Cqoyrz','Enter','fillRect','alphaSlider','penMode','penSize','14lKJKdV','video/webm','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','frame-item','selected','1663240xvhpIM','onkeydown','revokeObjectURL','catch','9167048BqRjmr','disabled','keyup','99eaBytn','stringify','trim','close','releasePointerCapture','text','ontouchstart','ontouchcancel','clientY','保存エラー','project-item','#ffffff','clear','textContent','nezumi-palette','1023636OyXKxu','encode','remove','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','slice','100vh','setItem','nezumi-sketch-save','#ff69b4','projects','project-name-edit','4802050CMYWrO','cursor','21479103enQVXi','open','animSpeedRange','GIFに変換できる画像がありません。','vp8','floor','パレットに色を追加','palette-penSize','touchcancel','toggle','color','then','div','layer-thumb','layers','boolean','activeFrame','#888888','setPointerCapture','.apng','72fOvfXp','114TnziLr','removeEventListener','error','result','nezumi-spritesheet','#newProjName','project-name','join','menu-toggle-btn','3313824QVIVOZ','push','pointerType','light','下に移動','body','#00ff00','このブラウザはWebCodecsによるWEBPアニメーションに対応していません。','buffer','button','100vw','onchange','render','/about?terms=true','splice','>四角ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22','\x20selected','getItem','onmousemove','add','strokeStyle','image/png','readAsText','search','onmouseup','#palette-penMode','translate(','100%','このレイヤーを削除','crossOrigin','stopPropagation','#cccccc','readonly','pathname','get','10188tVdTJu','onerror','subarray','ontouchmove','height','.palette-color','WebCodecs','click','image','match','lineTo','hypot','jpeg','3937560ufqvBg','none','globalCompositeOperation','appendChild','スプライトシートの拡大率を指定（例:\x201\x20=\x20元サイズ,\x202\x20=\x202倍）','warn','>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22','palette-toolbar','oncomplete','min','#800000','contains','pop','px,\x20','onclick','activeLayer','dataset','18959ijBvyJ','grab','transform','data-theme','finished','frame-btn','webp','className','destination-out','#800080','onsuccess','sidebar','transparent','main-container','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','eraser','startsWith','image/jpeg','nezumi-drawing','toDataURL','#c0c0c0','length','ライトテーマに切替','matches','focus','layerCount','(prefers-color-scheme:\x20dark)','createElement','nezumi-theme','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>塗りつぶし</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20太さ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','この色をパレットから削除','put','247055AHBsKT','max','frameList','#palette-penSize','toString','6806842iHrSfp','top','justifyContent','putImageData','10XJZHgl','.webm','title','getContext','IndexedDBからの読み込みに失敗したチュー…','download','pen','tool','#000080','8fhqvtN','replace','保存に失敗したチュー:','getBoundingClientRect','getAttribute','square','addFrame','palette-add-btn','createObjectURL','preventDefault','#ffff00','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>ペン</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','classList','クリックで名前を編集','querySelectorAll','span','drawImage','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','onupgradeneeded','ontouchend','beginPath','delete','animSpeedValue','projectCount','ダークテーマに切替','fill','pointermove','rgba(','type','メタデータが見つかりませんでした','canvas','removeChild','display','flex','canvas-container','onblur','position','clientX','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>消しゴム</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','7364640yMKFng','layerHistories','constructor','layer-btn','color-palette','map','active','round','new-project-dialog','14uGmiOY','.toggle-btn','ファイルの読み込みに失敗しました。','left','shift','80px','pan','Shift','wheel','#000000','14236XjzBgT','pointerdown','parse','frameCount','>丸ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20透明度:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22'];a0_0x22a5=function(){return _0x596b76;};return a0_0x22a5();}function a0_0x243d(){const _0x229fa6=a0_0x56c5,_0x3f87b8=[_0x229fa6(0xc2),_0x229fa6(0x1e8),'application/json','activeLayer',_0x229fa6(0x177),_0x229fa6(0x1a2),_0x229fa6(0x171),_0x229fa6(0x1d2),_0x229fa6(0x1be),'project-btn',_0x229fa6(0x166),_0x229fa6(0x1b8),'\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>幅:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>高さ:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>作成</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>キャンセル</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x229fa6(0x1f0),_0x229fa6(0xb9),_0x229fa6(0xff),'#0000ff',_0x229fa6(0x144),_0x229fa6(0x105),_0x229fa6(0x1c1),_0x229fa6(0xcd),_0x229fa6(0x1fb),_0x229fa6(0x106),'#newProjCancelBtn',_0x229fa6(0x1ae),_0x229fa6(0x1a5),_0x229fa6(0x19a),_0x229fa6(0x1ad),_0x229fa6(0xaa),_0x229fa6(0xaf),_0x229fa6(0x104),_0x229fa6(0x1f2),_0x229fa6(0x1db),_0x229fa6(0x1d7),_0x229fa6(0xb1),_0x229fa6(0x116),_0x229fa6(0x1e4),'beginPath',_0x229fa6(0xf1),_0x229fa6(0x181),'image/apng','select',_0x229fa6(0x188),_0x229fa6(0x191),_0x229fa6(0x1f4),_0x229fa6(0x1ed),'ファイルにプロジェクトメタデータが見つかりませんでした。読み込みできません。',_0x229fa6(0xf8),_0x229fa6(0x168),_0x229fa6(0x142),_0x229fa6(0x1e9),'#ccc',_0x229fa6(0xf2),_0x229fa6(0x157),_0x229fa6(0x102),_0x229fa6(0x13d),_0x229fa6(0x13e),_0x229fa6(0x1aa),_0x229fa6(0x1e6),_0x229fa6(0xc4),_0x229fa6(0x18c),_0x229fa6(0xad),'then',_0x229fa6(0xbb),_0x229fa6(0xae),_0x229fa6(0x190),'length','.section.collapsible\x20.toggle-btn',_0x229fa6(0x194),_0x229fa6(0xe8),_0x229fa6(0x1d6),_0x229fa6(0x115),'parentNode',_0x229fa6(0x150),_0x229fa6(0xac),_0x229fa6(0x1bf),'3bZOlqa',_0x229fa6(0x16b),'上に移動',_0x229fa6(0x18f),_0x229fa6(0xdc),_0x229fa6(0x18b),_0x229fa6(0x1f7),_0x229fa6(0x15b),_0x229fa6(0xe3),_0x229fa6(0x1d5),_0x229fa6(0x1fd),_0x229fa6(0x14c),_0x229fa6(0x18e),'crosshair',_0x229fa6(0x1b1),_0x229fa6(0x14f),'#ff00ff',_0x229fa6(0x14a),_0x229fa6(0x103),_0x229fa6(0x131),'DOMContentLoaded',_0x229fa6(0x158),_0x229fa6(0x134),'arc',_0x229fa6(0x1cc),_0x229fa6(0xdb),'split',_0x229fa6(0x14d),_0x229fa6(0x1b4),_0x229fa6(0xe1),'anonymous','pop',_0x229fa6(0x162),_0x229fa6(0xeb),_0x229fa6(0x1c2),_0x229fa6(0x16c),_0x229fa6(0x196),_0x229fa6(0xed),_0x229fa6(0x1fa),'querySelector',_0x229fa6(0xf5),_0x229fa6(0x187),'#newProjW',_0x229fa6(0x10f),_0x229fa6(0x1a6),'activeFrame',_0x229fa6(0xb2),_0x229fa6(0x149),_0x229fa6(0x1d8),_0x229fa6(0x15a),'aria-pressed','nezumi_about_visited',_0x229fa6(0xf6),_0x229fa6(0x199),_0x229fa6(0x1e5),'removeChild','693928GhthjY',_0x229fa6(0x200),_0x229fa6(0x197),'keydown',_0x229fa6(0x1ff),_0x229fa6(0xfe),_0x229fa6(0x1c8),_0x229fa6(0x16a),_0x229fa6(0x154),_0x229fa6(0xe4),_0x229fa6(0x126),'background',_0x229fa6(0x180),_0x229fa6(0x1bb),'zIndex',_0x229fa6(0x1d0),_0x229fa6(0xd6),'nezumi-animation.apng','onerror',_0x229fa6(0x170),'プロジェクトをIndexedDBに保存したチュー！',_0x229fa6(0x119),_0x229fa6(0x152),_0x229fa6(0x18d),_0x229fa6(0x123),_0x229fa6(0xf9),_0x229fa6(0x1b9),_0x229fa6(0xfa),'search',_0x229fa6(0x1ab),_0x229fa6(0x135),'\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>新しい画像のサイズ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>名前:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22画像',_0x229fa6(0xc5),_0x229fa6(0x13b),_0x229fa6(0xfc),_0x229fa6(0x1f6),_0x229fa6(0x136),'className',_0x229fa6(0x117),_0x229fa6(0x17a),_0x229fa6(0xf3),_0x229fa6(0xea),_0x229fa6(0x155),'getContext','toString',_0x229fa6(0x1fe),'has','nezumi-animation',_0x229fa6(0x122),_0x229fa6(0x11a),'fill',_0x229fa6(0x16d),_0x229fa6(0x160),_0x229fa6(0x1da),_0x229fa6(0x1e0),'palette-alphaValue',_0x229fa6(0x139),_0x229fa6(0x146),'_spritesheet.png','clearRect',_0x229fa6(0x19d),'block','image/',_0x229fa6(0x100),'files',_0x229fa6(0x16f),'layerRedoStacks',_0x229fa6(0x17d),_0x229fa6(0x138),_0x229fa6(0xef),_0x229fa6(0x13f),_0x229fa6(0x198),_0x229fa6(0x145),_0x229fa6(0xcf),'key','input',_0x229fa6(0x1e2),_0x229fa6(0x1c3),_0x229fa6(0x118),_0x229fa6(0x1dc),_0x229fa6(0xfd),'isArray',_0x229fa6(0x1eb),_0x229fa6(0xda),_0x229fa6(0x1e3),'63psIyud',_0x229fa6(0xba),_0x229fa6(0x167),_0x229fa6(0x120),_0x229fa6(0x13a),'palette-del-btn',_0x229fa6(0x182),'display',_0x229fa6(0x1de),_0x229fa6(0x11c),_0x229fa6(0xbe),_0x229fa6(0x1ee),_0x229fa6(0x13c),_0x229fa6(0xc3),'#ffa500',_0x229fa6(0x12b),_0x229fa6(0x159),_0x229fa6(0xbf),_0x229fa6(0x1d9),_0x229fa6(0x121),_0x229fa6(0x15f),_0x229fa6(0xb5),_0x229fa6(0xb7),'addEventListener',_0x229fa6(0x164),_0x229fa6(0xce),'コマ)',_0x229fa6(0x1b6),_0x229fa6(0x1a7),'touch',_0x229fa6(0xd3),_0x229fa6(0x132),'>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22',_0x229fa6(0x1f5),'center',_0x229fa6(0x174),_0x229fa6(0xf7),_0x229fa6(0xc7),_0x229fa6(0x156),'sidebar-open',_0x229fa6(0x11d),_0x229fa6(0xd5),_0x229fa6(0xe5),_0x229fa6(0x1b3),_0x229fa6(0xb6),_0x229fa6(0x17e),_0x229fa6(0x1bc),'style',_0x229fa6(0x17c),_0x229fa6(0x186),_0x229fa6(0x14e),'button','blur','name',_0x229fa6(0xb4),_0x229fa6(0xab),_0x229fa6(0x1ac),_0x229fa6(0x1dd),_0x229fa6(0x183),_0x229fa6(0x16e),_0x229fa6(0x10b),_0x229fa6(0x161),_0x229fa6(0x1b2),_0x229fa6(0x1df),'moveTo',_0x229fa6(0xd1),_0x229fa6(0xe9),'globalAlpha','3000',_0x229fa6(0x19c),_0x229fa6(0x111),'target','jpg',_0x229fa6(0x184),_0x229fa6(0x141),'.section-content','touchstart',_0x229fa6(0x189),_0x229fa6(0x1a9),_0x229fa6(0x1ec),'pointerId',_0x229fa6(0xb0),_0x229fa6(0xf0),_0x229fa6(0x143),_0x229fa6(0xcb),_0x229fa6(0x1ea),_0x229fa6(0xb8),_0x229fa6(0xca),_0x229fa6(0x1b5),'oninput',_0x229fa6(0x1cd),_0x229fa6(0x124),_0x229fa6(0x1d1),_0x229fa6(0x1af),_0x229fa6(0x175),_0x229fa6(0x185),'src',_0x229fa6(0x1f1),_0x229fa6(0xd8),'alphaValue',_0x229fa6(0x1a8),_0x229fa6(0x1c6),'#newProjOkBtn',_0x229fa6(0x1d3),'beforeunload',_0x229fa6(0xbc),_0x229fa6(0xdd),_0x229fa6(0x1f3),'objectStore',_0x229fa6(0x128),'nezumi-standalone','insertBefore','palette-color',_0x229fa6(0x1b7),_0x229fa6(0x107),_0x229fa6(0x125),_0x229fa6(0xfb),'stroke',_0x229fa6(0x12d),'changedTouches',_0x229fa6(0x19b),_0x229fa6(0x163),'palette-penMode',_0x229fa6(0x1a4),_0x229fa6(0x10c),'9UjjHrQ',_0x229fa6(0x130),_0x229fa6(0x1f8),_0x229fa6(0xec),_0x229fa6(0x10a),_0x229fa6(0x148),_0x229fa6(0x112),_0x229fa6(0x101),_0x229fa6(0xdf)];return a0_0x243d=function(){return _0x3f87b8;},a0_0x243d();}function drawDotTouch(_0xa57c73,_0xeb9e0f){const _0x189a95=a0_0x56c5,_0x389f19=a0_0x5049d9,_0xcccecd=a0_0x38aafa;let _0x1b4ab0=getCurrentProject(),_0x9b560c=getCurrentFrame();if(_0xa57c73<0x0||_0xeb9e0f<0x0||_0xa57c73>=_0x1b4ab0[_0xcccecd(0x1b8)]||_0xeb9e0f>=_0x1b4ab0[_0xcccecd(0x27c)])return;let _0x5a4bec=_0x9b560c[_0xcccecd(0x262)][_0x9b560c[_0xcccecd(0x1b5)]][_0x189a95(0xee)]('2d');if(currentTool==='eraser'||currentColor==='transparent'||currentColor===_0xcccecd(0x25c)||currentAlpha===0x0)drawPenShape(_0x5a4bec,_0xa57c73,_0xeb9e0f,_0xcccecd(0x25c),!![]);else{let _0x4c8cf9=hexToRgba(currentColor,currentAlpha);_0x5a4bec[_0xcccecd(0x1fe)](),_0x5a4bec[_0xcccecd(0x2a0)]=_0x4c8cf9[0x3]/0xff,drawPenShape(_0x5a4bec,_0xa57c73,_0xeb9e0f,_0x389f19(0x12a)+_0x4c8cf9[0x0]+','+_0x4c8cf9[0x1]+','+_0x4c8cf9[0x2]+','+_0x4c8cf9[0x3]/0xff+')',![]),_0x5a4bec['restore']();}redrawAll();}function applyTheme(_0x3a9b31){const _0x30f842=a0_0x5049d9,_0x2e0c49=a0_0x38aafa;document[_0x2e0c49(0x199)][_0x2e0c49(0x2b4)](_0x2e0c49(0x206),_0x3a9b31);const _0x2db2e2=document[_0x2e0c49(0x275)](_0x2e0c49(0x189));_0x2db2e2&&(_0x2db2e2[_0x30f842(0x154)]=_0x3a9b31===_0x30f842(0x122)?'☀️':'🌙',_0x2db2e2[_0x2e0c49(0x2b4)](_0x2e0c49(0x2a9),_0x3a9b31===_0x30f842(0x122)),_0x2db2e2[_0x30f842(0x124)]=_0x3a9b31===_0x2e0c49(0x2ee)?_0x30f842(0x1ee):_0x2e0c49(0x1d0)),localStorage[_0x2e0c49(0x1fc)](_0x2e0c49(0x1a4),_0x3a9b31);}function toggleTheme(){const _0x1660b8=a0_0x5049d9,_0x53f410=a0_0x38aafa;applyTheme(document[_0x1660b8(0x15e)][_0x1660b8(0xe2)](_0x53f410(0x206))===_0x53f410(0x2ee)?_0x53f410(0x21b):_0x53f410(0x2ee));}(function initTheme(){const _0x426ef0=a0_0x56c5,_0x40c148=a0_0x5049d9,_0x482301=a0_0x38aafa,_0x517e90=localStorage[_0x482301(0x1d5)](_0x482301(0x1a4))||(window[_0x40c148(0xe3)]&&window[_0x482301(0x2af)](_0x482301(0x208))[_0x426ef0(0xd9)]?_0x40c148(0x122):_0x482301(0x21b));applyTheme(_0x517e90),document[_0x482301(0x21d)](_0x482301(0x293),()=>{const _0x219a80=_0x426ef0,_0x3da585=_0x482301,_0x5a9c34=document[_0x3da585(0x275)](_0x3da585(0x189));_0x5a9c34&&(_0x5a9c34[_0x3da585(0x21d)](_0x219a80(0xab),toggleTheme),_0x5a9c34[_0x3da585(0x21d)](_0x3da585(0x1cc),_0x5d0748=>{const _0x38804a=_0x3da585;(_0x5d0748[_0x38804a(0x2c5)]===_0x38804a(0x276)||_0x5d0748[_0x38804a(0x2c5)]==='\x20')&&(_0x5d0748[_0x38804a(0x1ce)](),toggleTheme());}));});}(),window[a0_0x521960(0x14d)]=()=>{const _0x17423d=a0_0x521960,_0x3370ca=a0_0x5049d9,_0x402e35=a0_0x38aafa;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x3370ca(0x238)),loadPaletteFromDB()[_0x402e35(0x17f)](()=>createPalette()),document[_0x17423d(0x182)](_0x17423d(0x191))[_0x402e35(0x24e)]=penSize,document[_0x402e35(0x275)](_0x3370ca(0xf4))[_0x402e35(0x24e)]=penMode;const _0x54d0d1=document[_0x402e35(0x275)](_0x402e35(0x229)),_0x496689=document[_0x402e35(0x275)](_0x402e35(0x205));_0x54d0d1&&_0x496689&&(_0x54d0d1[_0x3370ca(0x12e)]=animationDelay,_0x496689[_0x402e35(0x24e)]=animationDelay,_0x54d0d1[_0x402e35(0x28a)]=_0x1b3f73=>{const _0x2b5fd8=_0x3370ca,_0x524ed0=_0x402e35;_0x496689[_0x2b5fd8(0x12e)]=_0x1b3f73[_0x524ed0(0x2e5)][_0x524ed0(0x24e)],setAnimationDelay(_0x1b3f73[_0x524ed0(0x2e5)][_0x524ed0(0x24e)]);},_0x496689[_0x402e35(0x222)]=_0x5ac5a4=>{const _0x4dc855=_0x17423d,_0x43065f=_0x3370ca,_0x477feb=_0x402e35;let _0x4b64b4=Math[_0x477feb(0x2c3)](0xa,Math[_0x43065f(0x18d)](0x1388,parseInt(_0x5ac5a4[_0x477feb(0x2e5)][_0x4dc855(0x149)])||animationDelay));_0x54d0d1[_0x477feb(0x24e)]=_0x4b64b4,_0x496689[_0x43065f(0x12e)]=_0x4b64b4,setAnimationDelay(_0x4b64b4);}),canvas[_0x402e35(0x239)]=handleMouseMove,canvas[_0x402e35(0x238)]=handleMouseUp,canvas[_0x402e35(0x1b7)]=handleMouseUp,canvas[_0x402e35(0x21a)]=handleTouchStart,canvas[_0x402e35(0x267)]=handleTouchMove,canvas[_0x402e35(0x212)]=handleTouchEnd,canvas[_0x402e35(0x2ac)]=handleTouchEnd,canvas[_0x402e35(0x21d)](_0x3370ca(0x1d8),handleTouchStart,{'passive':![]}),canvas[_0x402e35(0x21d)](_0x402e35(0x28f),handleTouchMove,{'passive':![]}),canvas[_0x3370ca(0x1a3)](_0x402e35(0x1e1),handleTouchEnd,{'passive':![]}),canvas[_0x402e35(0x21d)](_0x402e35(0x1b6),handleTouchEnd,{'passive':![]}),idbGet(_0x402e35(0x263))&&loadProjectFromIDB();});function drawGrid(_0x1be8ee,_0x1c2e23){const _0x3fa02c=a0_0x521960,_0x1149c6=a0_0x5049d9,_0x4def09=a0_0x38aafa;ctx[_0x4def09(0x1fe)](),ctx[_0x4def09(0x2b5)]=_0x4def09(0x26b);for(let _0x20f733=0x0;_0x20f733<=_0x1be8ee;_0x20f733++){ctx[_0x4def09(0x2eb)](),ctx[_0x4def09(0x29e)](_0x20f733*cellSize,0x0),ctx[_0x3fa02c(0xae)](_0x20f733*cellSize,_0x1c2e23*cellSize),ctx[_0x1149c6(0x201)]();}for(let _0xf3c9ca=0x0;_0xf3c9ca<=_0x1c2e23;_0xf3c9ca++){ctx[_0x3fa02c(0x108)](),ctx[_0x4def09(0x29e)](0x0,_0xf3c9ca*cellSize),ctx[_0x1149c6(0xf3)](_0x1be8ee*cellSize,_0xf3c9ca*cellSize),ctx[_0x4def09(0x2d9)]();}ctx[_0x4def09(0x2df)]();}function redrawAll(){const _0x329c20=a0_0x521960,_0x4ea48e=a0_0x5049d9,_0x52c20a=a0_0x38aafa;let _0x5db55d=getCurrentProject(),_0x262d64=getCurrentFrame();canvas[_0x52c20a(0x1b8)]=_0x5db55d[_0x52c20a(0x1b8)]*cellSize,canvas[_0x52c20a(0x27c)]=_0x5db55d[_0x52c20a(0x27c)]*cellSize,ctx[_0x4ea48e(0x172)](0x0,0x0,canvas[_0x52c20a(0x1b8)],canvas[_0x329c20(0x1ff)]);for(let _0x544ad3=0x0;_0x544ad3<_0x262d64[_0x52c20a(0x262)][_0x4ea48e(0xf5)];_0x544ad3++){ctx[_0x4ea48e(0x230)](_0x262d64[_0x52c20a(0x262)][_0x544ad3],0x0,0x0);}drawGrid(_0x5db55d[_0x4ea48e(0x190)],_0x5db55d[_0x52c20a(0x27c)]),wrapper&&(wrapper[_0x52c20a(0x1f8)][_0x4ea48e(0x190)]=_0x52c20a(0x2d3),wrapper[_0x52c20a(0x1f8)][_0x52c20a(0x27c)]=_0x52c20a(0x1ae));}function saveHistory(){const _0xe41c5b=a0_0x521960,_0x56af34=a0_0x5049d9,_0x2c01ab=a0_0x38aafa;let _0x1635d9=getCurrentFrame(),_0x4fd845=_0x1635d9[_0x2c01ab(0x29c)][_0x1635d9[_0x2c01ab(0x1b5)]];_0x4fd845[_0x56af34(0x19e)](_0x1635d9[_0x2c01ab(0x262)][_0x1635d9[_0x2c01ab(0x1b5)]][_0xe41c5b(0xd5)]());if(_0x4fd845[_0x2c01ab(0x1c4)]>0x32)_0x4fd845[_0x2c01ab(0x1d7)]();_0x1635d9[_0x2c01ab(0x2d0)][_0x1635d9[_0x56af34(0x215)]]=[];}function undo(){const _0x3cc4ac=a0_0x521960,_0x4fab26=a0_0x5049d9,_0x188fc0=a0_0x38aafa;let _0x28b4f4=getCurrentFrame(),_0x30ff61=_0x28b4f4[_0x188fc0(0x29c)][_0x28b4f4[_0x4fab26(0x215)]],_0x1f605a=_0x28b4f4[_0x188fc0(0x2d0)][_0x28b4f4[_0x188fc0(0x1b5)]];if(!_0x30ff61||_0x30ff61[_0x188fc0(0x1c4)]<0x2)return;_0x1f605a[_0x4fab26(0x19e)](_0x30ff61[_0x3cc4ac(0xbd)]());let _0x4474fc=new Image();_0x4474fc[_0x188fc0(0x185)]=()=>{const _0x2376ef=_0x4fab26,_0x1f9911=_0x188fc0;let _0x5002a6=_0x28b4f4[_0x1f9911(0x262)][_0x28b4f4[_0x1f9911(0x1b5)]][_0x1f9911(0x2c6)]('2d');_0x5002a6[_0x1f9911(0x22d)](0x0,0x0,_0x28b4f4[_0x1f9911(0x262)][_0x28b4f4[_0x2376ef(0x215)]][_0x1f9911(0x1b8)],_0x28b4f4[_0x1f9911(0x262)][_0x28b4f4[_0x1f9911(0x1b5)]][_0x1f9911(0x27c)]),_0x5002a6[_0x2376ef(0x230)](_0x4474fc,0x0,0x0),redrawAll();},_0x4474fc[_0x4fab26(0x1ec)]=_0x30ff61[_0x30ff61[_0x3cc4ac(0xd7)]-0x1];}function redo(){const _0x4adfa9=a0_0x5049d9,_0x34e8f9=a0_0x38aafa;let _0x112c9a=getCurrentFrame(),_0x2ee969=_0x112c9a[_0x4adfa9(0x195)][_0x112c9a[_0x4adfa9(0x215)]],_0x3d6d4e=_0x112c9a[_0x4adfa9(0x179)][_0x112c9a[_0x4adfa9(0x215)]];if(!_0x3d6d4e||_0x3d6d4e[_0x4adfa9(0xf5)]===0x0)return;let _0x318cf5=_0x3d6d4e[_0x34e8f9(0x1ea)]();_0x2ee969[_0x4adfa9(0x19e)](_0x318cf5);let _0x3cbb8c=new Image();_0x3cbb8c[_0x34e8f9(0x185)]=()=>{const _0x563241=a0_0x56c5,_0x285d18=_0x4adfa9,_0x195670=_0x34e8f9;let _0x1089f3=_0x112c9a[_0x285d18(0x13d)][_0x112c9a[_0x195670(0x1b5)]][_0x195670(0x2c6)]('2d');_0x1089f3[_0x195670(0x22d)](0x0,0x0,_0x112c9a[_0x195670(0x262)][_0x112c9a[_0x195670(0x1b5)]][_0x563241(0x13a)],_0x112c9a[_0x285d18(0x13d)][_0x112c9a[_0x285d18(0x215)]][_0x195670(0x27c)]),_0x1089f3[_0x195670(0x1ff)](_0x3cbb8c,0x0,0x0),redrawAll();},_0x3cbb8c[_0x34e8f9(0x1b3)]=_0x318cf5;}function exportImage(_0x5de6ea){const _0x342f66=a0_0x521960,_0xd4b829=a0_0x5049d9,_0x59e7c0=a0_0x38aafa;let _0x40f0e2=getCurrentProject(),_0x3c4384=_0x40f0e2[_0x59e7c0(0x2b3)],_0x4dc8ee=_0x5de6ea===_0x59e7c0(0x248)||_0x5de6ea===_0x59e7c0(0x242)?_0x59e7c0(0x18a):_0x59e7c0(0x203)+_0x5de6ea,_0x108a34=_0x3c4384[_0x59e7c0(0x1c4)]>0x1,_0x31201b=(_0x40f0e2[_0x59e7c0(0x2e6)]||_0x59e7c0(0x200))[_0x59e7c0(0x27d)](/[\\/:*?"<>|]/g,'_');if(!_0x108a34){let _0x77a837=document[_0x59e7c0(0x1d6)](_0x59e7c0(0x19d));_0x77a837[_0xd4b829(0x190)]=_0x40f0e2[_0x59e7c0(0x1b8)]*cellSize,_0x77a837[_0x342f66(0x1ff)]=_0x40f0e2[_0x59e7c0(0x27c)]*cellSize;let _0x3844b0=_0x77a837[_0xd4b829(0x162)]('2d'),_0x2316a1=getCurrentFrame();for(let _0x34b46b=0x0;_0x34b46b<_0x2316a1[_0x59e7c0(0x262)][_0x59e7c0(0x1c4)];_0x34b46b++){_0x3844b0[_0xd4b829(0x230)](_0x2316a1[_0x59e7c0(0x262)][_0x34b46b],0x0,0x0);}let _0x283eb7=document[_0x59e7c0(0x1d6)]('a');_0x283eb7[_0x59e7c0(0x215)]=_0x31201b+'.'+_0x5de6ea,_0x5de6ea===_0x59e7c0(0x248)||_0x5de6ea===_0xd4b829(0x1dd)?_0x283eb7[_0xd4b829(0x1a4)]=_0x77a837[_0x59e7c0(0x1df)](_0x4dc8ee,0.92):_0x283eb7[_0x59e7c0(0x1c8)]=_0x77a837[_0x59e7c0(0x1df)](_0x4dc8ee),_0x283eb7[_0xd4b829(0x1c3)]();}else{if(_0x5de6ea===_0x59e7c0(0x1bf)&&typeof window[_0x59e7c0(0x2da)]!==_0x59e7c0(0x225))exportWebpAnimation(_0x3c4384,_0x40f0e2[_0x59e7c0(0x1b8)]*cellSize,_0x40f0e2[_0x59e7c0(0x27c)]*cellSize,_0x31201b);else for(let _0x5ee022=0x0;_0x5ee022<_0x3c4384[_0x59e7c0(0x1c4)];_0x5ee022++){let _0x390222=document[_0x59e7c0(0x1d6)](_0x59e7c0(0x19d));_0x390222[_0x59e7c0(0x1b8)]=_0x40f0e2[_0x59e7c0(0x1b8)]*cellSize,_0x390222[_0x59e7c0(0x27c)]=_0x40f0e2[_0x59e7c0(0x27c)]*cellSize;let _0x2bd08a=_0x390222[_0xd4b829(0x162)]('2d'),_0x13e510=_0x3c4384[_0x5ee022];for(let _0x3b3d26=0x0;_0x3b3d26<_0x13e510[_0x59e7c0(0x262)][_0x59e7c0(0x1c4)];_0x3b3d26++){_0x2bd08a[_0x59e7c0(0x1ff)](_0x13e510[_0xd4b829(0x13d)][_0x3b3d26],0x0,0x0);}let _0x3885c2=document[_0x59e7c0(0x1d6)]('a');_0x3885c2[_0x59e7c0(0x215)]=_0x31201b+'-f'+(_0x5ee022+0x1)+'.'+_0x5de6ea,_0x5de6ea===_0x59e7c0(0x248)||_0x5de6ea===_0x59e7c0(0x242)?_0x3885c2[_0xd4b829(0x1a4)]=_0x390222[_0x59e7c0(0x1df)](_0x4dc8ee,0.92):_0x3885c2[_0x59e7c0(0x1c8)]=_0x390222[_0xd4b829(0x1b5)](_0x4dc8ee),setTimeout(()=>_0x3885c2[_0x59e7c0(0x2ed)](),_0x5ee022*0x64);}}}async function exportWebpAnimation(_0x210c3e,_0x65ffb4,_0x33517e,_0x30fd28=a0_0x38aafa(0x21f)){const _0x4401f1=a0_0x521960,_0xb23f87=a0_0x5049d9,_0x1c9e11=a0_0x38aafa;if(!window[_0x1c9e11(0x2da)]||!window[_0x1c9e11(0x194)]){alert(_0x1c9e11(0x27b));return;}const _0x2636a1=[],_0x5ec501=new VideoEncoder({'output':_0x3a1d7d=>_0x2636a1[_0x1c9e11(0x278)](_0x3a1d7d),'error':_0x5775d4=>console[_0xb23f87(0x1e8)](_0x5775d4)});_0x5ec501[_0x1c9e11(0x2a8)]({'codec':_0x1c9e11(0x2d2),'width':_0x65ffb4,'height':_0x33517e,'framerate':0x5});for(let _0xf9e77a=0x0;_0xf9e77a<_0x210c3e[_0xb23f87(0xf5)];_0xf9e77a++){let _0x23bfb6=document[_0x1c9e11(0x1d6)](_0x1c9e11(0x19d));_0x23bfb6[_0x1c9e11(0x1b8)]=_0x65ffb4,_0x23bfb6[_0x1c9e11(0x27c)]=_0x33517e;let _0x6bf1ce=_0x23bfb6[_0x1c9e11(0x2c6)]('2d'),_0xa1dbe6=_0x210c3e[_0xf9e77a];for(let _0x439aab=0x0;_0x439aab<_0xa1dbe6[_0x1c9e11(0x262)][_0xb23f87(0xf5)];_0x439aab++){_0x6bf1ce[_0x1c9e11(0x1ff)](_0xa1dbe6[_0x1c9e11(0x262)][_0x439aab],0x0,0x0);}let _0x158c4c=await createImageBitmap(_0x23bfb6);_0x5ec501[_0x1c9e11(0x1e2)](_0x158c4c,{'keyFrame':!![],'duration':0xc8}),_0x158c4c[_0x1c9e11(0x2e3)]();}await _0x5ec501[_0x1c9e11(0x209)](),_0x5ec501[_0x1c9e11(0x2e3)]();const _0x498a7b=new Blob(_0x2636a1[_0x1c9e11(0x294)](_0xb7c3e5=>_0xb7c3e5[_0x1c9e11(0x2c8)]?_0xb7c3e5:_0xb7c3e5[_0x1c9e11(0x261)]),{'type':_0x4401f1(0x193)}),_0x4deb7d=document[_0x1c9e11(0x1d6)]('a');_0x4deb7d[_0x1c9e11(0x215)]=_0x30fd28+_0x1c9e11(0x257),_0x4deb7d[_0x1c9e11(0x1c8)]=URL[_0x1c9e11(0x201)](_0x498a7b),_0x4deb7d[_0x1c9e11(0x2ed)]();}function exportGif(){const _0x310781=a0_0x38aafa;let _0x18e903=getCurrentProject(),_0x29cfa8=_0x18e903[_0x310781(0x2b3)],_0xd94930=_0x18e903[_0x310781(0x1b8)]*cellSize,_0x1eac54=_0x18e903[_0x310781(0x27c)]*cellSize;const _0x50e586=_0x29cfa8[_0x310781(0x294)](_0x3ed60b=>{const _0x35a207=a0_0xce2f,_0x1d6fbf=_0x310781;let _0x14a3b8=document[_0x35a207(0x1f6)]('canvas');_0x14a3b8[_0x1d6fbf(0x1b8)]=_0xd94930,_0x14a3b8[_0x1d6fbf(0x27c)]=_0x1eac54;let _0x29a57a=_0x14a3b8[_0x35a207(0x162)]('2d');for(let _0x25237c=0x0;_0x25237c<_0x3ed60b[_0x1d6fbf(0x262)][_0x35a207(0xf5)];_0x25237c++){_0x29a57a[_0x1d6fbf(0x1ff)](_0x3ed60b[_0x1d6fbf(0x262)][_0x25237c],0x0,0x0);}return _0x14a3b8[_0x1d6fbf(0x1df)](_0x1d6fbf(0x1fa));});Promise[_0x310781(0x25a)](_0x50e586[_0x310781(0x294)](_0x597115=>{return new Promise(_0x228e3f=>{const _0x29c7d2=a0_0x1925,_0x3cb689=new Image();_0x3cb689[_0x29c7d2(0x1b3)]=_0x597115,_0x3cb689[_0x29c7d2(0x185)]=()=>_0x228e3f(_0x3cb689);});}))[_0x310781(0x17f)](_0x562b09=>{const _0x346901=a0_0xce2f,_0x4e85bc=_0x310781,_0x30ae53=_0x562b09[_0x4e85bc(0x268)](_0x54ae68=>_0x54ae68[_0x4e85bc(0x1b8)]>0x0&&_0x54ae68[_0x4e85bc(0x27c)]>0x0);if(_0x30ae53[_0x346901(0xf5)]===0x0){alert(_0x4e85bc(0x1fb));return;}const _0x583dbd=(_0x18e903[_0x4e85bc(0x2e6)]||_0x4e85bc(0x21f))[_0x4e85bc(0x27d)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x30ae53,animationDelay,_0x583dbd+_0x4e85bc(0x2d1));});}function exportApng(){const _0x42b71e=a0_0x5049d9,_0x30f969=a0_0x38aafa;let _0x1a9e3=getCurrentProject(),_0x16f12b=_0x1a9e3[_0x30f969(0x2b3)],_0x509a0a=_0x1a9e3[_0x30f969(0x1b8)]*cellSize,_0x440e1d=_0x1a9e3['height']*cellSize;const _0x7332f2=_0x16f12b[_0x30f969(0x294)](_0x3d3026=>{const _0xdfa9a0=a0_0xce2f,_0x54e565=_0x30f969;let _0x2b6f9b=document[_0x54e565(0x1d6)](_0x54e565(0x19d));_0x2b6f9b[_0xdfa9a0(0x190)]=_0x509a0a,_0x2b6f9b[_0x54e565(0x27c)]=_0x440e1d;let _0x408941=_0x2b6f9b[_0xdfa9a0(0x162)]('2d');for(let _0x472bad=0x0;_0x472bad<_0x3d3026[_0x54e565(0x262)][_0x54e565(0x1c4)];_0x472bad++){_0x408941[_0xdfa9a0(0x230)](_0x3d3026[_0x54e565(0x262)][_0x472bad],0x0,0x0);}let _0x4c0a6f=new Image();return _0x4c0a6f[_0x54e565(0x1b3)]=_0x2b6f9b[_0xdfa9a0(0x1b5)](_0x54e565(0x1fa)),_0x4c0a6f;}),_0x1e7166=(_0x1a9e3[_0x42b71e(0x1c1)]||_0x30f969(0x21f))[_0x30f969(0x27d)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x7332f2,_0x509a0a,_0x440e1d,animationDelay,_0x1e7166+_0x30f969(0x274));}const dbName=a0_0x38aafa(0x292),storeName=a0_0x38aafa(0x22e);function openDB(){return new Promise((_0x1f1e14,_0x26e747)=>{const _0x367c9c=a0_0x56c5,_0x19049d=a0_0xce2f,_0x1931f0=a0_0x1925,_0x392ad1=indexedDB[_0x19049d(0x144)](dbName,0x1);_0x392ad1[_0x1931f0(0x273)]=()=>{const _0x59e8ff=_0x19049d;_0x392ad1[_0x59e8ff(0x219)]['createObjectStore'](storeName);},_0x392ad1[_0x367c9c(0xcc)]=()=>_0x1f1e14(_0x392ad1[_0x19049d(0x219)]),_0x392ad1[_0x1931f0(0x1c5)]=()=>_0x26e747(_0x392ad1[_0x1931f0(0x181)]);});}async function idbSet(_0x1546a6,_0x2c2852){const _0x4f13b1=await openDB();return new Promise((_0x447213,_0x44c22d)=>{const _0x40ba59=a0_0xce2f,_0x4cb9df=a0_0x1925,_0x16531a=_0x4f13b1[_0x4cb9df(0x27f)](storeName,_0x4cb9df(0x259));_0x16531a[_0x4cb9df(0x226)](storeName)[_0x4cb9df(0x297)](_0x2c2852,_0x1546a6),_0x16531a[_0x4cb9df(0x2a3)]=()=>_0x447213(),_0x16531a[_0x40ba59(0x149)]=()=>_0x44c22d(_0x16531a[_0x40ba59(0x1e8)]);});}async function idbGet(_0x1fe2ca){const _0xe8d598=await openDB();return new Promise((_0x5eca89,_0x5280d1)=>{const _0xa90b6=a0_0xce2f,_0x3a2178=a0_0x1925,_0x4e7d99=_0xe8d598[_0x3a2178(0x27f)](storeName,_0x3a2178(0x223)),_0x26a911=_0x4e7d99[_0x3a2178(0x226)](storeName)[_0x3a2178(0x2b8)](_0x1fe2ca);_0x26a911[_0x3a2178(0x260)]=()=>_0x5eca89(_0x26a911[_0xa90b6(0x219)]),_0x26a911[_0x3a2178(0x1c5)]=()=>_0x5280d1(_0x26a911[_0x3a2178(0x181)]);});}async function idbDelete(_0x57d647){const _0x3b90f5=await openDB();return new Promise((_0x4f63f2,_0x597355)=>{const _0x52074e=a0_0x56c5,_0x20dc3e=a0_0xce2f,_0x4049d7=a0_0x1925,_0x4170c6=_0x3b90f5[_0x20dc3e(0x13f)](storeName,_0x20dc3e(0x130));_0x4170c6[_0x4049d7(0x226)](storeName)[_0x52074e(0x109)](_0x57d647),_0x4170c6[_0x4049d7(0x2a3)]=()=>_0x4f63f2(),_0x4170c6[_0x4049d7(0x1c5)]=()=>_0x597355(_0x4170c6[_0x20dc3e(0x1e8)]);});}async function idbClear(){const _0x446801=await openDB();return new Promise((_0x40268d,_0x4f1564)=>{const _0x4de6e3=a0_0x56c5,_0x593d90=a0_0xce2f,_0x4f450e=a0_0x1925,_0x1c3aae=_0x446801[_0x4f450e(0x27f)](storeName,_0x4f450e(0x259));_0x1c3aae[_0x4f450e(0x226)](storeName)[_0x4f450e(0x1e0)](),_0x1c3aae[_0x593d90(0x220)]=()=>_0x40268d(),_0x1c3aae[_0x4f450e(0x1c5)]=()=>_0x4f1564(_0x1c3aae[_0x4de6e3(0x1d1)]);});}function saveProjectFile(){const _0x22f250=a0_0x521960,_0x255548=a0_0x5049d9,_0x500ce4=a0_0x38aafa,_0x5a2d80={'projects':projects[_0x500ce4(0x294)](_0x3157e5=>({'width':_0x3157e5[_0x500ce4(0x1b8)],'height':_0x3157e5[_0x500ce4(0x27c)],'name':_0x3157e5[_0x500ce4(0x2e6)]||'','activeFrame':_0x3157e5[_0x500ce4(0x2a5)],'frames':_0x3157e5[_0x500ce4(0x2b3)][_0x500ce4(0x294)](_0x570b3f=>({'activeLayer':_0x570b3f[_0x500ce4(0x1b5)],'layers':_0x570b3f[_0x255548(0x13d)][_0x500ce4(0x294)](_0x27fbcf=>_0x27fbcf[_0x500ce4(0x1df)]())}))})),'activeProject':activeProject},_0x242d34=new Blob([JSON[_0x500ce4(0x1e5)](_0x5a2d80)],{'type':_0x500ce4(0x299)}),_0xec9261=document[_0x500ce4(0x1d6)]('a');_0xec9261[_0x22f250(0xf0)]=_0x255548(0x1d9),_0xec9261[_0x500ce4(0x1c8)]=URL[_0x500ce4(0x201)](_0x242d34),_0xec9261[_0x500ce4(0x2ed)]();}function a0_0x1925(_0x5515d7,_0xeefcac){_0x5515d7=_0x5515d7-0x17d;const _0x5aba10=a0_0x5ad1();let _0x58640e=_0x5aba10[_0x5515d7];return _0x58640e;}function saveProjectFile(){const _0x3d1465=a0_0x5049d9,_0x10b334=a0_0x38aafa,_0x7223aa={'projects':projects[_0x10b334(0x294)](_0x220add=>({'width':_0x220add[_0x3d1465(0x190)],'height':_0x220add[_0x10b334(0x27c)],'name':_0x220add[_0x10b334(0x2e6)]||'','activeFrame':_0x220add[_0x10b334(0x2a5)],'frames':_0x220add[_0x10b334(0x2b3)][_0x10b334(0x294)](_0x57a8c0=>({'activeLayer':_0x57a8c0[_0x10b334(0x1b5)],'layers':_0x57a8c0[_0x10b334(0x262)][_0x10b334(0x294)](_0xfdef3e=>_0xfdef3e[_0x10b334(0x1df)]())}))})),'activeProject':activeProject},_0x3591c7=new Blob([JSON[_0x10b334(0x1e5)](_0x7223aa)],{'type':_0x10b334(0x299)}),_0x2b0a6b=document[_0x10b334(0x1d6)]('a');_0x2b0a6b[_0x10b334(0x215)]=_0x10b334(0x2bf),_0x2b0a6b[_0x10b334(0x1c8)]=URL[_0x10b334(0x201)](_0x3591c7),_0x2b0a6b[_0x10b334(0x2ed)]();}async function saveProjectToIDB(){const _0x541307=a0_0x5049d9,_0x46e8b0=a0_0x38aafa,_0x6735be={'projects':projects[_0x541307(0x18f)](_0x2ff442=>({'width':_0x2ff442[_0x46e8b0(0x1b8)],'height':_0x2ff442[_0x46e8b0(0x27c)],'name':_0x2ff442[_0x46e8b0(0x2e6)]||'','activeFrame':_0x2ff442[_0x46e8b0(0x2a5)],'frames':_0x2ff442[_0x46e8b0(0x2b3)][_0x46e8b0(0x294)](_0x28d307=>({'activeLayer':_0x28d307[_0x46e8b0(0x1b5)],'layers':_0x28d307[_0x46e8b0(0x262)][_0x541307(0x18f)](_0x194f9f=>_0x194f9f[_0x46e8b0(0x1df)]())}))})),'activeProject':activeProject};try{await idbSet(_0x541307(0x11b),_0x6735be),console[_0x541307(0x1a0)](_0x46e8b0(0x21c));}catch(_0x4c2956){console[_0x46e8b0(0x181)](_0x541307(0x133),_0x4c2956);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x38aafa(0x21d)](a0_0x38aafa(0x22c),_0x2a2871=>{saveProjectToIDB();});function loadProjectFile(_0x381fae){const _0x44552a=a0_0x5049d9,_0x41dd89=a0_0x38aafa,_0x3c6ad5=_0x381fae[_0x44552a(0x1d3)][_0x41dd89(0x23c)][0x0];if(!_0x3c6ad5)return;if(_0x3c6ad5[_0x41dd89(0x17d)]&&_0x3c6ad5[_0x41dd89(0x17d)][_0x41dd89(0x1a3)](_0x44552a(0xfd))){loadStandaloneFromFile(_0x3c6ad5)[_0x44552a(0xf1)](_0x6fffe5=>{const _0x2db571=_0x41dd89;alert(_0x2db571(0x283)+(_0x6fffe5[_0x2db571(0x2e6)]||'画像'));})[_0x41dd89(0x1c7)](_0x443133=>{const _0x30aeeb=_0x41dd89;console[_0x30aeeb(0x2c1)](_0x443133),alert(_0x30aeeb(0x2d4));});return;}const _0x22c0c1=new FileReader();_0x22c0c1[_0x41dd89(0x185)]=function(_0x4a4817){const _0xf6d3a0=_0x41dd89;try{const _0x4f67e6=JSON[_0xf6d3a0(0x288)](_0x4a4817[_0xf6d3a0(0x2e5)][_0xf6d3a0(0x192)]);projects=_0x4f67e6[_0xf6d3a0(0x24f)][_0xf6d3a0(0x294)]((_0x4b996f,_0x2c77b0)=>{const _0x2b70a8=a0_0xce2f,_0x58bf71=_0xf6d3a0;let _0x5b0b7c=createProject(_0x4b996f[_0x2b70a8(0x190)],_0x4b996f[_0x58bf71(0x27c)],_0x4b996f[_0x58bf71(0x2e6)]||'画像'+(_0x2c77b0+0x1));return _0x5b0b7c[_0x58bf71(0x2b3)]=_0x4b996f[_0x2b70a8(0x17f)][_0x58bf71(0x294)](_0x199da6=>{const _0x2deca5=a0_0x56c5,_0x181862=_0x2b70a8,_0xb0e82f=_0x58bf71;let _0xa4fb3f={'layers':[],'activeLayer':_0x199da6[_0xb0e82f(0x1b5)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x15808a=0x0;_0x15808a<_0x199da6[_0x181862(0x13d)][_0x181862(0xf5)];_0x15808a++){let _0x5d41f8=new Image();_0x5d41f8[_0xb0e82f(0x1b3)]=_0x199da6[_0xb0e82f(0x262)][_0x15808a];let _0x5d113c=document[_0xb0e82f(0x1d6)](_0xb0e82f(0x19d));_0x5d113c[_0xb0e82f(0x1b8)]=_0x4b996f[_0xb0e82f(0x1b8)]*cellSize,_0x5d113c[_0x2deca5(0x1ff)]=_0x4b996f[_0xb0e82f(0x27c)]*cellSize,_0x5d41f8[_0xb0e82f(0x185)]=()=>{const _0x19a50a=_0x2deca5,_0x5f4584=_0xb0e82f;let _0x587633=_0x5d113c[_0x5f4584(0x2c6)]('2d');_0x587633[_0x19a50a(0x151)](0x0,0x0,_0x5d113c[_0x5f4584(0x1b8)],_0x5d113c[_0x5f4584(0x27c)]),_0x587633[_0x5f4584(0x1ff)](_0x5d41f8,0x0,0x0);},_0x5d41f8[_0x2deca5(0x14d)](),_0xa4fb3f[_0xb0e82f(0x262)][_0xb0e82f(0x278)](_0x5d113c),_0xa4fb3f[_0x181862(0x195)][_0xb0e82f(0x278)]([]),_0xa4fb3f[_0xb0e82f(0x2d0)][_0xb0e82f(0x278)]([]);}return _0xa4fb3f;}),_0x5b0b7c[_0x58bf71(0x2a5)]=_0x4b996f[_0x2b70a8(0x12c)],_0x5b0b7c[_0x2b70a8(0x1c1)]=_0x4b996f[_0x58bf71(0x2e6)]||'画像'+(_0x2c77b0+0x1),_0x5b0b7c;}),activeProject=_0x4f67e6[_0xf6d3a0(0x23d)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x1affb2){alert(_0xf6d3a0(0x211));}},_0x22c0c1[_0x44552a(0x197)](_0x3c6ad5);}async function loadProjectFromIDB(){const _0x423260=a0_0x521960,_0x43dc4e=a0_0x5049d9,_0x3a166b=a0_0x38aafa;try{const _0x6c9844=await idbGet(_0x3a166b(0x2e9));if(!_0x6c9844)return;projects=_0x6c9844[_0x423260(0x1b6)][_0x43dc4e(0x18f)]((_0x4d607e,_0x396020)=>{const _0x2faa98=_0x423260,_0x5a43f5=_0x3a166b;let _0x2d11e3=createProject(_0x4d607e[_0x5a43f5(0x1b8)],_0x4d607e[_0x5a43f5(0x27c)],_0x4d607e[_0x2faa98(0x179)]||'画像'+(_0x396020+0x1));return _0x2d11e3[_0x5a43f5(0x2b3)]=_0x4d607e[_0x5a43f5(0x2b3)][_0x5a43f5(0x294)](_0x16a6f8=>{const _0x58937c=a0_0xce2f,_0x16dab0=_0x5a43f5;let _0x3873ee={'layers':[],'activeLayer':_0x16a6f8[_0x58937c(0x215)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x43173b=0x0;_0x43173b<_0x16a6f8[_0x16dab0(0x262)][_0x16dab0(0x1c4)];_0x43173b++){let _0x137443=new Image();_0x137443[_0x16dab0(0x1b3)]=_0x16a6f8[_0x16dab0(0x262)][_0x43173b];let _0x2fe50=document[_0x58937c(0x1f6)](_0x16dab0(0x19d));_0x2fe50[_0x58937c(0x190)]=_0x4d607e['width']*cellSize,_0x2fe50[_0x16dab0(0x27c)]=_0x4d607e[_0x16dab0(0x27c)]*cellSize,_0x137443[_0x16dab0(0x185)]=()=>{const _0x3137d5=_0x58937c,_0x559bfc=_0x16dab0;let _0x2bda0b=_0x2fe50[_0x3137d5(0x162)]('2d');_0x2bda0b[_0x559bfc(0x22d)](0x0,0x0,_0x2fe50[_0x559bfc(0x1b8)],_0x2fe50[_0x3137d5(0x13b)]),_0x2bda0b[_0x559bfc(0x1ff)](_0x137443,0x0,0x0);},_0x3873ee[_0x16dab0(0x262)][_0x16dab0(0x278)](_0x2fe50),_0x3873ee[_0x16dab0(0x29c)][_0x16dab0(0x278)]([]),_0x3873ee[_0x16dab0(0x2d0)][_0x16dab0(0x278)]([]);}return _0x3873ee;}),_0x2d11e3[_0x5a43f5(0x2a5)]=_0x4d607e[_0x5a43f5(0x2a5)],_0x2d11e3[_0x5a43f5(0x2e6)]=_0x4d607e['name']||'画像'+(_0x396020+0x1),_0x2d11e3;}),activeProject=_0x6c9844[_0x3a166b(0x23d)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool(_0x3a166b(0x182)),console['log'](_0x3a166b(0x282));}catch(_0x36f6fc){alert(_0x3a166b(0x2cd)),console[_0x43dc4e(0x1e8)](_0x36f6fc);}}function wait(_0x11e4a3){return new Promise(_0x738b5e=>setTimeout(_0x738b5e,_0x11e4a3));}function initCanvas(){const _0x25ddaf=a0_0x521960,_0x3d9625=a0_0x5049d9,_0x35e02b=a0_0x38aafa,_0x179c00=parseInt(0x10),_0x362ea6=parseInt(0x10);let _0x5a3c0a=getCurrentProject();_0x5a3c0a[_0x35e02b(0x1b8)]=_0x179c00,_0x5a3c0a[_0x35e02b(0x27c)]=_0x362ea6,canvas[_0x35e02b(0x1b8)]=_0x179c00*cellSize,canvas[_0x35e02b(0x27c)]=_0x362ea6*cellSize,_0x5a3c0a[_0x35e02b(0x262)]=[],_0x5a3c0a[_0x35e02b(0x29c)]=[],_0x5a3c0a[_0x35e02b(0x2d0)]=[];let _0x57c039=document[_0x35e02b(0x1d6)](_0x35e02b(0x19d));_0x57c039[_0x35e02b(0x1b8)]=_0x179c00*cellSize,_0x57c039[_0x35e02b(0x27c)]=_0x362ea6*cellSize,_0x5a3c0a[_0x35e02b(0x262)][_0x3d9625(0x19e)](_0x57c039),_0x5a3c0a[_0x35e02b(0x29c)][_0x35e02b(0x278)]([]),_0x5a3c0a[_0x35e02b(0x2d0)][_0x3d9625(0x19e)]([]),_0x5a3c0a[_0x35e02b(0x1b5)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x35e02b(0x1f5)]=null,canvas[_0x3d9625(0x1e1)]=null,canvas[_0x35e02b(0x238)]=null,canvas[_0x35e02b(0x1b7)]=null,canvas[_0x35e02b(0x21a)]=null,canvas[_0x35e02b(0x267)]=null,canvas[_0x35e02b(0x212)]=null,canvas[_0x35e02b(0x2ac)]=null,canvas[_0x35e02b(0x2a6)](_0x3d9625(0x1d8),handleTouchStart),canvas[_0x35e02b(0x2a6)](_0x35e02b(0x28f),handleTouchMove),canvas[_0x35e02b(0x2a6)](_0x35e02b(0x1e1),handleTouchEnd),canvas[_0x35e02b(0x2a6)](_0x35e02b(0x1b6),handleTouchEnd),canvas[_0x35e02b(0x1f5)]=handleMouseDown,canvas[_0x35e02b(0x239)]=handleMouseMove,canvas[_0x35e02b(0x238)]=handleMouseUp,canvas[_0x35e02b(0x1b7)]=handleMouseUp,canvas[_0x35e02b(0x21a)]=handleTouchStart,canvas[_0x35e02b(0x267)]=handleTouchMove,canvas[_0x25ddaf(0x107)]=handleTouchEnd,canvas[_0x35e02b(0x2ac)]=handleTouchEnd,canvas[_0x35e02b(0x21d)](_0x35e02b(0x1bb),handleTouchStart,{'passive':![]}),canvas[_0x35e02b(0x21d)](_0x3d9625(0x205),handleTouchMove,{'passive':![]}),canvas[_0x35e02b(0x21d)](_0x35e02b(0x1e1),handleTouchEnd,{'passive':![]}),canvas[_0x25ddaf(0x15e)](_0x35e02b(0x1b6),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x4deb40=a0_0x521960,_0x1c8b54=a0_0x5049d9,_0xe2e6d5=a0_0x38aafa,_0x1815e6=document[_0xe2e6d5(0x275)](_0xe2e6d5(0x230));if(!_0x1815e6)return;_0x1815e6[_0xe2e6d5(0x25f)]='',PALETTE_COLORS[_0xe2e6d5(0x1bd)]((_0x3175f9,_0x3e86a0)=>{const _0x2078e3=a0_0x56c5,_0x222aa4=a0_0xce2f,_0x18d447=_0xe2e6d5,_0x49d86e=document[_0x18d447(0x1d6)](_0x18d447(0x2a4));_0x49d86e[_0x222aa4(0x15c)]=_0x222aa4(0x1fc),_0x3175f9===_0x222aa4(0x1a5)||_0x3175f9===_0x18d447(0x25c)?(_0x49d86e[_0x18d447(0x1f8)][_0x18d447(0x2dc)]=_0x2078e3(0x137),_0x49d86e[_0x18d447(0x198)]='透明',_0x49d86e[_0x18d447(0x25f)]=_0x18d447(0x224)):(_0x49d86e[_0x18d447(0x1f8)][_0x18d447(0x2dc)]=_0x3175f9,_0x49d86e[_0x222aa4(0x124)]=_0x3175f9),_0x49d86e[_0x18d447(0x234)]=()=>{const _0x504382=_0x18d447;currentColor=_0x3175f9,_0x3175f9===_0x504382(0x1f3)||_0x3175f9===_0x504382(0x25c)?document[_0x504382(0x275)](_0x504382(0x1a0))[_0x504382(0x24e)]=_0x504382(0x1ba):document[_0x504382(0x275)](_0x504382(0x1a0))[_0x504382(0x24e)]=_0x3175f9,document[_0x504382(0x29b)](_0x504382(0x1e6))[_0x504382(0x1bd)](_0x26e56a=>_0x26e56a[_0x504382(0x22b)][_0x504382(0x187)](_0x504382(0x2dd))),_0x49d86e[_0x504382(0x22b)][_0x504382(0x1de)](_0x504382(0x2dd));};if(_0x3e86a0!==0x0){const _0x159690=document[_0x18d447(0x1d6)](_0x18d447(0x28e));_0x159690[_0x18d447(0x221)]='×',_0x159690[_0x18d447(0x252)]=_0x18d447(0x2c7),_0x159690[_0x18d447(0x198)]=_0x18d447(0x2e7),_0x159690[_0x18d447(0x234)]=_0x4148cb=>{const _0x3134a1=_0x18d447;_0x4148cb[_0x3134a1(0x214)](),PALETTE_COLORS[_0x3134a1(0x1c4)]>0x2&&(PALETTE_COLORS[_0x3134a1(0x2b7)](_0x3e86a0,0x1),createPalette());},_0x49d86e[_0x18d447(0x237)](_0x159690);}_0x1815e6[_0x18d447(0x237)](_0x49d86e);});const _0x526395=document[_0xe2e6d5(0x1d6)](_0xe2e6d5(0x2a4));_0x526395[_0x4deb40(0xc9)]=_0xe2e6d5(0x20b),_0x526395[_0xe2e6d5(0x198)]=_0xe2e6d5(0x2cc),_0x526395[_0xe2e6d5(0x25f)]='+',_0x526395[_0xe2e6d5(0x234)]=_0x4b25ae=>{const _0x4947fe=_0x4deb40,_0x4acfe2=a0_0xce2f,_0x46ce29=_0xe2e6d5;_0x4b25ae[_0x4acfe2(0x15a)]();const _0x1cfedf=document[_0x46ce29(0x1d6)](_0x46ce29(0x295));_0x1cfedf[_0x46ce29(0x17d)]=_0x46ce29(0x1ca),_0x1cfedf['style'][_0x46ce29(0x2f0)]=_0x46ce29(0x1b1);let _0x59c310=![];_0x1cfedf[_0x46ce29(0x28a)]=_0x286826=>{const _0x345628=a0_0x56c5,_0x2c1412=_0x4acfe2,_0xfd648b=_0x46ce29;if(!_0x59c310){PALETTE_COLORS['unshift'](_0x286826[_0xfd648b(0x2e5)][_0x345628(0x149)]);if(PALETTE_COLORS[_0x2c1412(0xf5)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0xfd648b(0x1f6)](0x0,0x18);savePaletteToDB(),createPalette(),_0x59c310=!![],_0x1cfedf[_0xfd648b(0x187)]();}},_0x1cfedf[_0x46ce29(0x21d)](_0x4acfe2(0x1c0),()=>{const _0x2d9a70=_0x46ce29;if(!_0x59c310)_0x1cfedf[_0x2d9a70(0x187)]();}),_0x1cfedf[_0x46ce29(0x21d)](_0x4947fe(0xab),_0xce0b60=>_0xce0b60[_0x4acfe2(0x15a)]()),document[_0x46ce29(0x1e8)][_0x46ce29(0x237)](_0x1cfedf),_0x1cfedf[_0x46ce29(0x2be)](),_0x1cfedf[_0x46ce29(0x2ed)]();},_0x1815e6[_0xe2e6d5(0x1d3)](_0x526395,_0x1815e6[_0x1c8b54(0x216)]);let _0x376b4e=document[_0x1c8b54(0x192)](_0x1c8b54(0x1e2));!_0x376b4e&&(_0x376b4e=document[_0x1c8b54(0x1f6)](_0xe2e6d5(0x2c9)),_0x376b4e['id']=_0xe2e6d5(0x25e),_0x376b4e[_0xe2e6d5(0x252)]='palette-toolbar',_0x1815e6[_0x1c8b54(0xfb)][_0xe2e6d5(0x237)](_0x376b4e)),_0x376b4e[_0x1c8b54(0x1ea)]=_0xe2e6d5(0x253)+(currentTool===_0xe2e6d5(0x182)?_0xe2e6d5(0x1e4):'')+_0xe2e6d5(0x2ad)+(currentTool===_0xe2e6d5(0x2e0)?_0xe2e6d5(0x1e4):'')+_0x1c8b54(0x168)+(currentTool===_0xe2e6d5(0x1a8)?_0xe2e6d5(0x1e4):'')+_0xe2e6d5(0x1d9)+(penSize==0x1?_0x1c8b54(0x213):'')+_0xe2e6d5(0x1dd)+(penSize==0x2?_0xe2e6d5(0x298):'')+_0xe2e6d5(0x18e)+(penSize==0x3?_0xe2e6d5(0x298):'')+_0x1c8b54(0x1a2)+(penSize==0x4?_0xe2e6d5(0x298):'')+_0x1c8b54(0x1ac)+(penMode===_0x1c8b54(0x150)?_0xe2e6d5(0x298):'')+_0x4deb40(0x1e7)+(penMode===_0xe2e6d5(0x2ea)?_0x1c8b54(0x213):'')+_0x1c8b54(0x1ab)+Math[_0xe2e6d5(0x26f)](currentAlpha*0x64)+_0xe2e6d5(0x233)+Math[_0xe2e6d5(0x26f)](currentAlpha*0x64)+_0xe2e6d5(0x1eb),_0x376b4e[_0x1c8b54(0x126)](_0xe2e6d5(0x246))[_0xe2e6d5(0x222)]=_0x58e3cb=>setPenSize(_0x58e3cb[_0x1c8b54(0x1d3)][_0xe2e6d5(0x24e)]),_0x376b4e[_0xe2e6d5(0x2c0)](_0xe2e6d5(0x2b2))[_0xe2e6d5(0x222)]=_0x44f3d3=>setPenMode(_0x44f3d3[_0xe2e6d5(0x2e5)][_0xe2e6d5(0x24e)]),_0x376b4e[_0xe2e6d5(0x29b)](_0x4deb40(0x16b))[_0xe2e6d5(0x1bd)](_0x2fb262=>{const _0x2432ae=_0x4deb40,_0x24dd13=_0x1c8b54,_0x9f9dd3=_0xe2e6d5;_0x2fb262[_0x9f9dd3(0x234)]=()=>setTool(_0x2fb262[_0x2432ae(0xc1)][_0x24dd13(0xe7)]);}),_0x376b4e[_0xe2e6d5(0x2c0)](_0xe2e6d5(0x241))[_0xe2e6d5(0x28a)]=_0x48d4f7=>{const _0x1ba08e=_0x1c8b54,_0x509c35=_0xe2e6d5;setAlpha(_0x48d4f7[_0x509c35(0x2e5)][_0x1ba08e(0x12e)]),_0x376b4e[_0x509c35(0x2c0)](_0x509c35(0x227))[_0x509c35(0x221)]=_0x48d4f7[_0x509c35(0x2e5)][_0x509c35(0x24e)]+'%';let _0x5681cb=document[_0x1ba08e(0x192)](_0x509c35(0x1d8)),_0x11f770=document[_0x509c35(0x275)](_0x509c35(0x213));if(_0x5681cb)_0x5681cb[_0x1ba08e(0x12e)]=_0x48d4f7[_0x509c35(0x2e5)][_0x509c35(0x24e)];if(_0x11f770)_0x11f770[_0x509c35(0x221)]=_0x48d4f7[_0x1ba08e(0x1d3)][_0x509c35(0x24e)]+'%';};}function setAlpha(_0x52cd74){const _0x51b498=a0_0x5049d9,_0x1fc895=a0_0x38aafa;let _0x5991bb=Math[_0x1fc895(0x2c3)](0x0,Math[_0x1fc895(0x1b2)](0x64,parseInt(_0x52cd74,0xa)||0x0));currentAlpha=_0x5991bb/0x64;let _0x4fe562=document[_0x1fc895(0x275)](_0x1fc895(0x1d8)),_0x3dc49e=document[_0x1fc895(0x275)](_0x51b498(0x1ef));if(_0x4fe562)_0x4fe562[_0x51b498(0x12e)]=_0x5991bb;if(_0x3dc49e)_0x3dc49e[_0x1fc895(0x221)]=_0x5991bb+'%';let _0x5b3497=document[_0x1fc895(0x275)](_0x1fc895(0x247)),_0x19b29a=document[_0x1fc895(0x275)](_0x1fc895(0x245));if(_0x5b3497)_0x5b3497[_0x1fc895(0x24e)]=_0x5991bb;if(_0x19b29a)_0x19b29a[_0x1fc895(0x221)]=_0x5991bb+'%';}async function savePaletteToDB(){const _0x1a97d3=a0_0x5049d9,_0xcdecec=a0_0x38aafa;try{await idbSet(_0xcdecec(0x2e1),PALETTE_COLORS);}catch(_0x62f807){console[_0xcdecec(0x181)](_0x1a97d3(0x1a8),_0x62f807);}}async function loadPaletteFromDB(){const _0x251d8a=a0_0x38aafa;try{const _0x5ead3e=await idbGet(_0x251d8a(0x2e1));Array[_0x251d8a(0x19c)](_0x5ead3e)&&_0x5ead3e[_0x251d8a(0x1c4)]&&(PALETTE_COLORS=_0x5ead3e);}catch(_0x2a9f51){console[_0x251d8a(0x181)](_0x251d8a(0x195),_0x2a9f51);}}document[a0_0x5049d9(0x1a3)](a0_0x5049d9(0x113),()=>{const _0x433395=a0_0x5049d9,_0x2e1ada=a0_0x38aafa,_0x18a782=document[_0x433395(0x192)](_0x2e1ada(0x1a0));_0x18a782&&(_0x18a782[_0x2e1ada(0x28a)]=_0x54b673=>{const _0x3f659d=_0x2e1ada;currentColor=_0x54b673[_0x3f659d(0x2e5)][_0x3f659d(0x24e)],document[_0x3f659d(0x29b)](_0x3f659d(0x1e6))[_0x3f659d(0x1bd)](_0x46a320=>_0x46a320[_0x3f659d(0x22b)][_0x3f659d(0x187)](_0x3f659d(0x2dd)));});const _0x1c586a=document[_0x2e1ada(0x275)](_0x2e1ada(0x1d8)),_0x3ee9b0=document[_0x2e1ada(0x275)](_0x2e1ada(0x213));_0x1c586a&&_0x3ee9b0&&(_0x1c586a[_0x433395(0x1e5)]=_0x11adc0=>{const _0x426961=a0_0x56c5,_0x5e7704=_0x433395,_0x421a2b=_0x2e1ada;setAlpha(_0x11adc0[_0x421a2b(0x2e5)][_0x421a2b(0x24e)]),_0x3ee9b0[_0x421a2b(0x221)]=_0x11adc0[_0x421a2b(0x2e5)][_0x5e7704(0x12e)]+'%';let _0x4abbe4=document[_0x5e7704(0x192)](_0x421a2b(0x247)),_0x1e3ccd=document[_0x5e7704(0x192)](_0x421a2b(0x245));if(_0x4abbe4)_0x4abbe4[_0x426961(0x149)]=_0x11adc0[_0x421a2b(0x2e5)][_0x421a2b(0x24e)];if(_0x1e3ccd)_0x1e3ccd[_0x421a2b(0x221)]=_0x11adc0[_0x421a2b(0x2e5)][_0x5e7704(0x12e)]+'%';});});async function convertToGIF(_0x34ea07,_0x22b3b5=0xc8,_0x15964b=a0_0x38aafa(0x1d1)){const _0x24f4ae=a0_0x38aafa,_0x66ef76=new window[(_0x24f4ae(0x190))]({'workers':0x2,'quality':0xa,'workerScript':'lib/gif.worker.js'});_0x34ea07[_0x24f4ae(0x1bd)](_0xe99f8f=>_0x66ef76[_0x24f4ae(0x2a2)](_0xe99f8f,{'delay':_0x22b3b5})),_0x66ef76['on'](_0x24f4ae(0x235),_0x34f6e5=>{const _0x30c983=a0_0x56c5,_0xc96bc2=a0_0xce2f,_0x217bbc=_0x24f4ae,_0x1b1816=URL[_0xc96bc2(0x159)](_0x34f6e5),_0x32049d=document[_0x217bbc(0x1d6)]('a');_0x32049d[_0xc96bc2(0x1a4)]=_0x1b1816,_0x32049d[_0x30c983(0xf0)]=_0x15964b,document[_0x217bbc(0x1e8)][_0xc96bc2(0x1c2)](_0x32049d),_0x32049d[_0x217bbc(0x2ed)](),setTimeout(()=>{const _0x22aa0c=_0x217bbc;document[_0x22aa0c(0x1e8)][_0x22aa0c(0x1dc)](_0x32049d),URL[_0x22aa0c(0x255)](_0x1b1816);},0x3e8);}),_0x66ef76[_0x24f4ae(0x1c1)]();}function makeAPNGBlob(_0x2a9ab5,_0x1cdde0,_0xaa684c,_0x2eac21=0xc8){const _0x1db337=a0_0x5049d9,_0x53d3bf=a0_0x38aafa,_0x330d7f=[],_0x22773f=[],_0x14f5f1=document[_0x53d3bf(0x1d6)](_0x53d3bf(0x19d));_0x14f5f1[_0x1db337(0x190)]=_0x1cdde0,_0x14f5f1[_0x1db337(0x13b)]=_0xaa684c;const _0x42a492=_0x14f5f1[_0x53d3bf(0x2c6)]('2d');_0x2a9ab5[_0x53d3bf(0x1bd)](_0x1d9917=>{const _0x50fc64=_0x1db337,_0x795714=_0x53d3bf;_0x42a492[_0x795714(0x22d)](0x0,0x0,_0x1cdde0,_0xaa684c),_0x42a492[_0x50fc64(0x230)](_0x1d9917,0x0,0x0,_0x1cdde0,_0xaa684c);const _0x18ad89=_0x42a492[_0x795714(0x287)](0x0,0x0,_0x1cdde0,_0xaa684c)[_0x795714(0x261)][_0x50fc64(0x16d)];_0x330d7f[_0x50fc64(0x19e)](_0x18ad89),_0x22773f[_0x50fc64(0x19e)](_0x2eac21);});const _0x2ead4e=window[_0x53d3bf(0x21e)][_0x53d3bf(0x1e2)](_0x330d7f,_0x1cdde0,_0xaa684c,0x0,_0x22773f);return new Blob([_0x2ead4e],{'type':_0x53d3bf(0x18f)});}function convertToAPNG(_0x394675,_0x43b1af,_0x2add20,_0x363684=0xc8,_0x1eaa95=a0_0x38aafa(0x2ef)){const _0x1fcf59=a0_0x5049d9,_0x37e287=a0_0x38aafa,_0x195637=makeAPNGBlob(_0x394675,_0x43b1af,_0x2add20,_0x363684),_0x34559f=URL[_0x1fcf59(0x159)](_0x195637),_0x43995e=document['createElement']('a');_0x43995e[_0x37e287(0x1c8)]=_0x34559f,_0x43995e[_0x37e287(0x215)]=_0x1eaa95,document[_0x37e287(0x1e8)][_0x37e287(0x237)](_0x43995e),_0x43995e[_0x1fcf59(0x1c3)](),setTimeout(()=>{const _0x4fdbe0=_0x37e287;document[_0x4fdbe0(0x1e8)][_0x4fdbe0(0x1dc)](_0x43995e),URL[_0x4fdbe0(0x255)](_0x34559f);},0x3e8);}async function loadImages(_0x52468e){const _0x30b718=a0_0x521960,_0x32da97=a0_0x38aafa,_0x1a563a=await Promise[_0x30b718(0x184)](_0x52468e[_0x32da97(0x294)](_0x38e0ea=>{return new Promise(_0x33254f=>{const _0x4818d1=a0_0x1925,_0x551d53=new Image();_0x551d53[_0x4818d1(0x290)]=_0x4818d1(0x26a),_0x551d53[_0x4818d1(0x1b3)]=_0x38e0ea,_0x551d53[_0x4818d1(0x185)]=()=>_0x33254f(_0x551d53);});}));return _0x1a563a;}function exportSpriteSheetDialog(){const _0x13a9e7=a0_0x5049d9,_0x5c7c80=a0_0x38aafa;let _0x38e25f=prompt(_0x13a9e7(0x1a1),'1');if(_0x38e25f===null)return;let _0x50dde1=Math[_0x5c7c80(0x2c3)](0x1,parseInt(_0x38e25f,0xa)||0x1),_0xdbea55=prompt(_0x5c7c80(0x264),'0');if(_0xdbea55===null)return;let _0x5547ba=Math[_0x5c7c80(0x2c3)](0x0,parseInt(_0xdbea55,0xa)||0x0);exportSpriteSheet(_0x50dde1,_0x5547ba);}function exportSpriteSheet(_0x4258fc=0x1,_0x5d5675=0x0){const _0x77d586=a0_0x521960,_0x2cbbcf=a0_0x5049d9,_0x343bce=a0_0x38aafa,_0x1c1681=getCurrentProject();if(!_0x1c1681){alert(_0x343bce(0x272));return;}const _0x4a2d8a=_0x1c1681['frames'];if(!_0x4a2d8a||_0x4a2d8a[_0x343bce(0x1c4)]===0x0){alert(_0x343bce(0x2cf));return;}const _0x9ec73d=_0x1c1681[_0x343bce(0x1b8)]*cellSize,_0x20371d=_0x1c1681[_0x343bce(0x27c)]*cellSize,_0x2584a2=_0x9ec73d*_0x4a2d8a[_0x343bce(0x1c4)]*_0x4258fc+Math[_0x343bce(0x2c3)](0x0,_0x4a2d8a[_0x343bce(0x1c4)]-0x1)*_0x5d5675,_0x1e1348=_0x20371d*_0x4258fc,_0x54c7e6=document[_0x77d586(0xdd)](_0x343bce(0x19d));_0x54c7e6[_0x343bce(0x1b8)]=_0x2584a2,_0x54c7e6[_0x2cbbcf(0x13b)]=_0x1e1348;const _0x46caa5=_0x54c7e6[_0x343bce(0x2c6)]('2d');_0x46caa5[_0x343bce(0x22d)](0x0,0x0,_0x54c7e6[_0x343bce(0x1b8)],_0x54c7e6[_0x343bce(0x27c)]);let _0x5459f8=0x0;for(let _0x1b4e8a=0x0;_0x1b4e8a<_0x4a2d8a[_0x343bce(0x1c4)];_0x1b4e8a++){let _0x3716c1=document[_0x343bce(0x1d6)](_0x77d586(0x112));_0x3716c1[_0x2cbbcf(0x190)]=_0x9ec73d,_0x3716c1[_0x343bce(0x27c)]=_0x20371d;let _0xc32ad6=_0x3716c1[_0x343bce(0x2c6)]('2d');for(let _0x3604dc=0x0;_0x3604dc<_0x4a2d8a[_0x1b4e8a][_0x2cbbcf(0x13d)][_0x2cbbcf(0xf5)];_0x3604dc++){_0xc32ad6[_0x343bce(0x1ff)](_0x4a2d8a[_0x1b4e8a][_0x343bce(0x262)][_0x3604dc],0x0,0x0);}_0x4258fc===0x1&&_0x5d5675===0x0?(_0x46caa5[_0x2cbbcf(0x230)](_0x3716c1,_0x5459f8,0x0),_0x5459f8+=_0x9ec73d):(_0x46caa5[_0x343bce(0x1ff)](_0x3716c1,0x0,0x0,_0x9ec73d,_0x20371d,_0x5459f8,0x0,_0x9ec73d*_0x4258fc,_0x20371d*_0x4258fc),_0x5459f8+=_0x9ec73d*_0x4258fc),_0x1b4e8a<_0x4a2d8a[_0x2cbbcf(0xf5)]-0x1&&_0x5d5675>0x0&&(_0x5459f8+=_0x5d5675);}const _0x1a5e94=(_0x1c1681[_0x343bce(0x2e6)]||_0x343bce(0x2ab))[_0x2cbbcf(0x127)](/[\\/:*?"<>|]/g,'_'),_0x1fd371=document[_0x343bce(0x1d6)]('a');_0x1fd371[_0x77d586(0x164)]=_0x54c7e6[_0x2cbbcf(0x1b5)](_0x2cbbcf(0xe0)),_0x1fd371[_0x343bce(0x215)]=_0x1a5e94+_0x343bce(0x217),document[_0x343bce(0x1e8)][_0x343bce(0x237)](_0x1fd371),_0x1fd371[_0x343bce(0x2ed)](),setTimeout(()=>{const _0x542808=_0x2cbbcf;document[_0x542808(0x1c5)][_0x542808(0x136)](_0x1fd371);},0x3e8);}const NEZUMI_METADATA_SIG=a0_0x38aafa(0x258);function appendMetadataToBlob(_0x4a38d5,_0x3d81d0){const _0x5c42c3=a0_0x38aafa,_0x10530e=new TextEncoder(),_0x6d7445=_0x10530e[_0x5c42c3(0x1e2)](NEZUMI_METADATA_SIG),_0x2785fd=_0x10530e[_0x5c42c3(0x1e2)](JSON[_0x5c42c3(0x1e5)](_0x3d81d0));return new Blob([_0x4a38d5,_0x6d7445,_0x2785fd],{'type':_0x4a38d5[_0x5c42c3(0x17d)]||_0x5c42c3(0x2cb)});}function indexOfSubarray(_0x412164,_0x348ccd){const _0x1e04c4=a0_0x5049d9,_0x14e65c=a0_0x38aafa;for(let _0x3809fb=0x0;_0x3809fb<=_0x412164[_0x14e65c(0x1c4)]-_0x348ccd[_0x1e04c4(0xf5)];_0x3809fb++){let _0x2e53bf=!![];for(let _0x64952d=0x0;_0x64952d<_0x348ccd[_0x14e65c(0x1c4)];_0x64952d++){if(_0x412164[_0x3809fb+_0x64952d]!==_0x348ccd[_0x64952d]){_0x2e53bf=![];break;}}if(_0x2e53bf)return _0x3809fb;}return-0x1;}function extractMetadataFromArrayBuffer(_0x3d64db){const _0x495990=a0_0x5049d9,_0x45768b=a0_0x38aafa,_0x33512=new TextEncoder()[_0x45768b(0x1e2)](NEZUMI_METADATA_SIG),_0x119dbe=new Uint8Array(_0x3d64db),_0x15bccd=indexOfSubarray(_0x119dbe,_0x33512);if(_0x15bccd===-0x1)return null;const _0x1406a3=_0x119dbe[_0x45768b(0x236)](_0x15bccd+_0x33512[_0x495990(0xf5)]);try{const _0x87bf28=new TextDecoder()[_0x45768b(0x27e)](_0x1406a3);return JSON[_0x45768b(0x288)](_0x87bf28);}catch(_0x1d32a7){return null;}}async function exportStandalone(){const _0x5c44ea=a0_0x521960,_0x5f22ed=a0_0x5049d9,_0x43ee59=a0_0x38aafa;let _0x4fb939=getCurrentProject(),_0x17be45=_0x4fb939[_0x5f22ed(0x17f)],_0x2bf148=_0x4fb939[_0x43ee59(0x1b8)]*cellSize,_0x55a6ad=_0x4fb939[_0x43ee59(0x27c)]*cellSize;const _0x7b2364=_0x17be45[_0x43ee59(0x294)](_0x27146e=>{const _0xc46a0a=_0x5f22ed,_0x1c728a=_0x43ee59;let _0x502f87=document[_0x1c728a(0x1d6)](_0x1c728a(0x19d));_0x502f87[_0x1c728a(0x1b8)]=_0x2bf148,_0x502f87[_0x1c728a(0x27c)]=_0x55a6ad;let _0x191fa0=_0x502f87[_0x1c728a(0x2c6)]('2d');for(let _0x54ba0c=0x0;_0x54ba0c<_0x27146e[_0xc46a0a(0x13d)][_0x1c728a(0x1c4)];_0x54ba0c++){_0x191fa0[_0x1c728a(0x1ff)](_0x27146e[_0xc46a0a(0x13d)][_0x54ba0c],0x0,0x0);}let _0x7b911e=new Image();return _0x7b911e[_0x1c728a(0x1b3)]=_0x502f87[_0xc46a0a(0x1b5)](_0x1c728a(0x1fa)),_0x7b911e;});await Promise[_0x43ee59(0x25a)](_0x7b2364[_0x43ee59(0x294)](_0xa4d7d1=>new Promise(_0x35a0e2=>{const _0x5a7fe0=_0x43ee59;_0xa4d7d1[_0x5a7fe0(0x185)]=_0x35a0e2;})))['catch'](()=>{});const _0x376c96=(_0x4fb939[_0x43ee59(0x2e6)]||_0x43ee59(0x21f))[_0x43ee59(0x27d)](/[\\/:*?"<>|]/g,'_'),_0x32f24c=makeAPNGBlob(_0x7b2364,_0x2bf148,_0x55a6ad,animationDelay),_0x171d4a={'type':_0x43ee59(0x207),'version':0x1,'project':{'width':_0x4fb939[_0x43ee59(0x1b8)],'height':_0x4fb939[_0x43ee59(0x27c)],'name':_0x4fb939[_0x43ee59(0x2e6)]||'','activeFrame':_0x4fb939[_0x5f22ed(0x12c)],'frames':_0x4fb939[_0x43ee59(0x2b3)][_0x43ee59(0x294)](_0x65a50a=>({'activeLayer':_0x65a50a[_0x43ee59(0x1b5)],'layers':_0x65a50a[_0x5c44ea(0x1c8)][_0x43ee59(0x294)](_0x311747=>_0x311747[_0x43ee59(0x1df)]())}))}},_0x2fca2d=appendMetadataToBlob(_0x32f24c,_0x171d4a),_0x29e27c=URL[_0x43ee59(0x201)](_0x2fca2d),_0x3e009f=document[_0x5f22ed(0x1f6)]('a');_0x3e009f[_0x43ee59(0x1c8)]=_0x29e27c,_0x3e009f[_0x43ee59(0x215)]=_0x376c96+_0x5f22ed(0x1e6),document[_0x43ee59(0x1e8)][_0x5c44ea(0xb4)](_0x3e009f),_0x3e009f[_0x43ee59(0x2ed)](),setTimeout(()=>{const _0x1d2ea6=_0x43ee59;document[_0x1d2ea6(0x1e8)][_0x1d2ea6(0x1dc)](_0x3e009f),URL[_0x1d2ea6(0x255)](_0x29e27c);},0x3e8);}function loadStandaloneFromFile(_0x47a91c){return new Promise((_0x115e1a,_0x29f6e4)=>{const _0x523bdb=a0_0x1925,_0x1969b7=new FileReader();_0x1969b7[_0x523bdb(0x185)]=_0xf712ff=>{const _0x4f55ee=a0_0xce2f,_0x293020=_0x523bdb,_0x28ca05=_0xf712ff[_0x293020(0x2e5)][_0x293020(0x192)],_0x44ffd0=extractMetadataFromArrayBuffer(_0x28ca05);if(!_0x44ffd0||!_0x44ffd0['project']){_0x29f6e4(new Error(_0x293020(0x20f)));return;}const _0x5a863a=_0x44ffd0[_0x293020(0x22f)];try{const _0x3a4e8c=createProject(_0x5a863a[_0x293020(0x1b8)],_0x5a863a[_0x293020(0x27c)],_0x5a863a[_0x293020(0x2e6)]||'画像');_0x3a4e8c[_0x293020(0x2b3)]=_0x5a863a[_0x293020(0x2b3)][_0x4f55ee(0x18f)](_0x4ab5ff=>{const _0x144c2a=_0x4f55ee,_0x36c50f=_0x293020;let _0x14eb81={'layers':[],'activeLayer':_0x4ab5ff[_0x144c2a(0x215)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x5afd0a=0x0;_0x5afd0a<_0x4ab5ff[_0x36c50f(0x262)][_0x36c50f(0x1c4)];_0x5afd0a++){let _0x3eae2d=new Image();_0x3eae2d[_0x36c50f(0x1b3)]=_0x4ab5ff[_0x144c2a(0x13d)][_0x5afd0a];let _0x24d889=document[_0x144c2a(0x1f6)](_0x36c50f(0x19d));_0x24d889[_0x36c50f(0x1b8)]=_0x5a863a['width']*cellSize,_0x24d889[_0x36c50f(0x27c)]=_0x5a863a[_0x144c2a(0x13b)]*cellSize,_0x3eae2d[_0x144c2a(0x11a)]=()=>{const _0x2891a1=_0x144c2a,_0x2c19d0=_0x36c50f;let _0x24353d=_0x24d889[_0x2c19d0(0x2c6)]('2d');_0x24353d[_0x2c19d0(0x22d)](0x0,0x0,_0x24d889[_0x2c19d0(0x1b8)],_0x24d889[_0x2c19d0(0x27c)]),_0x24353d[_0x2891a1(0x230)](_0x3eae2d,0x0,0x0);},_0x14eb81[_0x144c2a(0x13d)][_0x36c50f(0x278)](_0x24d889);}return _0x14eb81;}),projects[_0x293020(0x278)](_0x3a4e8c),activeProject=projects[_0x293020(0x1c4)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x115e1a(_0x3a4e8c);}catch(_0x477ae6){_0x29f6e4(_0x477ae6);}},_0x1969b7[_0x523bdb(0x1c5)]=_0x3ad650=>_0x29f6e4(_0x3ad650),_0x1969b7['readAsArrayBuffer'](_0x47a91c);});}function toggleSection(_0x74be1f){const _0x448007=a0_0x521960,_0xc8727d=a0_0x5049d9,_0x51cc3d=a0_0x38aafa,_0x25d3c8=document[_0x51cc3d(0x275)](_0x74be1f),_0x12af27=_0x25d3c8[_0x51cc3d(0x2c0)](_0x51cc3d(0x218)),_0x24b925=_0x25d3c8[_0x51cc3d(0x2c0)](_0x51cc3d(0x277));_0x12af27['style'][_0x51cc3d(0x2f0)]===_0xc8727d(0x12d)?(_0x12af27[_0x51cc3d(0x1f8)][_0x51cc3d(0x2f0)]='',_0x24b925[_0x51cc3d(0x221)]='▼'):(_0x12af27[_0x51cc3d(0x1f8)][_0x448007(0x114)]=_0x51cc3d(0x1b1),_0x24b925[_0x51cc3d(0x221)]='▲');}document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x293),()=>{const _0x1fa89e=a0_0x5049d9,_0x261bf2=a0_0x38aafa;document[_0x1fa89e(0xe9)](_0x261bf2(0x204))[_0x261bf2(0x1bd)](_0x2b55b4=>_0x2b55b4[_0x261bf2(0x1f8)][_0x261bf2(0x2f0)]=''),document[_0x1fa89e(0xe9)](_0x1fa89e(0xf6))[_0x1fa89e(0x10a)](_0x18ae74=>_0x18ae74[_0x261bf2(0x221)]='▼');}),window[a0_0x38aafa(0x21d)](a0_0x38aafa(0x251),updateMenuBtnDisplay),document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x293),updateMenuBtnDisplay);function a0_0x56c5(_0x5d9442,_0x5047a9){_0x5d9442=_0x5d9442-0xaa;const _0x563c31=a0_0x22a5();let _0x5302d7=_0x563c31[_0x5d9442];return _0x5302d7;}function toggleSideMenu(_0x1bcbe1){const _0x162830=a0_0x521960,_0x44bb66=a0_0x5049d9,_0x4278ef=a0_0x38aafa,_0x2daab6=document['getElementById'](_0x44bb66(0x226)),_0x220577=document[_0x4278ef(0x275)](_0x4278ef(0x183)),_0x15c198=document[_0x4278ef(0x275)](_0x4278ef(0x18b)),_0x397da0=document[_0x4278ef(0x275)](_0x4278ef(0x1b4)),_0x3bf8dc=_0x2daab6[_0x4278ef(0x22b)][_0x4278ef(0x23f)](_0x162830(0x1bb));let _0x521044=typeof _0x1bcbe1===_0x4278ef(0x1af)?_0x1bcbe1:!_0x3bf8dc;_0x521044?(_0x2daab6[_0x44bb66(0x176)][_0x4278ef(0x1de)](_0x4278ef(0x2ec)),_0x220577[_0x4278ef(0x22b)][_0x44bb66(0x189)](_0x4278ef(0x2a1)),document[_0x44bb66(0x1c5)][_0x162830(0x178)][_0x162830(0x14a)]=_0x4278ef(0x289),document[_0x4278ef(0x1e8)][_0x4278ef(0x1f8)][_0x4278ef(0x1ec)]=_0x4278ef(0x1b1),window[_0x4278ef(0x22a)]<=0x384&&(_0x397da0[_0x162830(0x178)][_0x4278ef(0x2f0)]=_0x4278ef(0x1d2),_0x15c198['style'][_0x4278ef(0x2f0)]=_0x4278ef(0x1b1))):(_0x2daab6[_0x162830(0x100)][_0x44bb66(0x1e9)](_0x44bb66(0x144)),_0x220577[_0x4278ef(0x22b)][_0x162830(0x1af)](_0x4278ef(0x2a1)),document[_0x4278ef(0x1e8)][_0x4278ef(0x1f8)][_0x44bb66(0x110)]='',document[_0x4278ef(0x1e8)][_0x4278ef(0x1f8)][_0x4278ef(0x1ec)]='',window[_0x4278ef(0x22a)]<=0x384&&(_0x397da0[_0x4278ef(0x1f8)][_0x44bb66(0x193)]=_0x4278ef(0x1b1),_0x15c198[_0x44bb66(0x1bb)][_0x4278ef(0x2f0)]=_0x162830(0x15d)));}function updateMenuBtnDisplay(){const _0x362043=a0_0x521960,_0x516a48=a0_0x5049d9,_0x532352=a0_0x38aafa,_0x43b538=document[_0x532352(0x275)](_0x516a48(0x226)),_0x351513=document['getElementById'](_0x532352(0x183)),_0x29ff53=document[_0x516a48(0x192)](_0x532352(0x18b)),_0x8639d3=document[_0x532352(0x275)](_0x532352(0x1b4));window[_0x532352(0x22a)]>0x384?(_0x43b538[_0x532352(0x22b)][_0x516a48(0x1e9)](_0x532352(0x2ec)),_0x351513[_0x532352(0x22b)][_0x532352(0x187)](_0x532352(0x2a1)),_0x8639d3[_0x516a48(0x1bb)][_0x532352(0x2f0)]=_0x516a48(0x12d),_0x29ff53[_0x532352(0x1f8)][_0x532352(0x2f0)]=_0x532352(0x1b1),document[_0x532352(0x1e8)][_0x532352(0x1f8)][_0x532352(0x188)]='',document[_0x532352(0x1e8)][_0x532352(0x1f8)][_0x516a48(0x13e)]=''):_0x43b538[_0x532352(0x22b)][_0x532352(0x23f)](_0x516a48(0x144))?(_0x8639d3[_0x516a48(0x1bb)][_0x532352(0x2f0)]=_0x532352(0x1d2),_0x29ff53[_0x532352(0x1f8)][_0x532352(0x2f0)]=_0x532352(0x1b1)):(_0x8639d3[_0x532352(0x1f8)][_0x532352(0x2f0)]=_0x532352(0x1b1),_0x29ff53[_0x532352(0x1f8)][_0x362043(0x114)]=_0x532352(0x1d2));}document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x2ed),function(_0x302804){const _0x4c5ec9=a0_0x521960,_0x43a557=a0_0x5049d9,_0x2d670e=a0_0x38aafa;if(window[_0x2d670e(0x22a)]>0x384)return;const _0x405351=document[_0x2d670e(0x275)](_0x2d670e(0x2ce)),_0x199d81=document[_0x2d670e(0x275)]('main-container'),_0x14136b=document[_0x2d670e(0x275)](_0x2d670e(0x18b)),_0x876816=document[_0x2d670e(0x275)](_0x43a557(0x1be));!_0x405351[_0x2d670e(0x23f)](_0x302804[_0x2d670e(0x2e5)])&&_0x302804[_0x2d670e(0x2e5)]!==_0x14136b&&_0x302804[_0x2d670e(0x2e5)]!==_0x876816&&(_0x405351[_0x2d670e(0x22b)][_0x2d670e(0x187)](_0x2d670e(0x2ec)),_0x199d81[_0x2d670e(0x22b)][_0x2d670e(0x187)](_0x2d670e(0x2a1)),_0x876816[_0x2d670e(0x1f8)][_0x2d670e(0x2f0)]=_0x4c5ec9(0xb2),_0x14136b[_0x2d670e(0x1f8)][_0x2d670e(0x2f0)]=_0x2d670e(0x1d2),document[_0x2d670e(0x1e8)][_0x2d670e(0x1f8)][_0x2d670e(0x188)]='',document[_0x43a557(0x1c5)][_0x2d670e(0x1f8)][_0x2d670e(0x1ec)]='');}),(function(){const _0x89796c=a0_0x38aafa;try{(location[_0x89796c(0x1ad)][_0x89796c(0x18c)](/index\.html$/)||location[_0x89796c(0x1ad)]==='/'||location[_0x89796c(0x1ad)]===_0x89796c(0x2b1))&&(!localStorage[_0x89796c(0x1d5)](_0x89796c(0x249))&&(localStorage[_0x89796c(0x1fc)](_0x89796c(0x249),'1'),location[_0x89796c(0x1c8)]=_0x89796c(0x2ae)));}catch(_0x2fb710){}}());let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x1cc),_0x5d5c9c=>{const _0x3328c6=a0_0x38aafa;if(_0x5d5c9c[_0x3328c6(0x2c5)]===_0x3328c6(0x24c))shiftPressed=!![];}),document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x1ab),_0x1a205b=>{const _0x1076d7=a0_0x38aafa;if(_0x1a205b[_0x1076d7(0x2c5)]===_0x1076d7(0x24c))shiftPressed=![];}),canvas[a0_0x5049d9(0x1a3)](a0_0x38aafa(0x1cd),_0x8046a9=>{const _0x1abd4f=a0_0x521960,_0x2e9c05=a0_0x5049d9,_0x250580=a0_0x38aafa;if(_0x8046a9[_0x250580(0x220)]===_0x250580(0x1a5))return;currentTool===_0x250580(0x232)||shiftPressed?(dragging=!![],isDrawing=![],startX=_0x8046a9[_0x250580(0x193)],startY=_0x8046a9[_0x250580(0x25d)],lastX=posX,lastY=posY,canvas[_0x250580(0x1f0)](_0x8046a9[_0x250580(0x270)]),canvas[_0x250580(0x1f8)][_0x250580(0x2bd)]=_0x250580(0x1c2)):(isDrawing=!![],pointerDownX=_0x8046a9[_0x250580(0x193)],pointerDownY=_0x8046a9[_0x2e9c05(0x12b)],handleMouseDown(_0x8046a9),canvas[_0x1abd4f(0x1cc)](_0x8046a9[_0x250580(0x270)]));}),canvas[a0_0x38aafa(0x21d)](a0_0x38aafa(0x17e),_0x3fa9a6=>{const _0x2d117a=a0_0x521960,_0x134393=a0_0x38aafa;if(_0x3fa9a6[_0x134393(0x220)]===_0x134393(0x1a5))return;if(dragging)posX=lastX+(_0x3fa9a6[_0x134393(0x193)]-startX),posY=lastY+(_0x3fa9a6[_0x2d117a(0x1a6)]-startY),updateTransform();else{if(isDrawing){if(currentTool!==_0x134393(0x182)){const _0x270806=Math[_0x134393(0x1a6)](_0x3fa9a6[_0x134393(0x193)]-pointerDownX),_0x40c812=Math[_0x134393(0x1a6)](_0x3fa9a6[_0x134393(0x25d)]-pointerDownY);if(_0x270806>=PAN_CANCEL_DISTANCE||_0x40c812>=PAN_CANCEL_DISTANCE){isDrawing=![];try{handleMouseUp(_0x3fa9a6);}catch(_0x6fe1b1){}return;}}handleMouseMove(_0x3fa9a6);}}}),canvas[a0_0x38aafa(0x21d)](a0_0x38aafa(0x2de),_0x3eac40=>{const _0x50e966=a0_0x521960,_0x1be889=a0_0x5049d9,_0x3cbe07=a0_0x38aafa;if(_0x3eac40[_0x3cbe07(0x220)]===_0x3cbe07(0x1a5))return;dragging=![],isDrawing&&handleMouseUp(_0x3eac40),isDrawing=![];try{canvas[_0x1be889(0x217)](_0x3eac40[_0x3cbe07(0x270)]);}catch(_0xbd0138){}if(currentTool===_0x50e966(0x12a))canvas[_0x3cbe07(0x1f8)][_0x3cbe07(0x2bd)]=_0x50e966(0xc3);else canvas[_0x3cbe07(0x1f8)][_0x1be889(0x151)]=_0x1be889(0x10c);}),wrapper[a0_0x38aafa(0x21d)](a0_0x521960(0x12c),_0x22fd53=>{const _0x240ed3=a0_0x5049d9,_0x39c95f=a0_0x38aafa;_0x22fd53[_0x240ed3(0x187)]();const _0xe9f17f=canvas[_0x240ed3(0x1b0)](),_0x287703=_0x22fd53[_0x39c95f(0x193)],_0x15426=_0x22fd53[_0x39c95f(0x25d)],_0x3c8cf6=(_0x287703-_0xe9f17f[_0x39c95f(0x2a7)]-posX)/scale,_0x47c0ce=(_0x15426-_0xe9f17f[_0x39c95f(0x196)]-posY)/scale,_0x53b816=_0x22fd53[_0x39c95f(0x1e7)]>0x0?0.9:1.1;let _0x4f589a=scale*_0x53b816;_0x4f589a=Math[_0x39c95f(0x1b2)](Math[_0x39c95f(0x2c3)](_0x4f589a,0.2),0x5),posX=_0x287703-_0xe9f17f[_0x39c95f(0x2a7)]-_0x3c8cf6*_0x4f589a,posY=_0x15426-_0xe9f17f[_0x39c95f(0x196)]-_0x47c0ce*_0x4f589a,scale=_0x4f589a,updateTransform();const _0xfa98a2=document[_0x39c95f(0x275)](_0x240ed3(0x155)),_0x39e70f=document[_0x39c95f(0x275)](_0x39c95f(0x2b6));if(_0xfa98a2)_0xfa98a2[_0x39c95f(0x24e)]=Math[_0x39c95f(0x26f)](scale*0x64);if(_0x39e70f)_0x39e70f[_0x39c95f(0x221)]=Math[_0x39c95f(0x26f)](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x4e8cd4=a0_0x5049d9,_0x419653=a0_0x38aafa;canvas[_0x419653(0x1f8)][_0x4e8cd4(0xee)]=_0x419653(0x184)+posX+_0x419653(0x1c0)+posY+_0x4e8cd4(0xda)+scale+')';}function setZoomValue(_0x29a921){const _0x19df15=a0_0x5049d9,_0x3c0d4c=a0_0x38aafa,_0x5c17c8=Math[_0x19df15(0x107)](0x14,Math[_0x3c0d4c(0x1b2)](0x1f4,parseInt(_0x29a921,0xa)||0x64)),_0x4774da=_0x5c17c8/0x64;scale=_0x4774da,updateTransform();const _0x3118fb=document[_0x3c0d4c(0x275)](_0x3c0d4c(0x1bc)),_0x284c31=document[_0x3c0d4c(0x275)](_0x3c0d4c(0x2b6));if(_0x3118fb)_0x3118fb[_0x3c0d4c(0x24e)]=_0x5c17c8;if(_0x284c31)_0x284c31[_0x3c0d4c(0x221)]=_0x5c17c8+'%';}function zoomIn(){const _0x32a4cb=a0_0x38aafa,_0x2cd6c2=document[_0x32a4cb(0x275)](_0x32a4cb(0x1bc));let _0x48b918=_0x2cd6c2?parseInt(_0x2cd6c2[_0x32a4cb(0x24e)],0xa):Math[_0x32a4cb(0x26f)](scale*0x64);_0x48b918=Math[_0x32a4cb(0x1b2)](0x1f4,_0x48b918+0xa),setZoomValue(_0x48b918);}function zoomOut(){const _0x3a6f57=a0_0x521960,_0x1c8eda=a0_0x38aafa,_0x559155=document[_0x1c8eda(0x275)](_0x3a6f57(0x135));let _0x3a9b0a=_0x559155?parseInt(_0x559155[_0x1c8eda(0x24e)],0xa):Math[_0x1c8eda(0x26f)](scale*0x64);_0x3a9b0a=Math[_0x1c8eda(0x2c3)](0x14,_0x3a9b0a-0xa),setZoomValue(_0x3a9b0a);}const zs=document[a0_0x38aafa(0x275)]('zoomSlider');if(zs)zs[a0_0x38aafa(0x28a)]=_0x220359=>setZoomValue(_0x220359[a0_0x5049d9(0x1d3)][a0_0x38aafa(0x24e)]);function a0_0xce2f(_0x35f37b,_0x59d86c){_0x35f37b=_0x35f37b-0xda;const _0x53658f=a0_0x243d();let _0x108bff=_0x53658f[_0x35f37b];return _0x108bff;}const zv=document[a0_0x38aafa(0x275)](a0_0x5049d9(0x16a));if(zv)zv[a0_0x5049d9(0x154)]=Math[a0_0x521960(0x122)](scale*0x64)+'%';function getCanvasCoords(_0x26a1e6){const _0x253fde=a0_0x5049d9,_0x1dc9a1=a0_0x38aafa,_0x3edc55=canvas['getBoundingClientRect'](),_0x5a2665=canvas[_0x253fde(0x190)]/_0x3edc55[_0x1dc9a1(0x1b8)],_0x96f1e4=canvas[_0x1dc9a1(0x27c)]/_0x3edc55[_0x1dc9a1(0x27c)],_0x4a76dd=(_0x26a1e6[_0x1dc9a1(0x193)]-_0x3edc55[_0x1dc9a1(0x2a7)])*_0x5a2665,_0x59005a=(_0x26a1e6[_0x1dc9a1(0x25d)]-_0x3edc55[_0x1dc9a1(0x196)])*_0x96f1e4;return{'x':_0x4a76dd,'y':_0x59005a};}function handleDrawStart(_0x148442){const _0x10eef7=a0_0x38aafa,_0x4e651d=getCanvasCoords(_0x148442);ctx[_0x10eef7(0x2eb)](),ctx[_0x10eef7(0x29e)](_0x4e651d['x'],_0x4e651d['y']);}function handleDrawMove(_0x1c73a1){const _0x81ec7b=a0_0x5049d9,_0x5e3c9f=a0_0x38aafa,_0x52fab3=getCanvasCoords(_0x1c73a1);ctx[_0x81ec7b(0xf3)](_0x52fab3['x'],_0x52fab3['y']),ctx[_0x5e3c9f(0x2d9)]();}function handleDrawEnd(_0x25416b){const _0x165d04=a0_0x38aafa;ctx[_0x165d04(0x2db)]();}