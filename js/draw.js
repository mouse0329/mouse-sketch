(function(_0x12aaa9,_0x5d44cf){const _0x281251=_0x312b,_0x1aef9c=_0x12aaa9();while(!![]){try{const _0x1ef73c=-parseInt(_0x281251(0x142))/0x1+parseInt(_0x281251(0x146))/0x2+-parseInt(_0x281251(0x139))/0x3+-parseInt(_0x281251(0x178))/0x4*(parseInt(_0x281251(0x153))/0x5)+-parseInt(_0x281251(0x159))/0x6+parseInt(_0x281251(0x131))/0x7*(-parseInt(_0x281251(0x15a))/0x8)+parseInt(_0x281251(0x176))/0x9;if(_0x1ef73c===_0x5d44cf)break;else _0x1aef9c['push'](_0x1aef9c['shift']());}catch(_0x31d3e7){_0x1aef9c['push'](_0x1aef9c['shift']());}}}(_0x257d,0xa24e7));function _0x257d(){const _0x320910=['#ccc','isArray','redrawAll:\x20failed\x20drawing\x20layer','scanColorsPanel','save','558449tTojEz','encode','(((.+)+)+)+$','constructor','1094246AUcNKA','style','complete','height','drawImage','lineTo','100%','apply','destination-out','globalAlpha','now','getElementById','canvas','170epuCrt','stroke','palette-penSize','getContext','data','width','2304744TJQCzH','3174512nzLgtG','number','eraser','search','moveTo','rgb(','beginPath','undefined','restore','strokeStyle','warn','slice','push','floor','isFinite','penSize','fillStyle','globalCompositeOperation','fillRect',',1)','value','pop','toString','round','circle','rgba(','palette-penMode','getImageData','31414320iSxYHO','visible','137588OMXBtW','flat','7bLndTw','type','length','activeLayer','layers','string','clearRect','#00000000','2591733LDwYfe','sqrt','has','source-over'];_0x257d=function(){return _0x320910;};return _0x257d();}const _0x53bdf3=(function(){let _0x4a95ad=!![];return function(_0x435f98,_0x2ffc05){const _0x1aa54e=_0x4a95ad?function(){const _0xacf71d=_0x312b;if(_0x2ffc05){const _0x58533a=_0x2ffc05[_0xacf71d(0x14d)](_0x435f98,arguments);return _0x2ffc05=null,_0x58533a;}}:function(){};return _0x4a95ad=![],_0x1aa54e;};}()),_0x20437b=_0x53bdf3(this,function(){const _0x2cc057=_0x312b;return _0x20437b[_0x2cc057(0x170)]()[_0x2cc057(0x15d)](_0x2cc057(0x144))[_0x2cc057(0x170)]()[_0x2cc057(0x145)](_0x20437b)['search'](_0x2cc057(0x144));});_0x20437b();function setPenSize(_0x2e5448){const _0x3ce2cc=_0x312b;penSize=parseInt(_0x2e5448)||0x1;let _0x13ee00=document[_0x3ce2cc(0x151)](_0x3ce2cc(0x169));if(_0x13ee00)_0x13ee00[_0x3ce2cc(0x16e)]=penSize;let _0x5835cf=document[_0x3ce2cc(0x151)](_0x3ce2cc(0x155));if(_0x5835cf)_0x5835cf['value']=penSize;}function setPenMode(_0x2de50c){const _0x2c6266=_0x312b;penMode=_0x2de50c;let _0x3bdf6c=document['getElementById']('penMode');if(_0x3bdf6c)_0x3bdf6c[_0x2c6266(0x16e)]=penMode;let _0x5542df=document[_0x2c6266(0x151)](_0x2c6266(0x174));if(_0x5542df)_0x5542df[_0x2c6266(0x16e)]=penMode;}function fillAt(_0x18f521,_0x4d92d6){const _0x13e7bb=_0x312b;let _0xf9c9b2=getCurrentProject(),_0xc9448=getCurrentFrame();if(!_0xf9c9b2||!_0xc9448||typeof _0xc9448[_0x13e7bb(0x134)]!=='number'||!_0xc9448[_0x13e7bb(0x135)][_0xc9448[_0x13e7bb(0x134)]])return;const _0x43d198=_0xc9448[_0x13e7bb(0x135)][_0xc9448[_0x13e7bb(0x134)]],_0x2423d3=_0x43d198&&_0x43d198[_0x13e7bb(0x152)]?_0x43d198['canvas']:_0x43d198;if(!_0x2423d3||!_0x2423d3[_0x13e7bb(0x156)])return;let _0x396a8b=_0x2423d3[_0x13e7bb(0x156)]('2d',{'willReadFrequently':!![]}),_0x33937d=_0x396a8b[_0x13e7bb(0x175)](0x0,0x0,_0xf9c9b2[_0x13e7bb(0x158)]*cellSize,_0xf9c9b2['height']*cellSize),_0x21d17a=_0x18f521*cellSize,_0x1c9a5f=_0x4d92d6*cellSize,_0x51f2d2=getPixel(_0x33937d,_0x21d17a,_0x1c9a5f),_0x5d7bc9=currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x51f2d2,_0x5d7bc9))return;let _0x5ebadc=[[_0x18f521,_0x4d92d6]],_0x28cb34=new Set();while(_0x5ebadc[_0x13e7bb(0x133)]){let [_0x5a2faf,_0x484625]=_0x5ebadc[_0x13e7bb(0x16f)]();if(_0x5a2faf<0x0||_0x484625<0x0||_0x5a2faf>=_0xf9c9b2[_0x13e7bb(0x158)]||_0x484625>=_0xf9c9b2[_0x13e7bb(0x149)])continue;let _0x4b6ccc=_0x5a2faf+','+_0x484625;if(_0x28cb34[_0x13e7bb(0x13b)](_0x4b6ccc))continue;_0x28cb34['add'](_0x4b6ccc);let _0x136fb6=_0x5a2faf*cellSize,_0x2b9c68=_0x484625*cellSize,_0x56d060=getPixel(_0x33937d,_0x136fb6,_0x2b9c68);if(!colorsMatch(_0x56d060,_0x51f2d2))continue;for(let _0x3cc4f7=0x0;_0x3cc4f7<cellSize;_0x3cc4f7++){for(let _0x484563=0x0;_0x484563<cellSize;_0x484563++){setPixel(_0x33937d,_0x136fb6+_0x484563,_0x2b9c68+_0x3cc4f7,_0x5d7bc9);}}_0x5ebadc[_0x13e7bb(0x166)]([_0x5a2faf+0x1,_0x484625]),_0x5ebadc['push']([_0x5a2faf-0x1,_0x484625]),_0x5ebadc[_0x13e7bb(0x166)]([_0x5a2faf,_0x484625+0x1]),_0x5ebadc[_0x13e7bb(0x166)]([_0x5a2faf,_0x484625-0x1]);}_0x396a8b['putImageData'](_0x33937d,0x0,0x0),redrawAll();}function getPixel(_0x5c23ed,_0x3d2526,_0x1a0a1b){const _0x1a1e14=_0x312b;let _0x9097a5=(_0x1a0a1b*_0x5c23ed[_0x1a1e14(0x158)]+_0x3d2526)*0x4;return[_0x5c23ed[_0x1a1e14(0x157)][_0x9097a5],_0x5c23ed[_0x1a1e14(0x157)][_0x9097a5+0x1],_0x5c23ed[_0x1a1e14(0x157)][_0x9097a5+0x2],_0x5c23ed[_0x1a1e14(0x157)][_0x9097a5+0x3]];}function setPixel(_0x457bb1,_0x1375ef,_0x54f0e,_0x444f05){const _0x42becf=_0x312b;let _0x26b07c=(_0x54f0e*_0x457bb1['width']+_0x1375ef)*0x4;_0x457bb1[_0x42becf(0x157)][_0x26b07c]=_0x444f05[0x0],_0x457bb1['data'][_0x26b07c+0x1]=_0x444f05[0x1],_0x457bb1[_0x42becf(0x157)][_0x26b07c+0x2]=_0x444f05[0x2],_0x457bb1[_0x42becf(0x157)][_0x26b07c+0x3]=_0x444f05[0x3];}function drawDotXY(_0x4d7411,_0xac366d){const _0x13d713=_0x312b;let _0x264c63=getCurrentProject(),_0x1c4b8f=getCurrentFrame();if(!_0x1c4b8f||!_0x264c63)return;if(typeof _0x4d7411!==_0x13d713(0x15b)||typeof _0xac366d!=='number'||_0x4d7411<0x0||_0xac366d<0x0||!Number[_0x13d713(0x168)](_0x264c63[_0x13d713(0x158)])||!Number[_0x13d713(0x168)](_0x264c63['height'])||_0x4d7411>=_0x264c63[_0x13d713(0x158)]||_0xac366d>=_0x264c63[_0x13d713(0x149)]||!Array[_0x13d713(0x13e)](_0x1c4b8f[_0x13d713(0x135)])||typeof _0x1c4b8f[_0x13d713(0x134)]!=='number'||!_0x1c4b8f[_0x13d713(0x135)][_0x1c4b8f[_0x13d713(0x134)]])return;const _0x480f43=_0x1c4b8f['layers'][_0x1c4b8f[_0x13d713(0x134)]],_0x3a5978=_0x480f43&&_0x480f43[_0x13d713(0x152)]?_0x480f43['canvas']:_0x480f43;if(!_0x3a5978||!_0x3a5978[_0x13d713(0x156)])return;let _0x1f4e57=_0x3a5978[_0x13d713(0x156)]('2d');if(!_0x1f4e57)return;if(currentTool==='eraser'||currentAlpha===0x0)drawPenShape(_0x1f4e57,_0x4d7411,_0xac366d,null,!![]);else{let _0x241b90=hexToRgba(currentColor,currentAlpha);_0x1f4e57[_0x13d713(0x141)](),penAlphaMode===_0x13d713(0x179)&&currentAlpha<0x1?(drawPenShape(_0x1f4e57,_0x4d7411,_0xac366d,null,!![]),drawPenShape(_0x1f4e57,_0x4d7411,_0xac366d,_0x241b90,![])):drawPenShape(_0x1f4e57,_0x4d7411,_0xac366d,_0x241b90,![]),_0x1f4e57[_0x13d713(0x162)]();}redrawAll();}function _0x312b(_0x45ebe5,_0x15e7e2){_0x45ebe5=_0x45ebe5-0x131;const _0x420180=_0x257d();let _0x20437b=_0x420180[_0x45ebe5];return _0x20437b;}function parseColorToRGBA(_0x38b088,_0x20a7c7){const _0x258b79=_0x312b;if(Array[_0x258b79(0x13e)](_0x38b088)&&_0x38b088[_0x258b79(0x133)]>=0x4)return _0x38b088[_0x258b79(0x165)](0x0,0x4);if(!_0x38b088||typeof _0x38b088!==_0x258b79(0x136))return _0x20a7c7||[0x0,0x0,0x0,0xff];if(_0x38b088===_0x258b79(0x138)||_0x38b088['toLowerCase']()==='transparent')return[0x0,0x0,0x0,0x0];const _0x843c0b=_0x38b088['match'](/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/i);if(_0x843c0b){const _0xccc258=parseInt(_0x843c0b[0x1],0xa),_0x2f7ba0=parseInt(_0x843c0b[0x2],0xa),_0x4fd5a4=parseInt(_0x843c0b[0x3],0xa),_0x795f59=typeof _0x843c0b[0x4]!==_0x258b79(0x161)?Math[_0x258b79(0x171)](parseFloat(_0x843c0b[0x4])*0xff):0xff;return[_0xccc258,_0x2f7ba0,_0x4fd5a4,_0x795f59];}try{return hexToRgba(_0x38b088);}catch(_0x1884dc){return _0x20a7c7||[0x0,0x0,0x0,0xff];}}function fillCellCircle(_0x5932f5,_0x124362,_0x479c39,_0x355898,_0x14ef74,_0x1cb24a){const _0x214be1=_0x312b,_0x56fafe=Math['max'](0x1,Math[_0x214be1(0x171)](_0x355898/cellSize)),_0xc28d6f=_0x124362+_0x355898/0x2,_0xdfe6d3=_0x479c39+_0x355898/0x2,_0x1bf32f=_0x355898/0x2;for(let _0xc24027=0x0;_0xc24027<_0x56fafe;_0xc24027++){for(let _0x2e5770=0x0;_0x2e5770<_0x56fafe;_0x2e5770++){const _0x45cb63=_0x124362+_0x2e5770*cellSize,_0x492679=_0x479c39+_0xc24027*cellSize,_0x3177e0=_0x45cb63+cellSize/0x2,_0x37f4f9=_0x492679+cellSize/0x2,_0x2d51b1=_0x3177e0-_0xc28d6f,_0x305a35=_0x37f4f9-_0xdfe6d3,_0x356796=Math[_0x214be1(0x13a)](_0x2d51b1*_0x2d51b1+_0x305a35*_0x305a35);if(_0x356796<=_0x1bf32f+0.0001){if(_0x1cb24a)_0x5932f5[_0x214be1(0x137)](_0x45cb63,_0x492679,cellSize,cellSize);else _0x14ef74&&(_0x5932f5[_0x214be1(0x141)](),_0x5932f5['globalAlpha']=(_0x14ef74[0x3]||0xff)/0xff,_0x5932f5[_0x214be1(0x16a)]=_0x214be1(0x15f)+_0x14ef74[0x0]+','+_0x14ef74[0x1]+','+_0x14ef74[0x2]+')',_0x5932f5['fillRect'](_0x45cb63,_0x492679,cellSize,cellSize),_0x5932f5[_0x214be1(0x162)]());}}}}function drawPenShape(_0x52c31,_0x26f69d,_0x36446c,_0x1a466d,_0x58d19f){const _0x3ae4db=_0x312b,_0x2011c5=_0x26f69d*cellSize,_0x1a2e20=_0x36446c*cellSize,_0x545be9=penSize*cellSize;if(_0x58d19f)penMode===_0x3ae4db(0x172)?fillCellCircle(_0x52c31,_0x2011c5,_0x1a2e20,_0x545be9,null,!![]):_0x52c31[_0x3ae4db(0x137)](_0x2011c5-Math[_0x3ae4db(0x167)]((penSize-0x1)/0x2)*cellSize,_0x1a2e20-Math[_0x3ae4db(0x167)]((penSize-0x1)/0x2)*cellSize,_0x545be9,_0x545be9);else{if(penMode===_0x3ae4db(0x172)){const _0x7543ed=parseColorToRGBA(_0x1a466d,[0x0,0x0,0x0,0xff]);fillCellCircle(_0x52c31,_0x2011c5,_0x1a2e20,_0x545be9,_0x7543ed,![]);}else _0x52c31[_0x3ae4db(0x141)](),Array[_0x3ae4db(0x13e)](_0x1a466d)&&_0x1a466d[_0x3ae4db(0x133)]>=0x4?(_0x52c31['fillStyle']=_0x3ae4db(0x173)+_0x1a466d[0x0]+','+_0x1a466d[0x1]+','+_0x1a466d[0x2]+_0x3ae4db(0x16d),_0x52c31[_0x3ae4db(0x14f)]=(_0x1a466d[0x3]||0xff)/0xff):_0x52c31[_0x3ae4db(0x16a)]=_0x1a466d,_0x52c31[_0x3ae4db(0x16c)](_0x2011c5-Math[_0x3ae4db(0x167)]((penSize-0x1)/0x2)*cellSize,_0x1a2e20-Math[_0x3ae4db(0x167)]((penSize-0x1)/0x2)*cellSize,_0x545be9,_0x545be9),_0x52c31[_0x3ae4db(0x162)]();}}function drawDotTouch(_0x2ee931,_0xb4dbfd){const _0x2f13f3=_0x312b;let _0x3b10e7=getCurrentProject(),_0x31e011=getCurrentFrame();if(!_0x3b10e7||!_0x31e011)return;if(_0x2ee931<0x0||_0xb4dbfd<0x0||_0x2ee931>=_0x3b10e7[_0x2f13f3(0x158)]||_0xb4dbfd>=_0x3b10e7[_0x2f13f3(0x149)])return;const _0x13be37=_0x31e011[_0x2f13f3(0x135)][_0x31e011[_0x2f13f3(0x134)]],_0x20ab63=_0x13be37&&_0x13be37['canvas']?_0x13be37[_0x2f13f3(0x152)]:_0x13be37;if(!_0x20ab63||!_0x20ab63['getContext'])return;let _0x67bf97=_0x20ab63[_0x2f13f3(0x156)]('2d');if(currentTool===_0x2f13f3(0x15c)||currentAlpha===0x0)drawPenShape(_0x67bf97,_0x2ee931,_0xb4dbfd,null,!![]);else{let _0x2b01fc=hexToRgba(currentColor,currentAlpha);_0x67bf97['save'](),penAlphaMode===_0x2f13f3(0x179)&&currentAlpha<0x1?(_0x67bf97[_0x2f13f3(0x14f)]=0x1,_0x67bf97['globalCompositeOperation']=_0x2f13f3(0x14e),drawPenShape(_0x67bf97,_0x2ee931,_0xb4dbfd,null,!![]),_0x67bf97[_0x2f13f3(0x16b)]=_0x2f13f3(0x13c),drawPenShape(_0x67bf97,_0x2ee931,_0xb4dbfd,_0x2b01fc,![])):drawPenShape(_0x67bf97,_0x2ee931,_0xb4dbfd,_0x2b01fc,![]),_0x67bf97[_0x2f13f3(0x162)]();}redrawAll();}function drawGrid(_0x3c9046,_0x233ada){const _0x46afb0=_0x312b;ctx[_0x46afb0(0x141)](),ctx[_0x46afb0(0x163)]=_0x46afb0(0x13d);for(let _0x347b8b=0x0;_0x347b8b<=_0x3c9046;_0x347b8b++){ctx[_0x46afb0(0x160)](),ctx[_0x46afb0(0x15e)](_0x347b8b*cellSize,0x0),ctx['lineTo'](_0x347b8b*cellSize,_0x233ada*cellSize),ctx[_0x46afb0(0x154)]();}for(let _0x35ddf4=0x0;_0x35ddf4<=_0x233ada;_0x35ddf4++){ctx[_0x46afb0(0x160)](),ctx[_0x46afb0(0x15e)](0x0,_0x35ddf4*cellSize),ctx[_0x46afb0(0x14b)](_0x3c9046*cellSize,_0x35ddf4*cellSize),ctx[_0x46afb0(0x154)]();}ctx['restore']();}function redrawAll(){const _0x6ab987=_0x312b;let _0x8f11a4=getCurrentProject(),_0x3a693a=getCurrentFrame();canvas['width']=_0x8f11a4['width']*cellSize,canvas[_0x6ab987(0x149)]=_0x8f11a4[_0x6ab987(0x149)]*cellSize,ctx[_0x6ab987(0x137)](0x0,0x0,canvas[_0x6ab987(0x158)],canvas[_0x6ab987(0x149)]);for(let _0x5939f4=0x0;_0x5939f4<(Array[_0x6ab987(0x13e)](_0x3a693a[_0x6ab987(0x135)])?_0x3a693a[_0x6ab987(0x135)][_0x6ab987(0x133)]:0x0);_0x5939f4++){const _0x382cd2=_0x3a693a[_0x6ab987(0x135)][_0x5939f4];if(!_0x382cd2)continue;const _0x41a423=typeof _0x382cd2[_0x6ab987(0x177)]!=='undefined'?_0x382cd2[_0x6ab987(0x177)]:!![];if(!_0x41a423)continue;const _0x58eddf=_0x382cd2[_0x6ab987(0x152)]?_0x382cd2[_0x6ab987(0x152)]:_0x382cd2;if(!_0x58eddf)continue;try{if(typeof HTMLCanvasElement!==_0x6ab987(0x161)&&_0x58eddf instanceof HTMLCanvasElement)ctx[_0x6ab987(0x14a)](_0x58eddf,0x0,0x0);else{if(typeof HTMLImageElement!=='undefined'&&_0x58eddf instanceof HTMLImageElement){if(_0x58eddf[_0x6ab987(0x148)])ctx[_0x6ab987(0x14a)](_0x58eddf,0x0,0x0);}else{if(typeof OffscreenCanvas!=='undefined'&&_0x58eddf instanceof OffscreenCanvas)ctx[_0x6ab987(0x14a)](_0x58eddf,0x0,0x0);else try{ctx[_0x6ab987(0x14a)](_0x58eddf,0x0,0x0);}catch(_0x9b86ad){}}}}catch(_0x567afc){console[_0x6ab987(0x164)](_0x6ab987(0x13f),_0x567afc);}}drawGrid(_0x8f11a4[_0x6ab987(0x158)],_0x8f11a4[_0x6ab987(0x149)]);wrapper&&(wrapper[_0x6ab987(0x147)][_0x6ab987(0x158)]=_0x6ab987(0x14c),wrapper[_0x6ab987(0x147)][_0x6ab987(0x149)]='auto');const _0x5be4ef=document['getElementById'](_0x6ab987(0x140));if(_0x5be4ef){const _0x31c09b=performance[_0x6ab987(0x150)]();if(!lastColorScanAt||_0x31c09b-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0xf9461f=scanImageColors();renderScanPanel(_0xf9461f),_0x5be4ef[_0x6ab987(0x147)]['display']='',lastColorScanAt=_0x31c09b;}}}function appendMetadataToBlob(_0xcafd9f,_0x1cfeb1){const _0x2de6b9=_0x312b,_0x4e42ad=new TextEncoder(),_0x441329=_0x4e42ad[_0x2de6b9(0x143)](NEZUMI_METADATA_SIG),_0x2bde03=_0x4e42ad['encode'](JSON['stringify'](_0x1cfeb1));return new Blob([_0xcafd9f,_0x441329,_0x2bde03],{'type':_0xcafd9f[_0x2de6b9(0x132)]||'application/octet-stream'});}