(function(_0xaf8e2e,_0x5b7c80){const _0x28be25=_0x53bc,_0x3530bc=_0xaf8e2e();while(!![]){try{const _0x230bb1=parseInt(_0x28be25(0xa3))/0x1*(-parseInt(_0x28be25(0x81))/0x2)+parseInt(_0x28be25(0x8a))/0x3*(parseInt(_0x28be25(0x9e))/0x4)+-parseInt(_0x28be25(0xad))/0x5+-parseInt(_0x28be25(0x9a))/0x6*(parseInt(_0x28be25(0x8e))/0x7)+parseInt(_0x28be25(0xb0))/0x8+-parseInt(_0x28be25(0x89))/0x9*(parseInt(_0x28be25(0x7b))/0xa)+parseInt(_0x28be25(0x95))/0xb*(parseInt(_0x28be25(0xa2))/0xc);if(_0x230bb1===_0x5b7c80)break;else _0x3530bc['push'](_0x3530bc['shift']());}catch(_0x182b7d){_0x3530bc['push'](_0x3530bc['shift']());}}}(_0x3af5,0xc09e0));function _0x53bc(_0x3da2d9,_0x3bc784){_0x3da2d9=_0x3da2d9-0x7a;const _0x10bd5f=_0x3af5();let _0x7e30a2=_0x10bd5f[_0x3da2d9];return _0x7e30a2;}const _0x10566a=(function(){let _0x3fd027=!![];return function(_0x47f294,_0x5c4116){const _0x2fc255=_0x3fd027?function(){const _0xba7e94=_0x53bc;if(_0x5c4116){const _0x58b54d=_0x5c4116[_0xba7e94(0x7f)](_0x47f294,arguments);return _0x5c4116=null,_0x58b54d;}}:function(){};return _0x3fd027=![],_0x2fc255;};}()),_0x7e30a2=_0x10566a(this,function(){const _0x27c4e9=_0x53bc;return _0x7e30a2[_0x27c4e9(0xa9)]()[_0x27c4e9(0xac)](_0x27c4e9(0x8b))[_0x27c4e9(0xa9)]()[_0x27c4e9(0xc4)](_0x7e30a2)[_0x27c4e9(0xac)]('(((.+)+)+)+$');});_0x7e30a2();function hexToRgbaCss(_0x127e2b,_0xf4e404){const _0x1e891f=_0x53bc;let _0x22b6ed,_0x18acd5,_0x28b16f,_0x2ed5a0=_0xf4e404;if(_0x127e2b[_0x1e891f(0xb6)]===0x9)_0x22b6ed=parseInt(_0x127e2b[_0x1e891f(0x80)](0x1,0x3),0x10),_0x18acd5=parseInt(_0x127e2b[_0x1e891f(0x80)](0x3,0x5),0x10),_0x28b16f=parseInt(_0x127e2b[_0x1e891f(0x80)](0x5,0x7),0x10),_0x2ed5a0=parseInt(_0x127e2b[_0x1e891f(0x80)](0x7,0x9),0x10)/0xff;else{if(_0x127e2b[_0x1e891f(0xb6)]===0x7)_0x22b6ed=parseInt(_0x127e2b[_0x1e891f(0x80)](0x1,0x3),0x10),_0x18acd5=parseInt(_0x127e2b[_0x1e891f(0x80)](0x3,0x5),0x10),_0x28b16f=parseInt(_0x127e2b[_0x1e891f(0x80)](0x5,0x7),0x10);else{if(_0x127e2b['length']===0x4)_0x22b6ed=parseInt(_0x127e2b[0x1]+_0x127e2b[0x1],0x10),_0x18acd5=parseInt(_0x127e2b[0x2]+_0x127e2b[0x2],0x10),_0x28b16f=parseInt(_0x127e2b[0x3]+_0x127e2b[0x3],0x10);else return _0x127e2b;}}return _0x1e891f(0x9f)+_0x22b6ed+','+_0x18acd5+','+_0x28b16f+','+_0x2ed5a0+')';}function hexToRgba(_0x5b076f,_0x219cff=0x1){const _0x1827be=_0x53bc;if(_0x5b076f===_0x1827be(0x7c)||_0x5b076f===_0x1827be(0x98))return[0x0,0x0,0x0,0x0];_0x5b076f=_0x5b076f[_0x1827be(0xab)]('#','');if(_0x5b076f[_0x1827be(0xb6)]===0x3)_0x5b076f=_0x5b076f[_0x1827be(0x96)]('')[_0x1827be(0x94)](_0x3c4bbc=>_0x3c4bbc+_0x3c4bbc)['join']('');if(_0x5b076f[_0x1827be(0xb6)]===0x8){const _0x4bf06d=parseInt(_0x5b076f[_0x1827be(0x80)](0x0,0x2),0x10),_0x17c4ee=parseInt(_0x5b076f[_0x1827be(0x80)](0x2,0x4),0x10),_0x33dcb3=parseInt(_0x5b076f[_0x1827be(0x80)](0x4,0x6),0x10),_0xb055c7=parseInt(_0x5b076f['slice'](0x6,0x8),0x10);return[_0x4bf06d,_0x17c4ee,_0x33dcb3,_0xb055c7];}let _0x22d588=parseInt(_0x5b076f,0x10);return[_0x22d588>>0x10&0xff,_0x22d588>>0x8&0xff,_0x22d588&0xff,Math['round'](0xff*_0x219cff)];}function colorsMatch(_0x37fec7,_0x1a6536){return _0x37fec7[0x0]===_0x1a6536[0x0]&&_0x37fec7[0x1]===_0x1a6536[0x1]&&_0x37fec7[0x2]===_0x1a6536[0x2]&&_0x37fec7[0x3]===_0x1a6536[0x3];}function createPalette(){const _0xe9421e=_0x53bc,_0x5bd5d9=document['getElementById'](_0xe9421e(0xbd));if(!_0x5bd5d9)return;_0x5bd5d9[_0xe9421e(0x7d)]='',PALETTE_COLORS['forEach']((_0x147fde,_0x5cb491)=>{const _0x953e31=_0xe9421e,_0x36db97=document[_0x953e31(0x85)](_0x953e31(0xa0));_0x36db97[_0x953e31(0x84)]=_0x953e31(0xba),_0x36db97[_0x953e31(0xc6)][_0x953e31(0xc8)]=_0x953e31(0x86),_0x36db97['style'][_0x953e31(0x8d)]=_0x953e31(0xa1),_0x36db97[_0x953e31(0x7d)]='';let _0x44f920=document[_0x953e31(0x85)](_0x953e31(0x9c));_0x44f920[_0x953e31(0xc6)][_0x953e31(0xc8)]='absolute',_0x44f920['style'][_0x953e31(0xc7)]='0',_0x44f920['style'][_0x953e31(0x7a)]='8px',_0x44f920['style'][_0x953e31(0x87)]=_0x953e31(0xa5);let _0x3832a7=document[_0x953e31(0x85)](_0x953e31(0x9c));_0x3832a7[_0x953e31(0xc6)][_0x953e31(0xc8)]=_0x953e31(0xb3),_0x3832a7[_0x953e31(0xc6)][_0x953e31(0xc7)]='0',_0x3832a7[_0x953e31(0xc6)][_0x953e31(0x7a)]=_0x953e31(0x8c);if(_0x147fde==='transparent'||_0x147fde===_0x953e31(0x98))_0x3832a7[_0x953e31(0xc6)][_0x953e31(0x87)]=_0x953e31(0x92),_0x36db97[_0x953e31(0x8f)]='透明',_0x36db97[_0x953e31(0x7d)]=_0x953e31(0xb9);else{if(/^#([0-9a-f]{8})$/i[_0x953e31(0x82)](_0x147fde)){_0x3832a7[_0x953e31(0xc6)][_0x953e31(0x87)]=hexToRgbaCss(_0x147fde,0x1);const [_0x453fb5,_0x40a470,_0x5a7bc3,_0x465b10]=hexToRgba(_0x147fde),_0x13453d=_0x465b10/0xff;_0x36db97[_0x953e31(0x8f)]=rgbaToHex(_0x453fb5,_0x40a470,_0x5a7bc3)+'\x20'+Math[_0x953e31(0xc2)](_0x13453d*0x64)+'%';}else _0x147fde[_0x953e31(0xc1)]()===currentColor['toLowerCase']()&&currentAlpha<0x1?(_0x3832a7[_0x953e31(0xc6)][_0x953e31(0x87)]=hexToRgbaCss(_0x147fde,currentAlpha),_0x36db97[_0x953e31(0x8f)]=_0x147fde+_0x953e31(0xaf)+Math[_0x953e31(0xc2)](currentAlpha*0x64)+'%'):(_0x3832a7[_0x953e31(0xc6)][_0x953e31(0x87)]=_0x147fde,_0x36db97[_0x953e31(0x8f)]=_0x147fde);}_0x36db97[_0x953e31(0xb7)](_0x44f920),_0x36db97['appendChild'](_0x3832a7),_0x36db97[_0x953e31(0xb8)]=()=>{const _0x4d4b89=_0x953e31;if(_0x147fde==='transparent'||_0x147fde===_0x4d4b89(0x98))currentColor=_0x4d4b89(0x7c),currentAlpha=0x0;else{if(/^#([0-9a-f]{8})$/i[_0x4d4b89(0x82)](_0x147fde)){const [_0x633889,_0x208dba,_0x552f05,_0x3366ce]=hexToRgba(_0x147fde);currentAlpha=_0x3366ce/0xff,currentColor=rgbaToHex(_0x633889,_0x208dba,_0x552f05);}else currentColor=_0x147fde,currentAlpha=0x1;}updateCurrentColorSwatch(),document[_0x4d4b89(0xaa)]('.palette-color')[_0x4d4b89(0x9d)](_0x474629=>_0x474629[_0x4d4b89(0xa7)]['remove'](_0x4d4b89(0xae))),_0x36db97[_0x4d4b89(0xa7)][_0x4d4b89(0xc9)](_0x4d4b89(0xae));};if(_0x5cb491!==0x0){const _0x26b428=document[_0x953e31(0x85)](_0x953e31(0xc0));_0x26b428['textContent']='×',_0x26b428[_0x953e31(0x84)]='palette-del-btn',_0x26b428[_0x953e31(0x8f)]='この色をパレットから削除',_0x26b428[_0x953e31(0xb8)]=_0xa4ef96=>{const _0x5eed7c=_0x953e31;_0xa4ef96[_0x5eed7c(0xca)](),PALETTE_COLORS[_0x5eed7c(0xb6)]>0x2&&(PALETTE_COLORS[_0x5eed7c(0x88)](_0x5cb491,0x1),createPalette());},_0x36db97['appendChild'](_0x26b428);}_0x5bd5d9[_0x953e31(0xb7)](_0x36db97);});const _0x3e20f4=document[_0xe9421e(0x85)](_0xe9421e(0xa0));_0x3e20f4[_0xe9421e(0x84)]=_0xe9421e(0xa4),_0x3e20f4[_0xe9421e(0x8f)]=_0xe9421e(0x7e),_0x3e20f4[_0xe9421e(0x7d)]='+',_0x3e20f4[_0xe9421e(0xb8)]=_0x397c6a=>{const _0x88d61=_0xe9421e;_0x397c6a[_0x88d61(0xca)](),showColorPickerDialog({'color':currentColor==='transparent'?_0x88d61(0xa8):currentColor,'alpha':currentAlpha,'okLabel':'追加','onChange':()=>{},'onOk':({hex:_0x59f2ed,rgba:_0x2139de,a:_0x362af5})=>{const _0x2730c5=_0x88d61;if(_0x362af5===0x0){if(PALETTE_COLORS[0x0]===_0x2730c5(0x7c))PALETTE_COLORS['splice'](0x1,0x0,'transparent');else PALETTE_COLORS['unshift'](_0x2730c5(0x7c));}else{const _0x1c00d2=Math[_0x2730c5(0xc2)](_0x362af5*0xff),_0xe205e=_0x1c00d2[_0x2730c5(0xa9)](0x10)[_0x2730c5(0xbb)](0x2,'0');PALETTE_COLORS['unshift'](''+_0x59f2ed+_0xe205e);}if(PALETTE_COLORS[_0x2730c5(0xb6)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x2730c5(0x80)](0x0,0x18);savePaletteToDB(),createPalette();}});},_0x5bd5d9[_0xe9421e(0xb4)](_0x3e20f4,_0x5bd5d9[_0xe9421e(0xc5)]);const _0x4aed23=document['getElementById'](_0xe9421e(0x91));if(_0x4aed23)_0x4aed23[_0xe9421e(0xc6)][_0xe9421e(0x99)]='';}function scanImageColors(){const _0x4c47b7=_0x53bc,_0x41db9d=getCurrentProject(),_0x572a3e=getCurrentFrame();if(!_0x41db9d||!_0x572a3e)return[];const _0x4e6bcc=new Map(),_0x17d83b=_0x41db9d[_0x4c47b7(0x90)],_0x2bb3ae=_0x41db9d[_0x4c47b7(0x97)],_0x51b37f=canvas[_0x4c47b7(0xbc)]('2d',{'willReadFrequently':!![]});for(let _0x5aa7c7=0x0;_0x5aa7c7<_0x2bb3ae;_0x5aa7c7++){for(let _0x3892e7=0x0;_0x3892e7<_0x17d83b;_0x3892e7++){const _0x1435ad=Math['min'](Math[_0x4c47b7(0xbe)](_0x3892e7*cellSize+cellSize/0x2),canvas[_0x4c47b7(0x90)]-0x1),_0x100bc5=Math[_0x4c47b7(0xb2)](Math[_0x4c47b7(0xbe)](_0x5aa7c7*cellSize+cellSize/0x2),canvas[_0x4c47b7(0x97)]-0x1),_0x4e6bbc=_0x51b37f[_0x4c47b7(0x9b)](_0x1435ad,_0x100bc5,0x1,0x1)[_0x4c47b7(0xc3)],_0x3b1058=_0x4e6bbc[0x0]+','+_0x4e6bbc[0x1]+','+_0x4e6bbc[0x2]+','+_0x4e6bbc[0x3];_0x4e6bcc[_0x4c47b7(0x83)](_0x3b1058,(_0x4e6bcc[_0x4c47b7(0xb1)](_0x3b1058)||0x0)+0x1);}}const _0x1d8831=Array['from'](_0x4e6bcc[_0x4c47b7(0x93)]())[_0x4c47b7(0x94)](([_0x4a1034,_0x5c3432])=>{const _0xa0d277=_0x4c47b7,[_0x2ca579,_0x54d4eb,_0x12b676,_0x4421d4]=_0x4a1034[_0xa0d277(0x96)](',')[_0xa0d277(0x94)](_0x32cc2b=>parseInt(_0x32cc2b,0xa));return{'r':_0x2ca579,'g':_0x54d4eb,'b':_0x12b676,'a':_0x4421d4,'count':_0x5c3432};})[_0x4c47b7(0xbf)]((_0x202eca,_0xc64cca)=>_0xc64cca[_0x4c47b7(0xb5)]-_0x202eca[_0x4c47b7(0xb5)]);return _0x1d8831;}function rgbaToHex(_0x359634,_0x5a84c6,_0x1474be){const _0x72da6d=_0x53bc;return'#'+[_0x359634,_0x5a84c6,_0x1474be][_0x72da6d(0x94)](_0x49401b=>_0x49401b['toString'](0x10)[_0x72da6d(0xbb)](0x2,'0'))[_0x72da6d(0xa6)]('');}function _0x3af5(){const _0x5f043a=['2nTTKiY','test','set','className','createElement','relative','background','splice','12196953akRGVM','236967azCYaV','(((.+)+)+)+$','8px','overflow','49zanxpu','title','width','scanColorsPanel','none','entries','map','24244yuXGvW','split','height','#00000000','display','228318vMhNtW','getImageData','div','forEach','72itzjXf','rgba(','button','hidden','4380qKclfH','1055218Zwjzll','palette-add-btn','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','join','classList','#000000','toString','querySelectorAll','replace','search','626995gADVLZ','selected','\x20透明度','10919224QnjzSv','get','min','absolute','insertBefore','count','length','appendChild','onclick','<span\x20style=\x22position:relative;z-index:1;font-size:13px;color:#888;\x22>透明</span>','palette-color','padStart','getContext','color-palette','floor','sort','span','toLowerCase','round','data','constructor','firstChild','style','inset','position','add','stopPropagation','borderRadius','10FtsZSP','transparent','innerHTML','パレットに色を追加','apply','slice'];_0x3af5=function(){return _0x5f043a;};return _0x3af5();}