const a0_0x695ef8=a0_0x4698;(function(_0x2829d5,_0x2bf4b1){const _0x447457=a0_0x4698,_0x5bdb91=_0x2829d5();while(!![]){try{const _0x2628cc=parseInt(_0x447457(0x176))/0x1*(-parseInt(_0x447457(0xa9))/0x2)+-parseInt(_0x447457(0x160))/0x3*(-parseInt(_0x447457(0x9f))/0x4)+-parseInt(_0x447457(0x18b))/0x5*(parseInt(_0x447457(0xda))/0x6)+parseInt(_0x447457(0x13d))/0x7+parseInt(_0x447457(0x9c))/0x8*(-parseInt(_0x447457(0x15f))/0x9)+-parseInt(_0x447457(0xab))/0xa*(parseInt(_0x447457(0x79))/0xb)+parseInt(_0x447457(0xea))/0xc*(parseInt(_0x447457(0x195))/0xd);if(_0x2628cc===_0x2bf4b1)break;else _0x5bdb91['push'](_0x5bdb91['shift']());}catch(_0x5a9791){_0x5bdb91['push'](_0x5bdb91['shift']());}}}(a0_0x1437,0xde04f));const a0_0x4843f2=(function(){let _0x3f237d=!![];return function(_0x518981,_0x4833b8){const _0x29b8be=_0x3f237d?function(){const _0x3b0946=a0_0x4698;if(_0x4833b8){const _0x3b8e56=_0x4833b8[_0x3b0946(0x174)](_0x518981,arguments);return _0x4833b8=null,_0x3b8e56;}}:function(){};return _0x3f237d=![],_0x29b8be;};}()),a0_0x3429a5=a0_0x4843f2(this,function(){const _0x18239f=a0_0x4698;return a0_0x3429a5[_0x18239f(0x137)]()['search'](_0x18239f(0x96))[_0x18239f(0x137)]()[_0x18239f(0x14b)](a0_0x3429a5)[_0x18239f(0x194)]('(((.+)+)+)+$');});a0_0x3429a5();let canvas=document[a0_0x695ef8(0xc4)](a0_0x695ef8(0x192)),ctx=canvas[a0_0x695ef8(0x19d)]('2d');const wrapper=document[a0_0x695ef8(0xc4)](a0_0x695ef8(0x1b8));let cellSize=0x14,currentColor=a0_0x695ef8(0xa6),currentTool='pen',penSize=0x1,penMode='square',layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x53638e=0x10,_0x49d98c=0x10,_0x6c2569=''){const _0x48b2e7=a0_0x695ef8;let _0x2f8962=0x14,_0x50280c=[],_0x69eb11=[],_0x49d149=[],_0x5f4e34=document[_0x48b2e7(0x9e)](_0x48b2e7(0x192));_0x5f4e34[_0x48b2e7(0x7e)]=_0x53638e*_0x2f8962,_0x5f4e34[_0x48b2e7(0x179)]=_0x49d98c*_0x2f8962,_0x50280c[_0x48b2e7(0x18e)](_0x5f4e34),_0x69eb11[_0x48b2e7(0x18e)]([]),_0x49d149['push']([]);let _0x5461fc={'layers':_0x50280c,'activeLayer':0x0,'layerHistories':_0x69eb11,'layerRedoStacks':_0x49d149};return{'frames':[_0x5461fc],'activeFrame':0x0,'width':_0x53638e,'height':_0x49d98c,'name':_0x6c2569||'ÁîªÂÉè'+(projects['length']+0x1)};}function updateProjectUI(){const _0xef7b90=a0_0x695ef8,_0x4f3f6d=document[_0xef7b90(0xc4)](_0xef7b90(0x18f));_0x4f3f6d[_0xef7b90(0xc3)]='';for(let _0x3759e8=0x0;_0x3759e8<projects[_0xef7b90(0x1dd)];_0x3759e8++){const _0x3a8900=document[_0xef7b90(0x9e)]('div');_0x3a8900['className']=_0xef7b90(0x116)+(_0x3759e8===activeProject?_0xef7b90(0x10b):''),_0x3a8900[_0xef7b90(0x80)]=()=>{activeProject=_0x3759e8,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x56cfde=document[_0xef7b90(0x9e)](_0xef7b90(0x183));_0x56cfde[_0xef7b90(0x10f)]=_0xef7b90(0x170),_0x56cfde[_0xef7b90(0x11c)]=projects[_0x3759e8][_0xef7b90(0x150)]||'ÁîªÂÉè'+(_0x3759e8+0x1),_0x56cfde[_0xef7b90(0xcd)]=_0xef7b90(0xb0),_0x56cfde[_0xef7b90(0x80)]=_0x2b7077=>{const _0x2e6c0e=_0xef7b90;_0x2b7077[_0x2e6c0e(0xeb)](),editProjectName(_0x3759e8,_0x56cfde);},_0x3a8900[_0xef7b90(0xc1)](_0x56cfde);const _0x49b991=document[_0xef7b90(0x9e)](_0xef7b90(0xd0));_0x49b991[_0xef7b90(0x11c)]='ÂâäÈô§',_0x49b991['className']='project-btn',_0x49b991[_0xef7b90(0x1ba)]=projects[_0xef7b90(0x1dd)]===0x1,_0x49b991[_0xef7b90(0x80)]=_0x128500=>{const _0x2acef0=_0xef7b90;_0x128500[_0x2acef0(0xeb)](),removeProjectAt(_0x3759e8);},_0x3a8900[_0xef7b90(0xc1)](_0x49b991),_0x4f3f6d[_0xef7b90(0xc1)](_0x3a8900);}document[_0xef7b90(0xc4)]('projectCount')[_0xef7b90(0x11c)]='('+projects['length']+'Êûö)';}function editProjectName(_0x36a123,_0xad59df){const _0x40a616=a0_0x695ef8,_0x3ff6a7=document['createElement'](_0x40a616(0x74));_0x3ff6a7[_0x40a616(0xd4)]=_0x40a616(0x172),_0x3ff6a7[_0x40a616(0x18d)]=projects[_0x36a123]['name']||'ÁîªÂÉè'+(_0x36a123+0x1),_0x3ff6a7[_0x40a616(0x10f)]=_0x40a616(0xfb),_0x3ff6a7[_0x40a616(0x17d)][_0x40a616(0x7e)]=_0x40a616(0x1b6),_0x3ff6a7[_0x40a616(0x1af)]=()=>{const _0x2f87fe=_0x40a616;projects[_0x36a123][_0x2f87fe(0x150)]=_0x3ff6a7[_0x2f87fe(0x18d)][_0x2f87fe(0x123)]()||'ÁîªÂÉè'+(_0x36a123+0x1),updateProjectUI();},_0x3ff6a7[_0x40a616(0x190)]=_0x400b52=>{const _0x320b94=_0x40a616;if(_0x400b52[_0x320b94(0x189)]==='Enter')_0x3ff6a7[_0x320b94(0x181)]();},_0xad59df[_0x40a616(0x11d)](_0x3ff6a7),_0x3ff6a7[_0x40a616(0xaf)](),_0x3ff6a7[_0x40a616(0x184)]();}function showNewProjectDialog(_0x1313b3){const _0x7b0c2a=a0_0x695ef8;let _0x13ca68=document['getElementById'](_0x7b0c2a(0x89));if(_0x13ca68)_0x13ca68[_0x7b0c2a(0xf7)]();const _0x2f13d3=document[_0x7b0c2a(0x9e)](_0x7b0c2a(0x1c0));_0x2f13d3['id']=_0x7b0c2a(0x89),_0x2f13d3[_0x7b0c2a(0x17d)][_0x7b0c2a(0xa5)]='fixed',_0x2f13d3[_0x7b0c2a(0x17d)]['left']='0',_0x2f13d3[_0x7b0c2a(0x17d)][_0x7b0c2a(0x1b0)]='0',_0x2f13d3['style'][_0x7b0c2a(0x7e)]='100vw',_0x2f13d3[_0x7b0c2a(0x17d)][_0x7b0c2a(0x179)]=_0x7b0c2a(0x90),_0x2f13d3[_0x7b0c2a(0x17d)][_0x7b0c2a(0x1bc)]=_0x7b0c2a(0x102),_0x2f13d3[_0x7b0c2a(0x17d)]['display']=_0x7b0c2a(0x140),_0x2f13d3[_0x7b0c2a(0x17d)]['alignItems']=_0x7b0c2a(0x144),_0x2f13d3[_0x7b0c2a(0x17d)][_0x7b0c2a(0xcf)]=_0x7b0c2a(0x144),_0x2f13d3[_0x7b0c2a(0x17d)][_0x7b0c2a(0x1d3)]=_0x7b0c2a(0x1ae),_0x2f13d3[_0x7b0c2a(0xc3)]=_0x7b0c2a(0x163)+(projects['length']+0x1)+_0x7b0c2a(0x142),document['body'][_0x7b0c2a(0xc1)](_0x2f13d3),_0x2f13d3['querySelector']('#newProjOkBtn')[_0x7b0c2a(0x80)]=()=>{const _0xf9adff=_0x7b0c2a,_0x5a8401=parseInt(_0x2f13d3[_0xf9adff(0x71)](_0xf9adff(0xca))[_0xf9adff(0x18d)],0xa),_0x2dd5ad=parseInt(_0x2f13d3['querySelector'](_0xf9adff(0x87))['value'],0xa),_0x745cd8=_0x2f13d3['querySelector'](_0xf9adff(0x17f))[_0xf9adff(0x18d)][_0xf9adff(0x123)]();_0x2f13d3[_0xf9adff(0xf7)]();if(_0x1313b3)_0x1313b3(_0x5a8401,_0x2dd5ad,_0x745cd8);},_0x2f13d3[_0x7b0c2a(0x71)](_0x7b0c2a(0x1db))[_0x7b0c2a(0x80)]=()=>{const _0xd6d9a4=_0x7b0c2a;_0x2f13d3[_0xd6d9a4(0xf7)]();};}function addProject(){showNewProjectDialog((_0x43da87,_0x40df6d,_0x4e1bdf)=>{const _0x497b69=a0_0x4698;if(!Number[_0x497b69(0xe1)](_0x43da87)||_0x43da87<0x1)_0x43da87=0x10;if(!Number[_0x497b69(0xe1)](_0x40df6d)||_0x40df6d<0x1)_0x40df6d=0x10;projects[_0x497b69(0x18e)](createProject(_0x43da87,_0x40df6d,_0x4e1bdf)),activeProject=projects[_0x497b69(0x1dd)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x52ca07){const _0x1ed0f5=a0_0x695ef8;if(projects[_0x1ed0f5(0x1dd)]<=0x1)return;projects[_0x1ed0f5(0x127)](_0x52ca07,0x1);if(activeProject>=projects['length'])activeProject=projects['length']-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x554987=a0_0x695ef8,_0x42b215=document[_0x554987(0xc4)]('frameList'),_0x489144=getCurrentProject();_0x42b215[_0x554987(0xc3)]='';for(let _0x680c2e=0x0;_0x680c2e<_0x489144[_0x554987(0x7b)]['length'];_0x680c2e++){const _0x46d0ae=document[_0x554987(0x9e)](_0x554987(0x1c0));_0x46d0ae[_0x554987(0x10f)]=_0x554987(0x19e)+(_0x680c2e===_0x489144[_0x554987(0xfc)]?_0x554987(0x10b):''),_0x46d0ae['onclick']=()=>{const _0x112dc1=_0x554987;_0x489144[_0x112dc1(0xfc)]=_0x680c2e,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x12122d=document[_0x554987(0x9e)]('canvas');_0x12122d[_0x554987(0x10f)]=_0x554987(0xc0),_0x12122d[_0x554987(0x7e)]=0x20,_0x12122d[_0x554987(0x179)]=0x20;let _0x12b8ff=_0x12122d[_0x554987(0x19d)]('2d');_0x12b8ff['clearRect'](0x0,0x0,0x20,0x20);for(let _0x7def67=0x0;_0x7def67<_0x489144[_0x554987(0x7b)][_0x680c2e]['layers'][_0x554987(0x1dd)];_0x7def67++){_0x12b8ff[_0x554987(0x93)](_0x489144['frames'][_0x680c2e]['layers'][_0x7def67],0x0,0x0,_0x12122d[_0x554987(0x7e)],_0x12122d['height']);}_0x46d0ae[_0x554987(0xc1)](_0x12122d);const _0x1a95b7=document[_0x554987(0x9e)](_0x554987(0x183));_0x1a95b7[_0x554987(0x11c)]='F'+(_0x680c2e+0x1),_0x46d0ae[_0x554987(0xc1)](_0x1a95b7);const _0x5c9282=document[_0x554987(0x9e)](_0x554987(0xd0));_0x5c9282[_0x554987(0x11c)]='ÂâäÈô§',_0x5c9282['className']=_0x554987(0x14e),_0x5c9282['disabled']=_0x489144[_0x554987(0x7b)]['length']===0x1,_0x5c9282[_0x554987(0x80)]=_0x5caf7b=>{_0x5caf7b['stopPropagation'](),removeFrameAt(_0x680c2e);},_0x46d0ae[_0x554987(0xc1)](_0x5c9282),_0x42b215['appendChild'](_0x46d0ae);}document[_0x554987(0xc4)](_0x554987(0x15a))[_0x554987(0x11c)]='('+_0x489144[_0x554987(0x7b)][_0x554987(0x1dd)]+_0x554987(0x1d7);}function addFrame(){const _0x15e0ab=a0_0x695ef8;let _0x35149a=getCurrentProject(),_0x2a31c4=_0x35149a[_0x15e0ab(0x7b)][_0x35149a[_0x15e0ab(0xfc)]],_0x11b2fc=_0x2a31c4[_0x15e0ab(0x1bb)]['map'](_0x53d1d7=>{const _0x1ee82d=_0x15e0ab;let _0x5f33fc=document[_0x1ee82d(0x9e)](_0x1ee82d(0x192));return _0x5f33fc[_0x1ee82d(0x7e)]=_0x53d1d7['width'],_0x5f33fc[_0x1ee82d(0x179)]=_0x53d1d7[_0x1ee82d(0x179)],_0x5f33fc['getContext']('2d')['drawImage'](_0x53d1d7,0x0,0x0),_0x5f33fc;}),_0x1822a4=_0x11b2fc[_0x15e0ab(0x1d0)](()=>[]),_0x48b5bd=_0x11b2fc[_0x15e0ab(0x1d0)](()=>[]),_0x4b7241={'layers':_0x11b2fc,'activeLayer':0x0,'layerHistories':_0x1822a4,'layerRedoStacks':_0x48b5bd};_0x35149a[_0x15e0ab(0x7b)][_0x15e0ab(0x127)](_0x35149a[_0x15e0ab(0xfc)]+0x1,0x0,_0x4b7241),_0x35149a[_0x15e0ab(0xfc)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x54c76f){const _0x13d731=a0_0x695ef8;let _0x49926c=getCurrentProject();if(_0x49926c[_0x13d731(0x7b)][_0x13d731(0x1dd)]<=0x1)return;_0x49926c[_0x13d731(0x7b)][_0x13d731(0x127)](_0x54c76f,0x1);if(_0x49926c[_0x13d731(0xfc)]>=_0x49926c['frames'][_0x13d731(0x1dd)])_0x49926c[_0x13d731(0xfc)]=_0x49926c[_0x13d731(0x7b)][_0x13d731(0x1dd)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x4f1492=a0_0x695ef8;return getCurrentProject()[_0x4f1492(0x7b)][getCurrentProject()[_0x4f1492(0xfc)]];}function updateLayerUI(){const _0x547bb8=a0_0x695ef8;let {layers:_0x5b254f,activeLayer:_0x16dc0e}=getCurrentFrame();document['getElementById']('layerCount')[_0x547bb8(0x11c)]='('+_0x5b254f[_0x547bb8(0x1dd)]+'Êûö)';const _0x327b9e=document['getElementById'](_0x547bb8(0xd6));_0x327b9e[_0x547bb8(0xc3)]='';for(let _0x55c60e=_0x5b254f['length']-0x1;_0x55c60e>=0x0;_0x55c60e--){const _0x5a4863=document['createElement'](_0x547bb8(0x1c0));_0x5a4863[_0x547bb8(0x10f)]=_0x547bb8(0x12b)+(_0x55c60e===_0x16dc0e?_0x547bb8(0x10b):''),_0x5a4863[_0x547bb8(0x80)]=_0x403b6c=>{const _0x3a1ba4=_0x547bb8;if(_0x403b6c[_0x3a1ba4(0x143)]['classList'][_0x3a1ba4(0x19a)]('layer-btn'))return;getCurrentFrame()[_0x3a1ba4(0xe8)]=_0x55c60e,updateLayerUI(),redrawAll();};const _0x318f29=document['createElement'](_0x547bb8(0x192));_0x318f29[_0x547bb8(0x10f)]=_0x547bb8(0x104),_0x318f29['width']=0x20,_0x318f29[_0x547bb8(0x179)]=0x20;let _0x4f8cde=_0x318f29[_0x547bb8(0x19d)]('2d');_0x4f8cde[_0x547bb8(0x1bd)](0x0,0x0,0x20,0x20),_0x4f8cde[_0x547bb8(0x93)](_0x5b254f[_0x55c60e],0x0,0x0,_0x318f29[_0x547bb8(0x7e)],_0x318f29[_0x547bb8(0x179)]),_0x5a4863[_0x547bb8(0xc1)](_0x318f29);const _0x2feeb8=document[_0x547bb8(0x9e)](_0x547bb8(0x183));_0x2feeb8[_0x547bb8(0x11c)]=_0x547bb8(0x105)+(_0x55c60e+0x1),_0x5a4863[_0x547bb8(0xc1)](_0x2feeb8);const _0x4bb18c=document['createElement'](_0x547bb8(0xd0));_0x4bb18c[_0x547bb8(0x11c)]='‚Üë',_0x4bb18c[_0x547bb8(0x10f)]=_0x547bb8(0x128),_0x4bb18c['title']=_0x547bb8(0x198),_0x4bb18c[_0x547bb8(0x1ba)]=_0x55c60e===_0x5b254f[_0x547bb8(0x1dd)]-0x1,_0x4bb18c['onclick']=_0x24f37a=>{const _0xf5fe16=_0x547bb8;_0x24f37a[_0xf5fe16(0xeb)](),_0x55c60e<_0x5b254f[_0xf5fe16(0x1dd)]-0x1&&swapLayer(_0x55c60e,_0x55c60e+0x1);},_0x5a4863[_0x547bb8(0xc1)](_0x4bb18c);const _0x511f45=document['createElement']('button');_0x511f45[_0x547bb8(0x11c)]='‚Üì',_0x511f45[_0x547bb8(0x10f)]=_0x547bb8(0x128),_0x511f45['title']=_0x547bb8(0x8d),_0x511f45[_0x547bb8(0x1ba)]=_0x55c60e===0x0,_0x511f45[_0x547bb8(0x80)]=_0x24ad55=>{const _0x3e00f4=_0x547bb8;_0x24ad55[_0x3e00f4(0xeb)](),_0x55c60e>0x0&&swapLayer(_0x55c60e,_0x55c60e-0x1);},_0x5a4863[_0x547bb8(0xc1)](_0x511f45);const _0x1565f8=document[_0x547bb8(0x9e)](_0x547bb8(0xd0));_0x1565f8[_0x547bb8(0x11c)]='ÂâäÈô§',_0x1565f8['className']=_0x547bb8(0x128),_0x1565f8[_0x547bb8(0xcd)]=_0x547bb8(0x1be),_0x1565f8['disabled']=_0x5b254f[_0x547bb8(0x1dd)]===0x1,_0x1565f8[_0x547bb8(0x80)]=_0x38a7a7=>{_0x38a7a7['stopPropagation'](),removeLayerAt(_0x55c60e);},_0x5a4863[_0x547bb8(0xc1)](_0x1565f8),_0x327b9e['appendChild'](_0x5a4863);}}function swapLayer(_0x375a4e,_0x146f52){const _0x58027b=a0_0x695ef8;let _0x495d1f=getCurrentFrame();[_0x495d1f[_0x58027b(0x1bb)][_0x375a4e],_0x495d1f[_0x58027b(0x1bb)][_0x146f52]]=[_0x495d1f[_0x58027b(0x1bb)][_0x146f52],_0x495d1f[_0x58027b(0x1bb)][_0x375a4e]],[_0x495d1f[_0x58027b(0xdf)][_0x375a4e],_0x495d1f[_0x58027b(0xdf)][_0x146f52]]=[_0x495d1f['layerHistories'][_0x146f52],_0x495d1f[_0x58027b(0xdf)][_0x375a4e]],[_0x495d1f[_0x58027b(0x1a0)][_0x375a4e],_0x495d1f[_0x58027b(0x1a0)][_0x146f52]]=[_0x495d1f['layerRedoStacks'][_0x146f52],_0x495d1f['layerRedoStacks'][_0x375a4e]];if(_0x495d1f[_0x58027b(0xe8)]===_0x375a4e)_0x495d1f[_0x58027b(0xe8)]=_0x146f52;else{if(_0x495d1f[_0x58027b(0xe8)]===_0x146f52)_0x495d1f[_0x58027b(0xe8)]=_0x375a4e;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x569637){const _0x45ed82=a0_0x695ef8;let _0x36b6b4=getCurrentFrame();if(_0x36b6b4['layers'][_0x45ed82(0x1dd)]<=0x1)return;_0x36b6b4[_0x45ed82(0x1bb)][_0x45ed82(0x127)](_0x569637,0x1),_0x36b6b4[_0x45ed82(0xdf)]['splice'](_0x569637,0x1),_0x36b6b4[_0x45ed82(0x1a0)]['splice'](_0x569637,0x1);if(_0x36b6b4[_0x45ed82(0xe8)]>=_0x36b6b4['layers'][_0x45ed82(0x1dd)])_0x36b6b4[_0x45ed82(0xe8)]=_0x36b6b4[_0x45ed82(0x1bb)][_0x45ed82(0x1dd)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x32eb24=a0_0x695ef8;let _0x208fc8=getCurrentProject(),_0x36558a=getCurrentFrame(),_0x394606=document['createElement']('canvas');_0x394606[_0x32eb24(0x7e)]=_0x208fc8['width']*cellSize,_0x394606[_0x32eb24(0x179)]=_0x208fc8[_0x32eb24(0x179)]*cellSize,_0x36558a[_0x32eb24(0x1bb)]['push'](_0x394606),_0x36558a[_0x32eb24(0xdf)][_0x32eb24(0x18e)]([]),_0x36558a[_0x32eb24(0x1a0)][_0x32eb24(0x18e)]([]),_0x36558a[_0x32eb24(0xe8)]=_0x36558a[_0x32eb24(0x1bb)]['length']-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0xd1a1cb=a0_0x695ef8;let _0x3b2353=getCurrentFrame();if(_0x3b2353[_0xd1a1cb(0x1bb)][_0xd1a1cb(0x1dd)]<=0x1)return;_0x3b2353[_0xd1a1cb(0x1bb)]['splice'](_0x3b2353[_0xd1a1cb(0xe8)],0x1),_0x3b2353[_0xd1a1cb(0xdf)][_0xd1a1cb(0x127)](_0x3b2353[_0xd1a1cb(0xe8)],0x1),_0x3b2353[_0xd1a1cb(0x1a0)][_0xd1a1cb(0x127)](_0x3b2353[_0xd1a1cb(0xe8)],0x1),_0x3b2353[_0xd1a1cb(0xe8)]=Math[_0xd1a1cb(0x1c3)](0x0,_0x3b2353['activeLayer']-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x157f71){const _0x19d021=a0_0x695ef8;getCurrentFrame()[_0x19d021(0xe8)]=parseInt(_0x157f71),updateLayerUI();}let PALETTE_COLORS=['transparent',a0_0x695ef8(0xbd),a0_0x695ef8(0x1d6),a0_0x695ef8(0xdb),a0_0x695ef8(0x97),a0_0x695ef8(0xf2),a0_0x695ef8(0xa6),a0_0x695ef8(0x119),a0_0x695ef8(0x1b7),a0_0x695ef8(0x125),'#00ffff','#0000ff',a0_0x695ef8(0x8c),'#800000','#808000',a0_0x695ef8(0x91),'#008080',a0_0x695ef8(0xd3),a0_0x695ef8(0xe7),a0_0x695ef8(0x16a),a0_0x695ef8(0x16b)],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){const _0x56cfb2=a0_0x695ef8;let _0x8b72fc=getCurrentProject();if(!_0x8b72fc||!_0x8b72fc[_0x56cfb2(0x7b)]||_0x8b72fc[_0x56cfb2(0x7b)][_0x56cfb2(0x1dd)]<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0x2f4179=_0x8b72fc['frames'];animationTimer=setInterval(()=>{const _0x4bbb67=_0x56cfb2;ctx[_0x4bbb67(0x1bd)](0x0,0x0,canvas['width'],canvas[_0x4bbb67(0x179)]);let _0x2c0df3=_0x2f4179[animationIndex];for(let _0x5ea9f6=0x0;_0x5ea9f6<_0x2c0df3[_0x4bbb67(0x1bb)][_0x4bbb67(0x1dd)];_0x5ea9f6++){ctx[_0x4bbb67(0x93)](_0x2c0df3[_0x4bbb67(0x1bb)][_0x5ea9f6],0x0,0x0);}drawGrid(_0x8b72fc[_0x4bbb67(0x7e)],_0x8b72fc[_0x4bbb67(0x179)]),animationIndex=(animationIndex+0x1)%_0x2f4179['length'];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function setAnimationDelay(_0x4cecb6){const _0x1907b4=a0_0x695ef8;_0x4cecb6=Math[_0x1907b4(0x1c3)](0xa,parseInt(_0x4cecb6,0xa)||0x12c),animationDelay=_0x4cecb6,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x4a7de3){const _0x58f48a=a0_0x695ef8;currentTool=_0x4a7de3,document[_0x58f48a(0x7d)](_0x58f48a(0x136))[_0x58f48a(0x1ca)](_0x386736=>{const _0x54f01c=_0x58f48a;_0x386736['classList'][_0x54f01c(0xa8)](_0x54f01c(0x1d5),_0x386736[_0x54f01c(0x1ce)][_0x54f01c(0x106)]===_0x4a7de3);}),document[_0x58f48a(0x7d)](_0x58f48a(0x1ab))[_0x58f48a(0x1ca)](_0x1eab02=>{const _0x5a51e8=_0x58f48a;_0x1eab02['classList'][_0x5a51e8(0xa8)](_0x5a51e8(0x1d5),_0x1eab02[_0x5a51e8(0x1ce)][_0x5a51e8(0x106)]===_0x4a7de3);}),_0x4a7de3===_0x58f48a(0x18a)?canvas[_0x58f48a(0x17d)][_0x58f48a(0x162)]='grab':canvas['style'][_0x58f48a(0x162)]=_0x58f48a(0x12f);}function setPenSize(_0x2b896d){const _0x2403d7=a0_0x695ef8;penSize=parseInt(_0x2b896d)||0x1;let _0x16d6cb=document['getElementById'](_0x2403d7(0x10d));if(_0x16d6cb)_0x16d6cb[_0x2403d7(0x18d)]=penSize;let _0x4013bd=document[_0x2403d7(0xc4)]('palette-penSize');if(_0x4013bd)_0x4013bd[_0x2403d7(0x18d)]=penSize;}function setPenMode(_0x26ea26){const _0xfbebdd=a0_0x695ef8;penMode=_0x26ea26;let _0x34cd3d=document['getElementById']('penMode');if(_0x34cd3d)_0x34cd3d['value']=penMode;let _0x4e3ebb=document[_0xfbebdd(0xc4)](_0xfbebdd(0x152));if(_0x4e3ebb)_0x4e3ebb[_0xfbebdd(0x18d)]=penMode;}function hexToRgba(_0x2f5c74,_0x55baf9=0x1){const _0x167a27=a0_0x695ef8;if(_0x2f5c74===_0x167a27(0xae)||_0x2f5c74==='#00000000')return[0x0,0x0,0x0,0x0];_0x2f5c74=_0x2f5c74['replace']('#','');if(_0x2f5c74[_0x167a27(0x1dd)]===0x3)_0x2f5c74=_0x2f5c74[_0x167a27(0x17c)]('')[_0x167a27(0x1d0)](_0x4c83da=>_0x4c83da+_0x4c83da)[_0x167a27(0xb9)]('');let _0x462c95=parseInt(_0x2f5c74,0x10);return[_0x462c95>>0x10&0xff,_0x462c95>>0x8&0xff,_0x462c95&0xff,Math[_0x167a27(0xd8)](0xff*_0x55baf9)];}function fillAt(_0x53ad5d,_0xd99584){const _0x5de17f=a0_0x695ef8;let _0x296fac=getCurrentProject(),_0x24e422=getCurrentFrame(),_0x57183c=_0x24e422['layers'][_0x24e422[_0x5de17f(0xe8)]][_0x5de17f(0x19d)]('2d'),_0x3357b6=_0x57183c['getImageData'](0x0,0x0,_0x296fac['width']*cellSize,_0x296fac[_0x5de17f(0x179)]*cellSize),_0x8adc84=_0x53ad5d*cellSize,_0x30208a=_0xd99584*cellSize,_0x16abba=getPixel(_0x3357b6,_0x8adc84,_0x30208a),_0x42b69e=currentColor==='transparent'||currentColor===_0x5de17f(0x165)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x16abba,_0x42b69e))return;let _0x29e726=[[_0x53ad5d,_0xd99584]],_0x3f79f7=new Set();while(_0x29e726[_0x5de17f(0x1dd)]){let [_0x392760,_0x3b09d4]=_0x29e726[_0x5de17f(0x85)]();if(_0x392760<0x0||_0x3b09d4<0x0||_0x392760>=_0x296fac[_0x5de17f(0x7e)]||_0x3b09d4>=_0x296fac['height'])continue;let _0x14ed5d=_0x392760+','+_0x3b09d4;if(_0x3f79f7[_0x5de17f(0x188)](_0x14ed5d))continue;_0x3f79f7['add'](_0x14ed5d);let _0x220ba9=_0x392760*cellSize,_0xf633c2=_0x3b09d4*cellSize,_0x25bf53=getPixel(_0x3357b6,_0x220ba9,_0xf633c2);if(!colorsMatch(_0x25bf53,_0x16abba))continue;for(let _0x387a5f=0x0;_0x387a5f<cellSize;_0x387a5f++){for(let _0x133c19=0x0;_0x133c19<cellSize;_0x133c19++){setPixel(_0x3357b6,_0x220ba9+_0x133c19,_0xf633c2+_0x387a5f,_0x42b69e);}}_0x29e726['push']([_0x392760+0x1,_0x3b09d4]),_0x29e726[_0x5de17f(0x18e)]([_0x392760-0x1,_0x3b09d4]),_0x29e726[_0x5de17f(0x18e)]([_0x392760,_0x3b09d4+0x1]),_0x29e726['push']([_0x392760,_0x3b09d4-0x1]);}_0x57183c[_0x5de17f(0xa7)](_0x3357b6,0x0,0x0),redrawAll();}function a0_0x4698(_0xe94bb4,_0x48791d){_0xe94bb4=_0xe94bb4-0x70;const _0xf07b7f=a0_0x1437();let _0x3429a5=_0xf07b7f[_0xe94bb4];return _0x3429a5;}function getPixel(_0x4b2a70,_0x596c17,_0xf060fc){const _0x11ade1=a0_0x695ef8;let _0x921ca4=(_0xf060fc*_0x4b2a70[_0x11ade1(0x7e)]+_0x596c17)*0x4;return[_0x4b2a70[_0x11ade1(0x10c)][_0x921ca4],_0x4b2a70[_0x11ade1(0x10c)][_0x921ca4+0x1],_0x4b2a70['data'][_0x921ca4+0x2],_0x4b2a70[_0x11ade1(0x10c)][_0x921ca4+0x3]];}function setPixel(_0x45906a,_0x2d1578,_0x8f930d,_0x47494a){const _0x2cebba=a0_0x695ef8;let _0x59b9cc=(_0x8f930d*_0x45906a['width']+_0x2d1578)*0x4;_0x45906a[_0x2cebba(0x10c)][_0x59b9cc]=_0x47494a[0x0],_0x45906a['data'][_0x59b9cc+0x1]=_0x47494a[0x1],_0x45906a[_0x2cebba(0x10c)][_0x59b9cc+0x2]=_0x47494a[0x2],_0x45906a[_0x2cebba(0x10c)][_0x59b9cc+0x3]=_0x47494a[0x3];}function colorsMatch(_0x32b98a,_0x3adb71){return _0x32b98a[0x0]===_0x3adb71[0x0]&&_0x32b98a[0x1]===_0x3adb71[0x1]&&_0x32b98a[0x2]===_0x3adb71[0x2]&&_0x32b98a[0x3]===_0x3adb71[0x3];}function handleMouseDown(_0x3c2ab7){const _0x2c2a22=a0_0x695ef8;isDrawing=!![];const _0x45c96a=getCanvasCoords(_0x3c2ab7),_0xf9d789=Math[_0x2c2a22(0xb4)](_0x45c96a['x']/cellSize),_0x46140f=Math['floor'](_0x45c96a['y']/cellSize);currentTool===_0x2c2a22(0x1a3)?(fillAt(_0xf9d789,_0x46140f),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0xf9d789,_0x46140f),lastMouse={'x':_0xf9d789,'y':_0x46140f});}function handleMouseMove(_0x8cb66a){const _0x1c7a0d=a0_0x695ef8;if(!isDrawing)return;const _0x2fe064=getCanvasCoords(_0x8cb66a),_0x582962=Math[_0x1c7a0d(0xb4)](_0x2fe064['x']/cellSize),_0xe79257=Math[_0x1c7a0d(0xb4)](_0x2fe064['y']/cellSize);if(!lastMouse){drawDotXY(_0x582962,_0xe79257),lastMouse={'x':_0x582962,'y':_0xe79257};return;}const _0x260012=_0x582962-lastMouse['x'],_0x478d90=_0xe79257-lastMouse['y'],_0x51d906=Math[_0x1c7a0d(0x1c3)](Math['abs'](_0x260012),Math['abs'](_0x478d90));if(_0x51d906<=0x1)drawDotXY(_0x582962,_0xe79257);else for(let _0xa69fac=0x1;_0xa69fac<=_0x51d906;_0xa69fac++){const _0x1a5730=Math[_0x1c7a0d(0xd8)](lastMouse['x']+_0x260012*_0xa69fac/_0x51d906),_0x2601fd=Math[_0x1c7a0d(0xd8)](lastMouse['y']+_0x478d90*_0xa69fac/_0x51d906);drawDotXY(_0x1a5730,_0x2601fd);}lastMouse={'x':_0x582962,'y':_0xe79257};}function handleMouseUp(_0x39fef3){isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0x50563a){const _0x5c4a99=a0_0x695ef8,_0x1f53fa=canvas[_0x5c4a99(0x98)]();let _0x49b8d6=_0x50563a[_0x5c4a99(0xe6)]&&_0x50563a['touches'][0x0]?_0x50563a[_0x5c4a99(0xe6)][0x0]:_0x50563a[_0x5c4a99(0x186)][0x0];const _0x57cef0=canvas[_0x5c4a99(0x7e)]/_0x1f53fa[_0x5c4a99(0x7e)],_0x32c81f=canvas[_0x5c4a99(0x179)]/_0x1f53fa['height'],_0x409c03=_0x49b8d6[_0x5c4a99(0x1d2)],_0x50af8b=_0x49b8d6[_0x5c4a99(0x76)],_0x359074=(_0x409c03-_0x1f53fa[_0x5c4a99(0xf1)])*_0x57cef0,_0xdc1eaf=(_0x50af8b-_0x1f53fa[_0x5c4a99(0x1b0)])*_0x32c81f;return{'x':Math[_0x5c4a99(0xb4)](_0x359074/cellSize),'y':Math[_0x5c4a99(0xb4)](_0xdc1eaf/cellSize)};}function handleTouchStart(_0x3136fb){const _0x2f73b8=a0_0x695ef8;if(_0x3136fb['touches']['length']===0x2){_0x3136fb[_0x2f73b8(0x82)](),isPinching=!![],isDrawing=![];const _0x123f48=_0x3136fb[_0x2f73b8(0xe6)][0x0],_0x235edf=_0x3136fb[_0x2f73b8(0xe6)][0x1];pinchStartDistance=Math[_0x2f73b8(0x18c)](_0x235edf['clientX']-_0x123f48['clientX'],_0x235edf[_0x2f73b8(0x76)]-_0x123f48['clientY']),pinchStartMid={'clientX':(_0x123f48[_0x2f73b8(0x1d2)]+_0x235edf['clientX'])/0x2,'clientY':(_0x123f48[_0x2f73b8(0x76)]+_0x235edf['clientY'])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x2f73b8(0x98)]();}else{if(_0x3136fb[_0x2f73b8(0xe6)][_0x2f73b8(0x1dd)]===0x1){_0x3136fb[_0x2f73b8(0x82)]();if(isPinching)return;isDrawing=!![];let _0x4f0a99=getTouchPos(_0x3136fb);lastTouch=_0x4f0a99,currentTool===_0x2f73b8(0x1a3)?(fillAt(_0x4f0a99['x'],_0x4f0a99['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x4f0a99['x'],_0x4f0a99['y']);}}}function handleTouchMove(_0x234eb3){const _0x152a7e=a0_0x695ef8;if(isPinching||_0x234eb3[_0x152a7e(0xe6)]&&_0x234eb3[_0x152a7e(0xe6)][_0x152a7e(0x1dd)]===0x2){_0x234eb3[_0x152a7e(0x82)]();const _0x4ea926=_0x234eb3[_0x152a7e(0xe6)][0x0],_0x4041d1=_0x234eb3[_0x152a7e(0xe6)][0x1],_0x176613=Math[_0x152a7e(0x18c)](_0x4041d1[_0x152a7e(0x1d2)]-_0x4ea926[_0x152a7e(0x1d2)],_0x4041d1[_0x152a7e(0x76)]-_0x4ea926[_0x152a7e(0x76)]),_0x3cbd0f={'clientX':(_0x4ea926[_0x152a7e(0x1d2)]+_0x4041d1['clientX'])/0x2,'clientY':(_0x4ea926[_0x152a7e(0x76)]+_0x4041d1[_0x152a7e(0x76)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x176613||0x1;const _0x25fe2b=_0x176613/pinchStartDistance||0x1;let _0x1c12a3=pinchStartScale*_0x25fe2b;_0x1c12a3=Math['min'](Math[_0x152a7e(0x1c3)](_0x1c12a3,0.2),0x5);const _0x279979=pinchRect||canvas[_0x152a7e(0x98)](),_0x32f5c6=(pinchStartMid['clientX']-_0x279979[_0x152a7e(0xf1)]-pinchStartPosX)/pinchStartScale,_0x111922=(pinchStartMid[_0x152a7e(0x76)]-_0x279979['top']-pinchStartPosY)/pinchStartScale;posX=_0x3cbd0f['clientX']-_0x279979[_0x152a7e(0xf1)]-_0x32f5c6*_0x1c12a3,posY=_0x3cbd0f['clientY']-_0x279979[_0x152a7e(0x1b0)]-_0x111922*_0x1c12a3,scale=_0x1c12a3,updateTransform();return;}if(!isDrawing)return;if(_0x234eb3[_0x152a7e(0xe6)]&&_0x234eb3['touches']['length']>0x1)return;_0x234eb3[_0x152a7e(0x82)]();let _0x17f499=getTouchPos(_0x234eb3);if(lastTouch){let _0x552307=Math[_0x152a7e(0xa4)]((_0x17f499['x']-lastTouch['x'])*cellSize),_0x126834=Math[_0x152a7e(0xa4)]((_0x17f499['y']-lastTouch['y'])*cellSize);if(_0x552307>=PAN_CANCEL_DISTANCE||_0x126834>=PAN_CANCEL_DISTANCE){if(currentTool!==_0x152a7e(0x1cd)){isDrawing=![];return;}}}if(lastTouch){let _0x4438d9=_0x17f499['x']-lastTouch['x'],_0x55f7ea=_0x17f499['y']-lastTouch['y'],_0x335e54=Math['max'](Math['abs'](_0x4438d9),Math[_0x152a7e(0xa4)](_0x55f7ea));for(let _0x1ec223=0x1;_0x1ec223<=_0x335e54;_0x1ec223++){let _0x32274e=Math[_0x152a7e(0xd8)](lastTouch['x']+_0x4438d9*_0x1ec223/_0x335e54),_0x4b4a4e=Math[_0x152a7e(0xd8)](lastTouch['y']+_0x55f7ea*_0x1ec223/_0x335e54);drawDotTouch(_0x32274e,_0x4b4a4e);}}else drawDotTouch(_0x17f499['x'],_0x17f499['y']);lastTouch=_0x17f499;}function handleTouchEnd(_0x2c9149){const _0x16dd08=a0_0x695ef8;isPinching&&_0x2c9149[_0x16dd08(0xe6)]&&_0x2c9149[_0x16dd08(0xe6)]['length']<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null);isDrawing&&(!_0x2c9149['touches']||_0x2c9149['touches'][_0x16dd08(0x1dd)]===0x0)&&saveHistory();if(_0x2c9149[_0x16dd08(0xe6)]&&_0x2c9149[_0x16dd08(0xe6)][_0x16dd08(0x1dd)]===0x1){let _0x42617c=_0x2c9149[_0x16dd08(0xe6)][0x0];lastTouch=getTouchPos({'touches':[_0x42617c]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function drawDotXY(_0x500e3c,_0x336d3b){const _0x377219=a0_0x695ef8;let _0x51defd=getCurrentProject(),_0x376d79=getCurrentFrame();if(!_0x376d79||!_0x51defd)return;if(typeof _0x500e3c!==_0x377219(0x164)||typeof _0x336d3b!=='number'||_0x500e3c<0x0||_0x336d3b<0x0||!Number['isFinite'](_0x51defd[_0x377219(0x7e)])||!Number[_0x377219(0xe1)](_0x51defd[_0x377219(0x179)])||_0x500e3c>=_0x51defd[_0x377219(0x7e)]||_0x336d3b>=_0x51defd[_0x377219(0x179)]||!Array[_0x377219(0x15b)](_0x376d79[_0x377219(0x1bb)])||typeof _0x376d79[_0x377219(0xe8)]!==_0x377219(0x164)||!_0x376d79[_0x377219(0x1bb)][_0x376d79[_0x377219(0xe8)]])return;let _0x4694a6=_0x376d79['layers'][_0x376d79['activeLayer']][_0x377219(0x19d)]('2d');if(!_0x4694a6)return;if(currentTool===_0x377219(0x19f)||currentColor===_0x377219(0xae)||currentColor===_0x377219(0x165)||currentAlpha===0x0)drawPenShape(_0x4694a6,_0x500e3c,_0x336d3b,_0x377219(0x165),!![]);else{let _0x421cac=hexToRgba(currentColor,currentAlpha);_0x4694a6['save'](),_0x4694a6[_0x377219(0x12e)]=_0x421cac[0x3]/0xff,drawPenShape(_0x4694a6,_0x500e3c,_0x336d3b,_0x377219(0x171)+_0x421cac[0x0]+','+_0x421cac[0x1]+','+_0x421cac[0x2]+','+_0x421cac[0x3]/0xff+')',![]),_0x4694a6[_0x377219(0x1de)]();}redrawAll();}function drawPenShape(_0x36180f,_0x120497,_0x413f0d,_0x51a4ce,_0xecb524){const _0x1fbf31=a0_0x695ef8,_0x2ef390=_0x120497*cellSize,_0x531270=_0x413f0d*cellSize,_0x3704b2=penSize*cellSize;_0xecb524?(_0x36180f[_0x1fbf31(0x8b)](),_0x36180f[_0x1fbf31(0x1c4)]='destination-out',penMode===_0x1fbf31(0x9a)?(_0x36180f[_0x1fbf31(0x129)](),_0x36180f['arc'](_0x2ef390+cellSize/0x2,_0x531270+cellSize/0x2,_0x3704b2/0x2,0x0,Math['PI']*0x2),_0x36180f['fill']()):_0x36180f['clearRect'](_0x2ef390-Math[_0x1fbf31(0xb4)]((penSize-0x1)/0x2)*cellSize,_0x531270-Math[_0x1fbf31(0xb4)]((penSize-0x1)/0x2)*cellSize,_0x3704b2,_0x3704b2),_0x36180f[_0x1fbf31(0x1de)]()):(_0x36180f[_0x1fbf31(0x8b)](),_0x36180f[_0x1fbf31(0xc5)]=_0x51a4ce,penMode===_0x1fbf31(0x9a)?(_0x36180f[_0x1fbf31(0x129)](),_0x36180f[_0x1fbf31(0xfe)](_0x2ef390+cellSize/0x2,_0x531270+cellSize/0x2,_0x3704b2/0x2,0x0,Math['PI']*0x2),_0x36180f[_0x1fbf31(0x1a3)]()):_0x36180f[_0x1fbf31(0x103)](_0x2ef390-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x531270-Math[_0x1fbf31(0xb4)]((penSize-0x1)/0x2)*cellSize,_0x3704b2,_0x3704b2),_0x36180f[_0x1fbf31(0x1de)]());}function drawDotTouch(_0x5856bb,_0x4adc82){const _0x2b3470=a0_0x695ef8;let _0x22602b=getCurrentProject(),_0x50b625=getCurrentFrame();if(_0x5856bb<0x0||_0x4adc82<0x0||_0x5856bb>=_0x22602b[_0x2b3470(0x7e)]||_0x4adc82>=_0x22602b[_0x2b3470(0x179)])return;let _0x191e1e=_0x50b625[_0x2b3470(0x1bb)][_0x50b625[_0x2b3470(0xe8)]][_0x2b3470(0x19d)]('2d');if(currentTool===_0x2b3470(0x19f)||currentColor===_0x2b3470(0xae)||currentColor===_0x2b3470(0x165)||currentAlpha===0x0)drawPenShape(_0x191e1e,_0x5856bb,_0x4adc82,_0x2b3470(0x165),!![]);else{let _0x5d3559=hexToRgba(currentColor,currentAlpha);_0x191e1e[_0x2b3470(0x8b)](),_0x191e1e['globalAlpha']=_0x5d3559[0x3]/0xff,drawPenShape(_0x191e1e,_0x5856bb,_0x4adc82,_0x2b3470(0x171)+_0x5d3559[0x0]+','+_0x5d3559[0x1]+','+_0x5d3559[0x2]+','+_0x5d3559[0x3]/0xff+')',![]),_0x191e1e[_0x2b3470(0x1de)]();}redrawAll();}function applyTheme(_0x23cff0){const _0xb43dc1=a0_0x695ef8;document['documentElement']['setAttribute'](_0xb43dc1(0x92),_0x23cff0);const _0x3ae5bc=document['getElementById'](_0xb43dc1(0x177));_0x3ae5bc&&(_0x3ae5bc[_0xb43dc1(0x11c)]=_0x23cff0===_0xb43dc1(0x1c1)?'‚òÄÔ∏è':'üåô',_0x3ae5bc[_0xb43dc1(0xba)](_0xb43dc1(0x1d1),_0x23cff0==='dark'),_0x3ae5bc[_0xb43dc1(0xcd)]=_0x23cff0==='dark'?_0xb43dc1(0x13c):_0xb43dc1(0xcb)),localStorage['setItem'](_0xb43dc1(0x13a),_0x23cff0);}function toggleTheme(){const _0x5acdce=a0_0x695ef8;applyTheme(document[_0x5acdce(0x131)]['getAttribute'](_0x5acdce(0x92))===_0x5acdce(0x1c1)?_0x5acdce(0x8a):_0x5acdce(0x1c1));}(function initTheme(){const _0x2bc760=a0_0x695ef8,_0x18d7f1=localStorage[_0x2bc760(0x16e)]('nezumi-theme')||(window[_0x2bc760(0x12c)]&&window[_0x2bc760(0x12c)]('(prefers-color-scheme:\x20dark)')[_0x2bc760(0x1c6)]?_0x2bc760(0x1c1):_0x2bc760(0x8a));applyTheme(_0x18d7f1),document[_0x2bc760(0xb5)]('DOMContentLoaded',()=>{const _0x290a05=_0x2bc760,_0x2e2533=document[_0x290a05(0xc4)](_0x290a05(0x177));_0x2e2533&&(_0x2e2533[_0x290a05(0xb5)](_0x290a05(0xb3),toggleTheme),_0x2e2533[_0x290a05(0xb5)](_0x290a05(0xe0),_0x3f9f0a=>{const _0x4e6086=_0x290a05;(_0x3f9f0a[_0x4e6086(0x189)]===_0x4e6086(0x16c)||_0x3f9f0a['key']==='\x20')&&(_0x3f9f0a[_0x4e6086(0x82)](),toggleTheme());}));});}(),window[a0_0x695ef8(0xb7)]=()=>{const _0x25255d=a0_0x695ef8;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x25255d(0x1cd)),loadPaletteFromDB()[_0x25255d(0xb2)](()=>createPalette()),document[_0x25255d(0xc4)](_0x25255d(0x10d))[_0x25255d(0x18d)]=penSize,document['getElementById'](_0x25255d(0x141))[_0x25255d(0x18d)]=penMode;const _0x5daeff=document['getElementById'](_0x25255d(0x1d8)),_0x56f860=document[_0x25255d(0xc4)](_0x25255d(0x118));_0x5daeff&&_0x56f860&&(_0x5daeff['value']=animationDelay,_0x56f860[_0x25255d(0x18d)]=animationDelay,_0x5daeff['oninput']=_0x53591e=>{const _0x3e8469=_0x25255d;_0x56f860[_0x3e8469(0x18d)]=_0x53591e['target'][_0x3e8469(0x18d)],setAnimationDelay(_0x53591e[_0x3e8469(0x143)][_0x3e8469(0x18d)]);},_0x56f860[_0x25255d(0x19c)]=_0x3fd077=>{const _0x187ae6=_0x25255d;let _0x33bfe3=Math[_0x187ae6(0x1c3)](0xa,Math[_0x187ae6(0x193)](0x1388,parseInt(_0x3fd077['target'][_0x187ae6(0x18d)])||animationDelay));_0x5daeff[_0x187ae6(0x18d)]=_0x33bfe3,_0x56f860[_0x187ae6(0x18d)]=_0x33bfe3,setAnimationDelay(_0x33bfe3);}),canvas['onmousemove']=handleMouseMove,canvas[_0x25255d(0x12a)]=handleMouseUp,canvas[_0x25255d(0x1a5)]=handleMouseUp,canvas[_0x25255d(0x134)]=handleTouchStart,canvas[_0x25255d(0xd5)]=handleTouchMove,canvas[_0x25255d(0x135)]=handleTouchEnd,canvas['ontouchcancel']=handleTouchEnd,canvas['addEventListener']('touchstart',handleTouchStart,{'passive':![]}),canvas[_0x25255d(0xb5)]('touchmove',handleTouchMove,{'passive':![]}),canvas[_0x25255d(0xb5)](_0x25255d(0x14d),handleTouchEnd,{'passive':![]}),canvas[_0x25255d(0xb5)](_0x25255d(0x1b5),handleTouchEnd,{'passive':![]}),idbGet(_0x25255d(0x101))&&loadProjectFromIDB();});function drawGrid(_0x148355,_0x39e88c){const _0x1f32f4=a0_0x695ef8;ctx['save'](),ctx[_0x1f32f4(0x155)]=_0x1f32f4(0xa2);for(let _0x222e52=0x0;_0x222e52<=_0x148355;_0x222e52++){ctx[_0x1f32f4(0x129)](),ctx[_0x1f32f4(0x185)](_0x222e52*cellSize,0x0),ctx[_0x1f32f4(0xee)](_0x222e52*cellSize,_0x39e88c*cellSize),ctx[_0x1f32f4(0x8e)]();}for(let _0x563bda=0x0;_0x563bda<=_0x39e88c;_0x563bda++){ctx[_0x1f32f4(0x129)](),ctx[_0x1f32f4(0x185)](0x0,_0x563bda*cellSize),ctx['lineTo'](_0x148355*cellSize,_0x563bda*cellSize),ctx['stroke']();}ctx[_0x1f32f4(0x1de)]();}function redrawAll(){const _0x54be1d=a0_0x695ef8;let _0x1591ed=getCurrentProject(),_0x6c3100=getCurrentFrame();canvas[_0x54be1d(0x7e)]=_0x1591ed[_0x54be1d(0x7e)]*cellSize,canvas[_0x54be1d(0x179)]=_0x1591ed[_0x54be1d(0x179)]*cellSize,ctx[_0x54be1d(0x1bd)](0x0,0x0,canvas[_0x54be1d(0x7e)],canvas[_0x54be1d(0x179)]);for(let _0x1421b8=0x0;_0x1421b8<_0x6c3100['layers']['length'];_0x1421b8++){ctx[_0x54be1d(0x93)](_0x6c3100['layers'][_0x1421b8],0x0,0x0);}drawGrid(_0x1591ed['width'],_0x1591ed['height']),wrapper&&(wrapper[_0x54be1d(0x17d)]['width']='100%',wrapper[_0x54be1d(0x17d)][_0x54be1d(0x179)]=_0x54be1d(0xe9));}function saveHistory(){const _0x3d454b=a0_0x695ef8;let _0x2b7f43=getCurrentFrame(),_0x20f69d=_0x2b7f43[_0x3d454b(0xdf)][_0x2b7f43[_0x3d454b(0xe8)]];_0x20f69d['push'](_0x2b7f43[_0x3d454b(0x1bb)][_0x2b7f43[_0x3d454b(0xe8)]][_0x3d454b(0xe2)]());if(_0x20f69d['length']>0x32)_0x20f69d[_0x3d454b(0x75)]();_0x2b7f43[_0x3d454b(0x1a0)][_0x2b7f43[_0x3d454b(0xe8)]]=[];}function undo(){const _0x34f055=a0_0x695ef8;let _0xef5177=getCurrentFrame(),_0x136f50=_0xef5177[_0x34f055(0xdf)][_0xef5177[_0x34f055(0xe8)]],_0x2d6ba1=_0xef5177[_0x34f055(0x1a0)][_0xef5177[_0x34f055(0xe8)]];if(!_0x136f50||_0x136f50[_0x34f055(0x1dd)]<0x2)return;_0x2d6ba1[_0x34f055(0x18e)](_0x136f50[_0x34f055(0x85)]());let _0x251fb5=new Image();_0x251fb5[_0x34f055(0xb7)]=()=>{const _0x4b3e55=_0x34f055;let _0x46b844=_0xef5177[_0x4b3e55(0x1bb)][_0xef5177['activeLayer']][_0x4b3e55(0x19d)]('2d');_0x46b844[_0x4b3e55(0x1bd)](0x0,0x0,_0xef5177[_0x4b3e55(0x1bb)][_0xef5177['activeLayer']][_0x4b3e55(0x7e)],_0xef5177['layers'][_0xef5177[_0x4b3e55(0xe8)]]['height']),_0x46b844[_0x4b3e55(0x93)](_0x251fb5,0x0,0x0),redrawAll();},_0x251fb5[_0x34f055(0x108)]=_0x136f50[_0x136f50[_0x34f055(0x1dd)]-0x1];}function redo(){const _0x1c73a5=a0_0x695ef8;let _0x4f5b65=getCurrentFrame(),_0x1d9320=_0x4f5b65[_0x1c73a5(0xdf)][_0x4f5b65[_0x1c73a5(0xe8)]],_0x530359=_0x4f5b65[_0x1c73a5(0x1a0)][_0x4f5b65[_0x1c73a5(0xe8)]];if(!_0x530359||_0x530359[_0x1c73a5(0x1dd)]===0x0)return;let _0x5ab4f1=_0x530359[_0x1c73a5(0x85)]();_0x1d9320[_0x1c73a5(0x18e)](_0x5ab4f1);let _0x24cbd3=new Image();_0x24cbd3[_0x1c73a5(0xb7)]=()=>{const _0xf72959=_0x1c73a5;let _0x2319c1=_0x4f5b65[_0xf72959(0x1bb)][_0x4f5b65[_0xf72959(0xe8)]][_0xf72959(0x19d)]('2d');_0x2319c1[_0xf72959(0x1bd)](0x0,0x0,_0x4f5b65[_0xf72959(0x1bb)][_0x4f5b65['activeLayer']]['width'],_0x4f5b65[_0xf72959(0x1bb)][_0x4f5b65[_0xf72959(0xe8)]][_0xf72959(0x179)]),_0x2319c1['drawImage'](_0x24cbd3,0x0,0x0),redrawAll();},_0x24cbd3['src']=_0x5ab4f1;}function exportImage(_0x147faa){const _0x2f0496=a0_0x695ef8;let _0x532273=getCurrentProject(),_0x47fdbe=_0x532273['frames'],_0x3dcaba=_0x147faa==='jpg'||_0x147faa===_0x2f0496(0x191)?'image/jpeg':'image/'+_0x147faa,_0x3bae70=_0x47fdbe[_0x2f0496(0x1dd)]>0x1,_0x17c152=(_0x532273[_0x2f0496(0x150)]||_0x2f0496(0xb6))[_0x2f0496(0x9d)](/[\\/:*?"<>|]/g,'_');if(!_0x3bae70){let _0x348cf2=document[_0x2f0496(0x9e)]('canvas');_0x348cf2['width']=_0x532273[_0x2f0496(0x7e)]*cellSize,_0x348cf2[_0x2f0496(0x179)]=_0x532273['height']*cellSize;let _0x5cc164=_0x348cf2[_0x2f0496(0x19d)]('2d'),_0x387b44=getCurrentFrame();for(let _0x2de020=0x0;_0x2de020<_0x387b44[_0x2f0496(0x1bb)][_0x2f0496(0x1dd)];_0x2de020++){_0x5cc164['drawImage'](_0x387b44[_0x2f0496(0x1bb)][_0x2de020],0x0,0x0);}let _0x454703=document['createElement']('a');_0x454703[_0x2f0496(0x16d)]=_0x17c152+'.'+_0x147faa,_0x147faa===_0x2f0496(0x86)||_0x147faa===_0x2f0496(0x191)?_0x454703[_0x2f0496(0x148)]=_0x348cf2[_0x2f0496(0xe2)](_0x3dcaba,0.92):_0x454703[_0x2f0496(0x148)]=_0x348cf2[_0x2f0496(0xe2)](_0x3dcaba),_0x454703[_0x2f0496(0xb3)]();}else{if(_0x147faa===_0x2f0496(0x117)&&typeof window[_0x2f0496(0x153)]!==_0x2f0496(0x133))exportWebpAnimation(_0x47fdbe,_0x532273['width']*cellSize,_0x532273['height']*cellSize,_0x17c152);else for(let _0x52a5d7=0x0;_0x52a5d7<_0x47fdbe[_0x2f0496(0x1dd)];_0x52a5d7++){let _0x41ea67=document['createElement'](_0x2f0496(0x192));_0x41ea67[_0x2f0496(0x7e)]=_0x532273['width']*cellSize,_0x41ea67[_0x2f0496(0x179)]=_0x532273[_0x2f0496(0x179)]*cellSize;let _0x2168a7=_0x41ea67[_0x2f0496(0x19d)]('2d'),_0x850381=_0x47fdbe[_0x52a5d7];for(let _0x59ca6e=0x0;_0x59ca6e<_0x850381[_0x2f0496(0x1bb)][_0x2f0496(0x1dd)];_0x59ca6e++){_0x2168a7['drawImage'](_0x850381['layers'][_0x59ca6e],0x0,0x0);}let _0xa6708b=document[_0x2f0496(0x9e)]('a');_0xa6708b['download']=_0x17c152+'-f'+(_0x52a5d7+0x1)+'.'+_0x147faa,_0x147faa==='jpg'||_0x147faa===_0x2f0496(0x191)?_0xa6708b[_0x2f0496(0x148)]=_0x41ea67[_0x2f0496(0xe2)](_0x3dcaba,0.92):_0xa6708b[_0x2f0496(0x148)]=_0x41ea67['toDataURL'](_0x3dcaba),setTimeout(()=>_0xa6708b[_0x2f0496(0xb3)](),_0x52a5d7*0x64);}}}async function exportWebpAnimation(_0x5e285d,_0x5b1495,_0x2e2954,_0x3095ed=a0_0x695ef8(0x1b1)){const _0xb944c2=a0_0x695ef8;if(!window[_0xb944c2(0x153)]||!window[_0xb944c2(0x1b4)]){alert(_0xb944c2(0x156));return;}const _0x5c6353=[],_0x26fbc6=new VideoEncoder({'output':_0x138a10=>_0x5c6353[_0xb944c2(0x18e)](_0x138a10),'error':_0x20d572=>console['error'](_0x20d572)});_0x26fbc6[_0xb944c2(0x1cc)]({'codec':'vp8','width':_0x5b1495,'height':_0x2e2954,'framerate':0x5});for(let _0x4a4010=0x0;_0x4a4010<_0x5e285d[_0xb944c2(0x1dd)];_0x4a4010++){let _0x46b056=document[_0xb944c2(0x9e)](_0xb944c2(0x192));_0x46b056['width']=_0x5b1495,_0x46b056[_0xb944c2(0x179)]=_0x2e2954;let _0x3a1280=_0x46b056[_0xb944c2(0x19d)]('2d'),_0x4a1879=_0x5e285d[_0x4a4010];for(let _0xb27a67=0x0;_0xb27a67<_0x4a1879[_0xb944c2(0x1bb)][_0xb944c2(0x1dd)];_0xb27a67++){_0x3a1280[_0xb944c2(0x93)](_0x4a1879[_0xb944c2(0x1bb)][_0xb27a67],0x0,0x0);}let _0x18d9a4=await createImageBitmap(_0x46b056);_0x26fbc6[_0xb944c2(0x120)](_0x18d9a4,{'keyFrame':!![],'duration':0xc8}),_0x18d9a4[_0xb944c2(0xdd)]();}await _0x26fbc6[_0xb944c2(0x1b2)](),_0x26fbc6[_0xb944c2(0xdd)]();const _0x480383=new Blob(_0x5c6353[_0xb944c2(0x1d0)](_0x495ccf=>_0x495ccf[_0xb944c2(0x19b)]?_0x495ccf:_0x495ccf[_0xb944c2(0x10c)]),{'type':'video/webm'}),_0x1849b6=document[_0xb944c2(0x9e)]('a');_0x1849b6[_0xb944c2(0x16d)]=_0x3095ed+_0xb944c2(0x169),_0x1849b6['href']=URL['createObjectURL'](_0x480383),_0x1849b6['click']();}function exportGif(){const _0x520bd8=a0_0x695ef8;let _0x2031c5=getCurrentProject(),_0x10aedd=_0x2031c5[_0x520bd8(0x7b)],_0x4ae3c1=_0x2031c5[_0x520bd8(0x7e)]*cellSize,_0x427485=_0x2031c5[_0x520bd8(0x179)]*cellSize;const _0x274840=_0x10aedd[_0x520bd8(0x1d0)](_0x4c2ea0=>{const _0x307e6a=_0x520bd8;let _0x13f97d=document['createElement'](_0x307e6a(0x192));_0x13f97d[_0x307e6a(0x7e)]=_0x4ae3c1,_0x13f97d['height']=_0x427485;let _0x6da255=_0x13f97d[_0x307e6a(0x19d)]('2d');for(let _0x35fbfc=0x0;_0x35fbfc<_0x4c2ea0[_0x307e6a(0x1bb)][_0x307e6a(0x1dd)];_0x35fbfc++){_0x6da255[_0x307e6a(0x93)](_0x4c2ea0[_0x307e6a(0x1bb)][_0x35fbfc],0x0,0x0);}return _0x13f97d[_0x307e6a(0xe2)](_0x307e6a(0xf9));});Promise[_0x520bd8(0x159)](_0x274840[_0x520bd8(0x1d0)](_0x1139f6=>{return new Promise(_0x48293c=>{const _0x556150=a0_0x4698,_0x5ae622=new Image();_0x5ae622[_0x556150(0x108)]=_0x1139f6,_0x5ae622[_0x556150(0xb7)]=()=>_0x48293c(_0x5ae622);});}))[_0x520bd8(0xb2)](_0x5a8bb0=>{const _0xcbe3be=_0x520bd8,_0x12e5d2=_0x5a8bb0[_0xcbe3be(0x77)](_0x1ef8c1=>_0x1ef8c1[_0xcbe3be(0x7e)]>0x0&&_0x1ef8c1[_0xcbe3be(0x179)]>0x0);if(_0x12e5d2['length']===0x0){alert(_0xcbe3be(0xfd));return;}const _0x2183cc=(_0x2031c5[_0xcbe3be(0x150)]||_0xcbe3be(0x1b1))[_0xcbe3be(0x9d)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x12e5d2,animationDelay,_0x2183cc+'.gif');});}function exportApng(){const _0x583625=a0_0x695ef8;let _0x282124=getCurrentProject(),_0x25c926=_0x282124[_0x583625(0x7b)],_0x416632=_0x282124['width']*cellSize,_0x5b19df=_0x282124['height']*cellSize;const _0x5335f0=_0x25c926[_0x583625(0x1d0)](_0x25f18a=>{const _0x1944f3=_0x583625;let _0x580374=document[_0x1944f3(0x9e)](_0x1944f3(0x192));_0x580374[_0x1944f3(0x7e)]=_0x416632,_0x580374[_0x1944f3(0x179)]=_0x5b19df;let _0x3bcc36=_0x580374['getContext']('2d');for(let _0x7ed100=0x0;_0x7ed100<_0x25f18a[_0x1944f3(0x1bb)]['length'];_0x7ed100++){_0x3bcc36[_0x1944f3(0x93)](_0x25f18a[_0x1944f3(0x1bb)][_0x7ed100],0x0,0x0);}let _0x4928e4=new Image();return _0x4928e4[_0x1944f3(0x108)]=_0x580374['toDataURL']('image/png'),_0x4928e4;}),_0x4b0681=(_0x282124['name']||_0x583625(0x1b1))[_0x583625(0x9d)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x5335f0,_0x416632,_0x5b19df,animationDelay,_0x4b0681+_0x583625(0xec));}const dbName=a0_0x695ef8(0xf3),storeName=a0_0x695ef8(0x166);function openDB(){return new Promise((_0x53cc12,_0x1e5009)=>{const _0x3b2cf2=a0_0x4698,_0x27a848=indexedDB['open'](dbName,0x1);_0x27a848['onupgradeneeded']=()=>{_0x27a848['result']['createObjectStore'](storeName);},_0x27a848[_0x3b2cf2(0x78)]=()=>_0x53cc12(_0x27a848[_0x3b2cf2(0x151)]),_0x27a848[_0x3b2cf2(0x109)]=()=>_0x1e5009(_0x27a848[_0x3b2cf2(0x1b9)]);});}async function idbSet(_0x306809,_0x396bc3){const _0x25ca8c=await openDB();return new Promise((_0x57f0b4,_0x28e4da)=>{const _0x5dd143=a0_0x4698,_0x1737a2=_0x25ca8c['transaction'](storeName,_0x5dd143(0xad));_0x1737a2['objectStore'](storeName)[_0x5dd143(0x1cf)](_0x396bc3,_0x306809),_0x1737a2[_0x5dd143(0xce)]=()=>_0x57f0b4(),_0x1737a2[_0x5dd143(0x109)]=()=>_0x28e4da(_0x1737a2['error']);});}async function idbGet(_0x32df4b){const _0x7094f9=await openDB();return new Promise((_0xe8afc0,_0x249cf0)=>{const _0x11ff4d=a0_0x4698,_0x2def58=_0x7094f9[_0x11ff4d(0x1c8)](storeName,'readonly'),_0x517ae9=_0x2def58[_0x11ff4d(0x1a7)](storeName)[_0x11ff4d(0x99)](_0x32df4b);_0x517ae9[_0x11ff4d(0x78)]=()=>_0xe8afc0(_0x517ae9['result']),_0x517ae9[_0x11ff4d(0x109)]=()=>_0x249cf0(_0x517ae9[_0x11ff4d(0x1b9)]);});}async function idbDelete(_0x1afc28){const _0x255b92=await openDB();return new Promise((_0x2bdf8e,_0x4bc341)=>{const _0x1374fb=a0_0x4698,_0x2f82c3=_0x255b92[_0x1374fb(0x1c8)](storeName,_0x1374fb(0xad));_0x2f82c3['objectStore'](storeName)[_0x1374fb(0x1d4)](_0x1afc28),_0x2f82c3[_0x1374fb(0xce)]=()=>_0x2bdf8e(),_0x2f82c3[_0x1374fb(0x109)]=()=>_0x4bc341(_0x2f82c3[_0x1374fb(0x1b9)]);});}async function idbClear(){const _0xe62cc3=await openDB();return new Promise((_0x2906a7,_0x115a15)=>{const _0x70cbce=a0_0x4698,_0x5078d1=_0xe62cc3['transaction'](storeName,_0x70cbce(0xad));_0x5078d1['objectStore'](storeName)[_0x70cbce(0xb1)](),_0x5078d1[_0x70cbce(0xce)]=()=>_0x2906a7(),_0x5078d1['onerror']=()=>_0x115a15(_0x5078d1[_0x70cbce(0x1b9)]);});}function saveProjectFile(){const _0x2cac8f=a0_0x695ef8,_0x378dfa={'projects':projects[_0x2cac8f(0x1d0)](_0x445957=>({'width':_0x445957['width'],'height':_0x445957[_0x2cac8f(0x179)],'name':_0x445957[_0x2cac8f(0x150)]||'','activeFrame':_0x445957[_0x2cac8f(0xfc)],'frames':_0x445957['frames']['map'](_0x296740=>({'activeLayer':_0x296740[_0x2cac8f(0xe8)],'layers':_0x296740[_0x2cac8f(0x1bb)][_0x2cac8f(0x1d0)](_0x4b647a=>_0x4b647a['toDataURL']())}))})),'activeProject':activeProject},_0x81253f=new Blob([JSON[_0x2cac8f(0xbc)](_0x378dfa)],{'type':_0x2cac8f(0xd9)}),_0xe94f6c=document[_0x2cac8f(0x9e)]('a');_0xe94f6c[_0x2cac8f(0x16d)]=_0x2cac8f(0x1ad),_0xe94f6c[_0x2cac8f(0x148)]=URL['createObjectURL'](_0x81253f),_0xe94f6c[_0x2cac8f(0xb3)]();}function a0_0x1437(){const _0x1ea5eb=['„ÉÄ„Éº„ÇØ„ÉÜ„Éº„Éû„Å´ÂàáÊõø','„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ','title','oncomplete','justifyContent','button','selected','readAsText','#000080','type','ontouchmove','layerList','body','round','application/json','1233918yPbPlC','#888888','<span\x20style=\x22font-size:13px;color:#888;\x22>ÈÄèÊòé</span>','close','finished','layerHistories','keydown','isFinite','toDataURL','pointerdown','px,\x20','nezumi_about_visited','touches','#800080','activeLayer','auto','204rcBLdG','stopPropagation','.apng','transform','lineTo','>ÂõõËßí„Éö„É≥</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22','#palette-penMode','left','#ffffff','nezumi-sketch-db','/index.html','Shift','color','remove','zoomSlider','image/png','add','project-name-edit','activeFrame','GIF„Å´Â§âÊèõ„Åß„Åç„ÇãÁîªÂÉè„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ','arc','beforeunload','revokeObjectURL','nezumi-projects','rgba(0,0,0,0.3)','fillRect','layer-thumb','„É¨„Ç§„É§„Éº','tool','touch','src','onerror','wheel','\x20active','data','penSize','touchAction','className','pathname','„Éï„É¨„Éº„É†„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','application/octet-stream','_spritesheet.png','boolean','removeEventListener','project-item','webp','animSpeedValue','#ffa500','projects','„Éë„É¨„ÉÉ„Éà„Å´Ëâ≤„ÇíËøΩÂä†','textContent','replaceWith','oninput','pointerId','encode','onmousemove','grab','trim','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','#00ff00','pointermove','splice','layer-btn','beginPath','onmouseup','layer-item','matchMedia','insertBefore','globalAlpha','crosshair','touchmove','documentElement','nezumi-standalone','undefined','ontouchstart','ontouchend','.tool-btn','toString','innerWidth','>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22','nezumi-theme','>‰∏∏„Éö„É≥</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ÈÄèÊòéÂ∫¶:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','„É©„Ç§„Éà„ÉÜ„Éº„Éû„Å´ÂàáÊõø','4160247OyhdzM','GIF','ontouchcancel','flex','penMode','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','target','center','palette-toolbar','sidebar','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>Â°ó„Çä„Å§„Å∂„Åó</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Â§™„Åï:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','href','onmousedown','„Çπ„Çø„É≥„Éâ„Ç¢„É≠„É≥ÂΩ¢Âºè„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:\x20','constructor','menu-toggle-btn-close','touchend','frame-btn','project','name','result','palette-penMode','WebCodecs','alphaSlider','strokeStyle','„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØWebCodecs„Å´„Çà„ÇãWEBP„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ','parentNode','#palette-alphaSlider','all','frameCount','isArray','closePath','nezumi-sketch-save','grabbing','603KTPhXA','40662IZScKj','„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','cursor','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','number','#00000000','keyval','/about?terms=true','unshift','.webm','#c0c0c0','#ff69b4','Enter','download','getItem','IndexedDB„Åã„Çâ„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº‚Ä¶','project-name','rgba(','text','alphaValue','apply','keyup','4999WXeDHo','themeToggleBtn','readAsArrayBuffer','height','removeChild','zoomValue','split','style','translate(','#newProjName','‰øùÂ≠ò„Ç®„É©„Éº','blur','none','span','select','moveTo','changedTouches','.section.collapsible\x20.section-content','has','key','pan','35jhrvXA','hypot','value','push','projectList','onkeydown','jpeg','canvas','min','search','2041481YeIoTI','‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº:','color-palette','‰∏ä„Å´ÁßªÂãï','addFrame','contains','byteLength','onchange','getContext','frame-item','eraser','layerRedoStacks','.palette-color','Ë™≠Ëæº„Ç®„É©„Éº','fill','\x20selected','onmouseleave','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>Ê∂à„Åó„Ç¥„É†</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','objectStore','main-container','startsWith','firstChild','#palette-toolbar\x20.tool-btn','decode','nezumi-sketch.msketch','3000','onblur','top','nezumi-animation','flush','UPNG','VideoEncoder','touchcancel','80px','#ffff00','canvas-container','error','disabled','layers','background','clearRect','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§','block','div','dark','overflow','max','globalCompositeOperation','touchstart','matches','classList','transaction','deltaY','forEach','#palette-alphaValue','configure','pen','dataset','put','map','aria-pressed','clientX','zIndex','delete','active','#444444','„Ç≥„Éû)','animSpeedRange','nezumi-animation.gif','image','#newProjCancelBtn','parse','length','restore','palette-alphaValue','log','files','render','querySelector','nezumi-palette','pointerup','input','shift','clientY','filter','onsuccess','876711coRyxv','createObjectURL','frames','activeProject','querySelectorAll','width','getImageData','onclick','.section-content','preventDefault','releasePointerCapture','„Çπ„Éó„É©„Ç§„Éà„Ç∑„Éº„Éà„ÅÆÊã°Â§ßÁéá„ÇíÊåáÂÆöÔºà‰æã:\x201\x20=\x20ÂÖÉ„Çµ„Ç§„Ç∫,\x202\x20=\x202ÂÄçÔºâ','pop','jpg','#newProjH','sidebar-open','new-project-dialog','light','save','#ff00ff','‰∏ã„Å´ÁßªÂãï','stroke','resize','100vh','#008000','data-theme','drawImage','anonymous','buffer','(((.+)+)+)+$','#cccccc','getBoundingClientRect','get','circle','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','94456HpWWLj','replace','createElement','332jiZzTz','lib/gif.worker.js','DOMContentLoaded','#ccc','palette-color','abs','position','#ff0000','putImageData','toggle','404qRyLPo','image/apng','30nIQDzV','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','readwrite','transparent','focus','„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ','clear','then','click','floor','addEventListener','nezumi-drawing','onload','colorPicker','join','setAttribute','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','stringify','#000000','catch','menu-toggle-btn','frame-thumb','appendChild','nezumi-animation.apng','innerHTML','getElementById','fillStyle','„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü','display','open','palette-add-btn','#newProjW'];a0_0x1437=function(){return _0x1ea5eb;};return a0_0x1437();}function saveProjectFile(){const _0x48ffc8=a0_0x695ef8,_0xb2fd39={'projects':projects[_0x48ffc8(0x1d0)](_0x465bf7=>({'width':_0x465bf7['width'],'height':_0x465bf7[_0x48ffc8(0x179)],'name':_0x465bf7[_0x48ffc8(0x150)]||'','activeFrame':_0x465bf7['activeFrame'],'frames':_0x465bf7[_0x48ffc8(0x7b)][_0x48ffc8(0x1d0)](_0x3e1faf=>({'activeLayer':_0x3e1faf[_0x48ffc8(0xe8)],'layers':_0x3e1faf[_0x48ffc8(0x1bb)][_0x48ffc8(0x1d0)](_0xa873f9=>_0xa873f9['toDataURL']())}))})),'activeProject':activeProject},_0x2dcaf9=new Blob([JSON['stringify'](_0xb2fd39)],{'type':_0x48ffc8(0xd9)}),_0xf9a6bf=document['createElement']('a');_0xf9a6bf['download']=_0x48ffc8(0x1ad),_0xf9a6bf[_0x48ffc8(0x148)]=URL[_0x48ffc8(0x7a)](_0x2dcaf9),_0xf9a6bf['click']();}async function saveProjectToIDB(){const _0x380c34=a0_0x695ef8,_0x1cd10e={'projects':projects[_0x380c34(0x1d0)](_0xca80ae=>({'width':_0xca80ae[_0x380c34(0x7e)],'height':_0xca80ae['height'],'name':_0xca80ae[_0x380c34(0x150)]||'','activeFrame':_0xca80ae['activeFrame'],'frames':_0xca80ae[_0x380c34(0x7b)]['map'](_0x27532b=>({'activeLayer':_0x27532b[_0x380c34(0xe8)],'layers':_0x27532b[_0x380c34(0x1bb)]['map'](_0x55a4f3=>_0x55a4f3[_0x380c34(0xe2)]())}))})),'activeProject':activeProject};try{await idbSet('nezumi-sketch-save',_0x1cd10e),console[_0x380c34(0x1e0)]('„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíIndexedDB„Å´‰øùÂ≠ò„Åó„Åü„ÉÅ„É•„ÉºÔºÅ');}catch(_0x5a639e){console[_0x380c34(0x1b9)](_0x380c34(0x196),_0x5a639e);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x695ef8(0xb5)](a0_0x695ef8(0xff),_0x400954=>{saveProjectToIDB();});function loadProjectFile(_0x3153ec){const _0x4585a9=a0_0x695ef8,_0x3fab51=_0x3153ec[_0x4585a9(0x143)][_0x4585a9(0x1e1)][0x0];if(!_0x3fab51)return;if(_0x3fab51[_0x4585a9(0xd4)]&&_0x3fab51[_0x4585a9(0xd4)][_0x4585a9(0x1a9)](_0x4585a9(0x1da))){loadStandaloneFromFile(_0x3fab51)['then'](_0x50a8de=>{const _0x259f00=_0x4585a9;alert(_0x259f00(0x14a)+(_0x50a8de[_0x259f00(0x150)]||'ÁîªÂÉè'));})['catch'](_0x266ced=>{console['warn'](_0x266ced),alert('„Éï„Ç°„Ç§„É´„Å´„Éó„É≠„Ç∏„Çß„ÇØ„Éà„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇË™≠„ÅøËæº„Åø„Åß„Åç„Åæ„Åõ„Çì„ÄÇ');});return;}const _0x58dbb3=new FileReader();_0x58dbb3[_0x4585a9(0xb7)]=function(_0x153681){const _0x470e03=_0x4585a9;try{const _0x69852f=JSON['parse'](_0x153681[_0x470e03(0x143)]['result']);projects=_0x69852f[_0x470e03(0x11a)][_0x470e03(0x1d0)]((_0x56bf58,_0x1664c1)=>{const _0x55cc44=_0x470e03;let _0x3a88e7=createProject(_0x56bf58[_0x55cc44(0x7e)],_0x56bf58['height'],_0x56bf58[_0x55cc44(0x150)]||'ÁîªÂÉè'+(_0x1664c1+0x1));return _0x3a88e7[_0x55cc44(0x7b)]=_0x56bf58[_0x55cc44(0x7b)][_0x55cc44(0x1d0)](_0x4c4649=>{const _0x502304=_0x55cc44;let _0x2e8bba={'layers':[],'activeLayer':_0x4c4649[_0x502304(0xe8)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x1db51c=0x0;_0x1db51c<_0x4c4649['layers'][_0x502304(0x1dd)];_0x1db51c++){let _0x3fccf3=new Image();_0x3fccf3[_0x502304(0x108)]=_0x4c4649[_0x502304(0x1bb)][_0x1db51c];let _0x54546d=document[_0x502304(0x9e)]('canvas');_0x54546d[_0x502304(0x7e)]=_0x56bf58[_0x502304(0x7e)]*cellSize,_0x54546d['height']=_0x56bf58['height']*cellSize,_0x3fccf3[_0x502304(0xb7)]=()=>{const _0x223d67=_0x502304;let _0x3195fb=_0x54546d[_0x223d67(0x19d)]('2d');_0x3195fb[_0x223d67(0x1bd)](0x0,0x0,_0x54546d[_0x223d67(0x7e)],_0x54546d[_0x223d67(0x179)]),_0x3195fb[_0x223d67(0x93)](_0x3fccf3,0x0,0x0);},_0x3fccf3[_0x502304(0xb7)](),_0x2e8bba['layers'][_0x502304(0x18e)](_0x54546d),_0x2e8bba[_0x502304(0xdf)][_0x502304(0x18e)]([]),_0x2e8bba[_0x502304(0x1a0)][_0x502304(0x18e)]([]);}return _0x2e8bba;}),_0x3a88e7[_0x55cc44(0xfc)]=_0x56bf58[_0x55cc44(0xfc)],_0x3a88e7['name']=_0x56bf58['name']||'ÁîªÂÉè'+(_0x1664c1+0x1),_0x3a88e7;}),activeProject=_0x69852f[_0x470e03(0x7c)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x5081e4){alert(_0x470e03(0xcc));}},_0x58dbb3[_0x4585a9(0xd2)](_0x3fab51);}async function loadProjectFromIDB(){const _0x3b1baf=a0_0x695ef8;try{const _0x3db348=await idbGet(_0x3b1baf(0x15d));if(!_0x3db348)return;projects=_0x3db348[_0x3b1baf(0x11a)][_0x3b1baf(0x1d0)]((_0x167b61,_0x2242d5)=>{const _0x8113df=_0x3b1baf;let _0x119986=createProject(_0x167b61['width'],_0x167b61[_0x8113df(0x179)],_0x167b61[_0x8113df(0x150)]||'ÁîªÂÉè'+(_0x2242d5+0x1));return _0x119986[_0x8113df(0x7b)]=_0x167b61[_0x8113df(0x7b)][_0x8113df(0x1d0)](_0x429b75=>{const _0x3d28c8=_0x8113df;let _0x37f440={'layers':[],'activeLayer':_0x429b75[_0x3d28c8(0xe8)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x33f30b=0x0;_0x33f30b<_0x429b75[_0x3d28c8(0x1bb)][_0x3d28c8(0x1dd)];_0x33f30b++){let _0x11ddca=new Image();_0x11ddca[_0x3d28c8(0x108)]=_0x429b75[_0x3d28c8(0x1bb)][_0x33f30b];let _0x53b503=document[_0x3d28c8(0x9e)]('canvas');_0x53b503[_0x3d28c8(0x7e)]=_0x167b61[_0x3d28c8(0x7e)]*cellSize,_0x53b503['height']=_0x167b61[_0x3d28c8(0x179)]*cellSize,_0x11ddca[_0x3d28c8(0xb7)]=()=>{const _0x3ebc18=_0x3d28c8;let _0x5a865d=_0x53b503[_0x3ebc18(0x19d)]('2d');_0x5a865d['clearRect'](0x0,0x0,_0x53b503[_0x3ebc18(0x7e)],_0x53b503[_0x3ebc18(0x179)]),_0x5a865d[_0x3ebc18(0x93)](_0x11ddca,0x0,0x0);},_0x37f440['layers'][_0x3d28c8(0x18e)](_0x53b503),_0x37f440['layerHistories'][_0x3d28c8(0x18e)]([]),_0x37f440[_0x3d28c8(0x1a0)]['push']([]);}return _0x37f440;}),_0x119986[_0x8113df(0xfc)]=_0x167b61[_0x8113df(0xfc)],_0x119986[_0x8113df(0x150)]=_0x167b61[_0x8113df(0x150)]||'ÁîªÂÉè'+(_0x2242d5+0x1),_0x119986;}),activeProject=_0x3db348[_0x3b1baf(0x7c)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool('pen'),console['log']('IndexedDB„Åã„Çâ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Çì„Å†„ÉÅ„É•„ÉºÔºÅ');}catch(_0x5957b4){alert(_0x3b1baf(0x16f)),console[_0x3b1baf(0x1b9)](_0x5957b4);}}function wait(_0x3a900d){return new Promise(_0x2dfa67=>setTimeout(_0x2dfa67,_0x3a900d));}function initCanvas(){const _0x4cd44f=a0_0x695ef8,_0x4ef67f=parseInt(0x10),_0x5e27ec=parseInt(0x10);let _0x21f242=getCurrentProject();_0x21f242['width']=_0x4ef67f,_0x21f242[_0x4cd44f(0x179)]=_0x5e27ec,canvas['width']=_0x4ef67f*cellSize,canvas[_0x4cd44f(0x179)]=_0x5e27ec*cellSize,_0x21f242[_0x4cd44f(0x1bb)]=[],_0x21f242['layerHistories']=[],_0x21f242[_0x4cd44f(0x1a0)]=[];let _0x44cd6e=document[_0x4cd44f(0x9e)](_0x4cd44f(0x192));_0x44cd6e[_0x4cd44f(0x7e)]=_0x4ef67f*cellSize,_0x44cd6e[_0x4cd44f(0x179)]=_0x5e27ec*cellSize,_0x21f242[_0x4cd44f(0x1bb)][_0x4cd44f(0x18e)](_0x44cd6e),_0x21f242[_0x4cd44f(0xdf)][_0x4cd44f(0x18e)]([]),_0x21f242[_0x4cd44f(0x1a0)]['push']([]),_0x21f242[_0x4cd44f(0xe8)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x4cd44f(0x149)]=null,canvas['onmousemove']=null,canvas['onmouseup']=null,canvas[_0x4cd44f(0x1a5)]=null,canvas['ontouchstart']=null,canvas[_0x4cd44f(0xd5)]=null,canvas[_0x4cd44f(0x135)]=null,canvas[_0x4cd44f(0x13f)]=null,canvas['removeEventListener']('touchstart',handleTouchStart),canvas['removeEventListener']('touchmove',handleTouchMove),canvas[_0x4cd44f(0x115)](_0x4cd44f(0x14d),handleTouchEnd),canvas[_0x4cd44f(0x115)]('touchcancel',handleTouchEnd),canvas[_0x4cd44f(0x149)]=handleMouseDown,canvas[_0x4cd44f(0x121)]=handleMouseMove,canvas[_0x4cd44f(0x12a)]=handleMouseUp,canvas[_0x4cd44f(0x1a5)]=handleMouseUp,canvas[_0x4cd44f(0x134)]=handleTouchStart,canvas[_0x4cd44f(0xd5)]=handleTouchMove,canvas[_0x4cd44f(0x135)]=handleTouchEnd,canvas[_0x4cd44f(0x13f)]=handleTouchEnd,canvas[_0x4cd44f(0xb5)](_0x4cd44f(0x1c5),handleTouchStart,{'passive':![]}),canvas[_0x4cd44f(0xb5)](_0x4cd44f(0x130),handleTouchMove,{'passive':![]}),canvas['addEventListener'](_0x4cd44f(0x14d),handleTouchEnd,{'passive':![]}),canvas[_0x4cd44f(0xb5)](_0x4cd44f(0x1b5),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x5b7b6b=a0_0x695ef8,_0x4670bd=document[_0x5b7b6b(0xc4)](_0x5b7b6b(0x197));if(!_0x4670bd)return;_0x4670bd['innerHTML']='',PALETTE_COLORS['forEach']((_0x6ed2fd,_0x49911c)=>{const _0x17a812=_0x5b7b6b,_0x114a2d=document['createElement'](_0x17a812(0xd0));_0x114a2d[_0x17a812(0x10f)]=_0x17a812(0xa3);_0x6ed2fd===_0x17a812(0xae)||_0x6ed2fd===_0x17a812(0x165)?(_0x114a2d['style'][_0x17a812(0x1bc)]=_0x17a812(0x124),_0x114a2d[_0x17a812(0xcd)]='ÈÄèÊòé',_0x114a2d['innerHTML']=_0x17a812(0xdc)):(_0x114a2d['style'][_0x17a812(0x1bc)]=_0x6ed2fd,_0x114a2d[_0x17a812(0xcd)]=_0x6ed2fd);_0x114a2d[_0x17a812(0x80)]=()=>{const _0x521000=_0x17a812;currentColor=_0x6ed2fd,_0x6ed2fd===_0x521000(0xae)||_0x6ed2fd===_0x521000(0x165)?document[_0x521000(0xc4)](_0x521000(0xb8))[_0x521000(0x18d)]='#000000':document[_0x521000(0xc4)](_0x521000(0xb8))[_0x521000(0x18d)]=_0x6ed2fd,document[_0x521000(0x7d)]('.palette-color')[_0x521000(0x1ca)](_0x536b93=>_0x536b93[_0x521000(0x1c7)]['remove']('selected')),_0x114a2d[_0x521000(0x1c7)][_0x521000(0xfa)](_0x521000(0xd1));};if(_0x49911c!==0x0){const _0x861957=document[_0x17a812(0x9e)]('span');_0x861957['textContent']='√ó',_0x861957[_0x17a812(0x10f)]='palette-del-btn',_0x861957[_0x17a812(0xcd)]='„Åì„ÅÆËâ≤„Çí„Éë„É¨„ÉÉ„Éà„Åã„ÇâÂâäÈô§',_0x861957[_0x17a812(0x80)]=_0x32d03d=>{const _0x14f2f8=_0x17a812;_0x32d03d[_0x14f2f8(0xeb)](),PALETTE_COLORS[_0x14f2f8(0x1dd)]>0x2&&(PALETTE_COLORS['splice'](_0x49911c,0x1),createPalette());},_0x114a2d[_0x17a812(0xc1)](_0x861957);}_0x4670bd['appendChild'](_0x114a2d);});const _0x40a5f0=document['createElement']('button');_0x40a5f0[_0x5b7b6b(0x10f)]=_0x5b7b6b(0xc9),_0x40a5f0[_0x5b7b6b(0xcd)]=_0x5b7b6b(0x11b),_0x40a5f0['innerHTML']='+',_0x40a5f0[_0x5b7b6b(0x80)]=_0x113b2c=>{const _0x4a70f9=_0x5b7b6b;_0x113b2c[_0x4a70f9(0xeb)]();const _0x4c31f2=document[_0x4a70f9(0x9e)](_0x4a70f9(0x74));_0x4c31f2['type']=_0x4a70f9(0xf6),_0x4c31f2[_0x4a70f9(0x17d)][_0x4a70f9(0xc7)]='none';let _0x202737=![];_0x4c31f2[_0x4a70f9(0x11e)]=_0x1776b2=>{const _0x51119f=_0x4a70f9;if(!_0x202737){PALETTE_COLORS[_0x51119f(0x168)](_0x1776b2['target'][_0x51119f(0x18d)]);if(PALETTE_COLORS['length']>0x18)PALETTE_COLORS=PALETTE_COLORS['slice'](0x0,0x18);savePaletteToDB(),createPalette(),_0x202737=!![],_0x4c31f2[_0x51119f(0xf7)]();}},_0x4c31f2[_0x4a70f9(0xb5)](_0x4a70f9(0x181),()=>{const _0x58c723=_0x4a70f9;if(!_0x202737)_0x4c31f2[_0x58c723(0xf7)]();}),_0x4c31f2[_0x4a70f9(0xb5)]('click',_0x1bbcb2=>_0x1bbcb2['stopPropagation']()),document[_0x4a70f9(0xd7)][_0x4a70f9(0xc1)](_0x4c31f2),_0x4c31f2[_0x4a70f9(0xaf)](),_0x4c31f2['click']();},_0x4670bd[_0x5b7b6b(0x12d)](_0x40a5f0,_0x4670bd[_0x5b7b6b(0x1aa)]);let _0x3c21a0=document['getElementById']('palette-toolbar');!_0x3c21a0&&(_0x3c21a0=document[_0x5b7b6b(0x9e)](_0x5b7b6b(0x1c0)),_0x3c21a0['id']=_0x5b7b6b(0x145),_0x3c21a0['className']=_0x5b7b6b(0x145),_0x4670bd[_0x5b7b6b(0x157)][_0x5b7b6b(0xc1)](_0x3c21a0)),_0x3c21a0['innerHTML']=_0x5b7b6b(0x9b)+(currentTool===_0x5b7b6b(0x1cd)?_0x5b7b6b(0x10b):'')+'\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>„Éö„É≥</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn'+(currentTool==='eraser'?_0x5b7b6b(0x10b):'')+_0x5b7b6b(0x1a6)+(currentTool===_0x5b7b6b(0x1a3)?_0x5b7b6b(0x10b):'')+_0x5b7b6b(0x147)+(penSize==0x1?_0x5b7b6b(0x1a4):'')+_0x5b7b6b(0xac)+(penSize==0x2?'\x20selected':'')+'>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22'+(penSize==0x3?_0x5b7b6b(0x1a4):'')+'>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22'+(penSize==0x4?_0x5b7b6b(0x1a4):'')+_0x5b7b6b(0x139)+(penMode==='square'?_0x5b7b6b(0x1a4):'')+_0x5b7b6b(0xef)+(penMode===_0x5b7b6b(0x9a)?_0x5b7b6b(0x1a4):'')+_0x5b7b6b(0x13b)+Math['round'](currentAlpha*0x64)+_0x5b7b6b(0xbb)+Math['round'](currentAlpha*0x64)+'%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22undo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>undo</span>\x20Êàª„Åô\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22redo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>redo</span>\x20Êàª„Åô„ÇíÊàª„Åô\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',_0x3c21a0[_0x5b7b6b(0x71)]('#palette-penSize')[_0x5b7b6b(0x19c)]=_0x3f4dd1=>setPenSize(_0x3f4dd1[_0x5b7b6b(0x143)][_0x5b7b6b(0x18d)]),_0x3c21a0['querySelector'](_0x5b7b6b(0xf0))[_0x5b7b6b(0x19c)]=_0x4a90a3=>setPenMode(_0x4a90a3['target'][_0x5b7b6b(0x18d)]),_0x3c21a0[_0x5b7b6b(0x7d)]('.tool-btn')[_0x5b7b6b(0x1ca)](_0x55a9ab=>{const _0x16ca66=_0x5b7b6b;_0x55a9ab[_0x16ca66(0x80)]=()=>setTool(_0x55a9ab['dataset']['tool']);}),_0x3c21a0[_0x5b7b6b(0x71)](_0x5b7b6b(0x158))[_0x5b7b6b(0x11e)]=_0x2889fb=>{const _0x2cba7=_0x5b7b6b;setAlpha(_0x2889fb['target'][_0x2cba7(0x18d)]),_0x3c21a0[_0x2cba7(0x71)](_0x2cba7(0x1cb))[_0x2cba7(0x11c)]=_0x2889fb[_0x2cba7(0x143)][_0x2cba7(0x18d)]+'%';let _0x3e9d55=document[_0x2cba7(0xc4)]('alphaSlider'),_0x5201e9=document['getElementById'](_0x2cba7(0x173));if(_0x3e9d55)_0x3e9d55[_0x2cba7(0x18d)]=_0x2889fb[_0x2cba7(0x143)][_0x2cba7(0x18d)];if(_0x5201e9)_0x5201e9[_0x2cba7(0x11c)]=_0x2889fb[_0x2cba7(0x143)][_0x2cba7(0x18d)]+'%';};}function setAlpha(_0x284274){const _0xd3b785=a0_0x695ef8;let _0x4784e8=Math[_0xd3b785(0x1c3)](0x0,Math[_0xd3b785(0x193)](0x64,parseInt(_0x284274,0xa)||0x0));currentAlpha=_0x4784e8/0x64;let _0xa5621f=document['getElementById']('alphaSlider'),_0x2515cf=document['getElementById'](_0xd3b785(0x173));if(_0xa5621f)_0xa5621f[_0xd3b785(0x18d)]=_0x4784e8;if(_0x2515cf)_0x2515cf[_0xd3b785(0x11c)]=_0x4784e8+'%';let _0x40b7f4=document[_0xd3b785(0xc4)]('palette-alphaSlider'),_0x4384df=document[_0xd3b785(0xc4)](_0xd3b785(0x1df));if(_0x40b7f4)_0x40b7f4[_0xd3b785(0x18d)]=_0x4784e8;if(_0x4384df)_0x4384df['textContent']=_0x4784e8+'%';}async function savePaletteToDB(){const _0x4eacf6=a0_0x695ef8;try{await idbSet('nezumi-palette',PALETTE_COLORS);}catch(_0x5dabed){console['error'](_0x4eacf6(0x180),_0x5dabed);}}async function loadPaletteFromDB(){const _0x2d453f=a0_0x695ef8;try{const _0x1453f9=await idbGet(_0x2d453f(0x72));Array[_0x2d453f(0x15b)](_0x1453f9)&&_0x1453f9[_0x2d453f(0x1dd)]&&(PALETTE_COLORS=_0x1453f9);}catch(_0x3057e3){console[_0x2d453f(0x1b9)](_0x2d453f(0x1a2),_0x3057e3);}}document[a0_0x695ef8(0xb5)](a0_0x695ef8(0xa1),()=>{const _0x38d11f=a0_0x695ef8,_0x443de9=document[_0x38d11f(0xc4)](_0x38d11f(0xb8));_0x443de9&&(_0x443de9['oninput']=_0x2ee037=>{const _0x55cfd0=_0x38d11f;currentColor=_0x2ee037[_0x55cfd0(0x143)][_0x55cfd0(0x18d)],document[_0x55cfd0(0x7d)](_0x55cfd0(0x1a1))[_0x55cfd0(0x1ca)](_0xa39f22=>_0xa39f22[_0x55cfd0(0x1c7)]['remove']('selected'));});const _0xac4362=document[_0x38d11f(0xc4)](_0x38d11f(0x154)),_0x5350f1=document['getElementById']('alphaValue');_0xac4362&&_0x5350f1&&(_0xac4362[_0x38d11f(0x11e)]=_0x3bc3b3=>{const _0x2d90fc=_0x38d11f;setAlpha(_0x3bc3b3['target'][_0x2d90fc(0x18d)]),_0x5350f1[_0x2d90fc(0x11c)]=_0x3bc3b3[_0x2d90fc(0x143)][_0x2d90fc(0x18d)]+'%';let _0x2a94ad=document[_0x2d90fc(0xc4)]('palette-alphaSlider'),_0x1e60b3=document[_0x2d90fc(0xc4)](_0x2d90fc(0x1df));if(_0x2a94ad)_0x2a94ad['value']=_0x3bc3b3[_0x2d90fc(0x143)][_0x2d90fc(0x18d)];if(_0x1e60b3)_0x1e60b3[_0x2d90fc(0x11c)]=_0x3bc3b3[_0x2d90fc(0x143)][_0x2d90fc(0x18d)]+'%';});});async function convertToGIF(_0x397fb0,_0x539ea5=0xc8,_0x1c3e64=a0_0x695ef8(0x1d9)){const _0x361197=a0_0x695ef8,_0x3e7d10=new window[(_0x361197(0x13e))]({'workers':0x2,'quality':0xa,'workerScript':_0x361197(0xa0)});_0x397fb0['forEach'](_0x152a39=>_0x3e7d10[_0x361197(0x199)](_0x152a39,{'delay':_0x539ea5})),_0x3e7d10['on'](_0x361197(0xde),_0x59df4c=>{const _0x4e0e37=_0x361197,_0x3b3013=URL[_0x4e0e37(0x7a)](_0x59df4c),_0x596b62=document['createElement']('a');_0x596b62['href']=_0x3b3013,_0x596b62['download']=_0x1c3e64,document[_0x4e0e37(0xd7)][_0x4e0e37(0xc1)](_0x596b62),_0x596b62[_0x4e0e37(0xb3)](),setTimeout(()=>{const _0x19efad=_0x4e0e37;document[_0x19efad(0xd7)][_0x19efad(0x17a)](_0x596b62),URL['revokeObjectURL'](_0x3b3013);},0x3e8);}),_0x3e7d10[_0x361197(0x70)]();}function makeAPNGBlob(_0x4dad31,_0x2a1d73,_0x54556c,_0x3dd8de=0xc8){const _0x1964fb=a0_0x695ef8,_0x445533=[],_0x991f89=[],_0x36a588=document[_0x1964fb(0x9e)](_0x1964fb(0x192));_0x36a588['width']=_0x2a1d73,_0x36a588[_0x1964fb(0x179)]=_0x54556c;const _0x2f2280=_0x36a588[_0x1964fb(0x19d)]('2d');_0x4dad31['forEach'](_0x593985=>{const _0x1ced9f=_0x1964fb;_0x2f2280[_0x1ced9f(0x1bd)](0x0,0x0,_0x2a1d73,_0x54556c),_0x2f2280[_0x1ced9f(0x93)](_0x593985,0x0,0x0,_0x2a1d73,_0x54556c);const _0x58ade3=_0x2f2280[_0x1ced9f(0x7f)](0x0,0x0,_0x2a1d73,_0x54556c)['data'][_0x1ced9f(0x95)];_0x445533[_0x1ced9f(0x18e)](_0x58ade3),_0x991f89[_0x1ced9f(0x18e)](_0x3dd8de);});const _0xc6d9cc=window[_0x1964fb(0x1b3)]['encode'](_0x445533,_0x2a1d73,_0x54556c,0x0,_0x991f89);return new Blob([_0xc6d9cc],{'type':_0x1964fb(0xaa)});}function convertToAPNG(_0xac2421,_0x1dbda9,_0x3d853b,_0x32548e=0xc8,_0x354ded=a0_0x695ef8(0xc2)){const _0x21a52a=a0_0x695ef8,_0x28a7ab=makeAPNGBlob(_0xac2421,_0x1dbda9,_0x3d853b,_0x32548e),_0x175625=URL[_0x21a52a(0x7a)](_0x28a7ab),_0x3a2d5e=document[_0x21a52a(0x9e)]('a');_0x3a2d5e['href']=_0x175625,_0x3a2d5e[_0x21a52a(0x16d)]=_0x354ded,document[_0x21a52a(0xd7)][_0x21a52a(0xc1)](_0x3a2d5e),_0x3a2d5e[_0x21a52a(0xb3)](),setTimeout(()=>{const _0x1188af=_0x21a52a;document['body'][_0x1188af(0x17a)](_0x3a2d5e),URL[_0x1188af(0x100)](_0x175625);},0x3e8);}async function loadImages(_0x565ab6){const _0x177b62=a0_0x695ef8,_0x17f12c=await Promise[_0x177b62(0x159)](_0x565ab6[_0x177b62(0x1d0)](_0x620b41=>{return new Promise(_0xe51076=>{const _0x5c6ad7=a0_0x4698,_0x20f8b4=new Image();_0x20f8b4['crossOrigin']=_0x5c6ad7(0x94),_0x20f8b4['src']=_0x620b41,_0x20f8b4[_0x5c6ad7(0xb7)]=()=>_0xe51076(_0x20f8b4);});}));return _0x17f12c;}function exportSpriteSheetDialog(){const _0x27e76e=a0_0x695ef8;let _0x3ece27=prompt(_0x27e76e(0x84),'1');if(_0x3ece27===null)return;let _0x47a5eb=Math[_0x27e76e(0x1c3)](0x1,parseInt(_0x3ece27,0xa)||0x1),_0x20bfd6=prompt('„Éï„É¨„Éº„É†Èñì„ÅÆ‰ΩôÁôΩ(px)\x20„ÇíÊåáÂÆöÔºà‰æã:\x200Ôºâ','0');if(_0x20bfd6===null)return;let _0x356fef=Math[_0x27e76e(0x1c3)](0x0,parseInt(_0x20bfd6,0xa)||0x0);exportSpriteSheet(_0x47a5eb,_0x356fef);}function exportSpriteSheet(_0x473f67=0x1,_0x28623c=0x0){const _0x413f5c=a0_0x695ef8,_0x31db0e=getCurrentProject();if(!_0x31db0e){alert(_0x413f5c(0x161));return;}const _0x25f97f=_0x31db0e['frames'];if(!_0x25f97f||_0x25f97f[_0x413f5c(0x1dd)]===0x0){alert(_0x413f5c(0x111));return;}const _0x3014ab=_0x31db0e[_0x413f5c(0x7e)]*cellSize,_0x556c86=_0x31db0e[_0x413f5c(0x179)]*cellSize,_0x5f5b4d=_0x3014ab*_0x25f97f[_0x413f5c(0x1dd)]*_0x473f67+Math[_0x413f5c(0x1c3)](0x0,_0x25f97f[_0x413f5c(0x1dd)]-0x1)*_0x28623c,_0x2b0769=_0x556c86*_0x473f67,_0x47838f=document[_0x413f5c(0x9e)](_0x413f5c(0x192));_0x47838f['width']=_0x5f5b4d,_0x47838f[_0x413f5c(0x179)]=_0x2b0769;const _0xaa68aa=_0x47838f['getContext']('2d');_0xaa68aa[_0x413f5c(0x1bd)](0x0,0x0,_0x47838f[_0x413f5c(0x7e)],_0x47838f[_0x413f5c(0x179)]);let _0x11b654=0x0;for(let _0x5c89c8=0x0;_0x5c89c8<_0x25f97f[_0x413f5c(0x1dd)];_0x5c89c8++){let _0xc9e559=document['createElement'](_0x413f5c(0x192));_0xc9e559['width']=_0x3014ab,_0xc9e559[_0x413f5c(0x179)]=_0x556c86;let _0x85a607=_0xc9e559[_0x413f5c(0x19d)]('2d');for(let _0x36a89c=0x0;_0x36a89c<_0x25f97f[_0x5c89c8]['layers'][_0x413f5c(0x1dd)];_0x36a89c++){_0x85a607['drawImage'](_0x25f97f[_0x5c89c8][_0x413f5c(0x1bb)][_0x36a89c],0x0,0x0);}_0x473f67===0x1&&_0x28623c===0x0?(_0xaa68aa['drawImage'](_0xc9e559,_0x11b654,0x0),_0x11b654+=_0x3014ab):(_0xaa68aa[_0x413f5c(0x93)](_0xc9e559,0x0,0x0,_0x3014ab,_0x556c86,_0x11b654,0x0,_0x3014ab*_0x473f67,_0x556c86*_0x473f67),_0x11b654+=_0x3014ab*_0x473f67),_0x5c89c8<_0x25f97f[_0x413f5c(0x1dd)]-0x1&&_0x28623c>0x0&&(_0x11b654+=_0x28623c);}const _0x334ce8=(_0x31db0e[_0x413f5c(0x150)]||'nezumi-spritesheet')['replace'](/[\\/:*?"<>|]/g,'_'),_0x1c3d7a=document[_0x413f5c(0x9e)]('a');_0x1c3d7a[_0x413f5c(0x148)]=_0x47838f['toDataURL'](_0x413f5c(0xf9)),_0x1c3d7a[_0x413f5c(0x16d)]=_0x334ce8+_0x413f5c(0x113),document[_0x413f5c(0xd7)]['appendChild'](_0x1c3d7a),_0x1c3d7a[_0x413f5c(0xb3)](),setTimeout(()=>{const _0x56d409=_0x413f5c;document[_0x56d409(0xd7)]['removeChild'](_0x1c3d7a);},0x3e8);}const NEZUMI_METADATA_SIG='\x0a---NEZUMI_METADATA_START---\x0a';function appendMetadataToBlob(_0x227aaf,_0x1da145){const _0x172e99=a0_0x695ef8,_0x2e8814=new TextEncoder(),_0x2a84c8=_0x2e8814[_0x172e99(0x120)](NEZUMI_METADATA_SIG),_0x2eea54=_0x2e8814[_0x172e99(0x120)](JSON[_0x172e99(0xbc)](_0x1da145));return new Blob([_0x227aaf,_0x2a84c8,_0x2eea54],{'type':_0x227aaf[_0x172e99(0xd4)]||_0x172e99(0x112)});}function indexOfSubarray(_0xab9ec,_0x569903){const _0x166dad=a0_0x695ef8;for(let _0x55fc54=0x0;_0x55fc54<=_0xab9ec[_0x166dad(0x1dd)]-_0x569903['length'];_0x55fc54++){let _0x2c8913=!![];for(let _0x2b7ea2=0x0;_0x2b7ea2<_0x569903[_0x166dad(0x1dd)];_0x2b7ea2++){if(_0xab9ec[_0x55fc54+_0x2b7ea2]!==_0x569903[_0x2b7ea2]){_0x2c8913=![];break;}}if(_0x2c8913)return _0x55fc54;}return-0x1;}function extractMetadataFromArrayBuffer(_0x28684c){const _0xfc2e56=a0_0x695ef8,_0x30a4d6=new TextEncoder()[_0xfc2e56(0x120)](NEZUMI_METADATA_SIG),_0xc54833=new Uint8Array(_0x28684c),_0x260aef=indexOfSubarray(_0xc54833,_0x30a4d6);if(_0x260aef===-0x1)return null;const _0x1d605c=_0xc54833['subarray'](_0x260aef+_0x30a4d6[_0xfc2e56(0x1dd)]);try{const _0x601833=new TextDecoder()[_0xfc2e56(0x1ac)](_0x1d605c);return JSON[_0xfc2e56(0x1dc)](_0x601833);}catch(_0x109309){return null;}}async function exportStandalone(){const _0x1623c3=a0_0x695ef8;let _0x2be2d8=getCurrentProject(),_0x2a9076=_0x2be2d8[_0x1623c3(0x7b)],_0x477738=_0x2be2d8[_0x1623c3(0x7e)]*cellSize,_0xc638dd=_0x2be2d8[_0x1623c3(0x179)]*cellSize;const _0xf8c866=_0x2a9076[_0x1623c3(0x1d0)](_0x27a1e9=>{const _0xe38042=_0x1623c3;let _0x159573=document[_0xe38042(0x9e)]('canvas');_0x159573[_0xe38042(0x7e)]=_0x477738,_0x159573[_0xe38042(0x179)]=_0xc638dd;let _0x382cc6=_0x159573[_0xe38042(0x19d)]('2d');for(let _0x514ebb=0x0;_0x514ebb<_0x27a1e9['layers'][_0xe38042(0x1dd)];_0x514ebb++){_0x382cc6[_0xe38042(0x93)](_0x27a1e9[_0xe38042(0x1bb)][_0x514ebb],0x0,0x0);}let _0x36c466=new Image();return _0x36c466[_0xe38042(0x108)]=_0x159573[_0xe38042(0xe2)]('image/png'),_0x36c466;});await Promise[_0x1623c3(0x159)](_0xf8c866[_0x1623c3(0x1d0)](_0x3a4d26=>new Promise(_0x233c71=>{const _0x4d7435=_0x1623c3;_0x3a4d26[_0x4d7435(0xb7)]=_0x233c71;})))[_0x1623c3(0xbe)](()=>{});const _0x228ece=(_0x2be2d8[_0x1623c3(0x150)]||_0x1623c3(0x1b1))[_0x1623c3(0x9d)](/[\\/:*?"<>|]/g,'_'),_0xe08e6c=makeAPNGBlob(_0xf8c866,_0x477738,_0xc638dd,animationDelay),_0x38c6c7={'type':_0x1623c3(0x132),'version':0x1,'project':{'width':_0x2be2d8[_0x1623c3(0x7e)],'height':_0x2be2d8[_0x1623c3(0x179)],'name':_0x2be2d8[_0x1623c3(0x150)]||'','activeFrame':_0x2be2d8[_0x1623c3(0xfc)],'frames':_0x2be2d8[_0x1623c3(0x7b)]['map'](_0x101c5b=>({'activeLayer':_0x101c5b['activeLayer'],'layers':_0x101c5b[_0x1623c3(0x1bb)]['map'](_0x211176=>_0x211176[_0x1623c3(0xe2)]())}))}},_0x228a0f=appendMetadataToBlob(_0xe08e6c,_0x38c6c7),_0x2beaa0=URL[_0x1623c3(0x7a)](_0x228a0f),_0x76b006=document[_0x1623c3(0x9e)]('a');_0x76b006['href']=_0x2beaa0,_0x76b006[_0x1623c3(0x16d)]=_0x228ece+_0x1623c3(0xec),document['body'][_0x1623c3(0xc1)](_0x76b006),_0x76b006[_0x1623c3(0xb3)](),setTimeout(()=>{const _0x3bd280=_0x1623c3;document[_0x3bd280(0xd7)][_0x3bd280(0x17a)](_0x76b006),URL['revokeObjectURL'](_0x2beaa0);},0x3e8);}function loadStandaloneFromFile(_0x543e28){return new Promise((_0x13349f,_0x3b9c98)=>{const _0x51ee5c=a0_0x4698,_0x55c00d=new FileReader();_0x55c00d[_0x51ee5c(0xb7)]=_0x50f893=>{const _0x27971c=_0x51ee5c,_0x4c4513=_0x50f893[_0x27971c(0x143)][_0x27971c(0x151)],_0x17b7f0=extractMetadataFromArrayBuffer(_0x4c4513);if(!_0x17b7f0||!_0x17b7f0[_0x27971c(0x14f)]){_0x3b9c98(new Error(_0x27971c(0xc6)));return;}const _0x8be3fc=_0x17b7f0['project'];try{const _0x40aa1b=createProject(_0x8be3fc[_0x27971c(0x7e)],_0x8be3fc[_0x27971c(0x179)],_0x8be3fc[_0x27971c(0x150)]||'ÁîªÂÉè');_0x40aa1b[_0x27971c(0x7b)]=_0x8be3fc['frames'][_0x27971c(0x1d0)](_0x35ddfe=>{const _0x33057e=_0x27971c;let _0x2a838b={'layers':[],'activeLayer':_0x35ddfe[_0x33057e(0xe8)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x333653=0x0;_0x333653<_0x35ddfe[_0x33057e(0x1bb)][_0x33057e(0x1dd)];_0x333653++){let _0x3e3116=new Image();_0x3e3116['src']=_0x35ddfe[_0x33057e(0x1bb)][_0x333653];let _0x4954f4=document['createElement'](_0x33057e(0x192));_0x4954f4[_0x33057e(0x7e)]=_0x8be3fc[_0x33057e(0x7e)]*cellSize,_0x4954f4[_0x33057e(0x179)]=_0x8be3fc[_0x33057e(0x179)]*cellSize,_0x3e3116[_0x33057e(0xb7)]=()=>{const _0x5a78c5=_0x33057e;let _0x37eaad=_0x4954f4[_0x5a78c5(0x19d)]('2d');_0x37eaad[_0x5a78c5(0x1bd)](0x0,0x0,_0x4954f4[_0x5a78c5(0x7e)],_0x4954f4['height']),_0x37eaad[_0x5a78c5(0x93)](_0x3e3116,0x0,0x0);},_0x2a838b[_0x33057e(0x1bb)]['push'](_0x4954f4);}return _0x2a838b;}),projects['push'](_0x40aa1b),activeProject=projects[_0x27971c(0x1dd)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x13349f(_0x40aa1b);}catch(_0xdbbd3e){_0x3b9c98(_0xdbbd3e);}},_0x55c00d[_0x51ee5c(0x109)]=_0x37f626=>_0x3b9c98(_0x37f626),_0x55c00d[_0x51ee5c(0x178)](_0x543e28);});}function toggleSection(_0x176c93){const _0x3a01f9=a0_0x695ef8,_0x17b3c0=document[_0x3a01f9(0xc4)](_0x176c93),_0x4a0de1=_0x17b3c0[_0x3a01f9(0x71)](_0x3a01f9(0x81)),_0x155a86=_0x17b3c0['querySelector']('.toggle-btn');_0x4a0de1['style'][_0x3a01f9(0xc7)]===_0x3a01f9(0x182)?(_0x4a0de1[_0x3a01f9(0x17d)][_0x3a01f9(0xc7)]='',_0x155a86[_0x3a01f9(0x11c)]='‚ñº'):(_0x4a0de1[_0x3a01f9(0x17d)][_0x3a01f9(0xc7)]='none',_0x155a86[_0x3a01f9(0x11c)]='‚ñ≤');}document['addEventListener']('DOMContentLoaded',()=>{const _0xd7a4ba=a0_0x695ef8;document['querySelectorAll'](_0xd7a4ba(0x187))[_0xd7a4ba(0x1ca)](_0x34c462=>_0x34c462['style'][_0xd7a4ba(0xc7)]=''),document[_0xd7a4ba(0x7d)]('.section.collapsible\x20.toggle-btn')[_0xd7a4ba(0x1ca)](_0x5440bc=>_0x5440bc['textContent']='‚ñº');}),window[a0_0x695ef8(0xb5)](a0_0x695ef8(0x8f),updateMenuBtnDisplay),document[a0_0x695ef8(0xb5)]('DOMContentLoaded',updateMenuBtnDisplay);function toggleSideMenu(_0x124249){const _0xf410d=a0_0x695ef8,_0x261b69=document['getElementById'](_0xf410d(0x146)),_0x3d3126=document['getElementById'](_0xf410d(0x1a8)),_0x311b20=document[_0xf410d(0xc4)](_0xf410d(0xbf)),_0x58194b=document[_0xf410d(0xc4)](_0xf410d(0x14c)),_0x4174bf=_0x261b69['classList'][_0xf410d(0x19a)](_0xf410d(0xc8));let _0x17685e=typeof _0x124249===_0xf410d(0x114)?_0x124249:!_0x4174bf;_0x17685e?(_0x261b69['classList'][_0xf410d(0xfa)](_0xf410d(0xc8)),_0x3d3126[_0xf410d(0x1c7)][_0xf410d(0xfa)]('sidebar-open'),document[_0xf410d(0xd7)][_0xf410d(0x17d)]['overflow']='hidden',document['body']['style'][_0xf410d(0x10e)]=_0xf410d(0x182),window['innerWidth']<=0x384&&(_0x58194b['style'][_0xf410d(0xc7)]=_0xf410d(0x1bf),_0x311b20['style'][_0xf410d(0xc7)]=_0xf410d(0x182))):(_0x261b69[_0xf410d(0x1c7)][_0xf410d(0xf7)](_0xf410d(0xc8)),_0x3d3126['classList']['remove'](_0xf410d(0x88)),document[_0xf410d(0xd7)][_0xf410d(0x17d)][_0xf410d(0x1c2)]='',document[_0xf410d(0xd7)][_0xf410d(0x17d)][_0xf410d(0x10e)]='',window[_0xf410d(0x138)]<=0x384&&(_0x58194b['style'][_0xf410d(0xc7)]=_0xf410d(0x182),_0x311b20[_0xf410d(0x17d)][_0xf410d(0xc7)]='block'));}function updateMenuBtnDisplay(){const _0x145a99=a0_0x695ef8,_0xdfd0e=document[_0x145a99(0xc4)](_0x145a99(0x146)),_0x123833=document['getElementById']('main-container'),_0xd5826d=document[_0x145a99(0xc4)]('menu-toggle-btn'),_0x1cecc0=document[_0x145a99(0xc4)](_0x145a99(0x14c));window[_0x145a99(0x138)]>0x384?(_0xdfd0e[_0x145a99(0x1c7)][_0x145a99(0xf7)](_0x145a99(0xc8)),_0x123833[_0x145a99(0x1c7)][_0x145a99(0xf7)]('sidebar-open'),_0x1cecc0[_0x145a99(0x17d)][_0x145a99(0xc7)]=_0x145a99(0x182),_0xd5826d['style'][_0x145a99(0xc7)]=_0x145a99(0x182),document[_0x145a99(0xd7)]['style'][_0x145a99(0x1c2)]='',document[_0x145a99(0xd7)]['style']['touchAction']=''):_0xdfd0e[_0x145a99(0x1c7)]['contains']('open')?(_0x1cecc0[_0x145a99(0x17d)][_0x145a99(0xc7)]='block',_0xd5826d[_0x145a99(0x17d)]['display']=_0x145a99(0x182)):(_0x1cecc0['style'][_0x145a99(0xc7)]=_0x145a99(0x182),_0xd5826d[_0x145a99(0x17d)][_0x145a99(0xc7)]=_0x145a99(0x1bf));}document['addEventListener']('click',function(_0x15748f){const _0x5f09a3=a0_0x695ef8;if(window['innerWidth']>0x384)return;const _0x3d49fd=document[_0x5f09a3(0xc4)](_0x5f09a3(0x146)),_0x5b19ce=document[_0x5f09a3(0xc4)]('main-container'),_0x26764e=document['getElementById'](_0x5f09a3(0xbf)),_0x2b5d75=document[_0x5f09a3(0xc4)]('menu-toggle-btn-close');!_0x3d49fd[_0x5f09a3(0x19a)](_0x15748f[_0x5f09a3(0x143)])&&_0x15748f[_0x5f09a3(0x143)]!==_0x26764e&&_0x15748f['target']!==_0x2b5d75&&(_0x3d49fd[_0x5f09a3(0x1c7)][_0x5f09a3(0xf7)](_0x5f09a3(0xc8)),_0x5b19ce[_0x5f09a3(0x1c7)]['remove'](_0x5f09a3(0x88)),_0x2b5d75[_0x5f09a3(0x17d)][_0x5f09a3(0xc7)]=_0x5f09a3(0x182),_0x26764e['style'][_0x5f09a3(0xc7)]=_0x5f09a3(0x1bf),document['body'][_0x5f09a3(0x17d)][_0x5f09a3(0x1c2)]='',document[_0x5f09a3(0xd7)][_0x5f09a3(0x17d)][_0x5f09a3(0x10e)]='');}),(function(){const _0x1d1af4=a0_0x695ef8;try{(location[_0x1d1af4(0x110)]['match'](/index\.html$/)||location[_0x1d1af4(0x110)]==='/'||location['pathname']===_0x1d1af4(0xf4))&&(!localStorage[_0x1d1af4(0x16e)](_0x1d1af4(0xe5))&&(localStorage['setItem'](_0x1d1af4(0xe5),'1'),location[_0x1d1af4(0x148)]=_0x1d1af4(0x167)));}catch(_0x184a05){}}());let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document[a0_0x695ef8(0xb5)](a0_0x695ef8(0xe0),_0x5dc12d=>{const _0x46c2a1=a0_0x695ef8;if(_0x5dc12d[_0x46c2a1(0x189)]===_0x46c2a1(0xf5))shiftPressed=!![];}),document[a0_0x695ef8(0xb5)](a0_0x695ef8(0x175),_0x57d015=>{const _0x18716d=a0_0x695ef8;if(_0x57d015[_0x18716d(0x189)]===_0x18716d(0xf5))shiftPressed=![];}),canvas[a0_0x695ef8(0xb5)](a0_0x695ef8(0xe3),_0x3f4fea=>{const _0x3917a4=a0_0x695ef8;if(_0x3f4fea['pointerType']==='touch')return;currentTool===_0x3917a4(0x18a)||shiftPressed?(dragging=!![],isDrawing=![],startX=_0x3f4fea[_0x3917a4(0x1d2)],startY=_0x3f4fea['clientY'],lastX=posX,lastY=posY,canvas['setPointerCapture'](_0x3f4fea[_0x3917a4(0x11f)]),canvas['style'][_0x3917a4(0x162)]=_0x3917a4(0x15e)):(isDrawing=!![],pointerDownX=_0x3f4fea[_0x3917a4(0x1d2)],pointerDownY=_0x3f4fea[_0x3917a4(0x76)],handleMouseDown(_0x3f4fea),canvas['setPointerCapture'](_0x3f4fea[_0x3917a4(0x11f)]));}),canvas['addEventListener'](a0_0x695ef8(0x126),_0x3b5b6a=>{const _0x4ae2ba=a0_0x695ef8;if(_0x3b5b6a['pointerType']===_0x4ae2ba(0x107))return;if(dragging)posX=lastX+(_0x3b5b6a[_0x4ae2ba(0x1d2)]-startX),posY=lastY+(_0x3b5b6a[_0x4ae2ba(0x76)]-startY),updateTransform();else{if(isDrawing){if(currentTool!==_0x4ae2ba(0x1cd)){const _0x1a218e=Math['abs'](_0x3b5b6a['clientX']-pointerDownX),_0x260d95=Math['abs'](_0x3b5b6a[_0x4ae2ba(0x76)]-pointerDownY);if(_0x1a218e>=PAN_CANCEL_DISTANCE||_0x260d95>=PAN_CANCEL_DISTANCE){isDrawing=![];try{handleMouseUp(_0x3b5b6a);}catch(_0x71d081){}return;}}handleMouseMove(_0x3b5b6a);}}}),canvas[a0_0x695ef8(0xb5)](a0_0x695ef8(0x73),_0x52ddfb=>{const _0x499550=a0_0x695ef8;if(_0x52ddfb['pointerType']==='touch')return;dragging=![];isDrawing&&handleMouseUp(_0x52ddfb);isDrawing=![];try{canvas[_0x499550(0x83)](_0x52ddfb[_0x499550(0x11f)]);}catch(_0xbb398c){}if(currentTool===_0x499550(0x18a))canvas[_0x499550(0x17d)][_0x499550(0x162)]=_0x499550(0x122);else canvas['style'][_0x499550(0x162)]=_0x499550(0x12f);}),wrapper[a0_0x695ef8(0xb5)](a0_0x695ef8(0x10a),_0x1db958=>{const _0x154df0=a0_0x695ef8;_0x1db958[_0x154df0(0x82)]();const _0x2efef2=canvas[_0x154df0(0x98)](),_0x4f9b4c=_0x1db958['clientX'],_0x20b5a5=_0x1db958[_0x154df0(0x76)],_0x564053=(_0x4f9b4c-_0x2efef2[_0x154df0(0xf1)]-posX)/scale,_0x3c9098=(_0x20b5a5-_0x2efef2[_0x154df0(0x1b0)]-posY)/scale,_0x5766d9=_0x1db958[_0x154df0(0x1c9)]>0x0?0.9:1.1;let _0x21319c=scale*_0x5766d9;_0x21319c=Math[_0x154df0(0x193)](Math[_0x154df0(0x1c3)](_0x21319c,0.2),0x5),posX=_0x4f9b4c-_0x2efef2[_0x154df0(0xf1)]-_0x564053*_0x21319c,posY=_0x20b5a5-_0x2efef2[_0x154df0(0x1b0)]-_0x3c9098*_0x21319c,scale=_0x21319c,updateTransform();const _0x525126=document[_0x154df0(0xc4)]('zoomSlider'),_0x33e9bd=document[_0x154df0(0xc4)]('zoomValue');if(_0x525126)_0x525126[_0x154df0(0x18d)]=Math['round'](scale*0x64);if(_0x33e9bd)_0x33e9bd[_0x154df0(0x11c)]=Math[_0x154df0(0xd8)](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x39b234=a0_0x695ef8;canvas['style'][_0x39b234(0xed)]=_0x39b234(0x17e)+posX+_0x39b234(0xe4)+posY+'px)\x20scale('+scale+')';}function setZoomValue(_0xcede49){const _0x59282c=a0_0x695ef8,_0x2bf84e=Math[_0x59282c(0x1c3)](0x14,Math['min'](0x1f4,parseInt(_0xcede49,0xa)||0x64)),_0x5eb96d=_0x2bf84e/0x64;scale=_0x5eb96d,updateTransform();const _0x4d92e6=document[_0x59282c(0xc4)]('zoomSlider'),_0x3c93f1=document[_0x59282c(0xc4)](_0x59282c(0x17b));if(_0x4d92e6)_0x4d92e6['value']=_0x2bf84e;if(_0x3c93f1)_0x3c93f1[_0x59282c(0x11c)]=_0x2bf84e+'%';}function zoomIn(){const _0x1c5597=a0_0x695ef8,_0x4a1240=document[_0x1c5597(0xc4)](_0x1c5597(0xf8));let _0x5dac47=_0x4a1240?parseInt(_0x4a1240['value'],0xa):Math[_0x1c5597(0xd8)](scale*0x64);_0x5dac47=Math[_0x1c5597(0x193)](0x1f4,_0x5dac47+0xa),setZoomValue(_0x5dac47);}function zoomOut(){const _0x8f1d=a0_0x695ef8,_0x3c83cc=document[_0x8f1d(0xc4)](_0x8f1d(0xf8));let _0x39ec9d=_0x3c83cc?parseInt(_0x3c83cc[_0x8f1d(0x18d)],0xa):Math[_0x8f1d(0xd8)](scale*0x64);_0x39ec9d=Math[_0x8f1d(0x1c3)](0x14,_0x39ec9d-0xa),setZoomValue(_0x39ec9d);}const zs=document['getElementById'](a0_0x695ef8(0xf8));if(zs)zs[a0_0x695ef8(0x11e)]=_0x33aed5=>setZoomValue(_0x33aed5[a0_0x695ef8(0x143)]['value']);const zv=document[a0_0x695ef8(0xc4)]('zoomValue');if(zv)zv[a0_0x695ef8(0x11c)]=Math[a0_0x695ef8(0xd8)](scale*0x64)+'%';function getCanvasCoords(_0x427d96){const _0xf7c76d=a0_0x695ef8,_0xb918ba=canvas[_0xf7c76d(0x98)](),_0x147ff8=canvas[_0xf7c76d(0x7e)]/_0xb918ba[_0xf7c76d(0x7e)],_0x1e76f0=canvas[_0xf7c76d(0x179)]/_0xb918ba[_0xf7c76d(0x179)],_0x1979ff=(_0x427d96[_0xf7c76d(0x1d2)]-_0xb918ba[_0xf7c76d(0xf1)])*_0x147ff8,_0x13f711=(_0x427d96['clientY']-_0xb918ba[_0xf7c76d(0x1b0)])*_0x1e76f0;return{'x':_0x1979ff,'y':_0x13f711};}function handleDrawStart(_0x1b5cb2){const _0x483b28=getCanvasCoords(_0x1b5cb2);ctx['beginPath'](),ctx['moveTo'](_0x483b28['x'],_0x483b28['y']);}function handleDrawMove(_0x3a768e){const _0x5336db=a0_0x695ef8,_0x264e6a=getCanvasCoords(_0x3a768e);ctx['lineTo'](_0x264e6a['x'],_0x264e6a['y']),ctx[_0x5336db(0x8e)]();}function handleDrawEnd(_0x4ab268){const _0x448ea2=a0_0x695ef8;ctx[_0x448ea2(0x15c)]();}