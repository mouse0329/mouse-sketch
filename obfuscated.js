const a0_0x413a03=a0_0x35c9;(function(_0x3d3af7,_0x3ac6d7){const _0x590142=a0_0x35c9,_0x4ddd35=_0x3d3af7();while(!![]){try{const _0x17f2ba=-parseInt(_0x590142(0x1da))/0x1*(parseInt(_0x590142(0xd1))/0x2)+parseInt(_0x590142(0x19f))/0x3*(parseInt(_0x590142(0x153))/0x4)+-parseInt(_0x590142(0x1b6))/0x5+parseInt(_0x590142(0x1d4))/0x6+-parseInt(_0x590142(0x1ae))/0x7+-parseInt(_0x590142(0xe5))/0x8+parseInt(_0x590142(0x122))/0x9;if(_0x17f2ba===_0x3ac6d7)break;else _0x4ddd35['push'](_0x4ddd35['shift']());}catch(_0x57773d){_0x4ddd35['push'](_0x4ddd35['shift']());}}}(a0_0x9b6b,0x7d653));const a0_0x521960=a0_0x56c5;(function(_0x97346a,_0x1123e6){const _0x3cb969=a0_0x35c9,_0x40fde2=(function(){let _0x95473a=!![];return function(_0x181fe2,_0x19d9a5){const _0x3fa87c=_0x95473a?function(){const _0x55f468=a0_0x35c9;if(_0x19d9a5){const _0x55035b=_0x19d9a5[_0x55f468(0x1e8)](_0x181fe2,arguments);return _0x19d9a5=null,_0x55035b;}}:function(){};return _0x95473a=![],_0x3fa87c;};}()),_0x37bd17=_0x40fde2(this,function(){const _0x5da7cc=a0_0x35c9;return _0x37bd17[_0x5da7cc(0x17b)]()['search'](_0x5da7cc(0x102))['toString']()[_0x5da7cc(0x1f8)](_0x37bd17)['search'](_0x5da7cc(0x102));});_0x37bd17();const _0x413241=a0_0x56c5,_0x17697a=_0x97346a();while(!![]){try{const _0x184b26=-parseInt(_0x413241(0x192))/0x1*(parseInt(_0x413241(0x14b))/0x2)+-parseInt(_0x413241(0x19e))/0x3*(parseInt(_0x413241(0x12e))/0x4)+parseInt(_0x413241(0xe2))/0x5*(parseInt(_0x413241(0x1cf))/0x6)+-parseInt(_0x413241(0xe7))/0x7*(-parseInt(_0x413241(0xf4))/0x8)+parseInt(_0x413241(0x133))/0x9+parseInt(_0x413241(0x11b))/0xa+parseInt(_0x413241(0x172))/0xb*(-parseInt(_0x413241(0x1ce))/0xc);if(_0x184b26===_0x1123e6)break;else _0x17697a['push'](_0x17697a[_0x3cb969(0x1c0)]());}catch(_0x388148){_0x17697a[_0x3cb969(0x14c)](_0x17697a[_0x3cb969(0x1c0)]());}}}(a0_0x22a5,0xba2f1));const a0_0x5049d9=a0_0xce2f;(function(_0x1e1f6a,_0x2d6b00){const _0x23626e=a0_0x56c5,_0x5f57f6=a0_0xce2f,_0x121c22=_0x1e1f6a();while(!![]){try{const _0x328a29=parseInt(_0x5f57f6(0x17d))/0x1*(-parseInt(_0x5f57f6(0x227))/0x2)+parseInt(_0x5f57f6(0xff))/0x3*(-parseInt(_0x5f57f6(0xef))/0x4)+parseInt(_0x5f57f6(0x21d))/0x5+parseInt(_0x5f57f6(0x128))/0x6*(parseInt(_0x5f57f6(0xeb))/0x7)+-parseInt(_0x5f57f6(0x12f))/0x8+-parseInt(_0x5f57f6(0x209))/0x9*(-parseInt(_0x5f57f6(0x1b9))/0xa)+-parseInt(_0x5f57f6(0x204))/0xb;if(_0x328a29===_0x2d6b00)break;else _0x121c22[_0x23626e(0x1d9)](_0x121c22[_0x23626e(0x128)]());}catch(_0x297a06){_0x121c22[_0x23626e(0x1d9)](_0x121c22[_0x23626e(0x128)]());}}}(a0_0x243d,0x97cd8));const a0_0x38aafa=a0_0x1925;(function(_0x59fad7,_0x428b0f){const _0x4ef02a=a0_0x56c5,_0x1c4228=a0_0xce2f,_0x545186=a0_0x1925,_0x2730f5=_0x59fad7();while(!![]){try{const _0x114061=parseInt(_0x545186(0x26d))/0x1*(parseInt(_0x545186(0x20a))/0x2)+-parseInt(_0x545186(0x24d))/0x3+-parseInt(_0x545186(0x284))/0x4+parseInt(_0x545186(0x1cb))/0x5+-parseInt(_0x545186(0x1e9))/0x6+-parseInt(_0x545186(0x2b9))/0x7*(parseInt(_0x545186(0x26e))/0x8)+parseInt(_0x545186(0x28d))/0x9*(parseInt(_0x545186(0x271))/0xa);if(_0x114061===_0x428b0f)break;else _0x2730f5[_0x1c4228(0x19e)](_0x2730f5[_0x4ef02a(0x128)]());}catch(_0x1f7a0c){_0x2730f5[_0x1c4228(0x19e)](_0x2730f5[_0x1c4228(0x1f9)]());}}}(a0_0x5ad1,0x65d10));const a0_0x53f6c7=(function(){const _0x52af30=(function(){let _0x3300fa=!![];return function(_0x56a800,_0x4f1571){const _0x55e502=_0x3300fa?function(){const _0x43955e=a0_0x35c9;if(_0x4f1571){const _0x2acf3a=_0x4f1571[_0x43955e(0x1e8)](_0x56a800,arguments);return _0x4f1571=null,_0x2acf3a;}}:function(){};return _0x3300fa=![],_0x55e502;};}()),_0x4f0ea0=(function(){const _0x3a4d55=_0x52af30(this,function(){const _0x3ddf44=a0_0x35c9,_0x4bb3a6=a0_0x56c5;return _0x3a4d55[_0x3ddf44(0x17b)]()['search'](_0x4bb3a6(0x142))[_0x4bb3a6(0xe6)]()[_0x4bb3a6(0x11d)](_0x3a4d55)[_0x4bb3a6(0x1ef)](_0x4bb3a6(0x142));});_0x3a4d55();let _0x470d78=!![];return function(_0x28acd4,_0x40bac6){const _0xc4bc16=_0x470d78?function(){const _0xc1a6ea=a0_0xce2f;if(_0x40bac6){const _0x3555cc=_0x40bac6[_0xc1a6ea(0x106)](_0x28acd4,arguments);return _0x40bac6=null,_0x3555cc;}}:function(){};return _0x470d78=![],_0xc4bc16;};}()),_0x398707=_0x4f0ea0(this,function(){const _0x33659e=a0_0x56c5,_0x1866e3=a0_0xce2f;return _0x398707[_0x33659e(0xe6)]()[_0x33659e(0x1ef)](_0x1866e3(0xe4))[_0x1866e3(0x163)]()[_0x1866e3(0x1b4)](_0x398707)[_0x1866e3(0x153)](_0x1866e3(0xe4));});_0x398707();let _0x2ef524=!![];return function(_0x1e5f31,_0x19363c){const _0x5cd677=_0x2ef524?function(){const _0x2ab09c=a0_0x1925;if(_0x19363c){const _0x202ab5=_0x19363c[_0x2ab09c(0x2b0)](_0x1e5f31,arguments);return _0x19363c=null,_0x202ab5;}}:function(){};return _0x2ef524=![],_0x5cd677;};}()),a0_0x5506da=a0_0x53f6c7(this,function(){const _0x5a694e=a0_0x35c9,_0x49f7c5=a0_0xce2f,_0x1b1c3e=a0_0x1925;return a0_0x5506da[_0x1b1c3e(0x279)]()[_0x1b1c3e(0x1ac)](_0x1b1c3e(0x197))[_0x49f7c5(0x163)]()[_0x1b1c3e(0x28c)](a0_0x5506da)[_0x1b1c3e(0x1ac)](_0x5a694e(0x102));});a0_0x5506da();let canvas=document[a0_0x38aafa(0x275)](a0_0x5049d9(0x20f)),ctx=canvas[a0_0x38aafa(0x2c6)]('2d');const wrapper=document[a0_0x38aafa(0x275)](a0_0x38aafa(0x1cf));let cellSize=0x14,currentColor=a0_0x38aafa(0x265),currentTool=a0_0x38aafa(0x182),penSize=0x1,penMode=a0_0x38aafa(0x2e2),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x168fb2=0x10,_0x824ade=0x10,_0x21422a=''){const _0x26aa06=a0_0x5049d9,_0x487f25=a0_0x38aafa;let _0x161983=0x14,_0x50a963=[],_0x599ce6=[],_0x2a864f=[],_0x30b178=document[_0x487f25(0x1d6)](_0x487f25(0x19d));_0x30b178[_0x487f25(0x1b8)]=_0x168fb2*_0x161983,_0x30b178[_0x487f25(0x27c)]=_0x824ade*_0x161983,_0x50a963[_0x487f25(0x278)](_0x30b178),_0x599ce6[_0x487f25(0x278)]([]),_0x2a864f[_0x487f25(0x278)]([]);let _0x1e0e89={'layers':_0x50a963,'activeLayer':0x0,'layerHistories':_0x599ce6,'layerRedoStacks':_0x2a864f};return{'frames':[_0x1e0e89],'activeFrame':0x0,'width':_0x168fb2,'height':_0x824ade,'name':_0x21422a||'画像'+(projects[_0x26aa06(0xf5)]+0x1)};}function updateProjectUI(){const _0x2e2a2d=a0_0x35c9,_0x439a2e=a0_0x56c5,_0x5a82c2=a0_0x5049d9,_0x132d5a=a0_0x38aafa,_0x5a03a5=document[_0x132d5a(0x275)](_0x132d5a(0x228));_0x5a03a5[_0x132d5a(0x25f)]='';for(let _0xc26f39=0x0;_0xc26f39<projects[_0x132d5a(0x1c4)];_0xc26f39++){const _0x4e63e3=document[_0x5a82c2(0x1f6)](_0x2e2a2d(0xd5));_0x4e63e3[_0x132d5a(0x252)]=_0x132d5a(0x2bc)+(_0xc26f39===activeProject?_0x132d5a(0x1e4):''),_0x4e63e3[_0x132d5a(0x234)]=()=>{activeProject=_0xc26f39,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x3dddc3=document[_0x5a82c2(0x1f6)](_0x132d5a(0x28e));_0x3dddc3[_0x132d5a(0x252)]=_0x132d5a(0x1d4),_0x3dddc3[_0x132d5a(0x221)]=projects[_0xc26f39][_0x132d5a(0x2e6)]||'画像'+(_0xc26f39+0x1),_0x3dddc3[_0x132d5a(0x198)]=_0x5a82c2(0x210),_0x3dddc3[_0x439a2e(0xbf)]=_0x3c5231=>{const _0x1752b0=_0x132d5a;_0x3c5231[_0x1752b0(0x214)](),editProjectName(_0xc26f39,_0x3dddc3);},_0x4e63e3[_0x132d5a(0x237)](_0x3dddc3);const _0x2d8586=document[_0x132d5a(0x1d6)](_0x132d5a(0x2a4));_0x2d8586[_0x132d5a(0x221)]='削除',_0x2d8586[_0x132d5a(0x252)]=_0x132d5a(0x27a),_0x2d8586[_0x5a82c2(0x1d1)]=projects[_0x132d5a(0x1c4)]===0x1,_0x2d8586[_0x132d5a(0x234)]=_0x4ed0f6=>{const _0x51ae9c=_0x132d5a;_0x4ed0f6[_0x51ae9c(0x214)](),removeProjectAt(_0xc26f39);},_0x4e63e3[_0x5a82c2(0x1c2)](_0x2d8586),_0x5a03a5[_0x132d5a(0x237)](_0x4e63e3);}document[_0x132d5a(0x275)](_0x132d5a(0x1ed))[_0x2e2a2d(0xf3)]='('+projects[_0x132d5a(0x1c4)]+'枚)';}function editProjectName(_0x3db856,_0x14fd59){const _0x29ca49=a0_0x5049d9,_0x1a0c00=a0_0x38aafa,_0x22e146=document[_0x1a0c00(0x1d6)](_0x1a0c00(0x295));_0x22e146[_0x1a0c00(0x17d)]=_0x1a0c00(0x23e),_0x22e146[_0x29ca49(0x12e)]=projects[_0x3db856][_0x1a0c00(0x2e6)]||'画像'+(_0x3db856+0x1),_0x22e146[_0x29ca49(0x15c)]=_0x1a0c00(0x186),_0x22e146[_0x29ca49(0x1bb)][_0x1a0c00(0x1b8)]=_0x1a0c00(0x29d),_0x22e146[_0x1a0c00(0x1f4)]=()=>{const _0x264b9d=_0x1a0c00;projects[_0x3db856][_0x264b9d(0x2e6)]=_0x22e146[_0x264b9d(0x24e)][_0x264b9d(0x19b)]()||'画像'+(_0x3db856+0x1),updateProjectUI();},_0x22e146[_0x1a0c00(0x2ca)]=_0x2aad8c=>{const _0x1f0e6d=_0x29ca49,_0x65a92=_0x1a0c00;if(_0x2aad8c[_0x1f0e6d(0x181)]===_0x65a92(0x276))_0x22e146[_0x65a92(0x1ef)]();},_0x14fd59[_0x1a0c00(0x2e8)](_0x22e146),_0x22e146[_0x1a0c00(0x2be)](),_0x22e146[_0x1a0c00(0x1aa)]();}function showNewProjectDialog(_0xbc99c8){const _0xd6003c=a0_0x56c5,_0x265d30=a0_0x5049d9,_0x5f4f1e=a0_0x38aafa;let _0x2d2975=document[_0x5f4f1e(0x275)](_0x265d30(0x14f));if(_0x2d2975)_0x2d2975[_0x5f4f1e(0x187)]();const _0x58ef5d=document[_0x5f4f1e(0x1d6)](_0x5f4f1e(0x2c9));_0x58ef5d['id']=_0x5f4f1e(0x1db),_0x58ef5d[_0x5f4f1e(0x1f8)][_0x5f4f1e(0x1f7)]=_0x5f4f1e(0x1e3),_0x58ef5d[_0x5f4f1e(0x1f8)][_0x5f4f1e(0x2a7)]='0',_0x58ef5d[_0x5f4f1e(0x1f8)][_0x265d30(0xf8)]='0',_0x58ef5d[_0xd6003c(0x178)][_0x5f4f1e(0x1b8)]=_0x265d30(0x183),_0x58ef5d[_0xd6003c(0x178)][_0x5f4f1e(0x27c)]=_0x5f4f1e(0x1f1),_0x58ef5d[_0x5f4f1e(0x1f8)][_0x265d30(0x142)]=_0x5f4f1e(0x180),_0x58ef5d[_0x5f4f1e(0x1f8)][_0x5f4f1e(0x2f0)]=_0x5f4f1e(0x20c),_0x58ef5d[_0x5f4f1e(0x1f8)][_0x5f4f1e(0x19e)]=_0x5f4f1e(0x243),_0x58ef5d[_0x5f4f1e(0x1f8)][_0x5f4f1e(0x1fd)]=_0x5f4f1e(0x243),_0x58ef5d[_0x265d30(0x1bb)][_0x5f4f1e(0x24b)]=_0x5f4f1e(0x1c9),_0x58ef5d[_0x5f4f1e(0x25f)]=_0x265d30(0x156)+(projects[_0x265d30(0xf5)]+0x1)+_0x265d30(0x21e),document[_0x265d30(0x1c5)][_0x5f4f1e(0x237)](_0x58ef5d),_0x58ef5d[_0x5f4f1e(0x2c0)](_0x5f4f1e(0x2e4))[_0x5f4f1e(0x234)]=()=>{const _0x206284=_0xd6003c,_0x58a63b=_0x265d30,_0x38e0e6=_0x5f4f1e,_0x3cb782=parseInt(_0x58ef5d[_0x38e0e6(0x2c0)](_0x58a63b(0x129))[_0x38e0e6(0x24e)],0xa),_0x4522c1=parseInt(_0x58ef5d[_0x38e0e6(0x2c0)](_0x38e0e6(0x1b0))[_0x58a63b(0x12e)],0xa),_0x52670d=_0x58ef5d[_0x38e0e6(0x2c0)](_0x206284(0x1d4))[_0x38e0e6(0x24e)][_0x38e0e6(0x19b)]();_0x58ef5d[_0x38e0e6(0x187)]();if(_0xbc99c8)_0xbc99c8(_0x3cb782,_0x4522c1,_0x52670d);},_0x58ef5d[_0x5f4f1e(0x2c0)](_0x5f4f1e(0x1f9))[_0x5f4f1e(0x234)]=()=>{const _0x258d73=_0x265d30;_0x58ef5d[_0x258d73(0x1e9)]();};}function addProject(){showNewProjectDialog((_0x1f159f,_0x5cb60f,_0x2324fe)=>{const _0x16a7ae=a0_0xce2f,_0x311de3=a0_0x1925;if(!Number[_0x311de3(0x28b)](_0x1f159f)||_0x1f159f<0x1)_0x1f159f=0x10;if(!Number[_0x311de3(0x28b)](_0x5cb60f)||_0x5cb60f<0x1)_0x5cb60f=0x10;projects[_0x311de3(0x278)](createProject(_0x1f159f,_0x5cb60f,_0x2324fe)),activeProject=projects[_0x16a7ae(0xf5)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x51a048){const _0x25cb96=a0_0x38aafa;if(projects[_0x25cb96(0x1c4)]<=0x1)return;projects[_0x25cb96(0x2b7)](_0x51a048,0x1);if(activeProject>=projects[_0x25cb96(0x1c4)])activeProject=projects[_0x25cb96(0x1c4)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x3e1d57=a0_0x56c5,_0x4b2f8d=a0_0x5049d9,_0x333760=a0_0x38aafa,_0x5d73a9=document[_0x3e1d57(0x182)](_0x333760(0x1c6)),_0x5c028d=getCurrentProject();_0x5d73a9[_0x3e1d57(0x175)]='';for(let _0x1617ab=0x0;_0x1617ab<_0x5c028d[_0x4b2f8d(0x17f)][_0x3e1d57(0xd7)];_0x1617ab++){const _0x496d57=document[_0x333760(0x1d6)](_0x333760(0x2c9));_0x496d57[_0x333760(0x252)]=_0x333760(0x254)+(_0x1617ab===_0x5c028d[_0x333760(0x2a5)]?_0x333760(0x1e4):''),_0x496d57[_0x333760(0x234)]=()=>{const _0xb35b73=_0x333760;_0x5c028d[_0xb35b73(0x2a5)]=_0x1617ab,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x358326=document[_0x4b2f8d(0x1f6)](_0x333760(0x19d));_0x358326[_0x333760(0x252)]=_0x333760(0x1da),_0x358326[_0x333760(0x1b8)]=0x20,_0x358326[_0x333760(0x27c)]=0x20;let _0x25c1ab=_0x358326[_0x333760(0x2c6)]('2d');_0x25c1ab[_0x333760(0x22d)](0x0,0x0,0x20,0x20);for(let _0xf79f95=0x0;_0xf79f95<_0x5c028d[_0x4b2f8d(0x17f)][_0x1617ab][_0x333760(0x262)][_0x3e1d57(0xd7)];_0xf79f95++){_0x25c1ab[_0x333760(0x1ff)](_0x5c028d[_0x333760(0x2b3)][_0x1617ab][_0x333760(0x262)][_0xf79f95],0x0,0x0,_0x358326[_0x333760(0x1b8)],_0x358326[_0x333760(0x27c)]);}_0x496d57[_0x4b2f8d(0x1c2)](_0x358326);const _0x4015ac=document[_0x4b2f8d(0x1f6)](_0x333760(0x28e));_0x4015ac[_0x333760(0x221)]='F'+(_0x1617ab+0x1),_0x496d57[_0x333760(0x237)](_0x4015ac);const _0x1a2639=document[_0x333760(0x1d6)](_0x3e1d57(0x1e1));_0x1a2639[_0x333760(0x221)]='削除',_0x1a2639[_0x333760(0x252)]=_0x333760(0x286),_0x1a2639[_0x333760(0x256)]=_0x5c028d[_0x333760(0x2b3)][_0x333760(0x1c4)]===0x1,_0x1a2639[_0x333760(0x234)]=_0x362694=>{const _0x197704=_0x333760;_0x362694[_0x197704(0x214)](),removeFrameAt(_0x1617ab);},_0x496d57[_0x333760(0x237)](_0x1a2639),_0x5d73a9[_0x333760(0x237)](_0x496d57);}document[_0x333760(0x275)](_0x333760(0x240))[_0x4b2f8d(0x154)]='('+_0x5c028d[_0x333760(0x2b3)][_0x333760(0x1c4)]+_0x333760(0x2c4);}function addFrame(){const _0x58fe50=a0_0x56c5,_0x425281=a0_0x38aafa;let _0x5120f9=getCurrentProject(),_0x585dd8=_0x5120f9[_0x425281(0x2b3)][_0x5120f9[_0x425281(0x2a5)]],_0x5c1a87=_0x585dd8[_0x425281(0x262)][_0x425281(0x294)](_0x339037=>{const _0x163f81=a0_0xce2f,_0x313cc2=_0x425281;let _0x1e4745=document[_0x313cc2(0x1d6)](_0x163f81(0x20f));return _0x1e4745[_0x313cc2(0x1b8)]=_0x339037[_0x313cc2(0x1b8)],_0x1e4745[_0x313cc2(0x27c)]=_0x339037[_0x313cc2(0x27c)],_0x1e4745[_0x313cc2(0x2c6)]('2d')[_0x313cc2(0x1ff)](_0x339037,0x0,0x0),_0x1e4745;}),_0x329c35=_0x5c1a87[_0x425281(0x294)](()=>[]),_0x57be00=_0x5c1a87[_0x425281(0x294)](()=>[]),_0x504fa5={'layers':_0x5c1a87,'activeLayer':0x0,'layerHistories':_0x329c35,'layerRedoStacks':_0x57be00};_0x5120f9[_0x425281(0x2b3)][_0x425281(0x2b7)](_0x5120f9[_0x425281(0x2a5)]+0x1,0x0,_0x504fa5),_0x5120f9[_0x58fe50(0x1ca)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x881087){const _0x1b1439=a0_0x56c5,_0x13454c=a0_0x5049d9,_0x16aa4a=a0_0x38aafa;let _0x4fda76=getCurrentProject();if(_0x4fda76[_0x1b1439(0x145)][_0x16aa4a(0x1c4)]<=0x1)return;_0x4fda76[_0x13454c(0x17f)][_0x13454c(0xed)](_0x881087,0x1);if(_0x4fda76[_0x16aa4a(0x2a5)]>=_0x4fda76[_0x1b1439(0x145)][_0x16aa4a(0x1c4)])_0x4fda76[_0x13454c(0x12c)]=_0x4fda76[_0x16aa4a(0x2b3)][_0x16aa4a(0x1c4)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x56f480=a0_0x38aafa;return getCurrentProject()[_0x56f480(0x2b3)][getCurrentProject()[_0x56f480(0x2a5)]];}function updateLayerUI(){const _0x2e308a=a0_0x56c5,_0x107c26=a0_0x5049d9,_0x253e74=a0_0x38aafa;let {layers:_0x3a7249,activeLayer:_0x1a3ebb}=getCurrentFrame();document[_0x253e74(0x275)](_0x107c26(0x118))[_0x253e74(0x221)]='('+_0x3a7249[_0x107c26(0xf5)]+'枚)';const _0xdccdf7=document[_0x253e74(0x275)](_0x253e74(0x23b));_0xdccdf7[_0x107c26(0x1ea)]='';for(let _0x214467=_0x3a7249[_0x253e74(0x1c4)]-0x1;_0x214467>=0x0;_0x214467--){const _0x9975e1=document[_0x253e74(0x1d6)](_0x107c26(0x1f1));_0x9975e1[_0x107c26(0x15c)]=_0x253e74(0x2d7)+(_0x214467===_0x1a3ebb?_0x253e74(0x1e4):''),_0x9975e1[_0x107c26(0x19d)]=_0x5342d7=>{const _0x3acafd=a0_0x56c5,_0x29538e=_0x253e74;if(_0x5342d7[_0x29538e(0x2e5)][_0x29538e(0x22b)][_0x3acafd(0xbc)](_0x29538e(0x20e)))return;getCurrentFrame()[_0x29538e(0x1b5)]=_0x214467,updateLayerUI(),redrawAll();};const _0x4e689c=document[_0x2e308a(0xdd)](_0x253e74(0x19d));_0x4e689c[_0x253e74(0x252)]=_0x253e74(0x1f2),_0x4e689c[_0x253e74(0x1b8)]=0x20,_0x4e689c[_0x253e74(0x27c)]=0x20;let _0x52b072=_0x4e689c[_0x253e74(0x2c6)]('2d');_0x52b072[_0x107c26(0x172)](0x0,0x0,0x20,0x20),_0x52b072[_0x253e74(0x1ff)](_0x3a7249[_0x214467],0x0,0x0,_0x4e689c[_0x253e74(0x1b8)],_0x4e689c[_0x253e74(0x27c)]),_0x9975e1[_0x253e74(0x237)](_0x4e689c);const _0x32c431=document[_0x107c26(0x1f6)](_0x253e74(0x28e));_0x32c431[_0x253e74(0x221)]=_0x253e74(0x2d6)+(_0x214467+0x1),_0x9975e1[_0x253e74(0x237)](_0x32c431);const _0x486500=document[_0x253e74(0x1d6)](_0x253e74(0x2a4));_0x486500[_0x253e74(0x221)]='↑',_0x486500[_0x253e74(0x252)]=_0x253e74(0x20e),_0x486500[_0x107c26(0x124)]=_0x107c26(0x101),_0x486500[_0x253e74(0x256)]=_0x214467===_0x3a7249[_0x253e74(0x1c4)]-0x1,_0x486500[_0x253e74(0x234)]=_0x425d7c=>{const _0x598fc5=a0_0x35c9,_0xa33416=_0x253e74;_0x425d7c[_0x598fc5(0x156)](),_0x214467<_0x3a7249[_0xa33416(0x1c4)]-0x1&&swapLayer(_0x214467,_0x214467+0x1);},_0x9975e1[_0x253e74(0x237)](_0x486500);const _0x50385f=document[_0x107c26(0x1f6)](_0x107c26(0x1bf));_0x50385f[_0x107c26(0x154)]='↓',_0x50385f[_0x107c26(0x15c)]=_0x253e74(0x20e),_0x50385f[_0x2e308a(0xed)]=_0x107c26(0x186),_0x50385f[_0x253e74(0x256)]=_0x214467===0x0,_0x50385f[_0x107c26(0x19d)]=_0x2afd42=>{const _0x4560d9=_0x253e74;_0x2afd42[_0x4560d9(0x214)](),_0x214467>0x0&&swapLayer(_0x214467,_0x214467-0x1);},_0x9975e1[_0x253e74(0x237)](_0x50385f);const _0x40ed5c=document[_0x253e74(0x1d6)](_0x253e74(0x2a4));_0x40ed5c[_0x253e74(0x221)]='削除',_0x40ed5c[_0x253e74(0x252)]=_0x253e74(0x20e),_0x40ed5c[_0x253e74(0x198)]=_0x107c26(0xdf),_0x40ed5c[_0x253e74(0x256)]=_0x3a7249[_0x253e74(0x1c4)]===0x1,_0x40ed5c[_0x253e74(0x234)]=_0x30ad56=>{const _0x3ff3d3=_0x253e74;_0x30ad56[_0x3ff3d3(0x214)](),removeLayerAt(_0x214467);},_0x9975e1[_0x253e74(0x237)](_0x40ed5c),_0xdccdf7[_0x253e74(0x237)](_0x9975e1);}}function swapLayer(_0xb0b491,_0x5acdbe){const _0x2409cc=a0_0x5049d9,_0x1a307b=a0_0x38aafa;let _0x110425=getCurrentFrame();[_0x110425[_0x1a307b(0x262)][_0xb0b491],_0x110425[_0x1a307b(0x262)][_0x5acdbe]]=[_0x110425[_0x1a307b(0x262)][_0x5acdbe],_0x110425[_0x1a307b(0x262)][_0xb0b491]],[_0x110425[_0x1a307b(0x29c)][_0xb0b491],_0x110425[_0x2409cc(0x195)][_0x5acdbe]]=[_0x110425[_0x1a307b(0x29c)][_0x5acdbe],_0x110425[_0x2409cc(0x195)][_0xb0b491]],[_0x110425[_0x1a307b(0x2d0)][_0xb0b491],_0x110425[_0x1a307b(0x2d0)][_0x5acdbe]]=[_0x110425[_0x1a307b(0x2d0)][_0x5acdbe],_0x110425[_0x1a307b(0x2d0)][_0xb0b491]];if(_0x110425[_0x1a307b(0x1b5)]===_0xb0b491)_0x110425[_0x1a307b(0x1b5)]=_0x5acdbe;else{if(_0x110425[_0x2409cc(0x215)]===_0x5acdbe)_0x110425[_0x1a307b(0x1b5)]=_0xb0b491;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x1b4759){const _0x18df7e=a0_0x5049d9,_0x2227bf=a0_0x38aafa;let _0x236ff4=getCurrentFrame();if(_0x236ff4[_0x2227bf(0x262)][_0x2227bf(0x1c4)]<=0x1)return;_0x236ff4[_0x2227bf(0x262)][_0x2227bf(0x2b7)](_0x1b4759,0x1),_0x236ff4[_0x2227bf(0x29c)][_0x2227bf(0x2b7)](_0x1b4759,0x1),_0x236ff4[_0x18df7e(0x179)][_0x18df7e(0xed)](_0x1b4759,0x1);if(_0x236ff4[_0x2227bf(0x1b5)]>=_0x236ff4[_0x2227bf(0x262)][_0x2227bf(0x1c4)])_0x236ff4[_0x18df7e(0x215)]=_0x236ff4[_0x2227bf(0x262)][_0x2227bf(0x1c4)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x1cda27=a0_0x5049d9,_0x29e012=a0_0x38aafa;let _0x43b9e3=getCurrentProject(),_0x574134=getCurrentFrame(),_0x36a2d6=document[_0x29e012(0x1d6)](_0x29e012(0x19d));_0x36a2d6[_0x1cda27(0x190)]=_0x43b9e3[_0x1cda27(0x190)]*cellSize,_0x36a2d6[_0x29e012(0x27c)]=_0x43b9e3[_0x1cda27(0x13b)]*cellSize,_0x574134[_0x29e012(0x262)][_0x29e012(0x278)](_0x36a2d6),_0x574134[_0x29e012(0x29c)][_0x29e012(0x278)]([]),_0x574134[_0x29e012(0x2d0)][_0x1cda27(0x19e)]([]),_0x574134[_0x1cda27(0x215)]=_0x574134[_0x29e012(0x262)][_0x1cda27(0xf5)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x535a0a=a0_0x56c5,_0x5cbb87=a0_0x5049d9,_0x3c1a39=a0_0x38aafa;let _0x10f418=getCurrentFrame();if(_0x10f418[_0x3c1a39(0x262)][_0x3c1a39(0x1c4)]<=0x1)return;_0x10f418[_0x5cbb87(0x13d)][_0x5cbb87(0xed)](_0x10f418[_0x3c1a39(0x1b5)],0x1),_0x10f418[_0x3c1a39(0x29c)][_0x3c1a39(0x2b7)](_0x10f418[_0x3c1a39(0x1b5)],0x1),_0x10f418[_0x3c1a39(0x2d0)][_0x535a0a(0x1e6)](_0x10f418[_0x3c1a39(0x1b5)],0x1),_0x10f418[_0x3c1a39(0x1b5)]=Math[_0x5cbb87(0x107)](0x0,_0x10f418[_0x3c1a39(0x1b5)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x5d0fc1){const _0x2c1604=a0_0x38aafa;getCurrentFrame()[_0x2c1604(0x1b5)]=parseInt(_0x5d0fc1),updateLayerUI();}let PALETTE_COLORS=[a0_0x38aafa(0x1f3),a0_0x38aafa(0x1ba),a0_0x38aafa(0x244),a0_0x38aafa(0x19a),a0_0x38aafa(0x281),a0_0x5049d9(0x1da),a0_0x38aafa(0x265),a0_0x38aafa(0x2c2),a0_0x38aafa(0x266),a0_0x5049d9(0x194),a0_0x38aafa(0x29a),a0_0x38aafa(0x296),a0_0x38aafa(0x291),a0_0x38aafa(0x1b9),a0_0x38aafa(0x1ee),a0_0x38aafa(0x202),a0_0x38aafa(0x26c),a0_0x38aafa(0x269),a0_0x38aafa(0x219),a0_0x5049d9(0x147),a0_0x38aafa(0x25b)],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){const _0x56ef17=a0_0x5049d9,_0x30eb9d=a0_0x38aafa;let _0x323731=getCurrentProject();if(!_0x323731||!_0x323731[_0x56ef17(0x17f)]||_0x323731[_0x30eb9d(0x2b3)][_0x30eb9d(0x1c4)]<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0x2b74b5=_0x323731[_0x30eb9d(0x2b3)];animationTimer=setInterval(()=>{const _0x9a263d=_0x56ef17,_0x2a471e=_0x30eb9d;ctx[_0x9a263d(0x172)](0x0,0x0,canvas[_0x2a471e(0x1b8)],canvas[_0x2a471e(0x27c)]);let _0x3bde71=_0x2b74b5[animationIndex];for(let _0x446c44=0x0;_0x446c44<_0x3bde71[_0x2a471e(0x262)][_0x2a471e(0x1c4)];_0x446c44++){ctx[_0x2a471e(0x1ff)](_0x3bde71[_0x9a263d(0x13d)][_0x446c44],0x0,0x0);}drawGrid(_0x323731[_0x2a471e(0x1b8)],_0x323731[_0x2a471e(0x27c)]),animationIndex=(animationIndex+0x1)%_0x2b74b5[_0x2a471e(0x1c4)];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function setAnimationDelay(_0x48a30c){const _0x1a4322=a0_0x38aafa;_0x48a30c=Math[_0x1a4322(0x2c3)](0xa,parseInt(_0x48a30c,0xa)||0x12c),animationDelay=_0x48a30c,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x4006ec){const _0x7fed59=a0_0x56c5,_0x2bf8a0=a0_0x5049d9,_0xce84c8=a0_0x38aafa;currentTool=_0x4006ec,document[_0xce84c8(0x29b)](_0xce84c8(0x191))[_0x7fed59(0x14c)](_0x4870b7=>{const _0x4a78c3=_0x7fed59,_0x5bf54f=_0xce84c8;_0x4870b7[_0x4a78c3(0x100)][_0x5bf54f(0x29f)](_0x5bf54f(0x1a9),_0x4870b7[_0x5bf54f(0x2ba)][_0x5bf54f(0x1be)]===_0x4006ec);}),document[_0xce84c8(0x29b)](_0x2bf8a0(0x16f))[_0xce84c8(0x1bd)](_0x364b44=>{const _0x3ca28f=_0x2bf8a0,_0x170f1c=_0xce84c8;_0x364b44[_0x3ca28f(0x176)][_0x170f1c(0x29f)](_0x170f1c(0x1a9),_0x364b44[_0x170f1c(0x2ba)][_0x170f1c(0x1be)]===_0x4006ec);}),_0x4006ec===_0xce84c8(0x232)?canvas[_0x2bf8a0(0x1bb)][_0x2bf8a0(0x151)]=_0xce84c8(0x231):canvas[_0xce84c8(0x1f8)][_0xce84c8(0x2bd)]=_0x2bf8a0(0x10c);}function setPenSize(_0x5b8813){const _0x242a87=a0_0x5049d9,_0x3eee67=a0_0x38aafa;penSize=parseInt(_0x5b8813)||0x1;let _0x57625a=document[_0x242a87(0x192)](_0x3eee67(0x1c3));if(_0x57625a)_0x57625a[_0x3eee67(0x24e)]=penSize;let _0x22cb85=document[_0x3eee67(0x275)](_0x3eee67(0x250));if(_0x22cb85)_0x22cb85[_0x3eee67(0x24e)]=penSize;}function setPenMode(_0x1942c6){const _0x59ab83=a0_0x38aafa;penMode=_0x1942c6;let _0x142604=document[_0x59ab83(0x275)](_0x59ab83(0x23a));if(_0x142604)_0x142604[_0x59ab83(0x24e)]=penMode;let _0x29356d=document[_0x59ab83(0x275)](_0x59ab83(0x1a1));if(_0x29356d)_0x29356d[_0x59ab83(0x24e)]=penMode;}function a0_0x5ad1(){const _0xe7ca35=a0_0x35c9,_0x43d05b=a0_0x56c5,_0x386526=a0_0x5049d9,_0x2470e2=[_0x386526(0x1db),_0x386526(0x16a),_0x43d05b(0x1e6),_0x386526(0x125),_0x386526(0x18c),_0x43d05b(0xc1),_0x386526(0x165),_0x386526(0x1f0),_0x386526(0x151),_0x386526(0x18a),_0x386526(0x1d9),_0x386526(0x126),_0x386526(0x1b8),_0x386526(0x19a),_0x386526(0x107),_0x386526(0x1a6),_0x386526(0x181),_0x386526(0x162),_0x386526(0x191),_0xe7ca35(0x1b2),_0x386526(0x1f1),_0x386526(0x17e),_0x386526(0x178),_0x43d05b(0x1c0),_0x386526(0x17c),_0x386526(0x226),_0xe7ca35(0x224),_0x386526(0x179),_0x386526(0x1c9),_0x386526(0x21a),_0x386526(0x1f7),_0x386526(0xe1),_0x386526(0x1e3),_0xe7ca35(0x1bf),_0x386526(0x170),_0x386526(0x158),_0x43d05b(0x165),_0x386526(0x22e),_0x386526(0xe8),_0x386526(0x142),_0x386526(0x123),_0x386526(0x1c6),_0xe7ca35(0x188),_0x386526(0x1cd),_0x386526(0x1c4),_0x43d05b(0xf9),_0x43d05b(0x1a1),_0x386526(0x1f2),'target',_0x386526(0x1c1),_0x43d05b(0xe0),_0x386526(0x114),_0x386526(0x11b),_0xe7ca35(0x11e),_0x386526(0x237),_0x386526(0x144),_0x43d05b(0xab),_0x386526(0x122),_0x386526(0x148),_0x43d05b(0x114),_0x43d05b(0x110),_0x43d05b(0x10e),_0x43d05b(0x1c5),_0x386526(0x1b2),_0x386526(0x1e8),_0x386526(0x238),_0x386526(0x180),_0x386526(0x231),_0x386526(0x11a),_0x386526(0x1fd),_0x43d05b(0x1af),_0x386526(0x110),_0x386526(0xfc),_0x386526(0x1aa),_0x386526(0x233),_0x386526(0xf0),_0x386526(0x22f),_0x386526(0x224),_0x386526(0xdb),_0x386526(0x1af),_0x386526(0x100),_0x386526(0x219),_0x386526(0x14c),_0xe7ca35(0x117),_0x386526(0x20e),_0x386526(0xf8),_0x43d05b(0x142),_0x43d05b(0xed),_0x386526(0x15e),_0x43d05b(0x1cb),_0x43d05b(0x1a0),_0x386526(0x188),_0x386526(0x20f),_0xe7ca35(0x15b),_0x386526(0x160),_0x386526(0x10e),_0x386526(0x206),_0x386526(0x14d),_0x43d05b(0xd2),_0x43d05b(0xde),_0x386526(0x1a9),_0x43d05b(0x162),_0x386526(0xfe),_0x386526(0x169),_0x386526(0x19f),_0x386526(0xdc),_0x386526(0x173),_0xe7ca35(0x130),_0x43d05b(0x1f9),'auto',_0x43d05b(0x1c9),_0xe7ca35(0x14f),_0x43d05b(0xb2),_0x43d05b(0xba),_0x386526(0x1ec),_0x386526(0x1be),_0x43d05b(0xc0),_0x386526(0x121),_0x386526(0x14a),_0x386526(0x190),_0x386526(0xf2),_0x386526(0x202),_0x386526(0x1d8),_0x386526(0x155),_0x386526(0x10a),_0x43d05b(0xf2),_0x43d05b(0xc8),_0x386526(0x196),_0x386526(0x236),_0xe7ca35(0x1db),_0x386526(0xde),_0x386526(0xf5),_0x43d05b(0x1fc),_0x386526(0x140),_0x386526(0x22c),_0x386526(0x1a4),_0x386526(0x1d0),_0x43d05b(0x1c4),_0xe7ca35(0x228),_0x386526(0x13a),_0x43d05b(0x12f),_0x386526(0x187),_0x386526(0x235),_0x386526(0x208),_0x386526(0x19c),_0x386526(0x174),_0x386526(0x1fb),_0x386526(0x108),_0x386526(0xe5),_0x386526(0x1f6),_0x43d05b(0x128),_0x386526(0x102),_0x386526(0x211),_0x386526(0x198),_0x386526(0x14f),_0x43d05b(0x113),_0x43d05b(0x1b0),_0x386526(0x189),_0x386526(0x1b5),_0x386526(0xec),_0xe7ca35(0x162),_0x386526(0x22a),_0x386526(0x18e),_0x386526(0x223),_0x43d05b(0x19f),_0x386526(0x138),_0x386526(0x1bc),_0x386526(0x1c5),_0x386526(0x234),_0x386526(0x11e),_0x386526(0xdd),_0x43d05b(0x16a),_0x386526(0x1c8),'#808000',_0x386526(0x1c0),_0x386526(0x117),_0x386526(0x1ca),_0x43d05b(0x1c7),_0x386526(0x1a5),_0x386526(0x15d),_0x386526(0x218),_0x386526(0x10d),_0x386526(0x185),_0x43d05b(0x178),_0x386526(0x229),_0x386526(0xe0),_0x43d05b(0x1bd),_0x386526(0x1b7),_0x386526(0x1ce),_0x386526(0x1df),_0x386526(0x230),_0x43d05b(0xd4),_0x386526(0x159),_0x43d05b(0x18a),_0x386526(0x175),_0x386526(0x1d6),_0x386526(0x20d),_0x386526(0x157),_0x386526(0x1fa),_0x386526(0x103),_0x43d05b(0x17f),_0x386526(0x1e7),_0x386526(0x200),_0x386526(0xfa),_0x43d05b(0xb3),_0x43d05b(0x11e),_0x386526(0x1d2),_0x386526(0x12a),_0x386526(0x141),_0x386526(0x1fe),_0x386526(0x1ef),_0x386526(0x15a),_0x386526(0x1de),_0x386526(0x10b),_0x386526(0x171),_0x386526(0x1d7),_0x386526(0x1e0),_0x386526(0x207),_0x386526(0x232),_0x386526(0x14b),_0x386526(0x1a3),_0x386526(0x17a),_0x386526(0x166),_0x386526(0x16c),_0x386526(0x154),_0x386526(0x18b),_0x386526(0x20b),_0x386526(0xea),_0x43d05b(0x169),_0x386526(0x1f8),_0xe7ca35(0x163),_0x43d05b(0x17b),_0x386526(0x1ba),_0x43d05b(0x176),_0x386526(0x176),_0x386526(0x1f4),_0x386526(0x172),_0x386526(0x16b),_0x386526(0x1eb),_0x43d05b(0x11f),_0x386526(0x199),_0xe7ca35(0x20b),_0x43d05b(0xd0),_0x386526(0x19d),_0x43d05b(0xc6),_0x386526(0x109),_0x386526(0x1c2),_0x386526(0x21f),_0x386526(0x1e1),_0x43d05b(0x190),'layerList',_0x386526(0x177),_0x43d05b(0x147),_0x43d05b(0x1a3),_0x386526(0x1f5),_0x386526(0x112),_0xe7ca35(0x133),_0x386526(0x1dd),_0x386526(0x1ae),_0x386526(0x17b),_0x386526(0x16e),_0x386526(0x1b6),'palette-alphaSlider',_0x386526(0x1d4),_0x386526(0x132),_0x386526(0x116),_0x386526(0x145),_0x386526(0x19b),_0x386526(0x22d),_0x386526(0x12e),_0x386526(0x1a7),_0x386526(0x225),_0x43d05b(0x15c),_0x43d05b(0xc9),_0x386526(0xf7),_0x43d05b(0x195),_0x386526(0x134),_0x386526(0x1d1),_0x386526(0x20c),_0x43d05b(0x153),_0x386526(0x130),_0x386526(0x1d5),_0x386526(0x1e4),_0x386526(0x143),_0x386526(0x12b),_0x386526(0x1e2),_0x386526(0x1ea),_0xe7ca35(0xe9),_0x43d05b(0x136),_0x386526(0x13d),_0xe7ca35(0x1a5),_0x43d05b(0x173),_0xe7ca35(0x152),_0x386526(0x13c),_0x386526(0x164),_0xe7ca35(0x17e),_0x386526(0x15f),_0x386526(0x11d),_0x386526(0xe6),_0x43d05b(0x140),_0x386526(0x212),_0x386526(0x137),_0x386526(0x167),_0x386526(0x1dc),_0x386526(0x120),_0xe7ca35(0x16f),_0x386526(0x228),_0x386526(0x1e6),_0xe7ca35(0x116),_0x386526(0x14e),_0x386526(0x1ff),_0x386526(0x19e),_0x386526(0x163),_0x386526(0x21b),_0x386526(0x1cb),_0x43d05b(0x1ff),_0x386526(0x127),_0x386526(0x21c),_0x386526(0x13f),_0x386526(0x1b0),_0x386526(0x105),_0xe7ca35(0x19c),_0x386526(0x161),_0x386526(0x139),_0x386526(0x119),_0x386526(0x1b1),_0xe7ca35(0x169),_0x386526(0x20a),_0xe7ca35(0x1be),_0x386526(0x1e5),_0x386526(0x115),_0x386526(0x1b4),_0x43d05b(0x1ba),_0x386526(0x111),_0x43d05b(0x163),_0x386526(0x1ad),_0x386526(0x10f),_0x386526(0x104),_0x386526(0x113),_0x386526(0x18f),_0x386526(0x182),_0x386526(0x222),_0x386526(0x11c),_0x386526(0x213),_0x386526(0x214),'#00ffff',_0x386526(0xe9),_0x386526(0x195),_0x43d05b(0x129),_0x386526(0x1cc),_0x386526(0x184),_0x386526(0x1cf),_0x386526(0x1b3),_0x386526(0x152),_0x386526(0x220),_0x386526(0x1bf),_0x386526(0x12c),_0x386526(0x146),_0x43d05b(0x127),_0xe7ca35(0xf1),_0x386526(0x131),_0x386526(0x1bd),_0x386526(0x1f3),_0x386526(0x22b),_0x386526(0x221),_0x386526(0x135),_0x386526(0xe3),_0x386526(0x106),_0xe7ca35(0x121),_0x386526(0x1ed),_0x386526(0x17f),_0x386526(0x1c7)];return a0_0x5ad1=function(){return _0x2470e2;},a0_0x5ad1();}function hexToRgba(_0x3ab8f2,_0x37bb62=0x1){const _0xf454c5=a0_0x5049d9,_0x1f4ea0=a0_0x38aafa;if(_0x3ab8f2===_0x1f4ea0(0x1f3)||_0x3ab8f2===_0x1f4ea0(0x25c))return[0x0,0x0,0x0,0x0];_0x3ab8f2=_0x3ab8f2[_0x1f4ea0(0x27d)]('#','');if(_0x3ab8f2[_0x1f4ea0(0x1c4)]===0x3)_0x3ab8f2=_0x3ab8f2[_0x1f4ea0(0x285)]('')[_0xf454c5(0x18f)](_0x2336d7=>_0x2336d7+_0x2336d7)[_0xf454c5(0xf9)]('');let _0x46d48f=parseInt(_0x3ab8f2,0x10);return[_0x46d48f>>0x10&0xff,_0x46d48f>>0x8&0xff,_0x46d48f&0xff,Math[_0x1f4ea0(0x26f)](0xff*_0x37bb62)];}function fillAt(_0x7656d1,_0x39cf74){const _0x1cc702=a0_0x35c9,_0x1380b5=a0_0x56c5,_0x5512bc=a0_0x5049d9,_0x531c8b=a0_0x38aafa;let _0x49e736=getCurrentProject(),_0x5c9170=getCurrentFrame(),_0x11ace1=_0x5c9170[_0x531c8b(0x262)][_0x5c9170[_0x531c8b(0x1b5)]][_0x531c8b(0x2c6)]('2d'),_0x26c8c9=_0x11ace1[_0x531c8b(0x287)](0x0,0x0,_0x49e736[_0x531c8b(0x1b8)]*cellSize,_0x49e736[_0x531c8b(0x27c)]*cellSize),_0x2ad0de=_0x7656d1*cellSize,_0x4f23f8=_0x39cf74*cellSize,_0x4ea96c=getPixel(_0x26c8c9,_0x2ad0de,_0x4f23f8),_0x307c61=currentColor===_0x5512bc(0x1a5)||currentColor===_0x531c8b(0x25c)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x4ea96c,_0x307c61))return;let _0xc53ffc=[[_0x7656d1,_0x39cf74]],_0x498f39=new Set();while(_0xc53ffc[_0x531c8b(0x1c4)]){let [_0x56dc8a,_0x4d77a5]=_0xc53ffc[_0x1cc702(0x15e)]();if(_0x56dc8a<0x0||_0x4d77a5<0x0||_0x56dc8a>=_0x49e736[_0x1380b5(0x13a)]||_0x4d77a5>=_0x49e736[_0x531c8b(0x27c)])continue;let _0x51555f=_0x56dc8a+','+_0x4d77a5;if(_0x498f39[_0x531c8b(0x2bb)](_0x51555f))continue;_0x498f39[_0x531c8b(0x1de)](_0x51555f);let _0x1453bd=_0x56dc8a*cellSize,_0x42f681=_0x4d77a5*cellSize,_0x18588d=getPixel(_0x26c8c9,_0x1453bd,_0x42f681);if(!colorsMatch(_0x18588d,_0x4ea96c))continue;for(let _0x1d5562=0x0;_0x1d5562<cellSize;_0x1d5562++){for(let _0x4586fc=0x0;_0x4586fc<cellSize;_0x4586fc++){setPixel(_0x26c8c9,_0x1453bd+_0x4586fc,_0x42f681+_0x1d5562,_0x307c61);}}_0xc53ffc[_0x531c8b(0x278)]([_0x56dc8a+0x1,_0x4d77a5]),_0xc53ffc[_0x531c8b(0x278)]([_0x56dc8a-0x1,_0x4d77a5]),_0xc53ffc[_0x531c8b(0x278)]([_0x56dc8a,_0x4d77a5+0x1]),_0xc53ffc[_0x5512bc(0x19e)]([_0x56dc8a,_0x4d77a5-0x1]);}_0x11ace1[_0x531c8b(0x19f)](_0x26c8c9,0x0,0x0),redrawAll();}function getPixel(_0x43e53c,_0x155f38,_0x9e84a8){const _0x558f0d=a0_0x56c5,_0x427718=a0_0x5049d9,_0x4fdbc6=a0_0x38aafa;let _0x2514bb=(_0x9e84a8*_0x43e53c[_0x558f0d(0x13a)]+_0x155f38)*0x4;return[_0x43e53c[_0x558f0d(0x136)][_0x2514bb],_0x43e53c[_0x427718(0x15b)][_0x2514bb+0x1],_0x43e53c[_0x4fdbc6(0x261)][_0x2514bb+0x2],_0x43e53c[_0x4fdbc6(0x261)][_0x2514bb+0x3]];}function setPixel(_0x38e7d6,_0x20ae7e,_0x3144b0,_0x5356cd){const _0x3eeb69=a0_0x56c5,_0x275f20=a0_0x38aafa;let _0x4c30e6=(_0x3144b0*_0x38e7d6[_0x275f20(0x1b8)]+_0x20ae7e)*0x4;_0x38e7d6[_0x275f20(0x261)][_0x4c30e6]=_0x5356cd[0x0],_0x38e7d6[_0x275f20(0x261)][_0x4c30e6+0x1]=_0x5356cd[0x1],_0x38e7d6[_0x3eeb69(0x136)][_0x4c30e6+0x2]=_0x5356cd[0x2],_0x38e7d6[_0x275f20(0x261)][_0x4c30e6+0x3]=_0x5356cd[0x3];}function colorsMatch(_0x29aeee,_0x5ba33a){return _0x29aeee[0x0]===_0x5ba33a[0x0]&&_0x29aeee[0x1]===_0x5ba33a[0x1]&&_0x29aeee[0x2]===_0x5ba33a[0x2]&&_0x29aeee[0x3]===_0x5ba33a[0x3];}function handleMouseDown(_0x18a285){const _0x3a0d6f=a0_0x5049d9,_0x563187=a0_0x38aafa;isDrawing=!![];const _0x2255e5=getCanvasCoords(_0x18a285),_0x2cf010=Math[_0x563187(0x1a7)](_0x2255e5['x']/cellSize),_0x1e40be=Math[_0x3a0d6f(0xfe)](_0x2255e5['y']/cellSize);currentTool===_0x563187(0x1a8)?(fillAt(_0x2cf010,_0x1e40be),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x2cf010,_0x1e40be),lastMouse={'x':_0x2cf010,'y':_0x1e40be});}function handleMouseMove(_0x458017){const _0x2ab88c=a0_0x5049d9,_0xb20579=a0_0x38aafa;if(!isDrawing)return;const _0x5ce258=getCanvasCoords(_0x458017),_0x114f2c=Math[_0xb20579(0x1a7)](_0x5ce258['x']/cellSize),_0x18f33a=Math[_0xb20579(0x1a7)](_0x5ce258['y']/cellSize);if(!lastMouse){drawDotXY(_0x114f2c,_0x18f33a),lastMouse={'x':_0x114f2c,'y':_0x18f33a};return;}const _0x4c77d1=_0x114f2c-lastMouse['x'],_0xf0f937=_0x18f33a-lastMouse['y'],_0xb29808=Math[_0xb20579(0x2c3)](Math[_0xb20579(0x1a6)](_0x4c77d1),Math[_0xb20579(0x1a6)](_0xf0f937));if(_0xb29808<=0x1)drawDotXY(_0x114f2c,_0x18f33a);else for(let _0x37bfd7=0x1;_0x37bfd7<=_0xb29808;_0x37bfd7++){const _0x4e9ae2=Math[_0x2ab88c(0x167)](lastMouse['x']+_0x4c77d1*_0x37bfd7/_0xb29808),_0x2952ef=Math[_0xb20579(0x26f)](lastMouse['y']+_0xf0f937*_0x37bfd7/_0xb29808);drawDotXY(_0x4e9ae2,_0x2952ef);}lastMouse={'x':_0x114f2c,'y':_0x18f33a};}function handleMouseUp(_0x561607){isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0x270f06){const _0x30a596=a0_0x5049d9,_0x33853a=a0_0x38aafa,_0x140f5c=canvas[_0x33853a(0x280)]();let _0x3d048b=_0x270f06[_0x33853a(0x2d8)]&&_0x270f06[_0x33853a(0x2d8)][0x0]?_0x270f06[_0x33853a(0x2d8)][0x0]:_0x270f06[_0x30a596(0x203)][0x0];const _0x135dcf=canvas[_0x33853a(0x1b8)]/_0x140f5c[_0x30a596(0x190)],_0x32f425=canvas[_0x33853a(0x27c)]/_0x140f5c[_0x33853a(0x27c)],_0x5ab346=_0x3d048b[_0x33853a(0x193)],_0x242e78=_0x3d048b[_0x33853a(0x25d)],_0x43c1eb=(_0x5ab346-_0x140f5c[_0x33853a(0x2a7)])*_0x135dcf,_0x4a48ff=(_0x242e78-_0x140f5c[_0x33853a(0x196)])*_0x32f425;return{'x':Math[_0x33853a(0x1a7)](_0x43c1eb/cellSize),'y':Math[_0x33853a(0x1a7)](_0x4a48ff/cellSize)};}function handleTouchStart(_0xebcaca){const _0x44b2ac=a0_0x56c5,_0x5dfc5d=a0_0x5049d9,_0x4ccbe8=a0_0x38aafa;if(_0xebcaca[_0x5dfc5d(0x158)][_0x4ccbe8(0x1c4)]===0x2){_0xebcaca[_0x4ccbe8(0x1ce)](),isPinching=!![],isDrawing=![];const _0x5d4ae0=_0xebcaca[_0x4ccbe8(0x2d8)][0x0],_0x416b5a=_0xebcaca[_0x4ccbe8(0x2d8)][0x1];pinchStartDistance=Math[_0x4ccbe8(0x18d)](_0x416b5a[_0x44b2ac(0x119)]-_0x5d4ae0[_0x4ccbe8(0x193)],_0x416b5a[_0x4ccbe8(0x25d)]-_0x5d4ae0[_0x5dfc5d(0x12b)]),pinchStartMid={'clientX':(_0x5d4ae0[_0x4ccbe8(0x193)]+_0x416b5a[_0x4ccbe8(0x193)])/0x2,'clientY':(_0x5d4ae0[_0x4ccbe8(0x25d)]+_0x416b5a[_0x4ccbe8(0x25d)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x4ccbe8(0x280)]();}else{if(_0xebcaca[_0x4ccbe8(0x2d8)][_0x4ccbe8(0x1c4)]===0x1){_0xebcaca[_0x5dfc5d(0x187)]();if(isPinching)return;isDrawing=!![];let _0xe59e9=getTouchPos(_0xebcaca);lastTouch=_0xe59e9,currentTool===_0x4ccbe8(0x1a8)?(fillAt(_0xe59e9['x'],_0xe59e9['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0xe59e9['x'],_0xe59e9['y']);}}}function handleTouchMove(_0x3233ed){const _0x4b9c50=a0_0x35c9,_0x2aca82=a0_0x56c5,_0x3794db=a0_0x5049d9,_0x12239d=a0_0x38aafa;if(isPinching||_0x3233ed[_0x12239d(0x2d8)]&&_0x3233ed[_0x3794db(0x158)][_0x12239d(0x1c4)]===0x2){_0x3233ed[_0x12239d(0x1ce)]();const _0x106bc1=_0x3233ed[_0x12239d(0x2d8)][0x0],_0x540950=_0x3233ed[_0x12239d(0x2d8)][0x1],_0x5aba34=Math[_0x2aca82(0xaf)](_0x540950[_0x12239d(0x193)]-_0x106bc1[_0x12239d(0x193)],_0x540950[_0x3794db(0x12b)]-_0x106bc1[_0x12239d(0x25d)]),_0x334914={'clientX':(_0x106bc1[_0x12239d(0x193)]+_0x540950[_0x12239d(0x193)])/0x2,'clientY':(_0x106bc1[_0x3794db(0x12b)]+_0x540950[_0x12239d(0x25d)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x5aba34||0x1;const _0x3fcfe9=_0x5aba34/pinchStartDistance||0x1;let _0xbd620c=pinchStartScale*_0x3fcfe9;_0xbd620c=Math[_0x3794db(0x18d)](Math[_0x12239d(0x2c3)](_0xbd620c,0.2),0x5);const _0x1379f0=pinchRect||canvas[_0x3794db(0x1b0)](),_0x3f91d4=(pinchStartMid[_0x12239d(0x193)]-_0x1379f0[_0x12239d(0x2a7)]-pinchStartPosX)/pinchStartScale,_0x58dad4=(pinchStartMid[_0x3794db(0x12b)]-_0x1379f0[_0x12239d(0x196)]-pinchStartPosY)/pinchStartScale;posX=_0x334914[_0x12239d(0x193)]-_0x1379f0[_0x12239d(0x2a7)]-_0x3f91d4*_0xbd620c,posY=_0x334914[_0x4b9c50(0x19d)]-_0x1379f0[_0x12239d(0x196)]-_0x58dad4*_0xbd620c,scale=_0xbd620c,updateTransform();return;}if(!isDrawing)return;if(_0x3233ed[_0x4b9c50(0xc9)]&&_0x3233ed[_0x12239d(0x2d8)][_0x3794db(0xf5)]>0x1)return;_0x3233ed[_0x2aca82(0xfd)]();let _0x359a8c=getTouchPos(_0x3233ed);if(lastTouch){let _0x2ff7b3=Math[_0x12239d(0x1a6)]((_0x359a8c['x']-lastTouch['x'])*cellSize),_0x26ff73=Math[_0x12239d(0x1a6)]((_0x359a8c['y']-lastTouch['y'])*cellSize);if(_0x2ff7b3>=PAN_CANCEL_DISTANCE||_0x26ff73>=PAN_CANCEL_DISTANCE){if(currentTool!==_0x12239d(0x182)){isDrawing=![];return;}}}if(lastTouch){let _0x25396e=_0x359a8c['x']-lastTouch['x'],_0x1938d0=_0x359a8c['y']-lastTouch['y'],_0x12cd95=Math[_0x3794db(0x107)](Math[_0x3794db(0x11f)](_0x25396e),Math[_0x12239d(0x1a6)](_0x1938d0));for(let _0x5be451=0x1;_0x5be451<=_0x12cd95;_0x5be451++){let _0xb75632=Math[_0x12239d(0x26f)](lastTouch['x']+_0x25396e*_0x5be451/_0x12cd95),_0x4c0e75=Math[_0x12239d(0x26f)](lastTouch['y']+_0x1938d0*_0x5be451/_0x12cd95);drawDotTouch(_0xb75632,_0x4c0e75);}}else drawDotTouch(_0x359a8c['x'],_0x359a8c['y']);lastTouch=_0x359a8c;}function handleTouchEnd(_0x17396a){const _0x3b0d51=a0_0x5049d9,_0x200221=a0_0x38aafa;isPinching&&_0x17396a[_0x200221(0x2d8)]&&_0x17396a[_0x3b0d51(0x158)][_0x200221(0x1c4)]<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null),isDrawing&&(!_0x17396a[_0x3b0d51(0x158)]||_0x17396a[_0x200221(0x2d8)]['length']===0x0)&&saveHistory();if(_0x17396a[_0x3b0d51(0x158)]&&_0x17396a[_0x200221(0x2d8)][_0x200221(0x1c4)]===0x1){let _0x40362c=_0x17396a[_0x200221(0x2d8)][0x0];lastTouch=getTouchPos({'touches':[_0x40362c]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function drawDotXY(_0x5b37e6,_0x495c9d){const _0x409354=a0_0x35c9,_0x206489=a0_0x56c5,_0x124777=a0_0x5049d9,_0x48be0b=a0_0x38aafa;let _0x4d9eee=getCurrentProject(),_0x4ba178=getCurrentFrame();if(!_0x4ba178||!_0x4d9eee)return;if(typeof _0x5b37e6!==_0x48be0b(0x1a2)||typeof _0x495c9d!==_0x48be0b(0x1a2)||_0x5b37e6<0x0||_0x495c9d<0x0||!Number[_0x409354(0xe7)](_0x4d9eee[_0x124777(0x190)])||!Number[_0x124777(0x115)](_0x4d9eee[_0x48be0b(0x27c)])||_0x5b37e6>=_0x4d9eee[_0x124777(0x190)]||_0x495c9d>=_0x4d9eee[_0x48be0b(0x27c)]||!Array[_0x48be0b(0x19c)](_0x4ba178[_0x124777(0x13d)])||typeof _0x4ba178[_0x48be0b(0x1b5)]!==_0x48be0b(0x1a2)||!_0x4ba178[_0x48be0b(0x262)][_0x4ba178[_0x124777(0x215)]])return;let _0x5a0a49=_0x4ba178[_0x48be0b(0x262)][_0x4ba178[_0x124777(0x215)]][_0x48be0b(0x2c6)]('2d');if(!_0x5a0a49)return;if(currentTool===_0x206489(0xd1)||currentColor===_0x48be0b(0x1f3)||currentColor===_0x48be0b(0x25c)||currentAlpha===0x0)drawPenShape(_0x5a0a49,_0x5b37e6,_0x495c9d,_0x48be0b(0x25c),!![]);else{let _0x2ba81b=hexToRgba(currentColor,currentAlpha);_0x5a0a49[_0x48be0b(0x1fe)](),_0x5a0a49[_0x48be0b(0x2a0)]=_0x2ba81b[0x3]/0xff,drawPenShape(_0x5a0a49,_0x5b37e6,_0x495c9d,_0x48be0b(0x210)+_0x2ba81b[0x0]+','+_0x2ba81b[0x1]+','+_0x2ba81b[0x2]+','+_0x2ba81b[0x3]/0xff+')',![]),_0x5a0a49[_0x48be0b(0x2df)]();}redrawAll();}function drawPenShape(_0x34f469,_0x117d08,_0x2adcce,_0x27eb09,_0x36438e){const _0x37ac82=a0_0x56c5,_0x589145=a0_0x5049d9,_0x49e2ff=a0_0x38aafa,_0x554a44=_0x117d08*cellSize,_0x4e29f2=_0x2adcce*cellSize,_0x2a02df=penSize*cellSize;_0x36438e?(_0x34f469[_0x49e2ff(0x1fe)](),_0x34f469[_0x49e2ff(0x20d)]=_0x49e2ff(0x2d5),penMode===_0x49e2ff(0x2ea)?(_0x34f469[_0x49e2ff(0x2eb)](),_0x34f469[_0x49e2ff(0x24a)](_0x554a44+cellSize/0x2,_0x4e29f2+cellSize/0x2,_0x2a02df/0x2,0x0,Math['PI']*0x2),_0x34f469[_0x49e2ff(0x1a8)]()):_0x34f469[_0x49e2ff(0x22d)](_0x554a44-Math[_0x49e2ff(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x4e29f2-Math[_0x49e2ff(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x2a02df,_0x2a02df),_0x34f469[_0x49e2ff(0x2df)]()):(_0x34f469[_0x49e2ff(0x1fe)](),_0x34f469[_0x49e2ff(0x2aa)]=_0x27eb09,penMode===_0x49e2ff(0x2ea)?(_0x34f469[_0x589145(0x237)](),_0x34f469[_0x49e2ff(0x24a)](_0x554a44+cellSize/0x2,_0x4e29f2+cellSize/0x2,_0x2a02df/0x2,0x0,Math['PI']*0x2),_0x34f469[_0x37ac82(0x10d)]()):_0x34f469[_0x49e2ff(0x216)](_0x554a44-Math[_0x589145(0xfe)]((penSize-0x1)/0x2)*cellSize,_0x4e29f2-Math[_0x49e2ff(0x1a7)]((penSize-0x1)/0x2)*cellSize,_0x2a02df,_0x2a02df),_0x34f469[_0x49e2ff(0x2df)]());}function a0_0x22a5(){const _0x5be92e=a0_0x35c9,_0x5d4e74=[_0x5be92e(0x184),'isFinite','zoomSlider',_0x5be92e(0x1bd),_0x5be92e(0x1e1),'#444444','#palette-toolbar\x20.tool-btn',_0x5be92e(0x13b),'touches',_0x5be92e(0x14d),_0x5be92e(0x20d),_0x5be92e(0x213),_0x5be92e(0x1c8),_0x5be92e(0x112),'.section.collapsible\x20.section-content',_0x5be92e(0x102),'save',_0x5be92e(0x103),_0x5be92e(0x11f),_0x5be92e(0x189),'activeProject',_0x5be92e(0x134),_0x5be92e(0x19e),'overflow',_0x5be92e(0x12c),_0x5be92e(0x16c),'onload',_0x5be92e(0xfa),'colorPicker',_0x5be92e(0x1df),_0x5be92e(0x16b),_0x5be92e(0xc8),_0x5be92e(0x20e),_0x5be92e(0xd0),'スタンドアロン形式のプロジェクトを読み込みました:\x20',_0x5be92e(0x1ca),_0x5be92e(0x1b7),_0x5be92e(0x1ab),_0x5be92e(0x14a),_0x5be92e(0x18f),_0x5be92e(0x1e8),_0x5be92e(0xea),'block',_0x5be92e(0x144),'log',_0x5be92e(0x1c5),_0x5be92e(0x20a),_0x5be92e(0x171),'touchmove',_0x5be92e(0x199),_0x5be92e(0xf0),_0x5be92e(0xca),_0x5be92e(0x179),_0x5be92e(0x113),_0x5be92e(0x215),'touchAction',_0x5be92e(0x124),'dark',_0x5be92e(0x1ef),_0x5be92e(0x19a),'application/octet-stream',_0x5be92e(0x187),_0x5be92e(0x203),'1780284xxbNLL',_0x5be92e(0x178),'GIF',_0x5be92e(0x1a8),'innerWidth',_0x5be92e(0x180),_0x5be92e(0x151),'name','documentElement',_0x5be92e(0x16a),_0x5be92e(0x108),'UPNG',_0x5be92e(0x183),_0x5be92e(0x1ee),_0x5be92e(0x211),_0x5be92e(0x1b0),_0x5be92e(0x116),_0x5be92e(0x17d),_0x5be92e(0x1d3),'project',_0x5be92e(0x216),_0x5be92e(0x1bb),_0x5be92e(0x14b),_0x5be92e(0xe3),_0x5be92e(0x21b),_0x5be92e(0x15c),'973508Cqoyrz','Enter',_0x5be92e(0x157),'alphaSlider',_0x5be92e(0x21d),'penSize',_0x5be92e(0x17a),_0x5be92e(0x143),_0x5be92e(0x1f3),_0x5be92e(0x119),_0x5be92e(0xde),_0x5be92e(0xff),_0x5be92e(0x141),_0x5be92e(0xec),_0x5be92e(0xe0),'9167048BqRjmr',_0x5be92e(0x21f),_0x5be92e(0xef),'99eaBytn',_0x5be92e(0xcf),'trim',_0x5be92e(0x132),_0x5be92e(0xf7),'text',_0x5be92e(0xf8),_0x5be92e(0x202),_0x5be92e(0x19d),_0x5be92e(0x104),_0x5be92e(0x18d),_0x5be92e(0x175),_0x5be92e(0xe2),_0x5be92e(0xf3),_0x5be92e(0xeb),_0x5be92e(0x1e6),'encode','remove','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','slice',_0x5be92e(0x13a),'setItem',_0x5be92e(0xf5),'#ff69b4',_0x5be92e(0x109),_0x5be92e(0x1b5),_0x5be92e(0x115),_0x5be92e(0x170),_0x5be92e(0x201),_0x5be92e(0x1fc),_0x5be92e(0x21c),_0x5be92e(0x1fb),'vp8',_0x5be92e(0x16d),_0x5be92e(0x1f1),'palette-penSize',_0x5be92e(0x17c),_0x5be92e(0x138),_0x5be92e(0x1c9),'then','div',_0x5be92e(0x168),_0x5be92e(0x181),_0x5be92e(0x10e),_0x5be92e(0x1d2),_0x5be92e(0xcc),_0x5be92e(0xf2),_0x5be92e(0x15f),'72fOvfXp','114TnziLr','removeEventListener','error','result','nezumi-spritesheet',_0x5be92e(0x210),_0x5be92e(0x194),_0x5be92e(0x218),_0x5be92e(0xfe),_0x5be92e(0x1e9),'push','pointerType','light',_0x5be92e(0x1c1),_0x5be92e(0x12a),_0x5be92e(0x1ce),'このブラウザはWebCodecsによるWEBPアニメーションに対応していません。',_0x5be92e(0x1ba),_0x5be92e(0x145),_0x5be92e(0x18a),_0x5be92e(0x11a),'render','/about?terms=true',_0x5be92e(0x12e),_0x5be92e(0xda),_0x5be92e(0x11b),_0x5be92e(0x10d),_0x5be92e(0x226),'add',_0x5be92e(0x16e),_0x5be92e(0x205),'readAsText','search','onmouseup',_0x5be92e(0xfb),_0x5be92e(0x1a4),_0x5be92e(0x172),_0x5be92e(0x12f),_0x5be92e(0x1dc),_0x5be92e(0x156),_0x5be92e(0xd7),_0x5be92e(0x10c),_0x5be92e(0x1d8),_0x5be92e(0x196),_0x5be92e(0x14e),_0x5be92e(0x158),_0x5be92e(0x219),_0x5be92e(0x190),'height',_0x5be92e(0x177),_0x5be92e(0x111),'click',_0x5be92e(0x148),_0x5be92e(0x197),_0x5be92e(0x200),_0x5be92e(0x1d7),_0x5be92e(0x1a3),'3937560ufqvBg',_0x5be92e(0x1af),_0x5be92e(0xcb),'appendChild',_0x5be92e(0x1d9),_0x5be92e(0x1f0),_0x5be92e(0x154),_0x5be92e(0x1ea),_0x5be92e(0x137),_0x5be92e(0x1f5),_0x5be92e(0x212),_0x5be92e(0x1ed),_0x5be92e(0x15e),'px,\x20','onclick',_0x5be92e(0x223),_0x5be92e(0x1b9),_0x5be92e(0xfc),'grab',_0x5be92e(0x1e3),_0x5be92e(0x1ff),_0x5be92e(0x185),_0x5be92e(0x1f9),'webp',_0x5be92e(0xf4),_0x5be92e(0x1a1),_0x5be92e(0x1b8),'onsuccess','sidebar','transparent','main-container',_0x5be92e(0xfd),_0x5be92e(0x120),'startsWith',_0x5be92e(0x20f),_0x5be92e(0x21e),_0x5be92e(0x1ec),'#c0c0c0',_0x5be92e(0x1bc),_0x5be92e(0x1c4),'matches',_0x5be92e(0x165),_0x5be92e(0x135),'(prefers-color-scheme:\x20dark)',_0x5be92e(0x227),_0x5be92e(0x1b4),_0x5be92e(0x206),_0x5be92e(0x1c2),_0x5be92e(0xdb),'247055AHBsKT','max','frameList',_0x5be92e(0x1c6),_0x5be92e(0x17b),_0x5be92e(0x176),'top',_0x5be92e(0x13f),_0x5be92e(0x15d),_0x5be92e(0x161),'.webm',_0x5be92e(0x208),'getContext',_0x5be92e(0x1c3),_0x5be92e(0x17f),_0x5be92e(0x1ac),'tool',_0x5be92e(0x217),_0x5be92e(0x221),_0x5be92e(0x136),'保存に失敗したチュー:',_0x5be92e(0x19b),_0x5be92e(0x1f6),'square',_0x5be92e(0x1fe),_0x5be92e(0xdd),_0x5be92e(0x159),_0x5be92e(0xdf),_0x5be92e(0x1cd),_0x5be92e(0x150),_0x5be92e(0x1a6),_0x5be92e(0x18e),_0x5be92e(0x166),'span',_0x5be92e(0x1eb),_0x5be92e(0x1d1),_0x5be92e(0x160),_0x5be92e(0x191),_0x5be92e(0x195),_0x5be92e(0x110),_0x5be92e(0x13d),_0x5be92e(0x164),_0x5be92e(0x1d0),_0x5be92e(0x142),_0x5be92e(0xdc),_0x5be92e(0x147),'type',_0x5be92e(0x146),_0x5be92e(0x1c7),_0x5be92e(0x1e2),_0x5be92e(0x220),_0x5be92e(0x125),'canvas-container',_0x5be92e(0x1d6),_0x5be92e(0x1f2),_0x5be92e(0x20c),'\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>消しゴム</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn',_0x5be92e(0x192),'layerHistories',_0x5be92e(0x1f8),_0x5be92e(0xe1),'color-palette','map','active',_0x5be92e(0x209),'new-project-dialog',_0x5be92e(0x18c),'.toggle-btn','ファイルの読み込みに失敗しました。',_0x5be92e(0x1b1),'shift',_0x5be92e(0x214),_0x5be92e(0x20b),_0x5be92e(0xe8),_0x5be92e(0x222),_0x5be92e(0x1ad),_0x5be92e(0x123),'pointerdown','parse',_0x5be92e(0x1cc),_0x5be92e(0x107)];return a0_0x22a5=function(){return _0x5d4e74;},a0_0x22a5();}function a0_0x243d(){const _0x978da3=a0_0x35c9,_0x3aa579=a0_0x56c5,_0x4a91e5=[_0x3aa579(0xc2),_0x3aa579(0x1e8),_0x978da3(0xd6),'activeLayer',_0x3aa579(0x177),_0x3aa579(0x1a2),_0x3aa579(0x171),_0x3aa579(0x1d2),_0x3aa579(0x1be),_0x978da3(0x1dd),_0x3aa579(0x166),_0x3aa579(0x1b8),_0x978da3(0x106),_0x3aa579(0x1f0),_0x3aa579(0xb9),_0x3aa579(0xff),_0x978da3(0x1cf),_0x3aa579(0x144),_0x3aa579(0x105),_0x3aa579(0x1c1),_0x3aa579(0xcd),_0x3aa579(0x1fb),_0x3aa579(0x106),'#newProjCancelBtn',_0x3aa579(0x1ae),_0x3aa579(0x1a5),_0x3aa579(0x19a),_0x3aa579(0x1ad),_0x3aa579(0xaa),_0x3aa579(0xaf),_0x3aa579(0x104),_0x3aa579(0x1f2),_0x3aa579(0x1db),_0x3aa579(0x1d7),_0x3aa579(0xb1),_0x3aa579(0x116),_0x3aa579(0x1e4),'beginPath',_0x3aa579(0xf1),_0x3aa579(0x181),_0x978da3(0xce),_0x978da3(0xd3),_0x3aa579(0x188),_0x3aa579(0x191),_0x3aa579(0x1f4),_0x3aa579(0x1ed),_0x978da3(0x140),_0x3aa579(0xf8),_0x3aa579(0x168),_0x3aa579(0x142),_0x3aa579(0x1e9),_0x978da3(0x1a0),_0x3aa579(0xf2),_0x3aa579(0x157),_0x3aa579(0x102),_0x3aa579(0x13d),_0x3aa579(0x13e),_0x3aa579(0x1aa),_0x3aa579(0x1e6),_0x3aa579(0xc4),_0x3aa579(0x18c),_0x3aa579(0xad),_0x978da3(0x193),_0x3aa579(0xbb),_0x3aa579(0xae),_0x3aa579(0x190),'length',_0x978da3(0x129),_0x3aa579(0x194),_0x3aa579(0xe8),_0x3aa579(0x1d6),_0x3aa579(0x115),_0x978da3(0x13c),_0x3aa579(0x150),_0x3aa579(0xac),_0x3aa579(0x1bf),_0x978da3(0xd8),_0x3aa579(0x16b),'上に移動',_0x3aa579(0x18f),_0x3aa579(0xdc),_0x3aa579(0x18b),_0x3aa579(0x1f7),_0x3aa579(0x15b),_0x3aa579(0xe3),_0x3aa579(0x1d5),_0x3aa579(0x1fd),_0x3aa579(0x14c),_0x3aa579(0x18e),_0x978da3(0x10f),_0x3aa579(0x1b1),_0x3aa579(0x14f),_0x978da3(0x101),_0x3aa579(0x14a),_0x3aa579(0x103),_0x3aa579(0x131),_0x978da3(0x198),_0x3aa579(0x158),_0x3aa579(0x134),_0x978da3(0x1d5),_0x3aa579(0x1cc),_0x3aa579(0xdb),_0x978da3(0xd4),_0x3aa579(0x14d),_0x3aa579(0x1b4),_0x3aa579(0xe1),_0x978da3(0x225),_0x978da3(0x15e),_0x3aa579(0x162),_0x3aa579(0xeb),_0x3aa579(0x1c2),_0x3aa579(0x16c),_0x3aa579(0x196),_0x3aa579(0xed),_0x3aa579(0x1fa),_0x978da3(0x1de),_0x3aa579(0xf5),_0x3aa579(0x187),_0x978da3(0x11d),_0x3aa579(0x10f),_0x3aa579(0x1a6),_0x978da3(0x1d2),_0x3aa579(0xb2),_0x3aa579(0x149),_0x3aa579(0x1d8),_0x3aa579(0x15a),_0x978da3(0x10a),_0x978da3(0x12b),_0x3aa579(0xf6),_0x3aa579(0x199),_0x3aa579(0x1e5),_0x978da3(0x1e2),_0x978da3(0xed),_0x3aa579(0x200),_0x3aa579(0x197),_0x978da3(0xe6),_0x3aa579(0x1ff),_0x3aa579(0xfe),_0x3aa579(0x1c8),_0x3aa579(0x16a),_0x3aa579(0x154),_0x3aa579(0xe4),_0x3aa579(0x126),_0x978da3(0x167),_0x3aa579(0x180),_0x3aa579(0x1bb),_0x978da3(0xf9),_0x3aa579(0x1d0),_0x3aa579(0xd6),_0x978da3(0x204),_0x978da3(0x158),_0x3aa579(0x170),'プロジェクトをIndexedDBに保存したチュー！',_0x3aa579(0x119),_0x3aa579(0x152),_0x3aa579(0x18d),_0x3aa579(0x123),_0x3aa579(0xf9),_0x3aa579(0x1b9),_0x3aa579(0xfa),_0x978da3(0x130),_0x3aa579(0x1ab),_0x3aa579(0x135),_0x978da3(0x13e),_0x3aa579(0xc5),_0x3aa579(0x13b),_0x3aa579(0xfc),_0x3aa579(0x1f6),_0x3aa579(0x136),_0x978da3(0xf4),_0x3aa579(0x117),_0x3aa579(0x17a),_0x3aa579(0xf3),_0x3aa579(0xea),_0x3aa579(0x155),_0x978da3(0x1fa),_0x978da3(0x17b),_0x3aa579(0x1fe),'has',_0x978da3(0x1e0),_0x3aa579(0x122),_0x3aa579(0x11a),_0x978da3(0x142),_0x3aa579(0x16d),_0x3aa579(0x160),_0x3aa579(0x1da),_0x3aa579(0x1e0),_0x978da3(0x1e5),_0x3aa579(0x139),_0x3aa579(0x146),_0x978da3(0x182),'clearRect',_0x3aa579(0x19d),_0x978da3(0x149),_0x978da3(0xcd),_0x3aa579(0x100),_0x978da3(0x131),_0x3aa579(0x16f),'layerRedoStacks',_0x3aa579(0x17d),_0x3aa579(0x138),_0x3aa579(0xef),_0x3aa579(0x13f),_0x3aa579(0x198),_0x3aa579(0x145),_0x3aa579(0xcf),_0x978da3(0xd9),_0x978da3(0x1f7),_0x3aa579(0x1e2),_0x3aa579(0x1c3),_0x3aa579(0x118),_0x3aa579(0x1dc),_0x3aa579(0xfd),_0x978da3(0x114),_0x3aa579(0x1eb),_0x3aa579(0xda),_0x3aa579(0x1e3),_0x978da3(0x155),_0x3aa579(0xba),_0x3aa579(0x167),_0x3aa579(0x120),_0x3aa579(0x13a),_0x978da3(0x11c),_0x3aa579(0x182),_0x978da3(0x220),_0x3aa579(0x1de),_0x3aa579(0x11c),_0x3aa579(0xbe),_0x3aa579(0x1ee),_0x3aa579(0x13c),_0x3aa579(0xc3),_0x978da3(0x1e4),_0x3aa579(0x12b),_0x3aa579(0x159),_0x3aa579(0xbf),_0x3aa579(0x1d9),_0x3aa579(0x121),_0x3aa579(0x15f),_0x3aa579(0xb5),_0x3aa579(0xb7),_0x978da3(0x144),_0x3aa579(0x164),_0x3aa579(0xce),'コマ)',_0x3aa579(0x1b6),_0x3aa579(0x1a7),'touch',_0x3aa579(0xd3),_0x3aa579(0x132),_0x978da3(0x1e7),_0x3aa579(0x1f5),_0x978da3(0x10b),_0x3aa579(0x174),_0x3aa579(0xf7),_0x3aa579(0xc7),_0x3aa579(0x156),_0x978da3(0xf6),_0x3aa579(0x11d),_0x3aa579(0xd5),_0x3aa579(0xe5),_0x3aa579(0x1b3),_0x3aa579(0xb6),_0x3aa579(0x17e),_0x3aa579(0x1bc),_0x978da3(0x151),_0x3aa579(0x17c),_0x3aa579(0x186),_0x3aa579(0x14e),_0x978da3(0x145),'blur',_0x978da3(0xee),_0x3aa579(0xb4),_0x3aa579(0xab),_0x3aa579(0x1ac),_0x3aa579(0x1dd),_0x3aa579(0x183),_0x3aa579(0x16e),_0x3aa579(0x10b),_0x3aa579(0x161),_0x3aa579(0x1b2),_0x3aa579(0x1df),_0x978da3(0x207),_0x3aa579(0xd1),_0x3aa579(0xe9),'globalAlpha',_0x978da3(0x126),_0x3aa579(0x19c),_0x3aa579(0x111),'target',_0x978da3(0x139),_0x3aa579(0x184),_0x3aa579(0x141),_0x978da3(0x128),_0x978da3(0x1a7),_0x3aa579(0x189),_0x3aa579(0x1a9),_0x3aa579(0x1ec),_0x978da3(0x105),_0x3aa579(0xb0),_0x3aa579(0xf0),_0x3aa579(0x143),_0x3aa579(0xcb),_0x3aa579(0x1ea),_0x3aa579(0xb8),_0x3aa579(0xca),_0x3aa579(0x1b5),_0x978da3(0x1cb),_0x3aa579(0x1cd),_0x3aa579(0x124),_0x3aa579(0x1d1),_0x3aa579(0x1af),_0x3aa579(0x175),_0x3aa579(0x185),_0x978da3(0xd2),_0x3aa579(0x1f1),_0x3aa579(0xd8),_0x978da3(0x100),_0x3aa579(0x1a8),_0x3aa579(0x1c6),_0x978da3(0x18b),_0x3aa579(0x1d3),_0x978da3(0x1a2),_0x3aa579(0xbc),_0x3aa579(0xdd),_0x3aa579(0x1f3),_0x978da3(0xe4),_0x3aa579(0x128),_0x978da3(0x127),_0x978da3(0x1b3),_0x978da3(0x1f4),_0x3aa579(0x1b7),_0x3aa579(0x107),_0x3aa579(0x125),_0x3aa579(0xfb),'stroke',_0x3aa579(0x12d),_0x978da3(0x1fd),_0x3aa579(0x19b),_0x3aa579(0x163),_0x978da3(0x1aa),_0x3aa579(0x1a4),_0x3aa579(0x10c),'9UjjHrQ',_0x3aa579(0x130),_0x3aa579(0x1f8),_0x3aa579(0xec),_0x3aa579(0x10a),_0x3aa579(0x148),_0x3aa579(0x112),_0x3aa579(0x101),_0x3aa579(0xdf)];return a0_0x243d=function(){return _0x4a91e5;},a0_0x243d();}function drawDotTouch(_0x5886c8,_0x2621ee){const _0x2a0dad=a0_0x35c9,_0x2299e3=a0_0x56c5,_0x55b6b8=a0_0x5049d9,_0x4f8099=a0_0x38aafa;let _0x490202=getCurrentProject(),_0x595192=getCurrentFrame();if(_0x5886c8<0x0||_0x2621ee<0x0||_0x5886c8>=_0x490202[_0x4f8099(0x1b8)]||_0x2621ee>=_0x490202[_0x4f8099(0x27c)])return;let _0x2b70a3=_0x595192[_0x4f8099(0x262)][_0x595192[_0x4f8099(0x1b5)]][_0x2299e3(0xee)]('2d');if(currentTool===_0x2a0dad(0x120)||currentColor===_0x2a0dad(0x15a)||currentColor===_0x4f8099(0x25c)||currentAlpha===0x0)drawPenShape(_0x2b70a3,_0x5886c8,_0x2621ee,_0x4f8099(0x25c),!![]);else{let _0x4d3b59=hexToRgba(currentColor,currentAlpha);_0x2b70a3[_0x4f8099(0x1fe)](),_0x2b70a3[_0x4f8099(0x2a0)]=_0x4d3b59[0x3]/0xff,drawPenShape(_0x2b70a3,_0x5886c8,_0x2621ee,_0x55b6b8(0x12a)+_0x4d3b59[0x0]+','+_0x4d3b59[0x1]+','+_0x4d3b59[0x2]+','+_0x4d3b59[0x3]/0xff+')',![]),_0x2b70a3['restore']();}redrawAll();}function applyTheme(_0x44166a){const _0x4aa671=a0_0x5049d9,_0x27980b=a0_0x38aafa;document[_0x27980b(0x199)][_0x27980b(0x2b4)](_0x27980b(0x206),_0x44166a);const _0x4c6a21=document[_0x27980b(0x275)](_0x27980b(0x189));_0x4c6a21&&(_0x4c6a21[_0x4aa671(0x154)]=_0x44166a===_0x4aa671(0x122)?'☀️':'🌙',_0x4c6a21[_0x27980b(0x2b4)](_0x27980b(0x2a9),_0x44166a===_0x4aa671(0x122)),_0x4c6a21[_0x4aa671(0x124)]=_0x44166a===_0x27980b(0x2ee)?_0x4aa671(0x1ee):_0x27980b(0x1d0)),localStorage[_0x27980b(0x1fc)](_0x27980b(0x1a4),_0x44166a);}function toggleTheme(){const _0x55b4a9=a0_0x5049d9,_0x587225=a0_0x38aafa;applyTheme(document[_0x55b4a9(0x15e)][_0x55b4a9(0xe2)](_0x587225(0x206))===_0x587225(0x2ee)?_0x587225(0x21b):_0x587225(0x2ee));}(function initTheme(){const _0x1257f7=a0_0x56c5,_0x3d391b=a0_0x5049d9,_0xb9dcb8=a0_0x38aafa,_0x2880b5=localStorage[_0xb9dcb8(0x1d5)](_0xb9dcb8(0x1a4))||(window[_0x3d391b(0xe3)]&&window[_0xb9dcb8(0x2af)](_0xb9dcb8(0x208))[_0x1257f7(0xd9)]?_0x3d391b(0x122):_0xb9dcb8(0x21b));applyTheme(_0x2880b5),document[_0xb9dcb8(0x21d)](_0xb9dcb8(0x293),()=>{const _0x13415f=_0x1257f7,_0x4e21a6=_0xb9dcb8,_0x3272aa=document[_0x4e21a6(0x275)](_0x4e21a6(0x189));_0x3272aa&&(_0x3272aa[_0x4e21a6(0x21d)](_0x13415f(0xab),toggleTheme),_0x3272aa[_0x4e21a6(0x21d)](_0x4e21a6(0x1cc),_0xdf5483=>{const _0x7512ab=_0x4e21a6;(_0xdf5483[_0x7512ab(0x2c5)]===_0x7512ab(0x276)||_0xdf5483[_0x7512ab(0x2c5)]==='\x20')&&(_0xdf5483[_0x7512ab(0x1ce)](),toggleTheme());}));});}(),window[a0_0x521960(0x14d)]=()=>{const _0x558869=a0_0x521960,_0x2c21a7=a0_0x5049d9,_0x78bb1f=a0_0x38aafa;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x2c21a7(0x238)),loadPaletteFromDB()[_0x78bb1f(0x17f)](()=>createPalette()),document[_0x558869(0x182)](_0x558869(0x191))[_0x78bb1f(0x24e)]=penSize,document[_0x78bb1f(0x275)](_0x2c21a7(0xf4))[_0x78bb1f(0x24e)]=penMode;const _0x598a17=document[_0x78bb1f(0x275)](_0x78bb1f(0x229)),_0x5a640b=document[_0x78bb1f(0x275)](_0x78bb1f(0x205));_0x598a17&&_0x5a640b&&(_0x598a17[_0x2c21a7(0x12e)]=animationDelay,_0x5a640b[_0x78bb1f(0x24e)]=animationDelay,_0x598a17[_0x78bb1f(0x28a)]=_0xb71f8b=>{const _0x599e13=_0x2c21a7,_0x3e5efd=_0x78bb1f;_0x5a640b[_0x599e13(0x12e)]=_0xb71f8b[_0x3e5efd(0x2e5)][_0x3e5efd(0x24e)],setAnimationDelay(_0xb71f8b[_0x3e5efd(0x2e5)][_0x3e5efd(0x24e)]);},_0x5a640b[_0x78bb1f(0x222)]=_0x4f2a21=>{const _0x16b2bf=_0x558869,_0x2320fa=_0x2c21a7,_0x3c1e41=_0x78bb1f;let _0x1fbcc7=Math[_0x3c1e41(0x2c3)](0xa,Math[_0x2320fa(0x18d)](0x1388,parseInt(_0x4f2a21[_0x3c1e41(0x2e5)][_0x16b2bf(0x149)])||animationDelay));_0x598a17[_0x3c1e41(0x24e)]=_0x1fbcc7,_0x5a640b[_0x2320fa(0x12e)]=_0x1fbcc7,setAnimationDelay(_0x1fbcc7);}),canvas[_0x78bb1f(0x239)]=handleMouseMove,canvas[_0x78bb1f(0x238)]=handleMouseUp,canvas[_0x78bb1f(0x1b7)]=handleMouseUp,canvas[_0x78bb1f(0x21a)]=handleTouchStart,canvas[_0x78bb1f(0x267)]=handleTouchMove,canvas[_0x78bb1f(0x212)]=handleTouchEnd,canvas[_0x78bb1f(0x2ac)]=handleTouchEnd,canvas[_0x78bb1f(0x21d)](_0x2c21a7(0x1d8),handleTouchStart,{'passive':![]}),canvas[_0x78bb1f(0x21d)](_0x78bb1f(0x28f),handleTouchMove,{'passive':![]}),canvas[_0x2c21a7(0x1a3)](_0x78bb1f(0x1e1),handleTouchEnd,{'passive':![]}),canvas[_0x78bb1f(0x21d)](_0x78bb1f(0x1b6),handleTouchEnd,{'passive':![]}),idbGet(_0x78bb1f(0x263))&&loadProjectFromIDB();});function drawGrid(_0x424e49,_0x5578a8){const _0x12f779=a0_0x521960,_0x57a8ae=a0_0x5049d9,_0x5a38de=a0_0x38aafa;ctx[_0x5a38de(0x1fe)](),ctx[_0x5a38de(0x2b5)]=_0x5a38de(0x26b);for(let _0xa7f423=0x0;_0xa7f423<=_0x424e49;_0xa7f423++){ctx[_0x5a38de(0x2eb)](),ctx[_0x5a38de(0x29e)](_0xa7f423*cellSize,0x0),ctx[_0x12f779(0xae)](_0xa7f423*cellSize,_0x5578a8*cellSize),ctx[_0x57a8ae(0x201)]();}for(let _0x41449f=0x0;_0x41449f<=_0x5578a8;_0x41449f++){ctx[_0x12f779(0x108)](),ctx[_0x5a38de(0x29e)](0x0,_0x41449f*cellSize),ctx[_0x57a8ae(0xf3)](_0x424e49*cellSize,_0x41449f*cellSize),ctx[_0x5a38de(0x2d9)]();}ctx[_0x5a38de(0x2df)]();}function redrawAll(){const _0x153709=a0_0x521960,_0x21d2ed=a0_0x5049d9,_0x2850cf=a0_0x38aafa;let _0x1c54a6=getCurrentProject(),_0x3e088f=getCurrentFrame();canvas[_0x2850cf(0x1b8)]=_0x1c54a6[_0x2850cf(0x1b8)]*cellSize,canvas[_0x2850cf(0x27c)]=_0x1c54a6[_0x2850cf(0x27c)]*cellSize,ctx[_0x21d2ed(0x172)](0x0,0x0,canvas[_0x2850cf(0x1b8)],canvas[_0x153709(0x1ff)]);for(let _0x5255cf=0x0;_0x5255cf<_0x3e088f[_0x2850cf(0x262)][_0x21d2ed(0xf5)];_0x5255cf++){ctx[_0x21d2ed(0x230)](_0x3e088f[_0x2850cf(0x262)][_0x5255cf],0x0,0x0);}drawGrid(_0x1c54a6[_0x21d2ed(0x190)],_0x1c54a6[_0x2850cf(0x27c)]),wrapper&&(wrapper[_0x2850cf(0x1f8)][_0x21d2ed(0x190)]=_0x2850cf(0x2d3),wrapper[_0x2850cf(0x1f8)][_0x2850cf(0x27c)]=_0x2850cf(0x1ae));}function saveHistory(){const _0x5d44e9=a0_0x521960,_0x357fd6=a0_0x5049d9,_0x169c52=a0_0x38aafa;let _0x786cac=getCurrentFrame(),_0x327041=_0x786cac[_0x169c52(0x29c)][_0x786cac[_0x169c52(0x1b5)]];_0x327041[_0x357fd6(0x19e)](_0x786cac[_0x169c52(0x262)][_0x786cac[_0x169c52(0x1b5)]][_0x5d44e9(0xd5)]());if(_0x327041[_0x169c52(0x1c4)]>0x32)_0x327041[_0x169c52(0x1d7)]();_0x786cac[_0x169c52(0x2d0)][_0x786cac[_0x357fd6(0x215)]]=[];}function undo(){const _0x483207=a0_0x521960,_0x4b82ab=a0_0x5049d9,_0x28101a=a0_0x38aafa;let _0x2671ad=getCurrentFrame(),_0xe3516=_0x2671ad[_0x28101a(0x29c)][_0x2671ad[_0x4b82ab(0x215)]],_0x139531=_0x2671ad[_0x28101a(0x2d0)][_0x2671ad[_0x28101a(0x1b5)]];if(!_0xe3516||_0xe3516[_0x28101a(0x1c4)]<0x2)return;_0x139531[_0x4b82ab(0x19e)](_0xe3516[_0x483207(0xbd)]());let _0xcd9762=new Image();_0xcd9762[_0x28101a(0x185)]=()=>{const _0x3c4a46=_0x4b82ab,_0x2aaf0d=_0x28101a;let _0x3e4e6e=_0x2671ad[_0x2aaf0d(0x262)][_0x2671ad[_0x2aaf0d(0x1b5)]][_0x2aaf0d(0x2c6)]('2d');_0x3e4e6e[_0x2aaf0d(0x22d)](0x0,0x0,_0x2671ad[_0x2aaf0d(0x262)][_0x2671ad[_0x3c4a46(0x215)]][_0x2aaf0d(0x1b8)],_0x2671ad[_0x2aaf0d(0x262)][_0x2671ad[_0x2aaf0d(0x1b5)]][_0x2aaf0d(0x27c)]),_0x3e4e6e[_0x3c4a46(0x230)](_0xcd9762,0x0,0x0),redrawAll();},_0xcd9762[_0x4b82ab(0x1ec)]=_0xe3516[_0xe3516[_0x483207(0xd7)]-0x1];}function redo(){const _0x29065b=a0_0x5049d9,_0x5a6654=a0_0x38aafa;let _0x1d57f8=getCurrentFrame(),_0x324791=_0x1d57f8[_0x29065b(0x195)][_0x1d57f8[_0x29065b(0x215)]],_0x5033c8=_0x1d57f8[_0x29065b(0x179)][_0x1d57f8[_0x29065b(0x215)]];if(!_0x5033c8||_0x5033c8[_0x29065b(0xf5)]===0x0)return;let _0x3a64a5=_0x5033c8[_0x5a6654(0x1ea)]();_0x324791[_0x29065b(0x19e)](_0x3a64a5);let _0x42d1cb=new Image();_0x42d1cb[_0x5a6654(0x185)]=()=>{const _0x3a517a=a0_0x56c5,_0x3bed67=_0x29065b,_0x2e32cc=_0x5a6654;let _0x59edd8=_0x1d57f8[_0x3bed67(0x13d)][_0x1d57f8[_0x2e32cc(0x1b5)]][_0x2e32cc(0x2c6)]('2d');_0x59edd8[_0x2e32cc(0x22d)](0x0,0x0,_0x1d57f8[_0x2e32cc(0x262)][_0x1d57f8[_0x2e32cc(0x1b5)]][_0x3a517a(0x13a)],_0x1d57f8[_0x3bed67(0x13d)][_0x1d57f8[_0x3bed67(0x215)]][_0x2e32cc(0x27c)]),_0x59edd8[_0x2e32cc(0x1ff)](_0x42d1cb,0x0,0x0),redrawAll();},_0x42d1cb[_0x5a6654(0x1b3)]=_0x3a64a5;}function exportImage(_0x6c5ad1){const _0x44bfe2=a0_0x521960,_0x29312d=a0_0x5049d9,_0x1c6c73=a0_0x38aafa;let _0x1919c6=getCurrentProject(),_0x35050f=_0x1919c6[_0x1c6c73(0x2b3)],_0x214e42=_0x6c5ad1===_0x1c6c73(0x248)||_0x6c5ad1===_0x1c6c73(0x242)?_0x1c6c73(0x18a):_0x1c6c73(0x203)+_0x6c5ad1,_0x31b9ba=_0x35050f[_0x1c6c73(0x1c4)]>0x1,_0x18f59b=(_0x1919c6[_0x1c6c73(0x2e6)]||_0x1c6c73(0x200))[_0x1c6c73(0x27d)](/[\\/:*?"<>|]/g,'_');if(!_0x31b9ba){let _0x43fefb=document[_0x1c6c73(0x1d6)](_0x1c6c73(0x19d));_0x43fefb[_0x29312d(0x190)]=_0x1919c6[_0x1c6c73(0x1b8)]*cellSize,_0x43fefb[_0x44bfe2(0x1ff)]=_0x1919c6[_0x1c6c73(0x27c)]*cellSize;let _0x4a4c6d=_0x43fefb[_0x29312d(0x162)]('2d'),_0x15aa77=getCurrentFrame();for(let _0x3e4161=0x0;_0x3e4161<_0x15aa77[_0x1c6c73(0x262)][_0x1c6c73(0x1c4)];_0x3e4161++){_0x4a4c6d[_0x29312d(0x230)](_0x15aa77[_0x1c6c73(0x262)][_0x3e4161],0x0,0x0);}let _0x5c8600=document[_0x1c6c73(0x1d6)]('a');_0x5c8600[_0x1c6c73(0x215)]=_0x18f59b+'.'+_0x6c5ad1,_0x6c5ad1===_0x1c6c73(0x248)||_0x6c5ad1===_0x29312d(0x1dd)?_0x5c8600[_0x29312d(0x1a4)]=_0x43fefb[_0x1c6c73(0x1df)](_0x214e42,0.92):_0x5c8600[_0x1c6c73(0x1c8)]=_0x43fefb[_0x1c6c73(0x1df)](_0x214e42),_0x5c8600[_0x29312d(0x1c3)]();}else{if(_0x6c5ad1===_0x1c6c73(0x1bf)&&typeof window[_0x1c6c73(0x2da)]!==_0x1c6c73(0x225))exportWebpAnimation(_0x35050f,_0x1919c6[_0x1c6c73(0x1b8)]*cellSize,_0x1919c6[_0x1c6c73(0x27c)]*cellSize,_0x18f59b);else for(let _0x55e36c=0x0;_0x55e36c<_0x35050f[_0x1c6c73(0x1c4)];_0x55e36c++){let _0xed41e7=document[_0x1c6c73(0x1d6)](_0x1c6c73(0x19d));_0xed41e7[_0x1c6c73(0x1b8)]=_0x1919c6[_0x1c6c73(0x1b8)]*cellSize,_0xed41e7[_0x1c6c73(0x27c)]=_0x1919c6[_0x1c6c73(0x27c)]*cellSize;let _0x2b77d9=_0xed41e7[_0x29312d(0x162)]('2d'),_0x38e10f=_0x35050f[_0x55e36c];for(let _0x4cdbbd=0x0;_0x4cdbbd<_0x38e10f[_0x1c6c73(0x262)][_0x1c6c73(0x1c4)];_0x4cdbbd++){_0x2b77d9[_0x1c6c73(0x1ff)](_0x38e10f[_0x29312d(0x13d)][_0x4cdbbd],0x0,0x0);}let _0x48994c=document[_0x1c6c73(0x1d6)]('a');_0x48994c[_0x1c6c73(0x215)]=_0x18f59b+'-f'+(_0x55e36c+0x1)+'.'+_0x6c5ad1,_0x6c5ad1===_0x1c6c73(0x248)||_0x6c5ad1===_0x1c6c73(0x242)?_0x48994c[_0x29312d(0x1a4)]=_0xed41e7[_0x1c6c73(0x1df)](_0x214e42,0.92):_0x48994c[_0x1c6c73(0x1c8)]=_0xed41e7[_0x29312d(0x1b5)](_0x214e42),setTimeout(()=>_0x48994c[_0x1c6c73(0x2ed)](),_0x55e36c*0x64);}}}async function exportWebpAnimation(_0x23036c,_0x26f1e8,_0x173751,_0x96cf13=a0_0x38aafa(0x21f)){const _0x566241=a0_0x521960,_0x70158e=a0_0x5049d9,_0x3300be=a0_0x38aafa;if(!window[_0x3300be(0x2da)]||!window[_0x3300be(0x194)]){alert(_0x3300be(0x27b));return;}const _0x1b34d6=[],_0x123c62=new VideoEncoder({'output':_0x25302a=>_0x1b34d6[_0x3300be(0x278)](_0x25302a),'error':_0x583817=>console[_0x70158e(0x1e8)](_0x583817)});_0x123c62[_0x3300be(0x2a8)]({'codec':_0x3300be(0x2d2),'width':_0x26f1e8,'height':_0x173751,'framerate':0x5});for(let _0x3bb449=0x0;_0x3bb449<_0x23036c[_0x70158e(0xf5)];_0x3bb449++){let _0x5b0190=document[_0x3300be(0x1d6)](_0x3300be(0x19d));_0x5b0190[_0x3300be(0x1b8)]=_0x26f1e8,_0x5b0190[_0x3300be(0x27c)]=_0x173751;let _0x520053=_0x5b0190[_0x3300be(0x2c6)]('2d'),_0x14d7b0=_0x23036c[_0x3bb449];for(let _0x39c9fd=0x0;_0x39c9fd<_0x14d7b0[_0x3300be(0x262)][_0x70158e(0xf5)];_0x39c9fd++){_0x520053[_0x3300be(0x1ff)](_0x14d7b0[_0x3300be(0x262)][_0x39c9fd],0x0,0x0);}let _0x3e8774=await createImageBitmap(_0x5b0190);_0x123c62[_0x3300be(0x1e2)](_0x3e8774,{'keyFrame':!![],'duration':0xc8}),_0x3e8774[_0x3300be(0x2e3)]();}await _0x123c62[_0x3300be(0x209)](),_0x123c62[_0x3300be(0x2e3)]();const _0x3da900=new Blob(_0x1b34d6[_0x3300be(0x294)](_0x3d03f4=>_0x3d03f4[_0x3300be(0x2c8)]?_0x3d03f4:_0x3d03f4[_0x3300be(0x261)]),{'type':_0x566241(0x193)}),_0x1bb0ac=document[_0x3300be(0x1d6)]('a');_0x1bb0ac[_0x3300be(0x215)]=_0x96cf13+_0x3300be(0x257),_0x1bb0ac[_0x3300be(0x1c8)]=URL[_0x3300be(0x201)](_0x3da900),_0x1bb0ac[_0x3300be(0x2ed)]();}function exportGif(){const _0x571030=a0_0x38aafa;let _0x1ce804=getCurrentProject(),_0x31d16b=_0x1ce804[_0x571030(0x2b3)],_0x3c5430=_0x1ce804[_0x571030(0x1b8)]*cellSize,_0x268a65=_0x1ce804[_0x571030(0x27c)]*cellSize;const _0x35a2f8=_0x31d16b[_0x571030(0x294)](_0x2d54bc=>{const _0x25ecbe=a0_0xce2f,_0x322a90=_0x571030;let _0xd59e9e=document[_0x25ecbe(0x1f6)]('canvas');_0xd59e9e[_0x322a90(0x1b8)]=_0x3c5430,_0xd59e9e[_0x322a90(0x27c)]=_0x268a65;let _0x377776=_0xd59e9e[_0x25ecbe(0x162)]('2d');for(let _0xb6e359=0x0;_0xb6e359<_0x2d54bc[_0x322a90(0x262)][_0x25ecbe(0xf5)];_0xb6e359++){_0x377776[_0x322a90(0x1ff)](_0x2d54bc[_0x322a90(0x262)][_0xb6e359],0x0,0x0);}return _0xd59e9e[_0x322a90(0x1df)](_0x322a90(0x1fa));});Promise[_0x571030(0x25a)](_0x35a2f8[_0x571030(0x294)](_0x5c8030=>{return new Promise(_0x274dd8=>{const _0x4740b7=a0_0x1925,_0x46f42e=new Image();_0x46f42e[_0x4740b7(0x1b3)]=_0x5c8030,_0x46f42e[_0x4740b7(0x185)]=()=>_0x274dd8(_0x46f42e);});}))[_0x571030(0x17f)](_0xdc8425=>{const _0x597cfe=a0_0xce2f,_0x4a3832=_0x571030,_0x2c27a6=_0xdc8425[_0x4a3832(0x268)](_0x459500=>_0x459500[_0x4a3832(0x1b8)]>0x0&&_0x459500[_0x4a3832(0x27c)]>0x0);if(_0x2c27a6[_0x597cfe(0xf5)]===0x0){alert(_0x4a3832(0x1fb));return;}const _0x17fe5d=(_0x1ce804[_0x4a3832(0x2e6)]||_0x4a3832(0x21f))[_0x4a3832(0x27d)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x2c27a6,animationDelay,_0x17fe5d+_0x4a3832(0x2d1));});}function exportApng(){const _0x38e704=a0_0x35c9,_0x60b5ce=a0_0x5049d9,_0x100d75=a0_0x38aafa;let _0x10a8b7=getCurrentProject(),_0x15d105=_0x10a8b7[_0x100d75(0x2b3)],_0x5da1d8=_0x10a8b7[_0x100d75(0x1b8)]*cellSize,_0x500661=_0x10a8b7[_0x38e704(0x118)]*cellSize;const _0x7dda47=_0x15d105[_0x100d75(0x294)](_0x17e351=>{const _0x11b53e=a0_0xce2f,_0x33b003=_0x100d75;let _0x56ec74=document[_0x33b003(0x1d6)](_0x33b003(0x19d));_0x56ec74[_0x11b53e(0x190)]=_0x5da1d8,_0x56ec74[_0x33b003(0x27c)]=_0x500661;let _0x1a5c5b=_0x56ec74[_0x11b53e(0x162)]('2d');for(let _0x5e550d=0x0;_0x5e550d<_0x17e351[_0x33b003(0x262)][_0x33b003(0x1c4)];_0x5e550d++){_0x1a5c5b[_0x11b53e(0x230)](_0x17e351[_0x33b003(0x262)][_0x5e550d],0x0,0x0);}let _0x3b65d6=new Image();return _0x3b65d6[_0x33b003(0x1b3)]=_0x56ec74[_0x11b53e(0x1b5)](_0x33b003(0x1fa)),_0x3b65d6;}),_0x4696aa=(_0x10a8b7[_0x60b5ce(0x1c1)]||_0x100d75(0x21f))[_0x100d75(0x27d)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x7dda47,_0x5da1d8,_0x500661,animationDelay,_0x4696aa+_0x100d75(0x274));}const dbName=a0_0x38aafa(0x292),storeName=a0_0x38aafa(0x22e);function openDB(){return new Promise((_0x5eda5d,_0x4388e0)=>{const _0x42448f=a0_0x56c5,_0x475853=a0_0xce2f,_0x3a8b1d=a0_0x1925,_0x4292e9=indexedDB[_0x475853(0x144)](dbName,0x1);_0x4292e9[_0x3a8b1d(0x273)]=()=>{const _0x2955ac=a0_0x35c9,_0x837a6c=_0x475853;_0x4292e9[_0x837a6c(0x219)][_0x2955ac(0x173)](storeName);},_0x4292e9[_0x42448f(0xcc)]=()=>_0x5eda5d(_0x4292e9[_0x475853(0x219)]),_0x4292e9[_0x3a8b1d(0x1c5)]=()=>_0x4388e0(_0x4292e9[_0x3a8b1d(0x181)]);});}async function idbSet(_0x36bfc2,_0x588aa8){const _0x5e7ada=await openDB();return new Promise((_0x2e1fe9,_0x55a1dd)=>{const _0x373b67=a0_0xce2f,_0x22a1de=a0_0x1925,_0x1a6da2=_0x5e7ada[_0x22a1de(0x27f)](storeName,_0x22a1de(0x259));_0x1a6da2[_0x22a1de(0x226)](storeName)[_0x22a1de(0x297)](_0x588aa8,_0x36bfc2),_0x1a6da2[_0x22a1de(0x2a3)]=()=>_0x2e1fe9(),_0x1a6da2[_0x373b67(0x149)]=()=>_0x55a1dd(_0x1a6da2[_0x373b67(0x1e8)]);});}async function idbGet(_0x52e880){const _0x17c553=await openDB();return new Promise((_0x3345c1,_0x7046c8)=>{const _0xf60b6c=a0_0xce2f,_0xdd6787=a0_0x1925,_0x20ea21=_0x17c553[_0xdd6787(0x27f)](storeName,_0xdd6787(0x223)),_0x1acb1a=_0x20ea21[_0xdd6787(0x226)](storeName)[_0xdd6787(0x2b8)](_0x52e880);_0x1acb1a[_0xdd6787(0x260)]=()=>_0x3345c1(_0x1acb1a[_0xf60b6c(0x219)]),_0x1acb1a[_0xdd6787(0x1c5)]=()=>_0x7046c8(_0x1acb1a[_0xdd6787(0x181)]);});}async function idbDelete(_0x2c8bd1){const _0x39abc2=await openDB();return new Promise((_0x8485d5,_0x3d7b6c)=>{const _0x2c00b9=a0_0x56c5,_0x5c7615=a0_0xce2f,_0x435be2=a0_0x1925,_0x22076d=_0x39abc2[_0x5c7615(0x13f)](storeName,_0x5c7615(0x130));_0x22076d[_0x435be2(0x226)](storeName)[_0x2c00b9(0x109)](_0x2c8bd1),_0x22076d[_0x435be2(0x2a3)]=()=>_0x8485d5(),_0x22076d[_0x435be2(0x1c5)]=()=>_0x3d7b6c(_0x22076d[_0x5c7615(0x1e8)]);});}async function idbClear(){const _0x4e87db=await openDB();return new Promise((_0x17ae0c,_0x5a8800)=>{const _0x2d4146=a0_0x56c5,_0x4424fe=a0_0xce2f,_0x2e9e74=a0_0x1925,_0x210876=_0x4e87db[_0x2e9e74(0x27f)](storeName,_0x2e9e74(0x259));_0x210876[_0x2e9e74(0x226)](storeName)[_0x2e9e74(0x1e0)](),_0x210876[_0x4424fe(0x220)]=()=>_0x17ae0c(),_0x210876[_0x2e9e74(0x1c5)]=()=>_0x5a8800(_0x210876[_0x2d4146(0x1d1)]);});}function saveProjectFile(){const _0xb7bf1=a0_0x521960,_0x47246d=a0_0x5049d9,_0xa80d05=a0_0x38aafa,_0x2b472a={'projects':projects[_0xa80d05(0x294)](_0x18aace=>({'width':_0x18aace[_0xa80d05(0x1b8)],'height':_0x18aace[_0xa80d05(0x27c)],'name':_0x18aace[_0xa80d05(0x2e6)]||'','activeFrame':_0x18aace[_0xa80d05(0x2a5)],'frames':_0x18aace[_0xa80d05(0x2b3)][_0xa80d05(0x294)](_0x14aa58=>({'activeLayer':_0x14aa58[_0xa80d05(0x1b5)],'layers':_0x14aa58[_0x47246d(0x13d)][_0xa80d05(0x294)](_0x573a63=>_0x573a63[_0xa80d05(0x1df)]())}))})),'activeProject':activeProject},_0x3424b3=new Blob([JSON[_0xa80d05(0x1e5)](_0x2b472a)],{'type':_0xa80d05(0x299)}),_0xa2563c=document[_0xa80d05(0x1d6)]('a');_0xa2563c[_0xb7bf1(0xf0)]=_0x47246d(0x1d9),_0xa2563c[_0xa80d05(0x1c8)]=URL[_0xa80d05(0x201)](_0x3424b3),_0xa2563c[_0xa80d05(0x2ed)]();}function a0_0x1925(_0x3379d7,_0x1068a1){_0x3379d7=_0x3379d7-0x17d;const _0x58552c=a0_0x5ad1();let _0x3ec3ff=_0x58552c[_0x3379d7];return _0x3ec3ff;}function saveProjectFile(){const _0x117bad=a0_0x5049d9,_0x806ea8=a0_0x38aafa,_0x2ec8b6={'projects':projects[_0x806ea8(0x294)](_0x1efb11=>({'width':_0x1efb11[_0x117bad(0x190)],'height':_0x1efb11[_0x806ea8(0x27c)],'name':_0x1efb11[_0x806ea8(0x2e6)]||'','activeFrame':_0x1efb11[_0x806ea8(0x2a5)],'frames':_0x1efb11[_0x806ea8(0x2b3)][_0x806ea8(0x294)](_0x2e50a3=>({'activeLayer':_0x2e50a3[_0x806ea8(0x1b5)],'layers':_0x2e50a3[_0x806ea8(0x262)][_0x806ea8(0x294)](_0x5518ba=>_0x5518ba[_0x806ea8(0x1df)]())}))})),'activeProject':activeProject},_0x41bd77=new Blob([JSON[_0x806ea8(0x1e5)](_0x2ec8b6)],{'type':_0x806ea8(0x299)}),_0x52c7a4=document[_0x806ea8(0x1d6)]('a');_0x52c7a4[_0x806ea8(0x215)]=_0x806ea8(0x2bf),_0x52c7a4[_0x806ea8(0x1c8)]=URL[_0x806ea8(0x201)](_0x41bd77),_0x52c7a4[_0x806ea8(0x2ed)]();}async function saveProjectToIDB(){const _0xed3b99=a0_0x5049d9,_0x12cc18=a0_0x38aafa,_0x20343e={'projects':projects[_0xed3b99(0x18f)](_0x3faaea=>({'width':_0x3faaea[_0x12cc18(0x1b8)],'height':_0x3faaea[_0x12cc18(0x27c)],'name':_0x3faaea[_0x12cc18(0x2e6)]||'','activeFrame':_0x3faaea[_0x12cc18(0x2a5)],'frames':_0x3faaea[_0x12cc18(0x2b3)][_0x12cc18(0x294)](_0x56e8c1=>({'activeLayer':_0x56e8c1[_0x12cc18(0x1b5)],'layers':_0x56e8c1[_0x12cc18(0x262)][_0xed3b99(0x18f)](_0x5dbdec=>_0x5dbdec[_0x12cc18(0x1df)]())}))})),'activeProject':activeProject};try{await idbSet(_0xed3b99(0x11b),_0x20343e),console[_0xed3b99(0x1a0)](_0x12cc18(0x21c));}catch(_0x4d2ef3){console[_0x12cc18(0x181)](_0xed3b99(0x133),_0x4d2ef3);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x38aafa(0x21d)](a0_0x38aafa(0x22c),_0x402091=>{saveProjectToIDB();});function loadProjectFile(_0x295c58){const _0x7b6ff6=a0_0x5049d9,_0x2f73fa=a0_0x38aafa,_0x5f2c85=_0x295c58[_0x7b6ff6(0x1d3)][_0x2f73fa(0x23c)][0x0];if(!_0x5f2c85)return;if(_0x5f2c85[_0x2f73fa(0x17d)]&&_0x5f2c85[_0x2f73fa(0x17d)][_0x2f73fa(0x1a3)](_0x7b6ff6(0xfd))){loadStandaloneFromFile(_0x5f2c85)[_0x7b6ff6(0xf1)](_0x1c77e9=>{const _0x155f45=_0x2f73fa;alert(_0x155f45(0x283)+(_0x1c77e9[_0x155f45(0x2e6)]||'画像'));})[_0x2f73fa(0x1c7)](_0x42b06b=>{const _0x5654c2=_0x2f73fa;console[_0x5654c2(0x2c1)](_0x42b06b),alert(_0x5654c2(0x2d4));});return;}const _0x3f078e=new FileReader();_0x3f078e[_0x2f73fa(0x185)]=function(_0x370968){const _0x17355b=_0x2f73fa;try{const _0x469c87=JSON[_0x17355b(0x288)](_0x370968[_0x17355b(0x2e5)][_0x17355b(0x192)]);projects=_0x469c87[_0x17355b(0x24f)][_0x17355b(0x294)]((_0x178ab3,_0x74858c)=>{const _0x5cfdd6=a0_0xce2f,_0x3b6746=_0x17355b;let _0x55e409=createProject(_0x178ab3[_0x5cfdd6(0x190)],_0x178ab3[_0x3b6746(0x27c)],_0x178ab3[_0x3b6746(0x2e6)]||'画像'+(_0x74858c+0x1));return _0x55e409[_0x3b6746(0x2b3)]=_0x178ab3[_0x5cfdd6(0x17f)][_0x3b6746(0x294)](_0xfa0384=>{const _0x5e8c4e=a0_0x56c5,_0x34b5f8=_0x5cfdd6,_0x2827c1=_0x3b6746;let _0x49d82f={'layers':[],'activeLayer':_0xfa0384[_0x2827c1(0x1b5)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x29068f=0x0;_0x29068f<_0xfa0384[_0x34b5f8(0x13d)][_0x34b5f8(0xf5)];_0x29068f++){let _0x59bd0f=new Image();_0x59bd0f[_0x2827c1(0x1b3)]=_0xfa0384[_0x2827c1(0x262)][_0x29068f];let _0x7e71e7=document[_0x2827c1(0x1d6)](_0x2827c1(0x19d));_0x7e71e7[_0x2827c1(0x1b8)]=_0x178ab3[_0x2827c1(0x1b8)]*cellSize,_0x7e71e7[_0x5e8c4e(0x1ff)]=_0x178ab3[_0x2827c1(0x27c)]*cellSize,_0x59bd0f[_0x2827c1(0x185)]=()=>{const _0x242984=_0x5e8c4e,_0x2b403f=_0x2827c1;let _0xd36da3=_0x7e71e7[_0x2b403f(0x2c6)]('2d');_0xd36da3[_0x242984(0x151)](0x0,0x0,_0x7e71e7[_0x2b403f(0x1b8)],_0x7e71e7[_0x2b403f(0x27c)]),_0xd36da3[_0x2b403f(0x1ff)](_0x59bd0f,0x0,0x0);},_0x59bd0f[_0x5e8c4e(0x14d)](),_0x49d82f[_0x2827c1(0x262)][_0x2827c1(0x278)](_0x7e71e7),_0x49d82f[_0x34b5f8(0x195)][_0x2827c1(0x278)]([]),_0x49d82f[_0x2827c1(0x2d0)][_0x2827c1(0x278)]([]);}return _0x49d82f;}),_0x55e409[_0x3b6746(0x2a5)]=_0x178ab3[_0x5cfdd6(0x12c)],_0x55e409[_0x5cfdd6(0x1c1)]=_0x178ab3[_0x3b6746(0x2e6)]||'画像'+(_0x74858c+0x1),_0x55e409;}),activeProject=_0x469c87[_0x17355b(0x23d)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x2b8a2c){alert(_0x17355b(0x211));}},_0x3f078e[_0x7b6ff6(0x197)](_0x5f2c85);}async function loadProjectFromIDB(){const _0x46d554=a0_0x35c9,_0x1ebdfe=a0_0x521960,_0x2f5918=a0_0x5049d9,_0x38a24e=a0_0x38aafa;try{const _0x14b0f6=await idbGet(_0x38a24e(0x2e9));if(!_0x14b0f6)return;projects=_0x14b0f6[_0x1ebdfe(0x1b6)][_0x2f5918(0x18f)]((_0x125c54,_0x4c650e)=>{const _0xc357b7=_0x1ebdfe,_0x317b9f=_0x38a24e;let _0x5f1235=createProject(_0x125c54[_0x317b9f(0x1b8)],_0x125c54[_0x317b9f(0x27c)],_0x125c54[_0xc357b7(0x179)]||'画像'+(_0x4c650e+0x1));return _0x5f1235[_0x317b9f(0x2b3)]=_0x125c54[_0x317b9f(0x2b3)][_0x317b9f(0x294)](_0x1ff71b=>{const _0x1d83d0=a0_0x35c9,_0x25213f=a0_0xce2f,_0x50b262=_0x317b9f;let _0x41f90a={'layers':[],'activeLayer':_0x1ff71b[_0x25213f(0x215)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x22f01b=0x0;_0x22f01b<_0x1ff71b[_0x50b262(0x262)][_0x50b262(0x1c4)];_0x22f01b++){let _0x2936c5=new Image();_0x2936c5[_0x50b262(0x1b3)]=_0x1ff71b[_0x50b262(0x262)][_0x22f01b];let _0x1ef420=document[_0x25213f(0x1f6)](_0x50b262(0x19d));_0x1ef420[_0x25213f(0x190)]=_0x125c54[_0x1d83d0(0x13b)]*cellSize,_0x1ef420[_0x50b262(0x27c)]=_0x125c54[_0x50b262(0x27c)]*cellSize,_0x2936c5[_0x50b262(0x185)]=()=>{const _0xbff749=_0x25213f,_0x1d9a99=_0x50b262;let _0x2989bb=_0x1ef420[_0xbff749(0x162)]('2d');_0x2989bb[_0x1d9a99(0x22d)](0x0,0x0,_0x1ef420[_0x1d9a99(0x1b8)],_0x1ef420[_0xbff749(0x13b)]),_0x2989bb[_0x1d9a99(0x1ff)](_0x2936c5,0x0,0x0);},_0x41f90a[_0x50b262(0x262)][_0x50b262(0x278)](_0x1ef420),_0x41f90a[_0x50b262(0x29c)][_0x50b262(0x278)]([]),_0x41f90a[_0x50b262(0x2d0)][_0x50b262(0x278)]([]);}return _0x41f90a;}),_0x5f1235[_0x317b9f(0x2a5)]=_0x125c54[_0x317b9f(0x2a5)],_0x5f1235[_0x317b9f(0x2e6)]=_0x125c54['name']||'画像'+(_0x4c650e+0x1),_0x5f1235;}),activeProject=_0x14b0f6[_0x38a24e(0x23d)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool(_0x38a24e(0x182)),console[_0x46d554(0x21a)](_0x38a24e(0x282));}catch(_0x13fa32){alert(_0x38a24e(0x2cd)),console[_0x2f5918(0x1e8)](_0x13fa32);}}function wait(_0x353934){return new Promise(_0x33cbe3=>setTimeout(_0x33cbe3,_0x353934));}function initCanvas(){const _0x3d9ee7=a0_0x521960,_0x5c3292=a0_0x5049d9,_0x124507=a0_0x38aafa,_0x52a985=parseInt(0x10),_0x32c9ad=parseInt(0x10);let _0x3f30f4=getCurrentProject();_0x3f30f4[_0x124507(0x1b8)]=_0x52a985,_0x3f30f4[_0x124507(0x27c)]=_0x32c9ad,canvas[_0x124507(0x1b8)]=_0x52a985*cellSize,canvas[_0x124507(0x27c)]=_0x32c9ad*cellSize,_0x3f30f4[_0x124507(0x262)]=[],_0x3f30f4[_0x124507(0x29c)]=[],_0x3f30f4[_0x124507(0x2d0)]=[];let _0x35371b=document[_0x124507(0x1d6)](_0x124507(0x19d));_0x35371b[_0x124507(0x1b8)]=_0x52a985*cellSize,_0x35371b[_0x124507(0x27c)]=_0x32c9ad*cellSize,_0x3f30f4[_0x124507(0x262)][_0x5c3292(0x19e)](_0x35371b),_0x3f30f4[_0x124507(0x29c)][_0x124507(0x278)]([]),_0x3f30f4[_0x124507(0x2d0)][_0x5c3292(0x19e)]([]),_0x3f30f4[_0x124507(0x1b5)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x124507(0x1f5)]=null,canvas[_0x5c3292(0x1e1)]=null,canvas[_0x124507(0x238)]=null,canvas[_0x124507(0x1b7)]=null,canvas[_0x124507(0x21a)]=null,canvas[_0x124507(0x267)]=null,canvas[_0x124507(0x212)]=null,canvas[_0x124507(0x2ac)]=null,canvas[_0x124507(0x2a6)](_0x5c3292(0x1d8),handleTouchStart),canvas[_0x124507(0x2a6)](_0x124507(0x28f),handleTouchMove),canvas[_0x124507(0x2a6)](_0x124507(0x1e1),handleTouchEnd),canvas[_0x124507(0x2a6)](_0x124507(0x1b6),handleTouchEnd),canvas[_0x124507(0x1f5)]=handleMouseDown,canvas[_0x124507(0x239)]=handleMouseMove,canvas[_0x124507(0x238)]=handleMouseUp,canvas[_0x124507(0x1b7)]=handleMouseUp,canvas[_0x124507(0x21a)]=handleTouchStart,canvas[_0x124507(0x267)]=handleTouchMove,canvas[_0x3d9ee7(0x107)]=handleTouchEnd,canvas[_0x124507(0x2ac)]=handleTouchEnd,canvas[_0x124507(0x21d)](_0x124507(0x1bb),handleTouchStart,{'passive':![]}),canvas[_0x124507(0x21d)](_0x5c3292(0x205),handleTouchMove,{'passive':![]}),canvas[_0x124507(0x21d)](_0x124507(0x1e1),handleTouchEnd,{'passive':![]}),canvas[_0x3d9ee7(0x15e)](_0x124507(0x1b6),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x3d9463=a0_0x35c9,_0x3489ec=a0_0x521960,_0xd7590c=a0_0x5049d9,_0x4337d7=a0_0x38aafa,_0x49f8d8=document[_0x4337d7(0x275)](_0x4337d7(0x230));if(!_0x49f8d8)return;_0x49f8d8[_0x4337d7(0x25f)]='',PALETTE_COLORS[_0x4337d7(0x1bd)]((_0x372f33,_0x39b040)=>{const _0x2f733e=a0_0x56c5,_0x38a552=a0_0xce2f,_0x44e7e8=_0x4337d7,_0x434cfa=document[_0x44e7e8(0x1d6)](_0x44e7e8(0x2a4));_0x434cfa[_0x38a552(0x15c)]=_0x38a552(0x1fc),_0x372f33===_0x38a552(0x1a5)||_0x372f33===_0x44e7e8(0x25c)?(_0x434cfa[_0x44e7e8(0x1f8)][_0x44e7e8(0x2dc)]=_0x2f733e(0x137),_0x434cfa[_0x44e7e8(0x198)]='透明',_0x434cfa[_0x44e7e8(0x25f)]=_0x44e7e8(0x224)):(_0x434cfa[_0x44e7e8(0x1f8)][_0x44e7e8(0x2dc)]=_0x372f33,_0x434cfa[_0x38a552(0x124)]=_0x372f33),_0x434cfa[_0x44e7e8(0x234)]=()=>{const _0x511a6b=_0x44e7e8;currentColor=_0x372f33,_0x372f33===_0x511a6b(0x1f3)||_0x372f33===_0x511a6b(0x25c)?document[_0x511a6b(0x275)](_0x511a6b(0x1a0))[_0x511a6b(0x24e)]=_0x511a6b(0x1ba):document[_0x511a6b(0x275)](_0x511a6b(0x1a0))[_0x511a6b(0x24e)]=_0x372f33,document[_0x511a6b(0x29b)](_0x511a6b(0x1e6))[_0x511a6b(0x1bd)](_0x36840d=>_0x36840d[_0x511a6b(0x22b)][_0x511a6b(0x187)](_0x511a6b(0x2dd))),_0x434cfa[_0x511a6b(0x22b)][_0x511a6b(0x1de)](_0x511a6b(0x2dd));};if(_0x39b040!==0x0){const _0x28bcd4=document[_0x44e7e8(0x1d6)](_0x44e7e8(0x28e));_0x28bcd4[_0x44e7e8(0x221)]='×',_0x28bcd4[_0x44e7e8(0x252)]=_0x44e7e8(0x2c7),_0x28bcd4[_0x44e7e8(0x198)]=_0x44e7e8(0x2e7),_0x28bcd4[_0x44e7e8(0x234)]=_0x20b310=>{const _0x621e33=_0x44e7e8;_0x20b310[_0x621e33(0x214)](),PALETTE_COLORS[_0x621e33(0x1c4)]>0x2&&(PALETTE_COLORS[_0x621e33(0x2b7)](_0x39b040,0x1),createPalette());},_0x434cfa[_0x44e7e8(0x237)](_0x28bcd4);}_0x49f8d8[_0x44e7e8(0x237)](_0x434cfa);});const _0x5f315=document[_0x4337d7(0x1d6)](_0x4337d7(0x2a4));_0x5f315[_0x3489ec(0xc9)]=_0x4337d7(0x20b),_0x5f315[_0x4337d7(0x198)]=_0x4337d7(0x2cc),_0x5f315[_0x4337d7(0x25f)]='+',_0x5f315[_0x4337d7(0x234)]=_0x2d07f7=>{const _0x5e739c=_0x3489ec,_0x3eb170=a0_0xce2f,_0x5d5a7c=_0x4337d7;_0x2d07f7[_0x3eb170(0x15a)]();const _0x5769df=document[_0x5d5a7c(0x1d6)](_0x5d5a7c(0x295));_0x5769df[_0x5d5a7c(0x17d)]=_0x5d5a7c(0x1ca),_0x5769df['style'][_0x5d5a7c(0x2f0)]=_0x5d5a7c(0x1b1);let _0x414be5=![];_0x5769df[_0x5d5a7c(0x28a)]=_0x1623ba=>{const _0x4030cd=a0_0x35c9,_0x45b0f2=a0_0x56c5,_0x4d71b3=_0x3eb170,_0x159a7c=_0x5d5a7c;if(!_0x414be5){PALETTE_COLORS[_0x4030cd(0x1a9)](_0x1623ba[_0x159a7c(0x2e5)][_0x45b0f2(0x149)]);if(PALETTE_COLORS[_0x4d71b3(0xf5)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x159a7c(0x1f6)](0x0,0x18);savePaletteToDB(),createPalette(),_0x414be5=!![],_0x5769df[_0x159a7c(0x187)]();}},_0x5769df[_0x5d5a7c(0x21d)](_0x3eb170(0x1c0),()=>{const _0x4b9184=_0x5d5a7c;if(!_0x414be5)_0x5769df[_0x4b9184(0x187)]();}),_0x5769df[_0x5d5a7c(0x21d)](_0x5e739c(0xab),_0xe3ae83=>_0xe3ae83[_0x3eb170(0x15a)]()),document[_0x5d5a7c(0x1e8)][_0x5d5a7c(0x237)](_0x5769df),_0x5769df[_0x5d5a7c(0x2be)](),_0x5769df[_0x5d5a7c(0x2ed)]();},_0x49f8d8[_0x4337d7(0x1d3)](_0x5f315,_0x49f8d8[_0xd7590c(0x216)]);let _0x14f860=document[_0xd7590c(0x192)](_0xd7590c(0x1e2));!_0x14f860&&(_0x14f860=document[_0xd7590c(0x1f6)](_0x4337d7(0x2c9)),_0x14f860['id']=_0x4337d7(0x25e),_0x14f860[_0x4337d7(0x252)]=_0x3d9463(0x1ea),_0x49f8d8[_0xd7590c(0xfb)][_0x4337d7(0x237)](_0x14f860)),_0x14f860[_0xd7590c(0x1ea)]=_0x4337d7(0x253)+(currentTool===_0x4337d7(0x182)?_0x4337d7(0x1e4):'')+_0x4337d7(0x2ad)+(currentTool===_0x4337d7(0x2e0)?_0x4337d7(0x1e4):'')+_0xd7590c(0x168)+(currentTool===_0x4337d7(0x1a8)?_0x4337d7(0x1e4):'')+_0x4337d7(0x1d9)+(penSize==0x1?_0xd7590c(0x213):'')+_0x4337d7(0x1dd)+(penSize==0x2?_0x4337d7(0x298):'')+_0x4337d7(0x18e)+(penSize==0x3?_0x4337d7(0x298):'')+_0xd7590c(0x1a2)+(penSize==0x4?_0x4337d7(0x298):'')+_0xd7590c(0x1ac)+(penMode===_0xd7590c(0x150)?_0x4337d7(0x298):'')+_0x3489ec(0x1e7)+(penMode===_0x4337d7(0x2ea)?_0xd7590c(0x213):'')+_0xd7590c(0x1ab)+Math[_0x4337d7(0x26f)](currentAlpha*0x64)+_0x4337d7(0x233)+Math[_0x4337d7(0x26f)](currentAlpha*0x64)+_0x4337d7(0x1eb),_0x14f860[_0xd7590c(0x126)](_0x4337d7(0x246))[_0x4337d7(0x222)]=_0x5aac60=>setPenSize(_0x5aac60[_0xd7590c(0x1d3)][_0x4337d7(0x24e)]),_0x14f860[_0x4337d7(0x2c0)](_0x4337d7(0x2b2))[_0x4337d7(0x222)]=_0x1a210d=>setPenMode(_0x1a210d[_0x4337d7(0x2e5)][_0x4337d7(0x24e)]),_0x14f860[_0x4337d7(0x29b)](_0x3489ec(0x16b))[_0x4337d7(0x1bd)](_0xb586a1=>{const _0x41effd=_0x3489ec,_0x3a46d8=_0xd7590c,_0x5cf57c=_0x4337d7;_0xb586a1[_0x5cf57c(0x234)]=()=>setTool(_0xb586a1[_0x41effd(0xc1)][_0x3a46d8(0xe7)]);}),_0x14f860[_0x4337d7(0x2c0)](_0x4337d7(0x241))[_0x4337d7(0x28a)]=_0x3cec9c=>{const _0x3d8235=_0xd7590c,_0x399fd2=_0x4337d7;setAlpha(_0x3cec9c[_0x399fd2(0x2e5)][_0x3d8235(0x12e)]),_0x14f860[_0x399fd2(0x2c0)](_0x399fd2(0x227))[_0x399fd2(0x221)]=_0x3cec9c[_0x399fd2(0x2e5)][_0x399fd2(0x24e)]+'%';let _0x3a0c13=document[_0x3d8235(0x192)](_0x399fd2(0x1d8)),_0x27ab1d=document[_0x399fd2(0x275)](_0x399fd2(0x213));if(_0x3a0c13)_0x3a0c13[_0x3d8235(0x12e)]=_0x3cec9c[_0x399fd2(0x2e5)][_0x399fd2(0x24e)];if(_0x27ab1d)_0x27ab1d[_0x399fd2(0x221)]=_0x3cec9c[_0x3d8235(0x1d3)][_0x399fd2(0x24e)]+'%';};}function setAlpha(_0x3e35f){const _0xeb7933=a0_0x5049d9,_0x4552a1=a0_0x38aafa;let _0x4dc500=Math[_0x4552a1(0x2c3)](0x0,Math[_0x4552a1(0x1b2)](0x64,parseInt(_0x3e35f,0xa)||0x0));currentAlpha=_0x4dc500/0x64;let _0x2050bb=document[_0x4552a1(0x275)](_0x4552a1(0x1d8)),_0x2616e5=document[_0x4552a1(0x275)](_0xeb7933(0x1ef));if(_0x2050bb)_0x2050bb[_0xeb7933(0x12e)]=_0x4dc500;if(_0x2616e5)_0x2616e5[_0x4552a1(0x221)]=_0x4dc500+'%';let _0x2750aa=document[_0x4552a1(0x275)](_0x4552a1(0x247)),_0x4c9a71=document[_0x4552a1(0x275)](_0x4552a1(0x245));if(_0x2750aa)_0x2750aa[_0x4552a1(0x24e)]=_0x4dc500;if(_0x4c9a71)_0x4c9a71[_0x4552a1(0x221)]=_0x4dc500+'%';}async function savePaletteToDB(){const _0x15a4e6=a0_0x5049d9,_0x4d55ae=a0_0x38aafa;try{await idbSet(_0x4d55ae(0x2e1),PALETTE_COLORS);}catch(_0x2a4730){console[_0x4d55ae(0x181)](_0x15a4e6(0x1a8),_0x2a4730);}}async function loadPaletteFromDB(){const _0x2cb54a=a0_0x38aafa;try{const _0x4d5b54=await idbGet(_0x2cb54a(0x2e1));Array[_0x2cb54a(0x19c)](_0x4d5b54)&&_0x4d5b54[_0x2cb54a(0x1c4)]&&(PALETTE_COLORS=_0x4d5b54);}catch(_0x3383aa){console[_0x2cb54a(0x181)](_0x2cb54a(0x195),_0x3383aa);}}document[a0_0x5049d9(0x1a3)](a0_0x5049d9(0x113),()=>{const _0x5a2d9c=a0_0x5049d9,_0x30520e=a0_0x38aafa,_0x10758a=document[_0x5a2d9c(0x192)](_0x30520e(0x1a0));_0x10758a&&(_0x10758a[_0x30520e(0x28a)]=_0x4323a9=>{const _0x27f978=_0x30520e;currentColor=_0x4323a9[_0x27f978(0x2e5)][_0x27f978(0x24e)],document[_0x27f978(0x29b)](_0x27f978(0x1e6))[_0x27f978(0x1bd)](_0x2b079b=>_0x2b079b[_0x27f978(0x22b)][_0x27f978(0x187)](_0x27f978(0x2dd)));});const _0x367fde=document[_0x30520e(0x275)](_0x30520e(0x1d8)),_0x5066dd=document[_0x30520e(0x275)](_0x30520e(0x213));_0x367fde&&_0x5066dd&&(_0x367fde[_0x5a2d9c(0x1e5)]=_0x5b42f3=>{const _0x3945cd=a0_0x56c5,_0x59a73f=_0x5a2d9c,_0x2169f9=_0x30520e;setAlpha(_0x5b42f3[_0x2169f9(0x2e5)][_0x2169f9(0x24e)]),_0x5066dd[_0x2169f9(0x221)]=_0x5b42f3[_0x2169f9(0x2e5)][_0x59a73f(0x12e)]+'%';let _0x2a58df=document[_0x59a73f(0x192)](_0x2169f9(0x247)),_0x18ed97=document[_0x59a73f(0x192)](_0x2169f9(0x245));if(_0x2a58df)_0x2a58df[_0x3945cd(0x149)]=_0x5b42f3[_0x2169f9(0x2e5)][_0x2169f9(0x24e)];if(_0x18ed97)_0x18ed97[_0x2169f9(0x221)]=_0x5b42f3[_0x2169f9(0x2e5)][_0x59a73f(0x12e)]+'%';});});async function convertToGIF(_0x358c27,_0x1cba3f=0xc8,_0x305109=a0_0x38aafa(0x1d1)){const _0x5ea554=a0_0x38aafa,_0x50c85f=new window[(_0x5ea554(0x190))]({'workers':0x2,'quality':0xa,'workerScript':'lib/gif.worker.js'});_0x358c27[_0x5ea554(0x1bd)](_0x3b2ab1=>_0x50c85f[_0x5ea554(0x2a2)](_0x3b2ab1,{'delay':_0x1cba3f})),_0x50c85f['on'](_0x5ea554(0x235),_0x4e25db=>{const _0x379133=a0_0x56c5,_0x263d72=a0_0xce2f,_0x3db177=_0x5ea554,_0x3661e8=URL[_0x263d72(0x159)](_0x4e25db),_0x1c5518=document[_0x3db177(0x1d6)]('a');_0x1c5518[_0x263d72(0x1a4)]=_0x3661e8,_0x1c5518[_0x379133(0xf0)]=_0x305109,document[_0x3db177(0x1e8)][_0x263d72(0x1c2)](_0x1c5518),_0x1c5518[_0x3db177(0x2ed)](),setTimeout(()=>{const _0x218dde=_0x3db177;document[_0x218dde(0x1e8)][_0x218dde(0x1dc)](_0x1c5518),URL[_0x218dde(0x255)](_0x3661e8);},0x3e8);}),_0x50c85f[_0x5ea554(0x1c1)]();}function makeAPNGBlob(_0x1ed3f3,_0x33e186,_0x5c6746,_0x329fbc=0xc8){const _0x3a50e5=a0_0x5049d9,_0x2e9d15=a0_0x38aafa,_0x4c2fa8=[],_0x22c28d=[],_0x8a557=document[_0x2e9d15(0x1d6)](_0x2e9d15(0x19d));_0x8a557[_0x3a50e5(0x190)]=_0x33e186,_0x8a557[_0x3a50e5(0x13b)]=_0x5c6746;const _0x683973=_0x8a557[_0x2e9d15(0x2c6)]('2d');_0x1ed3f3[_0x2e9d15(0x1bd)](_0x24e799=>{const _0x1687ec=_0x3a50e5,_0x11b42c=_0x2e9d15;_0x683973[_0x11b42c(0x22d)](0x0,0x0,_0x33e186,_0x5c6746),_0x683973[_0x1687ec(0x230)](_0x24e799,0x0,0x0,_0x33e186,_0x5c6746);const _0x35bea3=_0x683973[_0x11b42c(0x287)](0x0,0x0,_0x33e186,_0x5c6746)[_0x11b42c(0x261)][_0x1687ec(0x16d)];_0x4c2fa8[_0x1687ec(0x19e)](_0x35bea3),_0x22c28d[_0x1687ec(0x19e)](_0x329fbc);});const _0x1d8045=window[_0x2e9d15(0x21e)][_0x2e9d15(0x1e2)](_0x4c2fa8,_0x33e186,_0x5c6746,0x0,_0x22c28d);return new Blob([_0x1d8045],{'type':_0x2e9d15(0x18f)});}function convertToAPNG(_0x44ac5f,_0x1f81f3,_0x3928dd,_0x15c4d7=0xc8,_0x19e071=a0_0x38aafa(0x2ef)){const _0x1a64a6=a0_0x35c9,_0x1da0d0=a0_0x5049d9,_0x49d0ee=a0_0x38aafa,_0x3403b9=makeAPNGBlob(_0x44ac5f,_0x1f81f3,_0x3928dd,_0x15c4d7),_0x148d7f=URL[_0x1da0d0(0x159)](_0x3403b9),_0x2d45e5=document[_0x1a64a6(0x227)]('a');_0x2d45e5[_0x49d0ee(0x1c8)]=_0x148d7f,_0x2d45e5[_0x49d0ee(0x215)]=_0x19e071,document[_0x49d0ee(0x1e8)][_0x49d0ee(0x237)](_0x2d45e5),_0x2d45e5[_0x1da0d0(0x1c3)](),setTimeout(()=>{const _0x11af5c=_0x49d0ee;document[_0x11af5c(0x1e8)][_0x11af5c(0x1dc)](_0x2d45e5),URL[_0x11af5c(0x255)](_0x148d7f);},0x3e8);}async function loadImages(_0x504bef){const _0x481347=a0_0x521960,_0x3949a7=a0_0x38aafa,_0x44d657=await Promise[_0x481347(0x184)](_0x504bef[_0x3949a7(0x294)](_0x27fe53=>{return new Promise(_0x2987cc=>{const _0x43084c=a0_0x1925,_0x332cf2=new Image();_0x332cf2[_0x43084c(0x290)]=_0x43084c(0x26a),_0x332cf2[_0x43084c(0x1b3)]=_0x27fe53,_0x332cf2[_0x43084c(0x185)]=()=>_0x2987cc(_0x332cf2);});}));return _0x44d657;}function exportSpriteSheetDialog(){const _0x344d28=a0_0x5049d9,_0xbf9927=a0_0x38aafa;let _0x5f5a89=prompt(_0x344d28(0x1a1),'1');if(_0x5f5a89===null)return;let _0x4b2439=Math[_0xbf9927(0x2c3)](0x1,parseInt(_0x5f5a89,0xa)||0x1),_0x33c8c2=prompt(_0xbf9927(0x264),'0');if(_0x33c8c2===null)return;let _0x229a9f=Math[_0xbf9927(0x2c3)](0x0,parseInt(_0x33c8c2,0xa)||0x0);exportSpriteSheet(_0x4b2439,_0x229a9f);}function exportSpriteSheet(_0x26aa04=0x1,_0x53fc1f=0x0){const _0x372487=a0_0x35c9,_0x1d8ccc=a0_0x521960,_0x5aeb45=a0_0x5049d9,_0x5bf2a6=a0_0x38aafa,_0x18b5fc=getCurrentProject();if(!_0x18b5fc){alert(_0x5bf2a6(0x272));return;}const _0x2d05d5=_0x18b5fc[_0x372487(0x11f)];if(!_0x2d05d5||_0x2d05d5[_0x5bf2a6(0x1c4)]===0x0){alert(_0x5bf2a6(0x2cf));return;}const _0x534752=_0x18b5fc[_0x5bf2a6(0x1b8)]*cellSize,_0x4906b5=_0x18b5fc[_0x5bf2a6(0x27c)]*cellSize,_0x257e8f=_0x534752*_0x2d05d5[_0x5bf2a6(0x1c4)]*_0x26aa04+Math[_0x5bf2a6(0x2c3)](0x0,_0x2d05d5[_0x5bf2a6(0x1c4)]-0x1)*_0x53fc1f,_0x53e93c=_0x4906b5*_0x26aa04,_0x33678b=document[_0x1d8ccc(0xdd)](_0x5bf2a6(0x19d));_0x33678b[_0x5bf2a6(0x1b8)]=_0x257e8f,_0x33678b[_0x5aeb45(0x13b)]=_0x53e93c;const _0x5a4fdc=_0x33678b[_0x5bf2a6(0x2c6)]('2d');_0x5a4fdc[_0x5bf2a6(0x22d)](0x0,0x0,_0x33678b[_0x5bf2a6(0x1b8)],_0x33678b[_0x5bf2a6(0x27c)]);let _0x276f75=0x0;for(let _0x3fda16=0x0;_0x3fda16<_0x2d05d5[_0x5bf2a6(0x1c4)];_0x3fda16++){let _0x2c2de6=document[_0x5bf2a6(0x1d6)](_0x1d8ccc(0x112));_0x2c2de6[_0x5aeb45(0x190)]=_0x534752,_0x2c2de6[_0x5bf2a6(0x27c)]=_0x4906b5;let _0x29a3fd=_0x2c2de6[_0x5bf2a6(0x2c6)]('2d');for(let _0x10861a=0x0;_0x10861a<_0x2d05d5[_0x3fda16][_0x5aeb45(0x13d)][_0x5aeb45(0xf5)];_0x10861a++){_0x29a3fd[_0x5bf2a6(0x1ff)](_0x2d05d5[_0x3fda16][_0x5bf2a6(0x262)][_0x10861a],0x0,0x0);}_0x26aa04===0x1&&_0x53fc1f===0x0?(_0x5a4fdc[_0x5aeb45(0x230)](_0x2c2de6,_0x276f75,0x0),_0x276f75+=_0x534752):(_0x5a4fdc[_0x5bf2a6(0x1ff)](_0x2c2de6,0x0,0x0,_0x534752,_0x4906b5,_0x276f75,0x0,_0x534752*_0x26aa04,_0x4906b5*_0x26aa04),_0x276f75+=_0x534752*_0x26aa04),_0x3fda16<_0x2d05d5[_0x5aeb45(0xf5)]-0x1&&_0x53fc1f>0x0&&(_0x276f75+=_0x53fc1f);}const _0x2723a4=(_0x18b5fc[_0x5bf2a6(0x2e6)]||_0x5bf2a6(0x2ab))[_0x5aeb45(0x127)](/[\\/:*?"<>|]/g,'_'),_0x5baf4d=document[_0x5bf2a6(0x1d6)]('a');_0x5baf4d[_0x1d8ccc(0x164)]=_0x33678b[_0x5aeb45(0x1b5)](_0x5aeb45(0xe0)),_0x5baf4d[_0x5bf2a6(0x215)]=_0x2723a4+_0x5bf2a6(0x217),document[_0x5bf2a6(0x1e8)][_0x5bf2a6(0x237)](_0x5baf4d),_0x5baf4d[_0x5bf2a6(0x2ed)](),setTimeout(()=>{const _0x4ce676=_0x5aeb45;document[_0x4ce676(0x1c5)][_0x4ce676(0x136)](_0x5baf4d);},0x3e8);}const NEZUMI_METADATA_SIG=a0_0x38aafa(0x258);function appendMetadataToBlob(_0x117373,_0x1e9892){const _0x1688a0=a0_0x38aafa,_0xbfe2fb=new TextEncoder(),_0x3a6f67=_0xbfe2fb[_0x1688a0(0x1e2)](NEZUMI_METADATA_SIG),_0x1c5887=_0xbfe2fb[_0x1688a0(0x1e2)](JSON[_0x1688a0(0x1e5)](_0x1e9892));return new Blob([_0x117373,_0x3a6f67,_0x1c5887],{'type':_0x117373[_0x1688a0(0x17d)]||_0x1688a0(0x2cb)});}function indexOfSubarray(_0x10d11a,_0x34791a){const _0x396e06=a0_0x5049d9,_0xd3dd56=a0_0x38aafa;for(let _0x457e70=0x0;_0x457e70<=_0x10d11a[_0xd3dd56(0x1c4)]-_0x34791a[_0x396e06(0xf5)];_0x457e70++){let _0x557925=!![];for(let _0x3c08dc=0x0;_0x3c08dc<_0x34791a[_0xd3dd56(0x1c4)];_0x3c08dc++){if(_0x10d11a[_0x457e70+_0x3c08dc]!==_0x34791a[_0x3c08dc]){_0x557925=![];break;}}if(_0x557925)return _0x457e70;}return-0x1;}function extractMetadataFromArrayBuffer(_0x540708){const _0x43b611=a0_0x5049d9,_0x2c927d=a0_0x38aafa,_0x381c13=new TextEncoder()[_0x2c927d(0x1e2)](NEZUMI_METADATA_SIG),_0x2bbf89=new Uint8Array(_0x540708),_0x57d6ff=indexOfSubarray(_0x2bbf89,_0x381c13);if(_0x57d6ff===-0x1)return null;const _0x5db266=_0x2bbf89[_0x2c927d(0x236)](_0x57d6ff+_0x381c13[_0x43b611(0xf5)]);try{const _0x4e0c85=new TextDecoder()[_0x2c927d(0x27e)](_0x5db266);return JSON[_0x2c927d(0x288)](_0x4e0c85);}catch(_0xc8901b){return null;}}async function exportStandalone(){const _0x5c0975=a0_0x35c9,_0x541f7e=a0_0x521960,_0x498926=a0_0x5049d9,_0x346198=a0_0x38aafa;let _0x726e03=getCurrentProject(),_0x4b9566=_0x726e03[_0x498926(0x17f)],_0x4c774a=_0x726e03[_0x346198(0x1b8)]*cellSize,_0x2cca1c=_0x726e03[_0x346198(0x27c)]*cellSize;const _0x3ffaf5=_0x4b9566[_0x346198(0x294)](_0x506f98=>{const _0x37e57b=_0x498926,_0x1670ed=_0x346198;let _0x16f80b=document[_0x1670ed(0x1d6)](_0x1670ed(0x19d));_0x16f80b[_0x1670ed(0x1b8)]=_0x4c774a,_0x16f80b[_0x1670ed(0x27c)]=_0x2cca1c;let _0x403ce7=_0x16f80b[_0x1670ed(0x2c6)]('2d');for(let _0x1164ef=0x0;_0x1164ef<_0x506f98[_0x37e57b(0x13d)][_0x1670ed(0x1c4)];_0x1164ef++){_0x403ce7[_0x1670ed(0x1ff)](_0x506f98[_0x37e57b(0x13d)][_0x1164ef],0x0,0x0);}let _0x5462a2=new Image();return _0x5462a2[_0x1670ed(0x1b3)]=_0x16f80b[_0x37e57b(0x1b5)](_0x1670ed(0x1fa)),_0x5462a2;});await Promise[_0x346198(0x25a)](_0x3ffaf5[_0x346198(0x294)](_0x40b662=>new Promise(_0x8dc243=>{const _0x29f654=_0x346198;_0x40b662[_0x29f654(0x185)]=_0x8dc243;})))[_0x5c0975(0xe0)](()=>{});const _0x492bcd=(_0x726e03[_0x346198(0x2e6)]||_0x346198(0x21f))[_0x346198(0x27d)](/[\\/:*?"<>|]/g,'_'),_0x4538ea=makeAPNGBlob(_0x3ffaf5,_0x4c774a,_0x2cca1c,animationDelay),_0x328065={'type':_0x346198(0x207),'version':0x1,'project':{'width':_0x726e03[_0x346198(0x1b8)],'height':_0x726e03[_0x346198(0x27c)],'name':_0x726e03[_0x346198(0x2e6)]||'','activeFrame':_0x726e03[_0x498926(0x12c)],'frames':_0x726e03[_0x346198(0x2b3)][_0x346198(0x294)](_0x17fd59=>({'activeLayer':_0x17fd59[_0x346198(0x1b5)],'layers':_0x17fd59[_0x541f7e(0x1c8)][_0x346198(0x294)](_0x7020d8=>_0x7020d8[_0x346198(0x1df)]())}))}},_0x43bd01=appendMetadataToBlob(_0x4538ea,_0x328065),_0x2b2ca4=URL[_0x346198(0x201)](_0x43bd01),_0x1f65bc=document[_0x498926(0x1f6)]('a');_0x1f65bc[_0x346198(0x1c8)]=_0x2b2ca4,_0x1f65bc[_0x346198(0x215)]=_0x492bcd+_0x498926(0x1e6),document[_0x346198(0x1e8)][_0x541f7e(0xb4)](_0x1f65bc),_0x1f65bc[_0x346198(0x2ed)](),setTimeout(()=>{const _0x4df3a0=_0x346198;document[_0x4df3a0(0x1e8)][_0x4df3a0(0x1dc)](_0x1f65bc),URL[_0x4df3a0(0x255)](_0x2b2ca4);},0x3e8);}function loadStandaloneFromFile(_0x44bbc0){return new Promise((_0x53587f,_0x293e61)=>{const _0x492ba4=a0_0x1925,_0x306524=new FileReader();_0x306524[_0x492ba4(0x185)]=_0x59dcb1=>{const _0x4971d9=a0_0x35c9,_0x4f279b=a0_0xce2f,_0x5466ba=_0x492ba4,_0x215643=_0x59dcb1[_0x5466ba(0x2e5)][_0x5466ba(0x192)],_0x5ddb6a=extractMetadataFromArrayBuffer(_0x215643);if(!_0x5ddb6a||!_0x5ddb6a[_0x4971d9(0x186)]){_0x293e61(new Error(_0x5466ba(0x20f)));return;}const _0x31972f=_0x5ddb6a[_0x5466ba(0x22f)];try{const _0x999523=createProject(_0x31972f[_0x5466ba(0x1b8)],_0x31972f[_0x5466ba(0x27c)],_0x31972f[_0x5466ba(0x2e6)]||'画像');_0x999523[_0x5466ba(0x2b3)]=_0x31972f[_0x5466ba(0x2b3)][_0x4f279b(0x18f)](_0x231ac3=>{const _0x428137=_0x4971d9,_0xd5238=_0x4f279b,_0x52ab44=_0x5466ba;let _0x41db88={'layers':[],'activeLayer':_0x231ac3[_0xd5238(0x215)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x22e93b=0x0;_0x22e93b<_0x231ac3[_0x52ab44(0x262)][_0x52ab44(0x1c4)];_0x22e93b++){let _0x4850a6=new Image();_0x4850a6[_0x52ab44(0x1b3)]=_0x231ac3[_0xd5238(0x13d)][_0x22e93b];let _0x3a0716=document[_0xd5238(0x1f6)](_0x52ab44(0x19d));_0x3a0716[_0x52ab44(0x1b8)]=_0x31972f[_0x428137(0x13b)]*cellSize,_0x3a0716[_0x52ab44(0x27c)]=_0x31972f[_0xd5238(0x13b)]*cellSize,_0x4850a6[_0xd5238(0x11a)]=()=>{const _0x3af0ab=_0xd5238,_0x3dc144=_0x52ab44;let _0x1aadc0=_0x3a0716[_0x3dc144(0x2c6)]('2d');_0x1aadc0[_0x3dc144(0x22d)](0x0,0x0,_0x3a0716[_0x3dc144(0x1b8)],_0x3a0716[_0x3dc144(0x27c)]),_0x1aadc0[_0x3af0ab(0x230)](_0x4850a6,0x0,0x0);},_0x41db88[_0xd5238(0x13d)][_0x52ab44(0x278)](_0x3a0716);}return _0x41db88;}),projects[_0x5466ba(0x278)](_0x999523),activeProject=projects[_0x5466ba(0x1c4)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x53587f(_0x999523);}catch(_0x3982d5){_0x293e61(_0x3982d5);}},_0x306524[_0x492ba4(0x1c5)]=_0x288f81=>_0x293e61(_0x288f81),_0x306524['readAsArrayBuffer'](_0x44bbc0);});}function toggleSection(_0x3d3d0b){const _0x2af916=a0_0x521960,_0x41d80c=a0_0x5049d9,_0x395500=a0_0x38aafa,_0x5475ce=document[_0x395500(0x275)](_0x3d3d0b),_0x4413c0=_0x5475ce[_0x395500(0x2c0)](_0x395500(0x218)),_0x21dbce=_0x5475ce[_0x395500(0x2c0)](_0x395500(0x277));_0x4413c0['style'][_0x395500(0x2f0)]===_0x41d80c(0x12d)?(_0x4413c0[_0x395500(0x1f8)][_0x395500(0x2f0)]='',_0x21dbce[_0x395500(0x221)]='▼'):(_0x4413c0[_0x395500(0x1f8)][_0x2af916(0x114)]=_0x395500(0x1b1),_0x21dbce[_0x395500(0x221)]='▲');}document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x293),()=>{const _0x2d8c00=a0_0x5049d9,_0x469966=a0_0x38aafa;document[_0x2d8c00(0xe9)](_0x469966(0x204))[_0x469966(0x1bd)](_0x512cd7=>_0x512cd7[_0x469966(0x1f8)][_0x469966(0x2f0)]=''),document[_0x2d8c00(0xe9)](_0x2d8c00(0xf6))[_0x2d8c00(0x10a)](_0x4c5f19=>_0x4c5f19[_0x469966(0x221)]='▼');}),window[a0_0x38aafa(0x21d)](a0_0x38aafa(0x251),updateMenuBtnDisplay),document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x293),updateMenuBtnDisplay);function a0_0x56c5(_0x2b93b9,_0x506569){_0x2b93b9=_0x2b93b9-0xaa;const _0x533a13=a0_0x22a5();let _0x56af02=_0x533a13[_0x2b93b9];return _0x56af02;}function toggleSideMenu(_0x232fd7){const _0x295932=a0_0x35c9,_0x199aa3=a0_0x521960,_0x165602=a0_0x5049d9,_0x500b05=a0_0x38aafa,_0x27a259=document[_0x295932(0x116)](_0x165602(0x226)),_0x119ca0=document[_0x500b05(0x275)](_0x500b05(0x183)),_0x1e0670=document[_0x500b05(0x275)](_0x500b05(0x18b)),_0x367194=document[_0x500b05(0x275)](_0x500b05(0x1b4)),_0xf0811d=_0x27a259[_0x500b05(0x22b)][_0x500b05(0x23f)](_0x199aa3(0x1bb));let _0x2e923c=typeof _0x232fd7===_0x500b05(0x1af)?_0x232fd7:!_0xf0811d;_0x2e923c?(_0x27a259[_0x165602(0x176)][_0x500b05(0x1de)](_0x500b05(0x2ec)),_0x119ca0[_0x500b05(0x22b)][_0x165602(0x189)](_0x500b05(0x2a1)),document[_0x165602(0x1c5)][_0x199aa3(0x178)][_0x199aa3(0x14a)]=_0x500b05(0x289),document[_0x500b05(0x1e8)][_0x500b05(0x1f8)][_0x500b05(0x1ec)]=_0x500b05(0x1b1),window[_0x500b05(0x22a)]<=0x384&&(_0x367194[_0x199aa3(0x178)][_0x500b05(0x2f0)]=_0x500b05(0x1d2),_0x1e0670[_0x295932(0x151)][_0x500b05(0x2f0)]=_0x500b05(0x1b1))):(_0x27a259[_0x199aa3(0x100)][_0x165602(0x1e9)](_0x165602(0x144)),_0x119ca0[_0x500b05(0x22b)][_0x199aa3(0x1af)](_0x500b05(0x2a1)),document[_0x500b05(0x1e8)][_0x500b05(0x1f8)][_0x165602(0x110)]='',document[_0x500b05(0x1e8)][_0x500b05(0x1f8)][_0x500b05(0x1ec)]='',window[_0x500b05(0x22a)]<=0x384&&(_0x367194[_0x500b05(0x1f8)][_0x165602(0x193)]=_0x500b05(0x1b1),_0x1e0670[_0x165602(0x1bb)][_0x500b05(0x2f0)]=_0x199aa3(0x15d)));}function updateMenuBtnDisplay(){const _0x3b0aa8=a0_0x35c9,_0x2b550c=a0_0x521960,_0x55e150=a0_0x5049d9,_0x36c56d=a0_0x38aafa,_0x2d699=document[_0x36c56d(0x275)](_0x55e150(0x226)),_0x4f8748=document[_0x3b0aa8(0x116)](_0x36c56d(0x183)),_0x2b6075=document[_0x55e150(0x192)](_0x36c56d(0x18b)),_0x39e213=document[_0x36c56d(0x275)](_0x36c56d(0x1b4));window[_0x36c56d(0x22a)]>0x384?(_0x2d699[_0x36c56d(0x22b)][_0x55e150(0x1e9)](_0x36c56d(0x2ec)),_0x4f8748[_0x36c56d(0x22b)][_0x36c56d(0x187)](_0x36c56d(0x2a1)),_0x39e213[_0x55e150(0x1bb)][_0x36c56d(0x2f0)]=_0x55e150(0x12d),_0x2b6075[_0x36c56d(0x1f8)][_0x36c56d(0x2f0)]=_0x36c56d(0x1b1),document[_0x36c56d(0x1e8)][_0x36c56d(0x1f8)][_0x36c56d(0x188)]='',document[_0x36c56d(0x1e8)][_0x36c56d(0x1f8)][_0x55e150(0x13e)]=''):_0x2d699[_0x36c56d(0x22b)][_0x36c56d(0x23f)](_0x55e150(0x144))?(_0x39e213[_0x55e150(0x1bb)][_0x36c56d(0x2f0)]=_0x36c56d(0x1d2),_0x2b6075[_0x36c56d(0x1f8)][_0x36c56d(0x2f0)]=_0x36c56d(0x1b1)):(_0x39e213[_0x36c56d(0x1f8)][_0x36c56d(0x2f0)]=_0x36c56d(0x1b1),_0x2b6075[_0x36c56d(0x1f8)][_0x2b550c(0x114)]=_0x36c56d(0x1d2));}document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x2ed),function(_0x919291){const _0xc5bd72=a0_0x35c9,_0x1f8c4a=a0_0x521960,_0x5cb4bb=a0_0x5049d9,_0x34a116=a0_0x38aafa;if(window[_0x34a116(0x22a)]>0x384)return;const _0x57873a=document[_0x34a116(0x275)](_0x34a116(0x2ce)),_0x39e643=document[_0x34a116(0x275)](_0xc5bd72(0x174)),_0xaae805=document[_0x34a116(0x275)](_0x34a116(0x18b)),_0x4ce917=document[_0x34a116(0x275)](_0x5cb4bb(0x1be));!_0x57873a[_0x34a116(0x23f)](_0x919291[_0x34a116(0x2e5)])&&_0x919291[_0x34a116(0x2e5)]!==_0xaae805&&_0x919291[_0x34a116(0x2e5)]!==_0x4ce917&&(_0x57873a[_0x34a116(0x22b)][_0x34a116(0x187)](_0x34a116(0x2ec)),_0x39e643[_0x34a116(0x22b)][_0x34a116(0x187)](_0x34a116(0x2a1)),_0x4ce917[_0x34a116(0x1f8)][_0x34a116(0x2f0)]=_0x1f8c4a(0xb2),_0xaae805[_0x34a116(0x1f8)][_0x34a116(0x2f0)]=_0x34a116(0x1d2),document[_0x34a116(0x1e8)][_0x34a116(0x1f8)][_0x34a116(0x188)]='',document[_0x5cb4bb(0x1c5)][_0x34a116(0x1f8)][_0x34a116(0x1ec)]='');}),(function(){const _0x1a962f=a0_0x38aafa;try{(location[_0x1a962f(0x1ad)][_0x1a962f(0x18c)](/index\.html$/)||location[_0x1a962f(0x1ad)]==='/'||location[_0x1a962f(0x1ad)]===_0x1a962f(0x2b1))&&(!localStorage[_0x1a962f(0x1d5)](_0x1a962f(0x249))&&(localStorage[_0x1a962f(0x1fc)](_0x1a962f(0x249),'1'),location[_0x1a962f(0x1c8)]=_0x1a962f(0x2ae)));}catch(_0x48c752){}}());function a0_0x35c9(_0x51a65a,_0x98ba66){_0x51a65a=_0x51a65a-0xc8;const _0xa5c011=a0_0x9b6b();let _0x27dd6f=_0xa5c011[_0x51a65a];return _0x27dd6f;}let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x1cc),_0x242386=>{const _0x5ec1c9=a0_0x38aafa;if(_0x242386[_0x5ec1c9(0x2c5)]===_0x5ec1c9(0x24c))shiftPressed=!![];}),document[a0_0x38aafa(0x21d)](a0_0x38aafa(0x1ab),_0x35a9df=>{const _0x789f64=a0_0x38aafa;if(_0x35a9df[_0x789f64(0x2c5)]===_0x789f64(0x24c))shiftPressed=![];}),canvas[a0_0x5049d9(0x1a3)](a0_0x38aafa(0x1cd),_0x58f625=>{const _0x2f575a=a0_0x521960,_0x3a2b4e=a0_0x5049d9,_0x4dc693=a0_0x38aafa;if(_0x58f625[_0x4dc693(0x220)]===_0x4dc693(0x1a5))return;currentTool===_0x4dc693(0x232)||shiftPressed?(dragging=!![],isDrawing=![],startX=_0x58f625[_0x4dc693(0x193)],startY=_0x58f625[_0x4dc693(0x25d)],lastX=posX,lastY=posY,canvas[_0x4dc693(0x1f0)](_0x58f625[_0x4dc693(0x270)]),canvas[_0x4dc693(0x1f8)][_0x4dc693(0x2bd)]=_0x4dc693(0x1c2)):(isDrawing=!![],pointerDownX=_0x58f625[_0x4dc693(0x193)],pointerDownY=_0x58f625[_0x3a2b4e(0x12b)],handleMouseDown(_0x58f625),canvas[_0x2f575a(0x1cc)](_0x58f625[_0x4dc693(0x270)]));}),canvas[a0_0x38aafa(0x21d)](a0_0x38aafa(0x17e),_0x3218d1=>{const _0x3776bd=a0_0x521960,_0x5ada1f=a0_0x38aafa;if(_0x3218d1[_0x5ada1f(0x220)]===_0x5ada1f(0x1a5))return;if(dragging)posX=lastX+(_0x3218d1[_0x5ada1f(0x193)]-startX),posY=lastY+(_0x3218d1[_0x3776bd(0x1a6)]-startY),updateTransform();else{if(isDrawing){if(currentTool!==_0x5ada1f(0x182)){const _0x221a64=Math[_0x5ada1f(0x1a6)](_0x3218d1[_0x5ada1f(0x193)]-pointerDownX),_0x555ed2=Math[_0x5ada1f(0x1a6)](_0x3218d1[_0x5ada1f(0x25d)]-pointerDownY);if(_0x221a64>=PAN_CANCEL_DISTANCE||_0x555ed2>=PAN_CANCEL_DISTANCE){isDrawing=![];try{handleMouseUp(_0x3218d1);}catch(_0x22bd73){}return;}}handleMouseMove(_0x3218d1);}}}),canvas[a0_0x38aafa(0x21d)](a0_0x38aafa(0x2de),_0x46738a=>{const _0x4cf4fc=a0_0x521960,_0x27fe8d=a0_0x5049d9,_0xb4d8cf=a0_0x38aafa;if(_0x46738a[_0xb4d8cf(0x220)]===_0xb4d8cf(0x1a5))return;dragging=![],isDrawing&&handleMouseUp(_0x46738a),isDrawing=![];try{canvas[_0x27fe8d(0x217)](_0x46738a[_0xb4d8cf(0x270)]);}catch(_0x5db6f5){}if(currentTool===_0x4cf4fc(0x12a))canvas[_0xb4d8cf(0x1f8)][_0xb4d8cf(0x2bd)]=_0x4cf4fc(0xc3);else canvas[_0xb4d8cf(0x1f8)][_0x27fe8d(0x151)]=_0x27fe8d(0x10c);}),wrapper[a0_0x38aafa(0x21d)](a0_0x521960(0x12c),_0x3edb2f=>{const _0x25c317=a0_0x5049d9,_0x401ec9=a0_0x38aafa;_0x3edb2f[_0x25c317(0x187)]();const _0x20513a=canvas[_0x25c317(0x1b0)](),_0xa72f5c=_0x3edb2f[_0x401ec9(0x193)],_0x233667=_0x3edb2f[_0x401ec9(0x25d)],_0x298f9c=(_0xa72f5c-_0x20513a[_0x401ec9(0x2a7)]-posX)/scale,_0x1f2397=(_0x233667-_0x20513a[_0x401ec9(0x196)]-posY)/scale,_0x2c0eb6=_0x3edb2f[_0x401ec9(0x1e7)]>0x0?0.9:1.1;let _0x4b17e7=scale*_0x2c0eb6;_0x4b17e7=Math[_0x401ec9(0x1b2)](Math[_0x401ec9(0x2c3)](_0x4b17e7,0.2),0x5),posX=_0xa72f5c-_0x20513a[_0x401ec9(0x2a7)]-_0x298f9c*_0x4b17e7,posY=_0x233667-_0x20513a[_0x401ec9(0x196)]-_0x1f2397*_0x4b17e7,scale=_0x4b17e7,updateTransform();const _0x213f5a=document[_0x401ec9(0x275)](_0x25c317(0x155)),_0x2734cf=document[_0x401ec9(0x275)](_0x401ec9(0x2b6));if(_0x213f5a)_0x213f5a[_0x401ec9(0x24e)]=Math[_0x401ec9(0x26f)](scale*0x64);if(_0x2734cf)_0x2734cf[_0x401ec9(0x221)]=Math[_0x401ec9(0x26f)](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x314c60=a0_0x5049d9,_0x523d86=a0_0x38aafa;canvas[_0x523d86(0x1f8)][_0x314c60(0xee)]=_0x523d86(0x184)+posX+_0x523d86(0x1c0)+posY+_0x314c60(0xda)+scale+')';}function setZoomValue(_0x491700){const _0x139a0f=a0_0x5049d9,_0x3d8781=a0_0x38aafa,_0x4b093f=Math[_0x139a0f(0x107)](0x14,Math[_0x3d8781(0x1b2)](0x1f4,parseInt(_0x491700,0xa)||0x64)),_0x1216e7=_0x4b093f/0x64;scale=_0x1216e7,updateTransform();const _0x342934=document[_0x3d8781(0x275)](_0x3d8781(0x1bc)),_0x3e8d53=document[_0x3d8781(0x275)](_0x3d8781(0x2b6));if(_0x342934)_0x342934[_0x3d8781(0x24e)]=_0x4b093f;if(_0x3e8d53)_0x3e8d53[_0x3d8781(0x221)]=_0x4b093f+'%';}function zoomIn(){const _0x368f76=a0_0x38aafa,_0x176907=document[_0x368f76(0x275)](_0x368f76(0x1bc));let _0x3a8fba=_0x176907?parseInt(_0x176907[_0x368f76(0x24e)],0xa):Math[_0x368f76(0x26f)](scale*0x64);_0x3a8fba=Math[_0x368f76(0x1b2)](0x1f4,_0x3a8fba+0xa),setZoomValue(_0x3a8fba);}function zoomOut(){const _0x413295=a0_0x521960,_0x5f0e3e=a0_0x38aafa,_0x124295=document[_0x5f0e3e(0x275)](_0x413295(0x135));let _0x42c768=_0x124295?parseInt(_0x124295[_0x5f0e3e(0x24e)],0xa):Math[_0x5f0e3e(0x26f)](scale*0x64);_0x42c768=Math[_0x5f0e3e(0x2c3)](0x14,_0x42c768-0xa),setZoomValue(_0x42c768);}const zs=document[a0_0x38aafa(0x275)](a0_0x413a03(0x12d));if(zs)zs[a0_0x38aafa(0x28a)]=_0x4e8737=>setZoomValue(_0x4e8737[a0_0x5049d9(0x1d3)][a0_0x38aafa(0x24e)]);function a0_0x9b6b(){const _0x197214=['jpeg','translate(','nezumi-projects','classList','touchstart','innerHTML','unshift','palette-penMode','replaceWith','pen','#000000','6565944uViiCR','none','px)\x20scale(','left','byteLength','insertBefore','nezumi-theme','project-name-edit','6685nRmUxK','closePath','#800080','dataset','buffer','252qMzMxb','length','data','hidden','レイヤー','shift','下に移動','この色をパレットから削除','IndexedDBからの読み込みに失敗したチュー…','ライトテーマに切替','keyval','#palette-penSize','canvas','207RSftqX','color','rgba(0,0,0,0.3)','oninput','frameCount','#ffff00','#00ff00','#0000ff','ダークテーマに切替','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','activeFrame','all','2471826kAkssG','arc','onblur','hypot','pathname','スプライトシートの拡大率を指定（例:\x201\x20=\x20元サイズ,\x202\x20=\x202倍）','5zFczyy','grabbing','crossOrigin','project-btn','querySelector','themeToggleBtn','nezumi-animation','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','removeChild','transform','#ffa500','palette-alphaValue','1023636OyXKxu','>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22','apply','3313824QVIVOZ','palette-toolbar','drawImage','toDataURL','contains','flush','zoomValue','warn','パレットに色を追加','position','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','palette-color','min','getAttribute','input','constructor','frame-btn','getContext','GIFに変換できる画像がありません。','open','changedTouches','addFrame','data-theme','lineTo','21479103enQVXi','ontouchcancel','onmousedown','nezumi-animation.apng','image/png','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>塗りつぶし</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20太さ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','moveTo','title','round','.gif','pan','clientX','<span\x20style=\x22font-size:13px;color:#888;\x22>透明</span>','\x0a---NEZUMI_METADATA_START---\x0a','image/jpeg','#newProjName','#00000000','#800000','194866cGotcP','80px','undefined','fillStyle','#000080','join','subarray','log','#008000','animSpeedRange','penMode','nezumi-drawing','disabled','display','8fhqvtN','wheel','activeLayer','フレームがありません','anonymous','onmousemove','createElement','458555ntXURF','number','touches','decode','globalCompositeOperation','#888888','image/','image/apng','stringify','transaction','398826GXnyRZ','src','select','split','div','application/json','#cccccc','3bZOlqa','key','>四角ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22','put','pointermove','palette-add-btn','selected','preventDefault','catch','layer-btn','clear','nezumi-sketch.msketch','objectStore','3747624BaPwRo','keydown','isFinite','Shift','onsuccess','resize','nezumi-palette','revokeObjectURL','693928GhthjY','name','keyup','stroke','configure','setPointerCapture','textContent','className','nezumi-sketch-save','sidebar-open','releasePointerCapture','ontouchstart','zIndex','menu-toggle-btn-close','#palette-penMode','18959ijBvyJ','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','menu-toggle-btn','1663240xvhpIM','alphaValue','#ff00ff','(((.+)+)+)+$','\x20active','保存エラー','pointerId','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>幅:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>高さ:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>作成</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>キャンセル</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','>丸ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20透明度:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','deltaY','projects','aria-pressed','center','readonly','getItem','boolean','crosshair','delete','WebCodecs','#008080','matchMedia','isArray','4802050CMYWrO','getElementById','VideoEncoder','height','frame-item','onchange','\x20selected','palette-del-btn','#newProjW','circle','frames','eraser','/index.html','15948648zMXkzo','14236XjzBgT','.tool-btn','flex','3000','nezumi-standalone','.section-content','.section.collapsible\x20.toggle-btn','body','nezumi_about_visited','140942YGNfmW','zoomSlider','splice','このレイヤーを削除','search','files','close','#palette-alphaSlider','読込エラー','layerCount','replace','oncomplete','toggle','jpg','100vh','width','parentNode','animSpeedValue','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>新しい画像のサイズ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>名前:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22画像','justifyContent','ファイルにプロジェクトメタデータが見つかりませんでした。読み込みできません。','onkeydown','fill','video/webm','addEventListener','button','メタデータが見つかりませんでした','rgba(','image','block','nezumi-animation.gif','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22undo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>undo</span>\x20戻す\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22redo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>redo</span>\x20戻すを戻す\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','push','frame-thumb','10188tVdTJu','#newProjH','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>ペン</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','style','#ff0000','2937692dmuIuo','>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22','63psIyud','stopPropagation','fillRect','onerror','createObjectURL','transparent','alignItems','nezumi-sketch-db','putImageData','pop','.apng','onupgradeneeded','10XJZHgl','touchend','#palette-alphaValue','projectCount','focus','querySelectorAll','background','layer-thumb','getImageData','projectList','clearRect','forEach','floor','strokeStyle','プロジェクトがありません','cursor','abs','100%','createObjectStore','main-container','#ffffff','6806842iHrSfp','.palette-color','フレーム間の余白(px)\x20を指定（例:\x200）','fixed','14lKJKdV','toString','touchcancel','pointerup','filter','download','firstChild','layers','_spritesheet.png','10376090telBQC','1710315EwWIGP','finished','project','onmouseleave','restore','layer-item','100vw','#newProjOkBtn','14uGmiOY','project-item','クリックで名前を編集','readwrite','ontouchmove','ontouchend','7364640yMKFng','then','project-name','beginPath','get','match','DOMContentLoaded','href','setAttribute','getBoundingClientRect','IndexedDBからプロジェクトを読み込んだチュー！','clientY','value','3BIZZMa','#ccc','destination-out','beforeunload'];a0_0x9b6b=function(){return _0x197214;};return a0_0x9b6b();}function a0_0xce2f(_0x3d8fb0,_0x14c123){_0x3d8fb0=_0x3d8fb0-0xda;const _0xfdea4b=a0_0x243d();let _0x498055=_0xfdea4b[_0x3d8fb0];return _0x498055;}const zv=document[a0_0x38aafa(0x275)](a0_0x5049d9(0x16a));if(zv)zv[a0_0x5049d9(0x154)]=Math[a0_0x521960(0x122)](scale*0x64)+'%';function getCanvasCoords(_0x569217){const _0x19b508=a0_0x413a03,_0x381c07=a0_0x5049d9,_0x233064=a0_0x38aafa,_0x353291=canvas[_0x19b508(0x19b)](),_0x5eb5fe=canvas[_0x381c07(0x190)]/_0x353291[_0x233064(0x1b8)],_0x502504=canvas[_0x233064(0x27c)]/_0x353291[_0x233064(0x27c)],_0x17d08a=(_0x569217[_0x233064(0x193)]-_0x353291[_0x233064(0x2a7)])*_0x5eb5fe,_0x22f6f8=(_0x569217[_0x233064(0x25d)]-_0x353291[_0x233064(0x196)])*_0x502504;return{'x':_0x17d08a,'y':_0x22f6f8};}function handleDrawStart(_0x5b02a1){const _0x1bf755=a0_0x38aafa,_0x139c44=getCanvasCoords(_0x5b02a1);ctx[_0x1bf755(0x2eb)](),ctx[_0x1bf755(0x29e)](_0x139c44['x'],_0x139c44['y']);}function handleDrawMove(_0x9f0d32){const _0x451a00=a0_0x5049d9,_0x33b6e2=a0_0x38aafa,_0x39f298=getCanvasCoords(_0x9f0d32);ctx[_0x451a00(0xf3)](_0x39f298['x'],_0x39f298['y']),ctx[_0x33b6e2(0x2d9)]();}function handleDrawEnd(_0x262902){const _0x2ac381=a0_0x38aafa;ctx[_0x2ac381(0x2db)]();}