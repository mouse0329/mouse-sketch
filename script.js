const a0_0x42c430=a0_0x5dd2;(function(_0x21044d,_0x520d0a){const _0x1a77f7=a0_0x5dd2,_0x3c24aa=_0x21044d();while(!![]){try{const _0x1ecc23=parseInt(_0x1a77f7(0x1fe))/0x1*(-parseInt(_0x1a77f7(0x20e))/0x2)+parseInt(_0x1a77f7(0x144))/0x3*(-parseInt(_0x1a77f7(0x16b))/0x4)+parseInt(_0x1a77f7(0x132))/0x5+parseInt(_0x1a77f7(0x1ba))/0x6+parseInt(_0x1a77f7(0x188))/0x7*(parseInt(_0x1a77f7(0x1dd))/0x8)+-parseInt(_0x1a77f7(0x16e))/0x9+parseInt(_0x1a77f7(0x1ab))/0xa;if(_0x1ecc23===_0x520d0a)break;else _0x3c24aa['push'](_0x3c24aa['shift']());}catch(_0x5e8814){_0x3c24aa['push'](_0x3c24aa['shift']());}}}(a0_0x3324,0x76c20));const a0_0x37cd35=(function(){let _0xdb5010=!![];return function(_0x2b9ce6,_0x61e9a4){const _0x47b62f=_0xdb5010?function(){const _0x4a62bd=a0_0x5dd2;if(_0x61e9a4){const _0x1145a7=_0x61e9a4[_0x4a62bd(0x1b0)](_0x2b9ce6,arguments);return _0x61e9a4=null,_0x1145a7;}}:function(){};return _0xdb5010=![],_0x47b62f;};}()),a0_0x132e3f=a0_0x37cd35(this,function(){const _0x337df4=a0_0x5dd2;return a0_0x132e3f[_0x337df4(0x160)]()[_0x337df4(0x13b)](_0x337df4(0x190))[_0x337df4(0x160)]()[_0x337df4(0x15c)](a0_0x132e3f)[_0x337df4(0x13b)](_0x337df4(0x190));});a0_0x132e3f();let canvas=document[a0_0x42c430(0x148)](a0_0x42c430(0x1e4)),ctx=canvas[a0_0x42c430(0x1de)]('2d'),cellSize=0x14,currentColor=a0_0x42c430(0x123),currentTool=a0_0x42c430(0x1f1),penSize=0x1,penMode=a0_0x42c430(0x1b1),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x5e6fbd=0x10,_0x794ae6=0x10,_0x146fcb=''){const _0x2d147d=a0_0x42c430;let _0x5441c8=0x14,_0x2b92bd=[],_0x3b336b=[],_0x179d1b=[],_0x22900d=document[_0x2d147d(0x179)](_0x2d147d(0x1e4));_0x22900d[_0x2d147d(0x1f3)]=_0x5e6fbd*_0x5441c8,_0x22900d[_0x2d147d(0x1fd)]=_0x794ae6*_0x5441c8,_0x2b92bd[_0x2d147d(0x1cc)](_0x22900d),_0x3b336b[_0x2d147d(0x1cc)]([]),_0x179d1b[_0x2d147d(0x1cc)]([]);let _0x49b1b3={'layers':_0x2b92bd,'activeLayer':0x0,'layerHistories':_0x3b336b,'layerRedoStacks':_0x179d1b};return{'frames':[_0x49b1b3],'activeFrame':0x0,'width':_0x5e6fbd,'height':_0x794ae6,'name':_0x146fcb||'画像'+(projects[_0x2d147d(0x170)]+0x1)};}function updateProjectUI(){const _0x2109e5=a0_0x42c430,_0x19ee07=document[_0x2109e5(0x148)](_0x2109e5(0x173));_0x19ee07['innerHTML']='';for(let _0x3ae558=0x0;_0x3ae558<projects[_0x2109e5(0x170)];_0x3ae558++){const _0x24585a=document[_0x2109e5(0x179)](_0x2109e5(0x161));_0x24585a[_0x2109e5(0x1f9)]=_0x2109e5(0x1cf)+(_0x3ae558===activeProject?_0x2109e5(0x202):''),_0x24585a[_0x2109e5(0x19d)]=()=>{activeProject=_0x3ae558,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x44e236=document[_0x2109e5(0x179)]('span');_0x44e236['className']=_0x2109e5(0x20d),_0x44e236['textContent']=projects[_0x3ae558][_0x2109e5(0x19c)]||'画像'+(_0x3ae558+0x1),_0x44e236['title']=_0x2109e5(0x22f),_0x44e236[_0x2109e5(0x19d)]=_0x3c346b=>{const _0x3aaeba=_0x2109e5;_0x3c346b[_0x3aaeba(0x13e)](),editProjectName(_0x3ae558,_0x44e236);},_0x24585a[_0x2109e5(0x171)](_0x44e236);const _0x1d8ba4=document['createElement'](_0x2109e5(0x124));_0x1d8ba4[_0x2109e5(0x21a)]='削除',_0x1d8ba4['className']=_0x2109e5(0x177),_0x1d8ba4['disabled']=projects[_0x2109e5(0x170)]===0x1,_0x1d8ba4[_0x2109e5(0x19d)]=_0x52798e=>{const _0x19ebdc=_0x2109e5;_0x52798e[_0x19ebdc(0x13e)](),removeProjectAt(_0x3ae558);},_0x24585a[_0x2109e5(0x171)](_0x1d8ba4),_0x19ee07[_0x2109e5(0x171)](_0x24585a);}document[_0x2109e5(0x148)](_0x2109e5(0x1ff))[_0x2109e5(0x21a)]='('+projects['length']+'枚)';}function editProjectName(_0x2654ea,_0x1fe3cb){const _0x38b94f=a0_0x42c430,_0x20f036=document[_0x38b94f(0x179)]('input');_0x20f036[_0x38b94f(0x1e3)]=_0x38b94f(0x1b4),_0x20f036['value']=projects[_0x2654ea][_0x38b94f(0x19c)]||'画像'+(_0x2654ea+0x1),_0x20f036[_0x38b94f(0x1f9)]=_0x38b94f(0x156),_0x20f036[_0x38b94f(0x174)]['width']='80px',_0x20f036[_0x38b94f(0x1e0)]=()=>{const _0x6e2ac0=_0x38b94f;projects[_0x2654ea]['name']=_0x20f036[_0x6e2ac0(0x1d4)][_0x6e2ac0(0x1a7)]()||'画像'+(_0x2654ea+0x1),updateProjectUI();},_0x20f036['onkeydown']=_0x2e6823=>{const _0x3dcd4e=_0x38b94f;if(_0x2e6823['key']===_0x3dcd4e(0x1b3))_0x20f036[_0x3dcd4e(0x17b)]();},_0x1fe3cb[_0x38b94f(0x137)](_0x20f036),_0x20f036[_0x38b94f(0x131)](),_0x20f036[_0x38b94f(0x214)]();}function showNewProjectDialog(_0x3104fc){const _0x52bb98=a0_0x42c430;let _0x588d9e=document[_0x52bb98(0x148)](_0x52bb98(0x1eb));if(_0x588d9e)_0x588d9e[_0x52bb98(0x128)]();const _0x5580e7=document[_0x52bb98(0x179)]('div');_0x5580e7['id']='new-project-dialog',_0x5580e7[_0x52bb98(0x174)][_0x52bb98(0x20b)]='fixed',_0x5580e7['style'][_0x52bb98(0x12e)]='0',_0x5580e7[_0x52bb98(0x174)][_0x52bb98(0x142)]='0',_0x5580e7[_0x52bb98(0x174)][_0x52bb98(0x1f3)]='100vw',_0x5580e7[_0x52bb98(0x174)]['height']='100vh',_0x5580e7[_0x52bb98(0x174)][_0x52bb98(0x15a)]='rgba(0,0,0,0.3)',_0x5580e7[_0x52bb98(0x174)][_0x52bb98(0x187)]=_0x52bb98(0x16c),_0x5580e7[_0x52bb98(0x174)][_0x52bb98(0x1b2)]=_0x52bb98(0x1af),_0x5580e7[_0x52bb98(0x174)][_0x52bb98(0x1ef)]=_0x52bb98(0x1af),_0x5580e7[_0x52bb98(0x174)]['zIndex']='3000',_0x5580e7['innerHTML']=_0x52bb98(0x191)+(projects[_0x52bb98(0x170)]+0x1)+_0x52bb98(0x176),document[_0x52bb98(0x223)][_0x52bb98(0x171)](_0x5580e7),_0x5580e7['querySelector'](_0x52bb98(0x181))['onclick']=()=>{const _0x51bb6a=_0x52bb98,_0x263736=parseInt(_0x5580e7['querySelector'](_0x51bb6a(0x17f))[_0x51bb6a(0x1d4)],0xa),_0x42ef05=parseInt(_0x5580e7[_0x51bb6a(0x154)](_0x51bb6a(0x1e2))[_0x51bb6a(0x1d4)],0xa),_0x38f41d=_0x5580e7[_0x51bb6a(0x154)](_0x51bb6a(0x1d8))[_0x51bb6a(0x1d4)][_0x51bb6a(0x1a7)]();_0x5580e7[_0x51bb6a(0x128)]();if(_0x3104fc)_0x3104fc(_0x263736,_0x42ef05,_0x38f41d);},_0x5580e7['querySelector'](_0x52bb98(0x219))['onclick']=()=>{const _0x2d04e9=_0x52bb98;_0x5580e7[_0x2d04e9(0x128)]();};}function addProject(){showNewProjectDialog((_0x5ee5b1,_0x2b8f35,_0x1d0c73)=>{const _0x4b3e66=a0_0x5dd2;if(!Number[_0x4b3e66(0x1d9)](_0x5ee5b1)||_0x5ee5b1<0x1)_0x5ee5b1=0x10;if(!Number[_0x4b3e66(0x1d9)](_0x2b8f35)||_0x2b8f35<0x1)_0x2b8f35=0x10;projects[_0x4b3e66(0x1cc)](createProject(_0x5ee5b1,_0x2b8f35,_0x1d0c73)),activeProject=projects[_0x4b3e66(0x170)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x3b48b9){const _0xa681fd=a0_0x42c430;if(projects[_0xa681fd(0x170)]<=0x1)return;projects[_0xa681fd(0x134)](_0x3b48b9,0x1);if(activeProject>=projects[_0xa681fd(0x170)])activeProject=projects['length']-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x14c6f3=a0_0x42c430,_0x20398a=document[_0x14c6f3(0x148)](_0x14c6f3(0x1ad)),_0x5ea7bc=getCurrentProject();_0x20398a[_0x14c6f3(0x18e)]='';for(let _0x5c45c9=0x0;_0x5c45c9<_0x5ea7bc['frames']['length'];_0x5c45c9++){const _0x5e501e=document[_0x14c6f3(0x179)](_0x14c6f3(0x161));_0x5e501e[_0x14c6f3(0x1f9)]=_0x14c6f3(0x1fc)+(_0x5c45c9===_0x5ea7bc['activeFrame']?_0x14c6f3(0x202):''),_0x5e501e['onclick']=()=>{const _0x1ac976=_0x14c6f3;_0x5ea7bc[_0x1ac976(0x184)]=_0x5c45c9,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x18d393=document[_0x14c6f3(0x179)](_0x14c6f3(0x1e4));_0x18d393[_0x14c6f3(0x1f9)]=_0x14c6f3(0x21b),_0x18d393[_0x14c6f3(0x1f3)]=0x20,_0x18d393[_0x14c6f3(0x1fd)]=0x20;let _0xd6ff32=_0x18d393[_0x14c6f3(0x1de)]('2d');_0xd6ff32[_0x14c6f3(0x222)](0x0,0x0,0x20,0x20);for(let _0x4b02e3=0x0;_0x4b02e3<_0x5ea7bc[_0x14c6f3(0x217)][_0x5c45c9][_0x14c6f3(0x130)]['length'];_0x4b02e3++){_0xd6ff32[_0x14c6f3(0x1d6)](_0x5ea7bc[_0x14c6f3(0x217)][_0x5c45c9][_0x14c6f3(0x130)][_0x4b02e3],0x0,0x0,_0x18d393[_0x14c6f3(0x1f3)],_0x18d393['height']);}_0x5e501e['appendChild'](_0x18d393);const _0x4885f9=document[_0x14c6f3(0x179)](_0x14c6f3(0x1c4));_0x4885f9[_0x14c6f3(0x21a)]='F'+(_0x5c45c9+0x1),_0x5e501e[_0x14c6f3(0x171)](_0x4885f9);const _0x3f2ef8=document['createElement'](_0x14c6f3(0x124));_0x3f2ef8[_0x14c6f3(0x21a)]='削除',_0x3f2ef8['className']=_0x14c6f3(0x1d0),_0x3f2ef8[_0x14c6f3(0x20c)]=_0x5ea7bc['frames'][_0x14c6f3(0x170)]===0x1,_0x3f2ef8[_0x14c6f3(0x19d)]=_0x2f6698=>{const _0x35b779=_0x14c6f3;_0x2f6698[_0x35b779(0x13e)](),removeFrameAt(_0x5c45c9);},_0x5e501e[_0x14c6f3(0x171)](_0x3f2ef8),_0x20398a['appendChild'](_0x5e501e);}document[_0x14c6f3(0x148)](_0x14c6f3(0x14d))['textContent']='('+_0x5ea7bc[_0x14c6f3(0x217)][_0x14c6f3(0x170)]+_0x14c6f3(0x150);}function addFrame(){const _0x566622=a0_0x42c430;let _0x38bf9b=getCurrentProject(),_0x31ad55=_0x38bf9b['frames'][_0x38bf9b['activeFrame']],_0x259637=_0x31ad55[_0x566622(0x130)][_0x566622(0x228)](_0xba1e88=>{const _0x682db9=_0x566622;let _0x2cc18d=document[_0x682db9(0x179)]('canvas');return _0x2cc18d[_0x682db9(0x1f3)]=_0xba1e88['width'],_0x2cc18d['height']=_0xba1e88[_0x682db9(0x1fd)],_0x2cc18d[_0x682db9(0x1de)]('2d')['drawImage'](_0xba1e88,0x0,0x0),_0x2cc18d;}),_0x11737a=_0x259637[_0x566622(0x228)](()=>[]),_0xb17c6e=_0x259637['map'](()=>[]),_0x30a97f={'layers':_0x259637,'activeLayer':0x0,'layerHistories':_0x11737a,'layerRedoStacks':_0xb17c6e};_0x38bf9b[_0x566622(0x217)]['splice'](_0x38bf9b['activeFrame']+0x1,0x0,_0x30a97f),_0x38bf9b['activeFrame']++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x29ee1c){const _0x2d6560=a0_0x42c430;let _0x38857c=getCurrentProject();if(_0x38857c[_0x2d6560(0x217)]['length']<=0x1)return;_0x38857c[_0x2d6560(0x217)][_0x2d6560(0x134)](_0x29ee1c,0x1);if(_0x38857c[_0x2d6560(0x184)]>=_0x38857c[_0x2d6560(0x217)][_0x2d6560(0x170)])_0x38857c[_0x2d6560(0x184)]=_0x38857c[_0x2d6560(0x217)][_0x2d6560(0x170)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x1cac09=a0_0x42c430;return getCurrentProject()[_0x1cac09(0x217)][getCurrentProject()[_0x1cac09(0x184)]];}function updateLayerUI(){const _0x3b1414=a0_0x42c430;let {layers:_0x4b2156,activeLayer:_0x5785df}=getCurrentFrame();document[_0x3b1414(0x148)](_0x3b1414(0x16d))[_0x3b1414(0x21a)]='('+_0x4b2156[_0x3b1414(0x170)]+'枚)';const _0x10aa1b=document['getElementById'](_0x3b1414(0x147));_0x10aa1b[_0x3b1414(0x18e)]='';for(let _0x541fc8=_0x4b2156[_0x3b1414(0x170)]-0x1;_0x541fc8>=0x0;_0x541fc8--){const _0x5868bb=document[_0x3b1414(0x179)]('div');_0x5868bb[_0x3b1414(0x1f9)]=_0x3b1414(0x1aa)+(_0x541fc8===_0x5785df?_0x3b1414(0x202):''),_0x5868bb[_0x3b1414(0x19d)]=_0x200516=>{const _0x2e2ef9=_0x3b1414;if(_0x200516['target'][_0x2e2ef9(0x13a)][_0x2e2ef9(0x229)](_0x2e2ef9(0x16f)))return;getCurrentFrame()[_0x2e2ef9(0x20a)]=_0x541fc8,updateLayerUI(),redrawAll();};const _0xc5c1dd=document[_0x3b1414(0x179)](_0x3b1414(0x1e4));_0xc5c1dd['className']=_0x3b1414(0x155),_0xc5c1dd[_0x3b1414(0x1f3)]=0x20,_0xc5c1dd[_0x3b1414(0x1fd)]=0x20;let _0x423c45=_0xc5c1dd[_0x3b1414(0x1de)]('2d');_0x423c45['clearRect'](0x0,0x0,0x20,0x20),_0x423c45['drawImage'](_0x4b2156[_0x541fc8],0x0,0x0,_0xc5c1dd[_0x3b1414(0x1f3)],_0xc5c1dd[_0x3b1414(0x1fd)]),_0x5868bb[_0x3b1414(0x171)](_0xc5c1dd);const _0x13075a=document[_0x3b1414(0x179)](_0x3b1414(0x1c4));_0x13075a['textContent']='レイヤー'+(_0x541fc8+0x1),_0x5868bb[_0x3b1414(0x171)](_0x13075a);const _0x470ceb=document[_0x3b1414(0x179)](_0x3b1414(0x124));_0x470ceb[_0x3b1414(0x21a)]='↑',_0x470ceb[_0x3b1414(0x1f9)]=_0x3b1414(0x16f),_0x470ceb[_0x3b1414(0x140)]=_0x3b1414(0x1d2),_0x470ceb[_0x3b1414(0x20c)]=_0x541fc8===_0x4b2156[_0x3b1414(0x170)]-0x1,_0x470ceb[_0x3b1414(0x19d)]=_0x29badf=>{const _0x1e6052=_0x3b1414;_0x29badf[_0x1e6052(0x13e)](),_0x541fc8<_0x4b2156[_0x1e6052(0x170)]-0x1&&swapLayer(_0x541fc8,_0x541fc8+0x1);},_0x5868bb[_0x3b1414(0x171)](_0x470ceb);const _0x155ac3=document[_0x3b1414(0x179)]('button');_0x155ac3[_0x3b1414(0x21a)]='↓',_0x155ac3['className']='layer-btn',_0x155ac3[_0x3b1414(0x140)]=_0x3b1414(0x1a4),_0x155ac3['disabled']=_0x541fc8===0x0,_0x155ac3[_0x3b1414(0x19d)]=_0x34ee19=>{const _0x3caac7=_0x3b1414;_0x34ee19[_0x3caac7(0x13e)](),_0x541fc8>0x0&&swapLayer(_0x541fc8,_0x541fc8-0x1);},_0x5868bb[_0x3b1414(0x171)](_0x155ac3);const _0x54d591=document[_0x3b1414(0x179)](_0x3b1414(0x124));_0x54d591[_0x3b1414(0x21a)]='削除',_0x54d591[_0x3b1414(0x1f9)]=_0x3b1414(0x16f),_0x54d591[_0x3b1414(0x140)]=_0x3b1414(0x230),_0x54d591[_0x3b1414(0x20c)]=_0x4b2156[_0x3b1414(0x170)]===0x1,_0x54d591[_0x3b1414(0x19d)]=_0x5ab271=>{const _0x4d7196=_0x3b1414;_0x5ab271[_0x4d7196(0x13e)](),removeLayerAt(_0x541fc8);},_0x5868bb[_0x3b1414(0x171)](_0x54d591),_0x10aa1b[_0x3b1414(0x171)](_0x5868bb);}}function swapLayer(_0xca7ef7,_0x1d76d5){const _0xc0f224=a0_0x42c430;let _0x18d3df=getCurrentFrame();[_0x18d3df['layers'][_0xca7ef7],_0x18d3df[_0xc0f224(0x130)][_0x1d76d5]]=[_0x18d3df['layers'][_0x1d76d5],_0x18d3df[_0xc0f224(0x130)][_0xca7ef7]],[_0x18d3df[_0xc0f224(0x22c)][_0xca7ef7],_0x18d3df[_0xc0f224(0x22c)][_0x1d76d5]]=[_0x18d3df[_0xc0f224(0x22c)][_0x1d76d5],_0x18d3df[_0xc0f224(0x22c)][_0xca7ef7]],[_0x18d3df['layerRedoStacks'][_0xca7ef7],_0x18d3df[_0xc0f224(0x194)][_0x1d76d5]]=[_0x18d3df[_0xc0f224(0x194)][_0x1d76d5],_0x18d3df[_0xc0f224(0x194)][_0xca7ef7]];if(_0x18d3df[_0xc0f224(0x20a)]===_0xca7ef7)_0x18d3df[_0xc0f224(0x20a)]=_0x1d76d5;else{if(_0x18d3df[_0xc0f224(0x20a)]===_0x1d76d5)_0x18d3df[_0xc0f224(0x20a)]=_0xca7ef7;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x36ce31){const _0x1af1f5=a0_0x42c430;let _0x85fb37=getCurrentFrame();if(_0x85fb37[_0x1af1f5(0x130)]['length']<=0x1)return;_0x85fb37[_0x1af1f5(0x130)][_0x1af1f5(0x134)](_0x36ce31,0x1),_0x85fb37[_0x1af1f5(0x22c)][_0x1af1f5(0x134)](_0x36ce31,0x1),_0x85fb37['layerRedoStacks']['splice'](_0x36ce31,0x1);if(_0x85fb37[_0x1af1f5(0x20a)]>=_0x85fb37[_0x1af1f5(0x130)][_0x1af1f5(0x170)])_0x85fb37['activeLayer']=_0x85fb37[_0x1af1f5(0x130)][_0x1af1f5(0x170)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x4e1b80=a0_0x42c430;let _0x5ecab1=getCurrentProject(),_0xa27b7f=getCurrentFrame(),_0x320a93=document[_0x4e1b80(0x179)](_0x4e1b80(0x1e4));_0x320a93[_0x4e1b80(0x1f3)]=_0x5ecab1[_0x4e1b80(0x1f3)]*cellSize,_0x320a93[_0x4e1b80(0x1fd)]=_0x5ecab1[_0x4e1b80(0x1fd)]*cellSize,_0xa27b7f[_0x4e1b80(0x130)][_0x4e1b80(0x1cc)](_0x320a93),_0xa27b7f['layerHistories']['push']([]),_0xa27b7f[_0x4e1b80(0x194)][_0x4e1b80(0x1cc)]([]),_0xa27b7f[_0x4e1b80(0x20a)]=_0xa27b7f[_0x4e1b80(0x130)][_0x4e1b80(0x170)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x55a124=a0_0x42c430;let _0x5bb47e=getCurrentFrame();if(_0x5bb47e[_0x55a124(0x130)][_0x55a124(0x170)]<=0x1)return;_0x5bb47e[_0x55a124(0x130)][_0x55a124(0x134)](_0x5bb47e[_0x55a124(0x20a)],0x1),_0x5bb47e[_0x55a124(0x22c)][_0x55a124(0x134)](_0x5bb47e[_0x55a124(0x20a)],0x1),_0x5bb47e[_0x55a124(0x194)][_0x55a124(0x134)](_0x5bb47e[_0x55a124(0x20a)],0x1),_0x5bb47e[_0x55a124(0x20a)]=Math[_0x55a124(0x1a6)](0x0,_0x5bb47e['activeLayer']-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0xbd2fd3){const _0x2eae92=a0_0x42c430;getCurrentFrame()[_0x2eae92(0x20a)]=parseInt(_0xbd2fd3),updateLayerUI();}let PALETTE_COLORS=[a0_0x42c430(0x1f5),a0_0x42c430(0x178),a0_0x42c430(0x1a8),a0_0x42c430(0x1e7),a0_0x42c430(0x224),'#ffffff','#ff0000',a0_0x42c430(0x192),a0_0x42c430(0x1cd),a0_0x42c430(0x163),a0_0x42c430(0x175),'#0000ff',a0_0x42c430(0x19e),a0_0x42c430(0x220),a0_0x42c430(0x138),a0_0x42c430(0x1bf),a0_0x42c430(0x196),a0_0x42c430(0x197),a0_0x42c430(0x14b),'#c0c0c0','#ff69b4'],currentAlpha=0x1;function setTool(_0x56e5ea){const _0x14315d=a0_0x42c430;currentTool=_0x56e5ea,document['querySelectorAll'](_0x14315d(0x1ee))['forEach'](_0x66a0c3=>{const _0xdb6321=_0x14315d;_0x66a0c3['classList'][_0xdb6321(0x169)](_0xdb6321(0x1ed),_0x66a0c3[_0xdb6321(0x1c2)][_0xdb6321(0x213)]===_0x56e5ea);}),document['querySelectorAll'](_0x14315d(0x1d5))[_0x14315d(0x1bd)](_0x3f703f=>{const _0x4c3420=_0x14315d;_0x3f703f[_0x4c3420(0x13a)][_0x4c3420(0x169)](_0x4c3420(0x1ed),_0x3f703f['dataset']['tool']===_0x56e5ea);});}function setPenSize(_0x228c63){const _0x201415=a0_0x42c430;penSize=parseInt(_0x228c63)||0x1;let _0x5cdb60=document[_0x201415(0x148)](_0x201415(0x172));if(_0x5cdb60)_0x5cdb60['value']=penSize;let _0x457ae6=document[_0x201415(0x148)](_0x201415(0x21c));if(_0x457ae6)_0x457ae6['value']=penSize;}function setPenMode(_0x2ba4a1){const _0x509dbe=a0_0x42c430;penMode=_0x2ba4a1;let _0x26c446=document[_0x509dbe(0x148)]('penMode');if(_0x26c446)_0x26c446[_0x509dbe(0x1d4)]=penMode;let _0x1a7093=document[_0x509dbe(0x148)](_0x509dbe(0x1e6));if(_0x1a7093)_0x1a7093[_0x509dbe(0x1d4)]=penMode;}function hexToRgba(_0x5d3cbd,_0x5b532e=0x1){const _0x97e5b9=a0_0x42c430;if(_0x5d3cbd===_0x97e5b9(0x1f5)||_0x5d3cbd==='#00000000')return[0x0,0x0,0x0,0x0];_0x5d3cbd=_0x5d3cbd['replace']('#','');if(_0x5d3cbd[_0x97e5b9(0x170)]===0x3)_0x5d3cbd=_0x5d3cbd['split']('')[_0x97e5b9(0x228)](_0x290d58=>_0x290d58+_0x290d58)[_0x97e5b9(0x212)]('');let _0x188fb4=parseInt(_0x5d3cbd,0x10);return[_0x188fb4>>0x10&0xff,_0x188fb4>>0x8&0xff,_0x188fb4&0xff,Math[_0x97e5b9(0x207)](0xff*_0x5b532e)];}function a0_0x3324(){const _0x36c1bc=['className','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>塗りつぶし</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20太さ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','\x20selected','frame-item','height','14369oLGJcv','projectCount','touchcancel','ontouchend','\x20active','#00000000','このブラウザはWebCodecsによるWEBPアニメーションに対応していません。','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','palette-alphaSlider','round','color-palette','floor','activeLayer','position','disabled','project-name','10RgYozY','GIF','stroke','jpg','join','tool','select','getBoundingClientRect','.gif','frames','main-container','#newProjCancelBtn','textContent','frame-thumb','palette-penSize','getImageData','href','#palette-penSize','#800000','sidebar-open','clearRect','body','#cccccc','パレットに色を追加','>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22','touchend','map','contains','vp8','removeEventListener','layerHistories','video/webm','onmouseup','クリックで名前を編集','このレイヤーを削除','fillStyle','resize','filter','#ff0000','button','anonymous','arc','palette-del-btn','remove','onchange','alphaValue','webp','download','shift','left','VideoEncoder','layers','focus','4089605kPDAul','abs','splice','nezumi-animation.gif','block','replaceWith','#808000','fillRect','classList','search','touchmove','GIFに変換できる画像がありません。','stopPropagation','overflow','title','flush','top','.toggle-btn','3NLMFYD','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','clientY','layerList','getElementById','ontouchmove','projects','#800080','jpeg','frameCount','lineTo','createObjectURL','コマ)','penMode','replace','querySelectorAll','querySelector','layer-thumb','project-name-edit','image/','buffer','isArray','background','>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22','constructor','min','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','pop','toString','div','.palette-color','#00ff00','toDataURL','>丸ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20透明度:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','.section-content','alphaSlider','add','toggle','#ccc','3420124ckQRUl','flex','layerCount','400176EHhJdd','layer-btn','length','appendChild','penSize','projectList','style','#00ffff','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>幅:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>高さ:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>作成</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>キャンセル</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','project-btn','#000000','createElement','nezumi-animation.apng','blur','selected','revokeObjectURL','innerWidth','#newProjW','target','#newProjOkBtn','addEventListener','configure','activeFrame','byteLength','ontouchstart','display','7Hgjskc','palette-toolbar','beginPath','menu-toggle-btn-close','WebCodecs','menu-toggle-btn','innerHTML','all','(((.+)+)+)+$','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>新しい画像のサイズ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>名前:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22画像','#ffa500','activeProject','layerRedoStacks','data','#008080','#000080','image/png','eraser','has','onload','name','onclick','#ff00ff','clientX','palette-add-btn','touches','rgba(','sidebar','下に移動','image/apng','max','trim','#444444','putImageData','layer-item','399740GnXkhc','fill','frameList','src','center','apply','square','alignItems','Enter','text','destination-out','>四角ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22','circle','input','files','1904964GEPLqS','lib/gif.worker.js','close','forEach','readAsText','#008000','DOMContentLoaded','oninput','dataset','nezumi-animation','span','finished','error','click','preventDefault','removeChild','open','strokeStyle','push','#ffff00','onmouseleave','project-item','frame-btn','undefined','上に移動','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20','value','#palette-toolbar\x20.tool-btn','drawImage','none','#newProjName','isFinite','ファイルの読み込みに失敗しました。','touchstart','ontouchcancel','2259064LogzLD','getContext','number','onblur','palette-alphaValue','#newProjH','type','canvas','colorPicker','palette-penMode','#888888','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','UPNG','onmousemove','new-project-dialog','save','active','.tool-btn','justifyContent','render','pen','touchAction','width','restore','transparent','globalCompositeOperation','onmousedown','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22'];a0_0x3324=function(){return _0x36c1bc;};return a0_0x3324();}function fillAt(_0x3a203e,_0xe233cc){const _0x5d0baa=a0_0x42c430;let _0x51691e=getCurrentProject(),_0x3fe4bc=getCurrentFrame(),_0x5659b8=_0x3fe4bc['layers'][_0x3fe4bc[_0x5d0baa(0x20a)]][_0x5d0baa(0x1de)]('2d'),_0x33b65b=_0x5659b8[_0x5d0baa(0x21d)](0x0,0x0,_0x51691e[_0x5d0baa(0x1f3)]*cellSize,_0x51691e[_0x5d0baa(0x1fd)]*cellSize),_0x4e7841=_0x3a203e*cellSize,_0xc97d0e=_0xe233cc*cellSize,_0x418164=getPixel(_0x33b65b,_0x4e7841,_0xc97d0e),_0xff599=currentColor===_0x5d0baa(0x1f5)||currentColor==='#00000000'||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x418164,_0xff599))return;let _0x2b3366=[[_0x3a203e,_0xe233cc]],_0x484eea=new Set();while(_0x2b3366[_0x5d0baa(0x170)]){let [_0x2e70db,_0x51cc74]=_0x2b3366[_0x5d0baa(0x15f)]();if(_0x2e70db<0x0||_0x51cc74<0x0||_0x2e70db>=_0x51691e[_0x5d0baa(0x1f3)]||_0x51cc74>=_0x51691e['height'])continue;let _0x168a1d=_0x2e70db+','+_0x51cc74;if(_0x484eea[_0x5d0baa(0x19a)](_0x168a1d))continue;_0x484eea[_0x5d0baa(0x168)](_0x168a1d);let _0x2a00f8=_0x2e70db*cellSize,_0x1055b3=_0x51cc74*cellSize,_0x4a91ea=getPixel(_0x33b65b,_0x2a00f8,_0x1055b3);if(!colorsMatch(_0x4a91ea,_0x418164))continue;for(let _0x373ffc=0x0;_0x373ffc<cellSize;_0x373ffc++){for(let _0xaa4d30=0x0;_0xaa4d30<cellSize;_0xaa4d30++){setPixel(_0x33b65b,_0x2a00f8+_0xaa4d30,_0x1055b3+_0x373ffc,_0xff599);}}_0x2b3366['push']([_0x2e70db+0x1,_0x51cc74]),_0x2b3366[_0x5d0baa(0x1cc)]([_0x2e70db-0x1,_0x51cc74]),_0x2b3366[_0x5d0baa(0x1cc)]([_0x2e70db,_0x51cc74+0x1]),_0x2b3366[_0x5d0baa(0x1cc)]([_0x2e70db,_0x51cc74-0x1]);}_0x5659b8[_0x5d0baa(0x1a9)](_0x33b65b,0x0,0x0),redrawAll();}function getPixel(_0x349f40,_0x365e90,_0xe53239){const _0x46a24f=a0_0x42c430;let _0x19047e=(_0xe53239*_0x349f40['width']+_0x365e90)*0x4;return[_0x349f40[_0x46a24f(0x195)][_0x19047e],_0x349f40[_0x46a24f(0x195)][_0x19047e+0x1],_0x349f40[_0x46a24f(0x195)][_0x19047e+0x2],_0x349f40['data'][_0x19047e+0x3]];}function setPixel(_0x40fce0,_0x5be28b,_0x1f209e,_0x5f0b1b){const _0x386bd5=a0_0x42c430;let _0x1e024a=(_0x1f209e*_0x40fce0[_0x386bd5(0x1f3)]+_0x5be28b)*0x4;_0x40fce0[_0x386bd5(0x195)][_0x1e024a]=_0x5f0b1b[0x0],_0x40fce0[_0x386bd5(0x195)][_0x1e024a+0x1]=_0x5f0b1b[0x1],_0x40fce0[_0x386bd5(0x195)][_0x1e024a+0x2]=_0x5f0b1b[0x2],_0x40fce0[_0x386bd5(0x195)][_0x1e024a+0x3]=_0x5f0b1b[0x3];}function colorsMatch(_0x1f8739,_0x116924){return _0x1f8739[0x0]===_0x116924[0x0]&&_0x1f8739[0x1]===_0x116924[0x1]&&_0x1f8739[0x2]===_0x116924[0x2]&&_0x1f8739[0x3]===_0x116924[0x3];}function handleMouseDown(_0x357f82){const _0x2d6b0b=a0_0x42c430;isDrawing=!![];const _0x31f8a5=canvas['getBoundingClientRect'](),_0x241310=canvas[_0x2d6b0b(0x1f3)]/_0x31f8a5[_0x2d6b0b(0x1f3)],_0x197aa0=canvas['height']/_0x31f8a5[_0x2d6b0b(0x1fd)],_0x11dc73=Math[_0x2d6b0b(0x209)]((_0x357f82[_0x2d6b0b(0x19f)]-_0x31f8a5[_0x2d6b0b(0x12e)])*_0x241310/cellSize),_0x26d2ee=Math['floor']((_0x357f82[_0x2d6b0b(0x146)]-_0x31f8a5[_0x2d6b0b(0x142)])*_0x197aa0/cellSize);currentTool===_0x2d6b0b(0x1ac)?(fillAt(_0x11dc73,_0x26d2ee),saveHistory(),isDrawing=![]):drawDotXY(_0x11dc73,_0x26d2ee);}function handleMouseMove(_0x4400e7){const _0x5b421e=a0_0x42c430;if(!isDrawing)return;const _0x30a30e=canvas[_0x5b421e(0x215)](),_0x4d43ee=canvas[_0x5b421e(0x1f3)]/_0x30a30e[_0x5b421e(0x1f3)],_0x47f120=canvas['height']/_0x30a30e[_0x5b421e(0x1fd)],_0x4c0bd8=Math[_0x5b421e(0x209)]((_0x4400e7['clientX']-_0x30a30e[_0x5b421e(0x12e)])*_0x4d43ee/cellSize),_0x7ef2d7=Math[_0x5b421e(0x209)]((_0x4400e7['clientY']-_0x30a30e[_0x5b421e(0x142)])*_0x47f120/cellSize);drawDotXY(_0x4c0bd8,_0x7ef2d7);}function handleMouseUp(_0x2a02ce){isDrawing&&saveHistory(),isDrawing=![];}let lastTouch=null;function getTouchPos(_0x104fb8){const _0xf94094=a0_0x42c430,_0x420c12=canvas[_0xf94094(0x215)]();let _0x5304b7=_0x104fb8[_0xf94094(0x1a1)]&&_0x104fb8[_0xf94094(0x1a1)][0x0]?_0x104fb8[_0xf94094(0x1a1)][0x0]:_0x104fb8['changedTouches'][0x0];const _0x460df7=canvas[_0xf94094(0x1f3)]/_0x420c12['width'],_0x4b1757=canvas[_0xf94094(0x1fd)]/_0x420c12[_0xf94094(0x1fd)];return{'x':Math[_0xf94094(0x209)]((_0x5304b7[_0xf94094(0x19f)]-_0x420c12[_0xf94094(0x12e)])*_0x460df7/cellSize),'y':Math['floor']((_0x5304b7['clientY']-_0x420c12[_0xf94094(0x142)])*_0x4b1757/cellSize)};}function handleTouchStart(_0x1b296c){const _0x5dd91e=a0_0x42c430;if(_0x1b296c[_0x5dd91e(0x1a1)]['length']>0x1)return;_0x1b296c[_0x5dd91e(0x1c8)](),isDrawing=!![];let _0x388e3b=getTouchPos(_0x1b296c);lastTouch=_0x388e3b,currentTool===_0x5dd91e(0x1ac)?(fillAt(_0x388e3b['x'],_0x388e3b['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x388e3b['x'],_0x388e3b['y']);}function handleTouchMove(_0x3d28da){const _0x450bc1=a0_0x42c430;if(!isDrawing)return;if(_0x3d28da['touches'][_0x450bc1(0x170)]>0x1)return;_0x3d28da[_0x450bc1(0x1c8)]();let _0x4a77f4=getTouchPos(_0x3d28da);if(lastTouch){let _0x56dfee=_0x4a77f4['x']-lastTouch['x'],_0x39cd72=_0x4a77f4['y']-lastTouch['y'],_0x685ad1=Math[_0x450bc1(0x1a6)](Math[_0x450bc1(0x133)](_0x56dfee),Math[_0x450bc1(0x133)](_0x39cd72));for(let _0x3c0a3b=0x1;_0x3c0a3b<=_0x685ad1;_0x3c0a3b++){let _0x38bc71=Math[_0x450bc1(0x207)](lastTouch['x']+_0x56dfee*_0x3c0a3b/_0x685ad1),_0x1ef4e2=Math[_0x450bc1(0x207)](lastTouch['y']+_0x39cd72*_0x3c0a3b/_0x685ad1);drawDotTouch(_0x38bc71,_0x1ef4e2);}}else drawDotTouch(_0x4a77f4['x'],_0x4a77f4['y']);lastTouch=_0x4a77f4;}function handleTouchEnd(_0x174d51){isDrawing&&saveHistory(),isDrawing=![],lastTouch=null;}function drawDotXY(_0x32213f,_0x1aec36){const _0x42e161=a0_0x42c430;let _0x5319c0=getCurrentProject(),_0x3318d2=getCurrentFrame();if(!_0x3318d2||!_0x5319c0)return;if(typeof _0x32213f!==_0x42e161(0x1df)||typeof _0x1aec36!=='number'||_0x32213f<0x0||_0x1aec36<0x0||!Number[_0x42e161(0x1d9)](_0x5319c0['width'])||!Number[_0x42e161(0x1d9)](_0x5319c0[_0x42e161(0x1fd)])||_0x32213f>=_0x5319c0['width']||_0x1aec36>=_0x5319c0['height']||!Array[_0x42e161(0x159)](_0x3318d2['layers'])||typeof _0x3318d2[_0x42e161(0x20a)]!=='number'||!_0x3318d2[_0x42e161(0x130)][_0x3318d2['activeLayer']])return;let _0x41ea51=_0x3318d2[_0x42e161(0x130)][_0x3318d2[_0x42e161(0x20a)]][_0x42e161(0x1de)]('2d');if(!_0x41ea51)return;if(currentTool==='eraser'||currentColor===_0x42e161(0x1f5)||currentColor===_0x42e161(0x203)||currentAlpha===0x0)drawPenShape(_0x41ea51,_0x32213f,_0x1aec36,_0x42e161(0x203),!![]);else{let _0x3d74ba=hexToRgba(currentColor,currentAlpha);_0x41ea51['save'](),_0x41ea51['globalAlpha']=_0x3d74ba[0x3]/0xff,drawPenShape(_0x41ea51,_0x32213f,_0x1aec36,_0x42e161(0x1a2)+_0x3d74ba[0x0]+','+_0x3d74ba[0x1]+','+_0x3d74ba[0x2]+','+_0x3d74ba[0x3]/0xff+')',![]),_0x41ea51[_0x42e161(0x1f4)]();}redrawAll();}function drawPenShape(_0x49fc72,_0x24a727,_0x2724ea,_0x4efe14,_0x1e5d10){const _0x2c093c=a0_0x42c430,_0x19d9f8=_0x24a727*cellSize,_0x14d284=_0x2724ea*cellSize,_0x5d6863=penSize*cellSize;_0x1e5d10?(_0x49fc72[_0x2c093c(0x1ec)](),_0x49fc72[_0x2c093c(0x1f6)]=_0x2c093c(0x1b5),penMode===_0x2c093c(0x1b7)?(_0x49fc72[_0x2c093c(0x18a)](),_0x49fc72[_0x2c093c(0x126)](_0x19d9f8+cellSize/0x2,_0x14d284+cellSize/0x2,_0x5d6863/0x2,0x0,Math['PI']*0x2),_0x49fc72[_0x2c093c(0x1ac)]()):_0x49fc72['clearRect'](_0x19d9f8-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x14d284-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x5d6863,_0x5d6863),_0x49fc72[_0x2c093c(0x1f4)]()):(_0x49fc72['save'](),_0x49fc72[_0x2c093c(0x231)]=_0x4efe14,penMode===_0x2c093c(0x1b7)?(_0x49fc72[_0x2c093c(0x18a)](),_0x49fc72[_0x2c093c(0x126)](_0x19d9f8+cellSize/0x2,_0x14d284+cellSize/0x2,_0x5d6863/0x2,0x0,Math['PI']*0x2),_0x49fc72[_0x2c093c(0x1ac)]()):_0x49fc72[_0x2c093c(0x139)](_0x19d9f8-Math[_0x2c093c(0x209)]((penSize-0x1)/0x2)*cellSize,_0x14d284-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x5d6863,_0x5d6863),_0x49fc72['restore']());}function drawDotTouch(_0x4dd4b7,_0x173e3c){const _0x5f5535=a0_0x42c430;let _0x475bc7=getCurrentProject(),_0x2c6a55=getCurrentFrame();if(_0x4dd4b7<0x0||_0x173e3c<0x0||_0x4dd4b7>=_0x475bc7['width']||_0x173e3c>=_0x475bc7[_0x5f5535(0x1fd)])return;let _0x744d60=_0x2c6a55[_0x5f5535(0x130)][_0x2c6a55[_0x5f5535(0x20a)]][_0x5f5535(0x1de)]('2d');if(currentTool===_0x5f5535(0x199)||currentColor===_0x5f5535(0x1f5)||currentColor==='#00000000'||currentAlpha===0x0)drawPenShape(_0x744d60,_0x4dd4b7,_0x173e3c,_0x5f5535(0x203),!![]);else{let _0x1d10e1=hexToRgba(currentColor,currentAlpha);_0x744d60[_0x5f5535(0x1ec)](),_0x744d60['globalAlpha']=_0x1d10e1[0x3]/0xff,drawPenShape(_0x744d60,_0x4dd4b7,_0x173e3c,_0x5f5535(0x1a2)+_0x1d10e1[0x0]+','+_0x1d10e1[0x1]+','+_0x1d10e1[0x2]+','+_0x1d10e1[0x3]/0xff+')',![]),_0x744d60['restore']();}redrawAll();}window[a0_0x42c430(0x19b)]=()=>{const _0x2c0654=a0_0x42c430;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x2c0654(0x1f1)),createPalette(),document[_0x2c0654(0x148)](_0x2c0654(0x172))[_0x2c0654(0x1d4)]=penSize,document['getElementById'](_0x2c0654(0x151))['value']=penMode,canvas[_0x2c0654(0x1ea)]=handleMouseMove,canvas[_0x2c0654(0x22e)]=handleMouseUp,canvas[_0x2c0654(0x1ce)]=handleMouseUp,canvas[_0x2c0654(0x186)]=handleTouchStart,canvas[_0x2c0654(0x149)]=handleTouchMove,canvas[_0x2c0654(0x201)]=handleTouchEnd,canvas[_0x2c0654(0x1dc)]=handleTouchEnd,canvas['addEventListener']('touchstart',handleTouchStart,{'passive':![]}),canvas[_0x2c0654(0x182)](_0x2c0654(0x13c),handleTouchMove,{'passive':![]}),canvas[_0x2c0654(0x182)](_0x2c0654(0x227),handleTouchEnd,{'passive':![]}),canvas[_0x2c0654(0x182)](_0x2c0654(0x200),handleTouchEnd,{'passive':![]});};function drawGrid(_0x5a1dbd,_0x153e6f){const _0x4f9c9c=a0_0x42c430;ctx[_0x4f9c9c(0x1ec)](),ctx[_0x4f9c9c(0x1cb)]=_0x4f9c9c(0x16a);for(let _0x58e0d8=0x0;_0x58e0d8<=_0x5a1dbd;_0x58e0d8++){ctx['beginPath'](),ctx['moveTo'](_0x58e0d8*cellSize,0x0),ctx[_0x4f9c9c(0x14e)](_0x58e0d8*cellSize,_0x153e6f*cellSize),ctx[_0x4f9c9c(0x210)]();}for(let _0x4104c3=0x0;_0x4104c3<=_0x153e6f;_0x4104c3++){ctx[_0x4f9c9c(0x18a)](),ctx['moveTo'](0x0,_0x4104c3*cellSize),ctx['lineTo'](_0x5a1dbd*cellSize,_0x4104c3*cellSize),ctx['stroke']();}ctx['restore']();}function redrawAll(){const _0x20168c=a0_0x42c430;let _0x438a80=getCurrentProject(),_0x14e188=getCurrentFrame();canvas[_0x20168c(0x1f3)]=_0x438a80[_0x20168c(0x1f3)]*cellSize,canvas['height']=_0x438a80[_0x20168c(0x1fd)]*cellSize,ctx[_0x20168c(0x222)](0x0,0x0,canvas[_0x20168c(0x1f3)],canvas[_0x20168c(0x1fd)]);for(let _0x321738=0x0;_0x321738<_0x14e188[_0x20168c(0x130)][_0x20168c(0x170)];_0x321738++){ctx[_0x20168c(0x1d6)](_0x14e188['layers'][_0x321738],0x0,0x0);}drawGrid(_0x438a80[_0x20168c(0x1f3)],_0x438a80['height']);}function saveHistory(){const _0x1d2ac0=a0_0x42c430;let _0x1979f2=getCurrentFrame(),_0x19656b=_0x1979f2['layerHistories'][_0x1979f2['activeLayer']];_0x19656b[_0x1d2ac0(0x1cc)](_0x1979f2[_0x1d2ac0(0x130)][_0x1979f2[_0x1d2ac0(0x20a)]][_0x1d2ac0(0x164)]());if(_0x19656b[_0x1d2ac0(0x170)]>0x32)_0x19656b[_0x1d2ac0(0x12d)]();_0x1979f2['layerRedoStacks'][_0x1979f2[_0x1d2ac0(0x20a)]]=[];}function undo(){const _0x4c099b=a0_0x42c430;let _0x597a1d=getCurrentFrame(),_0x4abcf4=_0x597a1d['layerHistories'][_0x597a1d[_0x4c099b(0x20a)]],_0x36819d=_0x597a1d[_0x4c099b(0x194)][_0x597a1d[_0x4c099b(0x20a)]];if(!_0x4abcf4||_0x4abcf4[_0x4c099b(0x170)]<0x2)return;_0x36819d[_0x4c099b(0x1cc)](_0x4abcf4[_0x4c099b(0x15f)]());let _0x3ee18d=new Image();_0x3ee18d['onload']=()=>{const _0x1ae3a3=_0x4c099b;let _0x1b6ade=_0x597a1d[_0x1ae3a3(0x130)][_0x597a1d[_0x1ae3a3(0x20a)]]['getContext']('2d');_0x1b6ade['clearRect'](0x0,0x0,_0x597a1d[_0x1ae3a3(0x130)][_0x597a1d[_0x1ae3a3(0x20a)]]['width'],_0x597a1d[_0x1ae3a3(0x130)][_0x597a1d[_0x1ae3a3(0x20a)]][_0x1ae3a3(0x1fd)]),_0x1b6ade['drawImage'](_0x3ee18d,0x0,0x0),redrawAll();},_0x3ee18d[_0x4c099b(0x1ae)]=_0x4abcf4[_0x4abcf4['length']-0x1];}function redo(){const _0x101f9a=a0_0x42c430;let _0x339499=getCurrentFrame(),_0x2bcd00=_0x339499[_0x101f9a(0x22c)][_0x339499['activeLayer']],_0x2a6a8b=_0x339499[_0x101f9a(0x194)][_0x339499['activeLayer']];if(!_0x2a6a8b||_0x2a6a8b['length']===0x0)return;let _0x535261=_0x2a6a8b[_0x101f9a(0x15f)]();_0x2bcd00['push'](_0x535261);let _0x2c6b0=new Image();_0x2c6b0[_0x101f9a(0x19b)]=()=>{const _0x41e49d=_0x101f9a;let _0x275eee=_0x339499['layers'][_0x339499[_0x41e49d(0x20a)]]['getContext']('2d');_0x275eee['clearRect'](0x0,0x0,_0x339499[_0x41e49d(0x130)][_0x339499['activeLayer']][_0x41e49d(0x1f3)],_0x339499[_0x41e49d(0x130)][_0x339499['activeLayer']][_0x41e49d(0x1fd)]),_0x275eee[_0x41e49d(0x1d6)](_0x2c6b0,0x0,0x0),redrawAll();},_0x2c6b0['src']=_0x535261;}function exportImage(_0x144f14){const _0x450faa=a0_0x42c430;let _0x3616c6=getCurrentProject(),_0x4c7d4b=_0x3616c6[_0x450faa(0x217)],_0x248abc=_0x144f14===_0x450faa(0x211)||_0x144f14===_0x450faa(0x14c)?'image/jpeg':_0x450faa(0x157)+_0x144f14,_0xfd8291=_0x4c7d4b['length']>0x1,_0x4f81a9=(_0x3616c6[_0x450faa(0x19c)]||'nezumi-drawing')[_0x450faa(0x152)](/[\\/:*?"<>|]/g,'_');if(!_0xfd8291){let _0x287732=document[_0x450faa(0x179)]('canvas');_0x287732[_0x450faa(0x1f3)]=_0x3616c6[_0x450faa(0x1f3)]*cellSize,_0x287732[_0x450faa(0x1fd)]=_0x3616c6['height']*cellSize;let _0x2415bd=_0x287732[_0x450faa(0x1de)]('2d'),_0xb5d2db=getCurrentFrame();for(let _0x32a34d=0x0;_0x32a34d<_0xb5d2db[_0x450faa(0x130)][_0x450faa(0x170)];_0x32a34d++){_0x2415bd[_0x450faa(0x1d6)](_0xb5d2db[_0x450faa(0x130)][_0x32a34d],0x0,0x0);}let _0xd11ba8=document['createElement']('a');_0xd11ba8['download']=_0x4f81a9+'.'+_0x144f14,_0x144f14===_0x450faa(0x211)||_0x144f14===_0x450faa(0x14c)?_0xd11ba8['href']=_0x287732[_0x450faa(0x164)](_0x248abc,0.92):_0xd11ba8[_0x450faa(0x21e)]=_0x287732[_0x450faa(0x164)](_0x248abc),_0xd11ba8[_0x450faa(0x1c7)]();}else{if(_0x144f14===_0x450faa(0x12b)&&typeof window[_0x450faa(0x18c)]!==_0x450faa(0x1d1))exportWebpAnimation(_0x4c7d4b,_0x3616c6[_0x450faa(0x1f3)]*cellSize,_0x3616c6[_0x450faa(0x1fd)]*cellSize,_0x4f81a9);else for(let _0x2fe3bc=0x0;_0x2fe3bc<_0x4c7d4b[_0x450faa(0x170)];_0x2fe3bc++){let _0x550de4=document[_0x450faa(0x179)](_0x450faa(0x1e4));_0x550de4[_0x450faa(0x1f3)]=_0x3616c6[_0x450faa(0x1f3)]*cellSize,_0x550de4[_0x450faa(0x1fd)]=_0x3616c6[_0x450faa(0x1fd)]*cellSize;let _0xe71275=_0x550de4[_0x450faa(0x1de)]('2d'),_0x15d75c=_0x4c7d4b[_0x2fe3bc];for(let _0x33cfd1=0x0;_0x33cfd1<_0x15d75c[_0x450faa(0x130)][_0x450faa(0x170)];_0x33cfd1++){_0xe71275[_0x450faa(0x1d6)](_0x15d75c['layers'][_0x33cfd1],0x0,0x0);}let _0x4ebb7b=document['createElement']('a');_0x4ebb7b['download']=_0x4f81a9+'-f'+(_0x2fe3bc+0x1)+'.'+_0x144f14,_0x144f14===_0x450faa(0x211)||_0x144f14===_0x450faa(0x14c)?_0x4ebb7b[_0x450faa(0x21e)]=_0x550de4[_0x450faa(0x164)](_0x248abc,0.92):_0x4ebb7b[_0x450faa(0x21e)]=_0x550de4[_0x450faa(0x164)](_0x248abc),setTimeout(()=>_0x4ebb7b['click'](),_0x2fe3bc*0x64);}}}async function exportWebpAnimation(_0x525bad,_0x5e167a,_0x328791,_0x30de6f=a0_0x42c430(0x1c3)){const _0x2d3757=a0_0x42c430;if(!window[_0x2d3757(0x18c)]||!window[_0x2d3757(0x12f)]){alert(_0x2d3757(0x204));return;}const _0x41a5b8=[],_0x38e1e9=new VideoEncoder({'output':_0x203f31=>_0x41a5b8[_0x2d3757(0x1cc)](_0x203f31),'error':_0x599be7=>console[_0x2d3757(0x1c6)](_0x599be7)});_0x38e1e9[_0x2d3757(0x183)]({'codec':_0x2d3757(0x22a),'width':_0x5e167a,'height':_0x328791,'framerate':0x5});for(let _0x54ae5d=0x0;_0x54ae5d<_0x525bad['length'];_0x54ae5d++){let _0xc90ebf=document[_0x2d3757(0x179)](_0x2d3757(0x1e4));_0xc90ebf[_0x2d3757(0x1f3)]=_0x5e167a,_0xc90ebf[_0x2d3757(0x1fd)]=_0x328791;let _0x4e940d=_0xc90ebf[_0x2d3757(0x1de)]('2d'),_0x45b907=_0x525bad[_0x54ae5d];for(let _0x951d52=0x0;_0x951d52<_0x45b907[_0x2d3757(0x130)]['length'];_0x951d52++){_0x4e940d[_0x2d3757(0x1d6)](_0x45b907[_0x2d3757(0x130)][_0x951d52],0x0,0x0);}let _0x38f915=await createImageBitmap(_0xc90ebf);_0x38e1e9['encode'](_0x38f915,{'keyFrame':!![],'duration':0xc8}),_0x38f915[_0x2d3757(0x1bc)]();}await _0x38e1e9[_0x2d3757(0x141)](),_0x38e1e9[_0x2d3757(0x1bc)]();const _0x26749f=new Blob(_0x41a5b8['map'](_0x454cb9=>_0x454cb9[_0x2d3757(0x185)]?_0x454cb9:_0x454cb9[_0x2d3757(0x195)]),{'type':_0x2d3757(0x22d)}),_0x7b630b=document[_0x2d3757(0x179)]('a');_0x7b630b['download']=_0x30de6f+'.webm',_0x7b630b['href']=URL['createObjectURL'](_0x26749f),_0x7b630b[_0x2d3757(0x1c7)]();}function exportGif(){const _0x277396=a0_0x42c430;let _0x3068a3=getCurrentProject(),_0x2421a6=_0x3068a3[_0x277396(0x217)],_0x3d0e4a=_0x3068a3[_0x277396(0x1f3)]*cellSize,_0x467eb6=_0x3068a3[_0x277396(0x1fd)]*cellSize;const _0xaeac9=_0x2421a6[_0x277396(0x228)](_0x2a2277=>{const _0x1062a8=_0x277396;let _0xa64a18=document['createElement'](_0x1062a8(0x1e4));_0xa64a18['width']=_0x3d0e4a,_0xa64a18['height']=_0x467eb6;let _0x156471=_0xa64a18[_0x1062a8(0x1de)]('2d');for(let _0x5785f2=0x0;_0x5785f2<_0x2a2277[_0x1062a8(0x130)][_0x1062a8(0x170)];_0x5785f2++){_0x156471[_0x1062a8(0x1d6)](_0x2a2277[_0x1062a8(0x130)][_0x5785f2],0x0,0x0);}return _0xa64a18[_0x1062a8(0x164)](_0x1062a8(0x198));});Promise['all'](_0xaeac9['map'](_0x4f6aae=>{return new Promise(_0x1c7d4c=>{const _0x604984=a0_0x5dd2,_0x231d4c=new Image();_0x231d4c[_0x604984(0x1ae)]=_0x4f6aae,_0x231d4c['onload']=()=>_0x1c7d4c(_0x231d4c);});}))['then'](_0xb604c3=>{const _0x214561=_0x277396,_0x1efc5b=_0xb604c3[_0x214561(0x122)](_0x26f457=>_0x26f457[_0x214561(0x1f3)]>0x0&&_0x26f457[_0x214561(0x1fd)]>0x0);if(_0x1efc5b[_0x214561(0x170)]===0x0){alert(_0x214561(0x13d));return;}const _0x41d3b9=(_0x3068a3[_0x214561(0x19c)]||_0x214561(0x1c3))[_0x214561(0x152)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x1efc5b,0x12c,_0x41d3b9+_0x214561(0x216));});}function exportApng(){const _0xeb0fb9=a0_0x42c430;let _0x13c7e0=getCurrentProject(),_0x10bd39=_0x13c7e0[_0xeb0fb9(0x217)],_0x22fe84=_0x13c7e0[_0xeb0fb9(0x1f3)]*cellSize,_0x332e95=_0x13c7e0[_0xeb0fb9(0x1fd)]*cellSize;const _0x5207f2=_0x10bd39['map'](_0x18a906=>{const _0x5f4c30=_0xeb0fb9;let _0x5562b2=document[_0x5f4c30(0x179)]('canvas');_0x5562b2[_0x5f4c30(0x1f3)]=_0x22fe84,_0x5562b2[_0x5f4c30(0x1fd)]=_0x332e95;let _0x393aac=_0x5562b2['getContext']('2d');for(let _0x46f229=0x0;_0x46f229<_0x18a906[_0x5f4c30(0x130)][_0x5f4c30(0x170)];_0x46f229++){_0x393aac[_0x5f4c30(0x1d6)](_0x18a906['layers'][_0x46f229],0x0,0x0);}let _0x2bc75f=new Image();return _0x2bc75f[_0x5f4c30(0x1ae)]=_0x5562b2[_0x5f4c30(0x164)](_0x5f4c30(0x198)),_0x2bc75f;}),_0x30536b=(_0x13c7e0[_0xeb0fb9(0x19c)]||'nezumi-animation')['replace'](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x5207f2,_0x22fe84,_0x332e95,0x12c,_0x30536b+'.apng');}function saveProjectFile(){const _0x14e4de=a0_0x42c430,_0x134c9a={'projects':projects['map'](_0x30a8d2=>({'width':_0x30a8d2['width'],'height':_0x30a8d2['height'],'name':_0x30a8d2[_0x14e4de(0x19c)]||'','activeFrame':_0x30a8d2['activeFrame'],'frames':_0x30a8d2[_0x14e4de(0x217)][_0x14e4de(0x228)](_0x5846aa=>({'activeLayer':_0x5846aa[_0x14e4de(0x20a)],'layers':_0x5846aa['layers'][_0x14e4de(0x228)](_0x142f99=>_0x142f99[_0x14e4de(0x164)]())}))})),'activeProject':activeProject},_0x5f2778=new Blob([JSON['stringify'](_0x134c9a)],{'type':'application/json'}),_0x31556b=document[_0x14e4de(0x179)]('a');_0x31556b[_0x14e4de(0x12c)]='nezumi-sketch.msketch',_0x31556b['href']=URL['createObjectURL'](_0x5f2778),_0x31556b['click']();}function loadProjectFile(_0xc918d3){const _0x85efc0=a0_0x42c430,_0x49db05=_0xc918d3['target'][_0x85efc0(0x1b9)][0x0];if(!_0x49db05)return;const _0x5835c6=new FileReader();_0x5835c6[_0x85efc0(0x19b)]=function(_0x30027d){const _0x5f46d8=_0x85efc0;try{const _0x3dcad7=JSON['parse'](_0x30027d[_0x5f46d8(0x180)]['result']);projects=_0x3dcad7[_0x5f46d8(0x14a)]['map']((_0x3e189c,_0x43af8d)=>{const _0x296b8d=_0x5f46d8;let _0x487067=createProject(_0x3e189c['width'],_0x3e189c['height'],_0x3e189c['name']||'画像'+(_0x43af8d+0x1));return _0x487067[_0x296b8d(0x217)]=_0x3e189c[_0x296b8d(0x217)][_0x296b8d(0x228)](_0x51c647=>{const _0x1f6df6=_0x296b8d;let _0x1b385a={'layers':[],'activeLayer':_0x51c647['activeLayer'],'layerHistories':[],'layerRedoStacks':[]};for(let _0x4be110=0x0;_0x4be110<_0x51c647[_0x1f6df6(0x130)][_0x1f6df6(0x170)];_0x4be110++){let _0xc2a894=new Image();_0xc2a894['src']=_0x51c647['layers'][_0x4be110];let _0x4eec47=document[_0x1f6df6(0x179)]('canvas');_0x4eec47['width']=_0x3e189c[_0x1f6df6(0x1f3)]*cellSize,_0x4eec47[_0x1f6df6(0x1fd)]=_0x3e189c[_0x1f6df6(0x1fd)]*cellSize,_0xc2a894[_0x1f6df6(0x19b)]=()=>{const _0xbdf912=_0x1f6df6;let _0x5e8eb6=_0x4eec47[_0xbdf912(0x1de)]('2d');_0x5e8eb6[_0xbdf912(0x222)](0x0,0x0,_0x4eec47['width'],_0x4eec47['height']),_0x5e8eb6[_0xbdf912(0x1d6)](_0xc2a894,0x0,0x0);},_0xc2a894[_0x1f6df6(0x19b)](),_0x1b385a[_0x1f6df6(0x130)][_0x1f6df6(0x1cc)](_0x4eec47),_0x1b385a[_0x1f6df6(0x22c)]['push']([]),_0x1b385a['layerRedoStacks']['push']([]);}return _0x1b385a;}),_0x487067['activeFrame']=_0x3e189c[_0x296b8d(0x184)],_0x487067[_0x296b8d(0x19c)]=_0x3e189c[_0x296b8d(0x19c)]||'画像'+(_0x43af8d+0x1),_0x487067;}),activeProject=_0x3dcad7[_0x5f46d8(0x193)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x12bb5c){alert(_0x5f46d8(0x1da));}},_0x5835c6[_0x85efc0(0x1be)](_0x49db05);}window['onload']=()=>{const _0x5f3466=a0_0x42c430;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool('pen'),createPalette(),document['getElementById'](_0x5f3466(0x172))[_0x5f3466(0x1d4)]=penSize,document[_0x5f3466(0x148)](_0x5f3466(0x151))[_0x5f3466(0x1d4)]=penMode,canvas[_0x5f3466(0x1ea)]=handleMouseMove,canvas[_0x5f3466(0x22e)]=handleMouseUp,canvas[_0x5f3466(0x1ce)]=handleMouseUp,canvas[_0x5f3466(0x186)]=handleTouchStart,canvas[_0x5f3466(0x149)]=handleTouchMove,canvas[_0x5f3466(0x201)]=handleTouchEnd,canvas[_0x5f3466(0x1dc)]=handleTouchEnd,canvas[_0x5f3466(0x182)](_0x5f3466(0x1db),handleTouchStart,{'passive':![]}),canvas['addEventListener'](_0x5f3466(0x13c),handleTouchMove,{'passive':![]}),canvas[_0x5f3466(0x182)](_0x5f3466(0x227),handleTouchEnd,{'passive':![]}),canvas[_0x5f3466(0x182)](_0x5f3466(0x200),handleTouchEnd,{'passive':![]});};function initCanvas(){const _0x2e04d0=a0_0x42c430,_0x212f62=parseInt(0x10),_0x1d7915=parseInt(0x10);let _0x3de0eb=getCurrentProject();_0x3de0eb[_0x2e04d0(0x1f3)]=_0x212f62,_0x3de0eb[_0x2e04d0(0x1fd)]=_0x1d7915,canvas[_0x2e04d0(0x1f3)]=_0x212f62*cellSize,canvas['height']=_0x1d7915*cellSize,_0x3de0eb[_0x2e04d0(0x130)]=[],_0x3de0eb[_0x2e04d0(0x22c)]=[],_0x3de0eb[_0x2e04d0(0x194)]=[];let _0x3efddf=document['createElement']('canvas');_0x3efddf[_0x2e04d0(0x1f3)]=_0x212f62*cellSize,_0x3efddf[_0x2e04d0(0x1fd)]=_0x1d7915*cellSize,_0x3de0eb[_0x2e04d0(0x130)][_0x2e04d0(0x1cc)](_0x3efddf),_0x3de0eb[_0x2e04d0(0x22c)][_0x2e04d0(0x1cc)]([]),_0x3de0eb[_0x2e04d0(0x194)][_0x2e04d0(0x1cc)]([]),_0x3de0eb['activeLayer']=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x2e04d0(0x1f7)]=null,canvas['onmousemove']=null,canvas[_0x2e04d0(0x22e)]=null,canvas['onmouseleave']=null,canvas[_0x2e04d0(0x186)]=null,canvas['ontouchmove']=null,canvas[_0x2e04d0(0x201)]=null,canvas['ontouchcancel']=null,canvas['removeEventListener'](_0x2e04d0(0x1db),handleTouchStart),canvas['removeEventListener']('touchmove',handleTouchMove),canvas[_0x2e04d0(0x22b)](_0x2e04d0(0x227),handleTouchEnd),canvas[_0x2e04d0(0x22b)](_0x2e04d0(0x200),handleTouchEnd),canvas[_0x2e04d0(0x1f7)]=handleMouseDown,canvas[_0x2e04d0(0x1ea)]=handleMouseMove,canvas[_0x2e04d0(0x22e)]=handleMouseUp,canvas['onmouseleave']=handleMouseUp,canvas[_0x2e04d0(0x186)]=handleTouchStart,canvas[_0x2e04d0(0x149)]=handleTouchMove,canvas[_0x2e04d0(0x201)]=handleTouchEnd,canvas[_0x2e04d0(0x1dc)]=handleTouchEnd,canvas[_0x2e04d0(0x182)](_0x2e04d0(0x1db),handleTouchStart,{'passive':![]}),canvas[_0x2e04d0(0x182)](_0x2e04d0(0x13c),handleTouchMove,{'passive':![]}),canvas[_0x2e04d0(0x182)](_0x2e04d0(0x227),handleTouchEnd,{'passive':![]}),canvas['addEventListener'](_0x2e04d0(0x200),handleTouchEnd,{'passive':![]});}function a0_0x5dd2(_0xc121cd,_0x589573){const _0x1a70ea=a0_0x3324();return a0_0x5dd2=function(_0x132e3f,_0x37cd35){_0x132e3f=_0x132e3f-0x121;let _0x332433=_0x1a70ea[_0x132e3f];return _0x332433;},a0_0x5dd2(_0xc121cd,_0x589573);}function createPalette(){const _0x1a72b7=a0_0x42c430,_0x265185=document[_0x1a72b7(0x148)](_0x1a72b7(0x208));if(!_0x265185)return;_0x265185[_0x1a72b7(0x18e)]='',PALETTE_COLORS[_0x1a72b7(0x1bd)]((_0x19c636,_0x5cb1f7)=>{const _0x311352=_0x1a72b7,_0x4dd1d=document[_0x311352(0x179)](_0x311352(0x124));_0x4dd1d[_0x311352(0x1f9)]='palette-color';_0x19c636===_0x311352(0x1f5)||_0x19c636===_0x311352(0x203)?(_0x4dd1d[_0x311352(0x174)][_0x311352(0x15a)]=_0x311352(0x15e),_0x4dd1d[_0x311352(0x140)]='透明',_0x4dd1d[_0x311352(0x18e)]='<span\x20style=\x22font-size:13px;color:#888;\x22>透明</span>'):(_0x4dd1d[_0x311352(0x174)][_0x311352(0x15a)]=_0x19c636,_0x4dd1d['title']=_0x19c636);_0x4dd1d[_0x311352(0x19d)]=()=>{const _0x2da67e=_0x311352;currentColor=_0x19c636,_0x19c636===_0x2da67e(0x1f5)||_0x19c636===_0x2da67e(0x203)?document[_0x2da67e(0x148)](_0x2da67e(0x1e5))[_0x2da67e(0x1d4)]='#000000':document[_0x2da67e(0x148)](_0x2da67e(0x1e5))['value']=_0x19c636,document[_0x2da67e(0x153)](_0x2da67e(0x162))['forEach'](_0x112ab7=>_0x112ab7[_0x2da67e(0x13a)][_0x2da67e(0x128)](_0x2da67e(0x17c))),_0x4dd1d[_0x2da67e(0x13a)][_0x2da67e(0x168)](_0x2da67e(0x17c));};if(_0x5cb1f7!==0x0){const _0x4c8dea=document['createElement'](_0x311352(0x1c4));_0x4c8dea['textContent']='×',_0x4c8dea[_0x311352(0x1f9)]=_0x311352(0x127),_0x4c8dea[_0x311352(0x140)]='この色をパレットから削除',_0x4c8dea[_0x311352(0x19d)]=_0x1d6591=>{const _0x333ff1=_0x311352;_0x1d6591['stopPropagation'](),PALETTE_COLORS[_0x333ff1(0x170)]>0x2&&(PALETTE_COLORS[_0x333ff1(0x134)](_0x5cb1f7,0x1),createPalette());},_0x4dd1d['appendChild'](_0x4c8dea);}_0x265185[_0x311352(0x171)](_0x4dd1d);});const _0x97f1b8=document[_0x1a72b7(0x179)]('button');_0x97f1b8[_0x1a72b7(0x1f9)]=_0x1a72b7(0x1a0),_0x97f1b8[_0x1a72b7(0x140)]=_0x1a72b7(0x225),_0x97f1b8['innerHTML']='+',_0x97f1b8[_0x1a72b7(0x19d)]=_0x34dd53=>{const _0x3861c7=_0x1a72b7;_0x34dd53[_0x3861c7(0x13e)]();const _0x44dd07=document[_0x3861c7(0x179)](_0x3861c7(0x1b8));_0x44dd07[_0x3861c7(0x1e3)]='color',_0x44dd07[_0x3861c7(0x174)][_0x3861c7(0x187)]=_0x3861c7(0x1d7);let _0x29b480=![];_0x44dd07[_0x3861c7(0x1c1)]=_0x4961be=>{const _0x117bf0=_0x3861c7;!_0x29b480&&(PALETTE_COLORS[_0x117bf0(0x1cc)](_0x4961be[_0x117bf0(0x180)]['value']),createPalette(),_0x29b480=!![],_0x44dd07['remove']());},_0x44dd07[_0x3861c7(0x182)](_0x3861c7(0x17b),()=>{const _0x487603=_0x3861c7;if(!_0x29b480)_0x44dd07[_0x487603(0x128)]();}),_0x44dd07[_0x3861c7(0x182)](_0x3861c7(0x1c7),_0x58d0b3=>_0x58d0b3[_0x3861c7(0x13e)]()),document[_0x3861c7(0x223)][_0x3861c7(0x171)](_0x44dd07),_0x44dd07[_0x3861c7(0x131)](),_0x44dd07[_0x3861c7(0x1c7)]();},_0x265185['appendChild'](_0x97f1b8);let _0x4fa83f=document['getElementById'](_0x1a72b7(0x189));!_0x4fa83f&&(_0x4fa83f=document[_0x1a72b7(0x179)](_0x1a72b7(0x161)),_0x4fa83f['id']=_0x1a72b7(0x189),_0x4fa83f[_0x1a72b7(0x1f9)]=_0x1a72b7(0x189),_0x265185['parentNode'][_0x1a72b7(0x171)](_0x4fa83f)),_0x4fa83f[_0x1a72b7(0x18e)]=_0x1a72b7(0x1e8)+(currentTool===_0x1a72b7(0x1f1)?_0x1a72b7(0x202):'')+'\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>ペン</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn'+(currentTool===_0x1a72b7(0x199)?_0x1a72b7(0x202):'')+'\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>消しゴム</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn'+(currentTool===_0x1a72b7(0x1ac)?_0x1a72b7(0x202):'')+_0x1a72b7(0x1fa)+(penSize==0x1?_0x1a72b7(0x1fb):'')+_0x1a72b7(0x1f8)+(penSize==0x2?_0x1a72b7(0x1fb):'')+_0x1a72b7(0x205)+(penSize==0x3?_0x1a72b7(0x1fb):'')+_0x1a72b7(0x226)+(penSize==0x4?_0x1a72b7(0x1fb):'')+_0x1a72b7(0x15b)+(penMode===_0x1a72b7(0x1b1)?_0x1a72b7(0x1fb):'')+_0x1a72b7(0x1b6)+(penMode==='circle'?'\x20selected':'')+_0x1a72b7(0x165)+Math[_0x1a72b7(0x207)](currentAlpha*0x64)+_0x1a72b7(0x145)+Math[_0x1a72b7(0x207)](currentAlpha*0x64)+_0x1a72b7(0x1d3),_0x4fa83f['querySelector'](_0x1a72b7(0x21f))[_0x1a72b7(0x129)]=_0x836fc7=>setPenSize(_0x836fc7[_0x1a72b7(0x180)][_0x1a72b7(0x1d4)]),_0x4fa83f[_0x1a72b7(0x154)]('#palette-penMode')['onchange']=_0x2fac06=>setPenMode(_0x2fac06[_0x1a72b7(0x180)][_0x1a72b7(0x1d4)]),_0x4fa83f[_0x1a72b7(0x153)](_0x1a72b7(0x1ee))[_0x1a72b7(0x1bd)](_0x397399=>{const _0x3079cf=_0x1a72b7;_0x397399[_0x3079cf(0x19d)]=()=>setTool(_0x397399[_0x3079cf(0x1c2)][_0x3079cf(0x213)]);}),_0x4fa83f[_0x1a72b7(0x154)]('#palette-alphaSlider')['oninput']=_0x1d80f7=>{const _0x5bfa4f=_0x1a72b7;setAlpha(_0x1d80f7[_0x5bfa4f(0x180)][_0x5bfa4f(0x1d4)]),_0x4fa83f['querySelector']('#palette-alphaValue')[_0x5bfa4f(0x21a)]=_0x1d80f7['target'][_0x5bfa4f(0x1d4)]+'%';let _0x3dd46b=document[_0x5bfa4f(0x148)](_0x5bfa4f(0x167)),_0x586ec5=document[_0x5bfa4f(0x148)](_0x5bfa4f(0x12a));if(_0x3dd46b)_0x3dd46b['value']=_0x1d80f7[_0x5bfa4f(0x180)][_0x5bfa4f(0x1d4)];if(_0x586ec5)_0x586ec5[_0x5bfa4f(0x21a)]=_0x1d80f7[_0x5bfa4f(0x180)][_0x5bfa4f(0x1d4)]+'%';};}function setAlpha(_0x978fd8){const _0x5aeb38=a0_0x42c430;let _0x416cfc=Math[_0x5aeb38(0x1a6)](0x0,Math[_0x5aeb38(0x15d)](0x64,parseInt(_0x978fd8,0xa)||0x0));currentAlpha=_0x416cfc/0x64;let _0x348e19=document[_0x5aeb38(0x148)](_0x5aeb38(0x167)),_0x3e9ba=document[_0x5aeb38(0x148)](_0x5aeb38(0x12a));if(_0x348e19)_0x348e19[_0x5aeb38(0x1d4)]=_0x416cfc;if(_0x3e9ba)_0x3e9ba[_0x5aeb38(0x21a)]=_0x416cfc+'%';let _0x41e49c=document['getElementById'](_0x5aeb38(0x206)),_0x303ea7=document[_0x5aeb38(0x148)](_0x5aeb38(0x1e1));if(_0x41e49c)_0x41e49c['value']=_0x416cfc;if(_0x303ea7)_0x303ea7[_0x5aeb38(0x21a)]=_0x416cfc+'%';}document[a0_0x42c430(0x182)](a0_0x42c430(0x1c0),()=>{const _0x349389=a0_0x42c430,_0x1f8fe5=document['getElementById'](_0x349389(0x1e5));_0x1f8fe5&&(_0x1f8fe5[_0x349389(0x1c1)]=_0x3af2c0=>{const _0xf577f9=_0x349389;currentColor=_0x3af2c0[_0xf577f9(0x180)][_0xf577f9(0x1d4)],document[_0xf577f9(0x153)]('.palette-color')['forEach'](_0xb7e9cc=>_0xb7e9cc[_0xf577f9(0x13a)][_0xf577f9(0x128)]('selected'));});const _0x3b4f21=document['getElementById']('alphaSlider'),_0x3ec7a2=document[_0x349389(0x148)](_0x349389(0x12a));_0x3b4f21&&_0x3ec7a2&&(_0x3b4f21[_0x349389(0x1c1)]=_0x38fce0=>{const _0xa78913=_0x349389;setAlpha(_0x38fce0[_0xa78913(0x180)][_0xa78913(0x1d4)]),_0x3ec7a2['textContent']=_0x38fce0[_0xa78913(0x180)][_0xa78913(0x1d4)]+'%';let _0x4916e9=document[_0xa78913(0x148)](_0xa78913(0x206)),_0x2d9dc3=document[_0xa78913(0x148)](_0xa78913(0x1e1));if(_0x4916e9)_0x4916e9[_0xa78913(0x1d4)]=_0x38fce0[_0xa78913(0x180)]['value'];if(_0x2d9dc3)_0x2d9dc3['textContent']=_0x38fce0['target']['value']+'%';});});async function convertToGIF(_0x10ea78,_0x4ad75e=0xc8,_0x45989f=a0_0x42c430(0x135)){const _0x1e97ae=a0_0x42c430,_0x338d85=new window[(_0x1e97ae(0x20f))]({'workers':0x2,'quality':0xa,'workerScript':_0x1e97ae(0x1bb)});_0x10ea78[_0x1e97ae(0x1bd)](_0xe8b069=>_0x338d85['addFrame'](_0xe8b069,{'delay':_0x4ad75e})),_0x338d85['on'](_0x1e97ae(0x1c5),_0x108c5b=>{const _0x444ff5=_0x1e97ae,_0x2f143b=URL[_0x444ff5(0x14f)](_0x108c5b),_0x28bba6=document[_0x444ff5(0x179)]('a');_0x28bba6[_0x444ff5(0x21e)]=_0x2f143b,_0x28bba6['download']=_0x45989f,document[_0x444ff5(0x223)][_0x444ff5(0x171)](_0x28bba6),_0x28bba6[_0x444ff5(0x1c7)](),setTimeout(()=>{const _0x12cd1d=_0x444ff5;document[_0x12cd1d(0x223)][_0x12cd1d(0x1c9)](_0x28bba6),URL['revokeObjectURL'](_0x2f143b);},0x3e8);}),_0x338d85[_0x1e97ae(0x1f0)]();}function convertToAPNG(_0x4968c9,_0x3650b4,_0x13d864,_0xb016ea=0xc8,_0x5f16e3=a0_0x42c430(0x17a)){const _0x298ccd=a0_0x42c430,_0x4bff13=[],_0x50f8fe=[],_0x186030=document[_0x298ccd(0x179)](_0x298ccd(0x1e4));_0x186030['width']=_0x3650b4,_0x186030[_0x298ccd(0x1fd)]=_0x13d864;const _0x55fd51=_0x186030[_0x298ccd(0x1de)]('2d');_0x4968c9[_0x298ccd(0x1bd)](_0x4ddd95=>{const _0x552661=_0x298ccd;_0x55fd51['clearRect'](0x0,0x0,_0x3650b4,_0x13d864),_0x55fd51[_0x552661(0x1d6)](_0x4ddd95,0x0,0x0,_0x3650b4,_0x13d864);const _0x126f68=_0x55fd51[_0x552661(0x21d)](0x0,0x0,_0x3650b4,_0x13d864)[_0x552661(0x195)][_0x552661(0x158)];_0x4bff13['push'](_0x126f68),_0x50f8fe['push'](_0xb016ea);});const _0x415d40=window[_0x298ccd(0x1e9)]['encode'](_0x4bff13,_0x3650b4,_0x13d864,0x0,_0x50f8fe),_0x2694b2=URL[_0x298ccd(0x14f)](new Blob([_0x415d40],{'type':_0x298ccd(0x1a5)})),_0x32ad72=document[_0x298ccd(0x179)]('a');_0x32ad72['href']=_0x2694b2,_0x32ad72[_0x298ccd(0x12c)]=_0x5f16e3,document[_0x298ccd(0x223)][_0x298ccd(0x171)](_0x32ad72),_0x32ad72[_0x298ccd(0x1c7)](),setTimeout(()=>{const _0x12c54c=_0x298ccd;document[_0x12c54c(0x223)][_0x12c54c(0x1c9)](_0x32ad72),URL[_0x12c54c(0x17d)](_0x2694b2);},0x3e8);}async function loadImages(_0x353a2f){const _0x37bc57=a0_0x42c430,_0x2b200a=await Promise[_0x37bc57(0x18f)](_0x353a2f[_0x37bc57(0x228)](_0x46422e=>{return new Promise(_0x521dba=>{const _0x437034=a0_0x5dd2,_0x1546aa=new Image();_0x1546aa['crossOrigin']=_0x437034(0x125),_0x1546aa[_0x437034(0x1ae)]=_0x46422e,_0x1546aa[_0x437034(0x19b)]=()=>_0x521dba(_0x1546aa);});}));return _0x2b200a;}function toggleSection(_0x3b16b2){const _0x5be59c=a0_0x42c430,_0x52bc18=document[_0x5be59c(0x148)](_0x3b16b2),_0x252f39=_0x52bc18[_0x5be59c(0x154)](_0x5be59c(0x166)),_0x10e1e9=_0x52bc18['querySelector'](_0x5be59c(0x143));_0x252f39['style']['display']==='none'?(_0x252f39['style'][_0x5be59c(0x187)]='',_0x10e1e9[_0x5be59c(0x21a)]='▼'):(_0x252f39['style'][_0x5be59c(0x187)]='none',_0x10e1e9['textContent']='▲');}document[a0_0x42c430(0x182)](a0_0x42c430(0x1c0),()=>{const _0x1a63fd=a0_0x42c430;document[_0x1a63fd(0x153)]('.section.collapsible\x20.section-content')[_0x1a63fd(0x1bd)](_0x5be382=>_0x5be382[_0x1a63fd(0x174)]['display']=''),document[_0x1a63fd(0x153)]('.section.collapsible\x20.toggle-btn')[_0x1a63fd(0x1bd)](_0x402360=>_0x402360[_0x1a63fd(0x21a)]='▼');}),window[a0_0x42c430(0x182)](a0_0x42c430(0x121),updateMenuBtnDisplay),document[a0_0x42c430(0x182)](a0_0x42c430(0x1c0),updateMenuBtnDisplay);function toggleSideMenu(_0x5cf09d){const _0x1b7ff8=a0_0x42c430,_0x2fdf73=document['getElementById'](_0x1b7ff8(0x1a3)),_0x1c990c=document[_0x1b7ff8(0x148)](_0x1b7ff8(0x218)),_0x3a7a11=document[_0x1b7ff8(0x148)](_0x1b7ff8(0x18d)),_0x6a8107=document[_0x1b7ff8(0x148)]('menu-toggle-btn-close'),_0x33f5da=_0x2fdf73['classList'][_0x1b7ff8(0x229)](_0x1b7ff8(0x1ca));let _0x4bd4d7=typeof _0x5cf09d==='boolean'?_0x5cf09d:!_0x33f5da;_0x4bd4d7?(_0x2fdf73[_0x1b7ff8(0x13a)][_0x1b7ff8(0x168)](_0x1b7ff8(0x1ca)),_0x1c990c[_0x1b7ff8(0x13a)]['add']('sidebar-open'),document[_0x1b7ff8(0x223)][_0x1b7ff8(0x174)][_0x1b7ff8(0x13f)]='hidden',document[_0x1b7ff8(0x223)][_0x1b7ff8(0x174)][_0x1b7ff8(0x1f2)]=_0x1b7ff8(0x1d7),window[_0x1b7ff8(0x17e)]<=0x384&&(_0x6a8107['style'][_0x1b7ff8(0x187)]='block',_0x3a7a11[_0x1b7ff8(0x174)][_0x1b7ff8(0x187)]=_0x1b7ff8(0x1d7))):(_0x2fdf73[_0x1b7ff8(0x13a)][_0x1b7ff8(0x128)]('open'),_0x1c990c[_0x1b7ff8(0x13a)]['remove'](_0x1b7ff8(0x221)),document[_0x1b7ff8(0x223)][_0x1b7ff8(0x174)]['overflow']='',document[_0x1b7ff8(0x223)][_0x1b7ff8(0x174)][_0x1b7ff8(0x1f2)]='',window[_0x1b7ff8(0x17e)]<=0x384&&(_0x6a8107['style'][_0x1b7ff8(0x187)]=_0x1b7ff8(0x1d7),_0x3a7a11[_0x1b7ff8(0x174)][_0x1b7ff8(0x187)]=_0x1b7ff8(0x136)));}function updateMenuBtnDisplay(){const _0x2115ea=a0_0x42c430,_0x61f68f=document['getElementById'](_0x2115ea(0x1a3)),_0x378188=document[_0x2115ea(0x148)](_0x2115ea(0x218)),_0x3a796d=document[_0x2115ea(0x148)](_0x2115ea(0x18d)),_0x2d11cb=document[_0x2115ea(0x148)](_0x2115ea(0x18b));window[_0x2115ea(0x17e)]>0x384?(_0x61f68f[_0x2115ea(0x13a)][_0x2115ea(0x128)]('open'),_0x378188['classList'][_0x2115ea(0x128)](_0x2115ea(0x221)),_0x2d11cb[_0x2115ea(0x174)][_0x2115ea(0x187)]=_0x2115ea(0x1d7),_0x3a796d['style'][_0x2115ea(0x187)]=_0x2115ea(0x1d7),document[_0x2115ea(0x223)]['style'][_0x2115ea(0x13f)]='',document[_0x2115ea(0x223)][_0x2115ea(0x174)][_0x2115ea(0x1f2)]=''):_0x61f68f['classList']['contains'](_0x2115ea(0x1ca))?(_0x2d11cb['style'][_0x2115ea(0x187)]=_0x2115ea(0x136),_0x3a796d[_0x2115ea(0x174)][_0x2115ea(0x187)]='none'):(_0x2d11cb['style'][_0x2115ea(0x187)]='none',_0x3a796d[_0x2115ea(0x174)]['display']=_0x2115ea(0x136));}document['addEventListener'](a0_0x42c430(0x1c7),function(_0x543a01){const _0x1615cb=a0_0x42c430;if(window['innerWidth']>0x384)return;const _0x1ceca5=document[_0x1615cb(0x148)]('sidebar'),_0x408e59=document[_0x1615cb(0x148)](_0x1615cb(0x218)),_0x152905=document[_0x1615cb(0x148)]('menu-toggle-btn'),_0x4b5ab9=document[_0x1615cb(0x148)](_0x1615cb(0x18b));!_0x1ceca5['contains'](_0x543a01[_0x1615cb(0x180)])&&_0x543a01['target']!==_0x152905&&_0x543a01[_0x1615cb(0x180)]!==_0x4b5ab9&&(_0x1ceca5['classList']['remove'](_0x1615cb(0x1ca)),_0x408e59['classList'][_0x1615cb(0x128)]('sidebar-open'),_0x4b5ab9[_0x1615cb(0x174)][_0x1615cb(0x187)]='none',_0x152905[_0x1615cb(0x174)]['display']='block',document[_0x1615cb(0x223)]['style'][_0x1615cb(0x13f)]='',document[_0x1615cb(0x223)]['style'][_0x1615cb(0x1f2)]='');});