const _0x17c182=_0x797a;(function(_0x144a4d,_0x3c6c84){const _0x2d3fa8=_0x797a,_0xeb4e93=_0x144a4d();while(!![]){try{const _0x6d59ae=parseInt(_0x2d3fa8(0x1c0))/0x1+parseInt(_0x2d3fa8(0x1e1))/0x2+parseInt(_0x2d3fa8(0x1ba))/0x3*(parseInt(_0x2d3fa8(0x1d1))/0x4)+-parseInt(_0x2d3fa8(0x1a6))/0x5*(parseInt(_0x2d3fa8(0x1a5))/0x6)+parseInt(_0x2d3fa8(0x201))/0x7+parseInt(_0x2d3fa8(0x1f6))/0x8+-parseInt(_0x2d3fa8(0x1eb))/0x9*(parseInt(_0x2d3fa8(0x1d6))/0xa);if(_0x6d59ae===_0x3c6c84)break;else _0xeb4e93['push'](_0xeb4e93['shift']());}catch(_0x1caa26){_0xeb4e93['push'](_0xeb4e93['shift']());}}}(_0x1a22,0x8d5c4));const _0x25025d=(function(){let _0x1620a4=!![];return function(_0xcad8db,_0xdcbc4){const _0x1a6119=_0x1620a4?function(){const _0x307f85=_0x797a;if(_0xdcbc4){const _0x254eb4=_0xdcbc4[_0x307f85(0x1f0)](_0xcad8db,arguments);return _0xdcbc4=null,_0x254eb4;}}:function(){};return _0x1620a4=![],_0x1a6119;};}()),_0x598bc7=_0x25025d(this,function(){const _0xcc0093=_0x797a;return _0x598bc7[_0xcc0093(0x1c3)]()[_0xcc0093(0x1d0)](_0xcc0093(0x1ee))[_0xcc0093(0x1c3)]()[_0xcc0093(0x1c8)](_0x598bc7)['search'](_0xcc0093(0x1ee));});_0x598bc7();function setPenSize(_0x6a20ce){const _0x3a727f=_0x797a;penSize=parseInt(_0x6a20ce)||0x1;let _0x53565a=document[_0x3a727f(0x1e4)]('penSize');if(_0x53565a)_0x53565a['value']=penSize;let _0x5f0c90=document['getElementById'](_0x3a727f(0x1d7));if(_0x5f0c90)_0x5f0c90[_0x3a727f(0x1cb)]=penSize;}function setPenMode(_0x1c4a2b){const _0x3b672c=_0x797a;penMode=_0x1c4a2b;let _0xcc1f88=document[_0x3b672c(0x1e4)](_0x3b672c(0x1fa));if(_0xcc1f88)_0xcc1f88['value']=penMode;let _0x120a67=document[_0x3b672c(0x1e4)]('palette-penMode');if(_0x120a67)_0x120a67['value']=penMode;}function isDrawableCanvas(_0x4387ca){const _0x49982d=_0x797a;if(!_0x4387ca)return![];const _0x2c8ef4=_0x4387ca[_0x49982d(0x1f1)],_0x27cb89=_0x4387ca['height'];return Number[_0x49982d(0x1ad)](_0x2c8ef4)&&Number[_0x49982d(0x1ad)](_0x27cb89)&&_0x2c8ef4>0x0&&_0x27cb89>0x0;}function fillAt(_0x384d23,_0x3b1f0e){const _0x37663a=_0x797a;let _0x534682=getCurrentProject(),_0x91ce2c=getCurrentFrame();if(!_0x534682||!_0x91ce2c||typeof _0x91ce2c[_0x37663a(0x202)]!==_0x37663a(0x1f8)||!_0x91ce2c[_0x37663a(0x1c9)][_0x91ce2c['activeLayer']])return;const _0x426d30=_0x91ce2c[_0x37663a(0x1c9)][_0x91ce2c[_0x37663a(0x202)]],_0x3c4ad2=_0x426d30&&_0x426d30['canvas']?_0x426d30['canvas']:_0x426d30;if(!_0x3c4ad2||!_0x3c4ad2[_0x37663a(0x1f2)])return;let _0x15e151=_0x3c4ad2[_0x37663a(0x1f2)]('2d',{'willReadFrequently':!![]}),_0x52c216=_0x15e151[_0x37663a(0x1c6)](0x0,0x0,_0x534682[_0x37663a(0x1f1)]*cellSize,_0x534682[_0x37663a(0x1a8)]*cellSize),_0x280a87=_0x384d23*cellSize,_0x5e2705=_0x3b1f0e*cellSize,_0x3d85ff=getPixel(_0x52c216,_0x280a87,_0x5e2705),_0x882f1c=currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x3d85ff,_0x882f1c))return;let _0x3715c6=[[_0x384d23,_0x3b1f0e]],_0x3e76a4=new Set();while(_0x3715c6[_0x37663a(0x1cc)]){let [_0x2fc112,_0x431525]=_0x3715c6['pop']();if(_0x2fc112<0x0||_0x431525<0x0||_0x2fc112>=_0x534682[_0x37663a(0x1f1)]||_0x431525>=_0x534682[_0x37663a(0x1a8)])continue;let _0x4f0ce0=_0x2fc112+','+_0x431525;if(_0x3e76a4[_0x37663a(0x1a2)](_0x4f0ce0))continue;_0x3e76a4[_0x37663a(0x1be)](_0x4f0ce0);let _0x334532=_0x2fc112*cellSize,_0xfe29b4=_0x431525*cellSize,_0x545090=getPixel(_0x52c216,_0x334532,_0xfe29b4);if(!colorsMatch(_0x545090,_0x3d85ff))continue;for(let _0x2c1321=0x0;_0x2c1321<cellSize;_0x2c1321++){for(let _0x355e93=0x0;_0x355e93<cellSize;_0x355e93++){setPixel(_0x52c216,_0x334532+_0x355e93,_0xfe29b4+_0x2c1321,_0x882f1c);}}_0x3715c6[_0x37663a(0x1d2)]([_0x2fc112+0x1,_0x431525]),_0x3715c6[_0x37663a(0x1d2)]([_0x2fc112-0x1,_0x431525]),_0x3715c6[_0x37663a(0x1d2)]([_0x2fc112,_0x431525+0x1]),_0x3715c6[_0x37663a(0x1d2)]([_0x2fc112,_0x431525-0x1]);}_0x15e151[_0x37663a(0x1db)](_0x52c216,0x0,0x0),redrawAll();}function getPixel(_0x535e61,_0x181628,_0x1ceab0){const _0x2dd758=_0x797a;let _0x5134e8=(_0x1ceab0*_0x535e61[_0x2dd758(0x1f1)]+_0x181628)*0x4;return[_0x535e61[_0x2dd758(0x1ef)][_0x5134e8],_0x535e61['data'][_0x5134e8+0x1],_0x535e61['data'][_0x5134e8+0x2],_0x535e61[_0x2dd758(0x1ef)][_0x5134e8+0x3]];}function setPixel(_0x39a1e7,_0x310d26,_0x1e7941,_0x14af1d){const _0x4a76a2=_0x797a;let _0x4e3d6e=(_0x1e7941*_0x39a1e7['width']+_0x310d26)*0x4;_0x39a1e7[_0x4a76a2(0x1ef)][_0x4e3d6e]=_0x14af1d[0x0],_0x39a1e7[_0x4a76a2(0x1ef)][_0x4e3d6e+0x1]=_0x14af1d[0x1],_0x39a1e7['data'][_0x4e3d6e+0x2]=_0x14af1d[0x2],_0x39a1e7[_0x4a76a2(0x1ef)][_0x4e3d6e+0x3]=_0x14af1d[0x3];}function _0x1a22(){const _0x2e4551=['palette-penSize','visible','round','fillStyle','putImageData','lineWidth','max','rgba(','string','display','938760TEvlkW','lineCap','butt','getElementById','globalCompositeOperation','lineTo','ensureMetadata','moveTo','getMinutes','auto','9148284riSkjW','save','getSeconds','(((.+)+)+)+$','data','apply','width','getContext','#ccc','padStart','getDate','7832728mxJNek','floor','number','beginPath','penMode','assign','rect','fillRect','globalAlpha','circle',',1)','3680628NBceyY','activeLayer','has','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','now','509988kGwPaj','25DAKwmQ','source-over','height','encode','type','random','stringify','isFinite','#00000000','ceil','transparent','complete','clearRect','drawImage','version','restore','strokeStyle','min','style','toISOString','4461Pklprz','uuidv4','flat','randomUUID','add','undefined','967511ZnYpBf','scanColorsPanel','eraser','toString','timestamp','warn','getImageData','slice','constructor','layers','getFullYear','value','length','isArray','toLowerCase','sqrt','search','256ncmqhU','push','redrawAll:\x20failed\x20drawing\x20layer','stroke','canvas','20EXILOT'];_0x1a22=function(){return _0x2e4551;};return _0x1a22();}function drawDotXY(_0x1465d9,_0x791e9b){const _0x2f4e01=_0x797a;let _0x11dcf2=getCurrentProject(),_0x2e1e7a=getCurrentFrame();if(!_0x2e1e7a||!_0x11dcf2)return;if(typeof _0x1465d9!=='number'||typeof _0x791e9b!==_0x2f4e01(0x1f8)||_0x1465d9<0x0||_0x791e9b<0x0||!Number[_0x2f4e01(0x1ad)](_0x11dcf2['width'])||!Number['isFinite'](_0x11dcf2[_0x2f4e01(0x1a8)])||_0x1465d9>=_0x11dcf2[_0x2f4e01(0x1f1)]||_0x791e9b>=_0x11dcf2[_0x2f4e01(0x1a8)]||!Array['isArray'](_0x2e1e7a[_0x2f4e01(0x1c9)])||typeof _0x2e1e7a[_0x2f4e01(0x202)]!==_0x2f4e01(0x1f8)||!_0x2e1e7a[_0x2f4e01(0x1c9)][_0x2e1e7a[_0x2f4e01(0x202)]])return;const _0x19d9cf=_0x2e1e7a[_0x2f4e01(0x1c9)][_0x2e1e7a[_0x2f4e01(0x202)]],_0x4c2dad=_0x19d9cf&&_0x19d9cf[_0x2f4e01(0x1d5)]?_0x19d9cf[_0x2f4e01(0x1d5)]:_0x19d9cf;if(!_0x4c2dad||!_0x4c2dad[_0x2f4e01(0x1f2)])return;let _0x17ce1c=_0x4c2dad[_0x2f4e01(0x1f2)]('2d');if(!_0x17ce1c)return;if(currentTool==='eraser'||currentAlpha===0x0)drawPenShape(_0x17ce1c,_0x1465d9,_0x791e9b,null,!![]);else{let _0x24ba26=hexToRgba(currentColor,currentAlpha);_0x17ce1c[_0x2f4e01(0x1ec)](),penAlphaMode===_0x2f4e01(0x1bc)&&currentAlpha<0x1?(drawPenShape(_0x17ce1c,_0x1465d9,_0x791e9b,null,!![]),drawPenShape(_0x17ce1c,_0x1465d9,_0x791e9b,_0x24ba26,![])):drawPenShape(_0x17ce1c,_0x1465d9,_0x791e9b,_0x24ba26,![]),_0x17ce1c[_0x2f4e01(0x1b5)]();}blitLayerArea(_0x4c2dad,_0x1465d9,_0x791e9b,penSize);}function parseColorToRGBA(_0x4de027,_0x4b319a){const _0xb4e7d2=_0x797a;if(Array[_0xb4e7d2(0x1cd)](_0x4de027)&&_0x4de027[_0xb4e7d2(0x1cc)]>=0x4)return _0x4de027[_0xb4e7d2(0x1c7)](0x0,0x4);if(!_0x4de027||typeof _0x4de027!==_0xb4e7d2(0x1df))return _0x4b319a||[0x0,0x0,0x0,0xff];if(_0x4de027===_0xb4e7d2(0x1ae)||_0x4de027[_0xb4e7d2(0x1ce)]()===_0xb4e7d2(0x1b0))return[0x0,0x0,0x0,0x0];const _0x4d1a38=_0x4de027['match'](/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/i);if(_0x4d1a38){const _0x285c2d=parseInt(_0x4d1a38[0x1],0xa),_0x166cfd=parseInt(_0x4d1a38[0x2],0xa),_0x1a1ca3=parseInt(_0x4d1a38[0x3],0xa),_0x282283=typeof _0x4d1a38[0x4]!==_0xb4e7d2(0x1bf)?Math[_0xb4e7d2(0x1d9)](parseFloat(_0x4d1a38[0x4])*0xff):0xff;return[_0x285c2d,_0x166cfd,_0x1a1ca3,_0x282283];}try{return hexToRgba(_0x4de027);}catch(_0x4d9b7e){return _0x4b319a||[0x0,0x0,0x0,0xff];}}function fillCellCircle(_0x23b869,_0x28d31a,_0x434a1a,_0x1f1c72,_0x1e061b,_0x4e347a){const _0x33f375=_0x797a,_0x44fd31=Math[_0x33f375(0x1dd)](0x1,Math[_0x33f375(0x1d9)](_0x1f1c72/cellSize)),_0x54ac29=_0x28d31a+_0x1f1c72/0x2,_0x55de6e=_0x434a1a+_0x1f1c72/0x2,_0x17c8b7=_0x1f1c72/0x2;for(let _0x53081b=0x0;_0x53081b<_0x44fd31;_0x53081b++){for(let _0x5075d4=0x0;_0x5075d4<_0x44fd31;_0x5075d4++){const _0x2ba0c7=_0x28d31a+_0x5075d4*cellSize,_0x36d50a=_0x434a1a+_0x53081b*cellSize,_0x3f86c7=_0x2ba0c7+cellSize/0x2,_0xce1a35=_0x36d50a+cellSize/0x2,_0x4c396d=_0x3f86c7-_0x54ac29,_0x41d053=_0xce1a35-_0x55de6e,_0x2579f4=Math[_0x33f375(0x1cf)](_0x4c396d*_0x4c396d+_0x41d053*_0x41d053);if(_0x2579f4<=_0x17c8b7+0.0001){if(_0x4e347a)_0x23b869['clearRect'](_0x2ba0c7,_0x36d50a,cellSize,cellSize);else _0x1e061b&&(_0x23b869[_0x33f375(0x1ec)](),_0x23b869['globalAlpha']=(_0x1e061b[0x3]||0xff)/0xff,_0x23b869[_0x33f375(0x1da)]='rgb('+_0x1e061b[0x0]+','+_0x1e061b[0x1]+','+_0x1e061b[0x2]+')',_0x23b869[_0x33f375(0x1fd)](_0x2ba0c7,_0x36d50a,cellSize,cellSize),_0x23b869[_0x33f375(0x1b5)]());}}}}function drawPenShape(_0x5888aa,_0x328534,_0x149370,_0x374446,_0x5c5759){const _0x19a993=_0x797a,_0x27d333=_0x328534*cellSize,_0x1dbc2a=_0x149370*cellSize,_0x78d99d=penSize*cellSize;if(_0x5c5759)penMode==='circle'?fillCellCircle(_0x5888aa,_0x27d333,_0x1dbc2a,_0x78d99d,null,!![]):_0x5888aa[_0x19a993(0x1b2)](_0x27d333-Math[_0x19a993(0x1f7)]((penSize-0x1)/0x2)*cellSize,_0x1dbc2a-Math[_0x19a993(0x1f7)]((penSize-0x1)/0x2)*cellSize,_0x78d99d,_0x78d99d);else{if(penMode===_0x19a993(0x1ff)){const _0x197f56=parseColorToRGBA(_0x374446,[0x0,0x0,0x0,0xff]);fillCellCircle(_0x5888aa,_0x27d333,_0x1dbc2a,_0x78d99d,_0x197f56,![]);}else _0x5888aa[_0x19a993(0x1ec)](),Array['isArray'](_0x374446)&&_0x374446['length']>=0x4?(_0x5888aa[_0x19a993(0x1da)]=_0x19a993(0x1de)+_0x374446[0x0]+','+_0x374446[0x1]+','+_0x374446[0x2]+_0x19a993(0x200),_0x5888aa[_0x19a993(0x1fe)]=(_0x374446[0x3]||0xff)/0xff):_0x5888aa[_0x19a993(0x1da)]=_0x374446,_0x5888aa['fillRect'](_0x27d333-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x1dbc2a-Math[_0x19a993(0x1f7)]((penSize-0x1)/0x2)*cellSize,_0x78d99d,_0x78d99d),_0x5888aa['restore']();}}function blitLayerArea(_0x29c6fe,_0x28c974,_0x1a28f3,_0x286fb3,_0x558f99){const _0x26bcfd=_0x797a,_0x2eb65b=getCurrentProject(),_0x192832=getCurrentFrame();if(!_0x2eb65b||!_0x192832)return;if(!_0x29c6fe||!_0x29c6fe[_0x26bcfd(0x1f2)]||!isDrawableCanvas(_0x29c6fe))return;const _0x2808c5=_0x286fb3*cellSize,_0x27d06a=Math[_0x26bcfd(0x1f7)]((_0x286fb3-0x1)/0x2)*cellSize,_0x250434=_0x28c974*cellSize-_0x27d06a,_0x4f1b01=_0x1a28f3*cellSize-_0x27d06a,_0x50b9cc=Math['max'](0x0,_0x250434),_0xdca4e8=Math['max'](0x0,_0x4f1b01),_0x333f97=Math[_0x26bcfd(0x1b7)](canvas[_0x26bcfd(0x1f1)],_0x250434+_0x2808c5),_0x5c40c0=Math[_0x26bcfd(0x1b7)](canvas[_0x26bcfd(0x1a8)],_0x4f1b01+_0x2808c5),_0x12c6a7=_0x333f97-_0x50b9cc,_0x7715a8=_0x5c40c0-_0xdca4e8;if(_0x12c6a7<=0x0||_0x7715a8<=0x0)return;try{ctx[_0x26bcfd(0x1ec)](),ctx[_0x26bcfd(0x1f9)](),ctx[_0x26bcfd(0x1fc)](_0x50b9cc,_0xdca4e8,_0x12c6a7,_0x7715a8),ctx['clip'](),ctx['clearRect'](_0x50b9cc,_0xdca4e8,_0x12c6a7,_0x7715a8);for(let _0x3de91d=0x0;_0x3de91d<_0x192832[_0x26bcfd(0x1c9)]['length'];_0x3de91d++){const _0x3ff547=_0x192832[_0x26bcfd(0x1c9)][_0x3de91d];if(!_0x3ff547)continue;const _0x477e2b=typeof _0x3ff547[_0x26bcfd(0x1d8)]!==_0x26bcfd(0x1bf)?_0x3ff547['visible']:!![];if(!_0x477e2b)continue;const _0x34044f=_0x3ff547[_0x26bcfd(0x1d5)]?_0x3ff547[_0x26bcfd(0x1d5)]:_0x3ff547;if(!isDrawableCanvas(_0x34044f))continue;ctx[_0x26bcfd(0x1ec)](),dimFrontLayers&&typeof _0x192832[_0x26bcfd(0x202)]===_0x26bcfd(0x1f8)&&_0x3de91d>_0x192832['activeLayer']?ctx[_0x26bcfd(0x1fe)]=FRONT_LAYER_DIM_ALPHA:ctx['globalAlpha']=0x1,ctx[_0x26bcfd(0x1b3)](_0x34044f,_0x50b9cc,_0xdca4e8,_0x12c6a7,_0x7715a8,_0x50b9cc,_0xdca4e8,_0x12c6a7,_0x7715a8),ctx[_0x26bcfd(0x1b5)]();}ctx[_0x26bcfd(0x1b5)]();}catch(_0xe62817){redrawAll();return;}const _0xe8d76d=document['getElementById'](_0x26bcfd(0x1c1));if(_0xe8d76d){const _0x3bdc75=performance[_0x26bcfd(0x1a4)]();if(!lastColorScanAt||_0x3bdc75-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x2d4def=scanImageColors();renderScanPanel(_0x2d4def),_0xe8d76d[_0x26bcfd(0x1b8)][_0x26bcfd(0x1e0)]='',lastColorScanAt=_0x3bdc75;}}drawGridArea(_0x50b9cc,_0xdca4e8,_0x12c6a7,_0x7715a8);}function drawGridArea(_0x16c43f,_0x4cdb8a,_0x3bad7a,_0x5a3bd0){const _0x4ef717=_0x797a;if(!showGrid||!_0x3bad7a||!_0x5a3bd0)return;ctx['save'](),ctx[_0x4ef717(0x1b6)]=_0x4ef717(0x1f3),ctx[_0x4ef717(0x1dc)]=0x1,ctx[_0x4ef717(0x1e2)]=_0x4ef717(0x1e3);const _0x4a073d=0x1,_0x8bcb3f=Math[_0x4ef717(0x1dd)](0x0,Math['floor']((_0x16c43f-_0x4a073d)/cellSize)*cellSize),_0xe11cd=Math[_0x4ef717(0x1b7)](canvas[_0x4ef717(0x1f1)],Math['ceil']((_0x16c43f+_0x3bad7a+_0x4a073d)/cellSize)*cellSize),_0x5a2746=Math[_0x4ef717(0x1dd)](0x0,Math[_0x4ef717(0x1f7)]((_0x4cdb8a-_0x4a073d)/cellSize)*cellSize),_0x5ee354=Math['min'](canvas[_0x4ef717(0x1a8)],Math[_0x4ef717(0x1af)]((_0x4cdb8a+_0x5a3bd0+_0x4a073d)/cellSize)*cellSize);for(let _0x58c5c5=_0x8bcb3f;_0x58c5c5<=_0xe11cd;_0x58c5c5+=cellSize){const _0x22e009=_0x58c5c5+0.5;ctx['beginPath'](),ctx[_0x4ef717(0x1e8)](_0x22e009,_0x5a2746),ctx[_0x4ef717(0x1e6)](_0x22e009,_0x5ee354),ctx['stroke']();}for(let _0x4d8598=_0x5a2746;_0x4d8598<=_0x5ee354;_0x4d8598+=cellSize){const _0x53d49b=_0x4d8598+0.5;ctx[_0x4ef717(0x1f9)](),ctx[_0x4ef717(0x1e8)](_0x8bcb3f,_0x53d49b),ctx['lineTo'](_0xe11cd,_0x53d49b),ctx[_0x4ef717(0x1d4)]();}ctx[_0x4ef717(0x1b5)]();}function drawDotTouch(_0x45640f,_0x125554){const _0x2f3e41=_0x797a;let _0x43a7ed=getCurrentProject(),_0x31cd67=getCurrentFrame();if(!_0x43a7ed||!_0x31cd67)return;if(_0x45640f<0x0||_0x125554<0x0||_0x45640f>=_0x43a7ed['width']||_0x125554>=_0x43a7ed[_0x2f3e41(0x1a8)])return;const _0x29579e=_0x31cd67[_0x2f3e41(0x1c9)][_0x31cd67[_0x2f3e41(0x202)]],_0x567f6e=_0x29579e&&_0x29579e[_0x2f3e41(0x1d5)]?_0x29579e[_0x2f3e41(0x1d5)]:_0x29579e;if(!_0x567f6e||!_0x567f6e[_0x2f3e41(0x1f2)])return;let _0xc5f9f7=_0x567f6e['getContext']('2d');if(currentTool===_0x2f3e41(0x1c2)||currentAlpha===0x0)drawPenShape(_0xc5f9f7,_0x45640f,_0x125554,null,!![]);else{let _0x29fd35=hexToRgba(currentColor,currentAlpha);_0xc5f9f7[_0x2f3e41(0x1ec)](),penAlphaMode==='flat'&&currentAlpha<0x1?(_0xc5f9f7['globalAlpha']=0x1,_0xc5f9f7[_0x2f3e41(0x1e5)]='destination-out',drawPenShape(_0xc5f9f7,_0x45640f,_0x125554,null,!![]),_0xc5f9f7[_0x2f3e41(0x1e5)]=_0x2f3e41(0x1a7),drawPenShape(_0xc5f9f7,_0x45640f,_0x125554,_0x29fd35,![])):drawPenShape(_0xc5f9f7,_0x45640f,_0x125554,_0x29fd35,![]),_0xc5f9f7[_0x2f3e41(0x1b5)]();}blitLayerArea(_0x567f6e,_0x45640f,_0x125554,penSize);}function drawGrid(_0x4864b5,_0x377ac8){const _0x98e7f6=_0x797a;if(!showGrid)return;ctx['save'](),ctx[_0x98e7f6(0x1b6)]=_0x98e7f6(0x1f3),ctx[_0x98e7f6(0x1dc)]=0x1,ctx[_0x98e7f6(0x1e2)]='butt';for(let _0x31c11e=0x0;_0x31c11e<=_0x4864b5;_0x31c11e++){const _0xa11d78=_0x31c11e*cellSize+0.5;ctx['beginPath'](),ctx[_0x98e7f6(0x1e8)](_0xa11d78,0x0),ctx[_0x98e7f6(0x1e6)](_0xa11d78,_0x377ac8*cellSize),ctx[_0x98e7f6(0x1d4)]();}for(let _0x484cd4=0x0;_0x484cd4<=_0x377ac8;_0x484cd4++){const _0x5afb60=_0x484cd4*cellSize+0.5;ctx[_0x98e7f6(0x1f9)](),ctx[_0x98e7f6(0x1e8)](0x0,_0x5afb60),ctx['lineTo'](_0x4864b5*cellSize,_0x5afb60),ctx[_0x98e7f6(0x1d4)]();}ctx[_0x98e7f6(0x1b5)]();}function redrawAll(){const _0x35829e=_0x797a;let _0x533c3f=getCurrentProject(),_0x12719b=getCurrentFrame();canvas['width']=_0x533c3f[_0x35829e(0x1f1)]*cellSize,canvas[_0x35829e(0x1a8)]=_0x533c3f['height']*cellSize,ctx['clearRect'](0x0,0x0,canvas[_0x35829e(0x1f1)],canvas[_0x35829e(0x1a8)]);for(let _0x4d5ed0=0x0;_0x4d5ed0<(Array['isArray'](_0x12719b[_0x35829e(0x1c9)])?_0x12719b[_0x35829e(0x1c9)][_0x35829e(0x1cc)]:0x0);_0x4d5ed0++){const _0x40bd33=_0x12719b[_0x35829e(0x1c9)][_0x4d5ed0];if(!_0x40bd33)continue;const _0x55cd1d=typeof _0x40bd33[_0x35829e(0x1d8)]!==_0x35829e(0x1bf)?_0x40bd33['visible']:!![];if(!_0x55cd1d)continue;const _0x2d2342=_0x40bd33['canvas']?_0x40bd33[_0x35829e(0x1d5)]:_0x40bd33;if(!_0x2d2342)continue;try{ctx[_0x35829e(0x1ec)]();dimFrontLayers&&typeof _0x12719b[_0x35829e(0x202)]==='number'&&_0x4d5ed0>_0x12719b[_0x35829e(0x202)]?ctx[_0x35829e(0x1fe)]=FRONT_LAYER_DIM_ALPHA:ctx[_0x35829e(0x1fe)]=0x1;if(typeof HTMLCanvasElement!==_0x35829e(0x1bf)&&_0x2d2342 instanceof HTMLCanvasElement){if(isDrawableCanvas(_0x2d2342))ctx[_0x35829e(0x1b3)](_0x2d2342,0x0,0x0);}else{if(typeof HTMLImageElement!==_0x35829e(0x1bf)&&_0x2d2342 instanceof HTMLImageElement){if(_0x2d2342[_0x35829e(0x1b1)])ctx[_0x35829e(0x1b3)](_0x2d2342,0x0,0x0);}else{if(typeof OffscreenCanvas!==_0x35829e(0x1bf)&&_0x2d2342 instanceof OffscreenCanvas){if(isDrawableCanvas(_0x2d2342))ctx[_0x35829e(0x1b3)](_0x2d2342,0x0,0x0);}else try{if(isDrawableCanvas(_0x2d2342))ctx[_0x35829e(0x1b3)](_0x2d2342,0x0,0x0);}catch(_0x840cec){}}}ctx[_0x35829e(0x1b5)]();}catch(_0x529e4d){console[_0x35829e(0x1c5)](_0x35829e(0x1d3),_0x529e4d);}}drawGrid(_0x533c3f[_0x35829e(0x1f1)],_0x533c3f['height']);wrapper&&(wrapper['style']['width']='100%',wrapper[_0x35829e(0x1b8)][_0x35829e(0x1a8)]=_0x35829e(0x1ea));const _0x1515f9=document['getElementById'](_0x35829e(0x1c1));if(_0x1515f9){const _0x2844f3=performance['now']();if(!lastColorScanAt||_0x2844f3-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x1a549c=scanImageColors();renderScanPanel(_0x1a549c),_0x1515f9['style'][_0x35829e(0x1e0)]='',lastColorScanAt=_0x2844f3;}}}function uuidv4(){const _0xf1d28b=_0x797a;if(typeof crypto!==_0xf1d28b(0x1bf)&&typeof crypto[_0xf1d28b(0x1bd)]==='function')try{return crypto['randomUUID']();}catch(_0x26780f){}return _0xf1d28b(0x1a3)['replace'](/[xy]/g,_0x51e08b=>{const _0x258907=_0xf1d28b,_0x5f1cdd=Math[_0x258907(0x1ab)]()*0x10|0x0,_0x3876c9=_0x51e08b==='x'?_0x5f1cdd:_0x5f1cdd&0x3|0x8;return _0x3876c9[_0x258907(0x1c3)](0x10);});}function generateVersionFromNow(){const _0x386a51=_0x797a,_0x44d398=new Date(),_0x313e5f=_0x44d398[_0x386a51(0x1ca)](),_0x2d6109=String(_0x44d398['getMonth']()+0x1)[_0x386a51(0x1f4)](0x2,'0'),_0xdde41a=String(_0x44d398[_0x386a51(0x1f5)]())[_0x386a51(0x1f4)](0x2,'0'),_0x5af867=String(_0x44d398['getHours']())[_0x386a51(0x1f4)](0x2,'0'),_0x21c069=String(_0x44d398[_0x386a51(0x1e9)]())[_0x386a51(0x1f4)](0x2,'0'),_0x52c4e1=String(_0x44d398[_0x386a51(0x1ed)]())['padStart'](0x2,'0');return _0x313e5f+'.'+_0x2d6109+'.'+_0xdde41a+'.'+_0x5af867+_0x21c069+_0x52c4e1;}function _0x797a(_0x5be11b,_0x208fa2){_0x5be11b=_0x5be11b-0x1a2;const _0x1a3032=_0x1a22();let _0x598bc7=_0x1a3032[_0x5be11b];return _0x598bc7;}function ensureMetadata(_0x135040){const _0x4193ee=_0x797a,_0x4b36fd=Object[_0x4193ee(0x1fb)]({},_0x135040||{});if(!_0x4b36fd['id'])_0x4b36fd['id']=uuidv4();if(!_0x4b36fd[_0x4193ee(0x1b4)])_0x4b36fd[_0x4193ee(0x1b4)]=generateVersionFromNow();if(!_0x4b36fd[_0x4193ee(0x1c4)])_0x4b36fd[_0x4193ee(0x1c4)]=new Date()[_0x4193ee(0x1b9)]();return _0x4b36fd;}function appendMetadataToBlob(_0x32eb62,_0x377952){const _0x4c25c8=_0x797a,_0x480da7=ensureMetadata(_0x377952),_0x1b39cd=new TextEncoder(),_0x53e69=_0x1b39cd[_0x4c25c8(0x1a9)](NEZUMI_METADATA_SIG),_0x1701a5=_0x1b39cd[_0x4c25c8(0x1a9)](JSON[_0x4c25c8(0x1ac)](_0x480da7));return new Blob([_0x32eb62,_0x53e69,_0x1701a5],{'type':_0x32eb62[_0x4c25c8(0x1aa)]||'application/octet-stream'});}typeof window!==_0x17c182(0x1bf)&&(window['generateVersionFromNow']=generateVersionFromNow,window[_0x17c182(0x1bb)]=uuidv4,window[_0x17c182(0x1e7)]=ensureMetadata);