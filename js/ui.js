(function(_0x6f6dba,_0x241b88){const _0x342cab=_0x1bcf,_0x115407=_0x6f6dba();while(!![]){try{const _0x32aa0b=parseInt(_0x342cab(0x148))/0x1+-parseInt(_0x342cab(0x101))/0x2+-parseInt(_0x342cab(0x140))/0x3+parseInt(_0x342cab(0x10f))/0x4+-parseInt(_0x342cab(0x17c))/0x5+-parseInt(_0x342cab(0x16b))/0x6*(-parseInt(_0x342cab(0xff))/0x7)+-parseInt(_0x342cab(0x144))/0x8*(parseInt(_0x342cab(0x112))/0x9);if(_0x32aa0b===_0x241b88)break;else _0x115407['push'](_0x115407['shift']());}catch(_0x4b64d4){_0x115407['push'](_0x115407['shift']());}}}(_0x171d,0x619a8));const _0x4bfc00=(function(){let _0x4ccf16=!![];return function(_0x43f332,_0x14260c){const _0x539252=_0x4ccf16?function(){const _0x2b6f2b=_0x1bcf;if(_0x14260c){const _0x2bf635=_0x14260c[_0x2b6f2b(0x173)](_0x43f332,arguments);return _0x14260c=null,_0x2bf635;}}:function(){};return _0x4ccf16=![],_0x539252;};}()),_0x3e9f3c=_0x4bfc00(this,function(){const _0x38c3af=_0x1bcf;return _0x3e9f3c[_0x38c3af(0x13f)]()[_0x38c3af(0x155)](_0x38c3af(0x16e))[_0x38c3af(0x13f)]()[_0x38c3af(0x134)](_0x3e9f3c)[_0x38c3af(0x155)](_0x38c3af(0x16e));});function _0x171d(){const _0x4665bd=['„Ç≥„Éû)','Êñ∞„Åó„ÅÑÂêçÂâç„ÇíÂÖ•Âäõ','.palette-color','name','ÊèèÁîª„Åß„Åç„Å™„ÅÑ„É¨„Ç§„É§„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÉÅ„É•„Éº','position','fixed','onsuccess','#newProjCancelBtn','px,\x20','height','getElementById','center','.toggle-btn','touchstart','selected','#newProjName','.section-content','transparent','contains','preventDefault','left','2485777pvTBHZ','block','1301408pHWPDc','menu-toggle-btn','deleteDatabase','layer-info','projectList','\x20/\x20','rgba(0,0,0,0.3)','warn','div','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','inline-block','main-container','layerList','onclick','2290988WbxccF','layer-row','span','99maXdNq','max','objectStoreNames','frame-thumb','querySelector','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§','onerror','button','activeFrame','top','translate(','offsetCells','click','close','projectCount','layer-thumb\x20large','ÈÄèÊòé\x20/\x200%','visible','floor','clearRect','none','remove','#newProjW','target','sidebar-open','project-name','innerHTML','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíË§áË£Ω','add','touchAction','querySelectorAll','hidden','dark','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;padding:18px;border-radius:8px;min-width:260px;text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:0\x200\x208px\x200;\x22>Ëâ≤„Å®ÈÄèÊòé„ÇíÈÅ∏Êäû</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22dlgColor\x22\x20value=\x22','constructor','zIndex','boolean','body','IndexedDB\x20„ÅÆ„Çπ„Éà„Ç¢„ÅåÂ≠òÂú®„Åó„Å™„ÅÑ„Åü„ÇÅÂÜç‰ΩúÊàê„ÅåÂøÖË¶Å„Åß„Åô','width','justifyContent','Ë°®Á§∫„Åô„Çã','min','absolute','inset','toString','1312761nrAsqh','currentColorSwatch','relative','textContent','270616ZBOHBP','createObjectStore','title','classList','674642ENLSDH','layerCount','className','disabled','layers','light','drawImage','\x20ÈÄèÊòéÂ∫¶','alignItems','style','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÈÄèÊòéÂ∫¶(0-100):\x20<input\x20type=\x22number\x22\x20id=\x22dlgAlpha\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','innerWidth','8px','search','#dlgAlpha','frame-btn','trim','\x22\x20style=\x22width:72px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgTransparentBtn\x22\x20type=\x22button\x22\x20style=\x22margin-left:8px;\x22>ÈÄèÊòé</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:8px;justify-content:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgOkBtn\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgCancelBtn\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','overflow','#newProjOkBtn','activeLayer','flex','new-project-dialog','toolsToggleBtn','getContext','createElement','save','documentElement','layer-btn','frame-item','length','stopPropagation','100vw','sidebar','canvas','12cJXHnZ','display','üëÅÔ∏è‚Äçüó®Ô∏è','(((.+)+)+)+$','#000000','100vh','color-dialog','frameCount','apply','value','startCell','active','3000','touchcancel','layer-btn\x20layer-vis-btn','layer-label','\x20active','487195MkubAr','appendChild','open','#dlgCancelBtn','error','#dlgColor','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','#dlgOkBtn','addEventListener','background','translate','menu-toggle-btn-close','frames'];_0x171d=function(){return _0x4665bd;};return _0x171d();}function _0x1bcf(_0x373112,_0x31e43c){_0x373112=_0x373112-0xde;const _0x2a6b33=_0x171d();let _0x3e9f3c=_0x2a6b33[_0x373112];return _0x3e9f3c;}_0x3e9f3c();function updateCurrentColorSwatch(){const _0x44d8f9=_0x1bcf,_0x22e8e1=document[_0x44d8f9(0xf4)](_0x44d8f9(0x141));if(!_0x22e8e1)return;const _0x3747d5=document[_0x44d8f9(0xf4)]('currentColorInfoText');_0x22e8e1[_0x44d8f9(0x12c)]='',_0x22e8e1['style']['position']=_0x44d8f9(0x142),_0x22e8e1['style']['overflow']=_0x44d8f9(0x131);let _0x36e86f=document[_0x44d8f9(0x161)](_0x44d8f9(0x109));_0x36e86f[_0x44d8f9(0x151)][_0x44d8f9(0xee)]=_0x44d8f9(0x13d),_0x36e86f['style'][_0x44d8f9(0x13e)]='0',_0x36e86f[_0x44d8f9(0x151)]['borderRadius']=_0x44d8f9(0x154),_0x36e86f[_0x44d8f9(0x151)][_0x44d8f9(0xe5)]=_0x44d8f9(0xe2);let _0xfbab3f=document[_0x44d8f9(0x161)]('div');_0xfbab3f['style'][_0x44d8f9(0xee)]=_0x44d8f9(0x13d),_0xfbab3f[_0x44d8f9(0x151)][_0x44d8f9(0x13e)]='0',_0xfbab3f[_0x44d8f9(0x151)]['borderRadius']=_0x44d8f9(0x154);const _0x3658ac=Math['round']((currentAlpha||0x0)*0x64);if(currentColor===_0x44d8f9(0xfb)||currentAlpha===0x0){_0xfbab3f['style']['background']=_0x44d8f9(0x126),_0x22e8e1[_0x44d8f9(0x146)]='ÈÄèÊòé';if(_0x3747d5)_0x3747d5[_0x44d8f9(0x143)]=_0x44d8f9(0x122);}else{_0xfbab3f['style'][_0x44d8f9(0xe5)]=hexToRgbaCss(currentColor,currentAlpha),_0x22e8e1['title']=currentAlpha<0x1?currentColor+_0x44d8f9(0x14f)+_0x3658ac+'%':currentColor;if(_0x3747d5)_0x3747d5[_0x44d8f9(0x143)]=currentColor+_0x44d8f9(0x106)+_0x3658ac+'%';}_0x22e8e1['appendChild'](_0x36e86f),_0x22e8e1[_0x44d8f9(0x17d)](_0xfbab3f);}function updateProjectUI(){const _0x45f950=_0x1bcf,_0x89136f=document['getElementById'](_0x45f950(0x105));_0x89136f[_0x45f950(0x12c)]='';for(let _0x1b0c25=0x0;_0x1b0c25<projects[_0x45f950(0x166)];_0x1b0c25++){const _0x26b174=document[_0x45f950(0x161)]('div');_0x26b174['className']='project-item'+(_0x1b0c25===activeProject?'\x20active':''),_0x26b174[_0x45f950(0x10e)]=()=>{activeProject=_0x1b0c25,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();},_0x26b174['oncontextmenu']=_0x265fd1=>{const _0x3f8856=_0x45f950;_0x265fd1[_0x3f8856(0xfd)](),showRenameProjectDialog(_0x1b0c25);};let _0x419f68=null;const _0x34608c=()=>{_0x419f68=setTimeout(()=>{showRenameProjectDialog(_0x1b0c25);},0x258);},_0xaba588=()=>{if(_0x419f68)clearTimeout(_0x419f68);_0x419f68=null;};_0x26b174[_0x45f950(0xe4)](_0x45f950(0xf7),_0x34608c,{'passive':!![]}),_0x26b174[_0x45f950(0xe4)]('touchend',_0xaba588,{'passive':!![]}),_0x26b174[_0x45f950(0xe4)](_0x45f950(0x178),_0xaba588,{'passive':!![]});const _0x2e5340=document['createElement'](_0x45f950(0x111));_0x2e5340[_0x45f950(0x14a)]=_0x45f950(0x12b),_0x2e5340[_0x45f950(0x143)]=projects[_0x1b0c25]['name']||'ÁîªÂÉè'+(_0x1b0c25+0x1),_0x2e5340[_0x45f950(0x146)]='„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ',_0x2e5340['onclick']=_0x26a2da=>{const _0x14337a=_0x45f950;_0x26a2da[_0x14337a(0x167)](),editProjectName(_0x1b0c25,_0x2e5340);},_0x26b174['appendChild'](_0x2e5340);const _0x49bbbb=document[_0x45f950(0x161)]('button');_0x49bbbb[_0x45f950(0x143)]='ÂâäÈô§',_0x49bbbb[_0x45f950(0x14a)]='project-btn',_0x49bbbb[_0x45f950(0x14b)]=projects[_0x45f950(0x166)]===0x1,_0x49bbbb['onclick']=_0x1dd3b0=>{const _0x4fcf48=_0x45f950;_0x1dd3b0[_0x4fcf48(0x167)](),removeProjectAt(_0x1b0c25);},_0x26b174[_0x45f950(0x17d)](_0x49bbbb),_0x89136f[_0x45f950(0x17d)](_0x26b174);}document[_0x45f950(0xf4)](_0x45f950(0x120))['textContent']='('+projects[_0x45f950(0x166)]+'Êûö)';}function showRenameProjectDialog(_0x44aaed){const _0x4bef1f=_0x1bcf,_0x4bd024=projects[_0x44aaed],_0x3edecd=_0x4bd024&&_0x4bd024[_0x4bef1f(0xec)]?_0x4bd024[_0x4bef1f(0xec)]:'ÁîªÂÉè'+(_0x44aaed+0x1),_0x2ed2ae=prompt(_0x4bef1f(0xea),_0x3edecd);if(_0x2ed2ae==null)return;const _0x20d871=_0x2ed2ae['trim']();projects[_0x44aaed][_0x4bef1f(0xec)]=_0x20d871||_0x3edecd,updateProjectUI();}function showNewProjectDialog(_0x1d3655){const _0x111544=_0x1bcf;let _0x53e8b4=document[_0x111544(0xf4)]('new-project-dialog');if(_0x53e8b4)_0x53e8b4['remove']();const _0x412443=document['createElement']('div');_0x412443['id']=_0x111544(0x15e),_0x412443[_0x111544(0x151)][_0x111544(0xee)]=_0x111544(0xef),_0x412443[_0x111544(0x151)][_0x111544(0xfe)]='0',_0x412443[_0x111544(0x151)]['top']='0',_0x412443[_0x111544(0x151)][_0x111544(0x139)]=_0x111544(0x168),_0x412443[_0x111544(0x151)][_0x111544(0xf3)]=_0x111544(0x170),_0x412443[_0x111544(0x151)][_0x111544(0xe5)]=_0x111544(0x107),_0x412443[_0x111544(0x151)][_0x111544(0x16c)]=_0x111544(0x15d),_0x412443[_0x111544(0x151)][_0x111544(0x150)]=_0x111544(0xf5),_0x412443[_0x111544(0x151)]['justifyContent']=_0x111544(0xf5),_0x412443[_0x111544(0x151)][_0x111544(0x135)]=_0x111544(0x177),_0x412443[_0x111544(0x12c)]='\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè'+(projects['length']+0x1)+_0x111544(0x10a),document['body'][_0x111544(0x17d)](_0x412443),_0x412443['querySelector'](_0x111544(0x15b))[_0x111544(0x10e)]=()=>{const _0x372d66=_0x111544,_0x5273f6=parseInt(_0x412443[_0x372d66(0x116)](_0x372d66(0x128))[_0x372d66(0x174)],0xa),_0x32e042=parseInt(_0x412443['querySelector']('#newProjH')[_0x372d66(0x174)],0xa),_0x176bef=_0x412443[_0x372d66(0x116)](_0x372d66(0xf9))[_0x372d66(0x174)][_0x372d66(0x158)]();_0x412443[_0x372d66(0x127)]();if(_0x1d3655)_0x1d3655(_0x5273f6,_0x32e042,_0x176bef);},_0x412443[_0x111544(0x116)](_0x111544(0xf1))[_0x111544(0x10e)]=()=>{const _0x2a1870=_0x111544;_0x412443[_0x2a1870(0x127)]();};}function updateFrameUI(){const _0x52bb6e=_0x1bcf,_0xafc667=document[_0x52bb6e(0xf4)]('frameList'),_0x4d2f8a=getCurrentProject();if(!_0x4d2f8a||!_0x4d2f8a[_0x52bb6e(0xe8)])return;_0xafc667[_0x52bb6e(0x12c)]='';for(let _0x35b6f0=0x0;_0x35b6f0<_0x4d2f8a[_0x52bb6e(0xe8)][_0x52bb6e(0x166)];_0x35b6f0++){const _0x4038b8=document['createElement'](_0x52bb6e(0x109));_0x4038b8[_0x52bb6e(0x14a)]=_0x52bb6e(0x165)+(_0x35b6f0===_0x4d2f8a[_0x52bb6e(0x11a)]?_0x52bb6e(0x17b):''),_0x4038b8[_0x52bb6e(0x10e)]=()=>{_0x4d2f8a['activeFrame']=_0x35b6f0,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x481768=document[_0x52bb6e(0x161)](_0x52bb6e(0x16a));_0x481768['className']=_0x52bb6e(0x115),_0x481768[_0x52bb6e(0x139)]=0x20,_0x481768[_0x52bb6e(0xf3)]=0x20;let _0x530074=_0x481768[_0x52bb6e(0x160)]('2d',{'willReadFrequently':!![]});_0x530074[_0x52bb6e(0x125)](0x0,0x0,0x20,0x20);for(let _0x44d687=0x0;_0x44d687<_0x4d2f8a['frames'][_0x35b6f0][_0x52bb6e(0x14c)][_0x52bb6e(0x166)];_0x44d687++){const _0x2cbeae=_0x4d2f8a[_0x52bb6e(0xe8)][_0x35b6f0][_0x52bb6e(0x14c)][_0x44d687];_0x2cbeae&&_0x2cbeae[_0x52bb6e(0x16a)]&&_0x530074['drawImage'](_0x2cbeae[_0x52bb6e(0x16a)],0x0,0x0,_0x481768[_0x52bb6e(0x139)],_0x481768['height']);}_0x4038b8['appendChild'](_0x481768);const _0x26f6a0=document['createElement'](_0x52bb6e(0x111));_0x26f6a0[_0x52bb6e(0x143)]='F'+(_0x35b6f0+0x1),_0x4038b8['appendChild'](_0x26f6a0);const _0x5bc9e1=document[_0x52bb6e(0x161)](_0x52bb6e(0x119));_0x5bc9e1[_0x52bb6e(0x143)]='ÂâäÈô§',_0x5bc9e1[_0x52bb6e(0x14a)]=_0x52bb6e(0x157),_0x5bc9e1[_0x52bb6e(0x14b)]=_0x4d2f8a[_0x52bb6e(0xe8)]['length']===0x1,_0x5bc9e1[_0x52bb6e(0x10e)]=_0x2c8997=>{const _0x349cbe=_0x52bb6e;_0x2c8997[_0x349cbe(0x167)](),removeFrameAt(_0x35b6f0);},_0x4038b8[_0x52bb6e(0x17d)](_0x5bc9e1),_0xafc667[_0x52bb6e(0x17d)](_0x4038b8);}document[_0x52bb6e(0xf4)](_0x52bb6e(0x172))[_0x52bb6e(0x143)]='('+_0x4d2f8a['frames']['length']+_0x52bb6e(0xe9);}function updateLayerUI(){const _0x129ad5=_0x1bcf,{layers:_0x2ca524,activeLayer:_0x23e1b6}=getCurrentFrame();document[_0x129ad5(0xf4)](_0x129ad5(0x149))[_0x129ad5(0x143)]='('+_0x2ca524[_0x129ad5(0x166)]+'Êûö)';const _0x367b50=document[_0x129ad5(0xf4)](_0x129ad5(0x10d));_0x367b50[_0x129ad5(0x12c)]='';for(let _0x20e942=_0x2ca524[_0x129ad5(0x166)]-0x1;_0x20e942>=0x0;_0x20e942--){const _0x44af46=document[_0x129ad5(0x161)]('div');_0x44af46['className']='layer-item'+(_0x20e942===_0x23e1b6?_0x129ad5(0x17b):''),_0x44af46[_0x129ad5(0x10e)]=_0x2bfe31=>{const _0x4147a7=_0x129ad5;if(_0x2bfe31[_0x4147a7(0x129)]['classList'][_0x4147a7(0xfc)](_0x4147a7(0x164)))return;getCurrentFrame()[_0x4147a7(0x15c)]=_0x20e942,updateLayerUI(),redrawAll();};const _0x1e03ff=document[_0x129ad5(0x161)]('div');_0x1e03ff[_0x129ad5(0x14a)]=_0x129ad5(0x110);const _0xbd7059=document['createElement']('canvas');_0xbd7059[_0x129ad5(0x14a)]=_0x129ad5(0x121),_0xbd7059[_0x129ad5(0x139)]=0x30,_0xbd7059[_0x129ad5(0xf3)]=0x30;const _0x316cc8=_0xbd7059[_0x129ad5(0x160)]('2d');_0x316cc8['clearRect'](0x0,0x0,_0xbd7059[_0x129ad5(0x139)],_0xbd7059[_0x129ad5(0xf3)]),_0x316cc8['globalAlpha']=_0x2ca524[_0x20e942][_0x129ad5(0x123)]===![]?0.3:0x1;let _0x3c7e34=null;if(_0x2ca524[_0x20e942]instanceof HTMLCanvasElement)_0x3c7e34=_0x2ca524[_0x20e942];else _0x2ca524[_0x20e942][_0x129ad5(0x16a)]instanceof HTMLCanvasElement&&(_0x3c7e34=_0x2ca524[_0x20e942][_0x129ad5(0x16a)]);_0x3c7e34&&_0x3c7e34[_0x129ad5(0x139)]>0x0&&_0x3c7e34[_0x129ad5(0xf3)]>0x0?_0x316cc8['drawImage'](_0x3c7e34,0x0,0x0,_0xbd7059[_0x129ad5(0x139)],_0xbd7059[_0x129ad5(0xf3)]):console[_0x129ad5(0x108)](_0x129ad5(0xed),_0x2ca524[_0x20e942]);_0x1e03ff[_0x129ad5(0x17d)](_0xbd7059);const _0x51b66a=document['createElement'](_0x129ad5(0x109));_0x51b66a[_0x129ad5(0x14a)]=_0x129ad5(0x104);const _0x5cd5e4=document[_0x129ad5(0x161)](_0x129ad5(0x109));_0x5cd5e4[_0x129ad5(0x143)]='„É¨„Ç§„É§„Éº'+(_0x20e942+0x1),_0x5cd5e4[_0x129ad5(0x14a)]=_0x129ad5(0x17a),_0x51b66a[_0x129ad5(0x17d)](_0x5cd5e4);const _0x58bfc3=document[_0x129ad5(0x161)](_0x129ad5(0x109));_0x58bfc3[_0x129ad5(0x14a)]='layer-actions';const _0x49482f=document[_0x129ad5(0x161)](_0x129ad5(0x119));_0x49482f[_0x129ad5(0x14a)]=_0x129ad5(0x179),_0x49482f['title']=_0x2ca524[_0x20e942][_0x129ad5(0x123)]===![]?_0x129ad5(0x13b):'ÈùûË°®Á§∫„Å´„Åô„Çã',_0x49482f[_0x129ad5(0x12c)]=_0x2ca524[_0x20e942][_0x129ad5(0x123)]===![]?_0x129ad5(0x16d):'üëÅÔ∏è',_0x49482f[_0x129ad5(0x10e)]=_0x14f14d=>{const _0xdbfc12=_0x129ad5;_0x14f14d['stopPropagation'](),_0x2ca524[_0x20e942][_0xdbfc12(0x123)]=!_0x2ca524[_0x20e942]['visible'],updateLayerUI(),redrawAll();},_0x58bfc3[_0x129ad5(0x17d)](_0x49482f);const _0x44edba=document[_0x129ad5(0x161)](_0x129ad5(0x119));_0x44edba[_0x129ad5(0x14a)]=_0x129ad5(0x164),_0x44edba['textContent']='Ë§áË£Ω',_0x44edba[_0x129ad5(0x146)]=_0x129ad5(0x12d),_0x44edba[_0x129ad5(0x10e)]=_0x126861=>{const _0x49efa7=_0x129ad5;_0x126861[_0x49efa7(0x167)](),duplicateLayerAt(_0x20e942);},_0x58bfc3[_0x129ad5(0x17d)](_0x44edba);const _0x121b7c=document[_0x129ad5(0x161)](_0x129ad5(0x119));_0x121b7c[_0x129ad5(0x143)]='‚Üë',_0x121b7c['className']=_0x129ad5(0x164),_0x121b7c[_0x129ad5(0x146)]='‰∏ä„Å´ÁßªÂãï',_0x121b7c[_0x129ad5(0x14b)]=_0x20e942===_0x2ca524[_0x129ad5(0x166)]-0x1,_0x121b7c[_0x129ad5(0x10e)]=_0x39a964=>{const _0x35b716=_0x129ad5;_0x39a964['stopPropagation']();if(_0x20e942<_0x2ca524[_0x35b716(0x166)]-0x1)swapLayer(_0x20e942,_0x20e942+0x1);},_0x58bfc3[_0x129ad5(0x17d)](_0x121b7c);const _0x514361=document['createElement'](_0x129ad5(0x119));_0x514361[_0x129ad5(0x143)]='‚Üì',_0x514361[_0x129ad5(0x14a)]='layer-btn',_0x514361['title']='‰∏ã„Å´ÁßªÂãï',_0x514361[_0x129ad5(0x14b)]=_0x20e942===0x0,_0x514361[_0x129ad5(0x10e)]=_0x3c1bd1=>{const _0x501992=_0x129ad5;_0x3c1bd1[_0x501992(0x167)]();if(_0x20e942>0x0)swapLayer(_0x20e942,_0x20e942-0x1);},_0x58bfc3[_0x129ad5(0x17d)](_0x514361);const _0x1a3765=document[_0x129ad5(0x161)]('button');_0x1a3765[_0x129ad5(0x143)]='ÂâäÈô§',_0x1a3765[_0x129ad5(0x14a)]='layer-btn',_0x1a3765[_0x129ad5(0x146)]=_0x129ad5(0x117),_0x1a3765['disabled']=_0x2ca524[_0x129ad5(0x166)]===0x1,_0x1a3765[_0x129ad5(0x10e)]=_0x5b03bf=>{_0x5b03bf['stopPropagation'](),removeLayerAt(_0x20e942);},_0x58bfc3[_0x129ad5(0x17d)](_0x1a3765),_0x51b66a[_0x129ad5(0x17d)](_0x58bfc3),_0x1e03ff['appendChild'](_0x51b66a),_0x44af46[_0x129ad5(0x17d)](_0x1e03ff),_0x367b50['appendChild'](_0x44af46);}}function toggleTheme(){const _0x5b0928=_0x1bcf;applyTheme(document[_0x5b0928(0x163)]['getAttribute']('data-theme')===_0x5b0928(0x132)?_0x5b0928(0x14d):_0x5b0928(0x132));}function openDB(){return new Promise((_0x4c9ddb,_0x51baa5)=>{const _0x2ad3f0=_0x1bcf,_0x3a427e=indexedDB[_0x2ad3f0(0xde)](dbName,0x2);_0x3a427e['onupgradeneeded']=()=>{const _0x52d0ca=_0x2ad3f0,_0x23a907=_0x3a427e['result'];!_0x23a907[_0x52d0ca(0x114)][_0x52d0ca(0xfc)](storeName)&&_0x23a907[_0x52d0ca(0x145)](storeName);},_0x3a427e[_0x2ad3f0(0xf0)]=()=>{const _0x87a5a2=_0x2ad3f0,_0x1e02a9=_0x3a427e['result'];if(!_0x1e02a9[_0x87a5a2(0x114)][_0x87a5a2(0xfc)](storeName)){_0x1e02a9[_0x87a5a2(0x11f)](),indexedDB[_0x87a5a2(0x103)](dbName),_0x51baa5(new Error(_0x87a5a2(0x138)));return;}_0x4c9ddb(_0x1e02a9);},_0x3a427e[_0x2ad3f0(0x118)]=()=>_0x51baa5(_0x3a427e[_0x2ad3f0(0xe0)]);});}function openColorDialog(){const _0xaf6222=_0x1bcf;if(document[_0xaf6222(0xf4)](_0xaf6222(0x171)))return;const _0x14fc69=document[_0xaf6222(0x161)]('div');_0x14fc69['id']=_0xaf6222(0x171),_0x14fc69[_0xaf6222(0x151)][_0xaf6222(0xee)]=_0xaf6222(0xef),_0x14fc69['style']['left']='0',_0x14fc69[_0xaf6222(0x151)][_0xaf6222(0x11b)]='0',_0x14fc69['style'][_0xaf6222(0x139)]='100vw',_0x14fc69['style'][_0xaf6222(0xf3)]=_0xaf6222(0x170),_0x14fc69['style'][_0xaf6222(0x16c)]=_0xaf6222(0x15d),_0x14fc69['style']['alignItems']='center',_0x14fc69[_0xaf6222(0x151)][_0xaf6222(0x13a)]='center',_0x14fc69[_0xaf6222(0x151)][_0xaf6222(0x135)]='4000',_0x14fc69[_0xaf6222(0x151)][_0xaf6222(0xe5)]='rgba(0,0,0,0.25)',_0x14fc69[_0xaf6222(0x12c)]=_0xaf6222(0x133)+(currentColor===_0xaf6222(0xfb)?'#000000':currentColor)+_0xaf6222(0x152)+Math['round'](currentAlpha*0x64)+_0xaf6222(0x159),document['body'][_0xaf6222(0x17d)](_0x14fc69),_0x14fc69[_0xaf6222(0x116)]('#dlgTransparentBtn')[_0xaf6222(0x10e)]=()=>{const _0x5eb0c8=_0xaf6222,_0x59ee98=_0x14fc69[_0x5eb0c8(0x116)]('#dlgAlpha');_0x59ee98[_0x5eb0c8(0x174)]=0x0,_0x14fc69[_0x5eb0c8(0x116)](_0x5eb0c8(0xe1))[_0x5eb0c8(0x174)]=_0x5eb0c8(0x16f);},_0x14fc69[_0xaf6222(0x116)](_0xaf6222(0xe3))[_0xaf6222(0x10e)]=()=>{const _0xffc5c=_0xaf6222,_0x38c26a=_0x14fc69[_0xffc5c(0x116)]('#dlgColor')[_0xffc5c(0x174)],_0x2cf529=Math[_0xffc5c(0x113)](0x0,Math[_0xffc5c(0x13c)](0x64,parseInt(_0x14fc69[_0xffc5c(0x116)](_0xffc5c(0x156))[_0xffc5c(0x174)],0xa)||0x0));if(_0x2cf529===0x0){currentAlpha=0x0,currentColor=_0xffc5c(0xfb);if(colorPicker)colorPicker[_0xffc5c(0x174)]=_0xffc5c(0x16f);}else{currentAlpha=_0x2cf529/0x64,currentColor=_0x38c26a;if(colorPicker)colorPicker['value']=_0x38c26a;}updateCurrentColorSwatch(),document[_0xffc5c(0x130)](_0xffc5c(0xeb))['forEach'](_0x52818e=>_0x52818e['classList'][_0xffc5c(0x127)](_0xffc5c(0xf8))),_0x14fc69['remove']();},_0x14fc69[_0xaf6222(0x116)](_0xaf6222(0xdf))['onclick']=()=>_0x14fc69[_0xaf6222(0x127)](),_0x14fc69[_0xaf6222(0xe4)](_0xaf6222(0x11e),_0x5d7cbd=>{const _0x3479f5=_0xaf6222;if(_0x5d7cbd[_0x3479f5(0x129)]===_0x14fc69)_0x14fc69[_0x3479f5(0x127)]();});}function updateLayerMove(_0x5d6e44){const _0x5d47db=_0x1bcf;if(!layerMoveState[_0x5d47db(0x176)])return;const _0x69333=getCanvasCoords(_0x5d6e44),_0x8fc67d={'x':Math['floor'](_0x69333['x']/cellSize),'y':Math[_0x5d47db(0x124)](_0x69333['y']/cellSize)};layerMoveState[_0x5d47db(0x11d)]['x']=_0x8fc67d['x']-layerMoveState[_0x5d47db(0x175)]['x'],layerMoveState['offsetCells']['y']=_0x8fc67d['y']-layerMoveState[_0x5d47db(0x175)]['y'],redrawAll();const _0x2352d2=getCurrentFrame();if(!_0x2352d2)return;const _0x360eef=_0x2352d2[_0x5d47db(0x15c)];if(_0x360eef==null)return;ctx[_0x5d47db(0x162)](),ctx[_0x5d47db(0xe6)](layerMoveState[_0x5d47db(0x11d)]['x']*cellSize,layerMoveState[_0x5d47db(0x11d)]['y']*cellSize),ctx[_0x5d47db(0x14e)](_0x2352d2['layers'][_0x360eef][_0x5d47db(0x16a)],0x0,0x0),ctx['restore']();}function toggleSection(_0x2913bf){const _0x5d156b=_0x1bcf,_0x48c8d4=document[_0x5d156b(0xf4)](_0x2913bf),_0x3464d1=_0x48c8d4[_0x5d156b(0x116)](_0x5d156b(0xfa)),_0x3f59f2=_0x48c8d4['querySelector'](_0x5d156b(0xf6));_0x3464d1[_0x5d156b(0x151)][_0x5d156b(0x16c)]===_0x5d156b(0x126)?(_0x3464d1[_0x5d156b(0x151)][_0x5d156b(0x16c)]='',_0x3f59f2[_0x5d156b(0x143)]='‚ñº'):(_0x3464d1[_0x5d156b(0x151)][_0x5d156b(0x16c)]=_0x5d156b(0x126),_0x3f59f2[_0x5d156b(0x143)]='‚ñ≤');}function toggleSideMenu(_0x2539b7){const _0x503089=_0x1bcf,_0x1ff26d=document[_0x503089(0xf4)](_0x503089(0x169)),_0x1c652e=document[_0x503089(0xf4)](_0x503089(0x10c)),_0x16004c=document[_0x503089(0xf4)](_0x503089(0x102)),_0x2555c2=document[_0x503089(0xf4)](_0x503089(0xe7)),_0x122aca=_0x1ff26d['classList'][_0x503089(0xfc)](_0x503089(0xde));let _0x3081bf=typeof _0x2539b7===_0x503089(0x136)?_0x2539b7:!_0x122aca;_0x3081bf?(_0x1ff26d[_0x503089(0x147)]['add'](_0x503089(0xde)),_0x1c652e[_0x503089(0x147)][_0x503089(0x12e)](_0x503089(0x12a)),document[_0x503089(0x137)][_0x503089(0x151)][_0x503089(0x15a)]=_0x503089(0x131),document[_0x503089(0x137)]['style']['touchAction']=_0x503089(0x126),window[_0x503089(0x153)]<=0x384&&(_0x2555c2['style'][_0x503089(0x16c)]=_0x503089(0x100),_0x16004c[_0x503089(0x151)][_0x503089(0x16c)]=_0x503089(0x126))):(_0x1ff26d[_0x503089(0x147)][_0x503089(0x127)](_0x503089(0xde)),_0x1c652e[_0x503089(0x147)][_0x503089(0x127)](_0x503089(0x12a)),document['body'][_0x503089(0x151)][_0x503089(0x15a)]='',document[_0x503089(0x137)]['style'][_0x503089(0x12f)]='',window[_0x503089(0x153)]<=0x384&&(_0x2555c2[_0x503089(0x151)][_0x503089(0x16c)]=_0x503089(0x126),_0x16004c[_0x503089(0x151)][_0x503089(0x16c)]=_0x503089(0x100)));}function updateMenuBtnDisplay(){const _0x11a60c=_0x1bcf,_0x374b82=document[_0x11a60c(0xf4)](_0x11a60c(0x169)),_0x19c463=document[_0x11a60c(0xf4)](_0x11a60c(0x10c)),_0x440e47=document['getElementById'](_0x11a60c(0x102)),_0x5a6c26=document[_0x11a60c(0xf4)](_0x11a60c(0xe7)),_0x3b1848=document['getElementById'](_0x11a60c(0x15f));if(window[_0x11a60c(0x153)]>0x384){_0x374b82['classList'][_0x11a60c(0x127)](_0x11a60c(0xde)),_0x19c463[_0x11a60c(0x147)][_0x11a60c(0x127)](_0x11a60c(0x12a)),_0x5a6c26[_0x11a60c(0x151)][_0x11a60c(0x16c)]='none',_0x440e47[_0x11a60c(0x151)][_0x11a60c(0x16c)]='none';if(_0x3b1848)_0x3b1848['style'][_0x11a60c(0x16c)]=window[_0x11a60c(0x153)]>0x44c?_0x11a60c(0x126):_0x11a60c(0x10b);document[_0x11a60c(0x137)]['style'][_0x11a60c(0x15a)]='',document[_0x11a60c(0x137)]['style']['touchAction']='';}else{_0x374b82['classList'][_0x11a60c(0xfc)](_0x11a60c(0xde))?(_0x5a6c26['style'][_0x11a60c(0x16c)]=_0x11a60c(0x100),_0x440e47[_0x11a60c(0x151)][_0x11a60c(0x16c)]=_0x11a60c(0x126)):(_0x5a6c26[_0x11a60c(0x151)]['display']=_0x11a60c(0x126),_0x440e47['style'][_0x11a60c(0x16c)]=_0x11a60c(0x100));if(_0x3b1848)_0x3b1848[_0x11a60c(0x151)][_0x11a60c(0x16c)]=_0x11a60c(0x10b);}}function updateTransform(){const _0x5750d9=_0x1bcf;canvas[_0x5750d9(0x151)]['transform']=_0x5750d9(0x11c)+posX+_0x5750d9(0xf2)+posY+'px)\x20scale('+scale+')';}