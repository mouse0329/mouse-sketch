function _0x1312(_0x1f350d,_0x452386){_0x1f350d=_0x1f350d-0xa3;const _0x31530b=_0x5a20();let _0x4bf0e5=_0x31530b[_0x1f350d];return _0x4bf0e5;}const _0x3ca5b1=_0x1312;function _0x5a20(){const _0x4c01b1=['center','\x20MB\x20(limit\x20','warn','shiftKey','info','boxShadow','getContext','Picked\x20transparent','about-dialog','getBoundingClientRect','100vw','Picked\x20color','canvas-container','36PbnLje','reduce','\x20x\x20','#aboutCloseBtn','resize','finally','rgba(0,0,0,0.35)','inline-block','textarea','idle','parentElement','#000000','gpuRenderer','touches','undo\x20shortcut\x20error','grab','canvas\x20要素が見つからないチュー','nextSibling','nudgeDownBtn','touchend','number','open','NEZUMI_BUILD_META','プロジェクト数:\x20','0\x202px\x2010px\x20rgba(0,0,0,0.15)','projects','value','min','light','bottom','copyLayerBtn','672721kZfeox','alignItems','click','pen','jsHeapSizeLimit','#aboutPerfRefreshBtn','target','select','push','#aboutPerfBtn','createElement','推定FPS:\x20','metaKey','IndexedDB\x20からの読み込みに失敗したチュー','1391060wROIVH','justifyContent','body','\x20\x20アクティブ:\x20','preventDefault','appendChild','addEventListener','getImageData','isArray','usedJSHeapSize','nudgeRightBtn','flex','disabled','clientX','ontouchmove','fill','currentColorSwatch','合計フレーム:\x20','gpuVendor','\x0a\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:var(--surface);padding:18px\x2022px;border-radius:10px;min-width:280px;max-width:720px;text-align:left;box-shadow:0\x202px\x2024px\x20rgba(0,0,0,0.25);\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>ネズミスケッチについて</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div><img\x20src=\x22/img/nezumi-drawing_icon.webp\x22\x20alt=\x22ネズミスケッチロゴ\x22\x20style=\x22width:35px;height:auto;\x22><img\x20src=\x22/img/nezumisuketitext.png\x22style=\x22width:250px;height:auto;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>ネズミスケッチは、簡単にドット絵アニメーションを作成できるツールです。</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>バージョン:\x20<b>','66942vGLxlH','activeProject','parentNode','3782830maSkyO','メモリ(概算):\x20used\x20','pasteLayerBtn','relocateRightToolbar\x20error','deviceMemory','isFinite','zoomValue','div','function','display','</b>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20バージョンID:\x20','nezumi-theme','then','right-panel','penSize','Shift','showAboutDialog','height','colorPicker','abs','nudgeStep','setAttribute','onmouseleave','\x20GB','UserAgent:\x20','oninput','exportWidthPx','top','toLowerCase','getElementById','floor','計測中...','WEBGL_debug_renderer_info','#aboutPerfArea','error','tagName','CPUコア数:\x20','block','MAC','nudgeUpBtn','offsetHeight','計測日時:\x20','toggle','constructor','removeAttribute','fixed','pan','キャンバス:\x20','Device\x20Memory:\x20','remove','apply','nudgeLeftBtn','948ZQSnLt','42RuhxtE','totalFrames','wheel','wheel\x20zoom\x20error','ontouchcancel','onload','querySelector','textContent','frames','onmouseup','userAgent','onchange','ontouchstart','undefined','4907832URQLgC','mobile-open','width','100vh','position','now','UA/Browser\x20info\x20may\x20be\x20limited\x20by\x20privacy\x20settings.','right','canvas','pasteLayer\x20error','grabbing','animSpeedRange','penMode','toolbar-mobile','transparent','style','DOMContentLoaded','exportHeightPx','hypot','UNMASKED_RENDERER_WEBGL','totalLayers','618nsnrzA','manual\x20save\x20shortcut\x20error','計測エラー','onmousedown','clientY','fps','scale','innerHTML','zIndex','getParameter','cursor','round','memory','startAutoSaveInterval','input','\x20\x20位置:\x20(','layers','timestamp','keydown','redo\x20shortcut\x20error','footer','innerWidth','auto','hardwareConcurrency','experimental-webgl','totalJSHeapSize','classList','8px','posY','ontouchend','cellSize','webgl','openColorPickerBtn','toString','map','max','copyLayer\x20error','posX','touchcancel','exp','frontDimBtn','none','deltaY','activeElement','toolsToggleBtn','left','onclick','getItem','animSpeedValue','ctrlKey','keyup','touchstart','right-toolbar','search','1841016rfkYxx','version','\x20MB\x20/\x20total\x20','length','key','touchmove','padStart'];_0x5a20=function(){return _0x4c01b1;};return _0x5a20();}(function(_0x3b0472,_0x18f2a1){const _0xb73a36=_0x1312,_0x909028=_0x3b0472();while(!![]){try{const _0xd4566d=-parseInt(_0xb73a36(0x12b))/0x1*(parseInt(_0xb73a36(0x107))/0x2)+-parseInt(_0xb73a36(0xd0))/0x3+-parseInt(_0xb73a36(0x161))/0x4+-parseInt(_0xb73a36(0xbc))/0x5+-parseInt(_0xb73a36(0x108))/0x6*(parseInt(_0xb73a36(0xae))/0x7)+parseInt(_0xb73a36(0x116))/0x8+parseInt(_0xb73a36(0x175))/0x9*(parseInt(_0xb73a36(0xd3))/0xa);if(_0xd4566d===_0x18f2a1)break;else _0x909028['push'](_0x909028['shift']());}catch(_0x4cd017){_0x909028['push'](_0x909028['shift']());}}}(_0x5a20,0x61b32));const _0x13740a=(function(){let _0x16eba0=!![];return function(_0x2312bf,_0x101d33){const _0x2e80e1=_0x16eba0?function(){const _0xa73f5d=_0x1312;if(_0x101d33){const _0x478819=_0x101d33[_0xa73f5d(0x105)](_0x2312bf,arguments);return _0x101d33=null,_0x478819;}}:function(){};return _0x16eba0=![],_0x2e80e1;};}()),_0x4bf0e5=_0x13740a(this,function(){const _0x2e72cd=_0x1312;return _0x4bf0e5[_0x2e72cd(0x14c)]()[_0x2e72cd(0x160)]('(((.+)+)+)+$')[_0x2e72cd(0x14c)]()[_0x2e72cd(0xfe)](_0x4bf0e5)[_0x2e72cd(0x160)]('(((.+)+)+)+$');});_0x4bf0e5(),window[_0x3ca5b1(0xc2)](_0x3ca5b1(0x126),()=>{const _0x24af44=_0x3ca5b1,_0xff55c5=document[_0x24af44(0xf0)]('penAlphaMode');_0xff55c5&&(_0xff55c5[_0x24af44(0xa9)]=penAlphaMode,_0xff55c5[_0x24af44(0x113)]=_0x50a703=>{penAlphaMode=_0x50a703['target']['value'];});const _0x1988f9=document[_0x24af44(0xf0)]('themeToggleBtn');if(_0x1988f9){const _0x1a7427=localStorage[_0x24af44(0x15a)](_0x24af44(0xde))||_0x24af44(0xab);applyTheme(_0x1a7427),_0x1988f9[_0x24af44(0xc2)](_0x24af44(0xb0),()=>{toggleTheme();});}window[_0x24af44(0xc2)]('resize',updateMenuBtnDisplay),updateMenuBtnDisplay();const _0x54dc60=document[_0x24af44(0xf0)](_0x24af44(0x157)),_0x42d427=document[_0x24af44(0xf0)](_0x24af44(0xe0)),_0x5b5804=document['getElementById'](_0x24af44(0x15f)),_0x4910ea=document['querySelector']('.tool-btn-container'),_0x497961=document[_0x24af44(0x10e)](_0x24af44(0x13f)),_0x23148a=_0x5b5804?_0x5b5804[_0x24af44(0xd2)]:null,_0x5a538f=_0x5b5804?_0x5b5804[_0x24af44(0x186)]:null;let _0x22d2ad=null;function _0x5c2cbd(){const _0x4df919=_0x24af44;try{if(!_0x5b5804)return;const _0x21c4b5=window[_0x4df919(0x140)],_0x4195b5=_0x21c4b5<=0x384;if(_0x4195b5&&_0x4910ea&&_0x5b5804[_0x4df919(0xd2)]!==_0x4910ea){if(_0x22d2ad===null)_0x22d2ad=_0x5b5804['getAttribute'](_0x4df919(0x125))||'';_0x4910ea[_0x4df919(0xc1)](_0x5b5804),_0x5b5804[_0x4df919(0x145)]['add'](_0x4df919(0x123));const _0x31b870=_0x497961?_0x497961[_0x4df919(0xfb)]:0x38;_0x5b5804[_0x4df919(0x125)][_0x4df919(0x11a)]=_0x4df919(0x100),_0x5b5804[_0x4df919(0x125)][_0x4df919(0x158)]=_0x4df919(0x146),_0x5b5804['style'][_0x4df919(0x11d)]=_0x4df919(0x146),_0x5b5804[_0x4df919(0x125)][_0x4df919(0xac)]=_0x31b870+0x8+'px',_0x5b5804[_0x4df919(0x125)][_0x4df919(0x133)]=0x1770,_0x5b5804['style'][_0x4df919(0x118)]=_0x4df919(0x141),_0x5b5804[_0x4df919(0x125)][_0x4df919(0x16d)]=_0x4df919(0xa7),_0x5b5804[_0x4df919(0x125)][_0x4df919(0xdc)]=_0x4df919(0x154);}else{if(!_0x4195b5&&_0x23148a&&_0x5b5804[_0x4df919(0xd2)]!==_0x23148a){_0x5a538f&&_0x5a538f[_0x4df919(0xd2)]===_0x23148a?_0x23148a['insertBefore'](_0x5b5804,_0x5a538f):_0x23148a[_0x4df919(0xc1)](_0x5b5804);_0x5b5804[_0x4df919(0x145)][_0x4df919(0x104)]('toolbar-mobile');if(_0x22d2ad!==null){if(_0x22d2ad==='')_0x5b5804[_0x4df919(0xff)](_0x4df919(0x125));else _0x5b5804[_0x4df919(0xe8)](_0x4df919(0x125),_0x22d2ad);_0x22d2ad=null;}}else{if(_0x4195b5&&_0x5b5804[_0x4df919(0xd2)]===_0x4910ea){const _0x23804a=_0x497961?_0x497961['offsetHeight']:0x38;_0x5b5804[_0x4df919(0x125)]['bottom']=_0x23804a+0x8+'px';}}}}catch(_0x19131b){console[_0x4df919(0xf5)](_0x4df919(0xd6),_0x19131b);}}_0x54dc60&&(_0x54dc60[_0x24af44(0x125)][_0x24af44(0xdc)]=_0x24af44(0x17c),_0x54dc60['addEventListener'](_0x24af44(0xb0),()=>{const _0x5283d0=_0x24af44;if(window[_0x5283d0(0x140)]<=0x384&&_0x5b5804){const _0x2b959c=_0x5b5804[_0x5283d0(0x125)][_0x5283d0(0xdc)]!==_0x5283d0(0x154);_0x5b5804[_0x5283d0(0x125)][_0x5283d0(0xdc)]=_0x2b959c?_0x5283d0(0x154):_0x5283d0(0xf8),_0x5b5804[_0x5283d0(0x145)][_0x5283d0(0xfd)](_0x5283d0(0x117),!_0x2b959c);}else _0x42d427&&_0x42d427['classList']['toggle'](_0x5283d0(0xa4));}));window[_0x24af44(0xc2)](_0x24af44(0x179),_0x5c2cbd),_0x5c2cbd();const _0x16139d=document[_0x24af44(0xf0)]('zoomSlider');_0x16139d&&(_0x16139d[_0x24af44(0xec)]=_0x25cff3=>setZoomValue(_0x25cff3[_0x24af44(0xb4)][_0x24af44(0xa9)]));const _0x1bdcc2=document[_0x24af44(0xf0)](_0x24af44(0x14b)),_0x298672=document[_0x24af44(0xf0)](_0x24af44(0xcc));function _0x513e96(){const _0x30ebf2=_0x24af44;if(typeof showColorPickerDialog!==_0x30ebf2(0xdb))return;const _0x5c641b=currentColor==='transparent'||!currentColor?_0x30ebf2(0x180):currentColor;showColorPickerDialog({'color':_0x5c641b,'alpha':typeof currentAlpha===_0x30ebf2(0xa3)?currentAlpha:0x1,'onChange':({hex:_0x2e7c7a,rgba:_0x459215,a:_0x2bc2ad})=>{const _0x379e0c=_0x30ebf2;try{_0x459215&&_0x459215[0x3]===0x0?(currentColor=_0x379e0c(0x124),currentAlpha=0x0):(currentColor=_0x2e7c7a||(_0x459215?rgbToHex(_0x459215[0x0],_0x459215[0x1],_0x459215[0x2]):_0x5c641b),currentAlpha=_0x459215&&typeof _0x459215[0x3]==='number'?_0x459215[0x3]:_0x2bc2ad||0x1);updateCurrentColorSwatch();const _0x55f9fb=document[_0x379e0c(0xf0)](_0x379e0c(0xe5));if(_0x55f9fb&&currentColor!==_0x379e0c(0x124))_0x55f9fb['value']=currentColor;}catch(_0x5a5abf){console['error']('color\x20picker\x20onChange\x20error',_0x5a5abf);}},'onOk':({hex:_0x4f0b38,rgba:_0x596ad8,a:_0x35509d})=>{const _0x466bb2=_0x30ebf2;_0x596ad8&&_0x596ad8[0x3]===0x0?(currentColor=_0x466bb2(0x124),currentAlpha=0x0):(currentColor=_0x4f0b38||(_0x596ad8?rgbToHex(_0x596ad8[0x0],_0x596ad8[0x1],_0x596ad8[0x2]):_0x5c641b),currentAlpha=_0x596ad8&&typeof _0x596ad8[0x3]===_0x466bb2(0xa3)?_0x596ad8[0x3]:_0x35509d||0x1);updateCurrentColorSwatch();const _0x400136=document[_0x466bb2(0xf0)](_0x466bb2(0xe5));if(_0x400136&&currentColor!==_0x466bb2(0x124))_0x400136[_0x466bb2(0xa9)]=currentColor;}});}if(_0x1bdcc2)_0x1bdcc2[_0x24af44(0xc2)](_0x24af44(0xb0),_0x513e96);if(_0x298672)_0x298672[_0x24af44(0xc2)]('click',_0x513e96);const _0x3ce772=document['getElementById'](_0x24af44(0xad)),_0x44d208=document[_0x24af44(0xf0)](_0x24af44(0xd5));if(_0x3ce772)_0x3ce772[_0x24af44(0xc2)](_0x24af44(0xb0),()=>{const _0x4e1ad3=_0x24af44;try{copyLayer();}catch(_0x4f0171){console[_0x4e1ad3(0xf5)](_0x4e1ad3(0x14f),_0x4f0171);}});_0x44d208&&(_0x44d208[_0x24af44(0xc2)](_0x24af44(0xb0),()=>{const _0x5cbbe7=_0x24af44;try{pasteLayer();}catch(_0x3403e7){console[_0x5cbbe7(0xf5)](_0x5cbbe7(0x11f),_0x3403e7);}}),_0x44d208[_0x24af44(0xc8)]=!copiedLayerDataUrl);let _0x23f882=![],_0x3c0ae7=null;function _0x4be192(_0x31d78d){const _0x298b39=_0x24af44;if(!_0x31d78d)return![];const _0x1b6d96=_0x31d78d[_0x298b39(0xf6)]&&_0x31d78d[_0x298b39(0xf6)][_0x298b39(0xef)]();if(_0x1b6d96===_0x298b39(0x139)||_0x1b6d96===_0x298b39(0x17d)||_0x1b6d96===_0x298b39(0xb5))return!![];if(_0x31d78d['isContentEditable'])return!![];return![];}window[_0x24af44(0xc2)](_0x24af44(0x13d),_0x1d5032=>{const _0x1ac534=_0x24af44;_0x1d5032[_0x1ac534(0x165)]===_0x1ac534(0xe2)&&!_0x23f882&&!_0x4be192(document['activeElement'])&&(_0x3c0ae7=currentTool,setTool(_0x1ac534(0x101)),_0x23f882=!![]);},{'passive':!![]}),window[_0x24af44(0xc2)](_0x24af44(0x15d),_0x37061b=>{const _0x20e3c6=_0x24af44;if(_0x37061b[_0x20e3c6(0x165)]===_0x20e3c6(0xe2)&&_0x23f882){if(currentTool===_0x20e3c6(0x101)&&_0x3c0ae7)setTool(_0x3c0ae7);_0x3c0ae7=null,_0x23f882=![];}},{'passive':!![]}),window[_0x24af44(0xc2)](_0x24af44(0x13d),_0xba5744=>{const _0x231242=_0x24af44;if(_0x4be192(document[_0x231242(0x156)]))return;const _0x450580=navigator['platform']&&navigator['platform']['toUpperCase']()['indexOf'](_0x231242(0xf9))>=0x0,_0xc3009d=_0x450580?_0xba5744[_0x231242(0xba)]:_0xba5744[_0x231242(0x15c)];if(!_0xc3009d)return;const _0x46d3f7=(_0xba5744[_0x231242(0x165)]||'')[_0x231242(0xef)]();if(_0x46d3f7==='z'&&!_0xba5744[_0x231242(0x16b)]){_0xba5744[_0x231242(0xc0)]();try{undo();}catch(_0x13bb95){console[_0x231242(0xf5)](_0x231242(0x183),_0x13bb95);}}else{if(_0x46d3f7==='z'&&_0xba5744[_0x231242(0x16b)]||_0x46d3f7==='y'){_0xba5744[_0x231242(0xc0)]();try{redo();}catch(_0x24bdc3){console['error'](_0x231242(0x13e),_0x24bdc3);}}else{if(_0x46d3f7==='s'){_0xba5744[_0x231242(0xc0)]();try{if(typeof manualSave===_0x231242(0xdb))manualSave();}catch(_0x37eecd){console[_0x231242(0xf5)](_0x231242(0x12c),_0x37eecd);}}}}},{'passive':![]}),window[_0x24af44(0xe3)]=function(){const _0x3550de=_0x24af44;if(document[_0x3550de(0xf0)](_0x3550de(0x170)))return;const _0x5eb98d=document[_0x3550de(0xb8)](_0x3550de(0xda));_0x5eb98d['id']=_0x3550de(0x170),_0x5eb98d[_0x3550de(0x125)][_0x3550de(0x11a)]=_0x3550de(0x100),_0x5eb98d[_0x3550de(0x125)]['left']='0',_0x5eb98d[_0x3550de(0x125)][_0x3550de(0xee)]='0',_0x5eb98d['style'][_0x3550de(0x118)]=_0x3550de(0x172),_0x5eb98d[_0x3550de(0x125)][_0x3550de(0xe4)]=_0x3550de(0x119),_0x5eb98d[_0x3550de(0x125)][_0x3550de(0xdc)]=_0x3550de(0xc7),_0x5eb98d[_0x3550de(0x125)][_0x3550de(0xaf)]=_0x3550de(0x168),_0x5eb98d['style'][_0x3550de(0xbd)]=_0x3550de(0x168),_0x5eb98d[_0x3550de(0x125)][_0x3550de(0x133)]=0x2710,_0x5eb98d[_0x3550de(0x125)]['background']=_0x3550de(0x17b);const _0x4954a2=window[_0x3550de(0xa5)]||{},_0x1bd1e9=_0x4954a2[_0x3550de(0x162)]||'不明',_0x26d719=_0x4954a2['id']||'不明';_0x5eb98d[_0x3550de(0x132)]=_0x3550de(0xcf)+_0x1bd1e9+_0x3550de(0xdd)+_0x26d719+'</p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p>©\x202025\x20nezumi-sketch\x20<a\x20href=\x22https://github.com/mouse0329\x22\x20rel=\x22noopener\x20noreferrer\x22>github\x20mouse0329</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<p><a\x20href=\x22/terms\x22>利用規約</a>\u3000<a\x20href=\x22/license\x22>ライセンス</a>\u3000<a\x20href=\x22/about\x22>紹介ページ</a></p>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-top:10px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22aboutPerfBtn\x22>パフォーマンス状況を表示</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22aboutPerfRefreshBtn\x22\x20style=\x22display:none;margin-left:8px;\x22>更新</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20id=\x22aboutPerfArea\x22\x20style=\x22margin-top:12px;font-size:13px;display:none;white-space:pre-wrap;background:var(--surface2,#f6f6f6);padding:8px;border-radius:6px;\x22></div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22text-align:right;margin-top:10px;\x22><button\x20id=\x22aboutCloseBtn\x22>閉じる</button></div>\x0a\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x3550de(0xbe)][_0x3550de(0xc1)](_0x5eb98d),_0x5eb98d['querySelector'](_0x3550de(0x178))['onclick']=()=>_0x5eb98d[_0x3550de(0x104)](),_0x5eb98d[_0x3550de(0xc2)](_0x3550de(0xb0),_0x211410=>{const _0x25785d=_0x3550de;if(_0x211410['target']===_0x5eb98d)_0x5eb98d[_0x25785d(0x104)]();});try{const _0xc2bc8=_0x5eb98d[_0x3550de(0x10e)](_0x3550de(0xb7)),_0x159501=_0x5eb98d['querySelector'](_0x3550de(0xb3)),_0x5cac71=_0x5eb98d['querySelector'](_0x3550de(0xf4)),_0x3d40d2=async()=>{const _0x4edfd6=_0x3550de;if(!_0x5cac71)return;_0x5cac71[_0x4edfd6(0x125)]['display']=_0x4edfd6(0xf8);if(_0x159501)_0x159501[_0x4edfd6(0x125)]['display']='inline-block';_0x5cac71['textContent']=_0x4edfd6(0xf2);try{const _0x10fd83=await collectPerformanceInfo();_0x5cac71[_0x4edfd6(0x10f)]=formatPerformanceInfo(_0x10fd83);}catch(_0x359610){_0x5cac71[_0x4edfd6(0x10f)]=_0x4edfd6(0x12d),console[_0x4edfd6(0xf5)](_0x359610);}};if(_0xc2bc8)_0xc2bc8[_0x3550de(0x159)]=_0x3d40d2;if(_0x159501)_0x159501['onclick']=_0x3d40d2;}catch(_0x53a0e6){console[_0x3550de(0x16a)]('about\x20perf\x20init\x20failed',_0x53a0e6);}};const _0x33bf61=document[_0x24af44(0xf0)](_0x24af44(0xfa)),_0x1c8f05=document[_0x24af44(0xf0)](_0x24af44(0x187)),_0x1786f1=document[_0x24af44(0xf0)](_0x24af44(0x106)),_0x3cbeef=document[_0x24af44(0xf0)](_0x24af44(0xc6)),_0x4c1655=document['getElementById'](_0x24af44(0xe7));function _0x6df736(){const _0x4319b0=_0x24af44;let _0x409231=0x1;if(_0x4c1655){_0x409231=parseInt(_0x4c1655[_0x4319b0(0xa9)],0xa)||0x1;if(_0x409231<0x1)_0x409231=0x1;}return _0x409231;}if(_0x33bf61)_0x33bf61[_0x24af44(0xc2)](_0x24af44(0xb0),()=>nudgeActiveLayer(0x0,-_0x6df736()));if(_0x1c8f05)_0x1c8f05[_0x24af44(0xc2)](_0x24af44(0xb0),()=>nudgeActiveLayer(0x0,_0x6df736()));if(_0x1786f1)_0x1786f1['addEventListener'](_0x24af44(0xb0),()=>nudgeActiveLayer(-_0x6df736(),0x0));if(_0x3cbeef)_0x3cbeef['addEventListener'](_0x24af44(0xb0),()=>nudgeActiveLayer(_0x6df736(),0x0));const _0x2863de=document[_0x24af44(0xf0)](_0x24af44(0x153));_0x2863de&&_0x2863de[_0x24af44(0xc2)](_0x24af44(0xb0),()=>toggleFrontLayerDim());try{toggleGrid(showGrid);}catch(_0x31d22f){}try{toggleFrontLayerDim(dimFrontLayers);}catch(_0x36396a){}try{updateAnimUi(![]);}catch(_0x45d968){}});async function collectPerformanceInfo(){const _0x1aac5e=_0x3ca5b1,_0x5e45e2={};_0x5e45e2[_0x1aac5e(0x13c)]=Date[_0x1aac5e(0x11b)](),_0x5e45e2[_0x1aac5e(0x112)]=typeof navigator!==_0x1aac5e(0x115)&&navigator['userAgent']?navigator[_0x1aac5e(0x112)]:'',_0x5e45e2[_0x1aac5e(0xa8)]=Array[_0x1aac5e(0xc4)](projects)?projects[_0x1aac5e(0x164)]:0x0,_0x5e45e2[_0x1aac5e(0xd1)]=typeof activeProject==='number'?activeProject:0x0,_0x5e45e2[_0x1aac5e(0x109)]=Array[_0x1aac5e(0xc4)](projects)?projects[_0x1aac5e(0x176)]((_0x2f4574,_0xa5ac3f)=>_0x2f4574+(Array['isArray'](_0xa5ac3f[_0x1aac5e(0x110)])?_0xa5ac3f[_0x1aac5e(0x110)]['length']:0x0),0x0):0x0,_0x5e45e2[_0x1aac5e(0x12a)]=Array[_0x1aac5e(0xc4)](projects)?projects['reduce']((_0x2a0cb5,_0xd5f100)=>_0x2a0cb5+(Array[_0x1aac5e(0xc4)](_0xd5f100[_0x1aac5e(0x110)])?_0xd5f100['frames'][_0x1aac5e(0x176)]((_0x2eff8b,_0x43c826)=>_0x2eff8b+(Array[_0x1aac5e(0xc4)](_0x43c826[_0x1aac5e(0x13b)])?_0x43c826[_0x1aac5e(0x13b)]['length']:0x0),0x0):0x0),0x0):0x0,_0x5e45e2[_0x1aac5e(0x11e)]=typeof canvas!==_0x1aac5e(0x115)&&canvas?{'width':canvas[_0x1aac5e(0x118)],'height':canvas[_0x1aac5e(0xe4)]}:null,_0x5e45e2[_0x1aac5e(0x149)]=typeof cellSize!==_0x1aac5e(0x115)?cellSize:null,_0x5e45e2[_0x1aac5e(0x131)]=typeof scale!==_0x1aac5e(0x115)?scale:null,_0x5e45e2[_0x1aac5e(0x150)]=typeof posX!=='undefined'?posX:null,_0x5e45e2[_0x1aac5e(0x147)]=typeof posY!==_0x1aac5e(0x115)?posY:null,_0x5e45e2[_0x1aac5e(0x142)]=typeof navigator!==_0x1aac5e(0x115)&&navigator[_0x1aac5e(0x142)]?navigator['hardwareConcurrency']:null,_0x5e45e2[_0x1aac5e(0xd7)]=typeof navigator!==_0x1aac5e(0x115)&&navigator[_0x1aac5e(0xd7)]?navigator['deviceMemory']:null;try{typeof performance!==_0x1aac5e(0x115)&&performance['memory']&&(_0x5e45e2[_0x1aac5e(0x137)]={'usedJSHeapSize':performance['memory']['usedJSHeapSize'],'totalJSHeapSize':performance[_0x1aac5e(0x137)][_0x1aac5e(0x144)],'jsHeapSizeLimit':performance[_0x1aac5e(0x137)]['jsHeapSizeLimit']});}catch(_0x3f143c){}try{const _0x543e6a=document[_0x1aac5e(0xb8)]('canvas'),_0x66c1ac=_0x543e6a[_0x1aac5e(0x16e)](_0x1aac5e(0x14a))||_0x543e6a[_0x1aac5e(0x16e)](_0x1aac5e(0x143));if(_0x66c1ac){const _0x19e41d=_0x66c1ac['getExtension'](_0x1aac5e(0xf3));_0x19e41d&&(_0x5e45e2[_0x1aac5e(0xce)]=_0x66c1ac[_0x1aac5e(0x134)](_0x19e41d['UNMASKED_VENDOR_WEBGL']),_0x5e45e2[_0x1aac5e(0x181)]=_0x66c1ac[_0x1aac5e(0x134)](_0x19e41d[_0x1aac5e(0x129)]));}}catch(_0x3fce06){}try{const _0x5d9046=0x1f4;let _0x5064fd=0x0,_0x2302e5=performance[_0x1aac5e(0x11b)]();await new Promise(_0x290fa9=>{function _0x14ce0a(_0x4a5c73){_0x5064fd++;if(_0x4a5c73-_0x2302e5>=_0x5d9046)_0x290fa9();else requestAnimationFrame(_0x14ce0a);}requestAnimationFrame(_0x14ce0a);});const _0x50d1a3=performance[_0x1aac5e(0x11b)]()-_0x2302e5;_0x5e45e2[_0x1aac5e(0x130)]=Math[_0x1aac5e(0x136)](_0x5064fd/(_0x50d1a3/0x3e8));}catch(_0x38bb5b){_0x5e45e2[_0x1aac5e(0x130)]=null;}return _0x5e45e2;}function formatPerformanceInfo(_0x5465e9){const _0x595902=_0x3ca5b1,_0x281c0d=[];_0x281c0d['push'](_0x595902(0xfc)+new Date(_0x5465e9[_0x595902(0x13c)])['toLocaleString']()),_0x281c0d[_0x595902(0xb6)](_0x595902(0xeb)+_0x5465e9[_0x595902(0x112)]),_0x281c0d[_0x595902(0xb6)](_0x595902(0xa6)+_0x5465e9[_0x595902(0xa8)]+_0x595902(0xbf)+_0x5465e9[_0x595902(0xd1)]),_0x281c0d['push'](_0x595902(0xcd)+_0x5465e9[_0x595902(0x109)]+'\x20\x20合計レイヤー:\x20'+_0x5465e9[_0x595902(0x12a)]);if(_0x5465e9[_0x595902(0x11e)])_0x281c0d[_0x595902(0xb6)](_0x595902(0x102)+_0x5465e9[_0x595902(0x11e)][_0x595902(0x118)]+_0x595902(0x177)+_0x5465e9[_0x595902(0x11e)][_0x595902(0xe4)]+'\x20px\x20\x20セルサイズ:\x20'+_0x5465e9[_0x595902(0x149)]);_0x281c0d[_0x595902(0xb6)]('表示スケール:\x20'+_0x5465e9[_0x595902(0x131)]+_0x595902(0x13a)+Math[_0x595902(0x136)](_0x5465e9[_0x595902(0x150)])+',\x20'+Math[_0x595902(0x136)](_0x5465e9[_0x595902(0x147)])+')');if(typeof _0x5465e9['fps']!==_0x595902(0x115)&&_0x5465e9['fps']!==null)_0x281c0d['push'](_0x595902(0xb9)+_0x5465e9[_0x595902(0x130)]);_0x5465e9[_0x595902(0x137)]&&_0x281c0d[_0x595902(0xb6)](_0x595902(0xd4)+Math[_0x595902(0x136)](_0x5465e9[_0x595902(0x137)][_0x595902(0xc5)]/0x400/0x400)+_0x595902(0x163)+Math[_0x595902(0x136)](_0x5465e9[_0x595902(0x137)][_0x595902(0x144)]/0x400/0x400)+_0x595902(0x169)+Math['round'](_0x5465e9[_0x595902(0x137)][_0x595902(0xb2)]/0x400/0x400)+'\x20MB)');if(_0x5465e9[_0x595902(0x142)])_0x281c0d['push'](_0x595902(0xf7)+_0x5465e9[_0x595902(0x142)]);if(_0x5465e9[_0x595902(0xd7)])_0x281c0d[_0x595902(0xb6)](_0x595902(0x103)+_0x5465e9[_0x595902(0xd7)]+_0x595902(0xea));if(_0x5465e9[_0x595902(0xce)]||_0x5465e9[_0x595902(0x181)])_0x281c0d[_0x595902(0xb6)]('GPU:\x20'+(_0x5465e9[_0x595902(0xce)]||'')+'\x20'+(_0x5465e9[_0x595902(0x181)]||''));return _0x281c0d[_0x595902(0xb6)](_0x595902(0x11c)),_0x281c0d['join']('\x0a');}window[_0x3ca5b1(0x10d)]=()=>{const _0x25b6cd=_0x3ca5b1;canvas=document['getElementById'](_0x25b6cd(0x11e)),wrapper=document['getElementById'](_0x25b6cd(0x174))||canvas?.[_0x25b6cd(0x17f)]||null;if(!canvas){console[_0x25b6cd(0xf5)](_0x25b6cd(0x185));return;}ctx=canvas[_0x25b6cd(0x16e)]('2d'),projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x25b6cd(0xb1)),updateCurrentColorSwatch(),loadPaletteFromDB()[_0x25b6cd(0xdf)](()=>createPalette());const _0x436bf5=document[_0x25b6cd(0xf0)](_0x25b6cd(0xe1));if(_0x436bf5)_0x436bf5[_0x25b6cd(0xa9)]=penSize;const _0x369e98=document[_0x25b6cd(0xf0)](_0x25b6cd(0x122));if(_0x369e98)_0x369e98['value']=penMode;const _0x5dd364=document['getElementById'](_0x25b6cd(0xed)),_0x2a1c01=document[_0x25b6cd(0xf0)](_0x25b6cd(0x127)),_0x48d8f9=getCurrentProject(),_0x4bc059=_0x48d8f9&&Number[_0x25b6cd(0xd8)](_0x48d8f9[_0x25b6cd(0x118)])?_0x48d8f9['width']*cellSize:canvas[_0x25b6cd(0x118)],_0x1ee00c=_0x48d8f9&&Number[_0x25b6cd(0xd8)](_0x48d8f9['height'])?_0x48d8f9[_0x25b6cd(0xe4)]*cellSize:canvas[_0x25b6cd(0xe4)];if(_0x5dd364)_0x5dd364[_0x25b6cd(0xa9)]=_0x4bc059;if(_0x2a1c01)_0x2a1c01[_0x25b6cd(0xa9)]=_0x1ee00c;const _0xb285f9=document[_0x25b6cd(0xf0)](_0x25b6cd(0x121)),_0x22bda5=document[_0x25b6cd(0xf0)](_0x25b6cd(0x15b));_0xb285f9&&_0x22bda5&&((!Number['isFinite'](animationDelay)||animationDelay<=0x0)&&(animationDelay=0x12c),_0xb285f9[_0x25b6cd(0xa9)]=animationDelay,_0x22bda5['value']=animationDelay,_0xb285f9[_0x25b6cd(0xec)]=_0x57c615=>{const _0x325b96=_0x25b6cd;_0x22bda5[_0x325b96(0xa9)]=_0x57c615[_0x325b96(0xb4)][_0x325b96(0xa9)],setAnimationDelay(_0x57c615[_0x325b96(0xb4)]['value']);},_0x22bda5['onchange']=_0x27263e=>{const _0x5e5341=_0x25b6cd;let _0x3730d6=Math['max'](0xa,Math[_0x5e5341(0xaa)](0x1388,parseInt(_0x27263e[_0x5e5341(0xb4)][_0x5e5341(0xa9)],0xa)||animationDelay));_0xb285f9[_0x5e5341(0xa9)]=_0x3730d6,_0x22bda5[_0x5e5341(0xa9)]=_0x3730d6,setAnimationDelay(_0x3730d6);});canvas[_0x25b6cd(0x12e)]=handleMouseDown,canvas['onmousemove']=handleMouseMove,canvas[_0x25b6cd(0x111)]=handleMouseUp,canvas[_0x25b6cd(0xe9)]=handleMouseUp,canvas[_0x25b6cd(0x114)]=handleTouchStart,canvas[_0x25b6cd(0xca)]=handleTouchMove,canvas[_0x25b6cd(0x148)]=handleTouchEnd,canvas[_0x25b6cd(0x10c)]=handleTouchEnd,canvas[_0x25b6cd(0xc2)](_0x25b6cd(0x15e),handleTouchStart,{'passive':![]}),canvas[_0x25b6cd(0xc2)](_0x25b6cd(0x166),handleTouchMove,{'passive':![]}),canvas[_0x25b6cd(0xc2)](_0x25b6cd(0x188),handleTouchEnd,{'passive':![]}),canvas[_0x25b6cd(0xc2)](_0x25b6cd(0x151),handleTouchEnd,{'passive':![]}),canvas[_0x25b6cd(0xc2)](_0x25b6cd(0x10a),function(_0x53cb){const _0x4c7243=_0x25b6cd;try{if(!_0x53cb[_0x4c7243(0x16b)])return;_0x53cb[_0x4c7243(0xc0)]();const _0x23152b=canvas[_0x4c7243(0x171)](),_0x531280=_0x53cb[_0x4c7243(0xc9)],_0x168a93=_0x53cb[_0x4c7243(0x12f)],_0x59413a=(_0x531280-_0x23152b[_0x4c7243(0x158)]-posX)/scale,_0x39d74e=(_0x168a93-_0x23152b['top']-posY)/scale,_0x2f9f86=Math[_0x4c7243(0x152)](-_0x53cb[_0x4c7243(0x155)]*0.0015);let _0x7cc1c6=scale*_0x2f9f86;_0x7cc1c6=Math[_0x4c7243(0xaa)](Math[_0x4c7243(0x14e)](_0x7cc1c6,0.2),0x5),posX=_0x531280-_0x23152b[_0x4c7243(0x158)]-_0x59413a*_0x7cc1c6,posY=_0x168a93-_0x23152b['top']-_0x39d74e*_0x7cc1c6,scale=_0x7cc1c6;const _0x307599=Math[_0x4c7243(0x136)](scale*0x64),_0x24a073=document[_0x4c7243(0xf0)]('zoomSlider'),_0x3c54c2=document[_0x4c7243(0xf0)](_0x4c7243(0xd9));if(_0x24a073)_0x24a073[_0x4c7243(0xa9)]=_0x307599;if(_0x3c54c2)_0x3c54c2[_0x4c7243(0x10f)]=_0x307599+'%';updateTransform();}catch(_0x3d2a75){console[_0x4c7243(0xf5)](_0x4c7243(0x10b),_0x3d2a75);}},{'passive':![]});try{showLoading('自動復元中...');}catch(_0x5f5b16){}loadProjectFromIDB()['catch'](_0x382f7b=>{const _0x326bd3=_0x25b6cd;console[_0x326bd3(0x16a)](_0x326bd3(0xbb),_0x382f7b);})[_0x25b6cd(0x17a)](()=>{const _0x2fe85b=_0x25b6cd;try{hideLoading();}catch(_0x1e932a){}if(typeof window[_0x2fe85b(0x138)]===_0x2fe85b(0xdb))window['startAutoSaveInterval']();try{if(typeof setAutosaveStatus==='function')setAutosaveStatus(_0x2fe85b(0x17e));}catch(_0x42dfde){}});};function handleMouseDown(_0x43bf65){const _0x2e3434=_0x3ca5b1;if(currentTool===_0x2e3434(0x101)){isDrawing=!![],panStart={'x':_0x43bf65[_0x2e3434(0xc9)],'y':_0x43bf65[_0x2e3434(0x12f)],'posX':posX,'posY':posY},canvas[_0x2e3434(0x125)][_0x2e3434(0x135)]='grabbing';return;}isDrawing=!![],saveHistory();const _0x2565de=getCanvasCoords(_0x43bf65),_0x1af830=Math[_0x2e3434(0xf1)](_0x2565de['x']/cellSize),_0x5e30e3=Math[_0x2e3434(0xf1)](_0x2565de['y']/cellSize);currentTool==='fill'?(fillAt(_0x1af830,_0x5e30e3),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x1af830,_0x5e30e3),lastMouse={'x':_0x1af830,'y':_0x5e30e3});}function handleMouseMove(_0x3ee2b2){const _0xf19b3e=_0x3ca5b1;if(!isDrawing)return;if(currentTool===_0xf19b3e(0x101)&&panStart){const _0x27cd3a=_0x3ee2b2[_0xf19b3e(0xc9)]-panStart['x'],_0x516b66=_0x3ee2b2[_0xf19b3e(0x12f)]-panStart['y'];posX=panStart[_0xf19b3e(0x150)]+_0x27cd3a,posY=panStart[_0xf19b3e(0x147)]+_0x516b66,updateTransform();return;}const _0x21f75f=getCanvasCoords(_0x3ee2b2),_0x5a6886=Math[_0xf19b3e(0xf1)](_0x21f75f['x']/cellSize),_0x5a0a53=Math[_0xf19b3e(0xf1)](_0x21f75f['y']/cellSize);if(!lastMouse){drawDotXY(_0x5a6886,_0x5a0a53),lastMouse={'x':_0x5a6886,'y':_0x5a0a53};return;}const _0x8313b0=_0x5a6886-lastMouse['x'],_0x412cda=_0x5a0a53-lastMouse['y'],_0x1d0ac8=Math[_0xf19b3e(0x14e)](Math[_0xf19b3e(0xe6)](_0x8313b0),Math[_0xf19b3e(0xe6)](_0x412cda));if(_0x1d0ac8<=0x1)drawDotXY(_0x5a6886,_0x5a0a53);else for(let _0x51a659=0x1;_0x51a659<=_0x1d0ac8;_0x51a659++){const _0x27defd=Math[_0xf19b3e(0x136)](lastMouse['x']+_0x8313b0*_0x51a659/_0x1d0ac8),_0x16a36a=Math[_0xf19b3e(0x136)](lastMouse['y']+_0x412cda*_0x51a659/_0x1d0ac8);drawDotXY(_0x27defd,_0x16a36a);}lastMouse={'x':_0x5a6886,'y':_0x5a0a53};}function handleMouseUp(_0x4ed09e){const _0x5ac019=_0x3ca5b1;if(currentTool==='pan'){isDrawing=![],panStart=null,canvas['style'][_0x5ac019(0x135)]='grab';return;}isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}function handleTouchStart(_0x5187df){const _0x1e2ff3=_0x3ca5b1;if(_0x5187df[_0x1e2ff3(0x182)][_0x1e2ff3(0x164)]===0x2){_0x5187df[_0x1e2ff3(0xc0)](),isPinching=!![],isDrawing=![],lastTouch=null;const _0x5aae3c=_0x5187df[_0x1e2ff3(0x182)][0x0],_0x35ae26=_0x5187df['touches'][0x1];pinchStartDistance=Math[_0x1e2ff3(0x128)](_0x35ae26[_0x1e2ff3(0xc9)]-_0x5aae3c['clientX'],_0x35ae26['clientY']-_0x5aae3c[_0x1e2ff3(0x12f)]),pinchStartMid={'clientX':(_0x5aae3c[_0x1e2ff3(0xc9)]+_0x35ae26['clientX'])/0x2,'clientY':(_0x5aae3c[_0x1e2ff3(0x12f)]+_0x35ae26[_0x1e2ff3(0x12f)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x1e2ff3(0x171)]();}else{if(_0x5187df[_0x1e2ff3(0x182)][_0x1e2ff3(0x164)]===0x1){if(colorPickMode){_0x5187df[_0x1e2ff3(0xc0)]();const _0x129551=_0x5187df[_0x1e2ff3(0x182)][0x0];onCanvasColorPick({'clientX':_0x129551[_0x1e2ff3(0xc9)],'clientY':_0x129551[_0x1e2ff3(0x12f)]});return;}_0x5187df[_0x1e2ff3(0xc0)]();if(isPinching)return;const _0x4480e1=_0x5187df[_0x1e2ff3(0x182)][0x0];if(currentTool===_0x1e2ff3(0x101)){isDrawing=!![],panStart={'x':_0x4480e1['clientX'],'y':_0x4480e1[_0x1e2ff3(0x12f)],'posX':posX,'posY':posY};if(canvas)canvas[_0x1e2ff3(0x125)][_0x1e2ff3(0x135)]=_0x1e2ff3(0x120);return;}isDrawing=!![],saveHistory();let _0x44eb35=getTouchPos(_0x5187df);lastTouch=_0x44eb35,currentTool===_0x1e2ff3(0xcb)?(fillAt(_0x44eb35['x'],_0x44eb35['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x44eb35['x'],_0x44eb35['y']);}}}function handleTouchMove(_0x568d7d){const _0x12e41d=_0x3ca5b1;if(!_0x568d7d)return;if(isPinching||_0x568d7d['touches']&&_0x568d7d[_0x12e41d(0x182)][_0x12e41d(0x164)]===0x2){_0x568d7d['preventDefault'](),isDrawing=![],lastTouch=null;const _0x468404=_0x568d7d['touches'][0x0],_0x58b95d=_0x568d7d[_0x12e41d(0x182)][0x1],_0x3d9f6a=Math[_0x12e41d(0x128)](_0x58b95d['clientX']-_0x468404[_0x12e41d(0xc9)],_0x58b95d[_0x12e41d(0x12f)]-_0x468404['clientY']),_0x47e005={'clientX':(_0x468404['clientX']+_0x58b95d[_0x12e41d(0xc9)])/0x2,'clientY':(_0x468404[_0x12e41d(0x12f)]+_0x58b95d[_0x12e41d(0x12f)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x3d9f6a||0x1;let _0x1158ee=_0x3d9f6a/pinchStartDistance||0x1,_0x3f6acd=pinchStartScale*_0x1158ee;_0x3f6acd=Math[_0x12e41d(0xaa)](Math['max'](_0x3f6acd,0.2),0x5);const _0x46a833=pinchRect||canvas[_0x12e41d(0x171)](),_0x307cc1=(pinchStartMid[_0x12e41d(0xc9)]-_0x46a833[_0x12e41d(0x158)]-pinchStartPosX)/pinchStartScale,_0x65b3cb=(pinchStartMid[_0x12e41d(0x12f)]-_0x46a833[_0x12e41d(0xee)]-pinchStartPosY)/pinchStartScale;posX=_0x47e005[_0x12e41d(0xc9)]-_0x46a833['left']-_0x307cc1*_0x3f6acd,posY=_0x47e005[_0x12e41d(0x12f)]-_0x46a833[_0x12e41d(0xee)]-_0x65b3cb*_0x3f6acd,scale=_0x3f6acd,updateTransform();return;}if(currentTool===_0x12e41d(0x101)&&panStart&&_0x568d7d['touches']&&_0x568d7d[_0x12e41d(0x182)][0x0]){_0x568d7d[_0x12e41d(0xc0)]();const _0x4f7f53=_0x568d7d[_0x12e41d(0x182)][0x0],_0x1b3835=_0x4f7f53[_0x12e41d(0xc9)]-panStart['x'],_0x2d751b=_0x4f7f53[_0x12e41d(0x12f)]-panStart['y'];posX=panStart[_0x12e41d(0x150)]+_0x1b3835,posY=panStart['posY']+_0x2d751b,updateTransform();return;}if(!isDrawing)return;if(_0x568d7d['touches']&&_0x568d7d[_0x12e41d(0x182)][_0x12e41d(0x164)]>0x1)return;_0x568d7d[_0x12e41d(0xc0)]();const _0x22a15e=getTouchPos(_0x568d7d);if(!_0x22a15e)return;if(lastTouch){const _0x23ac26=Math[_0x12e41d(0xe6)]((_0x22a15e['x']-lastTouch['x'])*cellSize),_0x288fbc=Math[_0x12e41d(0xe6)]((_0x22a15e['y']-lastTouch['y'])*cellSize);if(_0x23ac26>=PAN_CANCEL_DISTANCE||_0x288fbc>=PAN_CANCEL_DISTANCE){if(currentTool!==_0x12e41d(0xb1)){isDrawing=![];return;}}}if(lastTouch){const _0x256cd1=_0x22a15e['x']-lastTouch['x'],_0x320c1f=_0x22a15e['y']-lastTouch['y'],_0x26a102=Math[_0x12e41d(0x14e)](Math[_0x12e41d(0xe6)](_0x256cd1),Math[_0x12e41d(0xe6)](_0x320c1f));for(let _0x1d15cf=0x1;_0x1d15cf<=_0x26a102;_0x1d15cf++){const _0x10e089=Math[_0x12e41d(0x136)](lastTouch['x']+_0x256cd1*_0x1d15cf/_0x26a102),_0x5d2490=Math[_0x12e41d(0x136)](lastTouch['y']+_0x320c1f*_0x1d15cf/_0x26a102);drawDotTouch(_0x10e089,_0x5d2490);}}else drawDotTouch(_0x22a15e['x'],_0x22a15e['y']);lastTouch=_0x22a15e;}function handleTouchEnd(_0x1a9906){const _0x237d1b=_0x3ca5b1;isPinching&&_0x1a9906['touches']&&_0x1a9906[_0x237d1b(0x182)]['length']<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null);isDrawing&&(!_0x1a9906[_0x237d1b(0x182)]||_0x1a9906['touches'][_0x237d1b(0x164)]===0x0)&&saveHistory();if(_0x1a9906[_0x237d1b(0x182)]&&_0x1a9906[_0x237d1b(0x182)][_0x237d1b(0x164)]===0x1){let _0x321032=_0x1a9906['touches'][0x0];lastTouch=getTouchPos({'touches':[_0x321032]}),isDrawing=!![];if(currentTool===_0x237d1b(0x101)){panStart={'x':_0x321032[_0x237d1b(0xc9)],'y':_0x321032[_0x237d1b(0x12f)],'posX':posX,'posY':posY};if(canvas)canvas[_0x237d1b(0x125)][_0x237d1b(0x135)]=_0x237d1b(0x120);}}else{isDrawing=![],lastTouch=null;if(currentTool==='pan'){panStart=null;if(canvas)canvas[_0x237d1b(0x125)]['cursor']=_0x237d1b(0x184);}}}function onCanvasColorPick(_0x13f6c8){const _0x165b3e=_0x3ca5b1;try{const _0x356ef7=getCanvasCoords(_0x13f6c8),_0x1c19fc=Math[_0x165b3e(0xf1)](_0x356ef7['x']),_0x177e49=Math['floor'](_0x356ef7['y']),_0x12d0e3=ctx[_0x165b3e(0xc3)](_0x1c19fc,_0x177e49,0x1,0x1)['data'],_0x43528e=_0x12d0e3[0x0],_0x4efe31=_0x12d0e3[0x1],_0x1447a1=_0x12d0e3[0x2],_0xcf4074=_0x12d0e3[0x3];if(_0xcf4074===0x0){currentColor=_0x165b3e(0x124);const _0x24c2ab=document[_0x165b3e(0xf0)]('colorPicker');if(_0x24c2ab)_0x24c2ab[_0x165b3e(0xa9)]=_0x165b3e(0x180);console[_0x165b3e(0x16c)](_0x165b3e(0x16f));}else{const _0x1658c1='#'+[_0x43528e,_0x4efe31,_0x1447a1][_0x165b3e(0x14d)](_0x14bf0c=>_0x14bf0c[_0x165b3e(0x14c)](0x10)[_0x165b3e(0x167)](0x2,'0'))['join']('');currentColor=_0x1658c1;const _0xccc44d=document[_0x165b3e(0xf0)](_0x165b3e(0xe5));if(_0xccc44d)_0xccc44d[_0x165b3e(0xa9)]=_0x1658c1;console[_0x165b3e(0x16c)](_0x165b3e(0x173),_0x1658c1);}}catch(_0x1fce88){console[_0x165b3e(0xf5)]('onCanvasColorPick\x20error',_0x1fce88);}colorPickMode=![];if(canvas)canvas[_0x165b3e(0x125)]['cursor']='default';}