const a0_0x8a3065=a0_0x5921;(function(_0x23d810,_0x497845){const _0x65ba89=a0_0x5921,_0x2f2ce9=_0x23d810();while(!![]){try{const _0x2442b9=parseInt(_0x65ba89(0x201))/0x1+-parseInt(_0x65ba89(0x25f))/0x2*(-parseInt(_0x65ba89(0x199))/0x3)+parseInt(_0x65ba89(0x187))/0x4*(-parseInt(_0x65ba89(0x16b))/0x5)+-parseInt(_0x65ba89(0x253))/0x6*(parseInt(_0x65ba89(0x1ab))/0x7)+parseInt(_0x65ba89(0x129))/0x8+-parseInt(_0x65ba89(0x1a4))/0x9*(-parseInt(_0x65ba89(0x21b))/0xa)+-parseInt(_0x65ba89(0x16c))/0xb;if(_0x2442b9===_0x497845)break;else _0x2f2ce9['push'](_0x2f2ce9['shift']());}catch(_0x42899d){_0x2f2ce9['push'](_0x2f2ce9['shift']());}}}(a0_0x41a1,0x8cb73));const a0_0x2fa281=(function(){let _0x197a2d=!![];return function(_0xf70c86,_0x3e0f06){const _0x5a3ae4=_0x197a2d?function(){if(_0x3e0f06){const _0x27be64=_0x3e0f06['apply'](_0xf70c86,arguments);return _0x3e0f06=null,_0x27be64;}}:function(){};return _0x197a2d=![],_0x5a3ae4;};}()),a0_0x399cb1=a0_0x2fa281(this,function(){const _0xf925e2=a0_0x5921;return a0_0x399cb1['toString']()['search'](_0xf925e2(0x135))['toString']()[_0xf925e2(0x1b0)](a0_0x399cb1)[_0xf925e2(0x183)](_0xf925e2(0x135));});a0_0x399cb1();let canvas=document[a0_0x8a3065(0x1b4)](a0_0x8a3065(0x219)),ctx=canvas[a0_0x8a3065(0x1d8)]('2d');const wrapper=document[a0_0x8a3065(0x1b4)]('canvas-container');let cellSize=0x14,currentColor='#ff0000',currentTool=a0_0x8a3065(0x1c2),penSize=0x1,penMode=a0_0x8a3065(0x141),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x4a0251=0x10,_0x512c65=0x10,_0x48fbe=''){const _0x1b383e=a0_0x8a3065;let _0x1a9658=0x14,_0x9796e6=[],_0x20de9c=[],_0x22e0a2=[],_0x16c774=document[_0x1b383e(0x1fc)](_0x1b383e(0x219));_0x16c774[_0x1b383e(0x1f4)]=_0x4a0251*_0x1a9658,_0x16c774['height']=_0x512c65*_0x1a9658,_0x9796e6[_0x1b383e(0x169)](_0x16c774),_0x20de9c[_0x1b383e(0x169)]([]),_0x22e0a2[_0x1b383e(0x169)]([]);let _0xfb2a4e={'layers':_0x9796e6,'activeLayer':0x0,'layerHistories':_0x20de9c,'layerRedoStacks':_0x22e0a2};return{'frames':[_0xfb2a4e],'activeFrame':0x0,'width':_0x4a0251,'height':_0x512c65,'name':_0x48fbe||'ÁîªÂÉè'+(projects['length']+0x1)};}function updateProjectUI(){const _0x50ba08=a0_0x8a3065,_0x214461=document[_0x50ba08(0x1b4)]('projectList');_0x214461[_0x50ba08(0x1d5)]='';for(let _0x389b68=0x0;_0x389b68<projects[_0x50ba08(0x1d0)];_0x389b68++){const _0x35f4c6=document[_0x50ba08(0x1fc)](_0x50ba08(0x11d));_0x35f4c6[_0x50ba08(0x116)]=_0x50ba08(0x1c9)+(_0x389b68===activeProject?_0x50ba08(0x104):''),_0x35f4c6['onclick']=()=>{activeProject=_0x389b68,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x220528=document['createElement'](_0x50ba08(0x156));_0x220528[_0x50ba08(0x116)]='project-name',_0x220528[_0x50ba08(0x1da)]=projects[_0x389b68][_0x50ba08(0x16f)]||'ÁîªÂÉè'+(_0x389b68+0x1),_0x220528['title']='„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ',_0x220528[_0x50ba08(0x1e2)]=_0xe31861=>{const _0x14697a=_0x50ba08;_0xe31861[_0x14697a(0x250)](),editProjectName(_0x389b68,_0x220528);},_0x35f4c6[_0x50ba08(0x12a)](_0x220528);const _0x3d560e=document['createElement']('button');_0x3d560e[_0x50ba08(0x1da)]='ÂâäÈô§',_0x3d560e[_0x50ba08(0x116)]=_0x50ba08(0x245),_0x3d560e[_0x50ba08(0x170)]=projects[_0x50ba08(0x1d0)]===0x1,_0x3d560e[_0x50ba08(0x1e2)]=_0x4bcb26=>{const _0x391a05=_0x50ba08;_0x4bcb26[_0x391a05(0x250)](),removeProjectAt(_0x389b68);},_0x35f4c6[_0x50ba08(0x12a)](_0x3d560e),_0x214461['appendChild'](_0x35f4c6);}document[_0x50ba08(0x1b4)](_0x50ba08(0x195))[_0x50ba08(0x1da)]='('+projects[_0x50ba08(0x1d0)]+'Êûö)';}function editProjectName(_0x4b2690,_0x4a1476){const _0xe726d1=a0_0x8a3065,_0x5e0a00=document[_0xe726d1(0x1fc)](_0xe726d1(0x12b));_0x5e0a00[_0xe726d1(0x231)]=_0xe726d1(0x14c),_0x5e0a00[_0xe726d1(0x1ba)]=projects[_0x4b2690]['name']||'ÁîªÂÉè'+(_0x4b2690+0x1),_0x5e0a00[_0xe726d1(0x116)]=_0xe726d1(0x1a6),_0x5e0a00[_0xe726d1(0x15e)][_0xe726d1(0x1f4)]='80px',_0x5e0a00[_0xe726d1(0x216)]=()=>{const _0x294fdd=_0xe726d1;projects[_0x4b2690][_0x294fdd(0x16f)]=_0x5e0a00['value']['trim']()||'ÁîªÂÉè'+(_0x4b2690+0x1),updateProjectUI();},_0x5e0a00[_0xe726d1(0x25d)]=_0x4949a4=>{const _0x2680c3=_0xe726d1;if(_0x4949a4[_0x2680c3(0x145)]===_0x2680c3(0x10d))_0x5e0a00[_0x2680c3(0x1fd)]();},_0x4a1476['replaceWith'](_0x5e0a00),_0x5e0a00[_0xe726d1(0x10a)](),_0x5e0a00[_0xe726d1(0x1eb)]();}function showNewProjectDialog(_0x282648){const _0x5a69b7=a0_0x8a3065;let _0x303007=document[_0x5a69b7(0x1b4)](_0x5a69b7(0x198));if(_0x303007)_0x303007[_0x5a69b7(0x143)]();const _0x36354b=document[_0x5a69b7(0x1fc)]('div');_0x36354b['id']=_0x5a69b7(0x198),_0x36354b['style']['position']='fixed',_0x36354b[_0x5a69b7(0x15e)]['left']='0',_0x36354b[_0x5a69b7(0x15e)][_0x5a69b7(0x160)]='0',_0x36354b[_0x5a69b7(0x15e)][_0x5a69b7(0x1f4)]='100vw',_0x36354b[_0x5a69b7(0x15e)][_0x5a69b7(0x1de)]=_0x5a69b7(0x24f),_0x36354b[_0x5a69b7(0x15e)]['background']=_0x5a69b7(0x1db),_0x36354b['style']['display']=_0x5a69b7(0x121),_0x36354b[_0x5a69b7(0x15e)][_0x5a69b7(0x1ee)]=_0x5a69b7(0x1ea),_0x36354b['style']['justifyContent']=_0x5a69b7(0x1ea),_0x36354b['style']['zIndex']=_0x5a69b7(0x166),_0x36354b['innerHTML']=_0x5a69b7(0x15c)+(projects['length']+0x1)+_0x5a69b7(0x1be),document[_0x5a69b7(0x161)][_0x5a69b7(0x12a)](_0x36354b),_0x36354b[_0x5a69b7(0x1b8)](_0x5a69b7(0x1b3))[_0x5a69b7(0x1e2)]=()=>{const _0x52fa29=_0x5a69b7,_0x3e8ad1=parseInt(_0x36354b[_0x52fa29(0x1b8)](_0x52fa29(0x23c))[_0x52fa29(0x1ba)],0xa),_0x10e9d3=parseInt(_0x36354b[_0x52fa29(0x1b8)]('#newProjH')[_0x52fa29(0x1ba)],0xa),_0x3287e7=_0x36354b[_0x52fa29(0x1b8)](_0x52fa29(0x191))[_0x52fa29(0x1ba)][_0x52fa29(0x172)]();_0x36354b['remove']();if(_0x282648)_0x282648(_0x3e8ad1,_0x10e9d3,_0x3287e7);},_0x36354b[_0x5a69b7(0x1b8)]('#newProjCancelBtn')['onclick']=()=>{const _0x4cb1cc=_0x5a69b7;_0x36354b[_0x4cb1cc(0x143)]();};}function addProject(){showNewProjectDialog((_0x2083f4,_0x6c0a3a,_0x7528e4)=>{const _0x116d32=a0_0x5921;if(!Number[_0x116d32(0x12d)](_0x2083f4)||_0x2083f4<0x1)_0x2083f4=0x10;if(!Number['isFinite'](_0x6c0a3a)||_0x6c0a3a<0x1)_0x6c0a3a=0x10;projects['push'](createProject(_0x2083f4,_0x6c0a3a,_0x7528e4)),activeProject=projects[_0x116d32(0x1d0)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x143090){const _0x32652f=a0_0x8a3065;if(projects[_0x32652f(0x1d0)]<=0x1)return;projects['splice'](_0x143090,0x1);if(activeProject>=projects[_0x32652f(0x1d0)])activeProject=projects[_0x32652f(0x1d0)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x1b3452=a0_0x8a3065,_0x1431aa=document[_0x1b3452(0x1b4)](_0x1b3452(0x19f)),_0x18ea15=getCurrentProject();_0x1431aa[_0x1b3452(0x1d5)]='';for(let _0x2d0c87=0x0;_0x2d0c87<_0x18ea15[_0x1b3452(0x1b9)][_0x1b3452(0x1d0)];_0x2d0c87++){const _0xc012a7=document['createElement'](_0x1b3452(0x11d));_0xc012a7[_0x1b3452(0x116)]=_0x1b3452(0x22e)+(_0x2d0c87===_0x18ea15[_0x1b3452(0x226)]?_0x1b3452(0x104):''),_0xc012a7[_0x1b3452(0x1e2)]=()=>{const _0x34c47c=_0x1b3452;_0x18ea15[_0x34c47c(0x226)]=_0x2d0c87,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x14c892=document['createElement'](_0x1b3452(0x219));_0x14c892[_0x1b3452(0x116)]='frame-thumb',_0x14c892[_0x1b3452(0x1f4)]=0x20,_0x14c892[_0x1b3452(0x1de)]=0x20;let _0x45ac8a=_0x14c892[_0x1b3452(0x1d8)]('2d');_0x45ac8a['clearRect'](0x0,0x0,0x20,0x20);for(let _0xdbf8d0=0x0;_0xdbf8d0<_0x18ea15[_0x1b3452(0x1b9)][_0x2d0c87][_0x1b3452(0x128)]['length'];_0xdbf8d0++){_0x45ac8a[_0x1b3452(0x23b)](_0x18ea15[_0x1b3452(0x1b9)][_0x2d0c87][_0x1b3452(0x128)][_0xdbf8d0],0x0,0x0,_0x14c892['width'],_0x14c892['height']);}_0xc012a7['appendChild'](_0x14c892);const _0x53f382=document['createElement'](_0x1b3452(0x156));_0x53f382[_0x1b3452(0x1da)]='F'+(_0x2d0c87+0x1),_0xc012a7[_0x1b3452(0x12a)](_0x53f382);const _0x55d306=document[_0x1b3452(0x1fc)]('button');_0x55d306[_0x1b3452(0x1da)]='ÂâäÈô§',_0x55d306[_0x1b3452(0x116)]=_0x1b3452(0x140),_0x55d306[_0x1b3452(0x170)]=_0x18ea15[_0x1b3452(0x1b9)]['length']===0x1,_0x55d306[_0x1b3452(0x1e2)]=_0xea4c0=>{const _0xb00479=_0x1b3452;_0xea4c0[_0xb00479(0x250)](),removeFrameAt(_0x2d0c87);},_0xc012a7[_0x1b3452(0x12a)](_0x55d306),_0x1431aa[_0x1b3452(0x12a)](_0xc012a7);}document[_0x1b3452(0x1b4)](_0x1b3452(0x1ac))[_0x1b3452(0x1da)]='('+_0x18ea15[_0x1b3452(0x1b9)]['length']+_0x1b3452(0x1ad);}function addFrame(){const _0x410e42=a0_0x8a3065;let _0x26b520=getCurrentProject(),_0x328c18=_0x26b520[_0x410e42(0x1b9)][_0x26b520[_0x410e42(0x226)]],_0x29b821=_0x328c18[_0x410e42(0x128)]['map'](_0x3119f6=>{const _0x194299=_0x410e42;let _0x1bd187=document['createElement'](_0x194299(0x219));return _0x1bd187[_0x194299(0x1f4)]=_0x3119f6[_0x194299(0x1f4)],_0x1bd187[_0x194299(0x1de)]=_0x3119f6[_0x194299(0x1de)],_0x1bd187[_0x194299(0x1d8)]('2d')['drawImage'](_0x3119f6,0x0,0x0),_0x1bd187;}),_0x358f11=_0x29b821[_0x410e42(0x10c)](()=>[]),_0x32eedb=_0x29b821['map'](()=>[]),_0x563240={'layers':_0x29b821,'activeLayer':0x0,'layerHistories':_0x358f11,'layerRedoStacks':_0x32eedb};_0x26b520[_0x410e42(0x1b9)]['splice'](_0x26b520['activeFrame']+0x1,0x0,_0x563240),_0x26b520[_0x410e42(0x226)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0xcc867a){const _0x5e083a=a0_0x8a3065;let _0x21f239=getCurrentProject();if(_0x21f239[_0x5e083a(0x1b9)]['length']<=0x1)return;_0x21f239['frames'][_0x5e083a(0x16a)](_0xcc867a,0x1);if(_0x21f239[_0x5e083a(0x226)]>=_0x21f239[_0x5e083a(0x1b9)]['length'])_0x21f239[_0x5e083a(0x226)]=_0x21f239[_0x5e083a(0x1b9)]['length']-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x9b41f9=a0_0x8a3065;return getCurrentProject()[_0x9b41f9(0x1b9)][getCurrentProject()[_0x9b41f9(0x226)]];}function updateLayerUI(){const _0x2a7f2a=a0_0x8a3065;let {layers:_0x37d04a,activeLayer:_0xa8ab3c}=getCurrentFrame();document['getElementById'](_0x2a7f2a(0x249))[_0x2a7f2a(0x1da)]='('+_0x37d04a['length']+'Êûö)';const _0x2e49cc=document[_0x2a7f2a(0x1b4)](_0x2a7f2a(0x13c));_0x2e49cc[_0x2a7f2a(0x1d5)]='';for(let _0x37b64e=_0x37d04a[_0x2a7f2a(0x1d0)]-0x1;_0x37b64e>=0x0;_0x37b64e--){const _0x24da4b=document[_0x2a7f2a(0x1fc)]('div');_0x24da4b[_0x2a7f2a(0x116)]=_0x2a7f2a(0x210)+(_0x37b64e===_0xa8ab3c?'\x20active':''),_0x24da4b[_0x2a7f2a(0x1e2)]=_0x51cad7=>{const _0x30c5f2=_0x2a7f2a;if(_0x51cad7['target']['classList'][_0x30c5f2(0x248)](_0x30c5f2(0x105)))return;getCurrentFrame()[_0x30c5f2(0x1e6)]=_0x37b64e,updateLayerUI(),redrawAll();};const _0x5c4447=document[_0x2a7f2a(0x1fc)](_0x2a7f2a(0x219));_0x5c4447[_0x2a7f2a(0x116)]=_0x2a7f2a(0x163),_0x5c4447['width']=0x20,_0x5c4447[_0x2a7f2a(0x1de)]=0x20;let _0x2879f6=_0x5c4447[_0x2a7f2a(0x1d8)]('2d');_0x2879f6['clearRect'](0x0,0x0,0x20,0x20),_0x2879f6['drawImage'](_0x37d04a[_0x37b64e],0x0,0x0,_0x5c4447[_0x2a7f2a(0x1f4)],_0x5c4447[_0x2a7f2a(0x1de)]),_0x24da4b['appendChild'](_0x5c4447);const _0x49e72b=document[_0x2a7f2a(0x1fc)](_0x2a7f2a(0x156));_0x49e72b[_0x2a7f2a(0x1da)]=_0x2a7f2a(0x188)+(_0x37b64e+0x1),_0x24da4b[_0x2a7f2a(0x12a)](_0x49e72b);const _0x28493d=document['createElement'](_0x2a7f2a(0x20b));_0x28493d[_0x2a7f2a(0x1da)]='‚Üë',_0x28493d['className']=_0x2a7f2a(0x105),_0x28493d[_0x2a7f2a(0x237)]='‰∏ä„Å´ÁßªÂãï',_0x28493d[_0x2a7f2a(0x170)]=_0x37b64e===_0x37d04a['length']-0x1,_0x28493d['onclick']=_0x1599f7=>{const _0xc207f8=_0x2a7f2a;_0x1599f7[_0xc207f8(0x250)](),_0x37b64e<_0x37d04a[_0xc207f8(0x1d0)]-0x1&&swapLayer(_0x37b64e,_0x37b64e+0x1);},_0x24da4b['appendChild'](_0x28493d);const _0x21d51c=document['createElement'](_0x2a7f2a(0x20b));_0x21d51c[_0x2a7f2a(0x1da)]='‚Üì',_0x21d51c[_0x2a7f2a(0x116)]='layer-btn',_0x21d51c[_0x2a7f2a(0x237)]='‰∏ã„Å´ÁßªÂãï',_0x21d51c[_0x2a7f2a(0x170)]=_0x37b64e===0x0,_0x21d51c[_0x2a7f2a(0x1e2)]=_0x59b5fc=>{const _0x4a50f4=_0x2a7f2a;_0x59b5fc[_0x4a50f4(0x250)](),_0x37b64e>0x0&&swapLayer(_0x37b64e,_0x37b64e-0x1);},_0x24da4b[_0x2a7f2a(0x12a)](_0x21d51c);const _0x3defc2=document[_0x2a7f2a(0x1fc)](_0x2a7f2a(0x20b));_0x3defc2['textContent']='ÂâäÈô§',_0x3defc2['className']=_0x2a7f2a(0x105),_0x3defc2[_0x2a7f2a(0x237)]='„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§',_0x3defc2[_0x2a7f2a(0x170)]=_0x37d04a[_0x2a7f2a(0x1d0)]===0x1,_0x3defc2[_0x2a7f2a(0x1e2)]=_0x1983d7=>{const _0x33f8b0=_0x2a7f2a;_0x1983d7[_0x33f8b0(0x250)](),removeLayerAt(_0x37b64e);},_0x24da4b['appendChild'](_0x3defc2),_0x2e49cc[_0x2a7f2a(0x12a)](_0x24da4b);}}function swapLayer(_0x531562,_0x488f64){const _0x22b543=a0_0x8a3065;let _0x8aa1c3=getCurrentFrame();[_0x8aa1c3['layers'][_0x531562],_0x8aa1c3[_0x22b543(0x128)][_0x488f64]]=[_0x8aa1c3[_0x22b543(0x128)][_0x488f64],_0x8aa1c3[_0x22b543(0x128)][_0x531562]],[_0x8aa1c3[_0x22b543(0x206)][_0x531562],_0x8aa1c3[_0x22b543(0x206)][_0x488f64]]=[_0x8aa1c3[_0x22b543(0x206)][_0x488f64],_0x8aa1c3['layerHistories'][_0x531562]],[_0x8aa1c3[_0x22b543(0x1c6)][_0x531562],_0x8aa1c3['layerRedoStacks'][_0x488f64]]=[_0x8aa1c3['layerRedoStacks'][_0x488f64],_0x8aa1c3[_0x22b543(0x1c6)][_0x531562]];if(_0x8aa1c3[_0x22b543(0x1e6)]===_0x531562)_0x8aa1c3['activeLayer']=_0x488f64;else{if(_0x8aa1c3[_0x22b543(0x1e6)]===_0x488f64)_0x8aa1c3[_0x22b543(0x1e6)]=_0x531562;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x59b4b6){const _0xbdd77f=a0_0x8a3065;let _0x5e6ac4=getCurrentFrame();if(_0x5e6ac4[_0xbdd77f(0x128)]['length']<=0x1)return;_0x5e6ac4[_0xbdd77f(0x128)][_0xbdd77f(0x16a)](_0x59b4b6,0x1),_0x5e6ac4[_0xbdd77f(0x206)][_0xbdd77f(0x16a)](_0x59b4b6,0x1),_0x5e6ac4[_0xbdd77f(0x1c6)][_0xbdd77f(0x16a)](_0x59b4b6,0x1);if(_0x5e6ac4['activeLayer']>=_0x5e6ac4['layers'][_0xbdd77f(0x1d0)])_0x5e6ac4['activeLayer']=_0x5e6ac4[_0xbdd77f(0x128)][_0xbdd77f(0x1d0)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x247b9c=a0_0x8a3065;let _0x4dbd71=getCurrentProject(),_0x4a2031=getCurrentFrame(),_0x344ebc=document['createElement'](_0x247b9c(0x219));_0x344ebc[_0x247b9c(0x1f4)]=_0x4dbd71[_0x247b9c(0x1f4)]*cellSize,_0x344ebc[_0x247b9c(0x1de)]=_0x4dbd71['height']*cellSize,_0x4a2031['layers'][_0x247b9c(0x169)](_0x344ebc),_0x4a2031[_0x247b9c(0x206)][_0x247b9c(0x169)]([]),_0x4a2031['layerRedoStacks']['push']([]),_0x4a2031['activeLayer']=_0x4a2031[_0x247b9c(0x128)]['length']-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x2b2bd5=a0_0x8a3065;let _0x434dea=getCurrentFrame();if(_0x434dea[_0x2b2bd5(0x128)][_0x2b2bd5(0x1d0)]<=0x1)return;_0x434dea[_0x2b2bd5(0x128)][_0x2b2bd5(0x16a)](_0x434dea['activeLayer'],0x1),_0x434dea[_0x2b2bd5(0x206)][_0x2b2bd5(0x16a)](_0x434dea[_0x2b2bd5(0x1e6)],0x1),_0x434dea[_0x2b2bd5(0x1c6)][_0x2b2bd5(0x16a)](_0x434dea[_0x2b2bd5(0x1e6)],0x1),_0x434dea[_0x2b2bd5(0x1e6)]=Math[_0x2b2bd5(0x11e)](0x0,_0x434dea[_0x2b2bd5(0x1e6)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x2b8e43){getCurrentFrame()['activeLayer']=parseInt(_0x2b8e43),updateLayerUI();}let PALETTE_COLORS=[a0_0x8a3065(0x17a),a0_0x8a3065(0x251),a0_0x8a3065(0x1ff),a0_0x8a3065(0x1c5),a0_0x8a3065(0x19b),'#ffffff','#ff0000',a0_0x8a3065(0x19d),a0_0x8a3065(0x1a9),a0_0x8a3065(0x173),'#00ffff','#0000ff',a0_0x8a3065(0x1bd),a0_0x8a3065(0x205),a0_0x8a3065(0x1ce),'#008000','#008080',a0_0x8a3065(0x1e8),a0_0x8a3065(0x1d7),a0_0x8a3065(0x1e0),a0_0x8a3065(0x12e)],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){const _0x4178bb=a0_0x8a3065;let _0x4294c2=getCurrentProject();if(!_0x4294c2||!_0x4294c2[_0x4178bb(0x1b9)]||_0x4294c2[_0x4178bb(0x1b9)][_0x4178bb(0x1d0)]<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0x52e3cd=_0x4294c2[_0x4178bb(0x1b9)];animationTimer=setInterval(()=>{const _0x57fcc2=_0x4178bb;ctx[_0x57fcc2(0x1e7)](0x0,0x0,canvas[_0x57fcc2(0x1f4)],canvas[_0x57fcc2(0x1de)]);let _0x5aefc4=_0x52e3cd[animationIndex];for(let _0x18a653=0x0;_0x18a653<_0x5aefc4[_0x57fcc2(0x128)][_0x57fcc2(0x1d0)];_0x18a653++){ctx[_0x57fcc2(0x23b)](_0x5aefc4[_0x57fcc2(0x128)][_0x18a653],0x0,0x0);}drawGrid(_0x4294c2['width'],_0x4294c2['height']),animationIndex=(animationIndex+0x1)%_0x52e3cd['length'];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function setAnimationDelay(_0x236880){const _0x27f48f=a0_0x8a3065;_0x236880=Math[_0x27f48f(0x11e)](0xa,parseInt(_0x236880,0xa)||0x12c),animationDelay=_0x236880,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x33dd08){const _0x3e4834=a0_0x8a3065;currentTool=_0x33dd08,document[_0x3e4834(0x1c1)](_0x3e4834(0x256))[_0x3e4834(0x208)](_0x32c874=>{const _0x3f22e2=_0x3e4834;_0x32c874[_0x3f22e2(0x1dc)]['toggle']('active',_0x32c874[_0x3f22e2(0x18c)][_0x3f22e2(0x261)]===_0x33dd08);}),document[_0x3e4834(0x1c1)]('#palette-toolbar\x20.tool-btn')[_0x3e4834(0x208)](_0x4d5ecd=>{const _0x589692=_0x3e4834;_0x4d5ecd['classList'][_0x589692(0x21a)](_0x589692(0x18a),_0x4d5ecd[_0x589692(0x18c)]['tool']===_0x33dd08);}),_0x33dd08===_0x3e4834(0x11a)?canvas[_0x3e4834(0x15e)][_0x3e4834(0x13d)]=_0x3e4834(0x134):canvas['style'][_0x3e4834(0x13d)]='crosshair';}function setPenSize(_0x3c3768){const _0x15a5ae=a0_0x8a3065;penSize=parseInt(_0x3c3768)||0x1;let _0x1b9d47=document[_0x15a5ae(0x1b4)](_0x15a5ae(0x20e));if(_0x1b9d47)_0x1b9d47['value']=penSize;let _0x1c58fc=document[_0x15a5ae(0x1b4)](_0x15a5ae(0x202));if(_0x1c58fc)_0x1c58fc[_0x15a5ae(0x1ba)]=penSize;}function setPenMode(_0x338917){const _0x30906f=a0_0x8a3065;penMode=_0x338917;let _0x2e4d70=document['getElementById'](_0x30906f(0x125));if(_0x2e4d70)_0x2e4d70[_0x30906f(0x1ba)]=penMode;let _0x4192a8=document['getElementById']('palette-penMode');if(_0x4192a8)_0x4192a8[_0x30906f(0x1ba)]=penMode;}function hexToRgba(_0x1aab23,_0x36c9ef=0x1){const _0x474985=a0_0x8a3065;if(_0x1aab23===_0x474985(0x17a)||_0x1aab23===_0x474985(0x12f))return[0x0,0x0,0x0,0x0];_0x1aab23=_0x1aab23[_0x474985(0x127)]('#','');if(_0x1aab23[_0x474985(0x1d0)]===0x3)_0x1aab23=_0x1aab23['split']('')[_0x474985(0x10c)](_0xd43134=>_0xd43134+_0xd43134)[_0x474985(0x24d)]('');let _0xf34a46=parseInt(_0x1aab23,0x10);return[_0xf34a46>>0x10&0xff,_0xf34a46>>0x8&0xff,_0xf34a46&0xff,Math[_0x474985(0x1a3)](0xff*_0x36c9ef)];}function fillAt(_0x536843,_0x1725a0){const _0x5727ab=a0_0x8a3065;let _0x8e25dc=getCurrentProject(),_0x5164a9=getCurrentFrame(),_0x2c593d=_0x5164a9[_0x5727ab(0x128)][_0x5164a9[_0x5727ab(0x1e6)]][_0x5727ab(0x1d8)]('2d'),_0x29b38a=_0x2c593d[_0x5727ab(0x18b)](0x0,0x0,_0x8e25dc['width']*cellSize,_0x8e25dc[_0x5727ab(0x1de)]*cellSize),_0x4f6f80=_0x536843*cellSize,_0xee5352=_0x1725a0*cellSize,_0x12bcba=getPixel(_0x29b38a,_0x4f6f80,_0xee5352),_0x560402=currentColor==='transparent'||currentColor===_0x5727ab(0x12f)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x12bcba,_0x560402))return;let _0x293b4a=[[_0x536843,_0x1725a0]],_0x53a323=new Set();while(_0x293b4a[_0x5727ab(0x1d0)]){let [_0x121e89,_0x5d7af4]=_0x293b4a['pop']();if(_0x121e89<0x0||_0x5d7af4<0x0||_0x121e89>=_0x8e25dc['width']||_0x5d7af4>=_0x8e25dc[_0x5727ab(0x1de)])continue;let _0x499234=_0x121e89+','+_0x5d7af4;if(_0x53a323[_0x5727ab(0x189)](_0x499234))continue;_0x53a323[_0x5727ab(0x1fb)](_0x499234);let _0x373363=_0x121e89*cellSize,_0x723460=_0x5d7af4*cellSize,_0x1c46d6=getPixel(_0x29b38a,_0x373363,_0x723460);if(!colorsMatch(_0x1c46d6,_0x12bcba))continue;for(let _0x51cbbe=0x0;_0x51cbbe<cellSize;_0x51cbbe++){for(let _0x13e801=0x0;_0x13e801<cellSize;_0x13e801++){setPixel(_0x29b38a,_0x373363+_0x13e801,_0x723460+_0x51cbbe,_0x560402);}}_0x293b4a[_0x5727ab(0x169)]([_0x121e89+0x1,_0x5d7af4]),_0x293b4a[_0x5727ab(0x169)]([_0x121e89-0x1,_0x5d7af4]),_0x293b4a[_0x5727ab(0x169)]([_0x121e89,_0x5d7af4+0x1]),_0x293b4a[_0x5727ab(0x169)]([_0x121e89,_0x5d7af4-0x1]);}_0x2c593d[_0x5727ab(0x22a)](_0x29b38a,0x0,0x0),redrawAll();}function getPixel(_0x21b993,_0x2dd321,_0x60f081){const _0x417cf5=a0_0x8a3065;let _0x4bdaeb=(_0x60f081*_0x21b993[_0x417cf5(0x1f4)]+_0x2dd321)*0x4;return[_0x21b993[_0x417cf5(0x260)][_0x4bdaeb],_0x21b993[_0x417cf5(0x260)][_0x4bdaeb+0x1],_0x21b993[_0x417cf5(0x260)][_0x4bdaeb+0x2],_0x21b993['data'][_0x4bdaeb+0x3]];}function setPixel(_0x4e32ea,_0x561cdb,_0x2df8e0,_0x5e9091){const _0x8d8e31=a0_0x8a3065;let _0x284e98=(_0x2df8e0*_0x4e32ea[_0x8d8e31(0x1f4)]+_0x561cdb)*0x4;_0x4e32ea[_0x8d8e31(0x260)][_0x284e98]=_0x5e9091[0x0],_0x4e32ea[_0x8d8e31(0x260)][_0x284e98+0x1]=_0x5e9091[0x1],_0x4e32ea[_0x8d8e31(0x260)][_0x284e98+0x2]=_0x5e9091[0x2],_0x4e32ea[_0x8d8e31(0x260)][_0x284e98+0x3]=_0x5e9091[0x3];}function colorsMatch(_0x3db00b,_0x237993){return _0x3db00b[0x0]===_0x237993[0x0]&&_0x3db00b[0x1]===_0x237993[0x1]&&_0x3db00b[0x2]===_0x237993[0x2]&&_0x3db00b[0x3]===_0x237993[0x3];}function handleMouseDown(_0x41f685){const _0x4aae59=a0_0x8a3065;isDrawing=!![];const _0x5c13cb=getCanvasCoords(_0x41f685),_0x3e4b26=Math[_0x4aae59(0x211)](_0x5c13cb['x']/cellSize),_0x4653c0=Math[_0x4aae59(0x211)](_0x5c13cb['y']/cellSize);currentTool===_0x4aae59(0x120)?(fillAt(_0x3e4b26,_0x4653c0),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x3e4b26,_0x4653c0),lastMouse={'x':_0x3e4b26,'y':_0x4653c0});}function handleMouseMove(_0x32d649){const _0x1335b4=a0_0x8a3065;if(!isDrawing)return;const _0xa48a5b=getCanvasCoords(_0x32d649),_0x106893=Math[_0x1335b4(0x211)](_0xa48a5b['x']/cellSize),_0x506b3c=Math[_0x1335b4(0x211)](_0xa48a5b['y']/cellSize);if(!lastMouse){drawDotXY(_0x106893,_0x506b3c),lastMouse={'x':_0x106893,'y':_0x506b3c};return;}const _0x3859ce=_0x106893-lastMouse['x'],_0x32cbba=_0x506b3c-lastMouse['y'],_0x2300b1=Math[_0x1335b4(0x11e)](Math['abs'](_0x3859ce),Math[_0x1335b4(0x15d)](_0x32cbba));if(_0x2300b1<=0x1)drawDotXY(_0x106893,_0x506b3c);else for(let _0x4918e3=0x1;_0x4918e3<=_0x2300b1;_0x4918e3++){const _0x234c33=Math[_0x1335b4(0x1a3)](lastMouse['x']+_0x3859ce*_0x4918e3/_0x2300b1),_0x38a25d=Math['round'](lastMouse['y']+_0x32cbba*_0x4918e3/_0x2300b1);drawDotXY(_0x234c33,_0x38a25d);}lastMouse={'x':_0x106893,'y':_0x506b3c};}function handleMouseUp(_0x24c3a1){isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0x569218){const _0x26a8d8=a0_0x8a3065,_0x22fab0=canvas[_0x26a8d8(0x15f)]();let _0x394085=_0x569218[_0x26a8d8(0x1bc)]&&_0x569218[_0x26a8d8(0x1bc)][0x0]?_0x569218[_0x26a8d8(0x1bc)][0x0]:_0x569218[_0x26a8d8(0x1d3)][0x0];const _0x8725ef=canvas[_0x26a8d8(0x1f4)]/_0x22fab0['width'],_0x2d7cad=canvas[_0x26a8d8(0x1de)]/_0x22fab0[_0x26a8d8(0x1de)],_0x277ec3=_0x394085[_0x26a8d8(0x215)],_0x2252cd=_0x394085[_0x26a8d8(0x1a0)],_0x48ba0c=(_0x277ec3-_0x22fab0[_0x26a8d8(0x112)])*_0x8725ef,_0x488dfb=(_0x2252cd-_0x22fab0[_0x26a8d8(0x160)])*_0x2d7cad;return{'x':Math[_0x26a8d8(0x211)](_0x48ba0c/cellSize),'y':Math[_0x26a8d8(0x211)](_0x488dfb/cellSize)};}function handleTouchStart(_0x327953){const _0x27991c=a0_0x8a3065;if(_0x327953[_0x27991c(0x1bc)]['length']===0x2){_0x327953[_0x27991c(0x232)](),isPinching=!![],isDrawing=![];const _0x40d06b=_0x327953[_0x27991c(0x1bc)][0x0],_0x2e540b=_0x327953[_0x27991c(0x1bc)][0x1];pinchStartDistance=Math[_0x27991c(0x136)](_0x2e540b[_0x27991c(0x215)]-_0x40d06b['clientX'],_0x2e540b[_0x27991c(0x1a0)]-_0x40d06b[_0x27991c(0x1a0)]),pinchStartMid={'clientX':(_0x40d06b[_0x27991c(0x215)]+_0x2e540b['clientX'])/0x2,'clientY':(_0x40d06b['clientY']+_0x2e540b[_0x27991c(0x1a0)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x27991c(0x15f)]();}else{if(_0x327953[_0x27991c(0x1bc)][_0x27991c(0x1d0)]===0x1){_0x327953['preventDefault']();if(isPinching)return;isDrawing=!![];let _0x1005b2=getTouchPos(_0x327953);lastTouch=_0x1005b2,currentTool==='fill'?(fillAt(_0x1005b2['x'],_0x1005b2['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x1005b2['x'],_0x1005b2['y']);}}}function handleTouchMove(_0x2e280c){const _0x253654=a0_0x8a3065;if(isPinching||_0x2e280c[_0x253654(0x1bc)]&&_0x2e280c[_0x253654(0x1bc)]['length']===0x2){_0x2e280c[_0x253654(0x232)]();const _0x2065a5=_0x2e280c[_0x253654(0x1bc)][0x0],_0xf58aa6=_0x2e280c[_0x253654(0x1bc)][0x1],_0x57aac9=Math['hypot'](_0xf58aa6[_0x253654(0x215)]-_0x2065a5[_0x253654(0x215)],_0xf58aa6[_0x253654(0x1a0)]-_0x2065a5['clientY']),_0x25ba78={'clientX':(_0x2065a5['clientX']+_0xf58aa6[_0x253654(0x215)])/0x2,'clientY':(_0x2065a5[_0x253654(0x1a0)]+_0xf58aa6[_0x253654(0x1a0)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x57aac9||0x1;const _0x17df9d=_0x57aac9/pinchStartDistance||0x1;let _0x354fe7=pinchStartScale*_0x17df9d;_0x354fe7=Math['min'](Math[_0x253654(0x11e)](_0x354fe7,0.2),0x5);const _0x3d5a35=pinchRect||canvas['getBoundingClientRect'](),_0x4a06d9=(pinchStartMid[_0x253654(0x215)]-_0x3d5a35[_0x253654(0x112)]-pinchStartPosX)/pinchStartScale,_0x3ad7ea=(pinchStartMid[_0x253654(0x1a0)]-_0x3d5a35[_0x253654(0x160)]-pinchStartPosY)/pinchStartScale;posX=_0x25ba78[_0x253654(0x215)]-_0x3d5a35[_0x253654(0x112)]-_0x4a06d9*_0x354fe7,posY=_0x25ba78[_0x253654(0x1a0)]-_0x3d5a35[_0x253654(0x160)]-_0x3ad7ea*_0x354fe7,scale=_0x354fe7,updateTransform();return;}if(!isDrawing)return;if(_0x2e280c['touches']&&_0x2e280c[_0x253654(0x1bc)][_0x253654(0x1d0)]>0x1)return;_0x2e280c[_0x253654(0x232)]();let _0x25f24b=getTouchPos(_0x2e280c);if(lastTouch){let _0x510958=Math[_0x253654(0x15d)]((_0x25f24b['x']-lastTouch['x'])*cellSize),_0x56cb28=Math['abs']((_0x25f24b['y']-lastTouch['y'])*cellSize);if(_0x510958>=PAN_CANCEL_DISTANCE||_0x56cb28>=PAN_CANCEL_DISTANCE){if(currentTool!==_0x253654(0x1c2)){isDrawing=![];return;}}}if(lastTouch){let _0x307a40=_0x25f24b['x']-lastTouch['x'],_0x248f3d=_0x25f24b['y']-lastTouch['y'],_0x26e6e7=Math[_0x253654(0x11e)](Math[_0x253654(0x15d)](_0x307a40),Math['abs'](_0x248f3d));for(let _0x36a03e=0x1;_0x36a03e<=_0x26e6e7;_0x36a03e++){let _0x2e59f5=Math[_0x253654(0x1a3)](lastTouch['x']+_0x307a40*_0x36a03e/_0x26e6e7),_0x950440=Math['round'](lastTouch['y']+_0x248f3d*_0x36a03e/_0x26e6e7);drawDotTouch(_0x2e59f5,_0x950440);}}else drawDotTouch(_0x25f24b['x'],_0x25f24b['y']);lastTouch=_0x25f24b;}function handleTouchEnd(_0x1470ea){const _0x89668c=a0_0x8a3065;isPinching&&_0x1470ea[_0x89668c(0x1bc)]&&_0x1470ea['touches'][_0x89668c(0x1d0)]<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null);isDrawing&&(!_0x1470ea[_0x89668c(0x1bc)]||_0x1470ea['touches']['length']===0x0)&&saveHistory();if(_0x1470ea[_0x89668c(0x1bc)]&&_0x1470ea[_0x89668c(0x1bc)][_0x89668c(0x1d0)]===0x1){let _0x1dacde=_0x1470ea[_0x89668c(0x1bc)][0x0];lastTouch=getTouchPos({'touches':[_0x1dacde]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function a0_0x5921(_0x185578,_0x596bc4){_0x185578=_0x185578-0x104;const _0x58aae6=a0_0x41a1();let _0x399cb1=_0x58aae6[_0x185578];return _0x399cb1;}function drawDotXY(_0x5e604c,_0x1edc3e){const _0x14e919=a0_0x8a3065;let _0x2619cc=getCurrentProject(),_0x4ca7d4=getCurrentFrame();if(!_0x4ca7d4||!_0x2619cc)return;if(typeof _0x5e604c!==_0x14e919(0x252)||typeof _0x1edc3e!==_0x14e919(0x252)||_0x5e604c<0x0||_0x1edc3e<0x0||!Number[_0x14e919(0x12d)](_0x2619cc[_0x14e919(0x1f4)])||!Number['isFinite'](_0x2619cc[_0x14e919(0x1de)])||_0x5e604c>=_0x2619cc[_0x14e919(0x1f4)]||_0x1edc3e>=_0x2619cc[_0x14e919(0x1de)]||!Array['isArray'](_0x4ca7d4[_0x14e919(0x128)])||typeof _0x4ca7d4[_0x14e919(0x1e6)]!==_0x14e919(0x252)||!_0x4ca7d4[_0x14e919(0x128)][_0x4ca7d4[_0x14e919(0x1e6)]])return;let _0x1b30b5=_0x4ca7d4[_0x14e919(0x128)][_0x4ca7d4[_0x14e919(0x1e6)]][_0x14e919(0x1d8)]('2d');if(!_0x1b30b5)return;if(currentTool===_0x14e919(0x17d)||currentColor===_0x14e919(0x17a)||currentColor===_0x14e919(0x12f)||currentAlpha===0x0)drawPenShape(_0x1b30b5,_0x5e604c,_0x1edc3e,_0x14e919(0x12f),!![]);else{let _0x2cb2b6=hexToRgba(currentColor,currentAlpha);_0x1b30b5[_0x14e919(0x230)](),_0x1b30b5[_0x14e919(0x244)]=_0x2cb2b6[0x3]/0xff,drawPenShape(_0x1b30b5,_0x5e604c,_0x1edc3e,'rgba('+_0x2cb2b6[0x0]+','+_0x2cb2b6[0x1]+','+_0x2cb2b6[0x2]+','+_0x2cb2b6[0x3]/0xff+')',![]),_0x1b30b5[_0x14e919(0x17c)]();}redrawAll();}function drawPenShape(_0x2ca7c7,_0x258fe8,_0x49c8f1,_0x4c8acd,_0x288a38){const _0x4e1c28=a0_0x8a3065,_0x1b7a4e=_0x258fe8*cellSize,_0x577a91=_0x49c8f1*cellSize,_0x112194=penSize*cellSize;_0x288a38?(_0x2ca7c7[_0x4e1c28(0x230)](),_0x2ca7c7[_0x4e1c28(0x174)]=_0x4e1c28(0x24c),penMode===_0x4e1c28(0x19c)?(_0x2ca7c7[_0x4e1c28(0x157)](),_0x2ca7c7['arc'](_0x1b7a4e+cellSize/0x2,_0x577a91+cellSize/0x2,_0x112194/0x2,0x0,Math['PI']*0x2),_0x2ca7c7[_0x4e1c28(0x120)]()):_0x2ca7c7[_0x4e1c28(0x1e7)](_0x1b7a4e-Math[_0x4e1c28(0x211)]((penSize-0x1)/0x2)*cellSize,_0x577a91-Math[_0x4e1c28(0x211)]((penSize-0x1)/0x2)*cellSize,_0x112194,_0x112194),_0x2ca7c7['restore']()):(_0x2ca7c7[_0x4e1c28(0x230)](),_0x2ca7c7[_0x4e1c28(0x1a7)]=_0x4c8acd,penMode==='circle'?(_0x2ca7c7[_0x4e1c28(0x157)](),_0x2ca7c7[_0x4e1c28(0x247)](_0x1b7a4e+cellSize/0x2,_0x577a91+cellSize/0x2,_0x112194/0x2,0x0,Math['PI']*0x2),_0x2ca7c7[_0x4e1c28(0x120)]()):_0x2ca7c7[_0x4e1c28(0x148)](_0x1b7a4e-Math[_0x4e1c28(0x211)]((penSize-0x1)/0x2)*cellSize,_0x577a91-Math[_0x4e1c28(0x211)]((penSize-0x1)/0x2)*cellSize,_0x112194,_0x112194),_0x2ca7c7[_0x4e1c28(0x17c)]());}function drawDotTouch(_0x519de4,_0xf339a1){const _0x422399=a0_0x8a3065;let _0x1831b5=getCurrentProject(),_0x54e1d6=getCurrentFrame();if(_0x519de4<0x0||_0xf339a1<0x0||_0x519de4>=_0x1831b5[_0x422399(0x1f4)]||_0xf339a1>=_0x1831b5[_0x422399(0x1de)])return;let _0xb71c49=_0x54e1d6[_0x422399(0x128)][_0x54e1d6[_0x422399(0x1e6)]]['getContext']('2d');if(currentTool===_0x422399(0x17d)||currentColor===_0x422399(0x17a)||currentColor===_0x422399(0x12f)||currentAlpha===0x0)drawPenShape(_0xb71c49,_0x519de4,_0xf339a1,_0x422399(0x12f),!![]);else{let _0x53b39d=hexToRgba(currentColor,currentAlpha);_0xb71c49[_0x422399(0x230)](),_0xb71c49[_0x422399(0x244)]=_0x53b39d[0x3]/0xff,drawPenShape(_0xb71c49,_0x519de4,_0xf339a1,_0x422399(0x1d6)+_0x53b39d[0x0]+','+_0x53b39d[0x1]+','+_0x53b39d[0x2]+','+_0x53b39d[0x3]/0xff+')',![]),_0xb71c49[_0x422399(0x17c)]();}redrawAll();}function applyTheme(_0x3738c0){const _0x4e87ac=a0_0x8a3065;document['documentElement'][_0x4e87ac(0x115)](_0x4e87ac(0x194),_0x3738c0);const _0x4499ad=document[_0x4e87ac(0x1b4)](_0x4e87ac(0x20f));_0x4499ad&&(_0x4499ad['textContent']=_0x3738c0===_0x4e87ac(0x25c)?'‚òÄÔ∏è':'üåô',_0x4499ad[_0x4e87ac(0x115)]('aria-pressed',_0x3738c0===_0x4e87ac(0x25c)),_0x4499ad[_0x4e87ac(0x237)]=_0x3738c0===_0x4e87ac(0x25c)?_0x4e87ac(0x1a2):_0x4e87ac(0x1c4)),localStorage[_0x4e87ac(0x1ae)](_0x4e87ac(0x162),_0x3738c0);}function toggleTheme(){const _0x417d5e=a0_0x8a3065;applyTheme(document['documentElement'][_0x417d5e(0x21e)](_0x417d5e(0x194))===_0x417d5e(0x25c)?_0x417d5e(0x144):_0x417d5e(0x25c));}(function initTheme(){const _0x242707=a0_0x8a3065,_0x3c62d4=localStorage[_0x242707(0x107)](_0x242707(0x162))||(window[_0x242707(0x1b1)]&&window[_0x242707(0x1b1)](_0x242707(0x239))[_0x242707(0x255)]?_0x242707(0x25c):_0x242707(0x144));applyTheme(_0x3c62d4),document[_0x242707(0x147)](_0x242707(0x10e),()=>{const _0x170999=_0x242707,_0x7f94f0=document[_0x170999(0x1b4)](_0x170999(0x20f));_0x7f94f0&&(_0x7f94f0[_0x170999(0x147)](_0x170999(0x137),toggleTheme),_0x7f94f0[_0x170999(0x147)](_0x170999(0x22d),_0x7f3fc0=>{const _0x172d1c=_0x170999;(_0x7f3fc0[_0x172d1c(0x145)]==='Enter'||_0x7f3fc0['key']==='\x20')&&(_0x7f3fc0['preventDefault'](),toggleTheme());}));});}(),window[a0_0x8a3065(0x259)]=()=>{const _0x38fa4b=a0_0x8a3065;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool('pen'),loadPaletteFromDB()[_0x38fa4b(0x193)](()=>createPalette()),document[_0x38fa4b(0x1b4)](_0x38fa4b(0x20e))[_0x38fa4b(0x1ba)]=penSize,document[_0x38fa4b(0x1b4)](_0x38fa4b(0x125))[_0x38fa4b(0x1ba)]=penMode;const _0x21937c=document[_0x38fa4b(0x1b4)](_0x38fa4b(0x175)),_0x39a5e7=document[_0x38fa4b(0x1b4)](_0x38fa4b(0x15a));_0x21937c&&_0x39a5e7&&(_0x21937c[_0x38fa4b(0x1ba)]=animationDelay,_0x39a5e7[_0x38fa4b(0x1ba)]=animationDelay,_0x21937c[_0x38fa4b(0x108)]=_0x2e67d7=>{const _0x15890d=_0x38fa4b;_0x39a5e7['value']=_0x2e67d7[_0x15890d(0x180)][_0x15890d(0x1ba)],setAnimationDelay(_0x2e67d7[_0x15890d(0x180)][_0x15890d(0x1ba)]);},_0x39a5e7['onchange']=_0x369b95=>{const _0x4e8ae4=_0x38fa4b;let _0xebff1b=Math['max'](0xa,Math[_0x4e8ae4(0x1b2)](0x1388,parseInt(_0x369b95[_0x4e8ae4(0x180)][_0x4e8ae4(0x1ba)])||animationDelay));_0x21937c[_0x4e8ae4(0x1ba)]=_0xebff1b,_0x39a5e7[_0x4e8ae4(0x1ba)]=_0xebff1b,setAnimationDelay(_0xebff1b);}),canvas['onmousemove']=handleMouseMove,canvas[_0x38fa4b(0x16d)]=handleMouseUp,canvas[_0x38fa4b(0x1c3)]=handleMouseUp,canvas[_0x38fa4b(0x1ef)]=handleTouchStart,canvas[_0x38fa4b(0x110)]=handleTouchMove,canvas[_0x38fa4b(0x246)]=handleTouchEnd,canvas[_0x38fa4b(0x122)]=handleTouchEnd,canvas['addEventListener'](_0x38fa4b(0x21d),handleTouchStart,{'passive':![]}),canvas[_0x38fa4b(0x147)](_0x38fa4b(0x1f0),handleTouchMove,{'passive':![]}),canvas[_0x38fa4b(0x147)]('touchend',handleTouchEnd,{'passive':![]}),canvas['addEventListener'](_0x38fa4b(0x13f),handleTouchEnd,{'passive':![]}),idbGet(_0x38fa4b(0x1f7))&&loadProjectFromIDB();});function drawGrid(_0x545801,_0x36c1be){const _0x1074fa=a0_0x8a3065;ctx[_0x1074fa(0x230)](),ctx['strokeStyle']=_0x1074fa(0x225);for(let _0x56d181=0x0;_0x56d181<=_0x545801;_0x56d181++){ctx[_0x1074fa(0x157)](),ctx[_0x1074fa(0x17b)](_0x56d181*cellSize,0x0),ctx[_0x1074fa(0x14b)](_0x56d181*cellSize,_0x36c1be*cellSize),ctx['stroke']();}for(let _0x42ed1c=0x0;_0x42ed1c<=_0x36c1be;_0x42ed1c++){ctx['beginPath'](),ctx[_0x1074fa(0x17b)](0x0,_0x42ed1c*cellSize),ctx[_0x1074fa(0x14b)](_0x545801*cellSize,_0x42ed1c*cellSize),ctx[_0x1074fa(0x200)]();}ctx[_0x1074fa(0x17c)]();}function redrawAll(){const _0x266bc1=a0_0x8a3065;let _0xdadc11=getCurrentProject(),_0x3cb185=getCurrentFrame();canvas[_0x266bc1(0x1f4)]=_0xdadc11[_0x266bc1(0x1f4)]*cellSize,canvas[_0x266bc1(0x1de)]=_0xdadc11['height']*cellSize,ctx['clearRect'](0x0,0x0,canvas['width'],canvas[_0x266bc1(0x1de)]);for(let _0x1c3089=0x0;_0x1c3089<_0x3cb185[_0x266bc1(0x128)][_0x266bc1(0x1d0)];_0x1c3089++){ctx[_0x266bc1(0x23b)](_0x3cb185['layers'][_0x1c3089],0x0,0x0);}drawGrid(_0xdadc11['width'],_0xdadc11[_0x266bc1(0x1de)]),wrapper&&(wrapper[_0x266bc1(0x15e)][_0x266bc1(0x1f4)]=_0x266bc1(0x159),wrapper['style'][_0x266bc1(0x1de)]='auto');}function saveHistory(){const _0x37110b=a0_0x8a3065;let _0x1a6c8e=getCurrentFrame(),_0x4725c9=_0x1a6c8e[_0x37110b(0x206)][_0x1a6c8e['activeLayer']];_0x4725c9[_0x37110b(0x169)](_0x1a6c8e[_0x37110b(0x128)][_0x1a6c8e[_0x37110b(0x1e6)]][_0x37110b(0x228)]());if(_0x4725c9['length']>0x32)_0x4725c9[_0x37110b(0x221)]();_0x1a6c8e[_0x37110b(0x1c6)][_0x1a6c8e[_0x37110b(0x1e6)]]=[];}function undo(){const _0x49ac34=a0_0x8a3065;let _0x586f75=getCurrentFrame(),_0x1115c4=_0x586f75[_0x49ac34(0x206)][_0x586f75[_0x49ac34(0x1e6)]],_0x1e68ec=_0x586f75['layerRedoStacks'][_0x586f75[_0x49ac34(0x1e6)]];if(!_0x1115c4||_0x1115c4[_0x49ac34(0x1d0)]<0x2)return;_0x1e68ec[_0x49ac34(0x169)](_0x1115c4[_0x49ac34(0x184)]());let _0x747ebd=new Image();_0x747ebd['onload']=()=>{const _0x1cc214=_0x49ac34;let _0x536170=_0x586f75['layers'][_0x586f75[_0x1cc214(0x1e6)]][_0x1cc214(0x1d8)]('2d');_0x536170['clearRect'](0x0,0x0,_0x586f75[_0x1cc214(0x128)][_0x586f75[_0x1cc214(0x1e6)]][_0x1cc214(0x1f4)],_0x586f75[_0x1cc214(0x128)][_0x586f75[_0x1cc214(0x1e6)]][_0x1cc214(0x1de)]),_0x536170[_0x1cc214(0x23b)](_0x747ebd,0x0,0x0),redrawAll();},_0x747ebd[_0x49ac34(0x154)]=_0x1115c4[_0x1115c4['length']-0x1];}function redo(){const _0x489527=a0_0x8a3065;let _0x3b40f5=getCurrentFrame(),_0x5671e5=_0x3b40f5[_0x489527(0x206)][_0x3b40f5[_0x489527(0x1e6)]],_0x7a744e=_0x3b40f5[_0x489527(0x1c6)][_0x3b40f5[_0x489527(0x1e6)]];if(!_0x7a744e||_0x7a744e[_0x489527(0x1d0)]===0x0)return;let _0x26d8fe=_0x7a744e['pop']();_0x5671e5[_0x489527(0x169)](_0x26d8fe);let _0x132990=new Image();_0x132990[_0x489527(0x259)]=()=>{const _0x54faef=_0x489527;let _0x4d6eba=_0x3b40f5[_0x54faef(0x128)][_0x3b40f5[_0x54faef(0x1e6)]][_0x54faef(0x1d8)]('2d');_0x4d6eba[_0x54faef(0x1e7)](0x0,0x0,_0x3b40f5[_0x54faef(0x128)][_0x3b40f5[_0x54faef(0x1e6)]][_0x54faef(0x1f4)],_0x3b40f5[_0x54faef(0x128)][_0x3b40f5[_0x54faef(0x1e6)]]['height']),_0x4d6eba[_0x54faef(0x23b)](_0x132990,0x0,0x0),redrawAll();},_0x132990[_0x489527(0x154)]=_0x26d8fe;}function exportImage(_0x25a01f){const _0x4dbe29=a0_0x8a3065;let _0x2fbd67=getCurrentProject(),_0x31f5ba=_0x2fbd67['frames'],_0x57ec7a=_0x25a01f===_0x4dbe29(0x119)||_0x25a01f===_0x4dbe29(0x24a)?_0x4dbe29(0x25b):_0x4dbe29(0x254)+_0x25a01f,_0x3793c8=_0x31f5ba[_0x4dbe29(0x1d0)]>0x1,_0x50bdba=(_0x2fbd67[_0x4dbe29(0x16f)]||_0x4dbe29(0x1c8))[_0x4dbe29(0x127)](/[\\/:*?"<>|]/g,'_');if(!_0x3793c8){let _0x1e79db=document[_0x4dbe29(0x1fc)]('canvas');_0x1e79db['width']=_0x2fbd67[_0x4dbe29(0x1f4)]*cellSize,_0x1e79db['height']=_0x2fbd67[_0x4dbe29(0x1de)]*cellSize;let _0x3814e9=_0x1e79db[_0x4dbe29(0x1d8)]('2d'),_0x5cfa45=getCurrentFrame();for(let _0x168758=0x0;_0x168758<_0x5cfa45[_0x4dbe29(0x128)]['length'];_0x168758++){_0x3814e9[_0x4dbe29(0x23b)](_0x5cfa45['layers'][_0x168758],0x0,0x0);}let _0x1e7431=document[_0x4dbe29(0x1fc)]('a');_0x1e7431[_0x4dbe29(0x17f)]=_0x50bdba+'.'+_0x25a01f,_0x25a01f==='jpg'||_0x25a01f==='jpeg'?_0x1e7431[_0x4dbe29(0x1e9)]=_0x1e79db[_0x4dbe29(0x228)](_0x57ec7a,0.92):_0x1e7431['href']=_0x1e79db[_0x4dbe29(0x228)](_0x57ec7a),_0x1e7431[_0x4dbe29(0x137)]();}else{if(_0x25a01f===_0x4dbe29(0x109)&&typeof window[_0x4dbe29(0x1f1)]!==_0x4dbe29(0x10f))exportWebpAnimation(_0x31f5ba,_0x2fbd67['width']*cellSize,_0x2fbd67[_0x4dbe29(0x1de)]*cellSize,_0x50bdba);else for(let _0xd37959=0x0;_0xd37959<_0x31f5ba[_0x4dbe29(0x1d0)];_0xd37959++){let _0x2395f3=document[_0x4dbe29(0x1fc)](_0x4dbe29(0x219));_0x2395f3[_0x4dbe29(0x1f4)]=_0x2fbd67[_0x4dbe29(0x1f4)]*cellSize,_0x2395f3[_0x4dbe29(0x1de)]=_0x2fbd67[_0x4dbe29(0x1de)]*cellSize;let _0x2cf0ee=_0x2395f3[_0x4dbe29(0x1d8)]('2d'),_0x12c85a=_0x31f5ba[_0xd37959];for(let _0x33d59d=0x0;_0x33d59d<_0x12c85a[_0x4dbe29(0x128)]['length'];_0x33d59d++){_0x2cf0ee[_0x4dbe29(0x23b)](_0x12c85a[_0x4dbe29(0x128)][_0x33d59d],0x0,0x0);}let _0x4f62c8=document['createElement']('a');_0x4f62c8[_0x4dbe29(0x17f)]=_0x50bdba+'-f'+(_0xd37959+0x1)+'.'+_0x25a01f,_0x25a01f===_0x4dbe29(0x119)||_0x25a01f===_0x4dbe29(0x24a)?_0x4f62c8[_0x4dbe29(0x1e9)]=_0x2395f3[_0x4dbe29(0x228)](_0x57ec7a,0.92):_0x4f62c8[_0x4dbe29(0x1e9)]=_0x2395f3[_0x4dbe29(0x228)](_0x57ec7a),setTimeout(()=>_0x4f62c8['click'](),_0xd37959*0x64);}}}async function exportWebpAnimation(_0x3d9948,_0x58b59a,_0x2bb9ad,_0x28878c=a0_0x8a3065(0x190)){const _0x11a247=a0_0x8a3065;if(!window[_0x11a247(0x1f1)]||!window['VideoEncoder']){alert(_0x11a247(0x19a));return;}const _0x1ed359=[],_0x3e9ba7=new VideoEncoder({'output':_0x63dd3e=>_0x1ed359['push'](_0x63dd3e),'error':_0x16c9e2=>console[_0x11a247(0x203)](_0x16c9e2)});_0x3e9ba7['configure']({'codec':_0x11a247(0x10b),'width':_0x58b59a,'height':_0x2bb9ad,'framerate':0x5});for(let _0x59b56c=0x0;_0x59b56c<_0x3d9948[_0x11a247(0x1d0)];_0x59b56c++){let _0x5840cd=document['createElement'](_0x11a247(0x219));_0x5840cd[_0x11a247(0x1f4)]=_0x58b59a,_0x5840cd[_0x11a247(0x1de)]=_0x2bb9ad;let _0x584be3=_0x5840cd['getContext']('2d'),_0x485261=_0x3d9948[_0x59b56c];for(let _0x23585d=0x0;_0x23585d<_0x485261['layers'][_0x11a247(0x1d0)];_0x23585d++){_0x584be3[_0x11a247(0x23b)](_0x485261[_0x11a247(0x128)][_0x23585d],0x0,0x0);}let _0x1a277e=await createImageBitmap(_0x5840cd);_0x3e9ba7[_0x11a247(0x17e)](_0x1a277e,{'keyFrame':!![],'duration':0xc8}),_0x1a277e[_0x11a247(0x220)]();}await _0x3e9ba7[_0x11a247(0x167)](),_0x3e9ba7[_0x11a247(0x220)]();const _0x22b40f=new Blob(_0x1ed359['map'](_0x2066e2=>_0x2066e2[_0x11a247(0x236)]?_0x2066e2:_0x2066e2[_0x11a247(0x260)]),{'type':_0x11a247(0x165)}),_0x228ced=document[_0x11a247(0x1fc)]('a');_0x228ced[_0x11a247(0x17f)]=_0x28878c+_0x11a247(0x23f),_0x228ced[_0x11a247(0x1e9)]=URL[_0x11a247(0x196)](_0x22b40f),_0x228ced[_0x11a247(0x137)]();}function exportGif(){const _0x8450e0=a0_0x8a3065;let _0x545c7a=getCurrentProject(),_0x481107=_0x545c7a['frames'],_0xdb5ae9=_0x545c7a[_0x8450e0(0x1f4)]*cellSize,_0x1bea92=_0x545c7a[_0x8450e0(0x1de)]*cellSize;const _0x5b64da=_0x481107['map'](_0x49f377=>{const _0x11416b=_0x8450e0;let _0x40672e=document[_0x11416b(0x1fc)]('canvas');_0x40672e[_0x11416b(0x1f4)]=_0xdb5ae9,_0x40672e['height']=_0x1bea92;let _0x264b2e=_0x40672e[_0x11416b(0x1d8)]('2d');for(let _0x1707be=0x0;_0x1707be<_0x49f377[_0x11416b(0x128)][_0x11416b(0x1d0)];_0x1707be++){_0x264b2e['drawImage'](_0x49f377[_0x11416b(0x128)][_0x1707be],0x0,0x0);}return _0x40672e[_0x11416b(0x228)](_0x11416b(0x1c0));});Promise['all'](_0x5b64da[_0x8450e0(0x10c)](_0x43e44b=>{return new Promise(_0x8066c8=>{const _0x4a6e85=a0_0x5921,_0x3ae10d=new Image();_0x3ae10d[_0x4a6e85(0x154)]=_0x43e44b,_0x3ae10d[_0x4a6e85(0x259)]=()=>_0x8066c8(_0x3ae10d);});}))[_0x8450e0(0x193)](_0x3744e6=>{const _0x1b91db=_0x8450e0,_0x100f54=_0x3744e6[_0x1b91db(0x22f)](_0x2dab07=>_0x2dab07[_0x1b91db(0x1f4)]>0x0&&_0x2dab07['height']>0x0);if(_0x100f54[_0x1b91db(0x1d0)]===0x0){alert('GIF„Å´Â§âÊèõ„Åß„Åç„ÇãÁîªÂÉè„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ');return;}const _0x26530a=(_0x545c7a['name']||_0x1b91db(0x190))[_0x1b91db(0x127)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x100f54,animationDelay,_0x26530a+_0x1b91db(0x153));});}function exportApng(){const _0x16a517=a0_0x8a3065;let _0x4ae9aa=getCurrentProject(),_0x4d3def=_0x4ae9aa[_0x16a517(0x1b9)],_0x10bdef=_0x4ae9aa[_0x16a517(0x1f4)]*cellSize,_0xdf9170=_0x4ae9aa['height']*cellSize;const _0x2989c1=_0x4d3def[_0x16a517(0x10c)](_0x46a952=>{const _0x5e24c6=_0x16a517;let _0x5545de=document[_0x5e24c6(0x1fc)]('canvas');_0x5545de[_0x5e24c6(0x1f4)]=_0x10bdef,_0x5545de[_0x5e24c6(0x1de)]=_0xdf9170;let _0xb5e76f=_0x5545de[_0x5e24c6(0x1d8)]('2d');for(let _0x5e8dbb=0x0;_0x5e8dbb<_0x46a952['layers'][_0x5e24c6(0x1d0)];_0x5e8dbb++){_0xb5e76f['drawImage'](_0x46a952[_0x5e24c6(0x128)][_0x5e8dbb],0x0,0x0);}let _0x206d66=new Image();return _0x206d66[_0x5e24c6(0x154)]=_0x5545de['toDataURL'](_0x5e24c6(0x1c0)),_0x206d66;}),_0x4226b8=(_0x4ae9aa[_0x16a517(0x16f)]||_0x16a517(0x190))['replace'](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x2989c1,_0x10bdef,_0xdf9170,animationDelay,_0x4226b8+_0x16a517(0x158));}const dbName=a0_0x8a3065(0x150),storeName=a0_0x8a3065(0x223);function openDB(){return new Promise((_0x3d9c6d,_0x382a96)=>{const _0x1262b3=a0_0x5921,_0x5a0c93=indexedDB['open'](dbName,0x1);_0x5a0c93[_0x1262b3(0x242)]=()=>{const _0x1aeafd=_0x1262b3;_0x5a0c93[_0x1aeafd(0x24b)][_0x1aeafd(0x13e)](storeName);},_0x5a0c93['onsuccess']=()=>_0x3d9c6d(_0x5a0c93[_0x1262b3(0x24b)]),_0x5a0c93[_0x1262b3(0x11f)]=()=>_0x382a96(_0x5a0c93[_0x1262b3(0x203)]);});}async function idbSet(_0x2b3067,_0x2173db){const _0x233455=await openDB();return new Promise((_0xeba643,_0x4fd0f4)=>{const _0x24bb2b=a0_0x5921,_0x57ba86=_0x233455[_0x24bb2b(0x106)](storeName,_0x24bb2b(0x1e3));_0x57ba86[_0x24bb2b(0x177)](storeName)[_0x24bb2b(0x132)](_0x2173db,_0x2b3067),_0x57ba86[_0x24bb2b(0x1aa)]=()=>_0xeba643(),_0x57ba86[_0x24bb2b(0x11f)]=()=>_0x4fd0f4(_0x57ba86['error']);});}async function idbGet(_0x536513){const _0x34091b=await openDB();return new Promise((_0x2b257d,_0x3a302f)=>{const _0x3cf88b=a0_0x5921,_0x42bf61=_0x34091b[_0x3cf88b(0x106)](storeName,'readonly'),_0xa25446=_0x42bf61['objectStore'](storeName)[_0x3cf88b(0x257)](_0x536513);_0xa25446['onsuccess']=()=>_0x2b257d(_0xa25446[_0x3cf88b(0x24b)]),_0xa25446['onerror']=()=>_0x3a302f(_0xa25446[_0x3cf88b(0x203)]);});}async function idbDelete(_0x1c5b21){const _0x250cd4=await openDB();return new Promise((_0x23836e,_0x352603)=>{const _0x2d78a0=a0_0x5921,_0x4a9729=_0x250cd4[_0x2d78a0(0x106)](storeName,_0x2d78a0(0x1e3));_0x4a9729[_0x2d78a0(0x177)](storeName)[_0x2d78a0(0x14d)](_0x1c5b21),_0x4a9729[_0x2d78a0(0x1aa)]=()=>_0x23836e(),_0x4a9729[_0x2d78a0(0x11f)]=()=>_0x352603(_0x4a9729[_0x2d78a0(0x203)]);});}async function idbClear(){const _0x2f22be=await openDB();return new Promise((_0x33ee1c,_0x389cfe)=>{const _0x1cf351=a0_0x5921,_0xdf7b7e=_0x2f22be[_0x1cf351(0x106)](storeName,'readwrite');_0xdf7b7e[_0x1cf351(0x177)](storeName)['clear'](),_0xdf7b7e['oncomplete']=()=>_0x33ee1c(),_0xdf7b7e['onerror']=()=>_0x389cfe(_0xdf7b7e[_0x1cf351(0x203)]);});}function saveProjectFile(){const _0x348bb2=a0_0x8a3065,_0x24c9c7={'projects':projects[_0x348bb2(0x10c)](_0x3adda5=>({'width':_0x3adda5[_0x348bb2(0x1f4)],'height':_0x3adda5['height'],'name':_0x3adda5['name']||'','activeFrame':_0x3adda5[_0x348bb2(0x226)],'frames':_0x3adda5['frames']['map'](_0x53bb0f=>({'activeLayer':_0x53bb0f['activeLayer'],'layers':_0x53bb0f['layers'][_0x348bb2(0x10c)](_0x5c8343=>_0x5c8343[_0x348bb2(0x228)]())}))})),'activeProject':activeProject},_0x49698c=new Blob([JSON['stringify'](_0x24c9c7)],{'type':'application/json'}),_0x41ba10=document[_0x348bb2(0x1fc)]('a');_0x41ba10[_0x348bb2(0x17f)]=_0x348bb2(0x164),_0x41ba10[_0x348bb2(0x1e9)]=URL['createObjectURL'](_0x49698c),_0x41ba10[_0x348bb2(0x137)]();}function saveProjectFile(){const _0x3be0be=a0_0x8a3065,_0x4c22bd={'projects':projects[_0x3be0be(0x10c)](_0x2568d1=>({'width':_0x2568d1[_0x3be0be(0x1f4)],'height':_0x2568d1[_0x3be0be(0x1de)],'name':_0x2568d1[_0x3be0be(0x16f)]||'','activeFrame':_0x2568d1[_0x3be0be(0x226)],'frames':_0x2568d1[_0x3be0be(0x1b9)][_0x3be0be(0x10c)](_0x222b66=>({'activeLayer':_0x222b66[_0x3be0be(0x1e6)],'layers':_0x222b66['layers'][_0x3be0be(0x10c)](_0x5f0033=>_0x5f0033['toDataURL']())}))})),'activeProject':activeProject},_0x4b93a4=new Blob([JSON[_0x3be0be(0x133)](_0x4c22bd)],{'type':'application/json'}),_0xf9927c=document[_0x3be0be(0x1fc)]('a');_0xf9927c['download']=_0x3be0be(0x164),_0xf9927c[_0x3be0be(0x1e9)]=URL[_0x3be0be(0x196)](_0x4b93a4),_0xf9927c['click']();}async function saveProjectToIDB(){const _0x471c2e=a0_0x8a3065,_0x24d1ff={'projects':projects['map'](_0x23853c=>({'width':_0x23853c[_0x471c2e(0x1f4)],'height':_0x23853c[_0x471c2e(0x1de)],'name':_0x23853c[_0x471c2e(0x16f)]||'','activeFrame':_0x23853c[_0x471c2e(0x226)],'frames':_0x23853c[_0x471c2e(0x1b9)][_0x471c2e(0x10c)](_0x5b5dab=>({'activeLayer':_0x5b5dab[_0x471c2e(0x1e6)],'layers':_0x5b5dab['layers'][_0x471c2e(0x10c)](_0x2f28a0=>_0x2f28a0['toDataURL']())}))})),'activeProject':activeProject};try{await idbSet(_0x471c2e(0x149),_0x24d1ff),console[_0x471c2e(0x1d1)](_0x471c2e(0x1ec));}catch(_0x1d6675){console[_0x471c2e(0x203)](_0x471c2e(0x13a),_0x1d6675);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x8a3065(0x147)](a0_0x8a3065(0x21c),_0x2a1752=>{saveProjectToIDB();});function loadProjectFile(_0x14513){const _0xcd7486=a0_0x8a3065,_0x1f4f61=_0x14513[_0xcd7486(0x180)][_0xcd7486(0x1f6)][0x0];if(!_0x1f4f61)return;if(_0x1f4f61[_0xcd7486(0x231)]&&_0x1f4f61[_0xcd7486(0x231)]['startsWith']('image')){loadStandaloneFromFile(_0x1f4f61)[_0xcd7486(0x193)](_0x21bafb=>{const _0x3db4a7=_0xcd7486;alert('„Çπ„Çø„É≥„Éâ„Ç¢„É≠„É≥ÂΩ¢Âºè„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:\x20'+(_0x21bafb[_0x3db4a7(0x16f)]||'ÁîªÂÉè'));})['catch'](_0x3813ef=>{const _0x635cc2=_0xcd7486;console[_0x635cc2(0x238)](_0x3813ef),alert(_0x635cc2(0x176));});return;}const _0x13c98d=new FileReader();_0x13c98d[_0xcd7486(0x259)]=function(_0x1542a7){const _0x39b8bd=_0xcd7486;try{const _0x44f610=JSON[_0x39b8bd(0x218)](_0x1542a7[_0x39b8bd(0x180)][_0x39b8bd(0x24b)]);projects=_0x44f610[_0x39b8bd(0x1b5)][_0x39b8bd(0x10c)]((_0x9af0e7,_0x26b4d5)=>{const _0x1724d6=_0x39b8bd;let _0x537002=createProject(_0x9af0e7[_0x1724d6(0x1f4)],_0x9af0e7[_0x1724d6(0x1de)],_0x9af0e7[_0x1724d6(0x16f)]||'ÁîªÂÉè'+(_0x26b4d5+0x1));return _0x537002[_0x1724d6(0x1b9)]=_0x9af0e7['frames'][_0x1724d6(0x10c)](_0x2f9dec=>{const _0x39eb20=_0x1724d6;let _0x494927={'layers':[],'activeLayer':_0x2f9dec[_0x39eb20(0x1e6)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x3cd22a=0x0;_0x3cd22a<_0x2f9dec[_0x39eb20(0x128)][_0x39eb20(0x1d0)];_0x3cd22a++){let _0x4bd1ae=new Image();_0x4bd1ae[_0x39eb20(0x154)]=_0x2f9dec['layers'][_0x3cd22a];let _0x4b6a48=document['createElement'](_0x39eb20(0x219));_0x4b6a48[_0x39eb20(0x1f4)]=_0x9af0e7[_0x39eb20(0x1f4)]*cellSize,_0x4b6a48[_0x39eb20(0x1de)]=_0x9af0e7[_0x39eb20(0x1de)]*cellSize,_0x4bd1ae[_0x39eb20(0x259)]=()=>{const _0x3f2dd0=_0x39eb20;let _0x3e0e27=_0x4b6a48['getContext']('2d');_0x3e0e27[_0x3f2dd0(0x1e7)](0x0,0x0,_0x4b6a48[_0x3f2dd0(0x1f4)],_0x4b6a48[_0x3f2dd0(0x1de)]),_0x3e0e27['drawImage'](_0x4bd1ae,0x0,0x0);},_0x4bd1ae['onload'](),_0x494927[_0x39eb20(0x128)][_0x39eb20(0x169)](_0x4b6a48),_0x494927[_0x39eb20(0x206)][_0x39eb20(0x169)]([]),_0x494927[_0x39eb20(0x1c6)][_0x39eb20(0x169)]([]);}return _0x494927;}),_0x537002[_0x1724d6(0x226)]=_0x9af0e7[_0x1724d6(0x226)],_0x537002[_0x1724d6(0x16f)]=_0x9af0e7['name']||'ÁîªÂÉè'+(_0x26b4d5+0x1),_0x537002;}),activeProject=_0x44f610[_0x39b8bd(0x25e)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x29ef69){alert(_0x39b8bd(0x212));}},_0x13c98d[_0xcd7486(0x1d4)](_0x1f4f61);}async function loadProjectFromIDB(){const _0xf87e6e=a0_0x8a3065;try{const _0x299241=await idbGet('nezumi-sketch-save');if(!_0x299241)return;projects=_0x299241['projects'][_0xf87e6e(0x10c)]((_0x342dc8,_0x49c221)=>{const _0x242591=_0xf87e6e;let _0xa54862=createProject(_0x342dc8[_0x242591(0x1f4)],_0x342dc8[_0x242591(0x1de)],_0x342dc8[_0x242591(0x16f)]||'ÁîªÂÉè'+(_0x49c221+0x1));return _0xa54862['frames']=_0x342dc8['frames'][_0x242591(0x10c)](_0x25b8a5=>{const _0x54b26c=_0x242591;let _0xd71972={'layers':[],'activeLayer':_0x25b8a5[_0x54b26c(0x1e6)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x53d417=0x0;_0x53d417<_0x25b8a5[_0x54b26c(0x128)][_0x54b26c(0x1d0)];_0x53d417++){let _0x3c724b=new Image();_0x3c724b[_0x54b26c(0x154)]=_0x25b8a5['layers'][_0x53d417];let _0x45a2d5=document[_0x54b26c(0x1fc)](_0x54b26c(0x219));_0x45a2d5[_0x54b26c(0x1f4)]=_0x342dc8['width']*cellSize,_0x45a2d5[_0x54b26c(0x1de)]=_0x342dc8['height']*cellSize,_0x3c724b[_0x54b26c(0x259)]=()=>{const _0x5d6a6d=_0x54b26c;let _0x1ce662=_0x45a2d5[_0x5d6a6d(0x1d8)]('2d');_0x1ce662['clearRect'](0x0,0x0,_0x45a2d5[_0x5d6a6d(0x1f4)],_0x45a2d5[_0x5d6a6d(0x1de)]),_0x1ce662['drawImage'](_0x3c724b,0x0,0x0);},_0xd71972[_0x54b26c(0x128)][_0x54b26c(0x169)](_0x45a2d5),_0xd71972[_0x54b26c(0x206)][_0x54b26c(0x169)]([]),_0xd71972['layerRedoStacks'][_0x54b26c(0x169)]([]);}return _0xd71972;}),_0xa54862[_0x242591(0x226)]=_0x342dc8[_0x242591(0x226)],_0xa54862[_0x242591(0x16f)]=_0x342dc8[_0x242591(0x16f)]||'ÁîªÂÉè'+(_0x49c221+0x1),_0xa54862;}),activeProject=_0x299241['activeProject']||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool(_0xf87e6e(0x1c2)),console['log']('IndexedDB„Åã„Çâ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Çì„Å†„ÉÅ„É•„ÉºÔºÅ');}catch(_0xafefce){alert(_0xf87e6e(0x18f)),console[_0xf87e6e(0x203)](_0xafefce);}}function wait(_0x1b2461){return new Promise(_0x48553b=>setTimeout(_0x48553b,_0x1b2461));}function initCanvas(){const _0x3aad49=a0_0x8a3065,_0x12277c=parseInt(0x10),_0x4b2361=parseInt(0x10);let _0x3257d1=getCurrentProject();_0x3257d1[_0x3aad49(0x1f4)]=_0x12277c,_0x3257d1[_0x3aad49(0x1de)]=_0x4b2361,canvas[_0x3aad49(0x1f4)]=_0x12277c*cellSize,canvas[_0x3aad49(0x1de)]=_0x4b2361*cellSize,_0x3257d1[_0x3aad49(0x128)]=[],_0x3257d1[_0x3aad49(0x206)]=[],_0x3257d1[_0x3aad49(0x1c6)]=[];let _0x12dff8=document[_0x3aad49(0x1fc)](_0x3aad49(0x219));_0x12dff8[_0x3aad49(0x1f4)]=_0x12277c*cellSize,_0x12dff8['height']=_0x4b2361*cellSize,_0x3257d1['layers']['push'](_0x12dff8),_0x3257d1['layerHistories']['push']([]),_0x3257d1[_0x3aad49(0x1c6)][_0x3aad49(0x169)]([]),_0x3257d1['activeLayer']=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x3aad49(0x263)]=null,canvas['onmousemove']=null,canvas[_0x3aad49(0x16d)]=null,canvas[_0x3aad49(0x1c3)]=null,canvas[_0x3aad49(0x1ef)]=null,canvas[_0x3aad49(0x110)]=null,canvas[_0x3aad49(0x246)]=null,canvas[_0x3aad49(0x122)]=null,canvas[_0x3aad49(0x179)]('touchstart',handleTouchStart),canvas['removeEventListener'](_0x3aad49(0x1f0),handleTouchMove),canvas[_0x3aad49(0x179)](_0x3aad49(0x20d),handleTouchEnd),canvas[_0x3aad49(0x179)](_0x3aad49(0x13f),handleTouchEnd),canvas[_0x3aad49(0x263)]=handleMouseDown,canvas[_0x3aad49(0x23e)]=handleMouseMove,canvas[_0x3aad49(0x16d)]=handleMouseUp,canvas[_0x3aad49(0x1c3)]=handleMouseUp,canvas[_0x3aad49(0x1ef)]=handleTouchStart,canvas[_0x3aad49(0x110)]=handleTouchMove,canvas[_0x3aad49(0x246)]=handleTouchEnd,canvas[_0x3aad49(0x122)]=handleTouchEnd,canvas[_0x3aad49(0x147)](_0x3aad49(0x21d),handleTouchStart,{'passive':![]}),canvas['addEventListener'](_0x3aad49(0x1f0),handleTouchMove,{'passive':![]}),canvas[_0x3aad49(0x147)](_0x3aad49(0x20d),handleTouchEnd,{'passive':![]}),canvas[_0x3aad49(0x147)](_0x3aad49(0x13f),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x3254d0=a0_0x8a3065,_0x29d37=document[_0x3254d0(0x1b4)](_0x3254d0(0x1d9));if(!_0x29d37)return;_0x29d37['innerHTML']='',PALETTE_COLORS[_0x3254d0(0x208)]((_0x21a147,_0x27942b)=>{const _0x5129cf=_0x3254d0,_0x4cd1ad=document[_0x5129cf(0x1fc)]('button');_0x4cd1ad['className']=_0x5129cf(0x1f2);_0x21a147===_0x5129cf(0x17a)||_0x21a147===_0x5129cf(0x12f)?(_0x4cd1ad[_0x5129cf(0x15e)][_0x5129cf(0x262)]=_0x5129cf(0x1f9),_0x4cd1ad[_0x5129cf(0x237)]='ÈÄèÊòé',_0x4cd1ad[_0x5129cf(0x1d5)]=_0x5129cf(0x204)):(_0x4cd1ad['style'][_0x5129cf(0x262)]=_0x21a147,_0x4cd1ad['title']=_0x21a147);_0x4cd1ad[_0x5129cf(0x1e2)]=()=>{const _0x407de0=_0x5129cf;currentColor=_0x21a147,_0x21a147===_0x407de0(0x17a)||_0x21a147===_0x407de0(0x12f)?document[_0x407de0(0x1b4)]('colorPicker')[_0x407de0(0x1ba)]='#000000':document['getElementById'](_0x407de0(0x258))[_0x407de0(0x1ba)]=_0x21a147,document['querySelectorAll']('.palette-color')[_0x407de0(0x208)](_0x24989d=>_0x24989d[_0x407de0(0x1dc)][_0x407de0(0x143)](_0x407de0(0x1af))),_0x4cd1ad[_0x407de0(0x1dc)][_0x407de0(0x1fb)](_0x407de0(0x1af));};if(_0x27942b!==0x0){const _0xf14a29=document['createElement'](_0x5129cf(0x156));_0xf14a29[_0x5129cf(0x1da)]='√ó',_0xf14a29[_0x5129cf(0x116)]=_0x5129cf(0x126),_0xf14a29['title']=_0x5129cf(0x222),_0xf14a29[_0x5129cf(0x1e2)]=_0x1c72c9=>{const _0x1e8ef5=_0x5129cf;_0x1c72c9[_0x1e8ef5(0x250)](),PALETTE_COLORS[_0x1e8ef5(0x1d0)]>0x2&&(PALETTE_COLORS[_0x1e8ef5(0x16a)](_0x27942b,0x1),createPalette());},_0x4cd1ad['appendChild'](_0xf14a29);}_0x29d37[_0x5129cf(0x12a)](_0x4cd1ad);});const _0x15821a=document[_0x3254d0(0x1fc)](_0x3254d0(0x20b));_0x15821a[_0x3254d0(0x116)]=_0x3254d0(0x111),_0x15821a['title']='„Éë„É¨„ÉÉ„Éà„Å´Ëâ≤„ÇíËøΩÂä†',_0x15821a['innerHTML']='+',_0x15821a[_0x3254d0(0x1e2)]=_0x4d3c0a=>{const _0x4ad3c9=_0x3254d0;_0x4d3c0a[_0x4ad3c9(0x250)]();const _0x111c27=document[_0x4ad3c9(0x1fc)](_0x4ad3c9(0x12b));_0x111c27['type']=_0x4ad3c9(0x22c),_0x111c27[_0x4ad3c9(0x15e)][_0x4ad3c9(0x23a)]=_0x4ad3c9(0x14a);let _0x1bff88=![];_0x111c27[_0x4ad3c9(0x108)]=_0x12601b=>{const _0x289cdf=_0x4ad3c9;if(!_0x1bff88){PALETTE_COLORS['unshift'](_0x12601b['target'][_0x289cdf(0x1ba)]);if(PALETTE_COLORS[_0x289cdf(0x1d0)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x289cdf(0x217)](0x0,0x18);savePaletteToDB(),createPalette(),_0x1bff88=!![],_0x111c27[_0x289cdf(0x143)]();}},_0x111c27[_0x4ad3c9(0x147)](_0x4ad3c9(0x1fd),()=>{if(!_0x1bff88)_0x111c27['remove']();}),_0x111c27[_0x4ad3c9(0x147)]('click',_0x27d679=>_0x27d679[_0x4ad3c9(0x250)]()),document[_0x4ad3c9(0x161)][_0x4ad3c9(0x12a)](_0x111c27),_0x111c27[_0x4ad3c9(0x10a)](),_0x111c27[_0x4ad3c9(0x137)]();},_0x29d37[_0x3254d0(0x1e4)](_0x15821a,_0x29d37[_0x3254d0(0x20c)]);let _0x49ddbb=document[_0x3254d0(0x1b4)](_0x3254d0(0x1bb));!_0x49ddbb&&(_0x49ddbb=document['createElement'](_0x3254d0(0x11d)),_0x49ddbb['id']='palette-toolbar',_0x49ddbb[_0x3254d0(0x116)]=_0x3254d0(0x1bb),_0x29d37[_0x3254d0(0x1cd)][_0x3254d0(0x12a)](_0x49ddbb)),_0x49ddbb[_0x3254d0(0x1d5)]=_0x3254d0(0x152)+(currentTool===_0x3254d0(0x1c2)?'\x20active':'')+_0x3254d0(0x243)+(currentTool==='eraser'?'\x20active':'')+_0x3254d0(0x241)+(currentTool===_0x3254d0(0x120)?'\x20active':'')+_0x3254d0(0x235)+(penSize==0x1?_0x3254d0(0x1ca):'')+_0x3254d0(0x124)+(penSize==0x2?'\x20selected':'')+'>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22'+(penSize==0x3?_0x3254d0(0x1ca):'')+'>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22'+(penSize==0x4?_0x3254d0(0x1ca):'')+'>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22'+(penMode===_0x3254d0(0x141)?'\x20selected':'')+'>ÂõõËßí„Éö„É≥</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22'+(penMode===_0x3254d0(0x19c)?_0x3254d0(0x1ca):'')+_0x3254d0(0x130)+Math['round'](currentAlpha*0x64)+_0x3254d0(0x1fa)+Math[_0x3254d0(0x1a3)](currentAlpha*0x64)+_0x3254d0(0x123),_0x49ddbb[_0x3254d0(0x1b8)](_0x3254d0(0x192))['onchange']=_0x53157c=>setPenSize(_0x53157c[_0x3254d0(0x180)]['value']),_0x49ddbb[_0x3254d0(0x1b8)](_0x3254d0(0x213))['onchange']=_0x5046db=>setPenMode(_0x5046db['target'][_0x3254d0(0x1ba)]),_0x49ddbb[_0x3254d0(0x1c1)]('.tool-btn')['forEach'](_0x35dcd2=>{const _0x1a197c=_0x3254d0;_0x35dcd2[_0x1a197c(0x1e2)]=()=>setTool(_0x35dcd2[_0x1a197c(0x18c)][_0x1a197c(0x261)]);}),_0x49ddbb[_0x3254d0(0x1b8)]('#palette-alphaSlider')['oninput']=_0x52d0ff=>{const _0x12bb5b=_0x3254d0;setAlpha(_0x52d0ff[_0x12bb5b(0x180)][_0x12bb5b(0x1ba)]),_0x49ddbb['querySelector'](_0x12bb5b(0x12c))[_0x12bb5b(0x1da)]=_0x52d0ff[_0x12bb5b(0x180)][_0x12bb5b(0x1ba)]+'%';let _0x3920e0=document['getElementById']('alphaSlider'),_0x2a7b58=document[_0x12bb5b(0x1b4)](_0x12bb5b(0x1bf));if(_0x3920e0)_0x3920e0[_0x12bb5b(0x1ba)]=_0x52d0ff['target']['value'];if(_0x2a7b58)_0x2a7b58[_0x12bb5b(0x1da)]=_0x52d0ff[_0x12bb5b(0x180)][_0x12bb5b(0x1ba)]+'%';};}function setAlpha(_0x3f29f3){const _0x4405cf=a0_0x8a3065;let _0x1961c1=Math[_0x4405cf(0x11e)](0x0,Math[_0x4405cf(0x1b2)](0x64,parseInt(_0x3f29f3,0xa)||0x0));currentAlpha=_0x1961c1/0x64;let _0x143d21=document['getElementById']('alphaSlider'),_0x43570b=document[_0x4405cf(0x1b4)](_0x4405cf(0x1bf));if(_0x143d21)_0x143d21[_0x4405cf(0x1ba)]=_0x1961c1;if(_0x43570b)_0x43570b[_0x4405cf(0x1da)]=_0x1961c1+'%';let _0x3ce8d0=document[_0x4405cf(0x1b4)](_0x4405cf(0x16e)),_0x527a11=document[_0x4405cf(0x1b4)](_0x4405cf(0x131));if(_0x3ce8d0)_0x3ce8d0[_0x4405cf(0x1ba)]=_0x1961c1;if(_0x527a11)_0x527a11[_0x4405cf(0x1da)]=_0x1961c1+'%';}async function savePaletteToDB(){const _0x58bfa1=a0_0x8a3065;try{await idbSet(_0x58bfa1(0x168),PALETTE_COLORS);}catch(_0x31d180){console[_0x58bfa1(0x203)]('‰øùÂ≠ò„Ç®„É©„Éº',_0x31d180);}}async function loadPaletteFromDB(){const _0x2b0909=a0_0x8a3065;try{const _0x18729e=await idbGet(_0x2b0909(0x168));Array[_0x2b0909(0x25a)](_0x18729e)&&_0x18729e['length']&&(PALETTE_COLORS=_0x18729e);}catch(_0x53a78f){console[_0x2b0909(0x203)](_0x2b0909(0x178),_0x53a78f);}}document['addEventListener'](a0_0x8a3065(0x10e),()=>{const _0x2ca38d=a0_0x8a3065,_0x224bc7=document[_0x2ca38d(0x1b4)]('colorPicker');_0x224bc7&&(_0x224bc7['oninput']=_0xc2e541=>{const _0x4f63ab=_0x2ca38d;currentColor=_0xc2e541['target'][_0x4f63ab(0x1ba)],document[_0x4f63ab(0x1c1)]('.palette-color')['forEach'](_0x47ce4a=>_0x47ce4a[_0x4f63ab(0x1dc)][_0x4f63ab(0x143)](_0x4f63ab(0x1af)));});const _0x36a7c4=document[_0x2ca38d(0x1b4)]('alphaSlider'),_0x3d0c71=document[_0x2ca38d(0x1b4)](_0x2ca38d(0x1bf));_0x36a7c4&&_0x3d0c71&&(_0x36a7c4[_0x2ca38d(0x108)]=_0x5e0910=>{const _0x1d368c=_0x2ca38d;setAlpha(_0x5e0910['target'][_0x1d368c(0x1ba)]),_0x3d0c71[_0x1d368c(0x1da)]=_0x5e0910[_0x1d368c(0x180)]['value']+'%';let _0x184daa=document[_0x1d368c(0x1b4)](_0x1d368c(0x16e)),_0x41ff64=document[_0x1d368c(0x1b4)](_0x1d368c(0x131));if(_0x184daa)_0x184daa[_0x1d368c(0x1ba)]=_0x5e0910[_0x1d368c(0x180)][_0x1d368c(0x1ba)];if(_0x41ff64)_0x41ff64[_0x1d368c(0x1da)]=_0x5e0910[_0x1d368c(0x180)][_0x1d368c(0x1ba)]+'%';});});async function convertToGIF(_0x100439,_0x3190b8=0xc8,_0x1c0011=a0_0x8a3065(0x1fe)){const _0x518bf5=a0_0x8a3065,_0x3db519=new window['GIF']({'workers':0x2,'quality':0xa,'workerScript':_0x518bf5(0x1a8)});_0x100439['forEach'](_0x540ae2=>_0x3db519['addFrame'](_0x540ae2,{'delay':_0x3190b8})),_0x3db519['on']('finished',_0x544ea5=>{const _0x1af117=_0x518bf5,_0xff3e15=URL[_0x1af117(0x196)](_0x544ea5),_0xc33aea=document['createElement']('a');_0xc33aea[_0x1af117(0x1e9)]=_0xff3e15,_0xc33aea[_0x1af117(0x17f)]=_0x1c0011,document[_0x1af117(0x161)][_0x1af117(0x12a)](_0xc33aea),_0xc33aea[_0x1af117(0x137)](),setTimeout(()=>{const _0x273937=_0x1af117;document['body']['removeChild'](_0xc33aea),URL[_0x273937(0x14f)](_0xff3e15);},0x3e8);}),_0x3db519[_0x518bf5(0x1f3)]();}function makeAPNGBlob(_0x40f2de,_0x504cad,_0x317cf5,_0x490b0d=0xc8){const _0x549ea5=a0_0x8a3065,_0x1fbcda=[],_0x27400c=[],_0x2d2a13=document[_0x549ea5(0x1fc)](_0x549ea5(0x219));_0x2d2a13[_0x549ea5(0x1f4)]=_0x504cad,_0x2d2a13[_0x549ea5(0x1de)]=_0x317cf5;const _0x2102b3=_0x2d2a13['getContext']('2d');_0x40f2de[_0x549ea5(0x208)](_0xe1e8a4=>{const _0x532ac3=_0x549ea5;_0x2102b3['clearRect'](0x0,0x0,_0x504cad,_0x317cf5),_0x2102b3['drawImage'](_0xe1e8a4,0x0,0x0,_0x504cad,_0x317cf5);const _0x8ca727=_0x2102b3[_0x532ac3(0x18b)](0x0,0x0,_0x504cad,_0x317cf5)[_0x532ac3(0x260)][_0x532ac3(0x146)];_0x1fbcda[_0x532ac3(0x169)](_0x8ca727),_0x27400c[_0x532ac3(0x169)](_0x490b0d);});const _0x20437a=window[_0x549ea5(0x139)][_0x549ea5(0x17e)](_0x1fbcda,_0x504cad,_0x317cf5,0x0,_0x27400c);return new Blob([_0x20437a],{'type':_0x549ea5(0x1e1)});}function convertToAPNG(_0x3b5ac5,_0x4749bf,_0x1dc8bc,_0x20f3c2=0xc8,_0x5e89be=a0_0x8a3065(0x240)){const _0x2bf7e0=a0_0x8a3065,_0x57faad=makeAPNGBlob(_0x3b5ac5,_0x4749bf,_0x1dc8bc,_0x20f3c2),_0x373b0d=URL[_0x2bf7e0(0x196)](_0x57faad),_0x1ca75a=document[_0x2bf7e0(0x1fc)]('a');_0x1ca75a[_0x2bf7e0(0x1e9)]=_0x373b0d,_0x1ca75a[_0x2bf7e0(0x17f)]=_0x5e89be,document[_0x2bf7e0(0x161)]['appendChild'](_0x1ca75a),_0x1ca75a['click'](),setTimeout(()=>{const _0xdf36d4=_0x2bf7e0;document[_0xdf36d4(0x161)][_0xdf36d4(0x1cf)](_0x1ca75a),URL['revokeObjectURL'](_0x373b0d);},0x3e8);}async function loadImages(_0x3fd08a){const _0x4b1c90=a0_0x8a3065,_0x2210d8=await Promise[_0x4b1c90(0x21f)](_0x3fd08a[_0x4b1c90(0x10c)](_0x5c060c=>{return new Promise(_0x495902=>{const _0x31d61f=a0_0x5921,_0x43635b=new Image();_0x43635b[_0x31d61f(0x1df)]=_0x31d61f(0x18d),_0x43635b[_0x31d61f(0x154)]=_0x5c060c,_0x43635b[_0x31d61f(0x259)]=()=>_0x495902(_0x43635b);});}));return _0x2210d8;}function exportSpriteSheetDialog(){const _0x5bfbc3=a0_0x8a3065;let _0x596d11=prompt(_0x5bfbc3(0x182),'1');if(_0x596d11===null)return;let _0x2b1185=Math[_0x5bfbc3(0x11e)](0x1,parseInt(_0x596d11,0xa)||0x1),_0x295146=prompt(_0x5bfbc3(0x171),'0');if(_0x295146===null)return;let _0x10b5c8=Math[_0x5bfbc3(0x11e)](0x0,parseInt(_0x295146,0xa)||0x0);exportSpriteSheet(_0x2b1185,_0x10b5c8);}function exportSpriteSheet(_0x2f7c57=0x1,_0x1efbdb=0x0){const _0xe6544e=a0_0x8a3065,_0x5d3c63=getCurrentProject();if(!_0x5d3c63){alert('„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì');return;}const _0x165ebe=_0x5d3c63[_0xe6544e(0x1b9)];if(!_0x165ebe||_0x165ebe[_0xe6544e(0x1d0)]===0x0){alert(_0xe6544e(0x1e5));return;}const _0x5d71e6=_0x5d3c63[_0xe6544e(0x1f4)]*cellSize,_0x117efe=_0x5d3c63['height']*cellSize,_0x324dc4=_0x5d71e6*_0x165ebe[_0xe6544e(0x1d0)]*_0x2f7c57+Math[_0xe6544e(0x11e)](0x0,_0x165ebe[_0xe6544e(0x1d0)]-0x1)*_0x1efbdb,_0x33210f=_0x117efe*_0x2f7c57,_0x3be022=document[_0xe6544e(0x1fc)](_0xe6544e(0x219));_0x3be022[_0xe6544e(0x1f4)]=_0x324dc4,_0x3be022[_0xe6544e(0x1de)]=_0x33210f;const _0x2bb819=_0x3be022[_0xe6544e(0x1d8)]('2d');_0x2bb819[_0xe6544e(0x1e7)](0x0,0x0,_0x3be022['width'],_0x3be022[_0xe6544e(0x1de)]);let _0x2e1384=0x0;for(let _0x24d30c=0x0;_0x24d30c<_0x165ebe[_0xe6544e(0x1d0)];_0x24d30c++){let _0x6b668=document[_0xe6544e(0x1fc)](_0xe6544e(0x219));_0x6b668[_0xe6544e(0x1f4)]=_0x5d71e6,_0x6b668[_0xe6544e(0x1de)]=_0x117efe;let _0x133e16=_0x6b668['getContext']('2d');for(let _0x29c152=0x0;_0x29c152<_0x165ebe[_0x24d30c][_0xe6544e(0x128)]['length'];_0x29c152++){_0x133e16[_0xe6544e(0x23b)](_0x165ebe[_0x24d30c][_0xe6544e(0x128)][_0x29c152],0x0,0x0);}_0x2f7c57===0x1&&_0x1efbdb===0x0?(_0x2bb819[_0xe6544e(0x23b)](_0x6b668,_0x2e1384,0x0),_0x2e1384+=_0x5d71e6):(_0x2bb819[_0xe6544e(0x23b)](_0x6b668,0x0,0x0,_0x5d71e6,_0x117efe,_0x2e1384,0x0,_0x5d71e6*_0x2f7c57,_0x117efe*_0x2f7c57),_0x2e1384+=_0x5d71e6*_0x2f7c57),_0x24d30c<_0x165ebe[_0xe6544e(0x1d0)]-0x1&&_0x1efbdb>0x0&&(_0x2e1384+=_0x1efbdb);}const _0x52e6e5=(_0x5d3c63[_0xe6544e(0x16f)]||'nezumi-spritesheet')[_0xe6544e(0x127)](/[\\/:*?"<>|]/g,'_'),_0x1fe608=document[_0xe6544e(0x1fc)]('a');_0x1fe608['href']=_0x3be022[_0xe6544e(0x228)](_0xe6544e(0x1c0)),_0x1fe608[_0xe6544e(0x17f)]=_0x52e6e5+_0xe6544e(0x14e),document['body'][_0xe6544e(0x12a)](_0x1fe608),_0x1fe608[_0xe6544e(0x137)](),setTimeout(()=>{const _0x32f9a9=_0xe6544e;document[_0x32f9a9(0x161)][_0x32f9a9(0x1cf)](_0x1fe608);},0x3e8);}const NEZUMI_METADATA_SIG=a0_0x8a3065(0x1d2);function appendMetadataToBlob(_0x2ede61,_0x4920be){const _0x3c5db6=a0_0x8a3065,_0x54f277=new TextEncoder(),_0x1b507d=_0x54f277[_0x3c5db6(0x17e)](NEZUMI_METADATA_SIG),_0x436b87=_0x54f277[_0x3c5db6(0x17e)](JSON[_0x3c5db6(0x133)](_0x4920be));return new Blob([_0x2ede61,_0x1b507d,_0x436b87],{'type':_0x2ede61[_0x3c5db6(0x231)]||_0x3c5db6(0x11b)});}function indexOfSubarray(_0x336905,_0x3fbac5){const _0x3c1aca=a0_0x8a3065;for(let _0x11ad55=0x0;_0x11ad55<=_0x336905[_0x3c1aca(0x1d0)]-_0x3fbac5[_0x3c1aca(0x1d0)];_0x11ad55++){let _0x3a270a=!![];for(let _0x22e402=0x0;_0x22e402<_0x3fbac5[_0x3c1aca(0x1d0)];_0x22e402++){if(_0x336905[_0x11ad55+_0x22e402]!==_0x3fbac5[_0x22e402]){_0x3a270a=![];break;}}if(_0x3a270a)return _0x11ad55;}return-0x1;}function extractMetadataFromArrayBuffer(_0x4d14ab){const _0x47aa03=a0_0x8a3065,_0x476460=new TextEncoder()['encode'](NEZUMI_METADATA_SIG),_0x1c1e41=new Uint8Array(_0x4d14ab),_0x2b87c1=indexOfSubarray(_0x1c1e41,_0x476460);if(_0x2b87c1===-0x1)return null;const _0x431ac7=_0x1c1e41[_0x47aa03(0x234)](_0x2b87c1+_0x476460[_0x47aa03(0x1d0)]);try{const _0x3b58b9=new TextDecoder()['decode'](_0x431ac7);return JSON[_0x47aa03(0x218)](_0x3b58b9);}catch(_0xdc790c){return null;}}async function exportStandalone(){const _0x582f3e=a0_0x8a3065;let _0x282223=getCurrentProject(),_0x24d360=_0x282223[_0x582f3e(0x1b9)],_0x475dc1=_0x282223[_0x582f3e(0x1f4)]*cellSize,_0x44c643=_0x282223['height']*cellSize;const _0x1918a2=_0x24d360[_0x582f3e(0x10c)](_0x4bd439=>{const _0x478267=_0x582f3e;let _0x5a7e18=document[_0x478267(0x1fc)](_0x478267(0x219));_0x5a7e18[_0x478267(0x1f4)]=_0x475dc1,_0x5a7e18[_0x478267(0x1de)]=_0x44c643;let _0x4b05a4=_0x5a7e18[_0x478267(0x1d8)]('2d');for(let _0x5e22e9=0x0;_0x5e22e9<_0x4bd439[_0x478267(0x128)]['length'];_0x5e22e9++){_0x4b05a4[_0x478267(0x23b)](_0x4bd439[_0x478267(0x128)][_0x5e22e9],0x0,0x0);}let _0x557b60=new Image();return _0x557b60[_0x478267(0x154)]=_0x5a7e18[_0x478267(0x228)](_0x478267(0x1c0)),_0x557b60;});await Promise[_0x582f3e(0x21f)](_0x1918a2[_0x582f3e(0x10c)](_0x2564dc=>new Promise(_0x65919c=>{const _0x43ed4f=_0x582f3e;_0x2564dc[_0x43ed4f(0x259)]=_0x65919c;})))['catch'](()=>{});const _0xc5e9ba=(_0x282223[_0x582f3e(0x16f)]||_0x582f3e(0x190))['replace'](/[\\/:*?"<>|]/g,'_'),_0x5d449a=makeAPNGBlob(_0x1918a2,_0x475dc1,_0x44c643,animationDelay),_0x37c0ed={'type':_0x582f3e(0x181),'version':0x1,'project':{'width':_0x282223[_0x582f3e(0x1f4)],'height':_0x282223[_0x582f3e(0x1de)],'name':_0x282223['name']||'','activeFrame':_0x282223[_0x582f3e(0x226)],'frames':_0x282223['frames'][_0x582f3e(0x10c)](_0xa0b26b=>({'activeLayer':_0xa0b26b['activeLayer'],'layers':_0xa0b26b['layers'][_0x582f3e(0x10c)](_0x334145=>_0x334145[_0x582f3e(0x228)]())}))}},_0x2b21e2=appendMetadataToBlob(_0x5d449a,_0x37c0ed),_0xeb1ead=URL[_0x582f3e(0x196)](_0x2b21e2),_0xfc0dda=document['createElement']('a');_0xfc0dda[_0x582f3e(0x1e9)]=_0xeb1ead,_0xfc0dda[_0x582f3e(0x17f)]=_0xc5e9ba+_0x582f3e(0x158),document[_0x582f3e(0x161)][_0x582f3e(0x12a)](_0xfc0dda),_0xfc0dda[_0x582f3e(0x137)](),setTimeout(()=>{const _0x2d7cdd=_0x582f3e;document[_0x2d7cdd(0x161)][_0x2d7cdd(0x1cf)](_0xfc0dda),URL[_0x2d7cdd(0x14f)](_0xeb1ead);},0x3e8);}function loadStandaloneFromFile(_0x3b0a52){return new Promise((_0x3f3b78,_0x4d7c35)=>{const _0x428426=a0_0x5921,_0x1b576d=new FileReader();_0x1b576d['onload']=_0x57e5cd=>{const _0x53fd08=a0_0x5921,_0x665439=_0x57e5cd[_0x53fd08(0x180)][_0x53fd08(0x24b)],_0x3ced30=extractMetadataFromArrayBuffer(_0x665439);if(!_0x3ced30||!_0x3ced30[_0x53fd08(0x1a5)]){_0x4d7c35(new Error('„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü'));return;}const _0x2efad9=_0x3ced30['project'];try{const _0x59226a=createProject(_0x2efad9[_0x53fd08(0x1f4)],_0x2efad9[_0x53fd08(0x1de)],_0x2efad9[_0x53fd08(0x16f)]||'ÁîªÂÉè');_0x59226a['frames']=_0x2efad9[_0x53fd08(0x1b9)][_0x53fd08(0x10c)](_0x598a54=>{const _0x547c19=_0x53fd08;let _0x330908={'layers':[],'activeLayer':_0x598a54[_0x547c19(0x1e6)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x2ab66f=0x0;_0x2ab66f<_0x598a54[_0x547c19(0x128)][_0x547c19(0x1d0)];_0x2ab66f++){let _0x1bb4d8=new Image();_0x1bb4d8[_0x547c19(0x154)]=_0x598a54[_0x547c19(0x128)][_0x2ab66f];let _0xe651c6=document[_0x547c19(0x1fc)](_0x547c19(0x219));_0xe651c6[_0x547c19(0x1f4)]=_0x2efad9['width']*cellSize,_0xe651c6[_0x547c19(0x1de)]=_0x2efad9[_0x547c19(0x1de)]*cellSize,_0x1bb4d8['onload']=()=>{const _0x1a3430=_0x547c19;let _0x128a54=_0xe651c6[_0x1a3430(0x1d8)]('2d');_0x128a54['clearRect'](0x0,0x0,_0xe651c6['width'],_0xe651c6[_0x1a3430(0x1de)]),_0x128a54[_0x1a3430(0x23b)](_0x1bb4d8,0x0,0x0);},_0x330908['layers']['push'](_0xe651c6);}return _0x330908;}),projects[_0x53fd08(0x169)](_0x59226a),activeProject=projects['length']-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x3f3b78(_0x59226a);}catch(_0x6bb1ab){_0x4d7c35(_0x6bb1ab);}},_0x1b576d[_0x428426(0x11f)]=_0x15a552=>_0x4d7c35(_0x15a552),_0x1b576d['readAsArrayBuffer'](_0x3b0a52);});}function a0_0x41a1(){const _0x404c03=['.gif','src','open','span','beginPath','.apng','100%','animSpeedValue','main-container','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','abs','style','getBoundingClientRect','top','body','nezumi-theme','layer-thumb','nezumi-sketch.msketch','video/webm','3000','flush','nezumi-palette','push','splice','482530IILdga','10126226eHYATB','onmouseup','palette-alphaSlider','name','disabled','„Éï„É¨„Éº„É†Èñì„ÅÆ‰ΩôÁôΩ(px)\x20„ÇíÊåáÂÆöÔºà‰æã:\x200Ôºâ','trim','#00ff00','globalCompositeOperation','animSpeedRange','„Éï„Ç°„Ç§„É´„Å´„Éó„É≠„Ç∏„Çß„ÇØ„Éà„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇË™≠„ÅøËæº„Åø„Åß„Åç„Åæ„Åõ„Çì„ÄÇ','objectStore','Ë™≠Ëæº„Ç®„É©„Éº','removeEventListener','transparent','moveTo','restore','eraser','encode','download','target','nezumi-standalone','„Çπ„Éó„É©„Ç§„Éà„Ç∑„Éº„Éà„ÅÆÊã°Â§ßÁéá„ÇíÊåáÂÆöÔºà‰æã:\x201\x20=\x20ÂÖÉ„Çµ„Ç§„Ç∫,\x202\x20=\x202ÂÄçÔºâ','search','pop','Shift','pathname','4cPZwyl','„É¨„Ç§„É§„Éº','has','active','getImageData','dataset','anonymous','boolean','IndexedDB„Åã„Çâ„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº‚Ä¶','nezumi-animation','#newProjName','#palette-penSize','then','data-theme','projectCount','createObjectURL','pointerId','new-project-dialog','135qnTBxC','„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØWebCodecs„Å´„Çà„ÇãWEBP„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ','#cccccc','circle','#ffa500','px,\x20','frameList','clientY','zoomSlider','„É©„Ç§„Éà„ÉÜ„Éº„Éû„Å´ÂàáÊõø','round','81tUTEBP','project','project-name-edit','fillStyle','lib/gif.worker.js','#ffff00','oncomplete','7eiUbpQ','frameCount','„Ç≥„Éû)','setItem','selected','constructor','matchMedia','min','#newProjOkBtn','getElementById','projects','wheel','menu-toggle-btn-close','querySelector','frames','value','palette-toolbar','touches','#ff00ff','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','alphaValue','image/png','querySelectorAll','pen','onmouseleave','„ÉÄ„Éº„ÇØ„ÉÜ„Éº„Éû„Å´ÂàáÊõø','#888888','layerRedoStacks','innerWidth','nezumi-drawing','project-item','\x20selected','.toggle-btn','grabbing','parentNode','#808000','removeChild','length','log','\x0a---NEZUMI_METADATA_START---\x0a','changedTouches','readAsText','innerHTML','rgba(','#800080','getContext','color-palette','textContent','rgba(0,0,0,0.3)','classList','transform','height','crossOrigin','#c0c0c0','image/apng','onclick','readwrite','insertBefore','„Éï„É¨„Éº„É†„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','activeLayer','clearRect','#000080','href','center','select','„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíIndexedDB„Å´‰øùÂ≠ò„Åó„Åü„ÉÅ„É•„ÉºÔºÅ','closePath','alignItems','ontouchstart','touchmove','WebCodecs','palette-color','render','width','deltaY','files','nezumi-projects','pointerdown','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','add','createElement','blur','nezumi-animation.gif','#444444','stroke','539852ENojPK','palette-penSize','error','<span\x20style=\x22font-size:13px;color:#888;\x22>ÈÄèÊòé</span>','#800000','layerHistories','menu-toggle-btn','forEach','touchAction','.section-content','button','firstChild','touchend','penSize','themeToggleBtn','layer-item','floor','„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ','#palette-penMode','/index.html','clientX','onblur','slice','parse','canvas','toggle','456360fNUlLC','beforeunload','touchstart','getAttribute','all','close','shift','„Åì„ÅÆËâ≤„Çí„Éë„É¨„ÉÉ„Éà„Åã„ÇâÂâäÈô§','keyval','pointerup','#ccc','activeFrame','touch','toDataURL','block','putImageData','setPointerCapture','color','keydown','frame-item','filter','save','type','preventDefault','pointermove','subarray','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>Â°ó„Çä„Å§„Å∂„Åó</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20Â§™„Åï:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','byteLength','title','warn','(prefers-color-scheme:\x20dark)','display','drawImage','#newProjW','overflow','onmousemove','.webm','nezumi-animation.apng','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>Ê∂à„Åó„Ç¥„É†</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','onupgradeneeded','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>„Éö„É≥</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','globalAlpha','project-btn','ontouchend','arc','contains','layerCount','jpeg','result','destination-out','join','nezumi_about_visited','100vh','stopPropagation','#000000','number','2288022cXsHcc','image/','matches','.tool-btn','get','colorPicker','onload','isArray','image/jpeg','dark','onkeydown','activeProject','33272hTzpps','data','tool','background','onmousedown','\x20active','layer-btn','transaction','getItem','oninput','webp','focus','vp8','map','Enter','DOMContentLoaded','undefined','ontouchmove','palette-add-btn','left','match','pointerType','setAttribute','className','crosshair','px)\x20scale(','jpg','pan','application/octet-stream','.section.collapsible\x20.toggle-btn','div','max','onerror','fill','flex','ontouchcancel','%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<br>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20class=\x22action-group\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22undo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>undo</span>\x20Êàª„Åô\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20onclick=\x22redo()\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>redo</span>\x20Êàª„Åô„ÇíÊàª„Åô\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','penMode','palette-del-btn','replace','layers','2204672WVqJlK','appendChild','input','#palette-alphaValue','isFinite','#ff69b4','#00000000','>‰∏∏„Éö„É≥</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20ÈÄèÊòéÂ∫¶:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','palette-alphaValue','put','stringify','grab','(((.+)+)+)+$','hypot','click','zoomValue','UPNG','‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº:','translate(','layerList','cursor','createObjectStore','touchcancel','frame-btn','square','releasePointerCapture','remove','light','key','buffer','addEventListener','fillRect','nezumi-sketch-save','none','lineTo','text','delete','_spritesheet.png','revokeObjectURL','nezumi-sketch-db','sidebar-open','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn'];a0_0x41a1=function(){return _0x404c03;};return a0_0x41a1();}function toggleSection(_0x2078bb){const _0x1d96d3=a0_0x8a3065,_0x252415=document[_0x1d96d3(0x1b4)](_0x2078bb),_0x59f86d=_0x252415[_0x1d96d3(0x1b8)](_0x1d96d3(0x20a)),_0x326f4a=_0x252415[_0x1d96d3(0x1b8)](_0x1d96d3(0x1cb));_0x59f86d[_0x1d96d3(0x15e)]['display']==='none'?(_0x59f86d[_0x1d96d3(0x15e)][_0x1d96d3(0x23a)]='',_0x326f4a[_0x1d96d3(0x1da)]='‚ñº'):(_0x59f86d[_0x1d96d3(0x15e)][_0x1d96d3(0x23a)]=_0x1d96d3(0x14a),_0x326f4a[_0x1d96d3(0x1da)]='‚ñ≤');}document[a0_0x8a3065(0x147)](a0_0x8a3065(0x10e),()=>{const _0x4bd667=a0_0x8a3065;document[_0x4bd667(0x1c1)]('.section.collapsible\x20.section-content')[_0x4bd667(0x208)](_0x44f918=>_0x44f918['style'][_0x4bd667(0x23a)]=''),document['querySelectorAll'](_0x4bd667(0x11c))[_0x4bd667(0x208)](_0x1b499e=>_0x1b499e['textContent']='‚ñº');}),window[a0_0x8a3065(0x147)]('resize',updateMenuBtnDisplay),document[a0_0x8a3065(0x147)]('DOMContentLoaded',updateMenuBtnDisplay);function toggleSideMenu(_0x59ff54){const _0x554bc4=a0_0x8a3065,_0x25efd3=document[_0x554bc4(0x1b4)]('sidebar'),_0x1cb403=document['getElementById']('main-container'),_0x142449=document[_0x554bc4(0x1b4)](_0x554bc4(0x207)),_0x5c1a93=document['getElementById']('menu-toggle-btn-close'),_0x1971e4=_0x25efd3[_0x554bc4(0x1dc)][_0x554bc4(0x248)](_0x554bc4(0x155));let _0x433a2f=typeof _0x59ff54===_0x554bc4(0x18e)?_0x59ff54:!_0x1971e4;_0x433a2f?(_0x25efd3[_0x554bc4(0x1dc)]['add'](_0x554bc4(0x155)),_0x1cb403[_0x554bc4(0x1dc)]['add'](_0x554bc4(0x151)),document[_0x554bc4(0x161)][_0x554bc4(0x15e)]['overflow']='hidden',document[_0x554bc4(0x161)]['style'][_0x554bc4(0x209)]=_0x554bc4(0x14a),window[_0x554bc4(0x1c7)]<=0x384&&(_0x5c1a93['style'][_0x554bc4(0x23a)]=_0x554bc4(0x229),_0x142449[_0x554bc4(0x15e)]['display']='none')):(_0x25efd3[_0x554bc4(0x1dc)]['remove'](_0x554bc4(0x155)),_0x1cb403['classList'][_0x554bc4(0x143)](_0x554bc4(0x151)),document[_0x554bc4(0x161)][_0x554bc4(0x15e)][_0x554bc4(0x23d)]='',document[_0x554bc4(0x161)][_0x554bc4(0x15e)][_0x554bc4(0x209)]='',window[_0x554bc4(0x1c7)]<=0x384&&(_0x5c1a93[_0x554bc4(0x15e)][_0x554bc4(0x23a)]=_0x554bc4(0x14a),_0x142449['style'][_0x554bc4(0x23a)]=_0x554bc4(0x229)));}function updateMenuBtnDisplay(){const _0x299d8e=a0_0x8a3065,_0x1e49d6=document['getElementById']('sidebar'),_0x4c4978=document[_0x299d8e(0x1b4)](_0x299d8e(0x15b)),_0x608582=document[_0x299d8e(0x1b4)](_0x299d8e(0x207)),_0x499aae=document[_0x299d8e(0x1b4)](_0x299d8e(0x1b7));window[_0x299d8e(0x1c7)]>0x384?(_0x1e49d6['classList'][_0x299d8e(0x143)](_0x299d8e(0x155)),_0x4c4978[_0x299d8e(0x1dc)][_0x299d8e(0x143)](_0x299d8e(0x151)),_0x499aae[_0x299d8e(0x15e)][_0x299d8e(0x23a)]=_0x299d8e(0x14a),_0x608582['style']['display']=_0x299d8e(0x14a),document[_0x299d8e(0x161)][_0x299d8e(0x15e)][_0x299d8e(0x23d)]='',document[_0x299d8e(0x161)][_0x299d8e(0x15e)][_0x299d8e(0x209)]=''):_0x1e49d6[_0x299d8e(0x1dc)]['contains'](_0x299d8e(0x155))?(_0x499aae[_0x299d8e(0x15e)][_0x299d8e(0x23a)]=_0x299d8e(0x229),_0x608582[_0x299d8e(0x15e)][_0x299d8e(0x23a)]=_0x299d8e(0x14a)):(_0x499aae[_0x299d8e(0x15e)][_0x299d8e(0x23a)]=_0x299d8e(0x14a),_0x608582[_0x299d8e(0x15e)][_0x299d8e(0x23a)]='block');}document[a0_0x8a3065(0x147)](a0_0x8a3065(0x137),function(_0xf513bf){const _0x23e7ed=a0_0x8a3065;if(window[_0x23e7ed(0x1c7)]>0x384)return;const _0xb3fc18=document['getElementById']('sidebar'),_0x562b12=document[_0x23e7ed(0x1b4)](_0x23e7ed(0x15b)),_0x12d483=document['getElementById']('menu-toggle-btn'),_0x453a2a=document[_0x23e7ed(0x1b4)]('menu-toggle-btn-close');!_0xb3fc18[_0x23e7ed(0x248)](_0xf513bf['target'])&&_0xf513bf['target']!==_0x12d483&&_0xf513bf[_0x23e7ed(0x180)]!==_0x453a2a&&(_0xb3fc18[_0x23e7ed(0x1dc)][_0x23e7ed(0x143)](_0x23e7ed(0x155)),_0x562b12['classList']['remove'](_0x23e7ed(0x151)),_0x453a2a['style'][_0x23e7ed(0x23a)]=_0x23e7ed(0x14a),_0x12d483[_0x23e7ed(0x15e)]['display']=_0x23e7ed(0x229),document[_0x23e7ed(0x161)]['style']['overflow']='',document['body'][_0x23e7ed(0x15e)]['touchAction']='');}),(function(){const _0x120029=a0_0x8a3065;try{(location[_0x120029(0x186)][_0x120029(0x113)](/index\.html$/)||location[_0x120029(0x186)]==='/'||location[_0x120029(0x186)]===_0x120029(0x214))&&(!localStorage['getItem'](_0x120029(0x24e))&&(localStorage[_0x120029(0x1ae)](_0x120029(0x24e),'1'),location[_0x120029(0x1e9)]='/about?terms=true'));}catch(_0x181882){}}());let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document[a0_0x8a3065(0x147)](a0_0x8a3065(0x22d),_0x10691c=>{const _0x38d786=a0_0x8a3065;if(_0x10691c[_0x38d786(0x145)]==='Shift')shiftPressed=!![];}),document[a0_0x8a3065(0x147)]('keyup',_0x132da9=>{const _0x46e7b0=a0_0x8a3065;if(_0x132da9[_0x46e7b0(0x145)]===_0x46e7b0(0x185))shiftPressed=![];}),canvas['addEventListener'](a0_0x8a3065(0x1f8),_0x3f395c=>{const _0x3ca72a=a0_0x8a3065;if(_0x3f395c[_0x3ca72a(0x114)]==='touch')return;currentTool===_0x3ca72a(0x11a)||shiftPressed?(dragging=!![],isDrawing=![],startX=_0x3f395c['clientX'],startY=_0x3f395c['clientY'],lastX=posX,lastY=posY,canvas[_0x3ca72a(0x22b)](_0x3f395c[_0x3ca72a(0x197)]),canvas[_0x3ca72a(0x15e)][_0x3ca72a(0x13d)]=_0x3ca72a(0x1cc)):(isDrawing=!![],pointerDownX=_0x3f395c[_0x3ca72a(0x215)],pointerDownY=_0x3f395c[_0x3ca72a(0x1a0)],handleMouseDown(_0x3f395c),canvas[_0x3ca72a(0x22b)](_0x3f395c[_0x3ca72a(0x197)]));}),canvas['addEventListener'](a0_0x8a3065(0x233),_0x36b4ec=>{const _0xc3114b=a0_0x8a3065;if(_0x36b4ec['pointerType']===_0xc3114b(0x227))return;if(dragging)posX=lastX+(_0x36b4ec['clientX']-startX),posY=lastY+(_0x36b4ec['clientY']-startY),updateTransform();else{if(isDrawing){if(currentTool!=='pen'){const _0x5e06cd=Math[_0xc3114b(0x15d)](_0x36b4ec[_0xc3114b(0x215)]-pointerDownX),_0x44c1c1=Math[_0xc3114b(0x15d)](_0x36b4ec[_0xc3114b(0x1a0)]-pointerDownY);if(_0x5e06cd>=PAN_CANCEL_DISTANCE||_0x44c1c1>=PAN_CANCEL_DISTANCE){isDrawing=![];try{handleMouseUp(_0x36b4ec);}catch(_0x26428a){}return;}}handleMouseMove(_0x36b4ec);}}}),canvas[a0_0x8a3065(0x147)](a0_0x8a3065(0x224),_0x4d9ec3=>{const _0x23278c=a0_0x8a3065;if(_0x4d9ec3[_0x23278c(0x114)]===_0x23278c(0x227))return;dragging=![];isDrawing&&handleMouseUp(_0x4d9ec3);isDrawing=![];try{canvas[_0x23278c(0x142)](_0x4d9ec3['pointerId']);}catch(_0x43eefa){}if(currentTool===_0x23278c(0x11a))canvas[_0x23278c(0x15e)][_0x23278c(0x13d)]=_0x23278c(0x134);else canvas['style'][_0x23278c(0x13d)]=_0x23278c(0x117);}),wrapper[a0_0x8a3065(0x147)](a0_0x8a3065(0x1b6),_0x51b61c=>{const _0x79e189=a0_0x8a3065;_0x51b61c[_0x79e189(0x232)]();const _0x1dd60a=canvas['getBoundingClientRect'](),_0x1cd0a2=_0x51b61c[_0x79e189(0x215)],_0x540158=_0x51b61c[_0x79e189(0x1a0)],_0x2dc822=(_0x1cd0a2-_0x1dd60a[_0x79e189(0x112)]-posX)/scale,_0xd7e8b1=(_0x540158-_0x1dd60a[_0x79e189(0x160)]-posY)/scale,_0x12b389=_0x51b61c[_0x79e189(0x1f5)]>0x0?0.9:1.1;let _0x4c5ecd=scale*_0x12b389;_0x4c5ecd=Math[_0x79e189(0x1b2)](Math[_0x79e189(0x11e)](_0x4c5ecd,0.2),0x5),posX=_0x1cd0a2-_0x1dd60a[_0x79e189(0x112)]-_0x2dc822*_0x4c5ecd,posY=_0x540158-_0x1dd60a[_0x79e189(0x160)]-_0xd7e8b1*_0x4c5ecd,scale=_0x4c5ecd,updateTransform();const _0x31d296=document['getElementById'](_0x79e189(0x1a1)),_0x105d60=document[_0x79e189(0x1b4)](_0x79e189(0x138));if(_0x31d296)_0x31d296['value']=Math[_0x79e189(0x1a3)](scale*0x64);if(_0x105d60)_0x105d60[_0x79e189(0x1da)]=Math['round'](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x526094=a0_0x8a3065;canvas['style'][_0x526094(0x1dd)]=_0x526094(0x13b)+posX+_0x526094(0x19e)+posY+_0x526094(0x118)+scale+')';}function setZoomValue(_0x518b1e){const _0x19615e=a0_0x8a3065,_0x125e22=Math[_0x19615e(0x11e)](0x14,Math[_0x19615e(0x1b2)](0x1f4,parseInt(_0x518b1e,0xa)||0x64)),_0x5875d0=_0x125e22/0x64;scale=_0x5875d0,updateTransform();const _0xc23521=document['getElementById'](_0x19615e(0x1a1)),_0x172292=document[_0x19615e(0x1b4)]('zoomValue');if(_0xc23521)_0xc23521[_0x19615e(0x1ba)]=_0x125e22;if(_0x172292)_0x172292['textContent']=_0x125e22+'%';}function zoomIn(){const _0x3ab7ca=a0_0x8a3065,_0x5e0258=document[_0x3ab7ca(0x1b4)](_0x3ab7ca(0x1a1));let _0x6ce509=_0x5e0258?parseInt(_0x5e0258[_0x3ab7ca(0x1ba)],0xa):Math['round'](scale*0x64);_0x6ce509=Math[_0x3ab7ca(0x1b2)](0x1f4,_0x6ce509+0xa),setZoomValue(_0x6ce509);}function zoomOut(){const _0x4bf1cb=a0_0x8a3065,_0x5ddb19=document[_0x4bf1cb(0x1b4)](_0x4bf1cb(0x1a1));let _0x2d97d5=_0x5ddb19?parseInt(_0x5ddb19[_0x4bf1cb(0x1ba)],0xa):Math[_0x4bf1cb(0x1a3)](scale*0x64);_0x2d97d5=Math[_0x4bf1cb(0x11e)](0x14,_0x2d97d5-0xa),setZoomValue(_0x2d97d5);}const zs=document[a0_0x8a3065(0x1b4)]('zoomSlider');if(zs)zs[a0_0x8a3065(0x108)]=_0x1bd9d2=>setZoomValue(_0x1bd9d2[a0_0x8a3065(0x180)][a0_0x8a3065(0x1ba)]);const zv=document['getElementById']('zoomValue');if(zv)zv[a0_0x8a3065(0x1da)]=Math[a0_0x8a3065(0x1a3)](scale*0x64)+'%';function getCanvasCoords(_0x3d5725){const _0x28916d=a0_0x8a3065,_0x50338b=canvas[_0x28916d(0x15f)](),_0x4d3da2=canvas[_0x28916d(0x1f4)]/_0x50338b['width'],_0x21bf17=canvas[_0x28916d(0x1de)]/_0x50338b[_0x28916d(0x1de)],_0x273068=(_0x3d5725[_0x28916d(0x215)]-_0x50338b[_0x28916d(0x112)])*_0x4d3da2,_0x336860=(_0x3d5725[_0x28916d(0x1a0)]-_0x50338b[_0x28916d(0x160)])*_0x21bf17;return{'x':_0x273068,'y':_0x336860};}function handleDrawStart(_0x2f25be){const _0x373864=a0_0x8a3065,_0x359bb9=getCanvasCoords(_0x2f25be);ctx['beginPath'](),ctx[_0x373864(0x17b)](_0x359bb9['x'],_0x359bb9['y']);}function handleDrawMove(_0x50d535){const _0x119b59=a0_0x8a3065,_0x2bff7b=getCanvasCoords(_0x50d535);ctx[_0x119b59(0x14b)](_0x2bff7b['x'],_0x2bff7b['y']),ctx[_0x119b59(0x200)]();}function handleDrawEnd(_0x335bf2){const _0x48e6bf=a0_0x8a3065;ctx[_0x48e6bf(0x1ed)]();}