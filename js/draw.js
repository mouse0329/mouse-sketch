const _0x561961=_0x42e9;(function(_0x217fad,_0x4d08f3){const _0x29de51=_0x42e9,_0x1839be=_0x217fad();while(!![]){try{const _0x346296=-parseInt(_0x29de51(0x15f))/0x1+-parseInt(_0x29de51(0x157))/0x2*(-parseInt(_0x29de51(0x19e))/0x3)+parseInt(_0x29de51(0x14c))/0x4*(-parseInt(_0x29de51(0x14e))/0x5)+-parseInt(_0x29de51(0x179))/0x6*(-parseInt(_0x29de51(0x160))/0x7)+parseInt(_0x29de51(0x199))/0x8*(-parseInt(_0x29de51(0x166))/0x9)+parseInt(_0x29de51(0x149))/0xa*(parseInt(_0x29de51(0x18b))/0xb)+parseInt(_0x29de51(0x169))/0xc;if(_0x346296===_0x4d08f3)break;else _0x1839be['push'](_0x1839be['shift']());}catch(_0x394598){_0x1839be['push'](_0x1839be['shift']());}}}(_0x2d55,0x627b4));const _0x3d6d44=(function(){let _0x2f4394=!![];return function(_0x325186,_0x312318){const _0x2680a2=_0x2f4394?function(){const _0x54e972=_0x42e9;if(_0x312318){const _0x421084=_0x312318[_0x54e972(0x147)](_0x325186,arguments);return _0x312318=null,_0x421084;}}:function(){};return _0x2f4394=![],_0x2680a2;};}()),_0x5d609b=_0x3d6d44(this,function(){const _0x28ab96=_0x42e9;return _0x5d609b[_0x28ab96(0x190)]()[_0x28ab96(0x146)](_0x28ab96(0x156))[_0x28ab96(0x190)]()[_0x28ab96(0x184)](_0x5d609b)[_0x28ab96(0x146)](_0x28ab96(0x156));});_0x5d609b();function setPenSize(_0xea1b95){const _0x5d0182=_0x42e9;penSize=parseInt(_0xea1b95)||0x1;let _0x36632f=document[_0x5d0182(0x150)](_0x5d0182(0x14f));if(_0x36632f)_0x36632f[_0x5d0182(0x16d)]=penSize;let _0x253a53=document[_0x5d0182(0x150)](_0x5d0182(0x15b));if(_0x253a53)_0x253a53[_0x5d0182(0x16d)]=penSize;}function setPenMode(_0x5223cf){const _0x8f79d1=_0x42e9;penMode=_0x5223cf;let _0x3a5261=document[_0x8f79d1(0x150)]('penMode');if(_0x3a5261)_0x3a5261[_0x8f79d1(0x16d)]=penMode;let _0x1727f6=document[_0x8f79d1(0x150)]('palette-penMode');if(_0x1727f6)_0x1727f6[_0x8f79d1(0x16d)]=penMode;}function isDrawableCanvas(_0x5c7e45){const _0x750430=_0x42e9;if(!_0x5c7e45)return![];const _0x442d8d=_0x5c7e45[_0x750430(0x154)],_0x214e0b=_0x5c7e45[_0x750430(0x170)];return Number[_0x750430(0x153)](_0x442d8d)&&Number[_0x750430(0x153)](_0x214e0b)&&_0x442d8d>0x0&&_0x214e0b>0x0;}function fillAt(_0x459628,_0x404ea4){const _0x48b2fe=_0x42e9;let _0x411f9a=getCurrentProject(),_0x262b97=getCurrentFrame();if(!_0x411f9a||!_0x262b97||typeof _0x262b97[_0x48b2fe(0x144)]!==_0x48b2fe(0x143)||!_0x262b97[_0x48b2fe(0x180)][_0x262b97[_0x48b2fe(0x144)]])return;const _0x45db94=_0x262b97[_0x48b2fe(0x180)][_0x262b97[_0x48b2fe(0x144)]],_0x3e801c=_0x45db94&&_0x45db94[_0x48b2fe(0x164)]?_0x45db94[_0x48b2fe(0x164)]:_0x45db94;if(!_0x3e801c||!_0x3e801c[_0x48b2fe(0x151)])return;let _0x5bcd5e=_0x3e801c[_0x48b2fe(0x151)]('2d',{'willReadFrequently':!![]}),_0x2d7bd4=_0x5bcd5e[_0x48b2fe(0x1a0)](0x0,0x0,_0x411f9a['width']*cellSize,_0x411f9a[_0x48b2fe(0x170)]*cellSize),_0x5ebf8d=_0x459628*cellSize,_0x370b03=_0x404ea4*cellSize,_0x350cbd=getPixel(_0x2d7bd4,_0x5ebf8d,_0x370b03),_0x239f57=currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x350cbd,_0x239f57))return;let _0xfbfa98=[[_0x459628,_0x404ea4]],_0x45a361=new Set();while(_0xfbfa98['length']){let [_0x2fc75e,_0x228def]=_0xfbfa98[_0x48b2fe(0x15d)]();if(_0x2fc75e<0x0||_0x228def<0x0||_0x2fc75e>=_0x411f9a['width']||_0x228def>=_0x411f9a['height'])continue;let _0x247b19=_0x2fc75e+','+_0x228def;if(_0x45a361[_0x48b2fe(0x16e)](_0x247b19))continue;_0x45a361['add'](_0x247b19);let _0x4dd8c6=_0x2fc75e*cellSize,_0x3640e4=_0x228def*cellSize,_0x408967=getPixel(_0x2d7bd4,_0x4dd8c6,_0x3640e4);if(!colorsMatch(_0x408967,_0x350cbd))continue;for(let _0x268639=0x0;_0x268639<cellSize;_0x268639++){for(let _0x39365a=0x0;_0x39365a<cellSize;_0x39365a++){setPixel(_0x2d7bd4,_0x4dd8c6+_0x39365a,_0x3640e4+_0x268639,_0x239f57);}}_0xfbfa98[_0x48b2fe(0x145)]([_0x2fc75e+0x1,_0x228def]),_0xfbfa98['push']([_0x2fc75e-0x1,_0x228def]),_0xfbfa98[_0x48b2fe(0x145)]([_0x2fc75e,_0x228def+0x1]),_0xfbfa98[_0x48b2fe(0x145)]([_0x2fc75e,_0x228def-0x1]);}_0x5bcd5e['putImageData'](_0x2d7bd4,0x0,0x0),redrawAll();}function getPixel(_0x186124,_0x324c85,_0x4720c6){const _0x5aed6d=_0x42e9;let _0x102cf0=(_0x4720c6*_0x186124[_0x5aed6d(0x154)]+_0x324c85)*0x4;return[_0x186124[_0x5aed6d(0x14d)][_0x102cf0],_0x186124[_0x5aed6d(0x14d)][_0x102cf0+0x1],_0x186124[_0x5aed6d(0x14d)][_0x102cf0+0x2],_0x186124[_0x5aed6d(0x14d)][_0x102cf0+0x3]];}function setPixel(_0x31095,_0x189d63,_0x3cc7bc,_0x116d11){const _0x2e5934=_0x42e9;let _0x11c38a=(_0x3cc7bc*_0x31095['width']+_0x189d63)*0x4;_0x31095[_0x2e5934(0x14d)][_0x11c38a]=_0x116d11[0x0],_0x31095[_0x2e5934(0x14d)][_0x11c38a+0x1]=_0x116d11[0x1],_0x31095[_0x2e5934(0x14d)][_0x11c38a+0x2]=_0x116d11[0x2],_0x31095['data'][_0x11c38a+0x3]=_0x116d11[0x3];}function drawDotXY(_0x364bda,_0x32bf21){const _0x46419e=_0x42e9;let _0x422a9c=getCurrentProject(),_0x5d712c=getCurrentFrame();if(!_0x5d712c||!_0x422a9c)return;if(typeof _0x364bda!==_0x46419e(0x143)||typeof _0x32bf21!==_0x46419e(0x143)||_0x364bda<0x0||_0x32bf21<0x0||!Number[_0x46419e(0x153)](_0x422a9c[_0x46419e(0x154)])||!Number[_0x46419e(0x153)](_0x422a9c[_0x46419e(0x170)])||_0x364bda>=_0x422a9c[_0x46419e(0x154)]||_0x32bf21>=_0x422a9c[_0x46419e(0x170)]||!Array[_0x46419e(0x171)](_0x5d712c['layers'])||typeof _0x5d712c['activeLayer']!==_0x46419e(0x143)||!_0x5d712c['layers'][_0x5d712c[_0x46419e(0x144)]])return;const _0x7fc4a0=_0x5d712c['layers'][_0x5d712c[_0x46419e(0x144)]],_0x22e49d=_0x7fc4a0&&_0x7fc4a0[_0x46419e(0x164)]?_0x7fc4a0['canvas']:_0x7fc4a0;if(!_0x22e49d||!_0x22e49d[_0x46419e(0x151)])return;let _0x464bc4=_0x22e49d[_0x46419e(0x151)]('2d');if(!_0x464bc4)return;if(currentTool===_0x46419e(0x188)||currentAlpha===0x0)drawPenShape(_0x464bc4,_0x364bda,_0x32bf21,null,!![]);else{let _0x3fd203=hexToRgba(currentColor,currentAlpha);_0x464bc4['save'](),penAlphaMode==='flat'&&currentAlpha<0x1?(drawPenShape(_0x464bc4,_0x364bda,_0x32bf21,null,!![]),drawPenShape(_0x464bc4,_0x364bda,_0x32bf21,_0x3fd203,![])):drawPenShape(_0x464bc4,_0x364bda,_0x32bf21,_0x3fd203,![]),_0x464bc4['restore']();}blitLayerArea(_0x22e49d,_0x364bda,_0x32bf21,penSize);}function parseColorToRGBA(_0x4fd512,_0x2e1910){const _0x57e0e4=_0x42e9;if(Array[_0x57e0e4(0x171)](_0x4fd512)&&_0x4fd512['length']>=0x4)return _0x4fd512['slice'](0x0,0x4);if(!_0x4fd512||typeof _0x4fd512!==_0x57e0e4(0x1a1))return _0x2e1910||[0x0,0x0,0x0,0xff];if(_0x4fd512===_0x57e0e4(0x19c)||_0x4fd512[_0x57e0e4(0x167)]()===_0x57e0e4(0x183))return[0x0,0x0,0x0,0x0];const _0x4a4a39=_0x4fd512[_0x57e0e4(0x155)](/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/i);if(_0x4a4a39){const _0x100c66=parseInt(_0x4a4a39[0x1],0xa),_0x2c81bd=parseInt(_0x4a4a39[0x2],0xa),_0x1f0e03=parseInt(_0x4a4a39[0x3],0xa),_0x2ced72=typeof _0x4a4a39[0x4]!==_0x57e0e4(0x14b)?Math['round'](parseFloat(_0x4a4a39[0x4])*0xff):0xff;return[_0x100c66,_0x2c81bd,_0x1f0e03,_0x2ced72];}try{return hexToRgba(_0x4fd512);}catch(_0x4f3288){return _0x2e1910||[0x0,0x0,0x0,0xff];}}function fillCellCircle(_0xfbb1e1,_0x272318,_0x52dfe9,_0x26cfc1,_0x44924f,_0x39c93e){const _0x39b0ac=_0x42e9,_0x337cd2=Math[_0x39b0ac(0x186)](0x1,Math[_0x39b0ac(0x197)](_0x26cfc1/cellSize)),_0x150a5d=_0x272318+_0x26cfc1/0x2,_0x314621=_0x52dfe9+_0x26cfc1/0x2,_0x1f75cf=_0x26cfc1/0x2;for(let _0x4fd782=0x0;_0x4fd782<_0x337cd2;_0x4fd782++){for(let _0x244553=0x0;_0x244553<_0x337cd2;_0x244553++){const _0x3f5340=_0x272318+_0x244553*cellSize,_0x7b618d=_0x52dfe9+_0x4fd782*cellSize,_0x3d0c59=_0x3f5340+cellSize/0x2,_0x4b207c=_0x7b618d+cellSize/0x2,_0x4a1c2b=_0x3d0c59-_0x150a5d,_0x22a403=_0x4b207c-_0x314621,_0x1b2001=Math[_0x39b0ac(0x19d)](_0x4a1c2b*_0x4a1c2b+_0x22a403*_0x22a403);if(_0x1b2001<=_0x1f75cf+0.0001){if(_0x39c93e)_0xfbb1e1[_0x39b0ac(0x192)](_0x3f5340,_0x7b618d,cellSize,cellSize);else _0x44924f&&(_0xfbb1e1[_0x39b0ac(0x142)](),_0xfbb1e1[_0x39b0ac(0x1a7)]=(_0x44924f[0x3]||0xff)/0xff,_0xfbb1e1[_0x39b0ac(0x19b)]=_0x39b0ac(0x14a)+_0x44924f[0x0]+','+_0x44924f[0x1]+','+_0x44924f[0x2]+')',_0xfbb1e1[_0x39b0ac(0x196)](_0x3f5340,_0x7b618d,cellSize,cellSize),_0xfbb1e1[_0x39b0ac(0x1a2)]());}}}}function drawPenShape(_0xc958da,_0xe94627,_0x441e9f,_0x1f886d,_0x7f1e20){const _0x3141d1=_0x42e9,_0x32cb1a=_0xe94627*cellSize,_0x1aa4c9=_0x441e9f*cellSize,_0x261c03=penSize*cellSize;if(_0x7f1e20)penMode===_0x3141d1(0x17d)?fillCellCircle(_0xc958da,_0x32cb1a,_0x1aa4c9,_0x261c03,null,!![]):_0xc958da['clearRect'](_0x32cb1a-Math[_0x3141d1(0x178)]((penSize-0x1)/0x2)*cellSize,_0x1aa4c9-Math[_0x3141d1(0x178)]((penSize-0x1)/0x2)*cellSize,_0x261c03,_0x261c03);else{if(penMode===_0x3141d1(0x17d)){const _0xca48d1=parseColorToRGBA(_0x1f886d,[0x0,0x0,0x0,0xff]);fillCellCircle(_0xc958da,_0x32cb1a,_0x1aa4c9,_0x261c03,_0xca48d1,![]);}else _0xc958da[_0x3141d1(0x142)](),Array[_0x3141d1(0x171)](_0x1f886d)&&_0x1f886d[_0x3141d1(0x175)]>=0x4?(_0xc958da[_0x3141d1(0x19b)]=_0x3141d1(0x172)+_0x1f886d[0x0]+','+_0x1f886d[0x1]+','+_0x1f886d[0x2]+_0x3141d1(0x191),_0xc958da[_0x3141d1(0x1a7)]=(_0x1f886d[0x3]||0xff)/0xff):_0xc958da['fillStyle']=_0x1f886d,_0xc958da[_0x3141d1(0x196)](_0x32cb1a-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x1aa4c9-Math[_0x3141d1(0x178)]((penSize-0x1)/0x2)*cellSize,_0x261c03,_0x261c03),_0xc958da[_0x3141d1(0x1a2)]();}}function blitLayerArea(_0x23494f,_0x493a8e,_0x1f8761,_0xb54e63,_0xb2bd00){const _0x53ee52=_0x42e9,_0x4d2183=getCurrentProject(),_0x44c6f0=getCurrentFrame();if(!_0x4d2183||!_0x44c6f0)return;if(!_0x23494f||!_0x23494f[_0x53ee52(0x151)]||!isDrawableCanvas(_0x23494f))return;const _0x4da079=_0xb54e63*cellSize,_0x2e3670=Math['floor']((_0xb54e63-0x1)/0x2)*cellSize,_0x2ef31f=_0x493a8e*cellSize-_0x2e3670,_0x38bbba=_0x1f8761*cellSize-_0x2e3670,_0xa67dc9=Math['max'](0x0,_0x2ef31f),_0x19da30=Math[_0x53ee52(0x186)](0x0,_0x38bbba),_0x682afe=Math['min'](canvas['width'],_0x2ef31f+_0x4da079),_0x218953=Math['min'](canvas[_0x53ee52(0x170)],_0x38bbba+_0x4da079),_0x185135=_0x682afe-_0xa67dc9,_0x2c04e8=_0x218953-_0x19da30;if(_0x185135<=0x0||_0x2c04e8<=0x0)return;try{ctx[_0x53ee52(0x142)](),ctx[_0x53ee52(0x189)](),ctx[_0x53ee52(0x18d)](_0xa67dc9,_0x19da30,_0x185135,_0x2c04e8),ctx[_0x53ee52(0x159)](),ctx[_0x53ee52(0x192)](_0xa67dc9,_0x19da30,_0x185135,_0x2c04e8);for(let _0x3e34c2=0x0;_0x3e34c2<_0x44c6f0[_0x53ee52(0x180)][_0x53ee52(0x175)];_0x3e34c2++){const _0x572b63=_0x44c6f0[_0x53ee52(0x180)][_0x3e34c2];if(!_0x572b63)continue;const _0x244b15=typeof _0x572b63[_0x53ee52(0x168)]!==_0x53ee52(0x14b)?_0x572b63[_0x53ee52(0x168)]:!![];if(!_0x244b15)continue;const _0x40f5dc=_0x572b63[_0x53ee52(0x164)]?_0x572b63['canvas']:_0x572b63;if(!isDrawableCanvas(_0x40f5dc))continue;ctx[_0x53ee52(0x142)](),dimFrontLayers&&typeof _0x44c6f0['activeLayer']===_0x53ee52(0x143)&&_0x3e34c2>_0x44c6f0[_0x53ee52(0x144)]?ctx['globalAlpha']=FRONT_LAYER_DIM_ALPHA:ctx[_0x53ee52(0x1a7)]=0x1,ctx['drawImage'](_0x40f5dc,_0xa67dc9,_0x19da30,_0x185135,_0x2c04e8,_0xa67dc9,_0x19da30,_0x185135,_0x2c04e8),ctx[_0x53ee52(0x1a2)]();}ctx[_0x53ee52(0x1a2)]();}catch(_0x68d50a){redrawAll();return;}const _0x3f2889=document[_0x53ee52(0x150)](_0x53ee52(0x1a3));if(_0x3f2889){const _0x2757b5=performance[_0x53ee52(0x148)]();if(!lastColorScanAt||_0x2757b5-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x11ffe2=scanImageColors();renderScanPanel(_0x11ffe2),_0x3f2889[_0x53ee52(0x1a6)][_0x53ee52(0x174)]='',lastColorScanAt=_0x2757b5;}}drawGridArea(_0xa67dc9,_0x19da30,_0x185135,_0x2c04e8);}function drawGridArea(_0x3fbb2b,_0x292c0b,_0x8f14,_0x5a0bb0){const _0x26aad3=_0x42e9;if(!showGrid||!_0x8f14||!_0x5a0bb0)return;ctx[_0x26aad3(0x142)](),ctx[_0x26aad3(0x161)]=_0x26aad3(0x17a),ctx['lineWidth']=0x1,ctx[_0x26aad3(0x185)]=_0x26aad3(0x15e);const _0x97d041=0x1,_0x4cf996=Math['max'](0x0,Math[_0x26aad3(0x178)]((_0x3fbb2b-_0x97d041)/cellSize)*cellSize),_0x3e8eac=Math['min'](canvas[_0x26aad3(0x154)],Math[_0x26aad3(0x18c)]((_0x3fbb2b+_0x8f14+_0x97d041)/cellSize)*cellSize),_0x489bd7=Math[_0x26aad3(0x186)](0x0,Math[_0x26aad3(0x178)]((_0x292c0b-_0x97d041)/cellSize)*cellSize),_0x497e05=Math[_0x26aad3(0x181)](canvas[_0x26aad3(0x170)],Math['ceil']((_0x292c0b+_0x5a0bb0+_0x97d041)/cellSize)*cellSize);for(let _0x3a7c72=_0x4cf996;_0x3a7c72<=_0x3e8eac;_0x3a7c72+=cellSize){const _0x15fc13=_0x3a7c72+0.5;ctx[_0x26aad3(0x189)](),ctx['moveTo'](_0x15fc13,_0x489bd7),ctx[_0x26aad3(0x19f)](_0x15fc13,_0x497e05),ctx[_0x26aad3(0x173)]();}for(let _0x493405=_0x489bd7;_0x493405<=_0x497e05;_0x493405+=cellSize){const _0x5e9d42=_0x493405+0.5;ctx[_0x26aad3(0x189)](),ctx[_0x26aad3(0x18e)](_0x4cf996,_0x5e9d42),ctx[_0x26aad3(0x19f)](_0x3e8eac,_0x5e9d42),ctx[_0x26aad3(0x173)]();}ctx[_0x26aad3(0x1a2)]();}function _0x2d55(){const _0x1838e5=['match','(((.+)+)+)+$','791368FoyVNX','toISOString','clip','globalCompositeOperation','palette-penSize','random','pop','butt','292288vdgcZq','1939jkjDAq','strokeStyle','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','generateVersionFromNow','canvas','getMonth','75618irZael','toLowerCase','visible','423792BtJBtG','version','timestamp','replace','value','has','destination-out','height','isArray','rgba(','stroke','display','length','ensureMetadata','randomUUID','floor','14934LnAGWT','#ccc','warn','getDate','circle','function','padStart','layers','min','getHours','transparent','constructor','lineCap','max','auto','eraser','beginPath','redrawAll:\x20failed\x20drawing\x20layer','22MSJpxC','ceil','rect','moveTo','getMinutes','toString',',1)','clearRect','stringify','type','assign','fillRect','round','100%','592eBktrF','encode','fillStyle','#00000000','sqrt','6hcsWLW','lineTo','getImageData','string','restore','scanColorsPanel','drawImage','flat','style','globalAlpha','uuidv4','source-over','save','number','activeLayer','push','search','apply','now','943890jiWLex','rgb(','undefined','788xMqQjG','data','9835GMvkAU','penSize','getElementById','getContext','getFullYear','isFinite','width'];_0x2d55=function(){return _0x1838e5;};return _0x2d55();}function drawDotTouch(_0x10e630,_0x3bf8ba){const _0x1266bd=_0x42e9;let _0x13de4a=getCurrentProject(),_0x33d375=getCurrentFrame();if(!_0x13de4a||!_0x33d375)return;if(_0x10e630<0x0||_0x3bf8ba<0x0||_0x10e630>=_0x13de4a[_0x1266bd(0x154)]||_0x3bf8ba>=_0x13de4a['height'])return;const _0x4b5080=_0x33d375[_0x1266bd(0x180)][_0x33d375['activeLayer']],_0x579e77=_0x4b5080&&_0x4b5080['canvas']?_0x4b5080[_0x1266bd(0x164)]:_0x4b5080;if(!_0x579e77||!_0x579e77[_0x1266bd(0x151)])return;let _0x56e09a=_0x579e77[_0x1266bd(0x151)]('2d');if(currentTool===_0x1266bd(0x188)||currentAlpha===0x0)drawPenShape(_0x56e09a,_0x10e630,_0x3bf8ba,null,!![]);else{let _0x58d612=hexToRgba(currentColor,currentAlpha);_0x56e09a[_0x1266bd(0x142)](),penAlphaMode===_0x1266bd(0x1a5)&&currentAlpha<0x1?(_0x56e09a[_0x1266bd(0x1a7)]=0x1,_0x56e09a[_0x1266bd(0x15a)]=_0x1266bd(0x16f),drawPenShape(_0x56e09a,_0x10e630,_0x3bf8ba,null,!![]),_0x56e09a[_0x1266bd(0x15a)]=_0x1266bd(0x1a9),drawPenShape(_0x56e09a,_0x10e630,_0x3bf8ba,_0x58d612,![])):drawPenShape(_0x56e09a,_0x10e630,_0x3bf8ba,_0x58d612,![]),_0x56e09a[_0x1266bd(0x1a2)]();}blitLayerArea(_0x579e77,_0x10e630,_0x3bf8ba,penSize);}function drawGrid(_0x3cfbe9,_0xc156d2){const _0x3c961c=_0x42e9;if(!showGrid)return;ctx[_0x3c961c(0x142)](),ctx[_0x3c961c(0x161)]=_0x3c961c(0x17a),ctx['lineWidth']=0x1,ctx['lineCap']=_0x3c961c(0x15e);for(let _0x3f2f31=0x0;_0x3f2f31<=_0x3cfbe9;_0x3f2f31++){const _0x189a0c=_0x3f2f31*cellSize+0.5;ctx[_0x3c961c(0x189)](),ctx[_0x3c961c(0x18e)](_0x189a0c,0x0),ctx[_0x3c961c(0x19f)](_0x189a0c,_0xc156d2*cellSize),ctx[_0x3c961c(0x173)]();}for(let _0x4cbc93=0x0;_0x4cbc93<=_0xc156d2;_0x4cbc93++){const _0x385bd7=_0x4cbc93*cellSize+0.5;ctx[_0x3c961c(0x189)](),ctx[_0x3c961c(0x18e)](0x0,_0x385bd7),ctx[_0x3c961c(0x19f)](_0x3cfbe9*cellSize,_0x385bd7),ctx[_0x3c961c(0x173)]();}ctx[_0x3c961c(0x1a2)]();}function redrawAll(){const _0x28a951=_0x42e9;let _0x59bdcd=getCurrentProject(),_0x3aa82c=getCurrentFrame();canvas[_0x28a951(0x154)]=_0x59bdcd['width']*cellSize,canvas['height']=_0x59bdcd['height']*cellSize,ctx[_0x28a951(0x192)](0x0,0x0,canvas[_0x28a951(0x154)],canvas[_0x28a951(0x170)]);for(let _0x2ef6e2=0x0;_0x2ef6e2<(Array['isArray'](_0x3aa82c[_0x28a951(0x180)])?_0x3aa82c[_0x28a951(0x180)][_0x28a951(0x175)]:0x0);_0x2ef6e2++){const _0x18c13f=_0x3aa82c[_0x28a951(0x180)][_0x2ef6e2];if(!_0x18c13f)continue;const _0x56de18=typeof _0x18c13f[_0x28a951(0x168)]!==_0x28a951(0x14b)?_0x18c13f['visible']:!![];if(!_0x56de18)continue;const _0x39cfe6=_0x18c13f[_0x28a951(0x164)]?_0x18c13f[_0x28a951(0x164)]:_0x18c13f;if(!_0x39cfe6)continue;try{ctx['save']();dimFrontLayers&&typeof _0x3aa82c[_0x28a951(0x144)]===_0x28a951(0x143)&&_0x2ef6e2>_0x3aa82c[_0x28a951(0x144)]?ctx[_0x28a951(0x1a7)]=FRONT_LAYER_DIM_ALPHA:ctx[_0x28a951(0x1a7)]=0x1;if(typeof HTMLCanvasElement!==_0x28a951(0x14b)&&_0x39cfe6 instanceof HTMLCanvasElement){if(isDrawableCanvas(_0x39cfe6))ctx[_0x28a951(0x1a4)](_0x39cfe6,0x0,0x0);}else{if(typeof HTMLImageElement!==_0x28a951(0x14b)&&_0x39cfe6 instanceof HTMLImageElement){if(_0x39cfe6['complete'])ctx[_0x28a951(0x1a4)](_0x39cfe6,0x0,0x0);}else{if(typeof OffscreenCanvas!==_0x28a951(0x14b)&&_0x39cfe6 instanceof OffscreenCanvas){if(isDrawableCanvas(_0x39cfe6))ctx[_0x28a951(0x1a4)](_0x39cfe6,0x0,0x0);}else try{if(isDrawableCanvas(_0x39cfe6))ctx[_0x28a951(0x1a4)](_0x39cfe6,0x0,0x0);}catch(_0x476bc5){}}}ctx['restore']();}catch(_0x2ed567){console[_0x28a951(0x17b)](_0x28a951(0x18a),_0x2ed567);}}drawGrid(_0x59bdcd[_0x28a951(0x154)],_0x59bdcd[_0x28a951(0x170)]);wrapper&&(wrapper['style'][_0x28a951(0x154)]=_0x28a951(0x198),wrapper['style'][_0x28a951(0x170)]=_0x28a951(0x187));const _0x4797d2=document[_0x28a951(0x150)](_0x28a951(0x1a3));if(_0x4797d2){const _0x3b42d8=performance[_0x28a951(0x148)]();if(!lastColorScanAt||_0x3b42d8-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x54d527=scanImageColors();renderScanPanel(_0x54d527),_0x4797d2[_0x28a951(0x1a6)]['display']='',lastColorScanAt=_0x3b42d8;}}}function uuidv4(){const _0x229a06=_0x42e9;if(typeof crypto!==_0x229a06(0x14b)&&typeof crypto[_0x229a06(0x177)]===_0x229a06(0x17e))try{return crypto['randomUUID']();}catch(_0x45193b){}return _0x229a06(0x162)[_0x229a06(0x16c)](/[xy]/g,_0x27a978=>{const _0x38f1f9=_0x229a06,_0x284b5b=Math[_0x38f1f9(0x15c)]()*0x10|0x0,_0x5e83b9=_0x27a978==='x'?_0x284b5b:_0x284b5b&0x3|0x8;return _0x5e83b9[_0x38f1f9(0x190)](0x10);});}function generateVersionFromNow(){const _0x1e5d1c=_0x42e9,_0x4ff79f=new Date(),_0x418993=_0x4ff79f[_0x1e5d1c(0x152)](),_0xf1aa2f=String(_0x4ff79f[_0x1e5d1c(0x165)]()+0x1)[_0x1e5d1c(0x17f)](0x2,'0'),_0x2b42ef=String(_0x4ff79f[_0x1e5d1c(0x17c)]())[_0x1e5d1c(0x17f)](0x2,'0'),_0x17bf41=String(_0x4ff79f[_0x1e5d1c(0x182)]())[_0x1e5d1c(0x17f)](0x2,'0'),_0x4e072f=String(_0x4ff79f[_0x1e5d1c(0x18f)]())['padStart'](0x2,'0'),_0x43b1ca=String(_0x4ff79f['getSeconds']())[_0x1e5d1c(0x17f)](0x2,'0');return _0x418993+'.'+_0xf1aa2f+'.'+_0x2b42ef+'.'+_0x17bf41+_0x4e072f+_0x43b1ca;}function _0x42e9(_0x2a1b8a,_0x2329e8){_0x2a1b8a=_0x2a1b8a-0x142;const _0x2e03c0=_0x2d55();let _0x5d609b=_0x2e03c0[_0x2a1b8a];return _0x5d609b;}function ensureMetadata(_0x2ae1df){const _0x745297=_0x42e9,_0x329d1d=Object[_0x745297(0x195)]({},_0x2ae1df||{});if(!_0x329d1d['id'])_0x329d1d['id']=uuidv4();if(!_0x329d1d[_0x745297(0x16a)])_0x329d1d[_0x745297(0x16a)]=generateVersionFromNow();if(!_0x329d1d['timestamp'])_0x329d1d[_0x745297(0x16b)]=new Date()[_0x745297(0x158)]();return _0x329d1d;}function appendMetadataToBlob(_0x447981,_0x349c73){const _0x5b5e61=_0x42e9,_0x487d2c=ensureMetadata(_0x349c73),_0x132ae3=new TextEncoder(),_0x1a0f6e=_0x132ae3[_0x5b5e61(0x19a)](NEZUMI_METADATA_SIG),_0x3a494f=_0x132ae3[_0x5b5e61(0x19a)](JSON[_0x5b5e61(0x193)](_0x487d2c));return new Blob([_0x447981,_0x1a0f6e,_0x3a494f],{'type':_0x447981[_0x5b5e61(0x194)]||'application/octet-stream'});}typeof window!=='undefined'&&(window[_0x561961(0x163)]=generateVersionFromNow,window[_0x561961(0x1a8)]=uuidv4,window[_0x561961(0x176)]=ensureMetadata);