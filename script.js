const a0_0x32e0c3=a0_0x331c;(function(_0x3ff1c6,_0x2a39fd){const _0x194c1e=a0_0x331c,_0x5249e6=_0x3ff1c6();while(!![]){try{const _0x3174a=-parseInt(_0x194c1e(0x290))/0x1+-parseInt(_0x194c1e(0x2c0))/0x2*(-parseInt(_0x194c1e(0x2d9))/0x3)+parseInt(_0x194c1e(0x2f9))/0x4+-parseInt(_0x194c1e(0x261))/0x5*(-parseInt(_0x194c1e(0x1f4))/0x6)+-parseInt(_0x194c1e(0x346))/0x7*(-parseInt(_0x194c1e(0x1ea))/0x8)+-parseInt(_0x194c1e(0x2ce))/0x9+-parseInt(_0x194c1e(0x331))/0xa;if(_0x3174a===_0x2a39fd)break;else _0x5249e6['push'](_0x5249e6['shift']());}catch(_0x295e61){_0x5249e6['push'](_0x5249e6['shift']());}}}(a0_0x610f,0x68499));const a0_0x1b8a4c=(function(){let _0x41bb83=!![];return function(_0xc3a5b1,_0x3e41f9){const _0x5e76ea=_0x41bb83?function(){if(_0x3e41f9){const _0x4b01e1=_0x3e41f9['apply'](_0xc3a5b1,arguments);return _0x3e41f9=null,_0x4b01e1;}}:function(){};return _0x41bb83=![],_0x5e76ea;};}()),a0_0x1e5951=a0_0x1b8a4c(this,function(){const _0x20020a=a0_0x331c;return a0_0x1e5951[_0x20020a(0x2a0)]()[_0x20020a(0x264)](_0x20020a(0x2c7))[_0x20020a(0x2a0)]()['constructor'](a0_0x1e5951)[_0x20020a(0x264)](_0x20020a(0x2c7));});a0_0x1e5951();let canvas=document[a0_0x32e0c3(0x332)](a0_0x32e0c3(0x217)),ctx=canvas[a0_0x32e0c3(0x375)]('2d');const wrapper=document[a0_0x32e0c3(0x332)](a0_0x32e0c3(0x2ff));let cellSize=0x14,currentColor=a0_0x32e0c3(0x2dc),currentTool=a0_0x32e0c3(0x343),penSize=0x1,penMode=a0_0x32e0c3(0x367),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![],colorPickMode=![];function createProject(_0x38e779=0x10,_0x3f4d23=0x10,_0x29b474=''){const _0x423e02=a0_0x32e0c3;let _0x52ee59=0x14,_0x5b4f24=[],_0x2065b7=[],_0x441dad=[],_0x353d6c=document[_0x423e02(0x345)]('canvas');_0x353d6c[_0x423e02(0x268)]=_0x38e779*_0x52ee59,_0x353d6c[_0x423e02(0x2e8)]=_0x3f4d23*_0x52ee59,_0x5b4f24[_0x423e02(0x1ff)](_0x353d6c),_0x2065b7[_0x423e02(0x1ff)]([]),_0x441dad[_0x423e02(0x1ff)]([]);let _0x4e0823={'layers':_0x5b4f24,'activeLayer':0x0,'layerHistories':_0x2065b7,'layerRedoStacks':_0x441dad};return{'frames':[_0x4e0823],'activeFrame':0x0,'width':_0x38e779,'height':_0x3f4d23,'name':_0x29b474||'ÁîªÂÉè'+(projects['length']+0x1)};}function updateProjectUI(){const _0x10e152=a0_0x32e0c3,_0xb9ff17=document[_0x10e152(0x332)]('projectList');_0xb9ff17[_0x10e152(0x309)]='';for(let _0x9db250=0x0;_0x9db250<projects[_0x10e152(0x1ed)];_0x9db250++){const _0x5743e5=document[_0x10e152(0x345)](_0x10e152(0x2a7));_0x5743e5[_0x10e152(0x2fd)]=_0x10e152(0x34e)+(_0x9db250===activeProject?'\x20active':''),_0x5743e5[_0x10e152(0x373)]=()=>{activeProject=_0x9db250,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x530dff=document[_0x10e152(0x345)](_0x10e152(0x2e1));_0x530dff[_0x10e152(0x2fd)]=_0x10e152(0x2e2),_0x530dff['textContent']=projects[_0x9db250][_0x10e152(0x30a)]||'ÁîªÂÉè'+(_0x9db250+0x1),_0x530dff['title']='„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ',_0x530dff['onclick']=_0x54876d=>{const _0x1fa651=_0x10e152;_0x54876d[_0x1fa651(0x238)](),editProjectName(_0x9db250,_0x530dff);},_0x5743e5['appendChild'](_0x530dff);const _0xcfde71=document[_0x10e152(0x345)](_0x10e152(0x1f8));_0xcfde71[_0x10e152(0x341)]='ÂâäÈô§',_0xcfde71['className']='project-btn',_0xcfde71['disabled']=projects[_0x10e152(0x1ed)]===0x1,_0xcfde71['onclick']=_0x385339=>{const _0x2bc5ad=_0x10e152;_0x385339[_0x2bc5ad(0x238)](),removeProjectAt(_0x9db250);},_0x5743e5[_0x10e152(0x377)](_0xcfde71),_0xb9ff17[_0x10e152(0x377)](_0x5743e5);}document[_0x10e152(0x332)]('projectCount')[_0x10e152(0x341)]='('+projects[_0x10e152(0x1ed)]+'Êûö)';}function editProjectName(_0xed7a25,_0x40798e){const _0x23f78a=a0_0x32e0c3,_0x459d06=document['createElement'](_0x23f78a(0x2d0));_0x459d06['type']='text',_0x459d06[_0x23f78a(0x2dd)]=projects[_0xed7a25][_0x23f78a(0x30a)]||'ÁîªÂÉè'+(_0xed7a25+0x1),_0x459d06[_0x23f78a(0x2fd)]=_0x23f78a(0x246),_0x459d06['style'][_0x23f78a(0x268)]=_0x23f78a(0x222),_0x459d06[_0x23f78a(0x279)]=()=>{const _0x522c66=_0x23f78a;projects[_0xed7a25][_0x522c66(0x30a)]=_0x459d06[_0x522c66(0x2dd)][_0x522c66(0x1fa)]()||'ÁîªÂÉè'+(_0xed7a25+0x1),updateProjectUI();},_0x459d06[_0x23f78a(0x240)]=_0x389846=>{const _0x3c8495=_0x23f78a;if(_0x389846[_0x3c8495(0x380)]==='Enter')_0x459d06[_0x3c8495(0x2d7)]();},_0x40798e['replaceWith'](_0x459d06),_0x459d06[_0x23f78a(0x208)](),_0x459d06[_0x23f78a(0x284)]();}function showNewProjectDialog(_0x35a95e){const _0x42e9d3=a0_0x32e0c3;let _0x4a0637=document[_0x42e9d3(0x332)](_0x42e9d3(0x1f6));if(_0x4a0637)_0x4a0637[_0x42e9d3(0x244)]();const _0x32de91=document[_0x42e9d3(0x345)]('div');_0x32de91['id']=_0x42e9d3(0x1f6),_0x32de91[_0x42e9d3(0x25a)]['position']=_0x42e9d3(0x2cb),_0x32de91[_0x42e9d3(0x25a)][_0x42e9d3(0x230)]='0',_0x32de91[_0x42e9d3(0x25a)][_0x42e9d3(0x31c)]='0',_0x32de91['style'][_0x42e9d3(0x268)]=_0x42e9d3(0x211),_0x32de91[_0x42e9d3(0x25a)]['height']=_0x42e9d3(0x1e0),_0x32de91[_0x42e9d3(0x25a)][_0x42e9d3(0x31e)]=_0x42e9d3(0x379),_0x32de91[_0x42e9d3(0x25a)][_0x42e9d3(0x2c4)]=_0x42e9d3(0x26b),_0x32de91[_0x42e9d3(0x25a)]['alignItems']='center',_0x32de91[_0x42e9d3(0x25a)][_0x42e9d3(0x310)]=_0x42e9d3(0x36f),_0x32de91['style'][_0x42e9d3(0x242)]='3000',_0x32de91[_0x42e9d3(0x309)]=_0x42e9d3(0x294)+(projects[_0x42e9d3(0x1ed)]+0x1)+_0x42e9d3(0x376),document[_0x42e9d3(0x27e)][_0x42e9d3(0x377)](_0x32de91),_0x32de91[_0x42e9d3(0x330)]('#newProjOkBtn')[_0x42e9d3(0x373)]=()=>{const _0x53d103=_0x42e9d3,_0x2c7656=parseInt(_0x32de91['querySelector'](_0x53d103(0x372))[_0x53d103(0x2dd)],0xa),_0x5f0828=parseInt(_0x32de91[_0x53d103(0x330)](_0x53d103(0x2ea))[_0x53d103(0x2dd)],0xa),_0x25f519=_0x32de91['querySelector']('#newProjName')[_0x53d103(0x2dd)][_0x53d103(0x1fa)]();_0x32de91[_0x53d103(0x244)]();if(_0x35a95e)_0x35a95e(_0x2c7656,_0x5f0828,_0x25f519);},_0x32de91[_0x42e9d3(0x330)](_0x42e9d3(0x350))[_0x42e9d3(0x373)]=()=>{const _0x2e53a3=_0x42e9d3;_0x32de91[_0x2e53a3(0x244)]();};}function addProject(){showNewProjectDialog((_0x1db41b,_0x5a90ff,_0x2bf6de)=>{const _0x11d255=a0_0x331c;if(!Number[_0x11d255(0x1fc)](_0x1db41b)||_0x1db41b<0x1)_0x1db41b=0x10;if(!Number['isFinite'](_0x5a90ff)||_0x5a90ff<0x1)_0x5a90ff=0x10;projects[_0x11d255(0x1ff)](createProject(_0x1db41b,_0x5a90ff,_0x2bf6de)),activeProject=projects[_0x11d255(0x1ed)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x2e9b75){const _0x593743=a0_0x32e0c3;if(projects[_0x593743(0x1ed)]<=0x1)return;projects[_0x593743(0x2bd)](_0x2e9b75,0x1);if(activeProject>=projects[_0x593743(0x1ed)])activeProject=projects[_0x593743(0x1ed)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x2c4fe1=a0_0x32e0c3,_0x5c39e0=document[_0x2c4fe1(0x332)](_0x2c4fe1(0x2c8)),_0x26b7c3=getCurrentProject();_0x5c39e0[_0x2c4fe1(0x309)]='';for(let _0x5313ba=0x0;_0x5313ba<_0x26b7c3[_0x2c4fe1(0x358)]['length'];_0x5313ba++){const _0x21ca53=document[_0x2c4fe1(0x345)]('div');_0x21ca53[_0x2c4fe1(0x2fd)]=_0x2c4fe1(0x28a)+(_0x5313ba===_0x26b7c3['activeFrame']?'\x20active':''),_0x21ca53[_0x2c4fe1(0x373)]=()=>{const _0x5b7471=_0x2c4fe1;_0x26b7c3[_0x5b7471(0x2ba)]=_0x5313ba,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x39c80d=document[_0x2c4fe1(0x345)]('canvas');_0x39c80d['className']=_0x2c4fe1(0x2ae),_0x39c80d['width']=0x20,_0x39c80d['height']=0x20;let _0x5cea0c=_0x39c80d[_0x2c4fe1(0x375)]('2d');_0x5cea0c['clearRect'](0x0,0x0,0x20,0x20);for(let _0x112b2a=0x0;_0x112b2a<_0x26b7c3[_0x2c4fe1(0x358)][_0x5313ba][_0x2c4fe1(0x292)][_0x2c4fe1(0x1ed)];_0x112b2a++){_0x5cea0c[_0x2c4fe1(0x2cf)](_0x26b7c3[_0x2c4fe1(0x358)][_0x5313ba][_0x2c4fe1(0x292)][_0x112b2a],0x0,0x0,_0x39c80d['width'],_0x39c80d['height']);}_0x21ca53[_0x2c4fe1(0x377)](_0x39c80d);const _0x17642b=document[_0x2c4fe1(0x345)](_0x2c4fe1(0x2e1));_0x17642b['textContent']='F'+(_0x5313ba+0x1),_0x21ca53['appendChild'](_0x17642b);const _0x5b0ab7=document['createElement'](_0x2c4fe1(0x1f8));_0x5b0ab7['textContent']='ÂâäÈô§',_0x5b0ab7[_0x2c4fe1(0x2fd)]=_0x2c4fe1(0x1e6),_0x5b0ab7[_0x2c4fe1(0x2b0)]=_0x26b7c3['frames'][_0x2c4fe1(0x1ed)]===0x1,_0x5b0ab7[_0x2c4fe1(0x373)]=_0x50e5e1=>{const _0x392bcc=_0x2c4fe1;_0x50e5e1[_0x392bcc(0x238)](),removeFrameAt(_0x5313ba);},_0x21ca53[_0x2c4fe1(0x377)](_0x5b0ab7),_0x5c39e0[_0x2c4fe1(0x377)](_0x21ca53);}document[_0x2c4fe1(0x332)](_0x2c4fe1(0x210))[_0x2c4fe1(0x341)]='('+_0x26b7c3[_0x2c4fe1(0x358)][_0x2c4fe1(0x1ed)]+_0x2c4fe1(0x221);}function addFrame(){const _0x151959=a0_0x32e0c3;let _0x33fc5b=getCurrentProject(),_0x1f9529=_0x33fc5b['frames'][_0x33fc5b[_0x151959(0x2ba)]],_0x5c042c=_0x1f9529['layers']['map'](_0x262e8f=>{const _0x3f64ff=_0x151959;let _0x2c78f8=document['createElement']('canvas');return _0x2c78f8[_0x3f64ff(0x268)]=_0x262e8f[_0x3f64ff(0x268)],_0x2c78f8['height']=_0x262e8f[_0x3f64ff(0x2e8)],_0x2c78f8[_0x3f64ff(0x375)]('2d')[_0x3f64ff(0x2cf)](_0x262e8f,0x0,0x0),_0x2c78f8;}),_0x5195a6=_0x5c042c[_0x151959(0x2b7)](()=>[]),_0x6c623f=_0x5c042c[_0x151959(0x2b7)](()=>[]),_0x53816b={'layers':_0x5c042c,'activeLayer':0x0,'layerHistories':_0x5195a6,'layerRedoStacks':_0x6c623f};_0x33fc5b[_0x151959(0x358)][_0x151959(0x2bd)](_0x33fc5b['activeFrame']+0x1,0x0,_0x53816b),_0x33fc5b[_0x151959(0x2ba)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x4b85ac){const _0x1c190b=a0_0x32e0c3;let _0x581d24=getCurrentProject();if(_0x581d24[_0x1c190b(0x358)]['length']<=0x1)return;_0x581d24['frames'][_0x1c190b(0x2bd)](_0x4b85ac,0x1);if(_0x581d24[_0x1c190b(0x2ba)]>=_0x581d24[_0x1c190b(0x358)][_0x1c190b(0x1ed)])_0x581d24['activeFrame']=_0x581d24['frames'][_0x1c190b(0x1ed)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x473ba7=a0_0x32e0c3,_0x400fa4=getCurrentProject();if(!_0x400fa4||!_0x400fa4[_0x473ba7(0x358)]||typeof _0x400fa4[_0x473ba7(0x2ba)]!==_0x473ba7(0x24b)||!_0x400fa4[_0x473ba7(0x358)][_0x400fa4[_0x473ba7(0x2ba)]])return null;return _0x400fa4[_0x473ba7(0x358)][_0x400fa4['activeFrame']];}function updateLayerUI(){const _0x331108=a0_0x32e0c3;let {layers:_0x2b6210,activeLayer:_0x4c43d9}=getCurrentFrame();document[_0x331108(0x332)](_0x331108(0x316))[_0x331108(0x341)]='('+_0x2b6210['length']+'Êûö)';const _0xd0934c=document['getElementById'](_0x331108(0x25f));_0xd0934c[_0x331108(0x309)]='';for(let _0x5b1eee=_0x2b6210['length']-0x1;_0x5b1eee>=0x0;_0x5b1eee--){const _0x10cee8=document[_0x331108(0x345)](_0x331108(0x2a7));_0x10cee8['className']=_0x331108(0x27f)+(_0x5b1eee===_0x4c43d9?'\x20active':''),_0x10cee8['onclick']=_0x4c3f7a=>{const _0x1cada9=_0x331108;if(_0x4c3f7a[_0x1cada9(0x314)]['classList'][_0x1cada9(0x362)]('layer-btn'))return;getCurrentFrame()['activeLayer']=_0x5b1eee,updateLayerUI(),redrawAll();};const _0x3d2bce=document[_0x331108(0x345)](_0x331108(0x217));_0x3d2bce[_0x331108(0x2fd)]=_0x331108(0x317),_0x3d2bce['width']=0x20,_0x3d2bce[_0x331108(0x2e8)]=0x20;let _0x268f8a=_0x3d2bce['getContext']('2d');_0x268f8a[_0x331108(0x2e7)](0x0,0x0,0x20,0x20),_0x268f8a[_0x331108(0x2cf)](_0x2b6210[_0x5b1eee],0x0,0x0,_0x3d2bce[_0x331108(0x268)],_0x3d2bce['height']),_0x10cee8['appendChild'](_0x3d2bce);const _0x1cb806=document[_0x331108(0x345)](_0x331108(0x2e1));_0x1cb806[_0x331108(0x341)]=_0x331108(0x32f)+(_0x5b1eee+0x1),_0x10cee8['appendChild'](_0x1cb806);const _0x2661a6=document['createElement'](_0x331108(0x1f8));_0x2661a6['textContent']='‚Üë',_0x2661a6[_0x331108(0x2fd)]=_0x331108(0x207),_0x2661a6[_0x331108(0x37b)]='‰∏ä„Å´ÁßªÂãï',_0x2661a6['disabled']=_0x5b1eee===_0x2b6210[_0x331108(0x1ed)]-0x1,_0x2661a6['onclick']=_0xd64e76=>{const _0x50fbb6=_0x331108;_0xd64e76[_0x50fbb6(0x238)](),_0x5b1eee<_0x2b6210['length']-0x1&&swapLayer(_0x5b1eee,_0x5b1eee+0x1);},_0x10cee8[_0x331108(0x377)](_0x2661a6);const _0x595cbe=document['createElement'](_0x331108(0x1f8));_0x595cbe[_0x331108(0x341)]='‚Üì',_0x595cbe[_0x331108(0x2fd)]=_0x331108(0x207),_0x595cbe['title']=_0x331108(0x28c),_0x595cbe[_0x331108(0x2b0)]=_0x5b1eee===0x0,_0x595cbe[_0x331108(0x373)]=_0x13691d=>{_0x13691d['stopPropagation'](),_0x5b1eee>0x0&&swapLayer(_0x5b1eee,_0x5b1eee-0x1);},_0x10cee8[_0x331108(0x377)](_0x595cbe);const _0x3387f8=document[_0x331108(0x345)](_0x331108(0x1f8));_0x3387f8['textContent']='ÂâäÈô§',_0x3387f8[_0x331108(0x2fd)]='layer-btn',_0x3387f8[_0x331108(0x37b)]=_0x331108(0x1e2),_0x3387f8[_0x331108(0x2b0)]=_0x2b6210[_0x331108(0x1ed)]===0x1,_0x3387f8[_0x331108(0x373)]=_0x2fb2b3=>{const _0x4db6fb=_0x331108;_0x2fb2b3[_0x4db6fb(0x238)](),removeLayerAt(_0x5b1eee);},_0x10cee8[_0x331108(0x377)](_0x3387f8),_0xd0934c[_0x331108(0x377)](_0x10cee8);}}function swapLayer(_0x5d4484,_0xa168c){const _0xa6b810=a0_0x32e0c3;let _0x3d5353=getCurrentFrame();[_0x3d5353['layers'][_0x5d4484],_0x3d5353['layers'][_0xa168c]]=[_0x3d5353[_0xa6b810(0x292)][_0xa168c],_0x3d5353[_0xa6b810(0x292)][_0x5d4484]],[_0x3d5353[_0xa6b810(0x281)][_0x5d4484],_0x3d5353[_0xa6b810(0x281)][_0xa168c]]=[_0x3d5353[_0xa6b810(0x281)][_0xa168c],_0x3d5353[_0xa6b810(0x281)][_0x5d4484]],[_0x3d5353['layerRedoStacks'][_0x5d4484],_0x3d5353['layerRedoStacks'][_0xa168c]]=[_0x3d5353[_0xa6b810(0x2ec)][_0xa168c],_0x3d5353[_0xa6b810(0x2ec)][_0x5d4484]];if(_0x3d5353[_0xa6b810(0x2de)]===_0x5d4484)_0x3d5353['activeLayer']=_0xa168c;else{if(_0x3d5353[_0xa6b810(0x2de)]===_0xa168c)_0x3d5353[_0xa6b810(0x2de)]=_0x5d4484;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x2ea44f){const _0x2e7eef=a0_0x32e0c3;let _0x43bfe8=getCurrentFrame();if(_0x43bfe8[_0x2e7eef(0x292)]['length']<=0x1)return;_0x43bfe8[_0x2e7eef(0x292)][_0x2e7eef(0x2bd)](_0x2ea44f,0x1),_0x43bfe8['layerHistories'][_0x2e7eef(0x2bd)](_0x2ea44f,0x1),_0x43bfe8['layerRedoStacks'][_0x2e7eef(0x2bd)](_0x2ea44f,0x1);if(_0x43bfe8[_0x2e7eef(0x2de)]>=_0x43bfe8['layers'][_0x2e7eef(0x1ed)])_0x43bfe8['activeLayer']=_0x43bfe8[_0x2e7eef(0x292)][_0x2e7eef(0x1ed)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x1da22f=a0_0x32e0c3;let _0x4a85ab=getCurrentProject(),_0x1334af=getCurrentFrame(),_0x31be84=document[_0x1da22f(0x345)](_0x1da22f(0x217));_0x31be84[_0x1da22f(0x268)]=_0x4a85ab['width']*cellSize,_0x31be84[_0x1da22f(0x2e8)]=_0x4a85ab[_0x1da22f(0x2e8)]*cellSize,_0x1334af['layers'][_0x1da22f(0x1ff)](_0x31be84),_0x1334af[_0x1da22f(0x281)][_0x1da22f(0x1ff)]([]),_0x1334af['layerRedoStacks']['push']([]),_0x1334af[_0x1da22f(0x2de)]=_0x1334af[_0x1da22f(0x292)][_0x1da22f(0x1ed)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x76cba0=a0_0x32e0c3;let _0x2649f1=getCurrentFrame();if(_0x2649f1['layers'][_0x76cba0(0x1ed)]<=0x1)return;_0x2649f1[_0x76cba0(0x292)][_0x76cba0(0x2bd)](_0x2649f1[_0x76cba0(0x2de)],0x1),_0x2649f1[_0x76cba0(0x281)][_0x76cba0(0x2bd)](_0x2649f1[_0x76cba0(0x2de)],0x1),_0x2649f1[_0x76cba0(0x2ec)][_0x76cba0(0x2bd)](_0x2649f1['activeLayer'],0x1),_0x2649f1[_0x76cba0(0x2de)]=Math[_0x76cba0(0x2fe)](0x0,_0x2649f1[_0x76cba0(0x2de)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x13abdb){getCurrentFrame()['activeLayer']=parseInt(_0x13abdb),updateLayerUI();}let PALETTE_COLORS=['transparent',a0_0x32e0c3(0x22a),a0_0x32e0c3(0x25d),a0_0x32e0c3(0x355),a0_0x32e0c3(0x382),a0_0x32e0c3(0x257),a0_0x32e0c3(0x2dc),'#ffa500','#ffff00',a0_0x32e0c3(0x263),'#00ffff','#0000ff','#ff00ff',a0_0x32e0c3(0x27c),a0_0x32e0c3(0x340),a0_0x32e0c3(0x37a),'#008080',a0_0x32e0c3(0x251),'#800080',a0_0x32e0c3(0x21f),'#ff69b4'],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){let _0x233886=getCurrentProject();if(!_0x233886||!_0x233886['frames']||_0x233886['frames']['length']<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0x2366df=_0x233886['frames'];animationTimer=setInterval(()=>{const _0x2c214d=a0_0x331c;ctx['clearRect'](0x0,0x0,canvas[_0x2c214d(0x268)],canvas['height']);let _0x422091=_0x2366df[animationIndex];for(let _0x1e05e8=0x0;_0x1e05e8<_0x422091['layers'][_0x2c214d(0x1ed)];_0x1e05e8++){ctx[_0x2c214d(0x2cf)](_0x422091['layers'][_0x1e05e8],0x0,0x0);}drawGrid(_0x233886[_0x2c214d(0x268)],_0x233886[_0x2c214d(0x2e8)]),animationIndex=(animationIndex+0x1)%_0x2366df[_0x2c214d(0x1ed)];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function setAnimationDelay(_0x219946){const _0x158586=a0_0x32e0c3;_0x219946=Math[_0x158586(0x2fe)](0xa,parseInt(_0x219946,0xa)||0x12c),animationDelay=_0x219946,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x5c48ef){const _0x4a1dcc=a0_0x32e0c3;currentTool=_0x5c48ef,document[_0x4a1dcc(0x357)](_0x4a1dcc(0x2bf))[_0x4a1dcc(0x381)](_0xab5d98=>{const _0x5ad236=_0x4a1dcc;_0xab5d98[_0x5ad236(0x234)][_0x5ad236(0x34f)](_0x5ad236(0x227),_0xab5d98['dataset']['tool']===_0x5c48ef);}),document[_0x4a1dcc(0x357)](_0x4a1dcc(0x2f7))['forEach'](_0x4ae623=>{const _0x1af5a1=_0x4a1dcc;_0x4ae623['classList'][_0x1af5a1(0x34f)](_0x1af5a1(0x227),_0x4ae623[_0x1af5a1(0x344)][_0x1af5a1(0x37d)]===_0x5c48ef);}),_0x5c48ef===_0x4a1dcc(0x24c)?canvas[_0x4a1dcc(0x25a)][_0x4a1dcc(0x1e9)]='grab':canvas[_0x4a1dcc(0x25a)][_0x4a1dcc(0x1e9)]=_0x4a1dcc(0x2ee);}function setPenSize(_0x4e8e58){const _0x53da78=a0_0x32e0c3;penSize=parseInt(_0x4e8e58)||0x1;let _0x589c17=document['getElementById'](_0x53da78(0x2b3));if(_0x589c17)_0x589c17[_0x53da78(0x2dd)]=penSize;let _0x36b63a=document[_0x53da78(0x332)](_0x53da78(0x36a));if(_0x36b63a)_0x36b63a[_0x53da78(0x2dd)]=penSize;}function setPenMode(_0x2af7df){const _0x13654e=a0_0x32e0c3;penMode=_0x2af7df;let _0x4300f4=document[_0x13654e(0x332)](_0x13654e(0x277));if(_0x4300f4)_0x4300f4['value']=penMode;let _0x537d23=document[_0x13654e(0x332)](_0x13654e(0x2b4));if(_0x537d23)_0x537d23[_0x13654e(0x2dd)]=penMode;}function hexToRgba(_0x5cd7e4,_0x1854d6=0x1){const _0xe43e0f=a0_0x32e0c3;if(_0x5cd7e4===_0xe43e0f(0x34d)||_0x5cd7e4==='#00000000')return[0x0,0x0,0x0,0x0];_0x5cd7e4=_0x5cd7e4[_0xe43e0f(0x252)]('#','');if(_0x5cd7e4[_0xe43e0f(0x1ed)]===0x3)_0x5cd7e4=_0x5cd7e4['split']('')[_0xe43e0f(0x2b7)](_0x381927=>_0x381927+_0x381927)[_0xe43e0f(0x27b)]('');if(_0x5cd7e4[_0xe43e0f(0x1ed)]===0x8){const _0xa0926=parseInt(_0x5cd7e4[_0xe43e0f(0x2f5)](0x0,0x2),0x10),_0x20679c=parseInt(_0x5cd7e4[_0xe43e0f(0x2f5)](0x2,0x4),0x10),_0x407547=parseInt(_0x5cd7e4[_0xe43e0f(0x2f5)](0x4,0x6),0x10),_0x5345bb=parseInt(_0x5cd7e4[_0xe43e0f(0x2f5)](0x6,0x8),0x10);return[_0xa0926,_0x20679c,_0x407547,_0x5345bb];}let _0xd74e63=parseInt(_0x5cd7e4,0x10);return[_0xd74e63>>0x10&0xff,_0xd74e63>>0x8&0xff,_0xd74e63&0xff,Math[_0xe43e0f(0x35b)](0xff*_0x1854d6)];}function fillAt(_0x16ef8b,_0x27d985){const _0x3853c0=a0_0x32e0c3;let _0x13dfcf=getCurrentProject(),_0x4afece=getCurrentFrame(),_0x61c5c7=_0x4afece[_0x3853c0(0x292)][_0x4afece[_0x3853c0(0x2de)]][_0x3853c0(0x375)]('2d'),_0x43a73f=_0x61c5c7[_0x3853c0(0x36d)](0x0,0x0,_0x13dfcf[_0x3853c0(0x268)]*cellSize,_0x13dfcf[_0x3853c0(0x2e8)]*cellSize),_0xba2a34=_0x16ef8b*cellSize,_0x570fc2=_0x27d985*cellSize,_0x15209a=getPixel(_0x43a73f,_0xba2a34,_0x570fc2),_0x367a93=currentColor===_0x3853c0(0x34d)||currentColor===_0x3853c0(0x30e)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x15209a,_0x367a93))return;let _0x299b5a=[[_0x16ef8b,_0x27d985]],_0xc7fe6e=new Set();while(_0x299b5a['length']){let [_0x1a9de5,_0x39ab60]=_0x299b5a['pop']();if(_0x1a9de5<0x0||_0x39ab60<0x0||_0x1a9de5>=_0x13dfcf[_0x3853c0(0x268)]||_0x39ab60>=_0x13dfcf[_0x3853c0(0x2e8)])continue;let _0x3174b3=_0x1a9de5+','+_0x39ab60;if(_0xc7fe6e[_0x3853c0(0x235)](_0x3174b3))continue;_0xc7fe6e[_0x3853c0(0x2bb)](_0x3174b3);let _0x3f092f=_0x1a9de5*cellSize,_0x311d35=_0x39ab60*cellSize,_0x23f165=getPixel(_0x43a73f,_0x3f092f,_0x311d35);if(!colorsMatch(_0x23f165,_0x15209a))continue;for(let _0x2996da=0x0;_0x2996da<cellSize;_0x2996da++){for(let _0x5d48e6=0x0;_0x5d48e6<cellSize;_0x5d48e6++){setPixel(_0x43a73f,_0x3f092f+_0x5d48e6,_0x311d35+_0x2996da,_0x367a93);}}_0x299b5a[_0x3853c0(0x1ff)]([_0x1a9de5+0x1,_0x39ab60]),_0x299b5a[_0x3853c0(0x1ff)]([_0x1a9de5-0x1,_0x39ab60]),_0x299b5a[_0x3853c0(0x1ff)]([_0x1a9de5,_0x39ab60+0x1]),_0x299b5a[_0x3853c0(0x1ff)]([_0x1a9de5,_0x39ab60-0x1]);}_0x61c5c7[_0x3853c0(0x203)](_0x43a73f,0x0,0x0),redrawAll();}function getPixel(_0x1d7fb6,_0xf39cdb,_0x1adb8a){const _0x193214=a0_0x32e0c3;let _0x853a47=(_0x1adb8a*_0x1d7fb6[_0x193214(0x268)]+_0xf39cdb)*0x4;return[_0x1d7fb6[_0x193214(0x270)][_0x853a47],_0x1d7fb6[_0x193214(0x270)][_0x853a47+0x1],_0x1d7fb6[_0x193214(0x270)][_0x853a47+0x2],_0x1d7fb6['data'][_0x853a47+0x3]];}function setPixel(_0x497bb2,_0x56cba2,_0x5605e3,_0x4dab1a){const _0x3b421b=a0_0x32e0c3;let _0x7873c1=(_0x5605e3*_0x497bb2[_0x3b421b(0x268)]+_0x56cba2)*0x4;_0x497bb2[_0x3b421b(0x270)][_0x7873c1]=_0x4dab1a[0x0],_0x497bb2['data'][_0x7873c1+0x1]=_0x4dab1a[0x1],_0x497bb2[_0x3b421b(0x270)][_0x7873c1+0x2]=_0x4dab1a[0x2],_0x497bb2['data'][_0x7873c1+0x3]=_0x4dab1a[0x3];}function colorsMatch(_0x598d98,_0x53ef1e){return _0x598d98[0x0]===_0x53ef1e[0x0]&&_0x598d98[0x1]===_0x53ef1e[0x1]&&_0x598d98[0x2]===_0x53ef1e[0x2]&&_0x598d98[0x3]===_0x53ef1e[0x3];}function handleMouseDown(_0x45bc2e){const _0x5c1ef2=a0_0x32e0c3;isDrawing=!![];const _0xda4e18=getCanvasCoords(_0x45bc2e),_0x3d0389=Math['floor'](_0xda4e18['x']/cellSize),_0x1aecef=Math['floor'](_0xda4e18['y']/cellSize);currentTool===_0x5c1ef2(0x276)?(fillAt(_0x3d0389,_0x1aecef),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x3d0389,_0x1aecef),lastMouse={'x':_0x3d0389,'y':_0x1aecef});}function handleMouseMove(_0xc9e0a4){const _0x36093d=a0_0x32e0c3;if(!isDrawing)return;const _0x1954ef=getCanvasCoords(_0xc9e0a4),_0x18f3b6=Math[_0x36093d(0x33e)](_0x1954ef['x']/cellSize),_0x5a9f07=Math[_0x36093d(0x33e)](_0x1954ef['y']/cellSize);if(!lastMouse){drawDotXY(_0x18f3b6,_0x5a9f07),lastMouse={'x':_0x18f3b6,'y':_0x5a9f07};return;}const _0x50a3e8=_0x18f3b6-lastMouse['x'],_0x2358df=_0x5a9f07-lastMouse['y'],_0x1cad1b=Math[_0x36093d(0x2fe)](Math[_0x36093d(0x2b1)](_0x50a3e8),Math[_0x36093d(0x2b1)](_0x2358df));if(_0x1cad1b<=0x1)drawDotXY(_0x18f3b6,_0x5a9f07);else for(let _0x5c42a8=0x1;_0x5c42a8<=_0x1cad1b;_0x5c42a8++){const _0x2fa0f9=Math['round'](lastMouse['x']+_0x50a3e8*_0x5c42a8/_0x1cad1b),_0x87f730=Math[_0x36093d(0x35b)](lastMouse['y']+_0x2358df*_0x5c42a8/_0x1cad1b);drawDotXY(_0x2fa0f9,_0x87f730);}lastMouse={'x':_0x18f3b6,'y':_0x5a9f07};}function handleMouseUp(_0xe40c1d){isDrawing&&saveHistory(),isDrawing=![],lastMouse=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0x18f148){const _0x5777de=a0_0x32e0c3,_0x2e9b2d=canvas[_0x5777de(0x349)]();let _0x2526de=_0x18f148[_0x5777de(0x201)]&&_0x18f148[_0x5777de(0x201)][0x0]?_0x18f148[_0x5777de(0x201)][0x0]:_0x18f148[_0x5777de(0x2f8)][0x0];const _0x460081=canvas[_0x5777de(0x268)]/_0x2e9b2d['width'],_0x4551b9=canvas[_0x5777de(0x2e8)]/_0x2e9b2d[_0x5777de(0x2e8)],_0x4fd1ad=_0x2526de['clientX'],_0x1839b9=_0x2526de[_0x5777de(0x304)],_0x16e34d=(_0x4fd1ad-_0x2e9b2d['left'])*_0x460081,_0xd6c32b=(_0x1839b9-_0x2e9b2d[_0x5777de(0x31c)])*_0x4551b9;return{'x':Math[_0x5777de(0x33e)](_0x16e34d/cellSize),'y':Math[_0x5777de(0x33e)](_0xd6c32b/cellSize)};}function handleTouchStart(_0x268af2){const _0x293ef0=a0_0x32e0c3;if(_0x268af2[_0x293ef0(0x201)][_0x293ef0(0x1ed)]===0x2){_0x268af2[_0x293ef0(0x23c)](),isPinching=!![],isDrawing=![];const _0x52f1c9=_0x268af2['touches'][0x0],_0x98e88a=_0x268af2['touches'][0x1];pinchStartDistance=Math[_0x293ef0(0x24f)](_0x98e88a[_0x293ef0(0x305)]-_0x52f1c9['clientX'],_0x98e88a[_0x293ef0(0x304)]-_0x52f1c9[_0x293ef0(0x304)]),pinchStartMid={'clientX':(_0x52f1c9['clientX']+_0x98e88a[_0x293ef0(0x305)])/0x2,'clientY':(_0x52f1c9[_0x293ef0(0x304)]+_0x98e88a[_0x293ef0(0x304)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x293ef0(0x349)]();}else{if(_0x268af2[_0x293ef0(0x201)][_0x293ef0(0x1ed)]===0x1){if(colorPickMode){_0x268af2['preventDefault']();const _0x168fa1=_0x268af2['touches'][0x0];onCanvasColorPick({'clientX':_0x168fa1['clientX'],'clientY':_0x168fa1[_0x293ef0(0x304)]});return;}_0x268af2[_0x293ef0(0x23c)]();if(isPinching)return;isDrawing=!![];let _0x249899=getTouchPos(_0x268af2);lastTouch=_0x249899,currentTool==='fill'?(fillAt(_0x249899['x'],_0x249899['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x249899['x'],_0x249899['y']);}}}function handleTouchMove(_0x3d7ec1){const _0x371be4=a0_0x32e0c3;if(isPinching||_0x3d7ec1[_0x371be4(0x201)]&&_0x3d7ec1['touches'][_0x371be4(0x1ed)]===0x2){_0x3d7ec1[_0x371be4(0x23c)]();const _0x3428b1=_0x3d7ec1[_0x371be4(0x201)][0x0],_0x5302ac=_0x3d7ec1[_0x371be4(0x201)][0x1],_0x31a1c3=Math[_0x371be4(0x24f)](_0x5302ac[_0x371be4(0x305)]-_0x3428b1[_0x371be4(0x305)],_0x5302ac[_0x371be4(0x304)]-_0x3428b1['clientY']),_0x4c210c={'clientX':(_0x3428b1[_0x371be4(0x305)]+_0x5302ac[_0x371be4(0x305)])/0x2,'clientY':(_0x3428b1[_0x371be4(0x304)]+_0x5302ac[_0x371be4(0x304)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x31a1c3||0x1;const _0x577847=_0x31a1c3/pinchStartDistance||0x1;let _0x405287=pinchStartScale*_0x577847;_0x405287=Math[_0x371be4(0x24d)](Math[_0x371be4(0x2fe)](_0x405287,0.2),0x5);const _0x4fda06=pinchRect||canvas[_0x371be4(0x349)](),_0x1e9ab6=(pinchStartMid[_0x371be4(0x305)]-_0x4fda06[_0x371be4(0x230)]-pinchStartPosX)/pinchStartScale,_0x41db42=(pinchStartMid[_0x371be4(0x304)]-_0x4fda06['top']-pinchStartPosY)/pinchStartScale;posX=_0x4c210c[_0x371be4(0x305)]-_0x4fda06[_0x371be4(0x230)]-_0x1e9ab6*_0x405287,posY=_0x4c210c[_0x371be4(0x304)]-_0x4fda06['top']-_0x41db42*_0x405287,scale=_0x405287,updateTransform();return;}if(!isDrawing)return;if(_0x3d7ec1['touches']&&_0x3d7ec1['touches']['length']>0x1)return;_0x3d7ec1[_0x371be4(0x23c)]();let _0x6ff14f=getTouchPos(_0x3d7ec1);if(lastTouch){let _0x8ab6a2=Math[_0x371be4(0x2b1)]((_0x6ff14f['x']-lastTouch['x'])*cellSize),_0x1191c2=Math[_0x371be4(0x2b1)]((_0x6ff14f['y']-lastTouch['y'])*cellSize);if(_0x8ab6a2>=PAN_CANCEL_DISTANCE||_0x1191c2>=PAN_CANCEL_DISTANCE){if(currentTool!==_0x371be4(0x343)){isDrawing=![];return;}}}if(lastTouch){let _0x4af200=_0x6ff14f['x']-lastTouch['x'],_0x210a7a=_0x6ff14f['y']-lastTouch['y'],_0x5bf9bd=Math['max'](Math[_0x371be4(0x2b1)](_0x4af200),Math[_0x371be4(0x2b1)](_0x210a7a));for(let _0x5219b4=0x1;_0x5219b4<=_0x5bf9bd;_0x5219b4++){let _0x2cc845=Math[_0x371be4(0x35b)](lastTouch['x']+_0x4af200*_0x5219b4/_0x5bf9bd),_0x2b7557=Math['round'](lastTouch['y']+_0x210a7a*_0x5219b4/_0x5bf9bd);drawDotTouch(_0x2cc845,_0x2b7557);}}else drawDotTouch(_0x6ff14f['x'],_0x6ff14f['y']);lastTouch=_0x6ff14f;}function handleTouchEnd(_0xa5e072){const _0x658100=a0_0x32e0c3;isPinching&&_0xa5e072[_0x658100(0x201)]&&_0xa5e072[_0x658100(0x201)][_0x658100(0x1ed)]<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null);isDrawing&&(!_0xa5e072[_0x658100(0x201)]||_0xa5e072['touches'][_0x658100(0x1ed)]===0x0)&&saveHistory();if(_0xa5e072[_0x658100(0x201)]&&_0xa5e072[_0x658100(0x201)][_0x658100(0x1ed)]===0x1){let _0x1acb98=_0xa5e072[_0x658100(0x201)][0x0];lastTouch=getTouchPos({'touches':[_0x1acb98]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function drawDotXY(_0x220cbe,_0x2c4f51){const _0x365249=a0_0x32e0c3;let _0x1cfcd8=getCurrentProject(),_0xe00424=getCurrentFrame();if(!_0xe00424||!_0x1cfcd8)return;if(typeof _0x220cbe!=='number'||typeof _0x2c4f51!==_0x365249(0x24b)||_0x220cbe<0x0||_0x2c4f51<0x0||!Number[_0x365249(0x1fc)](_0x1cfcd8[_0x365249(0x268)])||!Number[_0x365249(0x1fc)](_0x1cfcd8[_0x365249(0x2e8)])||_0x220cbe>=_0x1cfcd8[_0x365249(0x268)]||_0x2c4f51>=_0x1cfcd8[_0x365249(0x2e8)]||!Array[_0x365249(0x255)](_0xe00424[_0x365249(0x292)])||typeof _0xe00424[_0x365249(0x2de)]!=='number'||!_0xe00424[_0x365249(0x292)][_0xe00424[_0x365249(0x2de)]])return;let _0x309b2f=_0xe00424[_0x365249(0x292)][_0xe00424[_0x365249(0x2de)]]['getContext']('2d');if(!_0x309b2f)return;if(currentTool===_0x365249(0x278)||currentColor===_0x365249(0x34d)||currentColor===_0x365249(0x30e)||currentAlpha===0x0)drawPenShape(_0x309b2f,_0x220cbe,_0x2c4f51,'#00000000',!![]);else{let _0x354fae=hexToRgba(currentColor,currentAlpha);_0x309b2f[_0x365249(0x33f)](),_0x309b2f['globalAlpha']=_0x354fae[0x3]/0xff,drawPenShape(_0x309b2f,_0x220cbe,_0x2c4f51,_0x365249(0x306)+_0x354fae[0x0]+','+_0x354fae[0x1]+','+_0x354fae[0x2]+','+_0x354fae[0x3]/0xff+')',![]),_0x309b2f[_0x365249(0x23b)]();}redrawAll();}function drawPenShape(_0x118f81,_0x2a9315,_0x4c3bdc,_0x40d291,_0x4fc015){const _0x960c6f=a0_0x32e0c3,_0x195b85=_0x2a9315*cellSize,_0xd39d92=_0x4c3bdc*cellSize,_0x487520=penSize*cellSize;_0x4fc015?(_0x118f81['save'](),_0x118f81[_0x960c6f(0x2d2)]=_0x960c6f(0x299),penMode===_0x960c6f(0x33a)?(_0x118f81['beginPath'](),_0x118f81[_0x960c6f(0x35d)](_0x195b85+cellSize/0x2,_0xd39d92+cellSize/0x2,_0x487520/0x2,0x0,Math['PI']*0x2),_0x118f81[_0x960c6f(0x276)]()):_0x118f81['clearRect'](_0x195b85-Math['floor']((penSize-0x1)/0x2)*cellSize,_0xd39d92-Math[_0x960c6f(0x33e)]((penSize-0x1)/0x2)*cellSize,_0x487520,_0x487520),_0x118f81[_0x960c6f(0x23b)]()):(_0x118f81['save'](),_0x118f81[_0x960c6f(0x22c)]=_0x40d291,penMode===_0x960c6f(0x33a)?(_0x118f81[_0x960c6f(0x1e8)](),_0x118f81[_0x960c6f(0x35d)](_0x195b85+cellSize/0x2,_0xd39d92+cellSize/0x2,_0x487520/0x2,0x0,Math['PI']*0x2),_0x118f81[_0x960c6f(0x276)]()):_0x118f81[_0x960c6f(0x2a3)](_0x195b85-Math['floor']((penSize-0x1)/0x2)*cellSize,_0xd39d92-Math[_0x960c6f(0x33e)]((penSize-0x1)/0x2)*cellSize,_0x487520,_0x487520),_0x118f81['restore']());}function drawDotTouch(_0x407cf8,_0x952775){const _0x26904f=a0_0x32e0c3;let _0x364d97=getCurrentProject(),_0x4f805b=getCurrentFrame();if(_0x407cf8<0x0||_0x952775<0x0||_0x407cf8>=_0x364d97[_0x26904f(0x268)]||_0x952775>=_0x364d97[_0x26904f(0x2e8)])return;let _0x394944=_0x4f805b[_0x26904f(0x292)][_0x4f805b['activeLayer']][_0x26904f(0x375)]('2d');if(currentTool===_0x26904f(0x278)||currentColor===_0x26904f(0x34d)||currentColor===_0x26904f(0x30e)||currentAlpha===0x0)drawPenShape(_0x394944,_0x407cf8,_0x952775,_0x26904f(0x30e),!![]);else{let _0x2b549f=hexToRgba(currentColor,currentAlpha);_0x394944[_0x26904f(0x33f)](),_0x394944[_0x26904f(0x22f)]=_0x2b549f[0x3]/0xff,drawPenShape(_0x394944,_0x407cf8,_0x952775,_0x26904f(0x306)+_0x2b549f[0x0]+','+_0x2b549f[0x1]+','+_0x2b549f[0x2]+','+_0x2b549f[0x3]/0xff+')',![]),_0x394944[_0x26904f(0x23b)]();}redrawAll();}function applyTheme(_0x32ecac){const _0x537831=a0_0x32e0c3;document[_0x537831(0x28d)][_0x537831(0x25b)](_0x537831(0x21d),_0x32ecac);const _0x2c7652=document[_0x537831(0x332)](_0x537831(0x32e));_0x2c7652&&(_0x2c7652[_0x537831(0x341)]=_0x32ecac===_0x537831(0x34b)?'‚òÄÔ∏è':'üåô',_0x2c7652['setAttribute'](_0x537831(0x250),_0x32ecac===_0x537831(0x34b)),_0x2c7652[_0x537831(0x37b)]=_0x32ecac===_0x537831(0x34b)?_0x537831(0x265):_0x537831(0x361)),localStorage[_0x537831(0x259)](_0x537831(0x29d),_0x32ecac);}function toggleTheme(){const _0x5cac51=a0_0x32e0c3;applyTheme(document[_0x5cac51(0x28d)][_0x5cac51(0x31d)](_0x5cac51(0x21d))===_0x5cac51(0x34b)?_0x5cac51(0x20d):_0x5cac51(0x34b));}(function initTheme(){const _0x176702=a0_0x32e0c3,_0x429a0e=localStorage['getItem'](_0x176702(0x29d))||(window[_0x176702(0x247)]&&window[_0x176702(0x247)](_0x176702(0x353))[_0x176702(0x2ca)]?_0x176702(0x34b):'light');applyTheme(_0x429a0e),document[_0x176702(0x1e4)]('DOMContentLoaded',()=>{const _0x55a777=_0x176702,_0x41ea2c=document[_0x55a777(0x332)](_0x55a777(0x32e));_0x41ea2c&&(_0x41ea2c[_0x55a777(0x1e4)](_0x55a777(0x2d6),toggleTheme),_0x41ea2c['addEventListener'](_0x55a777(0x2fb),_0x16877d=>{const _0x3a94a5=_0x55a777;(_0x16877d[_0x3a94a5(0x380)]===_0x3a94a5(0x368)||_0x16877d['key']==='\x20')&&(_0x16877d['preventDefault'](),toggleTheme());}));});}(),window[a0_0x32e0c3(0x2b5)]=()=>{const _0x540356=a0_0x32e0c3;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool('pen'),loadPaletteFromDB()['then'](()=>createPalette()),document[_0x540356(0x332)](_0x540356(0x2b3))[_0x540356(0x2dd)]=penSize,document[_0x540356(0x332)]('penMode')[_0x540356(0x2dd)]=penMode;const _0x349c10=document[_0x540356(0x332)]('animSpeedRange'),_0x217fde=document[_0x540356(0x332)](_0x540356(0x22b));_0x349c10&&_0x217fde&&(_0x349c10[_0x540356(0x2dd)]=animationDelay,_0x217fde['value']=animationDelay,_0x349c10[_0x540356(0x32c)]=_0x266c47=>{const _0x49fca5=_0x540356;_0x217fde[_0x49fca5(0x2dd)]=_0x266c47[_0x49fca5(0x314)][_0x49fca5(0x2dd)],setAnimationDelay(_0x266c47[_0x49fca5(0x314)][_0x49fca5(0x2dd)]);},_0x217fde['onchange']=_0x2a337d=>{const _0x3bdb5e=_0x540356;let _0x4e6b37=Math['max'](0xa,Math[_0x3bdb5e(0x24d)](0x1388,parseInt(_0x2a337d['target'][_0x3bdb5e(0x2dd)])||animationDelay));_0x349c10[_0x3bdb5e(0x2dd)]=_0x4e6b37,_0x217fde['value']=_0x4e6b37,setAnimationDelay(_0x4e6b37);}),canvas[_0x540356(0x328)]=handleMouseMove,canvas[_0x540356(0x301)]=handleMouseUp,canvas['onmouseleave']=handleMouseUp,canvas[_0x540356(0x333)]=handleTouchStart,canvas[_0x540356(0x2c6)]=handleTouchMove,canvas[_0x540356(0x224)]=handleTouchEnd,canvas[_0x540356(0x237)]=handleTouchEnd,canvas[_0x540356(0x1e4)](_0x540356(0x2ad),handleTouchStart,{'passive':![]}),canvas[_0x540356(0x1e4)](_0x540356(0x2e3),handleTouchMove,{'passive':![]}),canvas[_0x540356(0x1e4)](_0x540356(0x364),handleTouchEnd,{'passive':![]}),canvas['addEventListener'](_0x540356(0x29f),handleTouchEnd,{'passive':![]}),idbGet(_0x540356(0x31f))&&loadProjectFromIDB();});function drawGrid(_0x5027e6,_0x40c928){const _0x3adeb0=a0_0x32e0c3;ctx[_0x3adeb0(0x33f)](),ctx['strokeStyle']=_0x3adeb0(0x254);for(let _0xcc9e18=0x0;_0xcc9e18<=_0x5027e6;_0xcc9e18++){ctx[_0x3adeb0(0x1e8)](),ctx['moveTo'](_0xcc9e18*cellSize,0x0),ctx['lineTo'](_0xcc9e18*cellSize,_0x40c928*cellSize),ctx[_0x3adeb0(0x2f2)]();}for(let _0x10823c=0x0;_0x10823c<=_0x40c928;_0x10823c++){ctx[_0x3adeb0(0x1e8)](),ctx[_0x3adeb0(0x233)](0x0,_0x10823c*cellSize),ctx[_0x3adeb0(0x370)](_0x5027e6*cellSize,_0x10823c*cellSize),ctx['stroke']();}ctx[_0x3adeb0(0x23b)]();}function redrawAll(){const _0x2d4803=a0_0x32e0c3;let _0xbeb0b6=getCurrentProject(),_0x3d704c=getCurrentFrame();canvas[_0x2d4803(0x268)]=_0xbeb0b6[_0x2d4803(0x268)]*cellSize,canvas[_0x2d4803(0x2e8)]=_0xbeb0b6[_0x2d4803(0x2e8)]*cellSize,ctx[_0x2d4803(0x2e7)](0x0,0x0,canvas['width'],canvas[_0x2d4803(0x2e8)]);for(let _0x4a925c=0x0;_0x4a925c<_0x3d704c[_0x2d4803(0x292)][_0x2d4803(0x1ed)];_0x4a925c++){ctx[_0x2d4803(0x2cf)](_0x3d704c[_0x2d4803(0x292)][_0x4a925c],0x0,0x0);}drawGrid(_0xbeb0b6[_0x2d4803(0x268)],_0xbeb0b6[_0x2d4803(0x2e8)]);wrapper&&(wrapper[_0x2d4803(0x25a)][_0x2d4803(0x268)]=_0x2d4803(0x2c5),wrapper[_0x2d4803(0x25a)][_0x2d4803(0x2e8)]=_0x2d4803(0x308));const _0x249f67=document[_0x2d4803(0x332)](_0x2d4803(0x267));if(_0x249f67){const _0xdba5e7=scanImageColors();renderScanPanel(_0xdba5e7),_0x249f67[_0x2d4803(0x25a)]['display']='';}}function saveHistory(){const _0x2d568e=a0_0x32e0c3;let _0x3fd87b=getCurrentFrame(),_0x1077ca=_0x3fd87b[_0x2d568e(0x281)][_0x3fd87b['activeLayer']];_0x1077ca[_0x2d568e(0x1ff)](_0x3fd87b[_0x2d568e(0x292)][_0x3fd87b[_0x2d568e(0x2de)]][_0x2d568e(0x378)]());if(_0x1077ca[_0x2d568e(0x1ed)]>0x32)_0x1077ca[_0x2d568e(0x1dc)]();_0x3fd87b[_0x2d568e(0x2ec)][_0x3fd87b['activeLayer']]=[];}let copiedLayerDataUrl=null;function copyLayer(){const _0x4834ad=a0_0x32e0c3,_0x153598=getCurrentFrame();if(!_0x153598)return;const _0x3b205c=_0x153598[_0x4834ad(0x2de)];if(typeof _0x3b205c!==_0x4834ad(0x24b)||!_0x153598[_0x4834ad(0x292)][_0x3b205c])return;copiedLayerDataUrl=_0x153598[_0x4834ad(0x292)][_0x3b205c][_0x4834ad(0x378)]();const _0x35a6bf=document['getElementById']('pasteLayerBtn');if(_0x35a6bf)_0x35a6bf[_0x4834ad(0x2b0)]=![];}function pasteLayer(){const _0x5a0941=a0_0x32e0c3;if(!copiedLayerDataUrl)return;const _0x5dc7ce=getCurrentProject(),_0x371f3b=getCurrentFrame();if(!_0x5dc7ce||!_0x371f3b)return;const _0x2d9175=document['createElement'](_0x5a0941(0x217));_0x2d9175[_0x5a0941(0x268)]=_0x5dc7ce[_0x5a0941(0x268)]*cellSize,_0x2d9175[_0x5a0941(0x2e8)]=_0x5dc7ce[_0x5a0941(0x2e8)]*cellSize;const _0x22b205=_0x2d9175['getContext']('2d'),_0x4bca96=new Image();_0x4bca96[_0x5a0941(0x2b5)]=()=>{const _0x5e77c4=_0x5a0941;_0x22b205[_0x5e77c4(0x2e7)](0x0,0x0,_0x2d9175[_0x5e77c4(0x268)],_0x2d9175[_0x5e77c4(0x2e8)]),_0x22b205['drawImage'](_0x4bca96,0x0,0x0),_0x371f3b[_0x5e77c4(0x292)]['push'](_0x2d9175),_0x371f3b[_0x5e77c4(0x281)][_0x5e77c4(0x1ff)]([]),_0x371f3b[_0x5e77c4(0x2ec)]['push']([]),_0x371f3b[_0x5e77c4(0x2de)]=_0x371f3b[_0x5e77c4(0x292)]['length']-0x1,saveHistory(),updateLayerUI(),redrawAll();},_0x4bca96[_0x5a0941(0x2c1)]=copiedLayerDataUrl;}function undo(){const _0x51781d=a0_0x32e0c3;let _0x37a288=getCurrentFrame(),_0x15d17a=_0x37a288[_0x51781d(0x281)][_0x37a288[_0x51781d(0x2de)]],_0x20b870=_0x37a288[_0x51781d(0x2ec)][_0x37a288['activeLayer']];if(!_0x15d17a||_0x15d17a['length']<0x2)return;_0x20b870['push'](_0x15d17a['pop']());let _0x51ba7c=new Image();_0x51ba7c[_0x51781d(0x2b5)]=()=>{const _0x57d7e3=_0x51781d;let _0x306c9c=_0x37a288[_0x57d7e3(0x292)][_0x37a288['activeLayer']][_0x57d7e3(0x375)]('2d');_0x306c9c[_0x57d7e3(0x2e7)](0x0,0x0,_0x37a288[_0x57d7e3(0x292)][_0x37a288['activeLayer']][_0x57d7e3(0x268)],_0x37a288[_0x57d7e3(0x292)][_0x37a288[_0x57d7e3(0x2de)]]['height']),_0x306c9c[_0x57d7e3(0x2cf)](_0x51ba7c,0x0,0x0),redrawAll();},_0x51ba7c['src']=_0x15d17a[_0x15d17a[_0x51781d(0x1ed)]-0x1];}function redo(){const _0x45b285=a0_0x32e0c3;let _0x3c637c=getCurrentFrame(),_0x36f088=_0x3c637c[_0x45b285(0x281)][_0x3c637c[_0x45b285(0x2de)]],_0x14d6be=_0x3c637c[_0x45b285(0x2ec)][_0x3c637c[_0x45b285(0x2de)]];if(!_0x14d6be||_0x14d6be[_0x45b285(0x1ed)]===0x0)return;let _0x2f120f=_0x14d6be[_0x45b285(0x35f)]();_0x36f088['push'](_0x2f120f);let _0x3495a0=new Image();_0x3495a0[_0x45b285(0x2b5)]=()=>{const _0x1e7a39=_0x45b285;let _0x55f316=_0x3c637c[_0x1e7a39(0x292)][_0x3c637c[_0x1e7a39(0x2de)]][_0x1e7a39(0x375)]('2d');_0x55f316[_0x1e7a39(0x2e7)](0x0,0x0,_0x3c637c['layers'][_0x3c637c[_0x1e7a39(0x2de)]]['width'],_0x3c637c['layers'][_0x3c637c[_0x1e7a39(0x2de)]][_0x1e7a39(0x2e8)]),_0x55f316['drawImage'](_0x3495a0,0x0,0x0),redrawAll();},_0x3495a0[_0x45b285(0x2c1)]=_0x2f120f;}function exportImage(_0x1901a1){const _0x55a699=a0_0x32e0c3;let _0x4adeec=getCurrentProject(),_0x313fdc=_0x4adeec[_0x55a699(0x358)],_0x110246=_0x1901a1===_0x55a699(0x23d)||_0x1901a1==='jpeg'?_0x55a699(0x223):'image/'+_0x1901a1,_0x849498=_0x313fdc[_0x55a699(0x1ed)]>0x1,_0x1a41a4=(_0x4adeec[_0x55a699(0x30a)]||_0x55a699(0x275))[_0x55a699(0x252)](/[\\/:*?"<>|]/g,'_');if(!_0x849498){let _0x268790=document[_0x55a699(0x345)](_0x55a699(0x217));_0x268790[_0x55a699(0x268)]=_0x4adeec['width']*cellSize,_0x268790[_0x55a699(0x2e8)]=_0x4adeec[_0x55a699(0x2e8)]*cellSize;let _0x3e9c8b=_0x268790[_0x55a699(0x375)]('2d'),_0xe0e904=getCurrentFrame();for(let _0x3f7994=0x0;_0x3f7994<_0xe0e904['layers'][_0x55a699(0x1ed)];_0x3f7994++){_0x3e9c8b[_0x55a699(0x2cf)](_0xe0e904[_0x55a699(0x292)][_0x3f7994],0x0,0x0);}let _0x3d10ae=document[_0x55a699(0x345)]('a');_0x3d10ae[_0x55a699(0x253)]=_0x1a41a4+'.'+_0x1901a1,_0x1901a1===_0x55a699(0x23d)||_0x1901a1==='jpeg'?_0x3d10ae['href']=_0x268790['toDataURL'](_0x110246,0.92):_0x3d10ae['href']=_0x268790[_0x55a699(0x378)](_0x110246),_0x3d10ae[_0x55a699(0x2d6)]();}else{if(_0x1901a1===_0x55a699(0x2cd)&&typeof window['WebCodecs']!==_0x55a699(0x31a))exportWebpAnimation(_0x313fdc,_0x4adeec[_0x55a699(0x268)]*cellSize,_0x4adeec[_0x55a699(0x2e8)]*cellSize,_0x1a41a4);else for(let _0x2d9cf9=0x0;_0x2d9cf9<_0x313fdc[_0x55a699(0x1ed)];_0x2d9cf9++){let _0x152464=document['createElement'](_0x55a699(0x217));_0x152464['width']=_0x4adeec[_0x55a699(0x268)]*cellSize,_0x152464[_0x55a699(0x2e8)]=_0x4adeec[_0x55a699(0x2e8)]*cellSize;let _0x559dd0=_0x152464['getContext']('2d'),_0x49b7c7=_0x313fdc[_0x2d9cf9];for(let _0x2bb909=0x0;_0x2bb909<_0x49b7c7[_0x55a699(0x292)][_0x55a699(0x1ed)];_0x2bb909++){_0x559dd0[_0x55a699(0x2cf)](_0x49b7c7[_0x55a699(0x292)][_0x2bb909],0x0,0x0);}let _0x15a636=document['createElement']('a');_0x15a636[_0x55a699(0x253)]=_0x1a41a4+'-f'+(_0x2d9cf9+0x1)+'.'+_0x1901a1,_0x1901a1===_0x55a699(0x23d)||_0x1901a1===_0x55a699(0x2ef)?_0x15a636[_0x55a699(0x1f5)]=_0x152464['toDataURL'](_0x110246,0.92):_0x15a636[_0x55a699(0x1f5)]=_0x152464[_0x55a699(0x378)](_0x110246),setTimeout(()=>_0x15a636['click'](),_0x2d9cf9*0x64);}}}function a0_0x610f(){const _0x5decd2=['100vw','from','isContentEditable','Loaded\x20JSZip\x20fallback\x20from\x20jsDelivr','folder','anonymous','canvas','IndexedDB„Åã„Çâ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Çì„Å†„ÉÅ„É•„ÉºÔºÅ','grab','right-panel','ArrowUp','nezumi_about_visited','data-theme','configure','#c0c0c0','„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','„Ç≥„Éû)','80px','image/jpeg','ontouchend','crossOrigin','‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº:','active','readAsText','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px,\x20rgba(','#000000','animSpeedValue','fillStyle','Ëâ≤„ÅØË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü','test','globalAlpha','left','.gif','.webm','moveTo','classList','has','transform','ontouchcancel','stopPropagation','blob','#addDlgAlpha','restore','preventDefault','jpg','px,\x20','decode','onkeydown','projects','zIndex','used-color-item','remove','video/webm','project-name-edit','matchMedia','„Çπ„Çø„É≥„Éâ„Ç¢„É≠„É≥ÂΩ¢Âºè„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:\x20','setPointerCapture','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','number','pan','min','Shift','hypot','aria-pressed','#000080','replace','download','#ccc','isArray','put','#ffffff','result','setItem','style','setAttribute','palette-add-btn','#444444','get','layerList','„Çπ„Éó„É©„Ç§„Éà„Ç∑„Éº„Éà„ÅÆÊã°Â§ßÁéá„ÇíÊåáÂÆöÔºà‰æã:\x201\x20=\x20ÂÖÉ„Çµ„Ç§„Ç∫,\x202\x20=\x202ÂÄçÔºâ','260fdrFFu','_spritesheet.png','#00ff00','search','„É©„Ç§„Éà„ÉÜ„Éº„Éû„Å´ÂàáÊõø','Âá¶ÁêÜ‰∏≠...','scanColorsPanel','width','#addDlgCancelBtn','menu-toggle-btn-close','flex','all','#addDlgColor','block','charCodeAt','data','color-dialog','used-color-label','exportLayerApngBtn','pointerType','nezumi-drawing','fill','penMode','eraser','onblur','boolean','join','#800000','close','body','layer-item','warn','layerHistories','transaction','position','select','objectStore','startCell','nudgeStep','sidebar','readonly','frame-item','subarray','‰∏ã„Å´ÁßªÂãï','documentElement','buffer','-layer','97634CKIMMN','nezumi-palette','layers','layer-','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','palette-color','#addDlgOkBtn','palette-del-btn','.apng','destination-out','DOMContentLoaded','exportLayerGifBtn','ArrowDown','nezumi-theme','Picked\x20color','touchcancel','toString','default','INPUT','fillRect','log','flush','copyLayerBtn','div','startsWith','unshift','pointermove','padStart','head','touchstart','frame-thumb','overflow','disabled','abs','colorPicker','penSize','palette-penMode','onload','WebCodecs','map','zoomValue','nezumi-sketch-save','activeFrame','add','toLowerCase','splice','image','.tool-btn','176810WmbyDb','src','#addDlgTransparentBtn','count','display','100%','ontouchmove','(((.+)+)+)+$','frameList','touch','matches','fixed','readwrite','webp','1110303GsslVY','drawImage','input','match','globalCompositeOperation','nudgeRightBtn','image/apng','clear','click','blur','translate','21vfQKEz','createObjectURL','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;padding:14px;border-radius:8px;min-width:260px;text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:0\x200\x208px\x200;\x22>„Éë„É¨„ÉÉ„Éà„Å´Ëâ≤„ÇíËøΩÂä†</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22addDlgColor\x22\x20value=\x22#000000\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÈÄèÊòéÂ∫¶(0-100):\x20<input\x20type=\x22number\x22\x20id=\x22addDlgAlpha\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22100\x22\x20style=\x22width:72px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22addDlgTransparentBtn\x22\x20type=\x22button\x22\x20style=\x22margin-left:8px;\x22>ÈÄèÊòé„Å´„Åô„Çã</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:8px;justify-content:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22addDlgOkBtn\x22>ËøΩÂä†</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22addDlgCancelBtn\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','#ff0000','value','activeLayer','.palette-color','tagName','span','project-name','touchmove','nezumi-animation.gif','application/octet-stream','removeChild','clearRect','height','files','#newProjH','resize','layerRedoStacks','UPNG','crosshair','jpeg','none','nezumi-animation.apng','stroke','moveLayer','catch','slice','metaKey','#palette-toolbar\x20.tool-btn','changedTouches','2334200dKlTXp','/about?terms=true','keydown','Picked\x20transparent','className','max','canvas-container','Failed\x20to\x20load\x20JSZip\x20from\x20CDN;\x20ZIP\x20export\x20will\x20be\x20disabled.','onmouseup','beforeunload','toFixed','clientY','clientX','rgba(','project','auto','innerHTML','name','onmouseleave','addFrame','finished','#00000000','#dlgColor','justifyContent','nezumi-spritesheet','some','.section.collapsible\x20.section-content','target','nudgeUpBtn','layerCount','layer-thumb','„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ','„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü','undefined','onmousedown','top','getAttribute','background','nezumi-projects','nudgeLeftBtn','firstChild','touchAction','nezumi-animation','open','IndexedDB„Åã„Çâ„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº‚Ä¶','set','exportFramesZipBtn','onmousemove','menu-toggle-btn','pathname','createObjectStore','oninput','revokeObjectURL','themeToggleBtn','„É¨„Ç§„É§„Éº','querySelector','14404050BNnCqg','getElementById','ontouchstart','px)\x20scale(','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÈÄèÊòéÂ∫¶(0-100):\x20<input\x20type=\x22number\x22\x20id=\x22dlgAlpha\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','sidebar-open','type','toolsToggleBtn','inline-block','circle','onsuccess','#dlgOkBtn','main-container','floor','save','#808000','textContent','render','pen','dataset','createElement','2337601xIrQog','zoomSlider','pointerId','getBoundingClientRect','oncomplete','dark','onupgradeneeded','transparent','project-item','toggle','#newProjCancelBtn','insertBefore','ArrowLeft','(prefers-color-scheme:\x20dark)','lib/gif.worker.js','#888888','\x22\x20style=\x22width:72px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgTransparentBtn\x22\x20type=\x22button\x22\x20style=\x22margin-left:8px;\x22>ÈÄèÊòé</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:8px;justify-content:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgOkBtn\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgCancelBtn\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','querySelectorAll','frames','ctrlKey','https://cdn.jsdelivr.net/npm/jszip@3.10.0/dist/jszip.min.js','round','offsetCells','arc','innerWidth','pop','‰øùÂ≠ò„Ç®„É©„Éº','„ÉÄ„Éº„ÇØ„ÉÜ„Éº„Éû„Å´ÂàáÊõø','contains','onerror','touchend','activeProject','alignItems','square','Enter','transparent-swatch','palette-penSize','<span\x20style=\x22font-size:13px;color:#888;\x22>ÈÄèÊòé</span>','entries','getImageData','shiftKey','center','lineTo','script','#newProjW','onclick','„Éï„É¨„Éº„É†Èñì„ÅÆ‰ΩôÁôΩ(px)\x20„ÇíÊåáÂÆöÔºà‰æã:\x200Ôºâ','getContext','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','appendChild','toDataURL','rgba(0,0,0,0.3)','#008000','title','parse','tool','#dlgAlpha','application/json','key','forEach','#cccccc','error','#dlgCancelBtn','shift','split','stringify','delete','100vh','deltaY','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§','4000','addEventListener','keyup','frame-btn','readAsArrayBuffer','beginPath','cursor','16GecBKP','grabbing','vp8','length','rgba(0,0,0,0.25)','Ë™≠Ëæº„Ç®„É©„Éº','removeEventListener','selected','generateAsync','ZIP„Ç®„ÇØ„Çπ„Éù„Éº„Éà„ÅØÂà©Áî®„Åß„Åç„Åæ„Åõ„ÇìÔºà„É©„Ç§„Éñ„É©„É™Ë™≠„ÅøËæº„Åø„Å´Â§±ÊïóÔºâ','25188oCttDh','href','new-project-dialog','used-color-count','button','colorPickerDialogBtn','trim','#dlgTransparentBtn','isFinite','ZIP‰ΩúÊàê‰∏≠...','info','push','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;padding:18px;border-radius:8px;min-width:260px;text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:0\x200\x208px\x200;\x22>Ëâ≤„Å®ÈÄèÊòé„ÇíÈÅ∏Êäû</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22dlgColor\x22\x20value=\x22','touches','-frames-layers.zip','putImageData','GIF„Å´Â§âÊèõ„Åß„Åç„ÇãÁîªÂÉè„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ','„Åì„ÅÆËâ≤„Çí„Éë„É¨„ÉÉ„Éà„Åã„ÇâÂâäÈô§','„Éï„É¨„Éº„É†„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','layer-btn','focus','used-color-swatch','encode','image/png','layerExportStatus','light','wheel','add-palette-dialog','frameCount'];a0_0x610f=function(){return _0x5decd2;};return a0_0x610f();}async function exportWebpAnimation(_0x24f3a9,_0x48a44d,_0x84d8c0,_0x135043=a0_0x32e0c3(0x323)){const _0x3e6bab=a0_0x32e0c3;if(!window[_0x3e6bab(0x2b6)]||!window['VideoEncoder']){alert('„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØWebCodecs„Å´„Çà„ÇãWEBP„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ');return;}const _0x55a406=[],_0x4ab342=new VideoEncoder({'output':_0x565689=>_0x55a406[_0x3e6bab(0x1ff)](_0x565689),'error':_0x167230=>console[_0x3e6bab(0x1da)](_0x167230)});_0x4ab342[_0x3e6bab(0x21e)]({'codec':_0x3e6bab(0x1ec),'width':_0x48a44d,'height':_0x84d8c0,'framerate':0x5});for(let _0x540450=0x0;_0x540450<_0x24f3a9[_0x3e6bab(0x1ed)];_0x540450++){let _0x131c64=document['createElement']('canvas');_0x131c64[_0x3e6bab(0x268)]=_0x48a44d,_0x131c64[_0x3e6bab(0x2e8)]=_0x84d8c0;let _0x4d2122=_0x131c64[_0x3e6bab(0x375)]('2d'),_0x3653cb=_0x24f3a9[_0x540450];for(let _0x347f19=0x0;_0x347f19<_0x3653cb['layers'][_0x3e6bab(0x1ed)];_0x347f19++){_0x4d2122['drawImage'](_0x3653cb[_0x3e6bab(0x292)][_0x347f19],0x0,0x0);}let _0x1cc5f9=await createImageBitmap(_0x131c64);_0x4ab342[_0x3e6bab(0x20a)](_0x1cc5f9,{'keyFrame':!![],'duration':0xc8}),_0x1cc5f9[_0x3e6bab(0x27d)]();}await _0x4ab342[_0x3e6bab(0x2a5)](),_0x4ab342[_0x3e6bab(0x27d)]();const _0x42c039=new Blob(_0x55a406[_0x3e6bab(0x2b7)](_0x2e6d48=>_0x2e6d48['byteLength']?_0x2e6d48:_0x2e6d48[_0x3e6bab(0x270)]),{'type':_0x3e6bab(0x245)}),_0x3f769a=document[_0x3e6bab(0x345)]('a');_0x3f769a[_0x3e6bab(0x253)]=_0x135043+_0x3e6bab(0x232),_0x3f769a[_0x3e6bab(0x1f5)]=URL[_0x3e6bab(0x2da)](_0x42c039),_0x3f769a[_0x3e6bab(0x2d6)]();}function exportGif(){const _0x19012c=a0_0x32e0c3;let _0xcbc056=getCurrentProject(),_0x14b8f0=_0xcbc056[_0x19012c(0x358)],_0xaf8841=_0xcbc056[_0x19012c(0x268)]*cellSize,_0x342155=_0xcbc056['height']*cellSize;const _0x37af32=_0x14b8f0[_0x19012c(0x2b7)](_0xc5a744=>{const _0xe1e79f=_0x19012c;let _0x19184e=document[_0xe1e79f(0x345)]('canvas');_0x19184e[_0xe1e79f(0x268)]=_0xaf8841,_0x19184e['height']=_0x342155;let _0x2e10da=_0x19184e['getContext']('2d');for(let _0x5485c5=0x0;_0x5485c5<_0xc5a744[_0xe1e79f(0x292)][_0xe1e79f(0x1ed)];_0x5485c5++){_0x2e10da['drawImage'](_0xc5a744[_0xe1e79f(0x292)][_0x5485c5],0x0,0x0);}return _0x19184e[_0xe1e79f(0x378)](_0xe1e79f(0x20b));});Promise['all'](_0x37af32[_0x19012c(0x2b7)](_0x53cea9=>{return new Promise(_0x4e7235=>{const _0x5d5695=a0_0x331c,_0x49e3be=new Image();_0x49e3be[_0x5d5695(0x2c1)]=_0x53cea9,_0x49e3be[_0x5d5695(0x2b5)]=()=>_0x4e7235(_0x49e3be);});}))['then'](_0x26178e=>{const _0x5e9add=_0x19012c,_0x1560b8=_0x26178e['filter'](_0x5171ad=>_0x5171ad[_0x5e9add(0x268)]>0x0&&_0x5171ad[_0x5e9add(0x2e8)]>0x0);if(_0x1560b8[_0x5e9add(0x1ed)]===0x0){alert(_0x5e9add(0x204));return;}const _0x282f65=(_0xcbc056['name']||_0x5e9add(0x323))[_0x5e9add(0x252)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x1560b8,animationDelay,_0x282f65+_0x5e9add(0x231));});}function exportApng(){const _0x595872=a0_0x32e0c3;let _0x4949ef=getCurrentProject(),_0x492ad1=_0x4949ef[_0x595872(0x358)],_0x554d19=_0x4949ef[_0x595872(0x268)]*cellSize,_0x2cbae8=_0x4949ef[_0x595872(0x2e8)]*cellSize;const _0x1fafdf=_0x492ad1[_0x595872(0x2b7)](_0x305fc6=>{const _0x1a601d=_0x595872;let _0x160e7f=document[_0x1a601d(0x345)](_0x1a601d(0x217));_0x160e7f[_0x1a601d(0x268)]=_0x554d19,_0x160e7f['height']=_0x2cbae8;let _0x4b230c=_0x160e7f['getContext']('2d');for(let _0x28fb72=0x0;_0x28fb72<_0x305fc6['layers'][_0x1a601d(0x1ed)];_0x28fb72++){_0x4b230c[_0x1a601d(0x2cf)](_0x305fc6[_0x1a601d(0x292)][_0x28fb72],0x0,0x0);}let _0x7f73ed=new Image();return _0x7f73ed['src']=_0x160e7f[_0x1a601d(0x378)](_0x1a601d(0x20b)),_0x7f73ed;}),_0x4004c0=(_0x4949ef[_0x595872(0x30a)]||_0x595872(0x323))[_0x595872(0x252)](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x1fafdf,_0x554d19,_0x2cbae8,animationDelay,_0x4004c0+_0x595872(0x298));}async function exportLayersAsGif(){const _0xc4e79a=a0_0x32e0c3,_0x2ba052=document[_0xc4e79a(0x332)](_0xc4e79a(0x20c));if(_0x2ba052)_0x2ba052['textContent']=_0xc4e79a(0x266);const _0x271db6=getCurrentProject();if(!_0x271db6){if(_0x2ba052)_0x2ba052['textContent']='';return;}const _0x5f101f=_0x271db6['frames'],_0x2c6a35=_0x271db6[_0xc4e79a(0x268)]*cellSize,_0x41c437=_0x271db6[_0xc4e79a(0x2e8)]*cellSize;let _0x25d1ed=0x0;_0x5f101f[_0xc4e79a(0x381)](_0x69756d=>{const _0x221481=_0xc4e79a;_0x25d1ed=Math[_0x221481(0x2fe)](_0x25d1ed,_0x69756d[_0x221481(0x292)][_0x221481(0x1ed)]);});for(let _0xfedf8e=0x0;_0xfedf8e<_0x25d1ed;_0xfedf8e++){const _0x3cd5e0=await Promise['all'](_0x5f101f[_0xc4e79a(0x2b7)](_0x5946bc=>{return new Promise(_0x4e4841=>{const _0x574ea9=a0_0x331c,_0x5f030c=document[_0x574ea9(0x345)](_0x574ea9(0x217));_0x5f030c[_0x574ea9(0x268)]=_0x2c6a35,_0x5f030c[_0x574ea9(0x2e8)]=_0x41c437;const _0x3c3397=_0x5f030c[_0x574ea9(0x375)]('2d');if(_0x5946bc['layers'][_0xfedf8e])_0x3c3397[_0x574ea9(0x2cf)](_0x5946bc[_0x574ea9(0x292)][_0xfedf8e],0x0,0x0);const _0x260639=new Image();_0x260639[_0x574ea9(0x2b5)]=()=>_0x4e4841(_0x260639),_0x260639['src']=_0x5f030c['toDataURL'](_0x574ea9(0x20b));});})),_0x46fcae=_0x3cd5e0[_0xc4e79a(0x312)](_0x36a7fb=>{const _0x58cd60=_0xc4e79a,_0x607ae=document[_0x58cd60(0x345)](_0x58cd60(0x217));_0x607ae[_0x58cd60(0x268)]=_0x2c6a35,_0x607ae['height']=_0x41c437;const _0x14711f=_0x607ae['getContext']('2d');_0x14711f[_0x58cd60(0x2cf)](_0x36a7fb,0x0,0x0);const _0x3595aa=_0x14711f[_0x58cd60(0x36d)](0x0,0x0,_0x2c6a35,_0x41c437)['data'];for(let _0x2f0d7b=0x3;_0x2f0d7b<_0x3595aa[_0x58cd60(0x1ed)];_0x2f0d7b+=0x4)if(_0x3595aa[_0x2f0d7b]!==0x0)return!![];return![];});if(!_0x46fcae)continue;const _0x28b5c0=(_0x271db6[_0xc4e79a(0x30a)]||_0xc4e79a(0x323))[_0xc4e79a(0x252)](/[\\/:*?"<>|]/g,'_')+(_0xc4e79a(0x28f)+(_0xfedf8e+0x1)+_0xc4e79a(0x231));convertToGIF(_0x3cd5e0,animationDelay,_0x28b5c0),await new Promise(_0x49e0ff=>setTimeout(_0x49e0ff,0x78));}if(_0x2ba052)_0x2ba052[_0xc4e79a(0x341)]='';}async function exportLayersAsApng(){const _0x46981c=a0_0x32e0c3,_0x466298=document[_0x46981c(0x332)]('layerExportStatus');if(_0x466298)_0x466298[_0x46981c(0x341)]='Âá¶ÁêÜ‰∏≠...';const _0x4857fe=getCurrentProject();if(!_0x4857fe){if(_0x466298)_0x466298[_0x46981c(0x341)]='';return;}const _0x32f538=_0x4857fe[_0x46981c(0x358)],_0x510e9b=_0x4857fe[_0x46981c(0x268)]*cellSize,_0x1930a2=_0x4857fe[_0x46981c(0x2e8)]*cellSize;let _0x46af6a=0x0;_0x32f538[_0x46981c(0x381)](_0xa9ef02=>{const _0x3fe77f=_0x46981c;_0x46af6a=Math[_0x3fe77f(0x2fe)](_0x46af6a,_0xa9ef02[_0x3fe77f(0x292)][_0x3fe77f(0x1ed)]);});for(let _0x593941=0x0;_0x593941<_0x46af6a;_0x593941++){const _0xd2a9e8=await Promise[_0x46981c(0x26c)](_0x32f538['map'](_0x2e0eb5=>{return new Promise(_0x18daa5=>{const _0x412e5e=a0_0x331c,_0x3d6835=document['createElement'](_0x412e5e(0x217));_0x3d6835[_0x412e5e(0x268)]=_0x510e9b,_0x3d6835[_0x412e5e(0x2e8)]=_0x1930a2;const _0x5756ad=_0x3d6835[_0x412e5e(0x375)]('2d');if(_0x2e0eb5[_0x412e5e(0x292)][_0x593941])_0x5756ad[_0x412e5e(0x2cf)](_0x2e0eb5['layers'][_0x593941],0x0,0x0);const _0x551dd4=new Image();_0x551dd4[_0x412e5e(0x2b5)]=()=>_0x18daa5(_0x551dd4),_0x551dd4[_0x412e5e(0x2c1)]=_0x3d6835[_0x412e5e(0x378)](_0x412e5e(0x20b));});})),_0x5b9453=_0xd2a9e8['some'](_0x3b9e55=>{const _0x1e5285=_0x46981c,_0x4e44e2=document[_0x1e5285(0x345)](_0x1e5285(0x217));_0x4e44e2['width']=_0x510e9b,_0x4e44e2[_0x1e5285(0x2e8)]=_0x1930a2;const _0x4c3699=_0x4e44e2['getContext']('2d');_0x4c3699[_0x1e5285(0x2cf)](_0x3b9e55,0x0,0x0);const _0x509d96=_0x4c3699[_0x1e5285(0x36d)](0x0,0x0,_0x510e9b,_0x1930a2)[_0x1e5285(0x270)];for(let _0x1e099e=0x3;_0x1e099e<_0x509d96[_0x1e5285(0x1ed)];_0x1e099e+=0x4)if(_0x509d96[_0x1e099e]!==0x0)return!![];return![];});if(!_0x5b9453)continue;const _0xfeb1fe=(_0x4857fe[_0x46981c(0x30a)]||_0x46981c(0x323))[_0x46981c(0x252)](/[\\/:*?"<>|]/g,'_')+(_0x46981c(0x28f)+(_0x593941+0x1)+_0x46981c(0x298));convertToAPNG(_0xd2a9e8,_0x510e9b,_0x1930a2,animationDelay,_0xfeb1fe),await new Promise(_0x1de06d=>setTimeout(_0x1de06d,0x78));}if(_0x466298)_0x466298[_0x46981c(0x341)]='';}async function exportFramesLayersZip(){const _0x1008ce=a0_0x32e0c3,_0x370fc4=document['getElementById'](_0x1008ce(0x20c));if(_0x370fc4)_0x370fc4[_0x1008ce(0x341)]=_0x1008ce(0x1fd);const _0x49339a=getCurrentProject();if(!_0x49339a){if(_0x370fc4)_0x370fc4[_0x1008ce(0x341)]='';return;}const _0x25259f=_0x49339a[_0x1008ce(0x358)],_0x5a7df6=_0x49339a[_0x1008ce(0x268)]*cellSize,_0x5369d1=_0x49339a[_0x1008ce(0x2e8)]*cellSize,_0x27806c=new JSZip();for(let _0x1f8dc8=0x0;_0x1f8dc8<_0x25259f[_0x1008ce(0x1ed)];_0x1f8dc8++){const _0x45ec57=_0x25259f[_0x1f8dc8],_0x3dcce5=_0x27806c[_0x1008ce(0x215)]('frame-'+(_0x1f8dc8+0x1));for(let _0x2130c4=0x0;_0x2130c4<_0x45ec57[_0x1008ce(0x292)]['length'];_0x2130c4++){const _0x348a4=document[_0x1008ce(0x345)](_0x1008ce(0x217));_0x348a4['width']=_0x5a7df6,_0x348a4['height']=_0x5369d1;const _0x2b9b78=_0x348a4[_0x1008ce(0x375)]('2d');_0x2b9b78[_0x1008ce(0x2e7)](0x0,0x0,_0x5a7df6,_0x5369d1);if(_0x45ec57[_0x1008ce(0x292)][_0x2130c4])_0x2b9b78[_0x1008ce(0x2cf)](_0x45ec57[_0x1008ce(0x292)][_0x2130c4],0x0,0x0);const _0x265ab5=_0x348a4[_0x1008ce(0x378)](_0x1008ce(0x20b)),_0xc192f0=_0x265ab5[_0x1008ce(0x1dd)](',')[0x1],_0x470c73=atob(_0xc192f0),_0x47289c=new Uint8Array(_0x470c73[_0x1008ce(0x1ed)]);for(let _0x281f8f=0x0;_0x281f8f<_0x470c73[_0x1008ce(0x1ed)];_0x281f8f++)_0x47289c[_0x281f8f]=_0x470c73[_0x1008ce(0x26f)](_0x281f8f);_0x3dcce5['file'](_0x1008ce(0x293)+(_0x2130c4+0x1)+'.png',_0x47289c);}}const _0x453f60=await _0x27806c[_0x1008ce(0x1f2)]({'type':_0x1008ce(0x239)}),_0x1f67d5=(_0x49339a[_0x1008ce(0x30a)]||'nezumi-export')[_0x1008ce(0x252)](/[\\/:*?"<>|]/g,'_'),_0x1f1e55=document[_0x1008ce(0x345)]('a');_0x1f1e55[_0x1008ce(0x1f5)]=URL[_0x1008ce(0x2da)](_0x453f60),_0x1f1e55[_0x1008ce(0x253)]=_0x1f67d5+_0x1008ce(0x202),document[_0x1008ce(0x27e)]['appendChild'](_0x1f1e55),_0x1f1e55[_0x1008ce(0x2d6)](),setTimeout(()=>{const _0x1daa2a=_0x1008ce;URL['revokeObjectURL'](_0x1f1e55[_0x1daa2a(0x1f5)]),document[_0x1daa2a(0x27e)]['removeChild'](_0x1f1e55);if(_0x370fc4)_0x370fc4['textContent']='';},0x4b0);}function a0_0x331c(_0x4792c4,_0x1a6e1f){_0x4792c4=_0x4792c4-0x1da;const _0x3f1cdb=a0_0x610f();let _0x1e5951=_0x3f1cdb[_0x4792c4];return _0x1e5951;}const dbName='nezumi-sketch-db',storeName='keyval';function openDB(){return new Promise((_0x249cc0,_0x5e1f76)=>{const _0x18931e=a0_0x331c,_0x413db9=indexedDB['open'](dbName,0x1);_0x413db9[_0x18931e(0x34c)]=()=>{const _0x5c8f65=_0x18931e;_0x413db9['result'][_0x5c8f65(0x32b)](storeName);},_0x413db9['onsuccess']=()=>_0x249cc0(_0x413db9[_0x18931e(0x258)]),_0x413db9[_0x18931e(0x363)]=()=>_0x5e1f76(_0x413db9[_0x18931e(0x1da)]);});}async function idbSet(_0x1d3a0c,_0x3ebe02){const _0xd5fcd9=await openDB();return new Promise((_0xb01f70,_0xc0044f)=>{const _0x93f424=a0_0x331c,_0x51764b=_0xd5fcd9[_0x93f424(0x282)](storeName,_0x93f424(0x2cc));_0x51764b[_0x93f424(0x285)](storeName)[_0x93f424(0x256)](_0x3ebe02,_0x1d3a0c),_0x51764b['oncomplete']=()=>_0xb01f70(),_0x51764b[_0x93f424(0x363)]=()=>_0xc0044f(_0x51764b[_0x93f424(0x1da)]);});}async function idbGet(_0x28a47f){const _0x5ae578=await openDB();return new Promise((_0x41ce4e,_0x4b3400)=>{const _0x26998c=a0_0x331c,_0x4e81bf=_0x5ae578[_0x26998c(0x282)](storeName,_0x26998c(0x289)),_0x3c099e=_0x4e81bf['objectStore'](storeName)[_0x26998c(0x25e)](_0x28a47f);_0x3c099e[_0x26998c(0x33b)]=()=>_0x41ce4e(_0x3c099e[_0x26998c(0x258)]),_0x3c099e[_0x26998c(0x363)]=()=>_0x4b3400(_0x3c099e[_0x26998c(0x1da)]);});}async function idbDelete(_0x358221){const _0x3860a3=await openDB();return new Promise((_0x198839,_0x3434e4)=>{const _0x10235f=a0_0x331c,_0x57a6fc=_0x3860a3['transaction'](storeName,_0x10235f(0x2cc));_0x57a6fc['objectStore'](storeName)[_0x10235f(0x1df)](_0x358221),_0x57a6fc['oncomplete']=()=>_0x198839(),_0x57a6fc[_0x10235f(0x363)]=()=>_0x3434e4(_0x57a6fc[_0x10235f(0x1da)]);});}async function idbClear(){const _0x36a8a3=await openDB();return new Promise((_0x2f2179,_0x4d1eaf)=>{const _0x44b94f=a0_0x331c,_0x17221f=_0x36a8a3[_0x44b94f(0x282)](storeName,'readwrite');_0x17221f[_0x44b94f(0x285)](storeName)[_0x44b94f(0x2d5)](),_0x17221f[_0x44b94f(0x34a)]=()=>_0x2f2179(),_0x17221f[_0x44b94f(0x363)]=()=>_0x4d1eaf(_0x17221f[_0x44b94f(0x1da)]);});}function saveProjectFile(){const _0x54bcdc=a0_0x32e0c3,_0x132911={'projects':projects[_0x54bcdc(0x2b7)](_0x4c3f78=>({'width':_0x4c3f78[_0x54bcdc(0x268)],'height':_0x4c3f78[_0x54bcdc(0x2e8)],'name':_0x4c3f78[_0x54bcdc(0x30a)]||'','activeFrame':_0x4c3f78[_0x54bcdc(0x2ba)],'frames':_0x4c3f78['frames'][_0x54bcdc(0x2b7)](_0x469747=>({'activeLayer':_0x469747[_0x54bcdc(0x2de)],'layers':_0x469747[_0x54bcdc(0x292)][_0x54bcdc(0x2b7)](_0x5ac3a8=>_0x5ac3a8[_0x54bcdc(0x378)]())}))})),'activeProject':activeProject},_0x138a40=new Blob([JSON['stringify'](_0x132911)],{'type':_0x54bcdc(0x37f)}),_0x2fb1fb=document[_0x54bcdc(0x345)]('a');_0x2fb1fb[_0x54bcdc(0x253)]='nezumi-sketch.msketch',_0x2fb1fb['href']=URL[_0x54bcdc(0x2da)](_0x138a40),_0x2fb1fb['click']();}function saveProjectFile(){const _0x228ec5=a0_0x32e0c3,_0x1a41df={'projects':projects[_0x228ec5(0x2b7)](_0x51a288=>({'width':_0x51a288[_0x228ec5(0x268)],'height':_0x51a288[_0x228ec5(0x2e8)],'name':_0x51a288['name']||'','activeFrame':_0x51a288[_0x228ec5(0x2ba)],'frames':_0x51a288[_0x228ec5(0x358)][_0x228ec5(0x2b7)](_0x68fbb1=>({'activeLayer':_0x68fbb1['activeLayer'],'layers':_0x68fbb1[_0x228ec5(0x292)]['map'](_0x1f0d00=>_0x1f0d00[_0x228ec5(0x378)]())}))})),'activeProject':activeProject},_0x386620=new Blob([JSON[_0x228ec5(0x1de)](_0x1a41df)],{'type':_0x228ec5(0x37f)}),_0x542e84=document[_0x228ec5(0x345)]('a');_0x542e84[_0x228ec5(0x253)]='nezumi-sketch.msketch',_0x542e84['href']=URL[_0x228ec5(0x2da)](_0x386620),_0x542e84['click']();}async function saveProjectToIDB(){const _0x46b127=a0_0x32e0c3,_0x310252={'projects':projects[_0x46b127(0x2b7)](_0x4f3005=>({'width':_0x4f3005['width'],'height':_0x4f3005['height'],'name':_0x4f3005[_0x46b127(0x30a)]||'','activeFrame':_0x4f3005['activeFrame'],'frames':_0x4f3005[_0x46b127(0x358)]['map'](_0xf8d586=>({'activeLayer':_0xf8d586[_0x46b127(0x2de)],'layers':_0xf8d586[_0x46b127(0x292)][_0x46b127(0x2b7)](_0x5dd661=>_0x5dd661['toDataURL']())}))})),'activeProject':activeProject};try{await idbSet(_0x46b127(0x2b9),_0x310252),console[_0x46b127(0x2a4)]('„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíIndexedDB„Å´‰øùÂ≠ò„Åó„Åü„ÉÅ„É•„ÉºÔºÅ');}catch(_0x3f8569){console[_0x46b127(0x1da)](_0x46b127(0x226),_0x3f8569);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x302),_0x410156=>{saveProjectToIDB();});function loadProjectFile(_0x45c91e){const _0x5401bd=a0_0x32e0c3,_0x50d5ed=_0x45c91e[_0x5401bd(0x314)][_0x5401bd(0x2e9)][0x0];if(!_0x50d5ed)return;if(_0x50d5ed['type']&&_0x50d5ed['type'][_0x5401bd(0x2a8)](_0x5401bd(0x2be))){loadStandaloneFromFile(_0x50d5ed)['then'](_0x58404c=>{const _0x1f0dbf=_0x5401bd;alert(_0x1f0dbf(0x248)+(_0x58404c[_0x1f0dbf(0x30a)]||'ÁîªÂÉè'));})['catch'](_0x5ec8ac=>{const _0x7ecfa6=_0x5401bd;console[_0x7ecfa6(0x280)](_0x5ec8ac),alert('„Éï„Ç°„Ç§„É´„Å´„Éó„É≠„Ç∏„Çß„ÇØ„Éà„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇË™≠„ÅøËæº„Åø„Åß„Åç„Åæ„Åõ„Çì„ÄÇ');});return;}const _0x139893=new FileReader();_0x139893[_0x5401bd(0x2b5)]=function(_0xec90da){const _0x41b7b4=_0x5401bd;try{const _0x14e025=JSON['parse'](_0xec90da[_0x41b7b4(0x314)]['result']);projects=_0x14e025['projects'][_0x41b7b4(0x2b7)]((_0x1e312f,_0x10af6a)=>{const _0x272255=_0x41b7b4;let _0x6e387a=createProject(_0x1e312f['width'],_0x1e312f[_0x272255(0x2e8)],_0x1e312f[_0x272255(0x30a)]||'ÁîªÂÉè'+(_0x10af6a+0x1));return _0x6e387a[_0x272255(0x358)]=_0x1e312f[_0x272255(0x358)]['map'](_0x5ca584=>{const _0x4e5809=_0x272255;let _0x3d2c55={'layers':[],'activeLayer':_0x5ca584[_0x4e5809(0x2de)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x5f2224=0x0;_0x5f2224<_0x5ca584['layers']['length'];_0x5f2224++){let _0x87c262=new Image();_0x87c262[_0x4e5809(0x2c1)]=_0x5ca584[_0x4e5809(0x292)][_0x5f2224];let _0x17d29b=document['createElement'](_0x4e5809(0x217));_0x17d29b[_0x4e5809(0x268)]=_0x1e312f[_0x4e5809(0x268)]*cellSize,_0x17d29b[_0x4e5809(0x2e8)]=_0x1e312f[_0x4e5809(0x2e8)]*cellSize,_0x87c262[_0x4e5809(0x2b5)]=()=>{const _0x1b1717=_0x4e5809;let _0x50f9ef=_0x17d29b[_0x1b1717(0x375)]('2d');_0x50f9ef['clearRect'](0x0,0x0,_0x17d29b[_0x1b1717(0x268)],_0x17d29b[_0x1b1717(0x2e8)]),_0x50f9ef[_0x1b1717(0x2cf)](_0x87c262,0x0,0x0);},_0x87c262[_0x4e5809(0x2b5)](),_0x3d2c55[_0x4e5809(0x292)]['push'](_0x17d29b),_0x3d2c55['layerHistories']['push']([]),_0x3d2c55[_0x4e5809(0x2ec)][_0x4e5809(0x1ff)]([]);}return _0x3d2c55;}),_0x6e387a[_0x272255(0x2ba)]=_0x1e312f['activeFrame'],_0x6e387a[_0x272255(0x30a)]=_0x1e312f[_0x272255(0x30a)]||'ÁîªÂÉè'+(_0x10af6a+0x1),_0x6e387a;}),activeProject=_0x14e025[_0x41b7b4(0x365)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x458693){alert(_0x41b7b4(0x318));}},_0x139893[_0x5401bd(0x228)](_0x50d5ed);}async function loadProjectFromIDB(){const _0x510db6=a0_0x32e0c3;try{const _0x119618=await idbGet(_0x510db6(0x2b9));if(!_0x119618)return;projects=_0x119618[_0x510db6(0x241)][_0x510db6(0x2b7)]((_0x366b99,_0x106e45)=>{const _0x22a5ce=_0x510db6;let _0x202f45=createProject(_0x366b99[_0x22a5ce(0x268)],_0x366b99[_0x22a5ce(0x2e8)],_0x366b99[_0x22a5ce(0x30a)]||'ÁîªÂÉè'+(_0x106e45+0x1));return _0x202f45[_0x22a5ce(0x358)]=_0x366b99['frames'][_0x22a5ce(0x2b7)](_0x4c2628=>{const _0x4179b8=_0x22a5ce;let _0x409d57={'layers':[],'activeLayer':_0x4c2628[_0x4179b8(0x2de)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x164328=0x0;_0x164328<_0x4c2628[_0x4179b8(0x292)][_0x4179b8(0x1ed)];_0x164328++){let _0x4fac24=new Image();_0x4fac24[_0x4179b8(0x2c1)]=_0x4c2628[_0x4179b8(0x292)][_0x164328];let _0x102d6f=document[_0x4179b8(0x345)](_0x4179b8(0x217));_0x102d6f[_0x4179b8(0x268)]=_0x366b99[_0x4179b8(0x268)]*cellSize,_0x102d6f[_0x4179b8(0x2e8)]=_0x366b99[_0x4179b8(0x2e8)]*cellSize,_0x4fac24[_0x4179b8(0x2b5)]=()=>{const _0x2918cb=_0x4179b8;let _0x5c0d10=_0x102d6f['getContext']('2d');_0x5c0d10[_0x2918cb(0x2e7)](0x0,0x0,_0x102d6f[_0x2918cb(0x268)],_0x102d6f[_0x2918cb(0x2e8)]),_0x5c0d10[_0x2918cb(0x2cf)](_0x4fac24,0x0,0x0);},_0x409d57[_0x4179b8(0x292)][_0x4179b8(0x1ff)](_0x102d6f),_0x409d57['layerHistories']['push']([]),_0x409d57[_0x4179b8(0x2ec)][_0x4179b8(0x1ff)]([]);}return _0x409d57;}),_0x202f45[_0x22a5ce(0x2ba)]=_0x366b99[_0x22a5ce(0x2ba)],_0x202f45['name']=_0x366b99['name']||'ÁîªÂÉè'+(_0x106e45+0x1),_0x202f45;}),activeProject=_0x119618[_0x510db6(0x365)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool('pen'),console[_0x510db6(0x2a4)](_0x510db6(0x218));}catch(_0x168b39){alert(_0x510db6(0x325)),console[_0x510db6(0x1da)](_0x168b39);}}function wait(_0x31353d){return new Promise(_0x2fdb45=>setTimeout(_0x2fdb45,_0x31353d));}function initCanvas(){const _0x3efc65=a0_0x32e0c3,_0x42b0c5=parseInt(0x10),_0x3a65cf=parseInt(0x10);let _0x3965d3=getCurrentProject();_0x3965d3['width']=_0x42b0c5,_0x3965d3[_0x3efc65(0x2e8)]=_0x3a65cf,canvas[_0x3efc65(0x268)]=_0x42b0c5*cellSize,canvas[_0x3efc65(0x2e8)]=_0x3a65cf*cellSize,_0x3965d3['layers']=[],_0x3965d3[_0x3efc65(0x281)]=[],_0x3965d3[_0x3efc65(0x2ec)]=[];let _0x732cc2=document[_0x3efc65(0x345)](_0x3efc65(0x217));_0x732cc2[_0x3efc65(0x268)]=_0x42b0c5*cellSize,_0x732cc2[_0x3efc65(0x2e8)]=_0x3a65cf*cellSize,_0x3965d3['layers']['push'](_0x732cc2),_0x3965d3[_0x3efc65(0x281)]['push']([]),_0x3965d3[_0x3efc65(0x2ec)][_0x3efc65(0x1ff)]([]),_0x3965d3[_0x3efc65(0x2de)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas['onmousedown']=null,canvas[_0x3efc65(0x328)]=null,canvas[_0x3efc65(0x301)]=null,canvas[_0x3efc65(0x30b)]=null,canvas[_0x3efc65(0x333)]=null,canvas[_0x3efc65(0x2c6)]=null,canvas[_0x3efc65(0x224)]=null,canvas['ontouchcancel']=null,canvas[_0x3efc65(0x1f0)](_0x3efc65(0x2ad),handleTouchStart),canvas['removeEventListener'](_0x3efc65(0x2e3),handleTouchMove),canvas['removeEventListener']('touchend',handleTouchEnd),canvas[_0x3efc65(0x1f0)](_0x3efc65(0x29f),handleTouchEnd),canvas[_0x3efc65(0x31b)]=handleMouseDown,canvas[_0x3efc65(0x328)]=handleMouseMove,canvas[_0x3efc65(0x301)]=handleMouseUp,canvas[_0x3efc65(0x30b)]=handleMouseUp,canvas['ontouchstart']=handleTouchStart,canvas['ontouchmove']=handleTouchMove,canvas[_0x3efc65(0x224)]=handleTouchEnd,canvas[_0x3efc65(0x237)]=handleTouchEnd,canvas[_0x3efc65(0x1e4)]('touchstart',handleTouchStart,{'passive':![]}),canvas['addEventListener'](_0x3efc65(0x2e3),handleTouchMove,{'passive':![]}),canvas[_0x3efc65(0x1e4)](_0x3efc65(0x364),handleTouchEnd,{'passive':![]}),canvas[_0x3efc65(0x1e4)](_0x3efc65(0x29f),handleTouchEnd,{'passive':![]});}function createPalette(){const _0x5c8ca2=a0_0x32e0c3,_0x1d3dfe=document[_0x5c8ca2(0x332)]('color-palette');if(!_0x1d3dfe)return;_0x1d3dfe[_0x5c8ca2(0x309)]='',PALETTE_COLORS['forEach']((_0x39647c,_0x3d67fc)=>{const _0x3ef697=_0x5c8ca2,_0x1fa4bf=document[_0x3ef697(0x345)]('button');_0x1fa4bf[_0x3ef697(0x2fd)]=_0x3ef697(0x295);if(_0x39647c===_0x3ef697(0x34d)||_0x39647c===_0x3ef697(0x30e))_0x1fa4bf['style']['background']=_0x3ef697(0x24a),_0x1fa4bf[_0x3ef697(0x37b)]='ÈÄèÊòé',_0x1fa4bf['innerHTML']=_0x3ef697(0x36b);else{if(/^#([0-9a-f]{8})$/i[_0x3ef697(0x22e)](_0x39647c)){const [_0xd2b759,_0x32fe45,_0x3733bf,_0x4b0079]=hexToRgba(_0x39647c),_0x23648a=_0x4b0079/0xff;_0x1fa4bf[_0x3ef697(0x25a)][_0x3ef697(0x31e)]=_0x3ef697(0x229)+_0xd2b759+','+_0x32fe45+','+_0x3733bf+','+_0x23648a+')',_0x1fa4bf[_0x3ef697(0x37b)]=rgbaToHex(_0xd2b759,_0x32fe45,_0x3733bf)+'\x20'+Math[_0x3ef697(0x35b)](_0x23648a*0x64)+'%';}else _0x1fa4bf[_0x3ef697(0x25a)]['background']=_0x39647c,_0x1fa4bf['title']=_0x39647c;}_0x1fa4bf[_0x3ef697(0x373)]=()=>{const _0x254f2d=_0x3ef697;if(_0x39647c===_0x254f2d(0x34d)||_0x39647c===_0x254f2d(0x30e)){currentColor=_0x254f2d(0x34d),currentAlpha=0x0;const _0x28f790=document[_0x254f2d(0x332)](_0x254f2d(0x2b2));if(_0x28f790)_0x28f790[_0x254f2d(0x2dd)]=_0x254f2d(0x22a);}else{if(/^#([0-9a-f]{8})$/i['test'](_0x39647c)){const [_0x28f7d1,_0x1cbf40,_0xfcadf2,_0x5b55a1]=hexToRgba(_0x39647c);currentAlpha=_0x5b55a1/0xff,currentColor=rgbaToHex(_0x28f7d1,_0x1cbf40,_0xfcadf2);const _0x252eff=document[_0x254f2d(0x332)]('colorPicker');if(_0x252eff)_0x252eff[_0x254f2d(0x2dd)]=currentColor;}else{currentColor=_0x39647c,currentAlpha=0x1;const _0x5b188e=document['getElementById'](_0x254f2d(0x2b2));if(_0x5b188e)_0x5b188e['value']=_0x39647c;}}document[_0x254f2d(0x357)](_0x254f2d(0x2df))['forEach'](_0x4205a9=>_0x4205a9[_0x254f2d(0x234)][_0x254f2d(0x244)]('selected')),_0x1fa4bf[_0x254f2d(0x234)][_0x254f2d(0x2bb)](_0x254f2d(0x1f1));};if(_0x3d67fc!==0x0){const _0x407b63=document['createElement'](_0x3ef697(0x2e1));_0x407b63[_0x3ef697(0x341)]='√ó',_0x407b63[_0x3ef697(0x2fd)]=_0x3ef697(0x297),_0x407b63[_0x3ef697(0x37b)]=_0x3ef697(0x205),_0x407b63[_0x3ef697(0x373)]=_0x32df7a=>{const _0x1a9b5a=_0x3ef697;_0x32df7a[_0x1a9b5a(0x238)](),PALETTE_COLORS[_0x1a9b5a(0x1ed)]>0x2&&(PALETTE_COLORS['splice'](_0x3d67fc,0x1),createPalette());},_0x1fa4bf[_0x3ef697(0x377)](_0x407b63);}_0x1d3dfe[_0x3ef697(0x377)](_0x1fa4bf);});const _0x5d1d24=document['createElement'](_0x5c8ca2(0x1f8));_0x5d1d24[_0x5c8ca2(0x2fd)]=_0x5c8ca2(0x25c),_0x5d1d24[_0x5c8ca2(0x37b)]='„Éë„É¨„ÉÉ„Éà„Å´Ëâ≤„ÇíËøΩÂä†',_0x5d1d24[_0x5c8ca2(0x309)]='+',_0x5d1d24[_0x5c8ca2(0x373)]=_0x2a5c87=>{const _0x3381c9=_0x5c8ca2;_0x2a5c87[_0x3381c9(0x238)]();if(document[_0x3381c9(0x332)](_0x3381c9(0x20f)))return;const _0x5dcf04=document[_0x3381c9(0x345)]('div');_0x5dcf04['id']=_0x3381c9(0x20f),_0x5dcf04[_0x3381c9(0x25a)][_0x3381c9(0x283)]=_0x3381c9(0x2cb),_0x5dcf04['style']['left']='0',_0x5dcf04[_0x3381c9(0x25a)][_0x3381c9(0x31c)]='0',_0x5dcf04['style'][_0x3381c9(0x268)]=_0x3381c9(0x211),_0x5dcf04[_0x3381c9(0x25a)][_0x3381c9(0x2e8)]=_0x3381c9(0x1e0),_0x5dcf04['style'][_0x3381c9(0x2c4)]=_0x3381c9(0x26b),_0x5dcf04[_0x3381c9(0x25a)]['alignItems']=_0x3381c9(0x36f),_0x5dcf04['style'][_0x3381c9(0x310)]='center',_0x5dcf04[_0x3381c9(0x25a)][_0x3381c9(0x242)]='4000',_0x5dcf04[_0x3381c9(0x25a)]['background']=_0x3381c9(0x1ee),_0x5dcf04[_0x3381c9(0x309)]=_0x3381c9(0x2db),document[_0x3381c9(0x27e)][_0x3381c9(0x377)](_0x5dcf04),_0x5dcf04['querySelector'](_0x3381c9(0x2c2))['onclick']=()=>{const _0x33e001=_0x3381c9;_0x5dcf04[_0x33e001(0x330)]('#addDlgAlpha')[_0x33e001(0x2dd)]=0x0,_0x5dcf04[_0x33e001(0x330)](_0x33e001(0x26d))['value']=_0x33e001(0x22a);},_0x5dcf04[_0x3381c9(0x330)](_0x3381c9(0x296))[_0x3381c9(0x373)]=()=>{const _0x2e6e41=_0x3381c9,_0x5a2b4e=_0x5dcf04[_0x2e6e41(0x330)](_0x2e6e41(0x26d))[_0x2e6e41(0x2dd)],_0x26d667=Math[_0x2e6e41(0x2fe)](0x0,Math['min'](0x64,parseInt(_0x5dcf04[_0x2e6e41(0x330)](_0x2e6e41(0x23a))[_0x2e6e41(0x2dd)],0xa)||0x0));if(_0x26d667===0x0){if(PALETTE_COLORS[0x0]==='transparent')PALETTE_COLORS[_0x2e6e41(0x2bd)](0x1,0x0,_0x2e6e41(0x34d));else PALETTE_COLORS[_0x2e6e41(0x2a9)](_0x2e6e41(0x34d));}else{const _0xedf75b=Math['round'](_0x26d667/0x64*0xff),_0xe32b79=_0xedf75b['toString'](0x10)['padStart'](0x2,'0');PALETTE_COLORS[_0x2e6e41(0x2a9)](''+_0x5a2b4e+_0xe32b79);}if(PALETTE_COLORS[_0x2e6e41(0x1ed)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x2e6e41(0x2f5)](0x0,0x18);savePaletteToDB(),createPalette(),_0x5dcf04['remove']();},_0x5dcf04[_0x3381c9(0x330)](_0x3381c9(0x269))[_0x3381c9(0x373)]=()=>_0x5dcf04['remove'](),_0x5dcf04[_0x3381c9(0x1e4)](_0x3381c9(0x2d6),_0x5e4930=>{const _0xbd5f2d=_0x3381c9;if(_0x5e4930[_0xbd5f2d(0x314)]===_0x5dcf04)_0x5dcf04[_0xbd5f2d(0x244)]();});},_0x1d3dfe[_0x5c8ca2(0x351)](_0x5d1d24,_0x1d3dfe[_0x5c8ca2(0x321)]);const _0x914dc7=document[_0x5c8ca2(0x332)](_0x5c8ca2(0x267));if(_0x914dc7)_0x914dc7[_0x5c8ca2(0x25a)][_0x5c8ca2(0x2c4)]='';}function setAlpha(_0x5e8327){const _0x24557e=a0_0x32e0c3;let _0x2fa4e7=Math[_0x24557e(0x2fe)](0x0,Math[_0x24557e(0x24d)](0x64,parseInt(_0x5e8327,0xa)||0x0));currentAlpha=_0x2fa4e7/0x64;}async function savePaletteToDB(){const _0x1ce905=a0_0x32e0c3;try{await idbSet('nezumi-palette',PALETTE_COLORS);}catch(_0x13e76d){console[_0x1ce905(0x1da)](_0x1ce905(0x360),_0x13e76d);}}async function loadPaletteFromDB(){const _0x3d031c=a0_0x32e0c3;try{const _0x468439=await idbGet(_0x3d031c(0x291));Array[_0x3d031c(0x255)](_0x468439)&&_0x468439['length']&&(PALETTE_COLORS=_0x468439);}catch(_0x429c4d){console[_0x3d031c(0x1da)](_0x3d031c(0x1ef),_0x429c4d);}}document[a0_0x32e0c3(0x1e4)]('DOMContentLoaded',()=>{const _0x4ee3e0=a0_0x32e0c3,_0x4eda69=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x2b2)),_0x3256cb=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x1f9));function _0x11c1ea(){const _0x5649de=_0x4ee3e0;if(document[_0x5649de(0x332)](_0x5649de(0x271)))return;const _0x5dbb6f=document['createElement']('div');_0x5dbb6f['id']=_0x5649de(0x271),_0x5dbb6f[_0x5649de(0x25a)][_0x5649de(0x283)]='fixed',_0x5dbb6f[_0x5649de(0x25a)][_0x5649de(0x230)]='0',_0x5dbb6f[_0x5649de(0x25a)][_0x5649de(0x31c)]='0',_0x5dbb6f[_0x5649de(0x25a)][_0x5649de(0x268)]='100vw',_0x5dbb6f[_0x5649de(0x25a)][_0x5649de(0x2e8)]=_0x5649de(0x1e0),_0x5dbb6f[_0x5649de(0x25a)][_0x5649de(0x2c4)]=_0x5649de(0x26b),_0x5dbb6f[_0x5649de(0x25a)][_0x5649de(0x366)]='center',_0x5dbb6f[_0x5649de(0x25a)]['justifyContent']=_0x5649de(0x36f),_0x5dbb6f['style'][_0x5649de(0x242)]=_0x5649de(0x1e3),_0x5dbb6f[_0x5649de(0x25a)][_0x5649de(0x31e)]=_0x5649de(0x1ee),_0x5dbb6f[_0x5649de(0x309)]=_0x5649de(0x200)+(currentColor===_0x5649de(0x34d)?'#000000':currentColor)+_0x5649de(0x335)+Math[_0x5649de(0x35b)](currentAlpha*0x64)+_0x5649de(0x356),document['body'][_0x5649de(0x377)](_0x5dbb6f),_0x5dbb6f[_0x5649de(0x330)](_0x5649de(0x1fb))[_0x5649de(0x373)]=()=>{const _0x118197=_0x5649de,_0x4999f1=_0x5dbb6f[_0x118197(0x330)](_0x118197(0x37e));_0x4999f1[_0x118197(0x2dd)]=0x0,_0x5dbb6f[_0x118197(0x330)](_0x118197(0x30f))[_0x118197(0x2dd)]=_0x118197(0x22a);},_0x5dbb6f['querySelector'](_0x5649de(0x33c))[_0x5649de(0x373)]=()=>{const _0x58ba68=_0x5649de,_0x3b3a67=_0x5dbb6f[_0x58ba68(0x330)](_0x58ba68(0x30f))[_0x58ba68(0x2dd)],_0x3aaf7b=Math[_0x58ba68(0x2fe)](0x0,Math['min'](0x64,parseInt(_0x5dbb6f[_0x58ba68(0x330)](_0x58ba68(0x37e))[_0x58ba68(0x2dd)],0xa)||0x0));if(_0x3aaf7b===0x0){currentAlpha=0x0,currentColor=_0x58ba68(0x34d);if(_0x4eda69)_0x4eda69[_0x58ba68(0x2dd)]='#000000';}else{currentAlpha=_0x3aaf7b/0x64,currentColor=_0x3b3a67;if(_0x4eda69)_0x4eda69[_0x58ba68(0x2dd)]=_0x3b3a67;}document['querySelectorAll'](_0x58ba68(0x2df))[_0x58ba68(0x381)](_0x1ce4e1=>_0x1ce4e1[_0x58ba68(0x234)][_0x58ba68(0x244)](_0x58ba68(0x1f1))),_0x5dbb6f['remove']();},_0x5dbb6f[_0x5649de(0x330)](_0x5649de(0x1db))[_0x5649de(0x373)]=()=>_0x5dbb6f['remove'](),_0x5dbb6f[_0x5649de(0x1e4)](_0x5649de(0x2d6),_0x13af02=>{if(_0x13af02['target']===_0x5dbb6f)_0x5dbb6f['remove']();});}_0x4eda69&&(_0x4eda69[_0x4ee3e0(0x32c)]=_0x4333ff=>{const _0x5e8d1e=_0x4ee3e0,_0x175b39=_0x4333ff[_0x5e8d1e(0x314)][_0x5e8d1e(0x2dd)];if(/^#([0-9a-f]{8})$/i[_0x5e8d1e(0x22e)](_0x175b39)){const _0x3c5c39='#'+_0x175b39[_0x5e8d1e(0x2f5)](0x1,0x7),_0x481a47=_0x175b39[_0x5e8d1e(0x2f5)](0x7,0x9);currentColor=_0x3c5c39,currentAlpha=parseInt(_0x481a47,0x10)/0xff;if(currentAlpha===0x0)currentColor=_0x5e8d1e(0x34d);_0x4eda69[_0x5e8d1e(0x2dd)]=_0x3c5c39;}else currentColor=_0x175b39;document[_0x5e8d1e(0x357)](_0x5e8d1e(0x2df))[_0x5e8d1e(0x381)](_0x253388=>_0x253388[_0x5e8d1e(0x234)][_0x5e8d1e(0x244)](_0x5e8d1e(0x1f1)));});_0x3256cb&&(_0x3256cb[_0x4ee3e0(0x373)]=_0x11c1ea);const _0x514524=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x267));if(_0x514524){const _0x4c0bdc=scanImageColors();renderScanPanel(_0x4c0bdc),_0x514524[_0x4ee3e0(0x25a)][_0x4ee3e0(0x2c4)]='';}const _0x2ef981=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x2a6)),_0x2e573a=document[_0x4ee3e0(0x332)]('pasteLayerBtn'),_0x10ca42=document['getElementById'](_0x4ee3e0(0x29b)),_0x4cc387=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x273)),_0x231937=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x315)),_0x21bb32=document['getElementById']('nudgeDownBtn'),_0x173209=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x320)),_0x3d2d1f=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x2d3)),_0x45999b=document[_0x4ee3e0(0x332)](_0x4ee3e0(0x287));if(_0x2ef981)_0x2ef981[_0x4ee3e0(0x373)]=()=>{copyLayer();};if(_0x2e573a)_0x2e573a[_0x4ee3e0(0x373)]=()=>{pasteLayer();};if(_0x2e573a)_0x2e573a['disabled']=!copiedLayerDataUrl;if(_0x10ca42)_0x10ca42[_0x4ee3e0(0x373)]=()=>{exportLayersAsGif();};if(_0x4cc387)_0x4cc387['onclick']=()=>{exportLayersAsApng();};if(_0x231937)_0x231937[_0x4ee3e0(0x373)]=()=>{nudgeActiveLayer(0x0,-parseInt(_0x45999b['value']||0x1,0xa));};if(_0x21bb32)_0x21bb32[_0x4ee3e0(0x373)]=()=>{const _0x146adf=_0x4ee3e0;nudgeActiveLayer(0x0,parseInt(_0x45999b[_0x146adf(0x2dd)]||0x1,0xa));};if(_0x173209)_0x173209[_0x4ee3e0(0x373)]=()=>{nudgeActiveLayer(-parseInt(_0x45999b['value']||0x1,0xa),0x0);};if(_0x3d2d1f)_0x3d2d1f[_0x4ee3e0(0x373)]=()=>{const _0x254f2f=_0x4ee3e0;nudgeActiveLayer(parseInt(_0x45999b[_0x254f2f(0x2dd)]||0x1,0xa),0x0);};(function _0x425bab(){const _0x2ffcf1=_0x4ee3e0,_0x4c254c=document[_0x2ffcf1(0x332)](_0x2ffcf1(0x327));if(typeof JSZip!=='undefined'){if(_0x4c254c)_0x4c254c[_0x2ffcf1(0x2b0)]=![];return;}const _0x698037=document['createElement'](_0x2ffcf1(0x371));_0x698037[_0x2ffcf1(0x2c1)]=_0x2ffcf1(0x35a),_0x698037['onload']=()=>{const _0x5ca177=_0x2ffcf1;console[_0x5ca177(0x1fe)](_0x5ca177(0x214));if(_0x4c254c)_0x4c254c[_0x5ca177(0x2b0)]=![];},_0x698037['onerror']=()=>{const _0x399552=_0x2ffcf1;console[_0x399552(0x280)](_0x399552(0x300)),_0x4c254c&&(_0x4c254c['disabled']=!![],_0x4c254c[_0x399552(0x37b)]=_0x399552(0x1f3));},document[_0x2ffcf1(0x2ac)][_0x2ffcf1(0x377)](_0x698037);}());let _0x5de007={'active':![],'startCell':null,'offsetCells':{'x':0x0,'y':0x0}};document[_0x4ee3e0(0x1e4)](_0x4ee3e0(0x2fb),_0x36eb2e=>{const _0x1d279d=_0x4ee3e0,_0x4ebff9=_0x36eb2e[_0x1d279d(0x314)],_0x4f84e1=_0x4ebff9&&(_0x4ebff9[_0x1d279d(0x2e0)]===_0x1d279d(0x2a2)||_0x4ebff9[_0x1d279d(0x2e0)]==='TEXTAREA'||_0x4ebff9[_0x1d279d(0x213)]);if(!_0x4f84e1){const _0x244490=_0x36eb2e[_0x1d279d(0x359)]||_0x36eb2e[_0x1d279d(0x2f6)];if(_0x244490&&(_0x36eb2e[_0x1d279d(0x380)]==='z'||_0x36eb2e[_0x1d279d(0x380)]==='Z')){_0x36eb2e[_0x1d279d(0x23c)]();_0x36eb2e[_0x1d279d(0x36e)]?redo():undo();return;}if(_0x244490&&(_0x36eb2e[_0x1d279d(0x380)]==='y'||_0x36eb2e[_0x1d279d(0x380)]==='Y')){_0x36eb2e[_0x1d279d(0x23c)](),redo();return;}}if(currentTool===_0x1d279d(0x2f3)){const _0x2d69fe=(_0x36eb2e[_0x1d279d(0x36e)]?0x5:0x1)*(parseInt(_0x45999b?_0x45999b['value']:0x1,0xa)||0x1);if(_0x36eb2e['key']===_0x1d279d(0x352))_0x36eb2e[_0x1d279d(0x23c)](),nudgeActiveLayer(-_0x2d69fe,0x0);else{if(_0x36eb2e[_0x1d279d(0x380)]==='ArrowRight')_0x36eb2e['preventDefault'](),nudgeActiveLayer(_0x2d69fe,0x0);else{if(_0x36eb2e['key']===_0x1d279d(0x21b))_0x36eb2e['preventDefault'](),nudgeActiveLayer(0x0,-_0x2d69fe);else _0x36eb2e[_0x1d279d(0x380)]===_0x1d279d(0x29c)&&(_0x36eb2e[_0x1d279d(0x23c)](),nudgeActiveLayer(0x0,_0x2d69fe));}}}if(!_0x4f84e1&&_0x36eb2e['key']&&_0x36eb2e[_0x1d279d(0x380)][_0x1d279d(0x2bc)]()==='i'){_0x36eb2e['preventDefault'](),colorPickMode=!colorPickMode;if(canvas)canvas[_0x1d279d(0x25a)][_0x1d279d(0x1e9)]=colorPickMode?_0x1d279d(0x2ee):_0x1d279d(0x2a1);return;}}),function _0x599003(){const _0x2a85f1=_0x4ee3e0,_0x4374c0=document[_0x2a85f1(0x332)](_0x2a85f1(0x327));if(typeof JSZip!==_0x2a85f1(0x31a)){if(_0x4374c0)_0x4374c0[_0x2a85f1(0x2b0)]=![];return;}const _0x16fb2b=document[_0x2a85f1(0x345)](_0x2a85f1(0x371));_0x16fb2b[_0x2a85f1(0x2c1)]='https://cdn.jsdelivr.net/npm/jszip@3.10.0/dist/jszip.min.js',_0x16fb2b[_0x2a85f1(0x2b5)]=()=>{const _0x1eec13=_0x2a85f1;if(_0x4374c0)_0x4374c0[_0x1eec13(0x2b0)]=![];},_0x16fb2b[_0x2a85f1(0x363)]=()=>{const _0x473769=_0x2a85f1;_0x4374c0&&(_0x4374c0[_0x473769(0x2b0)]=!![],_0x4374c0[_0x473769(0x37b)]='ZIP„Ç®„ÇØ„Çπ„Éù„Éº„Éà„ÅØÂà©Áî®„Åß„Åç„Åæ„Åõ„ÇìÔºà„É©„Ç§„Éñ„É©„É™Ë™≠„ÅøËæº„Åø„Å´Â§±ÊïóÔºâ');},document['head'][_0x2a85f1(0x377)](_0x16fb2b);}();});function shiftLayerCanvas(_0x32197d,_0x2cb6d2,_0x61d5c7){const _0x63a0b3=a0_0x32e0c3;if(!_0x32197d)return;const _0x3829a8=_0x32197d[_0x63a0b3(0x268)],_0x278785=_0x32197d[_0x63a0b3(0x2e8)],_0x66bf5a=document[_0x63a0b3(0x345)](_0x63a0b3(0x217));_0x66bf5a['width']=_0x3829a8,_0x66bf5a[_0x63a0b3(0x2e8)]=_0x278785;const _0x157dea=_0x66bf5a[_0x63a0b3(0x375)]('2d');_0x157dea[_0x63a0b3(0x2e7)](0x0,0x0,_0x3829a8,_0x278785),_0x157dea[_0x63a0b3(0x2cf)](_0x32197d,0x0,0x0);const _0x43be87=_0x32197d[_0x63a0b3(0x375)]('2d');_0x43be87[_0x63a0b3(0x2e7)](0x0,0x0,_0x3829a8,_0x278785),_0x43be87[_0x63a0b3(0x2cf)](_0x66bf5a,_0x2cb6d2,_0x61d5c7);}function nudgeActiveLayer(_0x4f3cf0,_0x35d1fa){const _0x1947da=a0_0x32e0c3,_0x7ffec5=getCurrentProject();if(!_0x7ffec5)return;const _0x5252e3=getCurrentFrame();if(!_0x5252e3)return;const _0x62be99=_0x5252e3[_0x1947da(0x2de)];if(_0x62be99==null)return;const _0x15ee8a=(_0x4f3cf0||0x0)*cellSize,_0x1020c6=(_0x35d1fa||0x0)*cellSize;if(_0x15ee8a===0x0&&_0x1020c6===0x0)return;saveHistory(),shiftLayerCanvas(_0x5252e3[_0x1947da(0x292)][_0x62be99],_0x15ee8a,_0x1020c6),redrawAll();}function startLayerMove(_0x5b026b){const _0x348c26=a0_0x32e0c3;layerMoveState[_0x348c26(0x227)]=!![];const _0x1c3b83=getCanvasCoords(_0x5b026b);layerMoveState[_0x348c26(0x286)]={'x':Math['floor'](_0x1c3b83['x']/cellSize),'y':Math[_0x348c26(0x33e)](_0x1c3b83['y']/cellSize)},layerMoveState['offsetCells']={'x':0x0,'y':0x0};}function updateLayerMove(_0x3a5dd3){const _0x36664f=a0_0x32e0c3;if(!layerMoveState['active'])return;const _0x5932de=getCanvasCoords(_0x3a5dd3),_0x1878f8={'x':Math['floor'](_0x5932de['x']/cellSize),'y':Math[_0x36664f(0x33e)](_0x5932de['y']/cellSize)};layerMoveState[_0x36664f(0x35c)]['x']=_0x1878f8['x']-layerMoveState['startCell']['x'],layerMoveState[_0x36664f(0x35c)]['y']=_0x1878f8['y']-layerMoveState[_0x36664f(0x286)]['y'],redrawAll();const _0x38f529=getCurrentFrame();if(!_0x38f529)return;const _0x5ab8e0=_0x38f529[_0x36664f(0x2de)];if(_0x5ab8e0==null)return;ctx[_0x36664f(0x33f)](),ctx[_0x36664f(0x2d8)](layerMoveState[_0x36664f(0x35c)]['x']*cellSize,layerMoveState[_0x36664f(0x35c)]['y']*cellSize),ctx[_0x36664f(0x2cf)](_0x38f529[_0x36664f(0x292)][_0x5ab8e0],0x0,0x0),ctx[_0x36664f(0x23b)]();}function endLayerMove(_0x3c6c9e){const _0x26edb1=a0_0x32e0c3;if(!layerMoveState[_0x26edb1(0x227)])return;const _0x448828=layerMoveState[_0x26edb1(0x35c)]['x']*cellSize,_0x3afa5b=layerMoveState[_0x26edb1(0x35c)]['y']*cellSize;if(_0x448828!==0x0||_0x3afa5b!==0x0){saveHistory();const _0x357adf=getCurrentFrame();_0x357adf&&typeof _0x357adf[_0x26edb1(0x2de)]===_0x26edb1(0x24b)&&shiftLayerCanvas(_0x357adf[_0x26edb1(0x292)][_0x357adf[_0x26edb1(0x2de)]],_0x448828,_0x3afa5b);}layerMoveState[_0x26edb1(0x227)]=![],layerMoveState['startCell']=null,layerMoveState['offsetCells']={'x':0x0,'y':0x0},redrawAll();}const origHandleMouseDown=handleMouseDown;handleMouseDown=function(_0x80fd22){const _0x14830a=a0_0x32e0c3;if(colorPickMode){onCanvasColorPick(_0x80fd22);return;}if(currentTool===_0x14830a(0x2f3)){startLayerMove(_0x80fd22);return;}origHandleMouseDown(_0x80fd22);};const origHandleMouseMove=handleMouseMove;handleMouseMove=function(_0x2e94af){const _0x508e13=a0_0x32e0c3;if(currentTool===_0x508e13(0x2f3)){updateLayerMove(_0x2e94af);return;}origHandleMouseMove(_0x2e94af);};const origHandleMouseUp=handleMouseUp;handleMouseUp=function(_0xe15337){if(currentTool==='moveLayer'){endLayerMove(_0xe15337);return;}origHandleMouseUp(_0xe15337);};function scanImageColors(){const _0x3bbe38=a0_0x32e0c3,_0x4fb4c5=getCurrentProject(),_0x5873de=getCurrentFrame();if(!_0x4fb4c5||!_0x5873de)return[];const _0x12bc01=new Map(),_0xeb60aa=_0x4fb4c5['width'],_0x3788fb=_0x4fb4c5[_0x3bbe38(0x2e8)];for(let _0x1202b3=0x0;_0x1202b3<_0x3788fb;_0x1202b3++){for(let _0x5851ea=0x0;_0x5851ea<_0xeb60aa;_0x5851ea++){const _0x34969e=Math[_0x3bbe38(0x24d)](Math[_0x3bbe38(0x33e)](_0x5851ea*cellSize+cellSize/0x2),canvas[_0x3bbe38(0x268)]-0x1),_0x4c4258=Math['min'](Math['floor'](_0x1202b3*cellSize+cellSize/0x2),canvas['height']-0x1),_0x12621d=ctx[_0x3bbe38(0x36d)](_0x34969e,_0x4c4258,0x1,0x1)[_0x3bbe38(0x270)],_0x4601b5=_0x12621d[0x0]+','+_0x12621d[0x1]+','+_0x12621d[0x2]+','+_0x12621d[0x3];_0x12bc01[_0x3bbe38(0x326)](_0x4601b5,(_0x12bc01[_0x3bbe38(0x25e)](_0x4601b5)||0x0)+0x1);}}const _0x4f8c00=Array[_0x3bbe38(0x212)](_0x12bc01[_0x3bbe38(0x36c)]())['map'](([_0x2d29af,_0x2bceba])=>{const _0x327747=_0x3bbe38,[_0x29749d,_0x24bf90,_0x17efcb,_0x3f08ad]=_0x2d29af['split'](',')[_0x327747(0x2b7)](_0x32fd8f=>parseInt(_0x32fd8f,0xa));return{'r':_0x29749d,'g':_0x24bf90,'b':_0x17efcb,'a':_0x3f08ad,'count':_0x2bceba};})['sort']((_0x2279ff,_0x27d175)=>_0x27d175[_0x3bbe38(0x2c3)]-_0x2279ff[_0x3bbe38(0x2c3)]);return _0x4f8c00;}function renderScanPanel(_0x30a381){const _0x56876f=a0_0x32e0c3,_0x3c2015=document['getElementById'](_0x56876f(0x267));if(!_0x3c2015)return;_0x3c2015[_0x56876f(0x309)]='';if(!_0x30a381||_0x30a381[_0x56876f(0x1ed)]===0x0){_0x3c2015[_0x56876f(0x341)]=_0x56876f(0x22d);return;}const _0xec4385=document[_0x56876f(0x345)](_0x56876f(0x2a7));_0xec4385[_0x56876f(0x2fd)]='used-color-grid',_0x30a381['forEach'](_0x355011=>{const _0x25f821=_0x56876f,_0x15151e=document[_0x25f821(0x345)](_0x25f821(0x2a7));_0x15151e['className']=_0x25f821(0x243);const _0x48e121=document[_0x25f821(0x345)](_0x25f821(0x2a7));_0x48e121[_0x25f821(0x2fd)]=_0x25f821(0x209);_0x355011['a']===0x0?_0x48e121[_0x25f821(0x234)]['add'](_0x25f821(0x369)):_0x48e121['style'][_0x25f821(0x31e)]=_0x25f821(0x306)+_0x355011['r']+','+_0x355011['g']+','+_0x355011['b']+','+(_0x355011['a']/0xff)[_0x25f821(0x303)](0x2)+')';const _0x579b4b=document[_0x25f821(0x345)]('div');_0x579b4b['className']=_0x25f821(0x272),_0x579b4b[_0x25f821(0x341)]=_0x355011['a']===0x0?'ÈÄèÊòé':_0x355011['a']===0xff?rgbaToHex(_0x355011['r'],_0x355011['g'],_0x355011['b']):_0x25f821(0x306)+_0x355011['r']+','+_0x355011['g']+','+_0x355011['b']+','+(_0x355011['a']/0xff)[_0x25f821(0x303)](0x2)+')';const _0x181473=document[_0x25f821(0x345)]('div');_0x181473[_0x25f821(0x2fd)]=_0x25f821(0x1f7),_0x181473['textContent']=_0x355011[_0x25f821(0x2c3)]+'„Çª„É´',_0x15151e[_0x25f821(0x377)](_0x48e121),_0x15151e[_0x25f821(0x377)](_0x579b4b),_0x15151e[_0x25f821(0x377)](_0x181473),_0x15151e[_0x25f821(0x373)]=()=>{const _0x14f8fb=_0x25f821;if(_0x355011['a']===0x0){currentColor=_0x14f8fb(0x34d);const _0x2e077b=document[_0x14f8fb(0x332)](_0x14f8fb(0x2b2));if(_0x2e077b)_0x2e077b[_0x14f8fb(0x2dd)]=_0x14f8fb(0x22a);setAlpha(0x0);}else{currentColor=rgbaToHex(_0x355011['r'],_0x355011['g'],_0x355011['b']);const _0x490c15=document[_0x14f8fb(0x332)](_0x14f8fb(0x2b2));if(_0x490c15)_0x490c15[_0x14f8fb(0x2dd)]=currentColor;setAlpha(Math[_0x14f8fb(0x35b)](_0x355011['a']/0xff*0x64));}_0x3c2015['style']['display']='none';},_0xec4385[_0x25f821(0x377)](_0x15151e);}),_0x3c2015['appendChild'](_0xec4385);}function rgbaToHex(_0x343bd8,_0x45c08f,_0x239abe){const _0x3c4da3=a0_0x32e0c3;return'#'+[_0x343bd8,_0x45c08f,_0x239abe][_0x3c4da3(0x2b7)](_0x39026f=>_0x39026f['toString'](0x10)['padStart'](0x2,'0'))[_0x3c4da3(0x27b)]('');}async function convertToGIF(_0x11e432,_0x295eab=0xc8,_0x3f3aca=a0_0x32e0c3(0x2e4)){const _0x2c6e17=a0_0x32e0c3,_0x2e2439=new window['GIF']({'workers':0x2,'quality':0xa,'workerScript':_0x2c6e17(0x354)});_0x11e432[_0x2c6e17(0x381)](_0xba115=>_0x2e2439[_0x2c6e17(0x30c)](_0xba115,{'delay':_0x295eab})),_0x2e2439['on'](_0x2c6e17(0x30d),_0x3065c7=>{const _0x5d7172=_0x2c6e17,_0x2a7b8f=URL['createObjectURL'](_0x3065c7),_0x3f13df=document[_0x5d7172(0x345)]('a');_0x3f13df[_0x5d7172(0x1f5)]=_0x2a7b8f,_0x3f13df[_0x5d7172(0x253)]=_0x3f3aca,document[_0x5d7172(0x27e)][_0x5d7172(0x377)](_0x3f13df),_0x3f13df['click'](),setTimeout(()=>{const _0x8b57a4=_0x5d7172;document[_0x8b57a4(0x27e)][_0x8b57a4(0x2e6)](_0x3f13df),URL['revokeObjectURL'](_0x2a7b8f);},0x3e8);}),_0x2e2439[_0x2c6e17(0x342)]();}function makeAPNGBlob(_0x273d89,_0x771adc,_0x16eb34,_0x578f7a=0xc8){const _0x9422ae=a0_0x32e0c3,_0x3785e2=[],_0x3cfbe8=[],_0x4c9fcd=document['createElement'](_0x9422ae(0x217));_0x4c9fcd['width']=_0x771adc,_0x4c9fcd['height']=_0x16eb34;const _0x13905a=_0x4c9fcd['getContext']('2d');_0x273d89['forEach'](_0x54779d=>{const _0x2c3329=_0x9422ae;_0x13905a[_0x2c3329(0x2e7)](0x0,0x0,_0x771adc,_0x16eb34),_0x13905a[_0x2c3329(0x2cf)](_0x54779d,0x0,0x0,_0x771adc,_0x16eb34);const _0x3fe970=_0x13905a[_0x2c3329(0x36d)](0x0,0x0,_0x771adc,_0x16eb34)[_0x2c3329(0x270)][_0x2c3329(0x28e)];_0x3785e2[_0x2c3329(0x1ff)](_0x3fe970),_0x3cfbe8[_0x2c3329(0x1ff)](_0x578f7a);});const _0x3acf0a=window[_0x9422ae(0x2ed)]['encode'](_0x3785e2,_0x771adc,_0x16eb34,0x0,_0x3cfbe8);return new Blob([_0x3acf0a],{'type':_0x9422ae(0x2d4)});}function convertToAPNG(_0x1bfa66,_0x3c30d2,_0x180d5a,_0x11585f=0xc8,_0x21e472=a0_0x32e0c3(0x2f1)){const _0x4a494b=a0_0x32e0c3,_0x349b0a=makeAPNGBlob(_0x1bfa66,_0x3c30d2,_0x180d5a,_0x11585f),_0xfde407=URL[_0x4a494b(0x2da)](_0x349b0a),_0x19e759=document[_0x4a494b(0x345)]('a');_0x19e759[_0x4a494b(0x1f5)]=_0xfde407,_0x19e759[_0x4a494b(0x253)]=_0x21e472,document[_0x4a494b(0x27e)][_0x4a494b(0x377)](_0x19e759),_0x19e759[_0x4a494b(0x2d6)](),setTimeout(()=>{const _0x36c015=_0x4a494b;document[_0x36c015(0x27e)][_0x36c015(0x2e6)](_0x19e759),URL[_0x36c015(0x32d)](_0xfde407);},0x3e8);}async function loadImages(_0x3635a9){const _0x5ef3bf=a0_0x32e0c3,_0x6af51a=await Promise['all'](_0x3635a9[_0x5ef3bf(0x2b7)](_0x5a494e=>{return new Promise(_0x2c703a=>{const _0x3ea3d8=a0_0x331c,_0x20520=new Image();_0x20520[_0x3ea3d8(0x225)]=_0x3ea3d8(0x216),_0x20520[_0x3ea3d8(0x2c1)]=_0x5a494e,_0x20520[_0x3ea3d8(0x2b5)]=()=>_0x2c703a(_0x20520);});}));return _0x6af51a;}function exportSpriteSheetDialog(){const _0x95fb1f=a0_0x32e0c3;let _0x478d7d=prompt(_0x95fb1f(0x260),'1');if(_0x478d7d===null)return;let _0x4b59ca=Math[_0x95fb1f(0x2fe)](0x1,parseInt(_0x478d7d,0xa)||0x1),_0x24b80f=prompt(_0x95fb1f(0x374),'0');if(_0x24b80f===null)return;let _0x59f56f=Math[_0x95fb1f(0x2fe)](0x0,parseInt(_0x24b80f,0xa)||0x0);exportSpriteSheet(_0x4b59ca,_0x59f56f);}function exportSpriteSheet(_0xbc943c=0x1,_0x13f168=0x0){const _0x5006b6=a0_0x32e0c3,_0x265685=getCurrentProject();if(!_0x265685){alert(_0x5006b6(0x220));return;}const _0x6ffe8e=_0x265685[_0x5006b6(0x358)];if(!_0x6ffe8e||_0x6ffe8e['length']===0x0){alert(_0x5006b6(0x206));return;}const _0x12ad7e=_0x265685['width']*cellSize,_0x5a2481=_0x265685[_0x5006b6(0x2e8)]*cellSize,_0x95feaa=_0x12ad7e*_0x6ffe8e[_0x5006b6(0x1ed)]*_0xbc943c+Math[_0x5006b6(0x2fe)](0x0,_0x6ffe8e[_0x5006b6(0x1ed)]-0x1)*_0x13f168,_0x2039f9=_0x5a2481*_0xbc943c,_0x238264=document[_0x5006b6(0x345)](_0x5006b6(0x217));_0x238264[_0x5006b6(0x268)]=_0x95feaa,_0x238264['height']=_0x2039f9;const _0x31a59b=_0x238264[_0x5006b6(0x375)]('2d');_0x31a59b[_0x5006b6(0x2e7)](0x0,0x0,_0x238264[_0x5006b6(0x268)],_0x238264[_0x5006b6(0x2e8)]);let _0x990ee2=0x0;for(let _0x2fadeb=0x0;_0x2fadeb<_0x6ffe8e[_0x5006b6(0x1ed)];_0x2fadeb++){let _0x49fce3=document[_0x5006b6(0x345)](_0x5006b6(0x217));_0x49fce3[_0x5006b6(0x268)]=_0x12ad7e,_0x49fce3[_0x5006b6(0x2e8)]=_0x5a2481;let _0xdc153a=_0x49fce3[_0x5006b6(0x375)]('2d');for(let _0x3cf9d9=0x0;_0x3cf9d9<_0x6ffe8e[_0x2fadeb][_0x5006b6(0x292)][_0x5006b6(0x1ed)];_0x3cf9d9++){_0xdc153a['drawImage'](_0x6ffe8e[_0x2fadeb][_0x5006b6(0x292)][_0x3cf9d9],0x0,0x0);}_0xbc943c===0x1&&_0x13f168===0x0?(_0x31a59b[_0x5006b6(0x2cf)](_0x49fce3,_0x990ee2,0x0),_0x990ee2+=_0x12ad7e):(_0x31a59b[_0x5006b6(0x2cf)](_0x49fce3,0x0,0x0,_0x12ad7e,_0x5a2481,_0x990ee2,0x0,_0x12ad7e*_0xbc943c,_0x5a2481*_0xbc943c),_0x990ee2+=_0x12ad7e*_0xbc943c),_0x2fadeb<_0x6ffe8e[_0x5006b6(0x1ed)]-0x1&&_0x13f168>0x0&&(_0x990ee2+=_0x13f168);}const _0x1c7d8d=(_0x265685[_0x5006b6(0x30a)]||_0x5006b6(0x311))[_0x5006b6(0x252)](/[\\/:*?"<>|]/g,'_'),_0x1acdd9=document[_0x5006b6(0x345)]('a');_0x1acdd9[_0x5006b6(0x1f5)]=_0x238264[_0x5006b6(0x378)](_0x5006b6(0x20b)),_0x1acdd9['download']=_0x1c7d8d+_0x5006b6(0x262),document[_0x5006b6(0x27e)]['appendChild'](_0x1acdd9),_0x1acdd9['click'](),setTimeout(()=>{const _0x3dc010=_0x5006b6;document['body'][_0x3dc010(0x2e6)](_0x1acdd9);},0x3e8);}const NEZUMI_METADATA_SIG='\x0a---NEZUMI_METADATA_START---\x0a';function appendMetadataToBlob(_0x1bf4e8,_0x4ce673){const _0x1f336e=a0_0x32e0c3,_0x100995=new TextEncoder(),_0x20c3a0=_0x100995['encode'](NEZUMI_METADATA_SIG),_0xd620ef=_0x100995[_0x1f336e(0x20a)](JSON[_0x1f336e(0x1de)](_0x4ce673));return new Blob([_0x1bf4e8,_0x20c3a0,_0xd620ef],{'type':_0x1bf4e8[_0x1f336e(0x337)]||_0x1f336e(0x2e5)});}function indexOfSubarray(_0x46df49,_0x58c85e){const _0x426554=a0_0x32e0c3;for(let _0x1d57dd=0x0;_0x1d57dd<=_0x46df49[_0x426554(0x1ed)]-_0x58c85e[_0x426554(0x1ed)];_0x1d57dd++){let _0x18546b=!![];for(let _0x13e7cd=0x0;_0x13e7cd<_0x58c85e['length'];_0x13e7cd++){if(_0x46df49[_0x1d57dd+_0x13e7cd]!==_0x58c85e[_0x13e7cd]){_0x18546b=![];break;}}if(_0x18546b)return _0x1d57dd;}return-0x1;}function extractMetadataFromArrayBuffer(_0x332d06){const _0xc60d8f=a0_0x32e0c3,_0x1594e1=new TextEncoder()[_0xc60d8f(0x20a)](NEZUMI_METADATA_SIG),_0x30c485=new Uint8Array(_0x332d06),_0x4fa8b3=indexOfSubarray(_0x30c485,_0x1594e1);if(_0x4fa8b3===-0x1)return null;const _0x3d82fe=_0x30c485[_0xc60d8f(0x28b)](_0x4fa8b3+_0x1594e1[_0xc60d8f(0x1ed)]);try{const _0x432310=new TextDecoder()[_0xc60d8f(0x23f)](_0x3d82fe);return JSON[_0xc60d8f(0x37c)](_0x432310);}catch(_0x4d4df2){return null;}}async function exportStandalone(){const _0x5990a2=a0_0x32e0c3;let _0xd1d3e4=getCurrentProject(),_0x5ece18=_0xd1d3e4[_0x5990a2(0x358)],_0x172ceb=_0xd1d3e4[_0x5990a2(0x268)]*cellSize,_0x59fa9f=_0xd1d3e4[_0x5990a2(0x2e8)]*cellSize;const _0x42550e=_0x5ece18[_0x5990a2(0x2b7)](_0x59c95a=>{const _0x5765fc=_0x5990a2;let _0x148e2a=document[_0x5765fc(0x345)](_0x5765fc(0x217));_0x148e2a[_0x5765fc(0x268)]=_0x172ceb,_0x148e2a[_0x5765fc(0x2e8)]=_0x59fa9f;let _0x36f8d3=_0x148e2a[_0x5765fc(0x375)]('2d');for(let _0x493a80=0x0;_0x493a80<_0x59c95a[_0x5765fc(0x292)][_0x5765fc(0x1ed)];_0x493a80++){_0x36f8d3[_0x5765fc(0x2cf)](_0x59c95a[_0x5765fc(0x292)][_0x493a80],0x0,0x0);}let _0x276646=new Image();return _0x276646[_0x5765fc(0x2c1)]=_0x148e2a['toDataURL'](_0x5765fc(0x20b)),_0x276646;});await Promise[_0x5990a2(0x26c)](_0x42550e[_0x5990a2(0x2b7)](_0x2b82c3=>new Promise(_0x51ebb2=>{const _0x3aae02=_0x5990a2;_0x2b82c3[_0x3aae02(0x2b5)]=_0x51ebb2;})))[_0x5990a2(0x2f4)](()=>{});const _0x1e3672=(_0xd1d3e4[_0x5990a2(0x30a)]||_0x5990a2(0x323))['replace'](/[\\/:*?"<>|]/g,'_'),_0x572af4=makeAPNGBlob(_0x42550e,_0x172ceb,_0x59fa9f,animationDelay),_0x3cde46={'type':'nezumi-standalone','version':0x1,'project':{'width':_0xd1d3e4[_0x5990a2(0x268)],'height':_0xd1d3e4[_0x5990a2(0x2e8)],'name':_0xd1d3e4[_0x5990a2(0x30a)]||'','activeFrame':_0xd1d3e4[_0x5990a2(0x2ba)],'frames':_0xd1d3e4[_0x5990a2(0x358)]['map'](_0x319705=>({'activeLayer':_0x319705['activeLayer'],'layers':_0x319705['layers']['map'](_0x258d0b=>_0x258d0b[_0x5990a2(0x378)]())}))}},_0x1702fc=appendMetadataToBlob(_0x572af4,_0x3cde46),_0x330726=URL[_0x5990a2(0x2da)](_0x1702fc),_0x1fc047=document[_0x5990a2(0x345)]('a');_0x1fc047['href']=_0x330726,_0x1fc047['download']=_0x1e3672+_0x5990a2(0x298),document[_0x5990a2(0x27e)][_0x5990a2(0x377)](_0x1fc047),_0x1fc047[_0x5990a2(0x2d6)](),setTimeout(()=>{const _0x4d824d=_0x5990a2;document[_0x4d824d(0x27e)]['removeChild'](_0x1fc047),URL[_0x4d824d(0x32d)](_0x330726);},0x3e8);}function loadStandaloneFromFile(_0x26ec14){return new Promise((_0x17f02d,_0x370a7e)=>{const _0x591c91=a0_0x331c,_0x456e36=new FileReader();_0x456e36[_0x591c91(0x2b5)]=_0x1c3e74=>{const _0x338364=_0x591c91,_0x127d6f=_0x1c3e74[_0x338364(0x314)][_0x338364(0x258)],_0x361f13=extractMetadataFromArrayBuffer(_0x127d6f);if(!_0x361f13||!_0x361f13[_0x338364(0x307)]){_0x370a7e(new Error(_0x338364(0x319)));return;}const _0x1bc538=_0x361f13[_0x338364(0x307)];try{const _0x6f8fe5=createProject(_0x1bc538[_0x338364(0x268)],_0x1bc538[_0x338364(0x2e8)],_0x1bc538[_0x338364(0x30a)]||'ÁîªÂÉè');_0x6f8fe5[_0x338364(0x358)]=_0x1bc538[_0x338364(0x358)][_0x338364(0x2b7)](_0x2a19f7=>{const _0x5d66cb=_0x338364;let _0x3ddde4={'layers':[],'activeLayer':_0x2a19f7[_0x5d66cb(0x2de)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x31a9ac=0x0;_0x31a9ac<_0x2a19f7[_0x5d66cb(0x292)]['length'];_0x31a9ac++){let _0x3cfb47=new Image();_0x3cfb47[_0x5d66cb(0x2c1)]=_0x2a19f7[_0x5d66cb(0x292)][_0x31a9ac];let _0x24ade0=document[_0x5d66cb(0x345)](_0x5d66cb(0x217));_0x24ade0[_0x5d66cb(0x268)]=_0x1bc538['width']*cellSize,_0x24ade0[_0x5d66cb(0x2e8)]=_0x1bc538['height']*cellSize,_0x3cfb47[_0x5d66cb(0x2b5)]=()=>{const _0x58d2e4=_0x5d66cb;let _0xcc8403=_0x24ade0[_0x58d2e4(0x375)]('2d');_0xcc8403[_0x58d2e4(0x2e7)](0x0,0x0,_0x24ade0[_0x58d2e4(0x268)],_0x24ade0[_0x58d2e4(0x2e8)]),_0xcc8403[_0x58d2e4(0x2cf)](_0x3cfb47,0x0,0x0);},_0x3ddde4['layers'][_0x5d66cb(0x1ff)](_0x24ade0);}return _0x3ddde4;}),projects[_0x338364(0x1ff)](_0x6f8fe5),activeProject=projects['length']-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x17f02d(_0x6f8fe5);}catch(_0x4738be){_0x370a7e(_0x4738be);}},_0x456e36[_0x591c91(0x363)]=_0x706ee1=>_0x370a7e(_0x706ee1),_0x456e36[_0x591c91(0x1e7)](_0x26ec14);});}function toggleSection(_0x32ef91){const _0x450cb8=a0_0x32e0c3,_0x6ff8ea=document[_0x450cb8(0x332)](_0x32ef91),_0x346170=_0x6ff8ea[_0x450cb8(0x330)]('.section-content'),_0x3cb7f6=_0x6ff8ea['querySelector']('.toggle-btn');_0x346170[_0x450cb8(0x25a)][_0x450cb8(0x2c4)]===_0x450cb8(0x2f0)?(_0x346170[_0x450cb8(0x25a)][_0x450cb8(0x2c4)]='',_0x3cb7f6[_0x450cb8(0x341)]='‚ñº'):(_0x346170[_0x450cb8(0x25a)][_0x450cb8(0x2c4)]=_0x450cb8(0x2f0),_0x3cb7f6['textContent']='‚ñ≤');}document[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x29a),()=>{const _0x298ad8=a0_0x32e0c3;document[_0x298ad8(0x357)](_0x298ad8(0x313))['forEach'](_0x5beac4=>_0x5beac4['style'][_0x298ad8(0x2c4)]=''),document['querySelectorAll']('.section.collapsible\x20.toggle-btn')[_0x298ad8(0x381)](_0x43d85b=>_0x43d85b[_0x298ad8(0x341)]='‚ñº');}),window['addEventListener'](a0_0x32e0c3(0x2eb),updateMenuBtnDisplay),document[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x29a),updateMenuBtnDisplay);function toggleSideMenu(_0x3b21b0){const _0xdb6dfc=a0_0x32e0c3,_0x54221a=document[_0xdb6dfc(0x332)](_0xdb6dfc(0x288)),_0xd34f63=document[_0xdb6dfc(0x332)]('main-container'),_0x5c20e5=document[_0xdb6dfc(0x332)]('menu-toggle-btn'),_0x5df350=document[_0xdb6dfc(0x332)](_0xdb6dfc(0x26a)),_0x3ccdf7=_0x54221a[_0xdb6dfc(0x234)][_0xdb6dfc(0x362)](_0xdb6dfc(0x324));let _0x22d4c5=typeof _0x3b21b0===_0xdb6dfc(0x27a)?_0x3b21b0:!_0x3ccdf7;_0x22d4c5?(_0x54221a[_0xdb6dfc(0x234)][_0xdb6dfc(0x2bb)](_0xdb6dfc(0x324)),_0xd34f63[_0xdb6dfc(0x234)][_0xdb6dfc(0x2bb)]('sidebar-open'),document[_0xdb6dfc(0x27e)][_0xdb6dfc(0x25a)][_0xdb6dfc(0x2af)]='hidden',document[_0xdb6dfc(0x27e)][_0xdb6dfc(0x25a)][_0xdb6dfc(0x322)]=_0xdb6dfc(0x2f0),window[_0xdb6dfc(0x35e)]<=0x384&&(_0x5df350[_0xdb6dfc(0x25a)][_0xdb6dfc(0x2c4)]=_0xdb6dfc(0x26e),_0x5c20e5['style'][_0xdb6dfc(0x2c4)]=_0xdb6dfc(0x2f0))):(_0x54221a['classList'][_0xdb6dfc(0x244)]('open'),_0xd34f63[_0xdb6dfc(0x234)][_0xdb6dfc(0x244)](_0xdb6dfc(0x336)),document[_0xdb6dfc(0x27e)][_0xdb6dfc(0x25a)][_0xdb6dfc(0x2af)]='',document[_0xdb6dfc(0x27e)][_0xdb6dfc(0x25a)][_0xdb6dfc(0x322)]='',window[_0xdb6dfc(0x35e)]<=0x384&&(_0x5df350['style'][_0xdb6dfc(0x2c4)]=_0xdb6dfc(0x2f0),_0x5c20e5[_0xdb6dfc(0x25a)][_0xdb6dfc(0x2c4)]=_0xdb6dfc(0x26e)));}function updateMenuBtnDisplay(){const _0x38b6fb=a0_0x32e0c3,_0x57ba8f=document[_0x38b6fb(0x332)](_0x38b6fb(0x288)),_0x1d24a6=document[_0x38b6fb(0x332)](_0x38b6fb(0x33d)),_0x5ba9cd=document[_0x38b6fb(0x332)](_0x38b6fb(0x329)),_0x322f3e=document['getElementById'](_0x38b6fb(0x26a)),_0x8229e2=document[_0x38b6fb(0x332)]('toolsToggleBtn');if(window['innerWidth']>0x384){_0x57ba8f[_0x38b6fb(0x234)][_0x38b6fb(0x244)](_0x38b6fb(0x324)),_0x1d24a6[_0x38b6fb(0x234)][_0x38b6fb(0x244)](_0x38b6fb(0x336)),_0x322f3e[_0x38b6fb(0x25a)][_0x38b6fb(0x2c4)]=_0x38b6fb(0x2f0),_0x5ba9cd[_0x38b6fb(0x25a)][_0x38b6fb(0x2c4)]=_0x38b6fb(0x2f0);if(_0x8229e2)_0x8229e2[_0x38b6fb(0x25a)][_0x38b6fb(0x2c4)]=window['innerWidth']>0x44c?_0x38b6fb(0x2f0):_0x38b6fb(0x339);document['body'][_0x38b6fb(0x25a)][_0x38b6fb(0x2af)]='',document[_0x38b6fb(0x27e)][_0x38b6fb(0x25a)]['touchAction']='';}else{_0x57ba8f[_0x38b6fb(0x234)][_0x38b6fb(0x362)]('open')?(_0x322f3e['style'][_0x38b6fb(0x2c4)]='block',_0x5ba9cd[_0x38b6fb(0x25a)][_0x38b6fb(0x2c4)]=_0x38b6fb(0x2f0)):(_0x322f3e[_0x38b6fb(0x25a)]['display']=_0x38b6fb(0x2f0),_0x5ba9cd[_0x38b6fb(0x25a)]['display']=_0x38b6fb(0x26e));if(_0x8229e2)_0x8229e2[_0x38b6fb(0x25a)][_0x38b6fb(0x2c4)]=_0x38b6fb(0x339);}}document[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x2d6),function(_0x209081){const _0x153096=a0_0x32e0c3;if(window['innerWidth']>0x384)return;const _0x23258d=document['getElementById'](_0x153096(0x288)),_0x5c61ab=document['getElementById']('main-container'),_0x4bb08c=document[_0x153096(0x332)](_0x153096(0x329)),_0x5ac497=document[_0x153096(0x332)](_0x153096(0x26a));!_0x23258d[_0x153096(0x362)](_0x209081[_0x153096(0x314)])&&_0x209081['target']!==_0x4bb08c&&_0x209081[_0x153096(0x314)]!==_0x5ac497&&(_0x23258d[_0x153096(0x234)]['remove'](_0x153096(0x324)),_0x5c61ab[_0x153096(0x234)][_0x153096(0x244)]('sidebar-open'),_0x5ac497[_0x153096(0x25a)][_0x153096(0x2c4)]=_0x153096(0x2f0),_0x4bb08c[_0x153096(0x25a)][_0x153096(0x2c4)]=_0x153096(0x26e),document['body'][_0x153096(0x25a)][_0x153096(0x2af)]='',document[_0x153096(0x27e)]['style']['touchAction']='');}),document[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x29a),()=>{const _0x4dbb37=a0_0x32e0c3,_0x340fec=document[_0x4dbb37(0x332)](_0x4dbb37(0x338)),_0x7f9fcf=document[_0x4dbb37(0x332)](_0x4dbb37(0x21a));_0x340fec&&_0x7f9fcf&&(_0x340fec[_0x4dbb37(0x373)]=()=>_0x7f9fcf['classList']['toggle']('open'));}),(function(){const _0x1098f6=a0_0x32e0c3;try{(location[_0x1098f6(0x32a)][_0x1098f6(0x2d1)](/index\.html$/)||location[_0x1098f6(0x32a)]==='/'||location['pathname']==='/index.html')&&(!localStorage['getItem'](_0x1098f6(0x21c))&&(localStorage[_0x1098f6(0x259)]('nezumi_about_visited','1'),location[_0x1098f6(0x1f5)]=_0x1098f6(0x2fa)));}catch(_0x4ab6d8){}}());let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x2fb),_0x50b9b4=>{const _0x5839cd=a0_0x32e0c3;if(_0x50b9b4[_0x5839cd(0x380)]===_0x5839cd(0x24e))shiftPressed=!![];}),document[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x1e5),_0xd8727d=>{if(_0xd8727d['key']==='Shift')shiftPressed=![];}),canvas['addEventListener']('pointerdown',_0xa66882=>{const _0x400397=a0_0x32e0c3;if(_0xa66882[_0x400397(0x274)]===_0x400397(0x2c9))return;currentTool===_0x400397(0x24c)||shiftPressed?(dragging=!![],isDrawing=![],startX=_0xa66882[_0x400397(0x305)],startY=_0xa66882[_0x400397(0x304)],lastX=posX,lastY=posY,canvas['setPointerCapture'](_0xa66882[_0x400397(0x348)]),canvas['style'][_0x400397(0x1e9)]=_0x400397(0x1eb)):(isDrawing=!![],pointerDownX=_0xa66882[_0x400397(0x305)],pointerDownY=_0xa66882[_0x400397(0x304)],handleMouseDown(_0xa66882),canvas[_0x400397(0x249)](_0xa66882['pointerId']));}),canvas[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x2aa),_0x5621f3=>{const _0x207a95=a0_0x32e0c3;if(_0x5621f3[_0x207a95(0x274)]==='touch')return;if(dragging)posX=lastX+(_0x5621f3[_0x207a95(0x305)]-startX),posY=lastY+(_0x5621f3[_0x207a95(0x304)]-startY),updateTransform();else{if(isDrawing){if(currentTool!=='pen'){const _0x6f4c14=Math[_0x207a95(0x2b1)](_0x5621f3[_0x207a95(0x305)]-pointerDownX),_0x2319ab=Math['abs'](_0x5621f3['clientY']-pointerDownY);if(_0x6f4c14>=PAN_CANCEL_DISTANCE||_0x2319ab>=PAN_CANCEL_DISTANCE){isDrawing=![];try{handleMouseUp(_0x5621f3);}catch(_0x172a1c){}return;}}handleMouseMove(_0x5621f3);}}}),canvas[a0_0x32e0c3(0x1e4)]('pointerup',_0x1536a9=>{const _0x3e48a4=a0_0x32e0c3;if(_0x1536a9[_0x3e48a4(0x274)]===_0x3e48a4(0x2c9))return;dragging=![];isDrawing&&handleMouseUp(_0x1536a9);isDrawing=![];try{canvas['releasePointerCapture'](_0x1536a9['pointerId']);}catch(_0x5a89c1){}if(currentTool==='pan')canvas[_0x3e48a4(0x25a)][_0x3e48a4(0x1e9)]=_0x3e48a4(0x219);else canvas['style'][_0x3e48a4(0x1e9)]=_0x3e48a4(0x2ee);}),wrapper[a0_0x32e0c3(0x1e4)](a0_0x32e0c3(0x20e),_0x7cfdc1=>{const _0x260220=a0_0x32e0c3;_0x7cfdc1['preventDefault']();const _0x48a493=canvas[_0x260220(0x349)](),_0x317fb8=_0x7cfdc1[_0x260220(0x305)],_0x2d415f=_0x7cfdc1[_0x260220(0x304)],_0x5981be=(_0x317fb8-_0x48a493[_0x260220(0x230)]-posX)/scale,_0x41869e=(_0x2d415f-_0x48a493[_0x260220(0x31c)]-posY)/scale,_0x5556f6=_0x7cfdc1[_0x260220(0x1e1)]>0x0?0.9:1.1;let _0x35cb95=scale*_0x5556f6;_0x35cb95=Math[_0x260220(0x24d)](Math[_0x260220(0x2fe)](_0x35cb95,0.2),0x5),posX=_0x317fb8-_0x48a493[_0x260220(0x230)]-_0x5981be*_0x35cb95,posY=_0x2d415f-_0x48a493['top']-_0x41869e*_0x35cb95,scale=_0x35cb95,updateTransform();const _0x446a3c=document[_0x260220(0x332)](_0x260220(0x347)),_0x2b91c3=document[_0x260220(0x332)]('zoomValue');if(_0x446a3c)_0x446a3c[_0x260220(0x2dd)]=Math[_0x260220(0x35b)](scale*0x64);if(_0x2b91c3)_0x2b91c3[_0x260220(0x341)]=Math[_0x260220(0x35b)](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x51bcf0=a0_0x32e0c3;canvas[_0x51bcf0(0x25a)][_0x51bcf0(0x236)]='translate('+posX+_0x51bcf0(0x23e)+posY+_0x51bcf0(0x334)+scale+')';}function setZoomValue(_0x19823a){const _0x247793=a0_0x32e0c3,_0x2f79bd=Math[_0x247793(0x2fe)](0x14,Math[_0x247793(0x24d)](0x1f4,parseInt(_0x19823a,0xa)||0x64)),_0x3f4596=_0x2f79bd/0x64;scale=_0x3f4596,updateTransform();const _0x144958=document['getElementById'](_0x247793(0x347)),_0x4dc5eb=document[_0x247793(0x332)](_0x247793(0x2b8));if(_0x144958)_0x144958[_0x247793(0x2dd)]=_0x2f79bd;if(_0x4dc5eb)_0x4dc5eb[_0x247793(0x341)]=_0x2f79bd+'%';}function zoomIn(){const _0x309ee1=a0_0x32e0c3,_0x403a95=document['getElementById']('zoomSlider');let _0x50da4c=_0x403a95?parseInt(_0x403a95['value'],0xa):Math[_0x309ee1(0x35b)](scale*0x64);_0x50da4c=Math['min'](0x1f4,_0x50da4c+0xa),setZoomValue(_0x50da4c);}function zoomOut(){const _0x346a34=a0_0x32e0c3,_0x274c8d=document['getElementById'](_0x346a34(0x347));let _0x3b1210=_0x274c8d?parseInt(_0x274c8d['value'],0xa):Math[_0x346a34(0x35b)](scale*0x64);_0x3b1210=Math[_0x346a34(0x2fe)](0x14,_0x3b1210-0xa),setZoomValue(_0x3b1210);}const zs=document[a0_0x32e0c3(0x332)](a0_0x32e0c3(0x347));if(zs)zs[a0_0x32e0c3(0x32c)]=_0x204e7f=>setZoomValue(_0x204e7f[a0_0x32e0c3(0x314)]['value']);const zv=document[a0_0x32e0c3(0x332)](a0_0x32e0c3(0x2b8));if(zv)zv[a0_0x32e0c3(0x341)]=Math[a0_0x32e0c3(0x35b)](scale*0x64)+'%';function getCanvasCoords(_0x223ffe){const _0x166b4c=a0_0x32e0c3,_0x22ec1a=canvas['getBoundingClientRect'](),_0x9c3729=canvas[_0x166b4c(0x268)]/_0x22ec1a[_0x166b4c(0x268)],_0x417694=canvas[_0x166b4c(0x2e8)]/_0x22ec1a[_0x166b4c(0x2e8)],_0x38c884=(_0x223ffe[_0x166b4c(0x305)]-_0x22ec1a[_0x166b4c(0x230)])*_0x9c3729,_0x19bcd2=(_0x223ffe[_0x166b4c(0x304)]-_0x22ec1a['top'])*_0x417694;return{'x':_0x38c884,'y':_0x19bcd2};}function handleDrawStart(_0xf46988){const _0x4155ab=a0_0x32e0c3,_0x33bbed=getCanvasCoords(_0xf46988);ctx[_0x4155ab(0x1e8)](),ctx[_0x4155ab(0x233)](_0x33bbed['x'],_0x33bbed['y']);}function handleDrawMove(_0x3938c4){const _0x3be25d=a0_0x32e0c3,_0x2e2d3c=getCanvasCoords(_0x3938c4);ctx[_0x3be25d(0x370)](_0x2e2d3c['x'],_0x2e2d3c['y']),ctx['stroke']();}function handleDrawEnd(_0x9f85eb){ctx['closePath']();}function onCanvasColorPick(_0x349743){const _0x426753=a0_0x32e0c3;try{const _0x452ddc=getCanvasCoords(_0x349743),_0x86aa46=Math[_0x426753(0x33e)](_0x452ddc['x']),_0x280a3=Math[_0x426753(0x33e)](_0x452ddc['y']),_0x39516b=ctx[_0x426753(0x36d)](_0x86aa46,_0x280a3,0x1,0x1)['data'],_0x5dd565=_0x39516b[0x0],_0x29f1ab=_0x39516b[0x1],_0x440026=_0x39516b[0x2],_0x5ac26c=_0x39516b[0x3];if(_0x5ac26c===0x0){currentColor=_0x426753(0x34d);const _0x30d8b4=document[_0x426753(0x332)](_0x426753(0x2b2));if(_0x30d8b4)_0x30d8b4['value']=_0x426753(0x22a);console['info'](_0x426753(0x2fc));}else{const _0x1f6b77='#'+[_0x5dd565,_0x29f1ab,_0x440026][_0x426753(0x2b7)](_0x178683=>_0x178683[_0x426753(0x2a0)](0x10)[_0x426753(0x2ab)](0x2,'0'))[_0x426753(0x27b)]('');currentColor=_0x1f6b77;const _0x4da073=document[_0x426753(0x332)](_0x426753(0x2b2));if(_0x4da073)_0x4da073[_0x426753(0x2dd)]=_0x1f6b77;console[_0x426753(0x1fe)](_0x426753(0x29e),_0x1f6b77);}}catch(_0x593015){console[_0x426753(0x1da)]('onCanvasColorPick\x20error',_0x593015);}colorPickMode=![];if(canvas)canvas[_0x426753(0x25a)][_0x426753(0x1e9)]=_0x426753(0x2a1);}