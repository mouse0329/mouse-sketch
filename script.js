const a0_0xb3a314=a0_0x1a92;(function(_0x16b3a3,_0x19daba){const _0x47bc4d=a0_0x1a92,_0x2769b7=_0x16b3a3();while(!![]){try{const _0x3f748a=parseInt(_0x47bc4d(0x1de))/0x1*(parseInt(_0x47bc4d(0x85))/0x2)+parseInt(_0x47bc4d(0x1ae))/0x3+-parseInt(_0x47bc4d(0x207))/0x4+-parseInt(_0x47bc4d(0x20e))/0x5+-parseInt(_0x47bc4d(0x11a))/0x6+parseInt(_0x47bc4d(0xef))/0x7+parseInt(_0x47bc4d(0x13c))/0x8;if(_0x3f748a===_0x19daba)break;else _0x2769b7['push'](_0x2769b7['shift']());}catch(_0x200c78){_0x2769b7['push'](_0x2769b7['shift']());}}}(a0_0x5eb1,0x2727a));const a0_0x4d91ee=(function(){let _0x3daac9=!![];return function(_0x21f6bc,_0x1df8f7){const _0x2bd9b7=_0x3daac9?function(){if(_0x1df8f7){const _0x2a3154=_0x1df8f7['apply'](_0x21f6bc,arguments);return _0x1df8f7=null,_0x2a3154;}}:function(){};return _0x3daac9=![],_0x2bd9b7;};}()),a0_0x16aa44=a0_0x4d91ee(this,function(){const _0xd60876=a0_0x1a92;return a0_0x16aa44['toString']()[_0xd60876(0x83)](_0xd60876(0x10e))['toString']()[_0xd60876(0x13b)](a0_0x16aa44)[_0xd60876(0x83)](_0xd60876(0x10e));});a0_0x16aa44();let prevTool=null;document[a0_0xb3a314(0xec)](a0_0xb3a314(0x146),function(_0xd1dc5f){const _0x263d85=a0_0xb3a314;_0xd1dc5f[_0x263d85(0x1db)]===_0x263d85(0x7d)&&currentTool!==_0x263d85(0x91)&&(prevTool=currentTool,setTool(_0x263d85(0x91)));}),document['addEventListener'](a0_0xb3a314(0x1ef),function(_0x2167f3){_0x2167f3['key']==='Shift'&&prevTool&&currentTool==='pan'&&(setTool(prevTool),prevTool=null);}),document['addEventListener'](a0_0xb3a314(0x1e2),function(){const _0x2bdd93=a0_0xb3a314;var _0x10de24=document['getElementById']('exportQuality'),_0x38fa4c=document[_0x2bdd93(0x1d9)]('exportQualityValue');_0x10de24&&_0x38fa4c&&_0x10de24[_0x2bdd93(0xec)](_0x2bdd93(0x176),function(){const _0x1ac3cd=_0x2bdd93;_0x38fa4c[_0x1ac3cd(0x165)]=_0x10de24[_0x1ac3cd(0x153)];});let _0x522283=document['getElementById'](_0x2bdd93(0x181));_0x522283&&(_0x522283[_0x2bdd93(0x153)]=penAlphaMode,_0x522283[_0x2bdd93(0x100)]=_0x22a3fa=>{const _0x3f700c=_0x2bdd93;penAlphaMode=_0x22a3fa[_0x3f700c(0x84)]['value'];});}),window[a0_0xb3a314(0x182)]=function(){updateCurrentColorSwatch();};function updateCurrentColorSwatch(){const _0x1416ab=a0_0xb3a314,_0x421b18=document[_0x1416ab(0x1d9)](_0x1416ab(0xb0));if(!_0x421b18)return;_0x421b18['innerHTML']='',_0x421b18['style']['position']=_0x1416ab(0xa4),_0x421b18[_0x1416ab(0x1e7)][_0x1416ab(0xfc)]=_0x1416ab(0xbc);let _0x3fd93b=document['createElement'](_0x1416ab(0x1eb));_0x3fd93b[_0x1416ab(0x1e7)][_0x1416ab(0x16c)]=_0x1416ab(0x1dd),_0x3fd93b['style'][_0x1416ab(0xa7)]='0',_0x3fd93b[_0x1416ab(0x1e7)][_0x1416ab(0x16b)]=_0x1416ab(0x112),_0x3fd93b[_0x1416ab(0x1e7)][_0x1416ab(0x190)]=_0x1416ab(0x126);let _0x26a6df=document['createElement'](_0x1416ab(0x1eb));_0x26a6df[_0x1416ab(0x1e7)][_0x1416ab(0x16c)]='absolute',_0x26a6df[_0x1416ab(0x1e7)]['inset']='0',_0x26a6df[_0x1416ab(0x1e7)][_0x1416ab(0x16b)]=_0x1416ab(0x112),currentColor===_0x1416ab(0x150)||currentAlpha===0x0?(_0x26a6df[_0x1416ab(0x1e7)]['background']=_0x1416ab(0x9e),_0x421b18[_0x1416ab(0x14f)]='ÈÄèÊòé'):(_0x26a6df[_0x1416ab(0x1e7)][_0x1416ab(0x190)]=hexToRgbaCss(currentColor,currentAlpha),_0x421b18[_0x1416ab(0x14f)]=currentAlpha<0x1?currentColor+_0x1416ab(0x17c)+Math['round'](currentAlpha*0x64)+'%':currentColor),_0x421b18[_0x1416ab(0xd6)](_0x3fd93b),_0x421b18[_0x1416ab(0xd6)](_0x26a6df);}function hexToRgbaCss(_0x1e415,_0x8c0b61){const _0x136217=a0_0xb3a314;let _0x5de531,_0x184b54,_0x483bd5,_0x140837=_0x8c0b61;if(_0x1e415[_0x136217(0x162)]===0x9)_0x5de531=parseInt(_0x1e415[_0x136217(0x12e)](0x1,0x3),0x10),_0x184b54=parseInt(_0x1e415[_0x136217(0x12e)](0x3,0x5),0x10),_0x483bd5=parseInt(_0x1e415[_0x136217(0x12e)](0x5,0x7),0x10),_0x140837=parseInt(_0x1e415[_0x136217(0x12e)](0x7,0x9),0x10)/0xff;else{if(_0x1e415[_0x136217(0x162)]===0x7)_0x5de531=parseInt(_0x1e415[_0x136217(0x12e)](0x1,0x3),0x10),_0x184b54=parseInt(_0x1e415[_0x136217(0x12e)](0x3,0x5),0x10),_0x483bd5=parseInt(_0x1e415[_0x136217(0x12e)](0x5,0x7),0x10);else{if(_0x1e415['length']===0x4)_0x5de531=parseInt(_0x1e415[0x1]+_0x1e415[0x1],0x10),_0x184b54=parseInt(_0x1e415[0x2]+_0x1e415[0x2],0x10),_0x483bd5=parseInt(_0x1e415[0x3]+_0x1e415[0x3],0x10);else return _0x1e415;}}return _0x136217(0x98)+_0x5de531+','+_0x184b54+','+_0x483bd5+','+_0x140837+')';}function getExportQuality(){const _0x494e3d=a0_0xb3a314;var _0x596359=document['getElementById']('exportQuality');return _0x596359?parseInt(_0x596359[_0x494e3d(0x153)],0xa):0x8;}let canvas=document['getElementById'](a0_0xb3a314(0xa2)),ctx=canvas[a0_0xb3a314(0x1e4)]('2d');const wrapper=document['getElementById'](a0_0xb3a314(0xd0));let cellSize=0x14,currentColor=a0_0xb3a314(0xae),currentTool=a0_0xb3a314(0x13a),penSize=0x1,penMode='square',layers=[],activeLayer=0x0,layerMoveState={'active':![],'startCell':null,'offsetCells':{'x':0x0,'y':0x0}},layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![],colorPickMode=![];function createProject(_0x26a2fd=0x10,_0xf3f49=0x10,_0x4b6bf4=''){const _0x5cbcae=a0_0xb3a314;let _0x134725=0x14,_0x439e07=[],_0xd3e3fd=[],_0x1c307b=[],_0x73158c=document[_0x5cbcae(0xd4)](_0x5cbcae(0xa2));_0x73158c[_0x5cbcae(0x167)]=_0x26a2fd*_0x134725,_0x73158c['height']=_0xf3f49*_0x134725,_0x439e07[_0x5cbcae(0x7a)]({'canvas':_0x73158c,'visible':!![]}),_0xd3e3fd[_0x5cbcae(0x7a)]([]),_0x1c307b[_0x5cbcae(0x7a)]([]);let _0x14c44c={'layers':_0x439e07,'activeLayer':0x0,'layerHistories':_0xd3e3fd,'layerRedoStacks':_0x1c307b};return{'frames':[_0x14c44c],'activeFrame':0x0,'width':_0x26a2fd,'height':_0xf3f49,'name':_0x4b6bf4||'ÁîªÂÉè'+(projects[_0x5cbcae(0x162)]+0x1)};}function updateProjectUI(){const _0x29cab5=a0_0xb3a314,_0x40746a=document['getElementById'](_0x29cab5(0x1e6));_0x40746a[_0x29cab5(0x79)]='';for(let _0x4af930=0x0;_0x4af930<projects[_0x29cab5(0x162)];_0x4af930++){const _0x846c3d=document[_0x29cab5(0xd4)](_0x29cab5(0x1eb));_0x846c3d[_0x29cab5(0x1ed)]='project-item'+(_0x4af930===activeProject?_0x29cab5(0x8e):''),_0x846c3d['onclick']=()=>{activeProject=_0x4af930,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x72db80=document[_0x29cab5(0xd4)](_0x29cab5(0x125));_0x72db80[_0x29cab5(0x1ed)]=_0x29cab5(0x159),_0x72db80[_0x29cab5(0x165)]=projects[_0x4af930][_0x29cab5(0x166)]||'ÁîªÂÉè'+(_0x4af930+0x1),_0x72db80[_0x29cab5(0x14f)]='„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ',_0x72db80[_0x29cab5(0xb5)]=_0x3ad237=>{_0x3ad237['stopPropagation'](),editProjectName(_0x4af930,_0x72db80);},_0x846c3d[_0x29cab5(0xd6)](_0x72db80);const _0x5773ad=document['createElement'](_0x29cab5(0x19d));_0x5773ad[_0x29cab5(0x165)]='ÂâäÈô§',_0x5773ad['className']=_0x29cab5(0xdb),_0x5773ad['disabled']=projects[_0x29cab5(0x162)]===0x1,_0x5773ad[_0x29cab5(0xb5)]=_0x414e06=>{_0x414e06['stopPropagation'](),removeProjectAt(_0x4af930);},_0x846c3d[_0x29cab5(0xd6)](_0x5773ad),_0x40746a[_0x29cab5(0xd6)](_0x846c3d);}document['getElementById']('projectCount')['textContent']='('+projects[_0x29cab5(0x162)]+'Êûö)';}function editProjectName(_0x5ae087,_0x4ef498){const _0xa3b55e=a0_0xb3a314,_0x36b801=document[_0xa3b55e(0xd4)](_0xa3b55e(0x176));_0x36b801[_0xa3b55e(0x17b)]=_0xa3b55e(0x12d),_0x36b801['value']=projects[_0x5ae087][_0xa3b55e(0x166)]||'ÁîªÂÉè'+(_0x5ae087+0x1),_0x36b801[_0xa3b55e(0x1ed)]=_0xa3b55e(0x8c),_0x36b801['style'][_0xa3b55e(0x167)]=_0xa3b55e(0x1fa),_0x36b801['onblur']=()=>{const _0x89cf2=_0xa3b55e;projects[_0x5ae087]['name']=_0x36b801[_0x89cf2(0x153)]['trim']()||'ÁîªÂÉè'+(_0x5ae087+0x1),updateProjectUI();},_0x36b801[_0xa3b55e(0xb9)]=_0x461dc2=>{const _0x3bafc9=_0xa3b55e;if(_0x461dc2[_0x3bafc9(0x1db)]==='Enter')_0x36b801[_0x3bafc9(0x20f)]();},_0x4ef498[_0xa3b55e(0xcb)](_0x36b801),_0x36b801['focus'](),_0x36b801[_0xa3b55e(0x97)]();}function showNewProjectDialog(_0x2f4aae){const _0x577330=a0_0xb3a314;let _0x29c792=document[_0x577330(0x1d9)](_0x577330(0x174));if(_0x29c792)_0x29c792['remove']();const _0x4082c8=document[_0x577330(0xd4)](_0x577330(0x1eb));_0x4082c8['id']='new-project-dialog',_0x4082c8[_0x577330(0x1e7)][_0x577330(0x16c)]='fixed',_0x4082c8[_0x577330(0x1e7)][_0x577330(0xb3)]='0',_0x4082c8[_0x577330(0x1e7)]['top']='0',_0x4082c8[_0x577330(0x1e7)][_0x577330(0x167)]=_0x577330(0x149),_0x4082c8[_0x577330(0x1e7)][_0x577330(0x11f)]=_0x577330(0x99),_0x4082c8[_0x577330(0x1e7)]['background']=_0x577330(0x202),_0x4082c8[_0x577330(0x1e7)]['display']=_0x577330(0x96),_0x4082c8[_0x577330(0x1e7)][_0x577330(0x127)]=_0x577330(0x1f5),_0x4082c8[_0x577330(0x1e7)]['justifyContent']='center',_0x4082c8[_0x577330(0x1e7)]['zIndex']='3000',_0x4082c8['innerHTML']=_0x577330(0xc7)+(projects[_0x577330(0x162)]+0x1)+'\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x577330(0xaa)][_0x577330(0xd6)](_0x4082c8),_0x4082c8['querySelector']('#newProjOkBtn')[_0x577330(0xb5)]=()=>{const _0x416d04=_0x577330,_0x619d=parseInt(_0x4082c8[_0x416d04(0x12b)]('#newProjW')[_0x416d04(0x153)],0xa),_0x5b55d2=parseInt(_0x4082c8['querySelector']('#newProjH')[_0x416d04(0x153)],0xa),_0x3d982a=_0x4082c8[_0x416d04(0x12b)](_0x416d04(0x20a))['value'][_0x416d04(0x1ab)]();_0x4082c8[_0x416d04(0x102)]();if(_0x2f4aae)_0x2f4aae(_0x619d,_0x5b55d2,_0x3d982a);},_0x4082c8['querySelector'](_0x577330(0xe9))[_0x577330(0xb5)]=()=>{const _0x1fcc17=_0x577330;_0x4082c8[_0x1fcc17(0x102)]();};}function addProject(){showNewProjectDialog((_0x7c38be,_0x3c0696,_0x3a0300)=>{const _0x15cd43=a0_0x1a92;if(!Number[_0x15cd43(0xb6)](_0x7c38be)||_0x7c38be<0x1)_0x7c38be=0x10;if(!Number[_0x15cd43(0xb6)](_0x3c0696)||_0x3c0696<0x1)_0x3c0696=0x10;projects[_0x15cd43(0x7a)](createProject(_0x7c38be,_0x3c0696,_0x3a0300)),activeProject=projects[_0x15cd43(0x162)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x1fff4b){const _0x10ccdb=a0_0xb3a314;if(projects[_0x10ccdb(0x162)]<=0x1)return;projects[_0x10ccdb(0xdc)](_0x1fff4b,0x1);if(activeProject>=projects['length'])activeProject=projects[_0x10ccdb(0x162)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x6707d2=a0_0xb3a314,_0x5a6d72=document[_0x6707d2(0x1d9)](_0x6707d2(0x10d)),_0x3a14c7=getCurrentProject();if(!_0x3a14c7||!_0x3a14c7['frames'])return;_0x5a6d72[_0x6707d2(0x79)]='';for(let _0x3f3e05=0x0;_0x3f3e05<_0x3a14c7[_0x6707d2(0xb2)][_0x6707d2(0x162)];_0x3f3e05++){const _0x22a945=document['createElement'](_0x6707d2(0x1eb));_0x22a945[_0x6707d2(0x1ed)]=_0x6707d2(0x95)+(_0x3f3e05===_0x3a14c7[_0x6707d2(0xce)]?'\x20active':''),_0x22a945[_0x6707d2(0xb5)]=()=>{_0x3a14c7['activeFrame']=_0x3f3e05,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x307952=document[_0x6707d2(0xd4)](_0x6707d2(0xa2));_0x307952[_0x6707d2(0x1ed)]=_0x6707d2(0x1d8),_0x307952['width']=0x20,_0x307952[_0x6707d2(0x11f)]=0x20;let _0x49e118=_0x307952[_0x6707d2(0x1e4)]('2d',{'willReadFrequently':!![]});_0x49e118[_0x6707d2(0x1a0)](0x0,0x0,0x20,0x20);for(let _0x24a821=0x0;_0x24a821<_0x3a14c7[_0x6707d2(0xb2)][_0x3f3e05][_0x6707d2(0x16e)]['length'];_0x24a821++){const _0x390294=_0x3a14c7[_0x6707d2(0xb2)][_0x3f3e05]['layers'][_0x24a821];_0x390294&&_0x390294[_0x6707d2(0xa2)]&&_0x49e118[_0x6707d2(0xc1)](_0x390294[_0x6707d2(0xa2)],0x0,0x0,_0x307952['width'],_0x307952[_0x6707d2(0x11f)]);}_0x22a945['appendChild'](_0x307952);const _0x201c7c=document[_0x6707d2(0xd4)](_0x6707d2(0x125));_0x201c7c[_0x6707d2(0x165)]='F'+(_0x3f3e05+0x1),_0x22a945[_0x6707d2(0xd6)](_0x201c7c);const _0x14496b=document[_0x6707d2(0xd4)]('button');_0x14496b['textContent']='ÂâäÈô§',_0x14496b[_0x6707d2(0x1ed)]='frame-btn',_0x14496b[_0x6707d2(0x1d0)]=_0x3a14c7[_0x6707d2(0xb2)][_0x6707d2(0x162)]===0x1,_0x14496b['onclick']=_0x45526a=>{const _0x54e45f=_0x6707d2;_0x45526a[_0x54e45f(0xfe)](),removeFrameAt(_0x3f3e05);},_0x22a945[_0x6707d2(0xd6)](_0x14496b),_0x5a6d72[_0x6707d2(0xd6)](_0x22a945);}document['getElementById'](_0x6707d2(0x1e1))[_0x6707d2(0x165)]='('+_0x3a14c7[_0x6707d2(0xb2)][_0x6707d2(0x162)]+'„Ç≥„Éû)';}function addFrame(){const _0x180459=a0_0xb3a314,_0x15685d=getCurrentProject(),_0x104e8b=_0x15685d[_0x180459(0xb2)][_0x15685d['activeFrame']],_0x2680d7=_0x13c879=>{const _0x49eba2=_0x180459,_0x417865=document['createElement'](_0x49eba2(0xa2));_0x417865[_0x49eba2(0x167)]=_0x13c879['width'],_0x417865[_0x49eba2(0x11f)]=_0x13c879[_0x49eba2(0x11f)];const _0x496210=_0x417865[_0x49eba2(0x1e4)]('2d');if(_0x13c879 instanceof HTMLCanvasElement)_0x496210[_0x49eba2(0xc1)](_0x13c879,0x0,0x0);else _0x13c879[_0x49eba2(0xa2)]&&_0x13c879[_0x49eba2(0xa2)]instanceof HTMLCanvasElement?_0x496210['drawImage'](_0x13c879[_0x49eba2(0xa2)],0x0,0x0):console[_0x49eba2(0x198)]('Ë§áË£Ω„Åß„Åç„Å™„ÅÑ„É¨„Ç§„É§„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÉÅ„É•„Éº',_0x13c879);return _0x417865;},_0x111afa=_0x104e8b[_0x180459(0x16e)][_0x180459(0x1f7)](_0x2680d7),_0x22978c=_0x111afa[_0x180459(0x1f7)](()=>[]),_0x4e5d7b=_0x111afa[_0x180459(0x1f7)](()=>[]),_0x4921d9={'layers':_0x111afa,'activeLayer':0x0,'layerHistories':_0x22978c,'layerRedoStacks':_0x4e5d7b};_0x15685d[_0x180459(0xb2)][_0x180459(0xdc)](_0x15685d[_0x180459(0xce)]+0x1,0x0,_0x4921d9),_0x15685d['activeFrame']++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x11c9cc){const _0x49ebe0=a0_0xb3a314;let _0x28caa9=getCurrentProject();if(_0x28caa9[_0x49ebe0(0xb2)][_0x49ebe0(0x162)]<=0x1)return;_0x28caa9[_0x49ebe0(0xb2)]['splice'](_0x11c9cc,0x1);if(_0x28caa9[_0x49ebe0(0xce)]>=_0x28caa9[_0x49ebe0(0xb2)][_0x49ebe0(0x162)])_0x28caa9[_0x49ebe0(0xce)]=_0x28caa9['frames'][_0x49ebe0(0x162)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x5a50b7=a0_0xb3a314,_0x12c710=getCurrentProject();if(!_0x12c710||!_0x12c710[_0x5a50b7(0xb2)]||typeof _0x12c710[_0x5a50b7(0xce)]!==_0x5a50b7(0x179)||!_0x12c710[_0x5a50b7(0xb2)][_0x12c710[_0x5a50b7(0xce)]])return null;return _0x12c710['frames'][_0x12c710[_0x5a50b7(0xce)]];}function updateLayerUI(){const _0x20dbe8=a0_0xb3a314,{layers:_0x551597,activeLayer:_0x56cefe}=getCurrentFrame();document['getElementById'](_0x20dbe8(0x143))[_0x20dbe8(0x165)]='('+_0x551597[_0x20dbe8(0x162)]+'Êûö)';const _0x2262aa=document[_0x20dbe8(0x1d9)]('layerList');_0x2262aa[_0x20dbe8(0x79)]='';for(let _0x1895b5=_0x551597['length']-0x1;_0x1895b5>=0x0;_0x1895b5--){const _0x37fd92=document[_0x20dbe8(0xd4)](_0x20dbe8(0x1eb));_0x37fd92[_0x20dbe8(0x1ed)]=_0x20dbe8(0x111)+(_0x1895b5===_0x56cefe?_0x20dbe8(0x8e):''),_0x37fd92[_0x20dbe8(0xb5)]=_0x5182d7=>{const _0x32558d=_0x20dbe8;if(_0x5182d7['target'][_0x32558d(0x1cf)][_0x32558d(0xca)](_0x32558d(0x1b5)))return;getCurrentFrame()[_0x32558d(0x140)]=_0x1895b5,updateLayerUI(),redrawAll();};const _0x3dd0e3=document[_0x20dbe8(0xd4)](_0x20dbe8(0xa2));_0x3dd0e3['className']=_0x20dbe8(0x177),_0x3dd0e3['width']=0x20,_0x3dd0e3[_0x20dbe8(0x11f)]=0x20;const _0x240c8a=_0x3dd0e3['getContext']('2d');_0x240c8a[_0x20dbe8(0x1a0)](0x0,0x0,_0x3dd0e3[_0x20dbe8(0x167)],_0x3dd0e3['height']),_0x240c8a['globalAlpha']=_0x551597[_0x1895b5][_0x20dbe8(0x144)]===![]?0.3:0x1;let _0xe6a864=null;if(_0x551597[_0x1895b5]instanceof HTMLCanvasElement)_0xe6a864=_0x551597[_0x1895b5];else _0x551597[_0x1895b5][_0x20dbe8(0xa2)]instanceof HTMLCanvasElement&&(_0xe6a864=_0x551597[_0x1895b5]['canvas']);_0xe6a864?_0x240c8a[_0x20dbe8(0xc1)](_0xe6a864,0x0,0x0,_0x3dd0e3['width'],_0x3dd0e3[_0x20dbe8(0x11f)]):console['warn']('ÊèèÁîª„Åß„Åç„Å™„ÅÑ„É¨„Ç§„É§„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÉÅ„É•„Éº',_0x551597[_0x1895b5]);_0x37fd92[_0x20dbe8(0xd6)](_0x3dd0e3);const _0x4e918f=document[_0x20dbe8(0xd4)](_0x20dbe8(0x19d));_0x4e918f[_0x20dbe8(0x1ed)]='layer-btn\x20layer-vis-btn',_0x4e918f['title']=_0x551597[_0x1895b5]['visible']===![]?_0x20dbe8(0xc0):'ÈùûË°®Á§∫„Å´„Åô„Çã',_0x4e918f[_0x20dbe8(0x79)]=_0x551597[_0x1895b5]['visible']===![]?_0x20dbe8(0xdd):'üëÅÔ∏è',_0x4e918f['onclick']=_0x29a7f3=>{const _0x3824b4=_0x20dbe8;_0x29a7f3[_0x3824b4(0xfe)](),_0x551597[_0x1895b5][_0x3824b4(0x144)]=!_0x551597[_0x1895b5][_0x3824b4(0x144)],updateLayerUI(),redrawAll();},_0x37fd92[_0x20dbe8(0xd6)](_0x4e918f);const _0x49d206=document['createElement']('span');_0x49d206[_0x20dbe8(0x165)]=_0x20dbe8(0x1f0)+(_0x1895b5+0x1),_0x37fd92[_0x20dbe8(0xd6)](_0x49d206);const _0x1d6c2e=document[_0x20dbe8(0xd4)](_0x20dbe8(0x19d));_0x1d6c2e[_0x20dbe8(0x165)]='‚Üë',_0x1d6c2e[_0x20dbe8(0x1ed)]=_0x20dbe8(0x1b5),_0x1d6c2e['title']='‰∏ä„Å´ÁßªÂãï',_0x1d6c2e['disabled']=_0x1895b5===_0x551597[_0x20dbe8(0x162)]-0x1,_0x1d6c2e[_0x20dbe8(0xb5)]=_0x1627f5=>{const _0x312079=_0x20dbe8;_0x1627f5[_0x312079(0xfe)]();if(_0x1895b5<_0x551597[_0x312079(0x162)]-0x1)swapLayer(_0x1895b5,_0x1895b5+0x1);},_0x37fd92[_0x20dbe8(0xd6)](_0x1d6c2e);const _0x3ef7a0=document[_0x20dbe8(0xd4)]('button');_0x3ef7a0[_0x20dbe8(0x165)]='‚Üì',_0x3ef7a0[_0x20dbe8(0x1ed)]=_0x20dbe8(0x1b5),_0x3ef7a0[_0x20dbe8(0x14f)]=_0x20dbe8(0x105),_0x3ef7a0[_0x20dbe8(0x1d0)]=_0x1895b5===0x0,_0x3ef7a0[_0x20dbe8(0xb5)]=_0x17d408=>{const _0x53c993=_0x20dbe8;_0x17d408[_0x53c993(0xfe)]();if(_0x1895b5>0x0)swapLayer(_0x1895b5,_0x1895b5-0x1);},_0x37fd92[_0x20dbe8(0xd6)](_0x3ef7a0);const _0x2b8464=document[_0x20dbe8(0xd4)](_0x20dbe8(0x19d));_0x2b8464[_0x20dbe8(0x165)]='ÂâäÈô§',_0x2b8464['className']=_0x20dbe8(0x1b5),_0x2b8464[_0x20dbe8(0x14f)]=_0x20dbe8(0x156),_0x2b8464['disabled']=_0x551597[_0x20dbe8(0x162)]===0x1,_0x2b8464[_0x20dbe8(0xb5)]=_0x51daee=>{const _0x7092b7=_0x20dbe8;_0x51daee[_0x7092b7(0xfe)](),removeLayerAt(_0x1895b5);},_0x37fd92[_0x20dbe8(0xd6)](_0x2b8464),_0x2262aa[_0x20dbe8(0xd6)](_0x37fd92);}}function swapLayer(_0x433046,_0x23a6f3){const _0x116b0d=a0_0xb3a314;let _0x233b5f=getCurrentFrame();[_0x233b5f[_0x116b0d(0x16e)][_0x433046],_0x233b5f[_0x116b0d(0x16e)][_0x23a6f3]]=[_0x233b5f[_0x116b0d(0x16e)][_0x23a6f3],_0x233b5f['layers'][_0x433046]],[_0x233b5f['layerHistories'][_0x433046],_0x233b5f[_0x116b0d(0x1d7)][_0x23a6f3]]=[_0x233b5f[_0x116b0d(0x1d7)][_0x23a6f3],_0x233b5f[_0x116b0d(0x1d7)][_0x433046]],[_0x233b5f['layerRedoStacks'][_0x433046],_0x233b5f[_0x116b0d(0x1d2)][_0x23a6f3]]=[_0x233b5f[_0x116b0d(0x1d2)][_0x23a6f3],_0x233b5f['layerRedoStacks'][_0x433046]];if(_0x233b5f[_0x116b0d(0x140)]===_0x433046)_0x233b5f[_0x116b0d(0x140)]=_0x23a6f3;else{if(_0x233b5f[_0x116b0d(0x140)]===_0x23a6f3)_0x233b5f[_0x116b0d(0x140)]=_0x433046;}updateLayerUI(),redrawAll();}function removeLayerAt(_0x507c76){const _0x8e7f1d=a0_0xb3a314;let _0x87777b=getCurrentFrame();if(_0x87777b[_0x8e7f1d(0x16e)][_0x8e7f1d(0x162)]<=0x1)return;_0x87777b[_0x8e7f1d(0x16e)][_0x8e7f1d(0xdc)](_0x507c76,0x1),_0x87777b[_0x8e7f1d(0x1d7)][_0x8e7f1d(0xdc)](_0x507c76,0x1),_0x87777b['layerRedoStacks'][_0x8e7f1d(0xdc)](_0x507c76,0x1);if(_0x87777b[_0x8e7f1d(0x140)]>=_0x87777b[_0x8e7f1d(0x16e)][_0x8e7f1d(0x162)])_0x87777b[_0x8e7f1d(0x140)]=_0x87777b[_0x8e7f1d(0x16e)][_0x8e7f1d(0x162)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x5ee1e1=a0_0xb3a314;let _0x5caf27=getCurrentProject(),_0x4d3c9a=getCurrentFrame(),_0x2bf72e=document[_0x5ee1e1(0xd4)](_0x5ee1e1(0xa2));_0x2bf72e[_0x5ee1e1(0x167)]=_0x5caf27['width']*cellSize,_0x2bf72e[_0x5ee1e1(0x11f)]=_0x5caf27[_0x5ee1e1(0x11f)]*cellSize,_0x4d3c9a[_0x5ee1e1(0x16e)][_0x5ee1e1(0x7a)]({'canvas':_0x2bf72e,'visible':!![]}),_0x4d3c9a['layerHistories']['push']([]),_0x4d3c9a[_0x5ee1e1(0x1d2)]['push']([]),_0x4d3c9a['activeLayer']=_0x4d3c9a[_0x5ee1e1(0x16e)][_0x5ee1e1(0x162)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x4e304c=a0_0xb3a314;let _0x5a2182=getCurrentFrame();if(_0x5a2182[_0x4e304c(0x16e)][_0x4e304c(0x162)]<=0x1)return;_0x5a2182['layers'][_0x4e304c(0xdc)](_0x5a2182[_0x4e304c(0x140)],0x1),_0x5a2182[_0x4e304c(0x1d7)]['splice'](_0x5a2182[_0x4e304c(0x140)],0x1),_0x5a2182[_0x4e304c(0x1d2)][_0x4e304c(0xdc)](_0x5a2182['activeLayer'],0x1),_0x5a2182[_0x4e304c(0x140)]=Math[_0x4e304c(0xed)](0x0,_0x5a2182[_0x4e304c(0x140)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x4945af){getCurrentFrame()['activeLayer']=parseInt(_0x4945af),updateLayerUI();}let PALETTE_COLORS=[a0_0xb3a314(0x150),a0_0xb3a314(0x86),a0_0xb3a314(0x14b),a0_0xb3a314(0x1f6),a0_0xb3a314(0x6a),'#ffffff','#ff0000','#ffa500',a0_0xb3a314(0x18b),a0_0xb3a314(0x16f),a0_0xb3a314(0xf0),'#0000ff',a0_0xb3a314(0x1ca),a0_0xb3a314(0x8d),a0_0xb3a314(0x14e),a0_0xb3a314(0x1da),a0_0xb3a314(0x1f1),a0_0xb3a314(0x163),'#800080',a0_0xb3a314(0x138),'#ff69b4'],currentAlpha=0x1,animationTimer=null,animationDelay=0x12c,animationIndex=0x0;function playAnimation(){const _0xf20ec5=a0_0xb3a314,_0x193fa2=getCurrentProject();if(!_0x193fa2||!_0x193fa2['frames']||_0x193fa2[_0xf20ec5(0xb2)]['length']<=0x1)return;if(animationTimer)return;animationIndex=0x0;const _0x54ec36=_0x193fa2[_0xf20ec5(0xb2)];animationTimer=setInterval(()=>{const _0x56b07e=_0xf20ec5;ctx[_0x56b07e(0x1a0)](0x0,0x0,canvas[_0x56b07e(0x167)],canvas[_0x56b07e(0x11f)]);const _0x32d1e7=_0x54ec36[animationIndex];for(let _0x145cc3=0x0;_0x145cc3<_0x32d1e7['layers'][_0x56b07e(0x162)];_0x145cc3++){let _0x5380d4=_0x32d1e7[_0x56b07e(0x16e)][_0x145cc3],_0x77f9c3=null;if(_0x5380d4 instanceof HTMLCanvasElement)_0x77f9c3=_0x5380d4;else _0x5380d4['canvas']instanceof HTMLCanvasElement&&(_0x77f9c3=_0x5380d4[_0x56b07e(0xa2)]);_0x77f9c3?ctx['drawImage'](_0x77f9c3,0x0,0x0):console['warn'](_0x56b07e(0x92),_0x5380d4);}drawGrid(_0x193fa2[_0x56b07e(0x167)],_0x193fa2[_0x56b07e(0x11f)]),animationIndex=(animationIndex+0x1)%_0x54ec36[_0x56b07e(0x162)];},animationDelay);}function stopAnimation(){animationTimer&&(clearInterval(animationTimer),animationTimer=null,redrawAll());}function setAnimationDelay(_0x3988b3){_0x3988b3=Math['max'](0xa,parseInt(_0x3988b3,0xa)||0x12c),animationDelay=_0x3988b3,animationTimer&&(clearInterval(animationTimer),animationTimer=null,playAnimation());}function setTool(_0x5c59d3){const _0x307013=a0_0xb3a314;currentTool=_0x5c59d3,isDrawing=![],document[_0x307013(0x168)](_0x307013(0x121))[_0x307013(0x1a3)](_0x19ffeb=>{const _0x53a144=_0x307013;_0x19ffeb['classList']['toggle'](_0x53a144(0x113),_0x19ffeb[_0x53a144(0x18a)]['tool']===_0x5c59d3);}),document['querySelectorAll'](_0x307013(0x136))[_0x307013(0x1a3)](_0x228be8=>{const _0x4b1025=_0x307013;_0x228be8[_0x4b1025(0x1cf)][_0x4b1025(0x139)]('active',_0x228be8[_0x4b1025(0x18a)]['tool']===_0x5c59d3);}),_0x5c59d3===_0x307013(0x91)?canvas[_0x307013(0x1e7)]['cursor']=_0x307013(0x173):canvas['style']['cursor']=_0x307013(0x1e3);}document[a0_0xb3a314(0xec)](a0_0xb3a314(0x1e2),function(){const _0x46bb3a=a0_0xb3a314;document[_0x46bb3a(0x168)]('.tool-btn')[_0x46bb3a(0x1a3)](_0x1f3020=>{const _0x35b78f=_0x46bb3a;_0x1f3020[_0x35b78f(0xec)]('touchstart',function(_0x280503){const _0x5cc258=_0x35b78f;_0x280503['preventDefault'](),_0x1f3020[_0x5cc258(0x122)]();},{'passive':![]});}),document[_0x46bb3a(0xec)]('pointerup',function(){isDrawing=![];});});function setPenSize(_0x33a9db){const _0x498f0f=a0_0xb3a314;penSize=parseInt(_0x33a9db)||0x1;let _0x100ffd=document[_0x498f0f(0x1d9)](_0x498f0f(0x172));if(_0x100ffd)_0x100ffd[_0x498f0f(0x153)]=penSize;let _0x3436f7=document[_0x498f0f(0x1d9)](_0x498f0f(0x1b1));if(_0x3436f7)_0x3436f7[_0x498f0f(0x153)]=penSize;}function setPenMode(_0x53895f){const _0x3926d3=a0_0xb3a314;penMode=_0x53895f;let _0x220466=document[_0x3926d3(0x1d9)](_0x3926d3(0x186));if(_0x220466)_0x220466[_0x3926d3(0x153)]=penMode;let _0x12e70e=document[_0x3926d3(0x1d9)](_0x3926d3(0x82));if(_0x12e70e)_0x12e70e[_0x3926d3(0x153)]=penMode;}function hexToRgba(_0x2a7f72,_0x5d4941=0x1){const _0x5598f6=a0_0xb3a314;if(_0x2a7f72===_0x5598f6(0x150)||_0x2a7f72===_0x5598f6(0xe3))return[0x0,0x0,0x0,0x0];_0x2a7f72=_0x2a7f72[_0x5598f6(0xd9)]('#','');if(_0x2a7f72['length']===0x3)_0x2a7f72=_0x2a7f72[_0x5598f6(0x197)]('')['map'](_0x2d352f=>_0x2d352f+_0x2d352f)[_0x5598f6(0x17d)]('');if(_0x2a7f72[_0x5598f6(0x162)]===0x8){const _0x235a3d=parseInt(_0x2a7f72[_0x5598f6(0x12e)](0x0,0x2),0x10),_0x390cf2=parseInt(_0x2a7f72[_0x5598f6(0x12e)](0x2,0x4),0x10),_0x1d0859=parseInt(_0x2a7f72['slice'](0x4,0x6),0x10),_0x165054=parseInt(_0x2a7f72[_0x5598f6(0x12e)](0x6,0x8),0x10);return[_0x235a3d,_0x390cf2,_0x1d0859,_0x165054];}let _0xf2e342=parseInt(_0x2a7f72,0x10);return[_0xf2e342>>0x10&0xff,_0xf2e342>>0x8&0xff,_0xf2e342&0xff,Math[_0x5598f6(0x1cb)](0xff*_0x5d4941)];}function fillAt(_0x529566,_0x1077ec){const _0x4358f7=a0_0xb3a314;let _0x3160b8=getCurrentProject(),_0x6acb9d=getCurrentFrame(),_0x4025b8=_0x6acb9d[_0x4358f7(0x16e)][_0x6acb9d[_0x4358f7(0x140)]][_0x4358f7(0xa2)]['getContext']('2d'),_0x428174=_0x4025b8[_0x4358f7(0xc9)](0x0,0x0,_0x3160b8[_0x4358f7(0x167)]*cellSize,_0x3160b8['height']*cellSize),_0x465907=_0x529566*cellSize,_0xc0271a=_0x1077ec*cellSize,_0x171fe6=getPixel(_0x428174,_0x465907,_0xc0271a),_0x1bbbd2=currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x171fe6,_0x1bbbd2))return;let _0x2ac6dd=[[_0x529566,_0x1077ec]],_0x5117de=new Set();while(_0x2ac6dd['length']){let [_0x199ef9,_0x3d8fef]=_0x2ac6dd[_0x4358f7(0x1bf)]();if(_0x199ef9<0x0||_0x3d8fef<0x0||_0x199ef9>=_0x3160b8[_0x4358f7(0x167)]||_0x3d8fef>=_0x3160b8['height'])continue;let _0x299773=_0x199ef9+','+_0x3d8fef;if(_0x5117de['has'](_0x299773))continue;_0x5117de[_0x4358f7(0xc8)](_0x299773);let _0x6fc9e5=_0x199ef9*cellSize,_0x2ebb6e=_0x3d8fef*cellSize,_0x418b53=getPixel(_0x428174,_0x6fc9e5,_0x2ebb6e);if(!colorsMatch(_0x418b53,_0x171fe6))continue;for(let _0x3d92c1=0x0;_0x3d92c1<cellSize;_0x3d92c1++){for(let _0x8cd647=0x0;_0x8cd647<cellSize;_0x8cd647++){setPixel(_0x428174,_0x6fc9e5+_0x8cd647,_0x2ebb6e+_0x3d92c1,_0x1bbbd2);}}_0x2ac6dd[_0x4358f7(0x7a)]([_0x199ef9+0x1,_0x3d8fef]),_0x2ac6dd[_0x4358f7(0x7a)]([_0x199ef9-0x1,_0x3d8fef]),_0x2ac6dd[_0x4358f7(0x7a)]([_0x199ef9,_0x3d8fef+0x1]),_0x2ac6dd['push']([_0x199ef9,_0x3d8fef-0x1]);}_0x4025b8[_0x4358f7(0x73)](_0x428174,0x0,0x0),redrawAll();}function getPixel(_0x306808,_0x352922,_0x289c15){const _0x5582e4=a0_0xb3a314;let _0x426549=(_0x289c15*_0x306808['width']+_0x352922)*0x4;return[_0x306808[_0x5582e4(0x9b)][_0x426549],_0x306808[_0x5582e4(0x9b)][_0x426549+0x1],_0x306808[_0x5582e4(0x9b)][_0x426549+0x2],_0x306808[_0x5582e4(0x9b)][_0x426549+0x3]];}function setPixel(_0x1c9673,_0x4ed793,_0xa8370f,_0x3c72d9){const _0x4c3e0d=a0_0xb3a314;let _0x59eca1=(_0xa8370f*_0x1c9673[_0x4c3e0d(0x167)]+_0x4ed793)*0x4;_0x1c9673[_0x4c3e0d(0x9b)][_0x59eca1]=_0x3c72d9[0x0],_0x1c9673[_0x4c3e0d(0x9b)][_0x59eca1+0x1]=_0x3c72d9[0x1],_0x1c9673[_0x4c3e0d(0x9b)][_0x59eca1+0x2]=_0x3c72d9[0x2],_0x1c9673['data'][_0x59eca1+0x3]=_0x3c72d9[0x3];}function colorsMatch(_0x53a828,_0x44c591){return _0x53a828[0x0]===_0x44c591[0x0]&&_0x53a828[0x1]===_0x44c591[0x1]&&_0x53a828[0x2]===_0x44c591[0x2]&&_0x53a828[0x3]===_0x44c591[0x3];}function handleMouseDown(_0x1e675b){const _0x5a229c=a0_0xb3a314;if(currentTool==='pan'){isDrawing=!![],panStart={'x':_0x1e675b[_0x5a229c(0x1fb)],'y':_0x1e675b[_0x5a229c(0x1fd)],'posX':posX,'posY':posY},canvas[_0x5a229c(0x1e7)][_0x5a229c(0x164)]=_0x5a229c(0x192);return;}isDrawing=!![],saveHistory();const _0x39489c=getCanvasCoords(_0x1e675b),_0x14e72d=Math[_0x5a229c(0xeb)](_0x39489c['x']/cellSize),_0x12feaa=Math[_0x5a229c(0xeb)](_0x39489c['y']/cellSize);currentTool==='fill'?(fillAt(_0x14e72d,_0x12feaa),saveHistory(),isDrawing=![],lastMouse=null):(drawDotXY(_0x14e72d,_0x12feaa),lastMouse={'x':_0x14e72d,'y':_0x12feaa});}function handleMouseMove(_0x464c1a){const _0x144e23=a0_0xb3a314;if(!isDrawing)return;if(currentTool===_0x144e23(0x91)&&panStart){const _0x38a19a=_0x464c1a[_0x144e23(0x1fb)]-panStart['x'],_0x1077be=_0x464c1a[_0x144e23(0x1fd)]-panStart['y'];posX=panStart['posX']+_0x38a19a,posY=panStart[_0x144e23(0x6e)]+_0x1077be,updateTransform();return;}const _0x1886b3=getCanvasCoords(_0x464c1a),_0x305dd4=Math[_0x144e23(0xeb)](_0x1886b3['x']/cellSize),_0x2608ea=Math[_0x144e23(0xeb)](_0x1886b3['y']/cellSize);if(!lastMouse){drawDotXY(_0x305dd4,_0x2608ea),lastMouse={'x':_0x305dd4,'y':_0x2608ea};return;}const _0x23f069=_0x305dd4-lastMouse['x'],_0x3e0c0d=_0x2608ea-lastMouse['y'],_0x1db645=Math[_0x144e23(0xed)](Math['abs'](_0x23f069),Math[_0x144e23(0x14a)](_0x3e0c0d));if(_0x1db645<=0x1)drawDotXY(_0x305dd4,_0x2608ea);else for(let _0x76470d=0x1;_0x76470d<=_0x1db645;_0x76470d++){const _0x48678a=Math[_0x144e23(0x1cb)](lastMouse['x']+_0x23f069*_0x76470d/_0x1db645),_0x237725=Math[_0x144e23(0x1cb)](lastMouse['y']+_0x3e0c0d*_0x76470d/_0x1db645);drawDotXY(_0x48678a,_0x237725);}lastMouse={'x':_0x305dd4,'y':_0x2608ea};}function handleMouseUp(_0x335145){const _0x4872df=a0_0xb3a314;if(currentTool===_0x4872df(0x91)){isDrawing=![],_0x6b21ec=null,canvas[_0x4872df(0x1e7)][_0x4872df(0x164)]=_0x4872df(0x173);return;}isDrawing&&saveHistory();isDrawing=![],lastMouse=null;let _0x6b21ec=null;}let lastTouch=null,lastMouse=null,isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchStartScale=0x1,pinchStartPosX=0x0,pinchStartPosY=0x0,pinchRect=null;function getTouchPos(_0x315744){const _0x5912cc=a0_0xb3a314,_0x5e693b=canvas[_0x5912cc(0x119)]();let _0x5e6a81=_0x315744[_0x5912cc(0x7c)]&&_0x315744[_0x5912cc(0x7c)][0x0]?_0x315744[_0x5912cc(0x7c)][0x0]:_0x315744[_0x5912cc(0x161)][0x0];const _0xe290df=canvas['width']/_0x5e693b['width'],_0x1c7eb5=canvas['height']/_0x5e693b[_0x5912cc(0x11f)],_0x518ca9=_0x5e6a81[_0x5912cc(0x1fb)],_0x3ea228=_0x5e6a81['clientY'],_0x29c510=(_0x518ca9-_0x5e693b[_0x5912cc(0xb3)])*_0xe290df,_0x159083=(_0x3ea228-_0x5e693b['top'])*_0x1c7eb5;return{'x':Math[_0x5912cc(0xeb)](_0x29c510/cellSize),'y':Math[_0x5912cc(0xeb)](_0x159083/cellSize)};}function handleTouchStart(_0x8c7276){const _0x2cf94b=a0_0xb3a314;if(_0x8c7276[_0x2cf94b(0x7c)][_0x2cf94b(0x162)]===0x2){_0x8c7276['preventDefault'](),isPinching=!![],isDrawing=![];const _0x5e8b1f=_0x8c7276[_0x2cf94b(0x7c)][0x0],_0x4646c5=_0x8c7276['touches'][0x1];pinchStartDistance=Math[_0x2cf94b(0x132)](_0x4646c5[_0x2cf94b(0x1fb)]-_0x5e8b1f['clientX'],_0x4646c5[_0x2cf94b(0x1fd)]-_0x5e8b1f[_0x2cf94b(0x1fd)]),pinchStartMid={'clientX':(_0x5e8b1f[_0x2cf94b(0x1fb)]+_0x4646c5[_0x2cf94b(0x1fb)])/0x2,'clientY':(_0x5e8b1f[_0x2cf94b(0x1fd)]+_0x4646c5[_0x2cf94b(0x1fd)])/0x2},pinchStartScale=scale,pinchStartPosX=posX,pinchStartPosY=posY,pinchRect=canvas[_0x2cf94b(0x119)]();}else{if(_0x8c7276[_0x2cf94b(0x7c)][_0x2cf94b(0x162)]===0x1){if(colorPickMode){_0x8c7276[_0x2cf94b(0x12f)]();const _0x32547d=_0x8c7276[_0x2cf94b(0x7c)][0x0];onCanvasColorPick({'clientX':_0x32547d[_0x2cf94b(0x1fb)],'clientY':_0x32547d[_0x2cf94b(0x1fd)]});return;}_0x8c7276[_0x2cf94b(0x12f)]();if(isPinching)return;isDrawing=!![],saveHistory();let _0x1b87f7=getTouchPos(_0x8c7276);lastTouch=_0x1b87f7,currentTool==='fill'?(fillAt(_0x1b87f7['x'],_0x1b87f7['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x1b87f7['x'],_0x1b87f7['y']);}}}function handleTouchMove(_0x4df982){const _0x3a9f6d=a0_0xb3a314;if(isPinching||_0x4df982[_0x3a9f6d(0x7c)]&&_0x4df982['touches'][_0x3a9f6d(0x162)]===0x2){_0x4df982[_0x3a9f6d(0x12f)]();const _0x44addd=_0x4df982[_0x3a9f6d(0x7c)][0x0],_0x40322d=_0x4df982['touches'][0x1],_0x9e7c11=Math[_0x3a9f6d(0x132)](_0x40322d[_0x3a9f6d(0x1fb)]-_0x44addd[_0x3a9f6d(0x1fb)],_0x40322d[_0x3a9f6d(0x1fd)]-_0x44addd['clientY']),_0x5d496c={'clientX':(_0x44addd[_0x3a9f6d(0x1fb)]+_0x40322d['clientX'])/0x2,'clientY':(_0x44addd[_0x3a9f6d(0x1fd)]+_0x40322d[_0x3a9f6d(0x1fd)])/0x2};if(!pinchStartDistance)pinchStartDistance=_0x9e7c11||0x1;const _0x1b803f=_0x9e7c11/pinchStartDistance||0x1;let _0x246ac0=pinchStartScale*_0x1b803f;_0x246ac0=Math[_0x3a9f6d(0x1d3)](Math['max'](_0x246ac0,0.2),0x5);const _0x3e528c=pinchRect||canvas[_0x3a9f6d(0x119)](),_0x3a4c07=(pinchStartMid[_0x3a9f6d(0x1fb)]-_0x3e528c[_0x3a9f6d(0xb3)]-pinchStartPosX)/pinchStartScale,_0xe26fb3=(pinchStartMid[_0x3a9f6d(0x1fd)]-_0x3e528c[_0x3a9f6d(0x1df)]-pinchStartPosY)/pinchStartScale;posX=_0x5d496c[_0x3a9f6d(0x1fb)]-_0x3e528c[_0x3a9f6d(0xb3)]-_0x3a4c07*_0x246ac0,posY=_0x5d496c[_0x3a9f6d(0x1fd)]-_0x3e528c['top']-_0xe26fb3*_0x246ac0,scale=_0x246ac0,updateTransform();return;}if(!isDrawing)return;if(_0x4df982[_0x3a9f6d(0x7c)]&&_0x4df982[_0x3a9f6d(0x7c)][_0x3a9f6d(0x162)]>0x1)return;_0x4df982['preventDefault']();let _0x3bfd69=getTouchPos(_0x4df982);if(lastTouch){let _0x4c074e=Math[_0x3a9f6d(0x14a)]((_0x3bfd69['x']-lastTouch['x'])*cellSize),_0x3db0d5=Math[_0x3a9f6d(0x14a)]((_0x3bfd69['y']-lastTouch['y'])*cellSize);if(_0x4c074e>=PAN_CANCEL_DISTANCE||_0x3db0d5>=PAN_CANCEL_DISTANCE){if(currentTool!==_0x3a9f6d(0x13a)){isDrawing=![];return;}}}if(lastTouch){let _0x57fb2c=_0x3bfd69['x']-lastTouch['x'],_0x32b90a=_0x3bfd69['y']-lastTouch['y'],_0x31853c=Math[_0x3a9f6d(0xed)](Math[_0x3a9f6d(0x14a)](_0x57fb2c),Math[_0x3a9f6d(0x14a)](_0x32b90a));for(let _0x1d8866=0x1;_0x1d8866<=_0x31853c;_0x1d8866++){let _0x367891=Math['round'](lastTouch['x']+_0x57fb2c*_0x1d8866/_0x31853c),_0x3ca773=Math[_0x3a9f6d(0x1cb)](lastTouch['y']+_0x32b90a*_0x1d8866/_0x31853c);drawDotTouch(_0x367891,_0x3ca773);}}else drawDotTouch(_0x3bfd69['x'],_0x3bfd69['y']);lastTouch=_0x3bfd69;}function handleTouchEnd(_0xa25d30){const _0x1b57de=a0_0xb3a314;isPinching&&_0xa25d30['touches']&&_0xa25d30['touches'][_0x1b57de(0x162)]<0x2&&(isPinching=![],pinchStartDistance=0x0,pinchStartMid=null,pinchRect=null);isDrawing&&(!_0xa25d30[_0x1b57de(0x7c)]||_0xa25d30[_0x1b57de(0x7c)][_0x1b57de(0x162)]===0x0)&&saveHistory();if(_0xa25d30['touches']&&_0xa25d30[_0x1b57de(0x7c)][_0x1b57de(0x162)]===0x1){let _0x3b45f8=_0xa25d30[_0x1b57de(0x7c)][0x0];lastTouch=getTouchPos({'touches':[_0x3b45f8]}),isDrawing=!![];}else isDrawing=![],lastTouch=null;}function drawDotXY(_0x287c2e,_0x58fca1){const _0x40378d=a0_0xb3a314;let _0x28ee23=getCurrentProject(),_0x2e0f0d=getCurrentFrame();if(!_0x2e0f0d||!_0x28ee23)return;if(typeof _0x287c2e!==_0x40378d(0x179)||typeof _0x58fca1!==_0x40378d(0x179)||_0x287c2e<0x0||_0x58fca1<0x0||!Number['isFinite'](_0x28ee23[_0x40378d(0x167)])||!Number[_0x40378d(0xb6)](_0x28ee23[_0x40378d(0x11f)])||_0x287c2e>=_0x28ee23[_0x40378d(0x167)]||_0x58fca1>=_0x28ee23[_0x40378d(0x11f)]||!Array[_0x40378d(0x17e)](_0x2e0f0d[_0x40378d(0x16e)])||typeof _0x2e0f0d[_0x40378d(0x140)]!=='number'||!_0x2e0f0d[_0x40378d(0x16e)][_0x2e0f0d[_0x40378d(0x140)]])return;let _0x4a7b85=_0x2e0f0d[_0x40378d(0x16e)][_0x2e0f0d[_0x40378d(0x140)]]['canvas']['getContext']('2d');if(!_0x4a7b85)return;if(currentTool===_0x40378d(0xf8)||currentAlpha===0x0)drawPenShape(_0x4a7b85,_0x287c2e,_0x58fca1,_0x40378d(0xe3),!![]);else{let _0x5a5a6f=hexToRgba(currentColor,currentAlpha);_0x4a7b85[_0x40378d(0x1a8)](),penAlphaMode===_0x40378d(0xb8)&&currentAlpha<0x1?(_0x4a7b85['globalAlpha']=0x1,_0x4a7b85[_0x40378d(0x148)]=_0x40378d(0xb4),drawPenShape(_0x4a7b85,_0x287c2e,_0x58fca1,_0x40378d(0xe3),!![]),_0x4a7b85[_0x40378d(0x148)]=_0x40378d(0x89),_0x4a7b85[_0x40378d(0x1b8)]=_0x5a5a6f[0x3]/0xff,drawPenShape(_0x4a7b85,_0x287c2e,_0x58fca1,_0x40378d(0x98)+_0x5a5a6f[0x0]+','+_0x5a5a6f[0x1]+','+_0x5a5a6f[0x2]+','+_0x5a5a6f[0x3]/0xff+')',![])):(_0x4a7b85[_0x40378d(0x1b8)]=_0x5a5a6f[0x3]/0xff,drawPenShape(_0x4a7b85,_0x287c2e,_0x58fca1,_0x40378d(0x98)+_0x5a5a6f[0x0]+','+_0x5a5a6f[0x1]+','+_0x5a5a6f[0x2]+','+_0x5a5a6f[0x3]/0xff+')',![])),_0x4a7b85['restore']();}redrawAll();}function drawPenShape(_0xeec1f5,_0x443249,_0x236f9f,_0x44a76e,_0x4ccecd){const _0x4dbaa9=a0_0xb3a314,_0x32055b=_0x443249*cellSize,_0x3cbd33=_0x236f9f*cellSize,_0x354928=penSize*cellSize;_0x4ccecd?(_0xeec1f5['save'](),_0xeec1f5['globalCompositeOperation']=_0x4dbaa9(0xb4),penMode===_0x4dbaa9(0xb7)?(_0xeec1f5[_0x4dbaa9(0x180)](),_0xeec1f5['arc'](_0x32055b+cellSize/0x2,_0x3cbd33+cellSize/0x2,_0x354928/0x2,0x0,Math['PI']*0x2),_0xeec1f5['fill']()):_0xeec1f5[_0x4dbaa9(0x1a0)](_0x32055b-Math[_0x4dbaa9(0xeb)]((penSize-0x1)/0x2)*cellSize,_0x3cbd33-Math[_0x4dbaa9(0xeb)]((penSize-0x1)/0x2)*cellSize,_0x354928,_0x354928),_0xeec1f5[_0x4dbaa9(0x6b)]()):(_0xeec1f5[_0x4dbaa9(0x1a8)](),_0xeec1f5[_0x4dbaa9(0x1ce)]=_0x44a76e,penMode==='circle'?(_0xeec1f5[_0x4dbaa9(0x180)](),_0xeec1f5['arc'](_0x32055b+cellSize/0x2,_0x3cbd33+cellSize/0x2,_0x354928/0x2,0x0,Math['PI']*0x2),_0xeec1f5['fill']()):_0xeec1f5[_0x4dbaa9(0x116)](_0x32055b-Math[_0x4dbaa9(0xeb)]((penSize-0x1)/0x2)*cellSize,_0x3cbd33-Math[_0x4dbaa9(0xeb)]((penSize-0x1)/0x2)*cellSize,_0x354928,_0x354928),_0xeec1f5[_0x4dbaa9(0x6b)]());}function drawDotTouch(_0x3a78e6,_0x580d42){const _0x5350a8=a0_0xb3a314;let _0x249e42=getCurrentProject(),_0x449812=getCurrentFrame();if(_0x3a78e6<0x0||_0x580d42<0x0||_0x3a78e6>=_0x249e42[_0x5350a8(0x167)]||_0x580d42>=_0x249e42[_0x5350a8(0x11f)])return;let _0x21f13a=_0x449812[_0x5350a8(0x16e)][_0x449812[_0x5350a8(0x140)]]['canvas'][_0x5350a8(0x1e4)]('2d');if(currentTool==='eraser'||currentAlpha===0x0)drawPenShape(_0x21f13a,_0x3a78e6,_0x580d42,_0x5350a8(0xe3),!![]);else{let _0x71069a=hexToRgba(currentColor,currentAlpha);_0x21f13a[_0x5350a8(0x1a8)](),penAlphaMode===_0x5350a8(0xb8)&&currentAlpha<0x1?(_0x21f13a[_0x5350a8(0x1b8)]=0x1,_0x21f13a[_0x5350a8(0x148)]='destination-out',drawPenShape(_0x21f13a,_0x3a78e6,_0x580d42,_0x5350a8(0xe3),!![]),_0x21f13a['globalCompositeOperation']=_0x5350a8(0x89),_0x21f13a[_0x5350a8(0x1b8)]=_0x71069a[0x3]/0xff,drawPenShape(_0x21f13a,_0x3a78e6,_0x580d42,_0x5350a8(0x98)+_0x71069a[0x0]+','+_0x71069a[0x1]+','+_0x71069a[0x2]+','+_0x71069a[0x3]/0xff+')',![])):(_0x21f13a[_0x5350a8(0x1b8)]=_0x71069a[0x3]/0xff,drawPenShape(_0x21f13a,_0x3a78e6,_0x580d42,_0x5350a8(0x98)+_0x71069a[0x0]+','+_0x71069a[0x1]+','+_0x71069a[0x2]+','+_0x71069a[0x3]/0xff+')',![])),_0x21f13a[_0x5350a8(0x6b)]();}redrawAll();}function applyTheme(_0x295dd8){const _0xbb096e=a0_0xb3a314;document['documentElement'][_0xbb096e(0x199)](_0xbb096e(0x133),_0x295dd8);const _0x1ee2a5=document[_0xbb096e(0x1d9)](_0xbb096e(0xe4));_0x1ee2a5&&(_0x1ee2a5['textContent']=_0x295dd8==='dark'?'‚òÄÔ∏è':'üåô',_0x1ee2a5[_0xbb096e(0x199)](_0xbb096e(0x9a),_0x295dd8==='dark'),_0x1ee2a5['title']=_0x295dd8===_0xbb096e(0xf6)?'„É©„Ç§„Éà„ÉÜ„Éº„Éû„Å´ÂàáÊõø':_0xbb096e(0xf7)),localStorage[_0xbb096e(0xe1)]('nezumi-theme',_0x295dd8);}function toggleTheme(){const _0x3fa705=a0_0xb3a314;applyTheme(document['documentElement'][_0x3fa705(0xda)](_0x3fa705(0x133))===_0x3fa705(0xf6)?_0x3fa705(0x118):_0x3fa705(0xf6));}(function initTheme(){const _0x383fc1=a0_0xb3a314,_0x3e5faf=localStorage[_0x383fc1(0xe6)](_0x383fc1(0xac))||(window[_0x383fc1(0x6c)]&&window[_0x383fc1(0x6c)](_0x383fc1(0x11b))[_0x383fc1(0xa3)]?'dark':_0x383fc1(0x118));applyTheme(_0x3e5faf),document['addEventListener'](_0x383fc1(0x1e2),()=>{const _0x18b52c=_0x383fc1,_0x15354d=document[_0x18b52c(0x1d9)]('themeToggleBtn');_0x15354d&&(_0x15354d[_0x18b52c(0xec)](_0x18b52c(0x122),toggleTheme),_0x15354d[_0x18b52c(0xec)](_0x18b52c(0x146),_0x30d0b5=>{const _0x3ab486=_0x18b52c;(_0x30d0b5[_0x3ab486(0x1db)]===_0x3ab486(0x137)||_0x30d0b5[_0x3ab486(0x1db)]==='\x20')&&(_0x30d0b5[_0x3ab486(0x12f)](),toggleTheme());}));});}(),window[a0_0xb3a314(0x182)]=()=>{const _0x328567=a0_0xb3a314;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x328567(0x13a)),loadPaletteFromDB()[_0x328567(0x1e0)](()=>createPalette()),document[_0x328567(0x1d9)]('penSize')[_0x328567(0x153)]=penSize,document[_0x328567(0x1d9)](_0x328567(0x186))[_0x328567(0x153)]=penMode;const _0xc9ecd3=document[_0x328567(0x1d9)](_0x328567(0xa1)),_0x3bf002=document['getElementById'](_0x328567(0x11e));_0xc9ecd3&&_0x3bf002&&(_0xc9ecd3[_0x328567(0x153)]=animationDelay,_0x3bf002[_0x328567(0x153)]=animationDelay,_0xc9ecd3['oninput']=_0xf47c39=>{const _0x41424d=_0x328567;_0x3bf002['value']=_0xf47c39[_0x41424d(0x84)][_0x41424d(0x153)],setAnimationDelay(_0xf47c39['target'][_0x41424d(0x153)]);},_0x3bf002[_0x328567(0x100)]=_0x4577d7=>{const _0x586500=_0x328567;let _0x179160=Math[_0x586500(0xed)](0xa,Math[_0x586500(0x1d3)](0x1388,parseInt(_0x4577d7['target'][_0x586500(0x153)])||animationDelay));_0xc9ecd3['value']=_0x179160,_0x3bf002['value']=_0x179160,setAnimationDelay(_0x179160);}),canvas[_0x328567(0xd1)]=handleMouseMove,canvas[_0x328567(0xad)]=handleMouseUp,canvas[_0x328567(0x6f)]=handleMouseUp,canvas[_0x328567(0x175)]=handleTouchStart,canvas[_0x328567(0x93)]=handleTouchMove,canvas[_0x328567(0xfa)]=handleTouchEnd,canvas[_0x328567(0x1ea)]=handleTouchEnd,canvas[_0x328567(0xec)]('touchstart',handleTouchStart,{'passive':![]}),canvas['addEventListener'](_0x328567(0x77),handleTouchMove,{'passive':![]}),canvas['addEventListener'](_0x328567(0x1b0),handleTouchEnd,{'passive':![]}),canvas[_0x328567(0xec)](_0x328567(0x194),handleTouchEnd,{'passive':![]}),idbGet(_0x328567(0x8f))&&loadProjectFromIDB();});function drawGrid(_0x3559d6,_0x197403){const _0x6c61e=a0_0xb3a314;ctx[_0x6c61e(0x1a8)](),ctx[_0x6c61e(0x1bc)]=_0x6c61e(0x115);for(let _0x5a9c61=0x0;_0x5a9c61<=_0x3559d6;_0x5a9c61++){ctx[_0x6c61e(0x180)](),ctx['moveTo'](_0x5a9c61*cellSize,0x0),ctx['lineTo'](_0x5a9c61*cellSize,_0x197403*cellSize),ctx[_0x6c61e(0x120)]();}for(let _0x1dbb85=0x0;_0x1dbb85<=_0x197403;_0x1dbb85++){ctx[_0x6c61e(0x180)](),ctx['moveTo'](0x0,_0x1dbb85*cellSize),ctx[_0x6c61e(0x80)](_0x3559d6*cellSize,_0x1dbb85*cellSize),ctx[_0x6c61e(0x120)]();}ctx['restore']();}function redrawAll(){const _0x1bece8=a0_0xb3a314;let _0x43e64d=getCurrentProject(),_0x52c179=getCurrentFrame();canvas['width']=_0x43e64d['width']*cellSize,canvas[_0x1bece8(0x11f)]=_0x43e64d['height']*cellSize,ctx['clearRect'](0x0,0x0,canvas[_0x1bece8(0x167)],canvas[_0x1bece8(0x11f)]);for(let _0x3f4633=0x0;_0x3f4633<_0x52c179[_0x1bece8(0x16e)]['length'];_0x3f4633++){_0x52c179[_0x1bece8(0x16e)][_0x3f4633]['visible']!==![]&&ctx[_0x1bece8(0xc1)](_0x52c179[_0x1bece8(0x16e)][_0x3f4633][_0x1bece8(0xa2)],0x0,0x0);}drawGrid(_0x43e64d[_0x1bece8(0x167)],_0x43e64d[_0x1bece8(0x11f)]);wrapper&&(wrapper['style']['width']=_0x1bece8(0x13f),wrapper['style'][_0x1bece8(0x11f)]='auto');const _0x631736=document[_0x1bece8(0x1d9)](_0x1bece8(0x1d5));if(_0x631736){const _0x5541b5=scanImageColors();renderScanPanel(_0x5541b5),_0x631736['style']['display']='';}}function saveHistory(){const _0xb6e386=a0_0xb3a314;let _0x155d25=getCurrentFrame(),_0x46aeed=_0x155d25['layerHistories'][_0x155d25[_0xb6e386(0x140)]];_0x46aeed[_0xb6e386(0x7a)](_0x155d25[_0xb6e386(0x16e)][_0x155d25['activeLayer']][_0xb6e386(0xa2)][_0xb6e386(0x78)]());if(_0x46aeed[_0xb6e386(0x162)]>0x32)_0x46aeed[_0xb6e386(0x151)]();_0x155d25['layerRedoStacks'][_0x155d25[_0xb6e386(0x140)]]=[];}let copiedLayerDataUrl=null;function copyLayer(){const _0x14fddd=a0_0xb3a314,_0x5043ad=getCurrentFrame();if(!_0x5043ad)return;const _0xdcd9b7=_0x5043ad[_0x14fddd(0x140)];if(typeof _0xdcd9b7!==_0x14fddd(0x179)||!_0x5043ad[_0x14fddd(0x16e)][_0xdcd9b7])return;copiedLayerDataUrl=_0x5043ad['layers'][_0xdcd9b7]['canvas'][_0x14fddd(0x78)]();const _0x490a29=document[_0x14fddd(0x1d9)](_0x14fddd(0x10b));if(_0x490a29)_0x490a29[_0x14fddd(0x1d0)]=![];}function pasteLayer(){const _0x29de5f=a0_0xb3a314;if(!copiedLayerDataUrl)return;const _0x3b2e6d=getCurrentProject(),_0x5352fc=getCurrentFrame();if(!_0x3b2e6d||!_0x5352fc)return;const _0x480ace=document[_0x29de5f(0xd4)](_0x29de5f(0xa2));_0x480ace[_0x29de5f(0x167)]=_0x3b2e6d[_0x29de5f(0x167)]*cellSize,_0x480ace[_0x29de5f(0x11f)]=_0x3b2e6d[_0x29de5f(0x11f)]*cellSize;const _0x537684=_0x480ace[_0x29de5f(0x1e4)]('2d'),_0x1bbdcb=new Image();_0x1bbdcb['onload']=()=>{const _0x29f4f1=_0x29de5f;_0x537684[_0x29f4f1(0x1a0)](0x0,0x0,_0x480ace[_0x29f4f1(0x167)],_0x480ace[_0x29f4f1(0x11f)]),_0x537684['drawImage'](_0x1bbdcb,0x0,0x0),_0x5352fc['layers'][_0x29f4f1(0x7a)]({'canvas':_0x480ace,'visible':!![]}),_0x5352fc[_0x29f4f1(0x1d7)][_0x29f4f1(0x7a)]([]),_0x5352fc[_0x29f4f1(0x1d2)]['push']([]),_0x5352fc[_0x29f4f1(0x140)]=_0x5352fc[_0x29f4f1(0x16e)][_0x29f4f1(0x162)]-0x1,saveHistory(),updateLayerUI(),redrawAll();},_0x1bbdcb[_0x29de5f(0x158)]=copiedLayerDataUrl;}function undo(){const _0x93efd=a0_0xb3a314;let _0x2af433=getCurrentFrame(),_0x34d935=_0x2af433[_0x93efd(0x1d7)][_0x2af433[_0x93efd(0x140)]],_0x3639a7=_0x2af433[_0x93efd(0x1d2)][_0x2af433[_0x93efd(0x140)]];if(!_0x34d935||_0x34d935[_0x93efd(0x162)]<0x2)return;_0x3639a7['push'](_0x34d935[_0x93efd(0x1bf)]());let _0x50a233=new Image();_0x50a233[_0x93efd(0x182)]=()=>{const _0x376ce6=_0x93efd;let _0x3c81fe=_0x2af433[_0x376ce6(0x16e)][_0x2af433[_0x376ce6(0x140)]][_0x376ce6(0xa2)][_0x376ce6(0x1e4)]('2d');_0x3c81fe[_0x376ce6(0x1a0)](0x0,0x0,_0x2af433[_0x376ce6(0x16e)][_0x2af433['activeLayer']][_0x376ce6(0xa2)][_0x376ce6(0x167)],_0x2af433['layers'][_0x2af433['activeLayer']]['canvas'][_0x376ce6(0x11f)]),_0x3c81fe[_0x376ce6(0xc1)](_0x50a233,0x0,0x0),redrawAll();},_0x50a233[_0x93efd(0x158)]=_0x34d935[_0x34d935[_0x93efd(0x162)]-0x1];}function redo(){const _0x1eed2e=a0_0xb3a314;let _0x53f83c=getCurrentFrame(),_0x14028a=_0x53f83c[_0x1eed2e(0x1d7)][_0x53f83c['activeLayer']],_0x10247b=_0x53f83c[_0x1eed2e(0x1d2)][_0x53f83c[_0x1eed2e(0x140)]];if(!_0x10247b||_0x10247b[_0x1eed2e(0x162)]===0x0)return;_0x14028a[_0x1eed2e(0x162)]>0x0&&_0x10247b[_0x1eed2e(0x7a)](_0x14028a[_0x1eed2e(0x1bf)]());if(_0x10247b[_0x1eed2e(0x162)]===0x0)return;let _0x1974f2=_0x10247b[_0x1eed2e(0x1bf)]();_0x14028a[_0x1eed2e(0x7a)](_0x1974f2);let _0x4ac18a=new Image();_0x4ac18a[_0x1eed2e(0x182)]=()=>{const _0x3ef746=_0x1eed2e;let _0x273f50=_0x53f83c['layers'][_0x53f83c['activeLayer']][_0x3ef746(0xa2)][_0x3ef746(0x1e4)]('2d');_0x273f50[_0x3ef746(0x1a0)](0x0,0x0,_0x53f83c[_0x3ef746(0x16e)][_0x53f83c['activeLayer']][_0x3ef746(0xa2)][_0x3ef746(0x167)],_0x53f83c[_0x3ef746(0x16e)][_0x53f83c['activeLayer']]['canvas'][_0x3ef746(0x11f)]),_0x273f50['drawImage'](_0x4ac18a,0x0,0x0),redrawAll();},_0x4ac18a['src']=_0x1974f2;}function exportImage(_0x42e229){const _0x319dc6=a0_0xb3a314;let _0x59ec63=getCurrentProject(),_0x328e7a=_0x59ec63[_0x319dc6(0xb2)],_0x45ddc6=_0x42e229===_0x319dc6(0x203)||_0x42e229==='jpeg'?_0x319dc6(0x1c3):'image/'+_0x42e229,_0x5a3ca5=_0x328e7a[_0x319dc6(0x162)]>0x1,_0x50397e=(_0x59ec63['name']||_0x319dc6(0xa5))['replace'](/[\\/:*?"<>|]/g,'_');if(!_0x5a3ca5){let _0x314d6f=document[_0x319dc6(0xd4)](_0x319dc6(0xa2));_0x314d6f['width']=_0x59ec63['width']*cellSize,_0x314d6f['height']=_0x59ec63[_0x319dc6(0x11f)]*cellSize;let _0x23249a=_0x314d6f['getContext']('2d'),_0x3e2840=getCurrentFrame();for(let _0x3ae1db=0x0;_0x3ae1db<_0x3e2840[_0x319dc6(0x16e)][_0x319dc6(0x162)];_0x3ae1db++){_0x3e2840['layers'][_0x3ae1db][_0x319dc6(0x144)]!==![]&&_0x23249a['drawImage'](_0x3e2840[_0x319dc6(0x16e)][_0x3ae1db]['canvas'],0x0,0x0);}let _0x447a23=document[_0x319dc6(0xd4)]('a');_0x447a23[_0x319dc6(0x12a)]=_0x50397e+'.'+_0x42e229;if(_0x42e229===_0x319dc6(0x203)||_0x42e229===_0x319dc6(0xe8)){let _0x2f1b3e=getExportQuality(),_0x3a51dd=Math[_0x319dc6(0xed)](0.1,Math['min'](0x1,_0x2f1b3e/0xa));_0x447a23[_0x319dc6(0xd7)]=_0x314d6f[_0x319dc6(0x78)](_0x45ddc6,_0x3a51dd);}else _0x42e229===_0x319dc6(0xa9)?_0x447a23[_0x319dc6(0xd7)]=_0x314d6f[_0x319dc6(0x78)](_0x45ddc6):_0x447a23[_0x319dc6(0xd7)]=_0x314d6f['toDataURL'](_0x45ddc6);_0x447a23[_0x319dc6(0x122)]();}else{if(_0x42e229===_0x319dc6(0x134)&&typeof window['WebCodecs']!==_0x319dc6(0x1ff))exportWebpAnimation(_0x328e7a,_0x59ec63['width']*cellSize,_0x59ec63[_0x319dc6(0x11f)]*cellSize,_0x50397e);else for(let _0x1e5a06=0x0;_0x1e5a06<_0x328e7a[_0x319dc6(0x162)];_0x1e5a06++){let _0x10e1ff=document[_0x319dc6(0xd4)](_0x319dc6(0xa2));_0x10e1ff[_0x319dc6(0x167)]=_0x59ec63['width']*cellSize,_0x10e1ff[_0x319dc6(0x11f)]=_0x59ec63[_0x319dc6(0x11f)]*cellSize;let _0x5562bc=_0x10e1ff['getContext']('2d'),_0x4641be=_0x328e7a[_0x1e5a06];for(let _0x5a3049=0x0;_0x5a3049<_0x4641be[_0x319dc6(0x16e)][_0x319dc6(0x162)];_0x5a3049++){_0x4641be['layers'][_0x5a3049][_0x319dc6(0x144)]!==![]&&ctx[_0x319dc6(0xc1)](_0x4641be[_0x319dc6(0x16e)][_0x5a3049][_0x319dc6(0xa2)],0x0,0x0);}let _0x35c17c=document[_0x319dc6(0xd4)]('a');_0x35c17c[_0x319dc6(0x12a)]=_0x50397e+'-f'+(_0x1e5a06+0x1)+'.'+_0x42e229;if(_0x42e229===_0x319dc6(0x203)||_0x42e229==='jpeg'){let _0x12762a=getExportQuality(),_0x2f7196=Math[_0x319dc6(0xed)](0.1,Math[_0x319dc6(0x1d3)](0x1,_0x12762a/0xa));_0x35c17c[_0x319dc6(0xd7)]=_0x10e1ff[_0x319dc6(0x78)](_0x45ddc6,_0x2f7196);}else _0x42e229===_0x319dc6(0xa9)?_0x35c17c['href']=_0x10e1ff[_0x319dc6(0x78)](_0x45ddc6):_0x35c17c[_0x319dc6(0xd7)]=_0x10e1ff[_0x319dc6(0x78)](_0x45ddc6);setTimeout(()=>_0x35c17c[_0x319dc6(0x122)](),_0x1e5a06*0x64);}}}async function exportWebpAnimation(_0x316d74,_0x1a4960,_0x2deebe,_0x93012c='nezumi-animation'){const _0x4be8c1=a0_0xb3a314;if(!window[_0x4be8c1(0x170)]||!window[_0x4be8c1(0x101)]){alert('„Åì„ÅÆ„Éñ„É©„Ç¶„Ç∂„ÅØWebCodecs„Å´„Çà„ÇãWEBP„Ç¢„Éã„É°„Éº„Ç∑„Éß„É≥„Å´ÂØæÂøú„Åó„Å¶„ÅÑ„Åæ„Åõ„Çì„ÄÇ');return;}const _0x1d7798=[],_0x1f5321=new VideoEncoder({'output':_0x4b1c76=>_0x1d7798[_0x4be8c1(0x7a)](_0x4b1c76),'error':_0x2cf352=>console[_0x4be8c1(0xe7)](_0x2cf352)});_0x1f5321[_0x4be8c1(0xc3)]({'codec':_0x4be8c1(0xd5),'width':_0x1a4960,'height':_0x2deebe,'framerate':0x5});for(let _0x175b0d=0x0;_0x175b0d<_0x316d74[_0x4be8c1(0x162)];_0x175b0d++){let _0x4ce533=document[_0x4be8c1(0xd4)]('canvas');_0x4ce533[_0x4be8c1(0x167)]=_0x1a4960,_0x4ce533[_0x4be8c1(0x11f)]=_0x2deebe;let _0x5e8403=_0x4ce533['getContext']('2d'),_0x2f3a3f=_0x316d74[_0x175b0d];for(let _0x954397=0x0;_0x954397<_0x2f3a3f[_0x4be8c1(0x16e)]['length'];_0x954397++){_0x2f3a3f[_0x4be8c1(0x16e)][_0x954397][_0x4be8c1(0x144)]!==![]&&_0x5e8403[_0x4be8c1(0xc1)](_0x2f3a3f[_0x4be8c1(0x16e)][_0x954397]['canvas'],0x0,0x0);}let _0x24e7e5=await createImageBitmap(_0x4ce533);_0x1f5321[_0x4be8c1(0x12c)](_0x24e7e5,{'keyFrame':!![],'duration':0xc8}),_0x24e7e5[_0x4be8c1(0xbd)]();}await _0x1f5321[_0x4be8c1(0x94)](),_0x1f5321[_0x4be8c1(0xbd)]();const _0x44fa3d=new Blob(_0x1d7798[_0x4be8c1(0x1f7)](_0xaf5d28=>_0xaf5d28[_0x4be8c1(0x81)]?_0xaf5d28:_0xaf5d28['data']),{'type':'video/webm'}),_0x3c5380=document[_0x4be8c1(0xd4)]('a');_0x3c5380[_0x4be8c1(0x12a)]=_0x93012c+_0x4be8c1(0x10c),_0x3c5380['href']=URL['createObjectURL'](_0x44fa3d),_0x3c5380[_0x4be8c1(0x122)]();}function exportGif(){const _0x1b2f7e=a0_0xb3a314;let _0x24369d=getCurrentProject(),_0x307fe3=_0x24369d[_0x1b2f7e(0xb2)],_0xb80468=_0x24369d['width']*cellSize,_0x55925b=_0x24369d['height']*cellSize;const _0x18d3f4=_0x307fe3[_0x1b2f7e(0x1f7)](_0x4edb91=>{const _0x33a373=_0x1b2f7e;let _0xef9963=document[_0x33a373(0xd4)](_0x33a373(0xa2));_0xef9963[_0x33a373(0x167)]=_0xb80468,_0xef9963['height']=_0x55925b;let _0x13fc2b=_0xef9963['getContext']('2d');for(let _0x55a1ee=0x0;_0x55a1ee<_0x4edb91['layers'][_0x33a373(0x162)];_0x55a1ee++){_0x4edb91['layers'][_0x55a1ee][_0x33a373(0x144)]!==![]&&ctx[_0x33a373(0xc1)](_0x4edb91[_0x33a373(0x16e)][_0x55a1ee][_0x33a373(0xa2)],0x0,0x0);}return _0xef9963[_0x33a373(0x78)](_0x33a373(0xc2));});Promise[_0x1b2f7e(0x18d)](_0x18d3f4['map'](_0x31776a=>{return new Promise(_0x2e175b=>{const _0x5228a0=a0_0x1a92,_0x3c5719=new Image();_0x3c5719['src']=_0x31776a,_0x3c5719[_0x5228a0(0x182)]=()=>_0x2e175b(_0x3c5719);});}))['then'](_0x4fbbe4=>{const _0x58a774=_0x1b2f7e,_0x563e7a=_0x4fbbe4['filter'](_0x2332a3=>_0x2332a3[_0x58a774(0x167)]>0x0&&_0x2332a3[_0x58a774(0x11f)]>0x0);if(_0x563e7a[_0x58a774(0x162)]===0x0){alert(_0x58a774(0x6d));return;}const _0x2abd18=(_0x24369d['name']||_0x58a774(0x70))[_0x58a774(0xd9)](/[\\/:*?"<>|]/g,'_');let _0x5da77b=getExportQuality(),_0x2b4700=0x1f-_0x5da77b*0x3;convertToGIF(_0x563e7a,animationDelay,_0x2abd18+'.gif',_0x2b4700);});}function exportApng(){const _0x4e395b=a0_0xb3a314;let _0x238729=getCurrentProject(),_0x4642a3=_0x238729['frames'],_0x213398=_0x238729['width']*cellSize,_0x53fe35=_0x238729[_0x4e395b(0x11f)]*cellSize;const _0x577347=_0x4642a3[_0x4e395b(0x1f7)](_0x2ebfff=>{const _0x4be2f6=_0x4e395b;let _0x339f80=document[_0x4be2f6(0xd4)](_0x4be2f6(0xa2));_0x339f80['width']=_0x213398,_0x339f80['height']=_0x53fe35;let _0x1fcc8e=_0x339f80[_0x4be2f6(0x1e4)]('2d');for(let _0x11511a=0x0;_0x11511a<_0x2ebfff[_0x4be2f6(0x16e)][_0x4be2f6(0x162)];_0x11511a++){_0x1fcc8e[_0x4be2f6(0xc1)](_0x2ebfff[_0x4be2f6(0x16e)][_0x11511a][_0x4be2f6(0xa2)],0x0,0x0);}let _0x2c9e9d=new Image();return _0x2c9e9d[_0x4be2f6(0x158)]=_0x339f80[_0x4be2f6(0x78)](_0x4be2f6(0xc2)),_0x2c9e9d;}),_0x5105e8=(_0x238729[_0x4e395b(0x166)]||_0x4e395b(0x70))['replace'](/[\\/:*?"<>|]/g,'_');let _0x31c990=getExportQuality(),_0x46ab3e=Math[_0x4e395b(0xed)](0x0,Math[_0x4e395b(0x1d3)](0xa,0xb-_0x31c990));convertToAPNG(_0x577347,_0x213398,_0x53fe35,animationDelay,_0x5105e8+_0x4e395b(0x71),_0x46ab3e);}async function exportLayersAsGif(){const _0xf6ab2d=a0_0xb3a314,_0x48dc84=document[_0xf6ab2d(0x1d9)](_0xf6ab2d(0xf1));if(_0x48dc84)_0x48dc84['textContent']=_0xf6ab2d(0x1d1);const _0x296705=getCurrentProject();if(!_0x296705){if(_0x48dc84)_0x48dc84[_0xf6ab2d(0x165)]='';return;}const _0x426620=_0x296705[_0xf6ab2d(0xb2)],_0x3464b0=_0x296705[_0xf6ab2d(0x167)]*cellSize,_0x38859f=_0x296705[_0xf6ab2d(0x11f)]*cellSize;let _0x4b4fe8=0x0;_0x426620[_0xf6ab2d(0x1a3)](_0x5515e0=>{const _0x5f36f6=_0xf6ab2d;_0x4b4fe8=Math['max'](_0x4b4fe8,_0x5515e0[_0x5f36f6(0x16e)]['length']);});for(let _0x25df66=0x0;_0x25df66<_0x4b4fe8;_0x25df66++){const _0x314159=await Promise[_0xf6ab2d(0x18d)](_0x426620[_0xf6ab2d(0x1f7)](_0x2f4ac8=>{return new Promise(_0x199967=>{const _0x2c516b=a0_0x1a92,_0x3aa6f9=document[_0x2c516b(0xd4)](_0x2c516b(0xa2));_0x3aa6f9[_0x2c516b(0x167)]=_0x3464b0,_0x3aa6f9[_0x2c516b(0x11f)]=_0x38859f;const _0x218f12=_0x3aa6f9[_0x2c516b(0x1e4)]('2d');if(_0x2f4ac8[_0x2c516b(0x16e)][_0x25df66])_0x218f12[_0x2c516b(0xc1)](_0x2f4ac8[_0x2c516b(0x16e)][_0x25df66],0x0,0x0);const _0x586848=new Image();_0x586848[_0x2c516b(0x182)]=()=>_0x199967(_0x586848),_0x586848['src']=_0x3aa6f9[_0x2c516b(0x78)]('image/png');});})),_0xb1b03=_0x314159[_0xf6ab2d(0x205)](_0x21d364=>{const _0x86dda9=_0xf6ab2d,_0x4f7f6d=document[_0x86dda9(0xd4)](_0x86dda9(0xa2));_0x4f7f6d['width']=_0x3464b0,_0x4f7f6d[_0x86dda9(0x11f)]=_0x38859f;const _0x2b64f4=_0x4f7f6d[_0x86dda9(0x1e4)]('2d');_0x2b64f4['drawImage'](_0x21d364,0x0,0x0);const _0x3f9387=_0x2b64f4[_0x86dda9(0xc9)](0x0,0x0,_0x3464b0,_0x38859f)[_0x86dda9(0x9b)];for(let _0x5c49fe=0x3;_0x5c49fe<_0x3f9387['length'];_0x5c49fe+=0x4)if(_0x3f9387[_0x5c49fe]!==0x0)return!![];return![];});if(!_0xb1b03)continue;const _0x3f385e=(_0x296705['name']||'nezumi-animation')[_0xf6ab2d(0xd9)](/[\\/:*?"<>|]/g,'_')+(_0xf6ab2d(0xee)+(_0x25df66+0x1)+_0xf6ab2d(0x104));convertToGIF(_0x314159,animationDelay,_0x3f385e),await new Promise(_0x3b2082=>setTimeout(_0x3b2082,0x78));}if(_0x48dc84)_0x48dc84[_0xf6ab2d(0x165)]='';}async function exportLayersAsApng(){const _0x55053a=a0_0xb3a314,_0x425e26=document['getElementById'](_0x55053a(0xf1));if(_0x425e26)_0x425e26['textContent']=_0x55053a(0x1d1);const _0x4cb5f1=getCurrentProject();if(!_0x4cb5f1){if(_0x425e26)_0x425e26[_0x55053a(0x165)]='';return;}const _0xa6fdd=_0x4cb5f1[_0x55053a(0xb2)],_0x2578ae=_0x4cb5f1[_0x55053a(0x167)]*cellSize,_0x40fb62=_0x4cb5f1[_0x55053a(0x11f)]*cellSize;let _0x480835=0x0;_0xa6fdd[_0x55053a(0x1a3)](_0x42bbbd=>{const _0x4cb54e=_0x55053a;_0x480835=Math[_0x4cb54e(0xed)](_0x480835,_0x42bbbd[_0x4cb54e(0x16e)][_0x4cb54e(0x162)]);});for(let _0x308703=0x0;_0x308703<_0x480835;_0x308703++){const _0x1ea925=await Promise[_0x55053a(0x18d)](_0xa6fdd['map'](_0x495f56=>{return new Promise(_0xc4ed8e=>{const _0x2aac18=a0_0x1a92,_0x2a1783=document[_0x2aac18(0xd4)](_0x2aac18(0xa2));_0x2a1783[_0x2aac18(0x167)]=_0x2578ae,_0x2a1783[_0x2aac18(0x11f)]=_0x40fb62;const _0x140b82=_0x2a1783['getContext']('2d');if(_0x495f56[_0x2aac18(0x16e)][_0x308703])_0x140b82[_0x2aac18(0xc1)](_0x495f56[_0x2aac18(0x16e)][_0x308703],0x0,0x0);const _0x5db69f=new Image();_0x5db69f['onload']=()=>_0xc4ed8e(_0x5db69f),_0x5db69f['src']=_0x2a1783[_0x2aac18(0x78)](_0x2aac18(0xc2));});})),_0x1f96b5=_0x1ea925[_0x55053a(0x205)](_0x16f293=>{const _0x220aca=_0x55053a,_0x593326=document[_0x220aca(0xd4)]('canvas');_0x593326['width']=_0x2578ae,_0x593326[_0x220aca(0x11f)]=_0x40fb62;const _0x5a88a4=_0x593326['getContext']('2d');_0x5a88a4[_0x220aca(0xc1)](_0x16f293,0x0,0x0);const _0x2746a2=_0x5a88a4[_0x220aca(0xc9)](0x0,0x0,_0x2578ae,_0x40fb62)[_0x220aca(0x9b)];for(let _0x4934a4=0x3;_0x4934a4<_0x2746a2[_0x220aca(0x162)];_0x4934a4+=0x4)if(_0x2746a2[_0x4934a4]!==0x0)return!![];return![];});if(!_0x1f96b5)continue;const _0x569207=(_0x4cb5f1[_0x55053a(0x166)]||_0x55053a(0x70))[_0x55053a(0xd9)](/[\\/:*?"<>|]/g,'_')+('-layer'+(_0x308703+0x1)+_0x55053a(0x71));convertToAPNG(_0x1ea925,_0x2578ae,_0x40fb62,animationDelay,_0x569207),await new Promise(_0x4dc9b4=>setTimeout(_0x4dc9b4,0x78));}if(_0x425e26)_0x425e26[_0x55053a(0x165)]='';}async function exportFramesLayersZip(){const _0x9e014f=a0_0xb3a314,_0x20758c=document['getElementById']('layerExportStatus');if(_0x20758c)_0x20758c['textContent']=_0x9e014f(0x135);const _0x4cfc51=getCurrentProject();if(!_0x4cfc51){if(_0x20758c)_0x20758c['textContent']='';return;}const _0x466e01=_0x4cfc51['frames'],_0x56d9b1=_0x4cfc51[_0x9e014f(0x167)]*cellSize,_0x109567=_0x4cfc51[_0x9e014f(0x11f)]*cellSize,_0x3bb919=new JSZip();for(let _0x439bec=0x0;_0x439bec<_0x466e01['length'];_0x439bec++){const _0x410ad2=_0x466e01[_0x439bec],_0xcae715=_0x3bb919[_0x9e014f(0x76)](_0x9e014f(0x1ba)+(_0x439bec+0x1));for(let _0x55c316=0x0;_0x55c316<_0x410ad2[_0x9e014f(0x16e)]['length'];_0x55c316++){const _0x61f42d=document[_0x9e014f(0xd4)](_0x9e014f(0xa2));_0x61f42d['width']=_0x56d9b1,_0x61f42d['height']=_0x109567;const _0xf78c9f=_0x61f42d[_0x9e014f(0x1e4)]('2d');_0xf78c9f['clearRect'](0x0,0x0,_0x56d9b1,_0x109567);if(_0x410ad2[_0x9e014f(0x16e)][_0x55c316])_0xf78c9f['drawImage'](_0x410ad2[_0x9e014f(0x16e)][_0x55c316][_0x9e014f(0xa2)],0x0,0x0);const _0x58e26f=_0x61f42d[_0x9e014f(0x78)]('image/png'),_0x43143e=_0x58e26f[_0x9e014f(0x197)](',')[0x1],_0x39732a=atob(_0x43143e),_0x40d725=new Uint8Array(_0x39732a[_0x9e014f(0x162)]);for(let _0x403451=0x0;_0x403451<_0x39732a[_0x9e014f(0x162)];_0x403451++)_0x40d725[_0x403451]=_0x39732a['charCodeAt'](_0x403451);_0xcae715[_0x9e014f(0x15f)]('layer-'+(_0x55c316+0x1)+_0x9e014f(0xbe),_0x40d725);}}const _0x2e9e21=await _0x3bb919[_0x9e014f(0x10f)]({'type':'blob'}),_0x8ee54a=(_0x4cfc51[_0x9e014f(0x166)]||_0x9e014f(0x1c9))[_0x9e014f(0xd9)](/[\\/:*?"<>|]/g,'_'),_0x506318=document['createElement']('a');_0x506318[_0x9e014f(0xd7)]=URL[_0x9e014f(0x11c)](_0x2e9e21),_0x506318[_0x9e014f(0x12a)]=_0x8ee54a+_0x9e014f(0x1e9),document[_0x9e014f(0xaa)][_0x9e014f(0xd6)](_0x506318),_0x506318[_0x9e014f(0x122)](),setTimeout(()=>{const _0x281cae=_0x9e014f;URL[_0x281cae(0x110)](_0x506318[_0x281cae(0xd7)]),document[_0x281cae(0xaa)]['removeChild'](_0x506318);if(_0x20758c)_0x20758c['textContent']='';},0x4b0);}const dbName=a0_0xb3a314(0xa6),storeName=a0_0xb3a314(0x9c);function openDB(){return new Promise((_0x5948ff,_0x5c77f7)=>{const _0x5b238a=a0_0x1a92,_0x16dd17=indexedDB[_0x5b238a(0x1c5)](dbName,0x1);_0x16dd17[_0x5b238a(0x14c)]=()=>{const _0x5414ed=_0x5b238a;_0x16dd17[_0x5414ed(0x74)][_0x5414ed(0x1e8)](storeName);},_0x16dd17[_0x5b238a(0x185)]=()=>_0x5948ff(_0x16dd17[_0x5b238a(0x74)]),_0x16dd17[_0x5b238a(0xf5)]=()=>_0x5c77f7(_0x16dd17['error']);});}async function idbSet(_0x3b12dc,_0x23e3ab){const _0x4787f7=await openDB();return new Promise((_0x17b43e,_0x984869)=>{const _0x82a58f=a0_0x1a92,_0x91f5f1=_0x4787f7[_0x82a58f(0x160)](storeName,'readwrite');_0x91f5f1[_0x82a58f(0x7b)](storeName)[_0x82a58f(0x1b9)](_0x23e3ab,_0x3b12dc),_0x91f5f1[_0x82a58f(0x193)]=()=>_0x17b43e(),_0x91f5f1[_0x82a58f(0xf5)]=()=>_0x984869(_0x91f5f1[_0x82a58f(0xe7)]);});}async function idbGet(_0x1789ce){const _0x2e0a5f=await openDB();return new Promise((_0x5813c3,_0x449b6e)=>{const _0x1596b5=a0_0x1a92,_0x4a6d81=_0x2e0a5f['transaction'](storeName,'readonly'),_0x20b5a8=_0x4a6d81[_0x1596b5(0x7b)](storeName)[_0x1596b5(0xfb)](_0x1789ce);_0x20b5a8[_0x1596b5(0x185)]=()=>_0x5813c3(_0x20b5a8['result']),_0x20b5a8[_0x1596b5(0xf5)]=()=>_0x449b6e(_0x20b5a8[_0x1596b5(0xe7)]);});}async function idbDelete(_0x16347e){const _0x5d8884=await openDB();return new Promise((_0x810929,_0x400ae3)=>{const _0x188a12=a0_0x1a92,_0x4a2285=_0x5d8884['transaction'](storeName,_0x188a12(0x107));_0x4a2285[_0x188a12(0x7b)](storeName)['delete'](_0x16347e),_0x4a2285[_0x188a12(0x193)]=()=>_0x810929(),_0x4a2285['onerror']=()=>_0x400ae3(_0x4a2285['error']);});}async function idbClear(){const _0x25f09a=await openDB();return new Promise((_0x4949f6,_0x2db1e1)=>{const _0x54e6e2=a0_0x1a92,_0x5284a9=_0x25f09a[_0x54e6e2(0x160)](storeName,_0x54e6e2(0x107));_0x5284a9['objectStore'](storeName)['clear'](),_0x5284a9['oncomplete']=()=>_0x4949f6(),_0x5284a9[_0x54e6e2(0xf5)]=()=>_0x2db1e1(_0x5284a9['error']);});}function saveProjectFile(){const _0x549d4d=a0_0xb3a314,_0x41b66e={'projects':projects['map'](_0x35df9c=>({'width':_0x35df9c[_0x549d4d(0x167)],'height':_0x35df9c['height'],'name':_0x35df9c['name']||'','activeFrame':_0x35df9c[_0x549d4d(0xce)],'frames':_0x35df9c[_0x549d4d(0xb2)][_0x549d4d(0x1f7)](_0x4eac1d=>({'activeLayer':_0x4eac1d[_0x549d4d(0x140)],'layers':_0x4eac1d[_0x549d4d(0x16e)][_0x549d4d(0x1f7)](_0x37a77f=>_0x37a77f[_0x549d4d(0x78)]())}))})),'activeProject':activeProject},_0x528dab=new Blob([JSON[_0x549d4d(0x188)](_0x41b66e)],{'type':'application/json'}),_0x525bf3=document[_0x549d4d(0xd4)]('a');_0x525bf3[_0x549d4d(0x12a)]=_0x549d4d(0x169),_0x525bf3[_0x549d4d(0xd7)]=URL[_0x549d4d(0x11c)](_0x528dab),_0x525bf3[_0x549d4d(0x122)]();}function saveProjectFile(){const _0xe371ff=a0_0xb3a314,_0x2408d5={'projects':projects['map'](_0x43f0a9=>({'width':_0x43f0a9[_0xe371ff(0x167)],'height':_0x43f0a9['height'],'name':_0x43f0a9['name']||'','activeFrame':_0x43f0a9[_0xe371ff(0xce)],'frames':_0x43f0a9[_0xe371ff(0xb2)][_0xe371ff(0x1f7)](_0x1a3df2=>({'activeLayer':_0x1a3df2[_0xe371ff(0x140)],'layers':_0x1a3df2[_0xe371ff(0x16e)][_0xe371ff(0x1f7)](_0x2c9183=>_0x2c9183[_0xe371ff(0x78)]())}))})),'activeProject':activeProject},_0x30bd4d=new Blob([JSON[_0xe371ff(0x188)](_0x2408d5)],{'type':_0xe371ff(0x16a)}),_0x382e52=document[_0xe371ff(0xd4)]('a');_0x382e52['download']='nezumi-sketch.msketch',_0x382e52['href']=URL['createObjectURL'](_0x30bd4d),_0x382e52[_0xe371ff(0x122)]();}async function saveProjectToIDB(){const _0x4fea4a=a0_0xb3a314,_0x51d4e3={'projects':projects[_0x4fea4a(0x1f7)](_0xbaccc7=>({'width':_0xbaccc7['width'],'height':_0xbaccc7[_0x4fea4a(0x11f)],'name':_0xbaccc7[_0x4fea4a(0x166)]||'','activeFrame':_0xbaccc7[_0x4fea4a(0xce)],'frames':_0xbaccc7['frames'][_0x4fea4a(0x1f7)](_0xa0ccb5=>({'activeLayer':_0xa0ccb5['activeLayer'],'layers':_0xa0ccb5[_0x4fea4a(0x16e)][_0x4fea4a(0x1f7)](_0x2e1a16=>_0x2e1a16['canvas']?_0x2e1a16[_0x4fea4a(0xa2)][_0x4fea4a(0x78)]():_0x2e1a16[_0x4fea4a(0x78)]())}))})),'activeProject':activeProject};try{await idbSet('nezumi-sketch-save',_0x51d4e3),console[_0x4fea4a(0x1dc)]('„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíIndexedDB„Å´‰øùÂ≠ò„Åó„Åü„ÉÅ„É•„ÉºÔºÅ');}catch(_0x5b7137){console[_0x4fea4a(0xe7)](_0x4fea4a(0x1e5),_0x5b7137);}}setInterval(()=>{saveProjectToIDB();},0x2710),window[a0_0xb3a314(0xec)]('beforeunload',_0x5d4b58=>{saveProjectToIDB();});function loadProjectFile(_0x331365){const _0x45b27c=a0_0xb3a314,_0x418e7d=_0x331365[_0x45b27c(0x84)][_0x45b27c(0x187)][0x0];if(!_0x418e7d)return;if(_0x418e7d[_0x45b27c(0x17b)]&&_0x418e7d['type'][_0x45b27c(0x19a)](_0x45b27c(0xf4))){loadStandaloneFromFile(_0x418e7d)[_0x45b27c(0x1e0)](_0x5cfb1f=>{const _0x519d5b=_0x45b27c;alert(_0x519d5b(0xc4)+(_0x5cfb1f[_0x519d5b(0x166)]||'ÁîªÂÉè'));})['catch'](_0x4762a1=>{const _0x14ead2=_0x45b27c;console['warn'](_0x4762a1),alert(_0x14ead2(0xc6));});return;}const _0x12f3d0=new FileReader();_0x12f3d0[_0x45b27c(0x182)]=function(_0x283f1e){const _0x331a8d=_0x45b27c;try{const _0x3c429d=JSON[_0x331a8d(0x1c4)](_0x283f1e[_0x331a8d(0x84)][_0x331a8d(0x74)]);projects=_0x3c429d[_0x331a8d(0x88)][_0x331a8d(0x1f7)]((_0x26367f,_0x78aaee)=>{const _0x2a8ca9=_0x331a8d;let _0x54ae3c=createProject(_0x26367f[_0x2a8ca9(0x167)],_0x26367f['height'],_0x26367f[_0x2a8ca9(0x166)]||'ÁîªÂÉè'+(_0x78aaee+0x1));return _0x54ae3c[_0x2a8ca9(0xb2)]=_0x26367f[_0x2a8ca9(0xb2)][_0x2a8ca9(0x1f7)](_0x458ee2=>{const _0x7dbb14=_0x2a8ca9;let _0x400998={'layers':[],'activeLayer':_0x458ee2[_0x7dbb14(0x140)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x22f31f=0x0;_0x22f31f<_0x458ee2[_0x7dbb14(0x16e)]['length'];_0x22f31f++){let _0x6addba=new Image();_0x6addba[_0x7dbb14(0x158)]=_0x458ee2[_0x7dbb14(0x16e)][_0x22f31f];let _0x328434=document[_0x7dbb14(0xd4)]('canvas');_0x328434[_0x7dbb14(0x167)]=_0x26367f[_0x7dbb14(0x167)]*cellSize,_0x328434[_0x7dbb14(0x11f)]=_0x26367f['height']*cellSize,_0x6addba[_0x7dbb14(0x182)]=()=>{const _0x58c873=_0x7dbb14;let _0x20e829=_0x328434[_0x58c873(0x1e4)]('2d');_0x20e829['clearRect'](0x0,0x0,_0x328434[_0x58c873(0x167)],_0x328434['height']),_0x20e829[_0x58c873(0xc1)](_0x6addba,0x0,0x0);},_0x6addba[_0x7dbb14(0x182)](),_0x400998[_0x7dbb14(0x16e)]['push'](_0x328434),_0x400998[_0x7dbb14(0x1d7)]['push']([]),_0x400998['layerRedoStacks'][_0x7dbb14(0x7a)]([]);}return _0x400998;}),_0x54ae3c[_0x2a8ca9(0xce)]=_0x26367f[_0x2a8ca9(0xce)],_0x54ae3c[_0x2a8ca9(0x166)]=_0x26367f[_0x2a8ca9(0x166)]||'ÁîªÂÉè'+(_0x78aaee+0x1),_0x54ae3c;}),activeProject=_0x3c429d[_0x331a8d(0xe5)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x15dfb5){alert(_0x331a8d(0x1cd));}},_0x12f3d0[_0x45b27c(0x17a)](_0x418e7d);}async function loadProjectFromIDB(){const _0x1eb05f=a0_0xb3a314;try{const _0x2c0690=await idbGet('nezumi-sketch-save');if(!_0x2c0690)return;projects=_0x2c0690[_0x1eb05f(0x88)][_0x1eb05f(0x1f7)]((_0x1b2f52,_0x28ff1d)=>{const _0x325e10=_0x1eb05f;let _0xaec6fc=createProject(_0x1b2f52[_0x325e10(0x167)],_0x1b2f52['height'],_0x1b2f52[_0x325e10(0x166)]||'ÁîªÂÉè'+(_0x28ff1d+0x1));return _0xaec6fc[_0x325e10(0xb2)]=_0x1b2f52[_0x325e10(0xb2)][_0x325e10(0x1f7)](_0x496852=>{const _0x826e27=_0x325e10;let _0x1ae81f={'layers':[],'activeLayer':_0x496852['activeLayer'],'layerHistories':[],'layerRedoStacks':[]};for(let _0x28756d=0x0;_0x28756d<_0x496852['layers'][_0x826e27(0x162)];_0x28756d++){let _0x1c8232=new Image();_0x1c8232[_0x826e27(0x158)]=_0x496852[_0x826e27(0x16e)][_0x28756d];let _0x2c9e73=document[_0x826e27(0xd4)]('canvas');_0x2c9e73[_0x826e27(0x167)]=_0x1b2f52['width']*cellSize,_0x2c9e73[_0x826e27(0x11f)]=_0x1b2f52['height']*cellSize,_0x1c8232['onload']=()=>{const _0x14e4d0=_0x826e27;let _0x22755c=_0x2c9e73[_0x14e4d0(0x1e4)]('2d');_0x22755c['clearRect'](0x0,0x0,_0x2c9e73[_0x14e4d0(0x167)],_0x2c9e73[_0x14e4d0(0x11f)]),_0x22755c[_0x14e4d0(0xc1)](_0x1c8232,0x0,0x0);},_0x1ae81f[_0x826e27(0x16e)][_0x826e27(0x7a)]({'canvas':_0x2c9e73,'visible':!![]}),_0x1ae81f['layerHistories']['push']([]),_0x1ae81f[_0x826e27(0x1d2)][_0x826e27(0x7a)]([]);}return _0x1ae81f;}),_0xaec6fc[_0x325e10(0xce)]=_0x1b2f52[_0x325e10(0xce)],_0xaec6fc[_0x325e10(0x166)]=_0x1b2f52[_0x325e10(0x166)]||'ÁîªÂÉè'+(_0x28ff1d+0x1),_0xaec6fc;}),activeProject=_0x2c0690[_0x1eb05f(0xe5)]||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool(_0x1eb05f(0x13a)),console[_0x1eb05f(0x1dc)](_0x1eb05f(0x1f9));}catch(_0x2707be){alert(_0x1eb05f(0x10a)),console[_0x1eb05f(0xe7)](_0x2707be);}}function wait(_0x1b5c40){return new Promise(_0x2e9c13=>setTimeout(_0x2e9c13,_0x1b5c40));}function initCanvas(){const _0x12f1af=a0_0xb3a314,_0x416e24=parseInt(0x10),_0x1d9ed5=parseInt(0x10);let _0x41353a=getCurrentProject();_0x41353a[_0x12f1af(0x167)]=_0x416e24,_0x41353a[_0x12f1af(0x11f)]=_0x1d9ed5,canvas['width']=_0x416e24*cellSize,canvas[_0x12f1af(0x11f)]=_0x1d9ed5*cellSize,_0x41353a[_0x12f1af(0x16e)]=[],_0x41353a[_0x12f1af(0x1d7)]=[],_0x41353a[_0x12f1af(0x1d2)]=[];let _0x3d4366=document[_0x12f1af(0xd4)]('canvas');_0x3d4366[_0x12f1af(0x167)]=_0x416e24*cellSize,_0x3d4366[_0x12f1af(0x11f)]=_0x1d9ed5*cellSize,_0x41353a[_0x12f1af(0x16e)][_0x12f1af(0x7a)](_0x3d4366),_0x41353a[_0x12f1af(0x1d7)][_0x12f1af(0x7a)]([]),_0x41353a['layerRedoStacks'][_0x12f1af(0x7a)]([]),_0x41353a[_0x12f1af(0x140)]=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x12f1af(0x15c)]=null,canvas[_0x12f1af(0xd1)]=null,canvas[_0x12f1af(0xad)]=null,canvas[_0x12f1af(0x6f)]=null,canvas['ontouchstart']=null,canvas[_0x12f1af(0x93)]=null,canvas[_0x12f1af(0xfa)]=null,canvas[_0x12f1af(0x1ea)]=null,canvas['removeEventListener'](_0x12f1af(0x1c0),handleTouchStart),canvas[_0x12f1af(0xe0)]('touchmove',handleTouchMove),canvas[_0x12f1af(0xe0)](_0x12f1af(0x1b0),handleTouchEnd),canvas[_0x12f1af(0xe0)](_0x12f1af(0x194),handleTouchEnd),canvas[_0x12f1af(0x15c)]=handleMouseDown,canvas[_0x12f1af(0xd1)]=handleMouseMove,canvas[_0x12f1af(0xad)]=handleMouseUp,canvas[_0x12f1af(0x6f)]=handleMouseUp,canvas[_0x12f1af(0x175)]=handleTouchStart,canvas['ontouchmove']=handleTouchMove,canvas[_0x12f1af(0xfa)]=handleTouchEnd,canvas[_0x12f1af(0x1ea)]=handleTouchEnd,canvas['addEventListener'](_0x12f1af(0x1c0),handleTouchStart,{'passive':![]}),canvas[_0x12f1af(0xec)](_0x12f1af(0x77),handleTouchMove,{'passive':![]}),canvas[_0x12f1af(0xec)](_0x12f1af(0x1b0),handleTouchEnd,{'passive':![]}),canvas[_0x12f1af(0xec)]('touchcancel',handleTouchEnd,{'passive':![]});}function createPalette(){const _0x516c77=a0_0xb3a314,_0x336cfd=document['getElementById'](_0x516c77(0x131));if(!_0x336cfd)return;_0x336cfd[_0x516c77(0x79)]='',PALETTE_COLORS['forEach']((_0x4003b9,_0x1e374f)=>{const _0x1822c4=_0x516c77,_0xe5f5aa=document[_0x1822c4(0xd4)]('button');_0xe5f5aa[_0x1822c4(0x1ed)]=_0x1822c4(0x1be),_0xe5f5aa['style'][_0x1822c4(0x16c)]=_0x1822c4(0xa4),_0xe5f5aa['style'][_0x1822c4(0xfc)]='hidden',_0xe5f5aa[_0x1822c4(0x79)]='';let _0x17433d=document[_0x1822c4(0xd4)](_0x1822c4(0x1eb));_0x17433d['style'][_0x1822c4(0x16c)]=_0x1822c4(0x1dd),_0x17433d['style'][_0x1822c4(0xa7)]='0',_0x17433d[_0x1822c4(0x1e7)][_0x1822c4(0x16b)]='8px',_0x17433d[_0x1822c4(0x1e7)]['background']=_0x1822c4(0x126);let _0x4936d6=document[_0x1822c4(0xd4)]('div');_0x4936d6[_0x1822c4(0x1e7)][_0x1822c4(0x16c)]=_0x1822c4(0x1dd),_0x4936d6['style'][_0x1822c4(0xa7)]='0',_0x4936d6[_0x1822c4(0x1e7)]['borderRadius']=_0x1822c4(0x112);if(_0x4003b9==='transparent'||_0x4003b9===_0x1822c4(0xe3))_0x4936d6[_0x1822c4(0x1e7)][_0x1822c4(0x190)]=_0x1822c4(0x9e),_0xe5f5aa[_0x1822c4(0x14f)]='ÈÄèÊòé',_0xe5f5aa[_0x1822c4(0x79)]=_0x1822c4(0xdf);else{if(/^#([0-9a-f]{8})$/i[_0x1822c4(0x15b)](_0x4003b9)){_0x4936d6[_0x1822c4(0x1e7)]['background']=hexToRgbaCss(_0x4003b9,0x1);const [_0x51942c,_0x22908b,_0x24d8fb,_0x4bf1f3]=hexToRgba(_0x4003b9),_0x4cc4e0=_0x4bf1f3/0xff;_0xe5f5aa['title']=rgbaToHex(_0x51942c,_0x22908b,_0x24d8fb)+'\x20'+Math[_0x1822c4(0x1cb)](_0x4cc4e0*0x64)+'%';}else _0x4003b9[_0x1822c4(0x1ac)]()===currentColor[_0x1822c4(0x1ac)]()&&currentAlpha<0x1?(_0x4936d6['style'][_0x1822c4(0x190)]=hexToRgbaCss(_0x4003b9,currentAlpha),_0xe5f5aa[_0x1822c4(0x14f)]=_0x4003b9+'\x20ÈÄèÊòéÂ∫¶'+Math[_0x1822c4(0x1cb)](currentAlpha*0x64)+'%'):(_0x4936d6[_0x1822c4(0x1e7)][_0x1822c4(0x190)]=_0x4003b9,_0xe5f5aa[_0x1822c4(0x14f)]=_0x4003b9);}_0xe5f5aa['appendChild'](_0x17433d),_0xe5f5aa[_0x1822c4(0xd6)](_0x4936d6),_0xe5f5aa[_0x1822c4(0xb5)]=()=>{const _0x4173bd=_0x1822c4;if(_0x4003b9===_0x4173bd(0x150)||_0x4003b9==='#00000000')currentColor=_0x4173bd(0x150),currentAlpha=0x0;else{if(/^#([0-9a-f]{8})$/i['test'](_0x4003b9)){const [_0x2f3e44,_0x127815,_0x4f3da3,_0x57ed55]=hexToRgba(_0x4003b9);currentAlpha=_0x57ed55/0xff,currentColor=rgbaToHex(_0x2f3e44,_0x127815,_0x4f3da3);}else currentColor=_0x4003b9,currentAlpha=0x1;}updateCurrentColorSwatch(),document[_0x4173bd(0x168)](_0x4173bd(0x1f2))[_0x4173bd(0x1a3)](_0x2998fe=>_0x2998fe[_0x4173bd(0x1cf)][_0x4173bd(0x102)](_0x4173bd(0xfd))),_0xe5f5aa[_0x4173bd(0x1cf)][_0x4173bd(0xc8)](_0x4173bd(0xfd));};if(_0x1e374f!==0x0){const _0x5b439c=document[_0x1822c4(0xd4)](_0x1822c4(0x125));_0x5b439c[_0x1822c4(0x165)]='√ó',_0x5b439c[_0x1822c4(0x1ed)]=_0x1822c4(0x1b7),_0x5b439c[_0x1822c4(0x14f)]='„Åì„ÅÆËâ≤„Çí„Éë„É¨„ÉÉ„Éà„Åã„ÇâÂâäÈô§',_0x5b439c[_0x1822c4(0xb5)]=_0x5eca8a=>{const _0x28d668=_0x1822c4;_0x5eca8a['stopPropagation'](),PALETTE_COLORS[_0x28d668(0x162)]>0x2&&(PALETTE_COLORS[_0x28d668(0xdc)](_0x1e374f,0x1),createPalette());},_0xe5f5aa[_0x1822c4(0xd6)](_0x5b439c);}_0x336cfd[_0x1822c4(0xd6)](_0xe5f5aa);});const _0x23aeca=document['createElement']('button');_0x23aeca[_0x516c77(0x1ed)]=_0x516c77(0x17f),_0x23aeca[_0x516c77(0x14f)]=_0x516c77(0x191),_0x23aeca[_0x516c77(0x79)]='+',_0x23aeca['onclick']=_0x5880ac=>{const _0x5d4bf1=_0x516c77;_0x5880ac[_0x5d4bf1(0xfe)](),showColorPickerDialog({'color':currentColor===_0x5d4bf1(0x150)?'#000000':currentColor,'alpha':currentAlpha,'okLabel':'ËøΩÂä†','onChange':()=>{},'onOk':({hex:_0x27b808,rgba:_0x1e3590,a:_0x3384bc})=>{const _0x5031a9=_0x5d4bf1;if(_0x3384bc===0x0){if(PALETTE_COLORS[0x0]===_0x5031a9(0x150))PALETTE_COLORS[_0x5031a9(0xdc)](0x1,0x0,_0x5031a9(0x150));else PALETTE_COLORS[_0x5031a9(0x19f)](_0x5031a9(0x150));}else{const _0x5689c0=Math[_0x5031a9(0x1cb)](_0x3384bc*0xff),_0x462bdf=_0x5689c0[_0x5031a9(0x152)](0x10)[_0x5031a9(0x1c8)](0x2,'0');PALETTE_COLORS[_0x5031a9(0x19f)](''+_0x27b808+_0x462bdf);}if(PALETTE_COLORS[_0x5031a9(0x162)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x5031a9(0x12e)](0x0,0x18);savePaletteToDB(),createPalette();}});},_0x336cfd[_0x516c77(0x106)](_0x23aeca,_0x336cfd[_0x516c77(0x171)]);const _0x781774=document['getElementById'](_0x516c77(0x1d5));if(_0x781774)_0x781774['style'][_0x516c77(0x1a1)]='';}function setAlpha(_0x5d096c){let _0x1f9be5=Math['max'](0x0,Math['min'](0x64,parseInt(_0x5d096c,0xa)||0x0));currentAlpha=_0x1f9be5/0x64,updateCurrentColorSwatch();}async function savePaletteToDB(){const _0x420315=a0_0xb3a314;try{await idbSet(_0x420315(0x15a),PALETTE_COLORS);}catch(_0x32dbf6){console[_0x420315(0xe7)]('‰øùÂ≠ò„Ç®„É©„Éº',_0x32dbf6);}}async function loadPaletteFromDB(){const _0x20655c=a0_0xb3a314;try{const _0xd62ae0=await idbGet(_0x20655c(0x15a));Array[_0x20655c(0x17e)](_0xd62ae0)&&_0xd62ae0['length']&&(PALETTE_COLORS=_0xd62ae0);}catch(_0x1e4168){console[_0x20655c(0xe7)]('Ë™≠Ëæº„Ç®„É©„Éº',_0x1e4168);}}document[a0_0xb3a314(0xec)](a0_0xb3a314(0x1e2),()=>{const _0x5b24c3=a0_0xb3a314,_0x3cb31d=document['getElementById'](_0x5b24c3(0x183)),_0x523e8f=document[_0x5b24c3(0x1d9)](_0x5b24c3(0x124));function _0x4364f9(){const _0x53659e=_0x5b24c3;if(document[_0x53659e(0x1d9)](_0x53659e(0xbb)))return;const _0x47eb08=document[_0x53659e(0xd4)](_0x53659e(0x1eb));_0x47eb08['id']=_0x53659e(0xbb),_0x47eb08['style'][_0x53659e(0x16c)]='fixed',_0x47eb08['style'][_0x53659e(0xb3)]='0',_0x47eb08[_0x53659e(0x1e7)][_0x53659e(0x1df)]='0',_0x47eb08[_0x53659e(0x1e7)][_0x53659e(0x167)]='100vw',_0x47eb08[_0x53659e(0x1e7)][_0x53659e(0x11f)]=_0x53659e(0x99),_0x47eb08[_0x53659e(0x1e7)][_0x53659e(0x1a1)]=_0x53659e(0x96),_0x47eb08[_0x53659e(0x1e7)][_0x53659e(0x127)]=_0x53659e(0x1f5),_0x47eb08[_0x53659e(0x1e7)][_0x53659e(0x19c)]=_0x53659e(0x1f5),_0x47eb08['style']['zIndex']='4000',_0x47eb08['style'][_0x53659e(0x190)]='rgba(0,0,0,0.25)',_0x47eb08['innerHTML']=_0x53659e(0x8a)+(currentColor===_0x53659e(0x150)?_0x53659e(0x86):currentColor)+_0x53659e(0xab)+Math[_0x53659e(0x1cb)](currentAlpha*0x64)+_0x53659e(0x130),document[_0x53659e(0xaa)]['appendChild'](_0x47eb08),_0x47eb08[_0x53659e(0x12b)](_0x53659e(0x1a4))[_0x53659e(0xb5)]=()=>{const _0x351156=_0x53659e,_0x5b1a56=_0x47eb08['querySelector'](_0x351156(0x1c7));_0x5b1a56[_0x351156(0x153)]=0x0,_0x47eb08[_0x351156(0x12b)](_0x351156(0x204))[_0x351156(0x153)]=_0x351156(0x86);},_0x47eb08[_0x53659e(0x12b)](_0x53659e(0x15e))[_0x53659e(0xb5)]=()=>{const _0x5a1cc7=_0x53659e,_0x45f9e4=_0x47eb08['querySelector']('#dlgColor')[_0x5a1cc7(0x153)],_0x55636f=Math['max'](0x0,Math[_0x5a1cc7(0x1d3)](0x64,parseInt(_0x47eb08[_0x5a1cc7(0x12b)](_0x5a1cc7(0x1c7))[_0x5a1cc7(0x153)],0xa)||0x0));if(_0x55636f===0x0){currentAlpha=0x0,currentColor='transparent';if(_0x3cb31d)_0x3cb31d[_0x5a1cc7(0x153)]='#000000';}else{currentAlpha=_0x55636f/0x64,currentColor=_0x45f9e4;if(_0x3cb31d)_0x3cb31d[_0x5a1cc7(0x153)]=_0x45f9e4;}updateCurrentColorSwatch(),document[_0x5a1cc7(0x168)](_0x5a1cc7(0x1f2))[_0x5a1cc7(0x1a3)](_0x1940e6=>_0x1940e6[_0x5a1cc7(0x1cf)][_0x5a1cc7(0x102)](_0x5a1cc7(0xfd))),_0x47eb08['remove']();},_0x47eb08['querySelector']('#dlgCancelBtn')[_0x53659e(0xb5)]=()=>_0x47eb08[_0x53659e(0x102)](),_0x47eb08['addEventListener']('click',_0x3afa8f=>{const _0x50a533=_0x53659e;if(_0x3afa8f[_0x50a533(0x84)]===_0x47eb08)_0x47eb08['remove']();});}_0x3cb31d&&(_0x3cb31d[_0x5b24c3(0x7f)]=_0x42c879=>{const _0x552078=_0x5b24c3,_0x1326eb=_0x42c879[_0x552078(0x84)][_0x552078(0x153)];if(/^#([0-9a-f]{8})$/i['test'](_0x1326eb)){const _0x38e83b='#'+_0x1326eb[_0x552078(0x12e)](0x1,0x7),_0x4d77d5=_0x1326eb[_0x552078(0x12e)](0x7,0x9);currentColor=_0x38e83b,currentAlpha=parseInt(_0x4d77d5,0x10)/0xff;if(currentAlpha===0x0)currentColor=_0x552078(0x150);_0x3cb31d[_0x552078(0x153)]=_0x38e83b;}else currentColor=_0x1326eb,currentAlpha=0x1;updateCurrentColorSwatch(),document[_0x552078(0x168)](_0x552078(0x1f2))[_0x552078(0x1a3)](_0x15e8f2=>_0x15e8f2[_0x552078(0x1cf)][_0x552078(0x102)](_0x552078(0xfd)));});_0x523e8f&&(_0x523e8f[_0x5b24c3(0xb5)]=_0x4364f9);const _0x2f2727=document[_0x5b24c3(0x1d9)]('scanColorsPanel');if(_0x2f2727){const _0x2d0b78=scanImageColors();renderScanPanel(_0x2d0b78),_0x2f2727[_0x5b24c3(0x1e7)][_0x5b24c3(0x1a1)]='';}const _0xf2e040=document[_0x5b24c3(0x1d9)](_0x5b24c3(0x7e)),_0x5579d6=document['getElementById'](_0x5b24c3(0x10b)),_0x1f61ff=document[_0x5b24c3(0x1d9)]('exportLayerGifBtn'),_0x10c487=document[_0x5b24c3(0x1d9)](_0x5b24c3(0x128)),_0x269b0f=document[_0x5b24c3(0x1d9)](_0x5b24c3(0x147)),_0x1db00b=document[_0x5b24c3(0x1d9)]('nudgeDownBtn'),_0x3ebc88=document[_0x5b24c3(0x1d9)](_0x5b24c3(0xff)),_0x552d12=document[_0x5b24c3(0x1d9)](_0x5b24c3(0x90)),_0x257be8=document['getElementById'](_0x5b24c3(0x103));if(_0xf2e040)_0xf2e040[_0x5b24c3(0xb5)]=()=>{copyLayer();};if(_0x5579d6)_0x5579d6[_0x5b24c3(0xb5)]=()=>{pasteLayer();};if(_0x5579d6)_0x5579d6['disabled']=!copiedLayerDataUrl;if(_0x1f61ff)_0x1f61ff[_0x5b24c3(0xb5)]=()=>{exportLayersAsGif();};if(_0x10c487)_0x10c487[_0x5b24c3(0xb5)]=()=>{exportLayersAsApng();};if(_0x269b0f)_0x269b0f[_0x5b24c3(0xb5)]=()=>{const _0x184c48=_0x5b24c3;let _0x2e861a=parseInt(_0x257be8&&_0x257be8[_0x184c48(0x153)]?_0x257be8[_0x184c48(0x153)]:0x1,0xa);if(isNaN(_0x2e861a)||_0x2e861a<0x1)_0x2e861a=0x1;nudgeActiveLayer(0x0,-_0x2e861a);};if(_0x1db00b)_0x1db00b[_0x5b24c3(0xb5)]=()=>{const _0x12b5b0=_0x5b24c3;let _0x3cb5ee=parseInt(_0x257be8&&_0x257be8[_0x12b5b0(0x153)]?_0x257be8['value']:0x1,0xa);if(isNaN(_0x3cb5ee)||_0x3cb5ee<0x1)_0x3cb5ee=0x1;nudgeActiveLayer(0x0,_0x3cb5ee);};if(_0x3ebc88)_0x3ebc88[_0x5b24c3(0xb5)]=()=>{const _0x5c5978=_0x5b24c3;let _0x11e5a7=parseInt(_0x257be8&&_0x257be8['value']?_0x257be8[_0x5c5978(0x153)]:0x1,0xa);if(isNaN(_0x11e5a7)||_0x11e5a7<0x1)_0x11e5a7=0x1;nudgeActiveLayer(-_0x11e5a7,0x0);};if(_0x552d12)_0x552d12[_0x5b24c3(0xb5)]=()=>{const _0x10914e=_0x5b24c3;let _0x537807=parseInt(_0x257be8&&_0x257be8[_0x10914e(0x153)]?_0x257be8['value']:0x1,0xa);if(isNaN(_0x537807)||_0x537807<0x1)_0x537807=0x1;nudgeActiveLayer(_0x537807,0x0);};(function _0x91488(){const _0x4c28f9=_0x5b24c3,_0x566e70=document[_0x4c28f9(0x1d9)]('exportFramesZipBtn');if(typeof JSZip!=='undefined'){if(_0x566e70)_0x566e70[_0x4c28f9(0x1d0)]=![];return;}const _0x1ac633=document['createElement'](_0x4c28f9(0x13e));_0x1ac633[_0x4c28f9(0x158)]=_0x4c28f9(0x1a9),_0x1ac633[_0x4c28f9(0x182)]=()=>{const _0x55c196=_0x4c28f9;console[_0x55c196(0x1b3)]('Loaded\x20JSZip\x20fallback\x20from\x20jsDelivr');if(_0x566e70)_0x566e70[_0x55c196(0x1d0)]=![];},_0x1ac633[_0x4c28f9(0xf5)]=()=>{const _0x75c1cd=_0x4c28f9;console[_0x75c1cd(0x198)](_0x75c1cd(0x8b)),_0x566e70&&(_0x566e70['disabled']=!![],_0x566e70[_0x75c1cd(0x14f)]=_0x75c1cd(0x9f));},document['head']['appendChild'](_0x1ac633);}());let _0x37423a={'active':![],'startCell':null,'offsetCells':{'x':0x0,'y':0x0}};document[_0x5b24c3(0xec)]('keydown',_0x3bde0b=>{const _0x45215f=_0x5b24c3,_0x206a93=_0x3bde0b[_0x45215f(0x84)],_0x4c719e=_0x206a93&&(_0x206a93[_0x45215f(0x1ec)]===_0x45215f(0x19b)||_0x206a93['tagName']===_0x45215f(0x1bb)||_0x206a93[_0x45215f(0x20c)]);if(!_0x4c719e){const _0x333e2f=_0x3bde0b['ctrlKey']||_0x3bde0b[_0x45215f(0x201)];if(_0x333e2f&&(_0x3bde0b[_0x45215f(0x1db)]==='z'||_0x3bde0b[_0x45215f(0x1db)]==='Z')){_0x3bde0b['preventDefault']();_0x3bde0b[_0x45215f(0xcd)]?redo():undo();return;}if(_0x333e2f&&(_0x3bde0b[_0x45215f(0x1db)]==='y'||_0x3bde0b[_0x45215f(0x1db)]==='Y')){_0x3bde0b[_0x45215f(0x12f)](),redo();return;}}if(currentTool==='moveLayer'){const _0x44c769=(_0x3bde0b['shiftKey']?0x5:0x1)*(parseInt(_0x257be8?_0x257be8['value']:0x1,0xa)||0x1);if(_0x3bde0b[_0x45215f(0x1db)]===_0x45215f(0x1b2))_0x3bde0b[_0x45215f(0x12f)](),nudgeActiveLayer(-_0x44c769,0x0);else{if(_0x3bde0b[_0x45215f(0x1db)]===_0x45215f(0x1af))_0x3bde0b['preventDefault'](),nudgeActiveLayer(_0x44c769,0x0);else{if(_0x3bde0b[_0x45215f(0x1db)]===_0x45215f(0x117))_0x3bde0b[_0x45215f(0x12f)](),nudgeActiveLayer(0x0,-_0x44c769);else _0x3bde0b[_0x45215f(0x1db)]===_0x45215f(0x11d)&&(_0x3bde0b['preventDefault'](),nudgeActiveLayer(0x0,_0x44c769));}}}if(!_0x4c719e&&_0x3bde0b[_0x45215f(0x1db)]&&_0x3bde0b[_0x45215f(0x1db)]['toLowerCase']()==='i'){_0x3bde0b[_0x45215f(0x12f)](),colorPickMode=!colorPickMode;if(canvas)canvas['style'][_0x45215f(0x164)]=colorPickMode?_0x45215f(0x1e3):_0x45215f(0x108);return;}}),function _0x10e50c(){const _0x3c9dd2=_0x5b24c3,_0x2da076=document[_0x3c9dd2(0x1d9)](_0x3c9dd2(0x19e));if(typeof JSZip!==_0x3c9dd2(0x1ff)){if(_0x2da076)_0x2da076['disabled']=![];return;}const _0x269349=document['createElement'](_0x3c9dd2(0x13e));_0x269349['src']=_0x3c9dd2(0x1a9),_0x269349['onload']=()=>{const _0x20e4bd=_0x3c9dd2;if(_0x2da076)_0x2da076[_0x20e4bd(0x1d0)]=![];},_0x269349[_0x3c9dd2(0xf5)]=()=>{const _0x5ba549=_0x3c9dd2;_0x2da076&&(_0x2da076[_0x5ba549(0x1d0)]=!![],_0x2da076['title']=_0x5ba549(0x9f));},document[_0x3c9dd2(0x1f4)][_0x3c9dd2(0xd6)](_0x269349);}();});function shiftLayerCanvas(_0x8fd7a0,_0x1e882b,_0x2e816e){const _0x39ab33=a0_0xb3a314;if(!_0x8fd7a0)return;const _0x1d36d5=_0x8fd7a0[_0x39ab33(0x167)],_0x5d443d=_0x8fd7a0[_0x39ab33(0x11f)],_0xe39c07=document[_0x39ab33(0xd4)](_0x39ab33(0xa2));_0xe39c07[_0x39ab33(0x167)]=_0x1d36d5,_0xe39c07[_0x39ab33(0x11f)]=_0x5d443d;const _0x49fe39=_0xe39c07[_0x39ab33(0x1e4)]('2d');_0x49fe39[_0x39ab33(0x1a0)](0x0,0x0,_0x1d36d5,_0x5d443d),_0x49fe39[_0x39ab33(0xc1)](_0x8fd7a0,0x0,0x0);const _0x50cfe9=_0x8fd7a0[_0x39ab33(0x1e4)]('2d');_0x50cfe9[_0x39ab33(0x1a0)](0x0,0x0,_0x1d36d5,_0x5d443d),_0x50cfe9[_0x39ab33(0xc1)](_0xe39c07,_0x1e882b,_0x2e816e);}function nudgeActiveLayer(_0x4acc2d,_0x480959){const _0x4b0615=getCurrentProject();if(!_0x4b0615)return;const _0x25184f=getCurrentFrame();if(!_0x25184f)return;const _0x251d8a=_0x25184f['activeLayer'];if(_0x251d8a==null)return;const _0x2117f8=(_0x4acc2d||0x0)*cellSize,_0x447eee=(_0x480959||0x0)*cellSize;if(_0x2117f8===0x0&&_0x447eee===0x0)return;saveHistory(),shiftLayerCanvas(_0x25184f['layers'][_0x251d8a],_0x2117f8,_0x447eee),redrawAll();}function startLayerMove(_0x4f1c94){const _0x220505=a0_0xb3a314;layerMoveState[_0x220505(0x113)]=!![];const _0x27c3ce=getCanvasCoords(_0x4f1c94);layerMoveState[_0x220505(0x145)]={'x':Math[_0x220505(0xeb)](_0x27c3ce['x']/cellSize),'y':Math[_0x220505(0xeb)](_0x27c3ce['y']/cellSize)},layerMoveState[_0x220505(0xa8)]={'x':0x0,'y':0x0};}function updateLayerMove(_0x489243){const _0x1a05d1=a0_0xb3a314;if(!layerMoveState[_0x1a05d1(0x113)])return;const _0x2dfdd1=getCanvasCoords(_0x489243),_0x3d0b6f={'x':Math[_0x1a05d1(0xeb)](_0x2dfdd1['x']/cellSize),'y':Math[_0x1a05d1(0xeb)](_0x2dfdd1['y']/cellSize)};layerMoveState[_0x1a05d1(0xa8)]['x']=_0x3d0b6f['x']-layerMoveState[_0x1a05d1(0x145)]['x'],layerMoveState[_0x1a05d1(0xa8)]['y']=_0x3d0b6f['y']-layerMoveState[_0x1a05d1(0x145)]['y'],redrawAll();const _0x43c854=getCurrentFrame();if(!_0x43c854)return;const _0x1db6aa=_0x43c854[_0x1a05d1(0x140)];if(_0x1db6aa==null)return;ctx[_0x1a05d1(0x1a8)](),ctx[_0x1a05d1(0xde)](layerMoveState[_0x1a05d1(0xa8)]['x']*cellSize,layerMoveState['offsetCells']['y']*cellSize),ctx[_0x1a05d1(0xc1)](_0x43c854[_0x1a05d1(0x16e)][_0x1db6aa][_0x1a05d1(0xa2)],0x0,0x0),ctx[_0x1a05d1(0x6b)]();}function endLayerMove(_0x313f18){const _0x59dea1=a0_0xb3a314;if(!layerMoveState[_0x59dea1(0x113)])return;const _0xdf5f87=layerMoveState['offsetCells']['x']*cellSize,_0x5562cd=layerMoveState[_0x59dea1(0xa8)]['y']*cellSize;if(_0xdf5f87!==0x0||_0x5562cd!==0x0){saveHistory();const _0x345347=getCurrentFrame();_0x345347&&typeof _0x345347['activeLayer']===_0x59dea1(0x179)&&shiftLayerCanvas(_0x345347[_0x59dea1(0x16e)][_0x345347[_0x59dea1(0x140)]],_0xdf5f87,_0x5562cd);}layerMoveState[_0x59dea1(0x113)]=![],layerMoveState[_0x59dea1(0x145)]=null,layerMoveState['offsetCells']={'x':0x0,'y':0x0},redrawAll();}const origHandleMouseDown=handleMouseDown;handleMouseDown=function(_0x1070ba){const _0x14cca2=a0_0xb3a314;if(colorPickMode){onCanvasColorPick(_0x1070ba);return;}if(currentTool===_0x14cca2(0x18e)){startLayerMove(_0x1070ba);return;}origHandleMouseDown(_0x1070ba);};const origHandleMouseMove=handleMouseMove;handleMouseMove=function(_0x56323d){if(currentTool==='moveLayer'){updateLayerMove(_0x56323d);return;}origHandleMouseMove(_0x56323d);};const origHandleMouseUp=handleMouseUp;handleMouseUp=function(_0x2dd27a){const _0x330e4e=a0_0xb3a314;if(currentTool===_0x330e4e(0x18e)){endLayerMove(_0x2dd27a);return;}origHandleMouseUp(_0x2dd27a);};function scanImageColors(){const _0xf92469=a0_0xb3a314,_0x211ff9=getCurrentProject(),_0x14d76c=getCurrentFrame();if(!_0x211ff9||!_0x14d76c)return[];const _0x23a3bb=new Map(),_0x132170=_0x211ff9['width'],_0x133331=_0x211ff9[_0xf92469(0x11f)],_0x45d134=canvas[_0xf92469(0x1e4)]('2d',{'willReadFrequently':!![]});for(let _0x34f8c8=0x0;_0x34f8c8<_0x133331;_0x34f8c8++){for(let _0x2132da=0x0;_0x2132da<_0x132170;_0x2132da++){const _0x33e585=Math[_0xf92469(0x1d3)](Math[_0xf92469(0xeb)](_0x2132da*cellSize+cellSize/0x2),canvas[_0xf92469(0x167)]-0x1),_0x404cd7=Math['min'](Math[_0xf92469(0xeb)](_0x34f8c8*cellSize+cellSize/0x2),canvas[_0xf92469(0x11f)]-0x1),_0x2d95f0=_0x45d134[_0xf92469(0xc9)](_0x33e585,_0x404cd7,0x1,0x1)[_0xf92469(0x9b)],_0x5d3b46=_0x2d95f0[0x0]+','+_0x2d95f0[0x1]+','+_0x2d95f0[0x2]+','+_0x2d95f0[0x3];_0x23a3bb['set'](_0x5d3b46,(_0x23a3bb['get'](_0x5d3b46)||0x0)+0x1);}}const _0x48096c=Array[_0xf92469(0x123)](_0x23a3bb[_0xf92469(0x1a2)]())['map'](([_0x536df7,_0x22dccd])=>{const _0x315824=_0xf92469,[_0x95936f,_0x5c6c4f,_0x2b917c,_0x153917]=_0x536df7['split'](',')[_0x315824(0x1f7)](_0x27acbe=>parseInt(_0x27acbe,0xa));return{'r':_0x95936f,'g':_0x5c6c4f,'b':_0x2b917c,'a':_0x153917,'count':_0x22dccd};})['sort']((_0x1ec0dd,_0x4d0ff5)=>_0x4d0ff5[_0xf92469(0x1bd)]-_0x1ec0dd[_0xf92469(0x1bd)]);return _0x48096c;}function renderScanPanel(_0x109e4c){const _0x4d96d0=a0_0xb3a314,_0x3066dd=document[_0x4d96d0(0x1d9)](_0x4d96d0(0x1d5));if(!_0x3066dd)return;_0x3066dd[_0x4d96d0(0x79)]='';if(!_0x109e4c||_0x109e4c['length']===0x0){_0x3066dd[_0x4d96d0(0x165)]=_0x4d96d0(0x9d);return;}const _0x271eef=document[_0x4d96d0(0xd4)]('div');_0x271eef[_0x4d96d0(0x1ed)]=_0x4d96d0(0x72),_0x109e4c[_0x4d96d0(0x1a3)](_0x4e5255=>{const _0x293f53=_0x4d96d0,_0x1eb038=document['createElement'](_0x293f53(0x1eb));_0x1eb038[_0x293f53(0x1ed)]=_0x293f53(0x1a5);const _0x3df5c8=document['createElement'](_0x293f53(0x1eb));_0x3df5c8[_0x293f53(0x1ed)]=_0x293f53(0xe2);_0x4e5255['a']===0x0?_0x3df5c8[_0x293f53(0x1cf)][_0x293f53(0xc8)](_0x293f53(0x200)):_0x3df5c8[_0x293f53(0x1e7)][_0x293f53(0x190)]=_0x293f53(0x98)+_0x4e5255['r']+','+_0x4e5255['g']+','+_0x4e5255['b']+','+(_0x4e5255['a']/0xff)[_0x293f53(0x1c6)](0x2)+')';const _0x2b5270=document[_0x293f53(0xd4)]('div');_0x2b5270[_0x293f53(0x1ed)]=_0x293f53(0x206),_0x2b5270[_0x293f53(0x165)]=_0x4e5255['a']===0x0?'ÈÄèÊòé':_0x4e5255['a']===0xff?rgbaToHex(_0x4e5255['r'],_0x4e5255['g'],_0x4e5255['b']):_0x293f53(0x98)+_0x4e5255['r']+','+_0x4e5255['g']+','+_0x4e5255['b']+','+(_0x4e5255['a']/0xff)[_0x293f53(0x1c6)](0x2)+')';const _0x5c4c6b=document[_0x293f53(0xd4)](_0x293f53(0x1eb));_0x5c4c6b[_0x293f53(0x1ed)]=_0x293f53(0x16d),_0x5c4c6b['textContent']=_0x4e5255[_0x293f53(0x1bd)]+'„Çª„É´',_0x1eb038[_0x293f53(0xd6)](_0x3df5c8),_0x1eb038[_0x293f53(0xd6)](_0x2b5270),_0x1eb038['appendChild'](_0x5c4c6b),_0x1eb038[_0x293f53(0xb5)]=()=>{const _0x2a7747=_0x293f53;if(_0x4e5255['a']===0x0){currentColor=_0x2a7747(0x150);const _0x3111e1=document[_0x2a7747(0x1d9)]('colorPicker');if(_0x3111e1)_0x3111e1[_0x2a7747(0x153)]=_0x2a7747(0x86);setAlpha(0x0);}else{currentColor=rgbaToHex(_0x4e5255['r'],_0x4e5255['g'],_0x4e5255['b']);const _0x4d316d=document['getElementById'](_0x2a7747(0x183));if(_0x4d316d)_0x4d316d['value']=currentColor;setAlpha(Math[_0x2a7747(0x1cb)](_0x4e5255['a']/0xff*0x64));}_0x3066dd[_0x2a7747(0x1e7)]['display']=_0x2a7747(0x9e);},_0x271eef[_0x293f53(0xd6)](_0x1eb038);}),_0x3066dd[_0x4d96d0(0xd6)](_0x271eef);}function rgbaToHex(_0x349e0e,_0x5f1a0d,_0x2280de){const _0x51e8b4=a0_0xb3a314;return'#'+[_0x349e0e,_0x5f1a0d,_0x2280de][_0x51e8b4(0x1f7)](_0x16c898=>_0x16c898[_0x51e8b4(0x152)](0x10)[_0x51e8b4(0x1c8)](0x2,'0'))[_0x51e8b4(0x17d)]('');}async function convertToGIF(_0x3e64f0,_0x129678=0xc8,_0x2e7749='nezumi-animation.gif',_0x5a59be=0xa){const _0x359e12=a0_0xb3a314,_0x2879d1=new window[(_0x359e12(0xf2))]({'workers':0x2,'quality':_0x5a59be,'workerScript':_0x359e12(0x1b4)});_0x3e64f0[_0x359e12(0x1a3)](_0x10da2c=>_0x2879d1['addFrame'](_0x10da2c,{'delay':_0x129678})),_0x2879d1['on']('finished',_0x4d7584=>{const _0x508c20=_0x359e12,_0x2e8066=URL[_0x508c20(0x11c)](_0x4d7584),_0x36b4b1=document[_0x508c20(0xd4)]('a');_0x36b4b1[_0x508c20(0xd7)]=_0x2e8066,_0x36b4b1[_0x508c20(0x12a)]=_0x2e7749,document['body'][_0x508c20(0xd6)](_0x36b4b1),_0x36b4b1['click'](),setTimeout(()=>{const _0x17b232=_0x508c20;document[_0x17b232(0xaa)][_0x17b232(0xcf)](_0x36b4b1),URL['revokeObjectURL'](_0x2e8066);},0x3e8);}),_0x2879d1[_0x359e12(0x1a7)]();}function makeAPNGBlob(_0x2741fe,_0x2d2feb,_0x57a1e3,_0x33d3e1=0xc8,_0x3626ec=0x0){const _0x14a3c7=a0_0xb3a314,_0x573cb1=[],_0x595087=[],_0x300d14=document[_0x14a3c7(0xd4)]('canvas');_0x300d14[_0x14a3c7(0x167)]=_0x2d2feb,_0x300d14[_0x14a3c7(0x11f)]=_0x57a1e3;const _0x9bd5c0=_0x300d14[_0x14a3c7(0x1e4)]('2d');_0x2741fe['forEach'](_0x56de32=>{const _0x53eae9=_0x14a3c7;_0x9bd5c0[_0x53eae9(0x1a0)](0x0,0x0,_0x2d2feb,_0x57a1e3),_0x9bd5c0[_0x53eae9(0xc1)](_0x56de32,0x0,0x0,_0x2d2feb,_0x57a1e3);const _0x54a79a=_0x9bd5c0[_0x53eae9(0xc9)](0x0,0x0,_0x2d2feb,_0x57a1e3)[_0x53eae9(0x9b)][_0x53eae9(0x1d6)];_0x573cb1['push'](_0x54a79a),_0x595087['push'](_0x33d3e1);});const _0x1edb99=window[_0x14a3c7(0xc5)]['encode'](_0x573cb1,_0x2d2feb,_0x57a1e3,_0x3626ec,_0x595087);return new Blob([_0x1edb99],{'type':_0x14a3c7(0x155)});}function convertToAPNG(_0x5e17a3,_0x57bc9c,_0x2f4384,_0x3d00b4=0xc8,_0x53b1e3='nezumi-animation.apng',_0x492c6b=0x0){const _0x51b711=a0_0xb3a314,_0x2e4ca5=makeAPNGBlob(_0x5e17a3,_0x57bc9c,_0x2f4384,_0x3d00b4,_0x492c6b),_0xef0c0a=URL['createObjectURL'](_0x2e4ca5),_0x1a3d79=document[_0x51b711(0xd4)]('a');_0x1a3d79[_0x51b711(0xd7)]=_0xef0c0a,_0x1a3d79[_0x51b711(0x12a)]=_0x53b1e3,document['body']['appendChild'](_0x1a3d79),_0x1a3d79['click'](),setTimeout(()=>{const _0x19a34c=_0x51b711;document[_0x19a34c(0xaa)][_0x19a34c(0xcf)](_0x1a3d79),URL['revokeObjectURL'](_0xef0c0a);},0x3e8);}async function loadImages(_0x19f5bf){const _0x1f0c32=a0_0xb3a314,_0x156196=await Promise[_0x1f0c32(0x18d)](_0x19f5bf['map'](_0x637213=>{return new Promise(_0x49fcf6=>{const _0x1cf6cc=a0_0x1a92,_0x1011eb=new Image();_0x1011eb[_0x1cf6cc(0x157)]=_0x1cf6cc(0xf3),_0x1011eb['src']=_0x637213,_0x1011eb[_0x1cf6cc(0x182)]=()=>_0x49fcf6(_0x1011eb);});}));return _0x156196;}function exportSpriteSheetDialog(){const _0x516a94=a0_0xb3a314;let _0x201bb2=prompt(_0x516a94(0x1f8),'1');if(_0x201bb2===null)return;let _0x49428a=Math[_0x516a94(0xed)](0x1,parseInt(_0x201bb2,0xa)||0x1),_0x207fe6=prompt(_0x516a94(0xea),'0');if(_0x207fe6===null)return;let _0xcc7385=Math[_0x516a94(0xed)](0x0,parseInt(_0x207fe6,0xa)||0x0);exportSpriteSheet(_0x49428a,_0xcc7385);}function exportSpriteSheet(_0x4b9dcc=0x1,_0x209de9=0x0){const _0x4e303d=a0_0xb3a314,_0x4e6509=getCurrentProject();if(!_0x4e6509){alert(_0x4e303d(0x1c2));return;}const _0x2af3a8=_0x4e6509[_0x4e303d(0xb2)];if(!_0x2af3a8||_0x2af3a8['length']===0x0){alert(_0x4e303d(0x195));return;}const _0x5cd1b1=_0x4e6509[_0x4e303d(0x167)]*cellSize,_0x245d45=_0x4e6509[_0x4e303d(0x11f)]*cellSize,_0x312fc4=_0x5cd1b1*_0x2af3a8[_0x4e303d(0x162)]*_0x4b9dcc+Math[_0x4e303d(0xed)](0x0,_0x2af3a8[_0x4e303d(0x162)]-0x1)*_0x209de9,_0x58c545=_0x245d45*_0x4b9dcc,_0x2c2db4=document[_0x4e303d(0xd4)](_0x4e303d(0xa2));_0x2c2db4['width']=_0x312fc4,_0x2c2db4['height']=_0x58c545;const _0x33a272=_0x2c2db4[_0x4e303d(0x1e4)]('2d');_0x33a272[_0x4e303d(0x1a0)](0x0,0x0,_0x2c2db4[_0x4e303d(0x167)],_0x2c2db4[_0x4e303d(0x11f)]);let _0x7a9d98=0x0;for(let _0x176cba=0x0;_0x176cba<_0x2af3a8[_0x4e303d(0x162)];_0x176cba++){let _0x4f50fe=document[_0x4e303d(0xd4)](_0x4e303d(0xa2));_0x4f50fe[_0x4e303d(0x167)]=_0x5cd1b1,_0x4f50fe['height']=_0x245d45;let _0x2d449a=_0x4f50fe[_0x4e303d(0x1e4)]('2d');for(let _0x5b4704=0x0;_0x5b4704<_0x2af3a8[_0x176cba][_0x4e303d(0x16e)][_0x4e303d(0x162)];_0x5b4704++){_0x2d449a[_0x4e303d(0xc1)](_0x2af3a8[_0x176cba][_0x4e303d(0x16e)][_0x5b4704][_0x4e303d(0xa2)],0x0,0x0);}_0x4b9dcc===0x1&&_0x209de9===0x0?(_0x33a272['drawImage'](_0x4f50fe,_0x7a9d98,0x0),_0x7a9d98+=_0x5cd1b1):(_0x33a272['drawImage'](_0x4f50fe,0x0,0x0,_0x5cd1b1,_0x245d45,_0x7a9d98,0x0,_0x5cd1b1*_0x4b9dcc,_0x245d45*_0x4b9dcc),_0x7a9d98+=_0x5cd1b1*_0x4b9dcc),_0x176cba<_0x2af3a8['length']-0x1&&_0x209de9>0x0&&(_0x7a9d98+=_0x209de9);}const _0x4fa4b=(_0x4e6509[_0x4e303d(0x166)]||'nezumi-spritesheet')[_0x4e303d(0xd9)](/[\\/:*?"<>|]/g,'_'),_0x18da5f=document['createElement']('a');_0x18da5f[_0x4e303d(0xd7)]=_0x2c2db4['toDataURL'](_0x4e303d(0xc2)),_0x18da5f[_0x4e303d(0x12a)]=_0x4fa4b+_0x4e303d(0x141),document['body']['appendChild'](_0x18da5f),_0x18da5f[_0x4e303d(0x122)](),setTimeout(()=>{const _0x1732b8=_0x4e303d;document[_0x1732b8(0xaa)][_0x1732b8(0xcf)](_0x18da5f);},0x3e8);}const NEZUMI_METADATA_SIG=a0_0xb3a314(0x1cc);function appendMetadataToBlob(_0x339899,_0x56f2cc){const _0x4c5d08=a0_0xb3a314,_0x53d61a=new TextEncoder(),_0x5a3c44=_0x53d61a[_0x4c5d08(0x12c)](NEZUMI_METADATA_SIG),_0x1fea4b=_0x53d61a[_0x4c5d08(0x12c)](JSON['stringify'](_0x56f2cc));return new Blob([_0x339899,_0x5a3c44,_0x1fea4b],{'type':_0x339899[_0x4c5d08(0x17b)]||_0x4c5d08(0x18f)});}function indexOfSubarray(_0x4c4120,_0x34b85c){const _0x4493c1=a0_0xb3a314;for(let _0x2ec156=0x0;_0x2ec156<=_0x4c4120[_0x4493c1(0x162)]-_0x34b85c[_0x4493c1(0x162)];_0x2ec156++){let _0x107335=!![];for(let _0x5e0581=0x0;_0x5e0581<_0x34b85c['length'];_0x5e0581++){if(_0x4c4120[_0x2ec156+_0x5e0581]!==_0x34b85c[_0x5e0581]){_0x107335=![];break;}}if(_0x107335)return _0x2ec156;}return-0x1;}function extractMetadataFromArrayBuffer(_0x120d91){const _0x4b706e=a0_0xb3a314,_0x4d7f24=new TextEncoder()[_0x4b706e(0x12c)](NEZUMI_METADATA_SIG),_0x608b90=new Uint8Array(_0x120d91),_0x490db2=indexOfSubarray(_0x608b90,_0x4d7f24);if(_0x490db2===-0x1)return null;const _0x4ab8c3=_0x608b90[_0x4b706e(0x1a6)](_0x490db2+_0x4d7f24[_0x4b706e(0x162)]);try{const _0x4d7a51=new TextDecoder()[_0x4b706e(0x1c1)](_0x4ab8c3);return JSON[_0x4b706e(0x1c4)](_0x4d7a51);}catch(_0x10da3a){return null;}}async function exportStandalone(){const _0x2327c9=a0_0xb3a314;let _0x523968=getCurrentProject(),_0x74ddef=_0x523968[_0x2327c9(0xb2)],_0x198c9a=_0x523968[_0x2327c9(0x167)]*cellSize,_0x538baf=_0x523968[_0x2327c9(0x11f)]*cellSize;const _0x552d78=_0x74ddef[_0x2327c9(0x1f7)](_0x3659e3=>{const _0x401da1=_0x2327c9;let _0x58ceba=document[_0x401da1(0xd4)](_0x401da1(0xa2));_0x58ceba['width']=_0x198c9a,_0x58ceba['height']=_0x538baf;let _0x383cda=_0x58ceba[_0x401da1(0x1e4)]('2d');for(let _0x29a29d=0x0;_0x29a29d<_0x3659e3['layers'][_0x401da1(0x162)];_0x29a29d++){_0x383cda['drawImage'](_0x3659e3['layers'][_0x29a29d],0x0,0x0);}let _0x44c07b=new Image();return _0x44c07b[_0x401da1(0x158)]=_0x58ceba['toDataURL'](_0x401da1(0xc2)),_0x44c07b;});await Promise[_0x2327c9(0x18d)](_0x552d78['map'](_0x32c10d=>new Promise(_0x1cfee8=>{const _0x57df38=_0x2327c9;_0x32c10d[_0x57df38(0x182)]=_0x1cfee8;})))[_0x2327c9(0xf9)](()=>{});const _0x2dc38a=(_0x523968[_0x2327c9(0x166)]||_0x2327c9(0x70))[_0x2327c9(0xd9)](/[\\/:*?"<>|]/g,'_'),_0x3dd93c=makeAPNGBlob(_0x552d78,_0x198c9a,_0x538baf,animationDelay),_0x51578d={'type':'nezumi-standalone','version':0x1,'project':{'width':_0x523968[_0x2327c9(0x167)],'height':_0x523968['height'],'name':_0x523968[_0x2327c9(0x166)]||'','activeFrame':_0x523968[_0x2327c9(0xce)],'frames':_0x523968['frames'][_0x2327c9(0x1f7)](_0x4eeec9=>({'activeLayer':_0x4eeec9[_0x2327c9(0x140)],'layers':_0x4eeec9[_0x2327c9(0x16e)][_0x2327c9(0x1f7)](_0x20d0a5=>_0x20d0a5[_0x2327c9(0x78)]())}))}},_0x21e2b7=appendMetadataToBlob(_0x3dd93c,_0x51578d),_0x1020e8=URL[_0x2327c9(0x11c)](_0x21e2b7),_0x3f35c6=document[_0x2327c9(0xd4)]('a');_0x3f35c6['href']=_0x1020e8,_0x3f35c6[_0x2327c9(0x12a)]=_0x2dc38a+_0x2327c9(0x71),document[_0x2327c9(0xaa)]['appendChild'](_0x3f35c6),_0x3f35c6[_0x2327c9(0x122)](),setTimeout(()=>{const _0x41b92a=_0x2327c9;document[_0x41b92a(0xaa)][_0x41b92a(0xcf)](_0x3f35c6),URL['revokeObjectURL'](_0x1020e8);},0x3e8);}function loadStandaloneFromFile(_0x4058ea){return new Promise((_0x3e76f9,_0x314b4e)=>{const _0x558ed6=a0_0x1a92,_0x46fd8e=new FileReader();_0x46fd8e[_0x558ed6(0x182)]=_0x4eeedb=>{const _0xeab102=_0x558ed6,_0x42eeec=_0x4eeedb[_0xeab102(0x84)][_0xeab102(0x74)],_0x3bc8c0=extractMetadataFromArrayBuffer(_0x42eeec);if(!_0x3bc8c0||!_0x3bc8c0[_0xeab102(0x208)]){_0x314b4e(new Error(_0xeab102(0x209)));return;}const _0x3a61bf=_0x3bc8c0[_0xeab102(0x208)];try{const _0x2905f0=createProject(_0x3a61bf[_0xeab102(0x167)],_0x3a61bf[_0xeab102(0x11f)],_0x3a61bf[_0xeab102(0x166)]||'ÁîªÂÉè');_0x2905f0['frames']=_0x3a61bf[_0xeab102(0xb2)]['map'](_0x1590e1=>{const _0x3c0a90=_0xeab102;let _0x52536b={'layers':[],'activeLayer':_0x1590e1[_0x3c0a90(0x140)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x50edb1=0x0;_0x50edb1<_0x1590e1[_0x3c0a90(0x16e)][_0x3c0a90(0x162)];_0x50edb1++){let _0xda6c37=new Image();_0xda6c37['src']=_0x1590e1[_0x3c0a90(0x16e)][_0x50edb1];let _0x295b82=document[_0x3c0a90(0xd4)](_0x3c0a90(0xa2));_0x295b82['width']=_0x3a61bf['width']*cellSize,_0x295b82[_0x3c0a90(0x11f)]=_0x3a61bf[_0x3c0a90(0x11f)]*cellSize,_0xda6c37['onload']=()=>{const _0x4e2e0d=_0x3c0a90;let _0x132535=_0x295b82[_0x4e2e0d(0x1e4)]('2d');_0x132535[_0x4e2e0d(0x1a0)](0x0,0x0,_0x295b82['width'],_0x295b82['height']),_0x132535['drawImage'](_0xda6c37,0x0,0x0);},_0x52536b[_0x3c0a90(0x16e)]['push'](_0x295b82);}return _0x52536b;}),projects[_0xeab102(0x7a)](_0x2905f0),activeProject=projects[_0xeab102(0x162)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),_0x3e76f9(_0x2905f0);}catch(_0x31d11c){_0x314b4e(_0x31d11c);}},_0x46fd8e[_0x558ed6(0xf5)]=_0x342fd1=>_0x314b4e(_0x342fd1),_0x46fd8e[_0x558ed6(0x114)](_0x4058ea);});}function toggleSection(_0x4aed7d){const _0x149468=a0_0xb3a314,_0x345123=document['getElementById'](_0x4aed7d),_0x238e03=_0x345123[_0x149468(0x12b)]('.section-content'),_0x12dbd1=_0x345123[_0x149468(0x12b)](_0x149468(0x1f3));_0x238e03[_0x149468(0x1e7)][_0x149468(0x1a1)]===_0x149468(0x9e)?(_0x238e03[_0x149468(0x1e7)][_0x149468(0x1a1)]='',_0x12dbd1['textContent']='‚ñº'):(_0x238e03[_0x149468(0x1e7)]['display']=_0x149468(0x9e),_0x12dbd1['textContent']='‚ñ≤');}document[a0_0xb3a314(0xec)](a0_0xb3a314(0x1e2),()=>{const _0x3d1114=a0_0xb3a314;document[_0x3d1114(0x168)]('.section.collapsible\x20.section-content')[_0x3d1114(0x1a3)](_0x4e4104=>_0x4e4104[_0x3d1114(0x1e7)][_0x3d1114(0x1a1)]=''),document[_0x3d1114(0x168)](_0x3d1114(0xb1))[_0x3d1114(0x1a3)](_0x1e49df=>_0x1e49df['textContent']='‚ñº');}),window['addEventListener'](a0_0xb3a314(0x87),updateMenuBtnDisplay),document['addEventListener'](a0_0xb3a314(0x1e2),updateMenuBtnDisplay);function toggleSideMenu(_0x4ab53){const _0x1f4ad5=a0_0xb3a314,_0x3aa99c=document['getElementById']('sidebar'),_0x43a32f=document[_0x1f4ad5(0x1d9)]('main-container'),_0x1c75ee=document[_0x1f4ad5(0x1d9)]('menu-toggle-btn'),_0x309f45=document[_0x1f4ad5(0x1d9)](_0x1f4ad5(0x20d)),_0x1748f5=_0x3aa99c[_0x1f4ad5(0x1cf)][_0x1f4ad5(0xca)](_0x1f4ad5(0x1c5));let _0x449e67=typeof _0x4ab53==='boolean'?_0x4ab53:!_0x1748f5;_0x449e67?(_0x3aa99c[_0x1f4ad5(0x1cf)][_0x1f4ad5(0xc8)]('open'),_0x43a32f['classList'][_0x1f4ad5(0xc8)](_0x1f4ad5(0x1aa)),document[_0x1f4ad5(0xaa)][_0x1f4ad5(0x1e7)][_0x1f4ad5(0xfc)]=_0x1f4ad5(0xbc),document['body'][_0x1f4ad5(0x1e7)]['touchAction']=_0x1f4ad5(0x9e),window['innerWidth']<=0x384&&(_0x309f45[_0x1f4ad5(0x1e7)][_0x1f4ad5(0x1a1)]='block',_0x1c75ee[_0x1f4ad5(0x1e7)][_0x1f4ad5(0x1a1)]=_0x1f4ad5(0x9e))):(_0x3aa99c[_0x1f4ad5(0x1cf)][_0x1f4ad5(0x102)]('open'),_0x43a32f['classList'][_0x1f4ad5(0x102)](_0x1f4ad5(0x1aa)),document[_0x1f4ad5(0xaa)][_0x1f4ad5(0x1e7)][_0x1f4ad5(0xfc)]='',document[_0x1f4ad5(0xaa)][_0x1f4ad5(0x1e7)][_0x1f4ad5(0x75)]='',window[_0x1f4ad5(0x1ad)]<=0x384&&(_0x309f45['style']['display']='none',_0x1c75ee[_0x1f4ad5(0x1e7)][_0x1f4ad5(0x1a1)]='block'));}function updateMenuBtnDisplay(){const _0x33470d=a0_0xb3a314,_0x1c9901=document[_0x33470d(0x1d9)](_0x33470d(0x189)),_0x8bbf7e=document[_0x33470d(0x1d9)](_0x33470d(0x154)),_0x17557b=document[_0x33470d(0x1d9)](_0x33470d(0x13d)),_0x54208e=document[_0x33470d(0x1d9)](_0x33470d(0x20d)),_0xbcffb6=document[_0x33470d(0x1d9)]('toolsToggleBtn');if(window[_0x33470d(0x1ad)]>0x384){_0x1c9901[_0x33470d(0x1cf)]['remove'](_0x33470d(0x1c5)),_0x8bbf7e[_0x33470d(0x1cf)][_0x33470d(0x102)](_0x33470d(0x1aa)),_0x54208e[_0x33470d(0x1e7)][_0x33470d(0x1a1)]=_0x33470d(0x9e),_0x17557b[_0x33470d(0x1e7)][_0x33470d(0x1a1)]=_0x33470d(0x9e);if(_0xbcffb6)_0xbcffb6[_0x33470d(0x1e7)][_0x33470d(0x1a1)]=window[_0x33470d(0x1ad)]>0x44c?'none':_0x33470d(0x1ee);document[_0x33470d(0xaa)][_0x33470d(0x1e7)][_0x33470d(0xfc)]='',document[_0x33470d(0xaa)][_0x33470d(0x1e7)][_0x33470d(0x75)]='';}else{_0x1c9901[_0x33470d(0x1cf)][_0x33470d(0xca)](_0x33470d(0x1c5))?(_0x54208e[_0x33470d(0x1e7)][_0x33470d(0x1a1)]='block',_0x17557b[_0x33470d(0x1e7)]['display']=_0x33470d(0x9e)):(_0x54208e[_0x33470d(0x1e7)]['display']=_0x33470d(0x9e),_0x17557b['style'][_0x33470d(0x1a1)]=_0x33470d(0xa0));if(_0xbcffb6)_0xbcffb6[_0x33470d(0x1e7)]['display']=_0x33470d(0x1ee);}}document[a0_0xb3a314(0xec)](a0_0xb3a314(0x122),function(_0x485a1b){const _0x22df10=a0_0xb3a314;if(window['innerWidth']>0x384)return;const _0x2818ef=document[_0x22df10(0x1d9)](_0x22df10(0x189)),_0x4aea02=document[_0x22df10(0x1d9)](_0x22df10(0x154)),_0x5429aa=document[_0x22df10(0x1d9)](_0x22df10(0x13d)),_0xe2d9c9=document[_0x22df10(0x1d9)](_0x22df10(0x20d));!_0x2818ef[_0x22df10(0xca)](_0x485a1b[_0x22df10(0x84)])&&_0x485a1b['target']!==_0x5429aa&&_0x485a1b[_0x22df10(0x84)]!==_0xe2d9c9&&(_0x2818ef[_0x22df10(0x1cf)][_0x22df10(0x102)]('open'),_0x4aea02[_0x22df10(0x1cf)]['remove'](_0x22df10(0x1aa)),_0xe2d9c9[_0x22df10(0x1e7)][_0x22df10(0x1a1)]='none',_0x5429aa[_0x22df10(0x1e7)]['display']=_0x22df10(0xa0),document[_0x22df10(0xaa)][_0x22df10(0x1e7)]['overflow']='',document['body'][_0x22df10(0x1e7)][_0x22df10(0x75)]='');}),document[a0_0xb3a314(0xec)](a0_0xb3a314(0x1e2),()=>{const _0x21a987=a0_0xb3a314,_0xc38fc8=document[_0x21a987(0x1d9)](_0x21a987(0xaf)),_0x1f5ad1=document[_0x21a987(0x1d9)](_0x21a987(0x184));_0xc38fc8&&_0x1f5ad1&&(_0xc38fc8[_0x21a987(0xb5)]=()=>_0x1f5ad1['classList'][_0x21a987(0x139)](_0x21a987(0x1c5)));}),(function(){const _0x102ac3=a0_0xb3a314;try{(location['pathname'][_0x102ac3(0xd2)](/index\.html$/)||location['pathname']==='/'||location[_0x102ac3(0x1d4)]===_0x102ac3(0xd8))&&(!localStorage[_0x102ac3(0xe6)](_0x102ac3(0x196))&&(localStorage[_0x102ac3(0xe1)](_0x102ac3(0x196),'1'),location['href']=_0x102ac3(0x142)));}catch(_0x4c9b2e){}}());let scale=0x1,posX=0x0,posY=0x0,lastX=0x0,lastY=0x0,dragging=![],startX=0x0,startY=0x0,shiftPressed=![],pointerDownX=0x0,pointerDownY=0x0;const PAN_CANCEL_DISTANCE=0x8;document[a0_0xb3a314(0xec)](a0_0xb3a314(0x146),_0x123705=>{const _0xb54d24=a0_0xb3a314;if(_0x123705[_0xb54d24(0x1db)]===_0xb54d24(0x7d))shiftPressed=!![];}),document[a0_0xb3a314(0xec)](a0_0xb3a314(0x1ef),_0x796b7b=>{const _0x283d04=a0_0xb3a314;if(_0x796b7b['key']===_0x283d04(0x7d))shiftPressed=![];}),document[a0_0xb3a314(0xec)](a0_0xb3a314(0x1e2),()=>{const _0x2363be=a0_0xb3a314,_0x192dd3=document['getElementById'](_0x2363be(0x183)),_0x354231=document[_0x2363be(0x1d9)]('colorPickerDialogBtn'),_0x3908e1=document[_0x2363be(0x1d9)](_0x2363be(0xcc));if(_0x354231)_0x354231[_0x2363be(0xb5)]=()=>{const _0x4d3f5d=_0x2363be;showColorPickerDialog({'color':currentColor===_0x4d3f5d(0x150)?_0x4d3f5d(0x86):currentColor,'alpha':currentAlpha,'onChange':({hex:_0x2b9576,rgba:_0x1be81d,a:_0xdf28a8})=>{const _0x519e30=_0x4d3f5d;currentColor=_0x2b9576,currentAlpha=_0xdf28a8;const _0x2568d3=document[_0x519e30(0x1d9)]('colorPicker');if(_0x2568d3)_0x2568d3['value']=_0x2b9576;updateCurrentColorSwatch();}});};if(_0x3908e1)_0x3908e1['onclick']=()=>{const _0x14e1ea=_0x2363be;showColorPickerDialog({'color':currentColor===_0x14e1ea(0x150)?_0x14e1ea(0x86):currentColor,'alpha':currentAlpha,'onChange':({hex:_0x4f4753,rgba:_0x3d7cf5,a:_0x2a4aec})=>{const _0x5271f1=_0x14e1ea;currentColor=_0x4f4753,currentAlpha=_0x2a4aec;const _0x1735d4=document[_0x5271f1(0x1d9)](_0x5271f1(0x183));if(_0x1735d4)_0x1735d4[_0x5271f1(0x153)]=_0x4f4753;updateCurrentColorSwatch();}});};if(_0x192dd3)_0x192dd3['oninput']=_0x1682c5=>{const _0x5bc7f0=_0x2363be;currentColor=_0x1682c5[_0x5bc7f0(0x84)][_0x5bc7f0(0x153)],currentAlpha=0x1,updateCurrentColorSwatch();};}),wrapper[a0_0xb3a314(0xec)](a0_0xb3a314(0x178),_0x5c2c3b=>{const _0x43e78c=a0_0xb3a314;_0x5c2c3b[_0x43e78c(0x12f)]();const _0x3d46b3=canvas[_0x43e78c(0x119)](),_0x349238=_0x5c2c3b[_0x43e78c(0x1fb)],_0x22fe07=_0x5c2c3b[_0x43e78c(0x1fd)],_0x3dd74b=(_0x349238-_0x3d46b3[_0x43e78c(0xb3)]-posX)/scale,_0xfdc4f9=(_0x22fe07-_0x3d46b3['top']-posY)/scale,_0xd620e4=_0x5c2c3b[_0x43e78c(0x1fc)]>0x0?0.9:1.1;let _0x5deecd=scale*_0xd620e4;_0x5deecd=Math[_0x43e78c(0x1d3)](Math[_0x43e78c(0xed)](_0x5deecd,0.2),0x5),posX=_0x349238-_0x3d46b3[_0x43e78c(0xb3)]-_0x3dd74b*_0x5deecd,posY=_0x22fe07-_0x3d46b3[_0x43e78c(0x1df)]-_0xfdc4f9*_0x5deecd,scale=_0x5deecd,updateTransform();const _0x3ce4b0=document[_0x43e78c(0x1d9)](_0x43e78c(0x1b6)),_0x1ae740=document[_0x43e78c(0x1d9)]('zoomValue');if(_0x3ce4b0)_0x3ce4b0[_0x43e78c(0x153)]=Math[_0x43e78c(0x1cb)](scale*0x64);if(_0x1ae740)_0x1ae740['textContent']=Math[_0x43e78c(0x1cb)](scale*0x64)+'%';},{'passive':![]});function updateTransform(){const _0x50265f=a0_0xb3a314;canvas['style'][_0x50265f(0xba)]=_0x50265f(0x15d)+posX+_0x50265f(0x18c)+posY+'px)\x20scale('+scale+')';}function setZoomValue(_0x5cb487){const _0x1f959d=a0_0xb3a314,_0x5af2aa=Math['max'](0x14,Math['min'](0x1f4,parseInt(_0x5cb487,0xa)||0x64)),_0x135ce6=_0x5af2aa/0x64;scale=_0x135ce6,updateTransform();const _0x50699d=document[_0x1f959d(0x1d9)](_0x1f959d(0x1b6)),_0x3f3f2c=document[_0x1f959d(0x1d9)]('zoomValue');if(_0x50699d)_0x50699d['value']=_0x5af2aa;if(_0x3f3f2c)_0x3f3f2c[_0x1f959d(0x165)]=_0x5af2aa+'%';}function zoomIn(){const _0x3b4bda=a0_0xb3a314,_0x19a163=document[_0x3b4bda(0x1d9)](_0x3b4bda(0x1b6));let _0x22177e=_0x19a163?parseInt(_0x19a163['value'],0xa):Math[_0x3b4bda(0x1cb)](scale*0x64);_0x22177e=Math['min'](0x1f4,_0x22177e+0xa),setZoomValue(_0x22177e);}function zoomOut(){const _0x845d7b=a0_0xb3a314,_0x476ca2=document[_0x845d7b(0x1d9)](_0x845d7b(0x1b6));let _0x1045fd=_0x476ca2?parseInt(_0x476ca2['value'],0xa):Math[_0x845d7b(0x1cb)](scale*0x64);_0x1045fd=Math[_0x845d7b(0xed)](0x14,_0x1045fd-0xa),setZoomValue(_0x1045fd);}const zs=document[a0_0xb3a314(0x1d9)](a0_0xb3a314(0x1b6));if(zs)zs[a0_0xb3a314(0x7f)]=_0x103a7b=>setZoomValue(_0x103a7b[a0_0xb3a314(0x84)][a0_0xb3a314(0x153)]);const zv=document[a0_0xb3a314(0x1d9)](a0_0xb3a314(0x20b));if(zv)zv[a0_0xb3a314(0x165)]=Math[a0_0xb3a314(0x1cb)](scale*0x64)+'%';function getCanvasCoords(_0x2ff724){const _0x2ed7b4=a0_0xb3a314,_0x5b5a5f=canvas[_0x2ed7b4(0x119)](),_0x324681=canvas[_0x2ed7b4(0x167)]/_0x5b5a5f[_0x2ed7b4(0x167)],_0x4b2896=canvas['height']/_0x5b5a5f[_0x2ed7b4(0x11f)],_0x5249f2=(_0x2ff724[_0x2ed7b4(0x1fb)]-_0x5b5a5f['left'])*_0x324681,_0x1cfd50=(_0x2ff724[_0x2ed7b4(0x1fd)]-_0x5b5a5f['top'])*_0x4b2896;return{'x':_0x5249f2,'y':_0x1cfd50};}function handleDrawStart(_0x16851b){const _0x2d858e=a0_0xb3a314,_0x1d199=getCanvasCoords(_0x16851b);ctx[_0x2d858e(0x180)](),ctx['moveTo'](_0x1d199['x'],_0x1d199['y']);}function a0_0x1a92(_0x26fda5,_0x145013){_0x26fda5=_0x26fda5-0x6a;const _0x40266d=a0_0x5eb1();let _0x16aa44=_0x40266d[_0x26fda5];return _0x16aa44;}function handleDrawMove(_0x1e4614){const _0x3add7d=a0_0xb3a314,_0x1bd8c6=getCanvasCoords(_0x1e4614);ctx[_0x3add7d(0x80)](_0x1bd8c6['x'],_0x1bd8c6['y']),ctx[_0x3add7d(0x120)]();}function handleDrawEnd(_0x2c6648){const _0x4c65d9=a0_0xb3a314;ctx[_0x4c65d9(0x109)]();}function onCanvasColorPick(_0x448a9f){const _0x2525e9=a0_0xb3a314;try{const _0x1dbefc=getCanvasCoords(_0x448a9f),_0x2f1e1c=Math[_0x2525e9(0xeb)](_0x1dbefc['x']),_0x19e589=Math['floor'](_0x1dbefc['y']),_0x3a458a=ctx[_0x2525e9(0xc9)](_0x2f1e1c,_0x19e589,0x1,0x1)[_0x2525e9(0x9b)],_0x3886b0=_0x3a458a[0x0],_0x878a9c=_0x3a458a[0x1],_0x158fb3=_0x3a458a[0x2],_0x126643=_0x3a458a[0x3];if(_0x126643===0x0){currentColor=_0x2525e9(0x150);const _0x49d2e5=document['getElementById'](_0x2525e9(0x183));if(_0x49d2e5)_0x49d2e5[_0x2525e9(0x153)]=_0x2525e9(0x86);console[_0x2525e9(0x1b3)](_0x2525e9(0xbf));}else{const _0x48c929='#'+[_0x3886b0,_0x878a9c,_0x158fb3]['map'](_0x15802e=>_0x15802e['toString'](0x10)['padStart'](0x2,'0'))['join']('');currentColor=_0x48c929;const _0x2d9ab0=document[_0x2525e9(0x1d9)](_0x2525e9(0x183));if(_0x2d9ab0)_0x2d9ab0[_0x2525e9(0x153)]=_0x48c929;console['info'](_0x2525e9(0x1fe),_0x48c929);}}catch(_0x4e5276){console[_0x2525e9(0xe7)](_0x2525e9(0x129),_0x4e5276);}colorPickMode=![];if(canvas)canvas['style'][_0x2525e9(0x164)]=_0x2525e9(0x108);}function a0_0x5eb1(){const _0xfe6870=['globalCompositeOperation','100vw','abs','#444444','onupgradeneeded','ctrlKey','#808000','title','transparent','shift','toString','value','main-container','image/apng','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§','crossOrigin','src','project-name','nezumi-palette','test','onmousedown','translate(','#dlgOkBtn','file','transaction','changedTouches','length','#000080','cursor','textContent','name','width','querySelectorAll','nezumi-sketch.msketch','application/json','borderRadius','position','used-color-count','layers','#00ff00','WebCodecs','firstChild','penSize','grab','new-project-dialog','ontouchstart','input','layer-thumb','wheel','number','readAsText','type','\x20ÈÄèÊòéÂ∫¶','join','isArray','palette-add-btn','beginPath','penAlphaMode','onload','colorPicker','right-panel','onsuccess','penMode','files','stringify','sidebar','dataset','#ffff00','px,\x20','all','moveLayer','application/octet-stream','background','„Éë„É¨„ÉÉ„Éà„Å´Ëâ≤„ÇíËøΩÂä†','grabbing','oncomplete','touchcancel','„Éï„É¨„Éº„É†„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','nezumi_about_visited','split','warn','setAttribute','startsWith','INPUT','justifyContent','button','exportFramesZipBtn','unshift','clearRect','display','entries','forEach','#dlgTransparentBtn','used-color-item','subarray','render','save','https://cdn.jsdelivr.net/npm/jszip@3.10.0/dist/jszip.min.js','sidebar-open','trim','toLowerCase','innerWidth','721863dVOvMw','ArrowRight','touchend','palette-penSize','ArrowLeft','info','lib/gif.worker.js','layer-btn','zoomSlider','palette-del-btn','globalAlpha','put','frame-','TEXTAREA','strokeStyle','count','palette-color','pop','touchstart','decode','„Éó„É≠„Ç∏„Çß„ÇØ„Éà„Åå„ÅÇ„Çä„Åæ„Åõ„Çì','image/jpeg','parse','open','toFixed','#dlgAlpha','padStart','nezumi-export','#ff00ff','round','\x0a---NEZUMI_METADATA_START---\x0a','„Éï„Ç°„Ç§„É´„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åæ„Åó„Åü„ÄÇ','fillStyle','classList','disabled','Âá¶ÁêÜ‰∏≠...','layerRedoStacks','min','pathname','scanColorsPanel','buffer','layerHistories','frame-thumb','getElementById','#008000','key','log','absolute','1085aLGYgL','top','then','frameCount','DOMContentLoaded','crosshair','getContext','‰øùÂ≠ò„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº:','projectList','style','createObjectStore','-frames-layers.zip','ontouchcancel','div','tagName','className','inline-block','keyup','„É¨„Ç§„É§„Éº','#008080','.palette-color','.toggle-btn','head','center','#888888','map','„Çπ„Éó„É©„Ç§„Éà„Ç∑„Éº„Éà„ÅÆÊã°Â§ßÁéá„ÇíÊåáÂÆöÔºà‰æã:\x201\x20=\x20ÂÖÉ„Çµ„Ç§„Ç∫,\x202\x20=\x202ÂÄçÔºâ','IndexedDB„Åã„Çâ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Çì„Å†„ÉÅ„É•„ÉºÔºÅ','80px','clientX','deltaY','clientY','Picked\x20color','undefined','transparent-swatch','metaKey','rgba(0,0,0,0.3)','jpg','#dlgColor','some','used-color-label','848048FQvGNx','project','„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü','#newProjName','zoomValue','isContentEditable','menu-toggle-btn-close','900520ubrzAp','blur','#cccccc','restore','matchMedia','GIF„Å´Â§âÊèõ„Åß„Åç„ÇãÁîªÂÉè„Åå„ÅÇ„Çä„Åæ„Åõ„Çì„ÄÇ','posY','onmouseleave','nezumi-animation','.apng','used-color-grid','putImageData','result','touchAction','folder','touchmove','toDataURL','innerHTML','push','objectStore','touches','Shift','copyLayerBtn','oninput','lineTo','byteLength','palette-penMode','search','target','278zGenOx','#000000','resize','projects','source-over','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;padding:18px;border-radius:8px;min-width:260px;text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:0\x200\x208px\x200;\x22>Ëâ≤„Å®ÈÄèÊòé„ÇíÈÅ∏Êäû</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22dlgColor\x22\x20value=\x22','Failed\x20to\x20load\x20JSZip\x20from\x20CDN;\x20ZIP\x20export\x20will\x20be\x20disabled.','project-name-edit','#800000','\x20active','nezumi-projects','nudgeRightBtn','pan','ÊèèÁîª„Åß„Åç„Å™„ÅÑ„É¨„Ç§„É§„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÉÅ„É•„Éº','ontouchmove','flush','frame-item','flex','select','rgba(','100vh','aria-pressed','data','keyval','Ëâ≤„ÅØË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü','none','ZIP„Ç®„ÇØ„Çπ„Éù„Éº„Éà„ÅØÂà©Áî®„Åß„Åç„Åæ„Åõ„ÇìÔºà„É©„Ç§„Éñ„É©„É™Ë™≠„ÅøËæº„Åø„Å´Â§±ÊïóÔºâ','block','animSpeedRange','canvas','matches','relative','nezumi-drawing','nezumi-sketch-db','inset','offsetCells','png','body','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÈÄèÊòéÂ∫¶(0-100):\x20<input\x20type=\x22number\x22\x20id=\x22dlgAlpha\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','nezumi-theme','onmouseup','#ff0000','toolsToggleBtn','currentColorSwatch','.section.collapsible\x20.toggle-btn','frames','left','destination-out','onclick','isFinite','circle','flat','onkeydown','transform','color-dialog','hidden','close','.png','Picked\x20transparent','Ë°®Á§∫„Åô„Çã','drawImage','image/png','configure','„Çπ„Çø„É≥„Éâ„Ç¢„É≠„É≥ÂΩ¢Âºè„ÅÆ„Éó„É≠„Ç∏„Çß„ÇØ„Éà„ÇíË™≠„ÅøËæº„Åø„Åæ„Åó„Åü:\x20','UPNG','„Éï„Ç°„Ç§„É´„Å´„Éó„É≠„Ç∏„Çß„ÇØ„Éà„É°„Çø„Éá„Éº„Çø„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇË™≠„ÅøËæº„Åø„Åß„Åç„Åæ„Åõ„Çì„ÄÇ','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','add','getImageData','contains','replaceWith','openColorPickerBtn','shiftKey','activeFrame','removeChild','canvas-container','onmousemove','match','nudgeStepInput','createElement','vp8','appendChild','href','/index.html','replace','getAttribute','project-btn','splice','üëÅÔ∏è‚Äçüó®Ô∏è','translate','<span\x20style=\x22position:relative;z-index:1;font-size:13px;color:#888;\x22>ÈÄèÊòé</span>','removeEventListener','setItem','used-color-swatch','#00000000','themeToggleBtn','activeProject','getItem','error','jpeg','#newProjCancelBtn','„Éï„É¨„Éº„É†Èñì„ÅÆ‰ΩôÁôΩ(px)\x20„ÇíÊåáÂÆöÔºà‰æã:\x200Ôºâ','floor','addEventListener','max','-layer','1291325cobQFs','#00ffff','layerExportStatus','GIF','anonymous','image','onerror','dark','„ÉÄ„Éº„ÇØ„ÉÜ„Éº„Éû„Å´ÂàáÊõø','eraser','catch','ontouchend','get','overflow','selected','stopPropagation','nudgeLeftBtn','onchange','VideoEncoder','remove','nudgeStep','.gif','‰∏ã„Å´ÁßªÂãï','insertBefore','readwrite','default','closePath','IndexedDB„Åã„Çâ„ÅÆË™≠„ÅøËæº„Åø„Å´Â§±Êïó„Åó„Åü„ÉÅ„É•„Éº‚Ä¶','pasteLayerBtn','.webm','frameList','(((.+)+)+)+$','generateAsync','revokeObjectURL','layer-item','8px','active','readAsArrayBuffer','#ccc','fillRect','ArrowUp','light','getBoundingClientRect','393498BOYpjr','(prefers-color-scheme:\x20dark)','createObjectURL','ArrowDown','animSpeedValue','height','stroke','.tool-btn','click','from','colorPickerDialogBtn','span','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','alignItems','exportLayerApngBtn','onCanvasColorPick\x20error','download','querySelector','encode','text','slice','preventDefault','\x22\x20style=\x22width:72px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgTransparentBtn\x22\x20type=\x22button\x22\x20style=\x22margin-left:8px;\x22>ÈÄèÊòé</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:8px;justify-content:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgOkBtn\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgCancelBtn\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20','color-palette','hypot','data-theme','webp','ZIP‰ΩúÊàê‰∏≠...','#palette-toolbar\x20.tool-btn','Enter','#c0c0c0','toggle','pen','constructor','337328WkFXSi','menu-toggle-btn','script','100%','activeLayer','_spritesheet.png','/about?terms=true','layerCount','visible','startCell','keydown','nudgeUpBtn'];a0_0x5eb1=function(){return _0xfe6870;};return a0_0x5eb1();}document[a0_0xb3a314(0xec)]('DOMContentLoaded',()=>{const _0x96cb26=a0_0xb3a314;document[_0x96cb26(0x1d9)](_0x96cb26(0x181))['value']=_0x96cb26(0xb8),document['addEventListener'](_0x96cb26(0x146),_0x101c69=>{const _0x551f0b=_0x96cb26,_0x3ce4c2=document['activeElement'][_0x551f0b(0x1ec)],_0x471498=_0x3ce4c2===_0x551f0b(0x19b)||_0x3ce4c2==='TEXTAREA';if(_0x471498)return;const _0x3c22e1=_0x101c69[_0x551f0b(0x14d)]||_0x101c69[_0x551f0b(0x201)];if(_0x3c22e1){if(_0x101c69[_0x551f0b(0x1db)]['toLowerCase']()==='z'){_0x101c69['preventDefault'](),_0x101c69[_0x551f0b(0xcd)]?redo():undo();return;}else{if(_0x101c69[_0x551f0b(0x1db)][_0x551f0b(0x1ac)]()==='y'){_0x101c69[_0x551f0b(0x12f)](),redo();return;}}}const _0x3efe9e=document[_0x551f0b(0x1d9)](_0x551f0b(0xd3));let _0x544a49=0x1;if(_0x3efe9e){const _0x11b13f=parseInt(_0x3efe9e[_0x551f0b(0x153)],0xa);if(!isNaN(_0x11b13f)&&_0x11b13f>0x0)_0x544a49=_0x11b13f;}if(!colorPickMode)switch(_0x101c69['key']){case _0x551f0b(0x1b2):_0x101c69[_0x551f0b(0x12f)](),nudgeActiveLayer(-_0x544a49,0x0);break;case _0x551f0b(0x1af):_0x101c69['preventDefault'](),nudgeActiveLayer(_0x544a49,0x0);break;case'ArrowUp':_0x101c69['preventDefault'](),nudgeActiveLayer(0x0,-_0x544a49);break;case _0x551f0b(0x11d):_0x101c69[_0x551f0b(0x12f)](),nudgeActiveLayer(0x0,_0x544a49);break;}if(_0x101c69[_0x551f0b(0x1db)][_0x551f0b(0x1ac)]()==='p'){_0x101c69[_0x551f0b(0x12f)](),colorPickMode=!colorPickMode;if(canvas)canvas[_0x551f0b(0x1e7)][_0x551f0b(0x164)]=colorPickMode?'crosshair':_0x551f0b(0x108);}});});