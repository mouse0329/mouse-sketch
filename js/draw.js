const _0x55aa60=_0x208e;(function(_0x3c3ed9,_0x115de4){const _0x335dee=_0x208e,_0x12d724=_0x3c3ed9();while(!![]){try{const _0x10f426=parseInt(_0x335dee(0x20e))/0x1*(parseInt(_0x335dee(0x1df))/0x2)+-parseInt(_0x335dee(0x1e7))/0x3*(parseInt(_0x335dee(0x1ce))/0x4)+parseInt(_0x335dee(0x1e8))/0x5*(-parseInt(_0x335dee(0x1c3))/0x6)+-parseInt(_0x335dee(0x1bc))/0x7*(-parseInt(_0x335dee(0x1ef))/0x8)+parseInt(_0x335dee(0x1de))/0x9*(parseInt(_0x335dee(0x1e4))/0xa)+parseInt(_0x335dee(0x1bf))/0xb+parseInt(_0x335dee(0x1f7))/0xc*(-parseInt(_0x335dee(0x1b9))/0xd);if(_0x10f426===_0x115de4)break;else _0x12d724['push'](_0x12d724['shift']());}catch(_0x2fd5e0){_0x12d724['push'](_0x12d724['shift']());}}}(_0x2866,0x5a36e));const _0x475def=(function(){let _0xeee52e=!![];return function(_0x57aef7,_0xea3672){const _0x2ec55b=_0xeee52e?function(){const _0x401945=_0x208e;if(_0xea3672){const _0x4f9487=_0xea3672[_0x401945(0x1e2)](_0x57aef7,arguments);return _0xea3672=null,_0x4f9487;}}:function(){};return _0xeee52e=![],_0x2ec55b;};}()),_0x277bcf=_0x475def(this,function(){const _0x53bf47=_0x208e;return _0x277bcf[_0x53bf47(0x20a)]()[_0x53bf47(0x1fc)](_0x53bf47(0x1f9))[_0x53bf47(0x20a)]()[_0x53bf47(0x211)](_0x277bcf)['search'](_0x53bf47(0x1f9));});_0x277bcf();function setPenSize(_0x26c2c6){const _0x38b05b=_0x208e;penSize=parseInt(_0x26c2c6)||0x1;let _0x133529=document[_0x38b05b(0x1fb)](_0x38b05b(0x1eb));if(_0x133529)_0x133529[_0x38b05b(0x202)]=penSize;let _0x28e866=document['getElementById']('palette-penSize');if(_0x28e866)_0x28e866[_0x38b05b(0x202)]=penSize;}function setPenMode(_0x41eefd){const _0x5598cc=_0x208e;penMode=_0x41eefd;let _0x1a8e09=document[_0x5598cc(0x1fb)](_0x5598cc(0x1d4));if(_0x1a8e09)_0x1a8e09['value']=penMode;let _0x479e20=document[_0x5598cc(0x1fb)](_0x5598cc(0x1e5));if(_0x479e20)_0x479e20[_0x5598cc(0x202)]=penMode;}function fillAt(_0x1d6b4a,_0x20ddcd){const _0x4bf64e=_0x208e;let _0x362500=getCurrentProject(),_0x2149c8=getCurrentFrame();if(!_0x362500||!_0x2149c8||typeof _0x2149c8[_0x4bf64e(0x1f5)]!=='number'||!_0x2149c8[_0x4bf64e(0x215)][_0x2149c8[_0x4bf64e(0x1f5)]])return;const _0x5836fe=_0x2149c8[_0x4bf64e(0x215)][_0x2149c8[_0x4bf64e(0x1f5)]],_0x1bfd2c=_0x5836fe&&_0x5836fe[_0x4bf64e(0x1ed)]?_0x5836fe[_0x4bf64e(0x1ed)]:_0x5836fe;if(!_0x1bfd2c||!_0x1bfd2c[_0x4bf64e(0x201)])return;let _0xa59863=_0x1bfd2c[_0x4bf64e(0x201)]('2d',{'willReadFrequently':!![]}),_0x500369=_0xa59863['getImageData'](0x0,0x0,_0x362500[_0x4bf64e(0x1be)]*cellSize,_0x362500['height']*cellSize),_0x63d67a=_0x1d6b4a*cellSize,_0x574d28=_0x20ddcd*cellSize,_0x3da8a8=getPixel(_0x500369,_0x63d67a,_0x574d28),_0x230370=currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x3da8a8,_0x230370))return;let _0x23cb7a=[[_0x1d6b4a,_0x20ddcd]],_0x1a61a8=new Set();while(_0x23cb7a['length']){let [_0x5a381f,_0x1bf00f]=_0x23cb7a['pop']();if(_0x5a381f<0x0||_0x1bf00f<0x0||_0x5a381f>=_0x362500[_0x4bf64e(0x1be)]||_0x1bf00f>=_0x362500[_0x4bf64e(0x1dd)])continue;let _0x4db622=_0x5a381f+','+_0x1bf00f;if(_0x1a61a8[_0x4bf64e(0x1b8)](_0x4db622))continue;_0x1a61a8[_0x4bf64e(0x20b)](_0x4db622);let _0x2d735a=_0x5a381f*cellSize,_0x271fe6=_0x1bf00f*cellSize,_0x3805ee=getPixel(_0x500369,_0x2d735a,_0x271fe6);if(!colorsMatch(_0x3805ee,_0x3da8a8))continue;for(let _0x4a424c=0x0;_0x4a424c<cellSize;_0x4a424c++){for(let _0x445159=0x0;_0x445159<cellSize;_0x445159++){setPixel(_0x500369,_0x2d735a+_0x445159,_0x271fe6+_0x4a424c,_0x230370);}}_0x23cb7a['push']([_0x5a381f+0x1,_0x1bf00f]),_0x23cb7a[_0x4bf64e(0x214)]([_0x5a381f-0x1,_0x1bf00f]),_0x23cb7a[_0x4bf64e(0x214)]([_0x5a381f,_0x1bf00f+0x1]),_0x23cb7a['push']([_0x5a381f,_0x1bf00f-0x1]);}_0xa59863[_0x4bf64e(0x1dc)](_0x500369,0x0,0x0),redrawAll();}function getPixel(_0x40b758,_0xd7b02b,_0x34da20){const _0x3d90d1=_0x208e;let _0x23394c=(_0x34da20*_0x40b758[_0x3d90d1(0x1be)]+_0xd7b02b)*0x4;return[_0x40b758[_0x3d90d1(0x20c)][_0x23394c],_0x40b758[_0x3d90d1(0x20c)][_0x23394c+0x1],_0x40b758[_0x3d90d1(0x20c)][_0x23394c+0x2],_0x40b758[_0x3d90d1(0x20c)][_0x23394c+0x3]];}function setPixel(_0x4b9a27,_0x4ce217,_0x4d5a54,_0x3eac85){const _0x225160=_0x208e;let _0x4e181e=(_0x4d5a54*_0x4b9a27['width']+_0x4ce217)*0x4;_0x4b9a27[_0x225160(0x20c)][_0x4e181e]=_0x3eac85[0x0],_0x4b9a27[_0x225160(0x20c)][_0x4e181e+0x1]=_0x3eac85[0x1],_0x4b9a27[_0x225160(0x20c)][_0x4e181e+0x2]=_0x3eac85[0x2],_0x4b9a27[_0x225160(0x20c)][_0x4e181e+0x3]=_0x3eac85[0x3];}function drawDotXY(_0x242e86,_0x14e201){const _0x10ec35=_0x208e;let _0x17554f=getCurrentProject(),_0x39d96c=getCurrentFrame();if(!_0x39d96c||!_0x17554f)return;if(typeof _0x242e86!==_0x10ec35(0x204)||typeof _0x14e201!=='number'||_0x242e86<0x0||_0x14e201<0x0||!Number[_0x10ec35(0x207)](_0x17554f[_0x10ec35(0x1be)])||!Number[_0x10ec35(0x207)](_0x17554f['height'])||_0x242e86>=_0x17554f[_0x10ec35(0x1be)]||_0x14e201>=_0x17554f[_0x10ec35(0x1dd)]||!Array[_0x10ec35(0x210)](_0x39d96c[_0x10ec35(0x215)])||typeof _0x39d96c[_0x10ec35(0x1f5)]!==_0x10ec35(0x204)||!_0x39d96c[_0x10ec35(0x215)][_0x39d96c[_0x10ec35(0x1f5)]])return;const _0x15e9bb=_0x39d96c['layers'][_0x39d96c[_0x10ec35(0x1f5)]],_0x11b63a=_0x15e9bb&&_0x15e9bb[_0x10ec35(0x1ed)]?_0x15e9bb['canvas']:_0x15e9bb;if(!_0x11b63a||!_0x11b63a[_0x10ec35(0x201)])return;let _0x1e10db=_0x11b63a[_0x10ec35(0x201)]('2d');if(!_0x1e10db)return;if(currentTool===_0x10ec35(0x1c0)||currentAlpha===0x0)drawPenShape(_0x1e10db,_0x242e86,_0x14e201,null,!![]);else{let _0x52f57f=hexToRgba(currentColor,currentAlpha);_0x1e10db['save'](),penAlphaMode===_0x10ec35(0x1c1)&&currentAlpha<0x1?(drawPenShape(_0x1e10db,_0x242e86,_0x14e201,null,!![]),drawPenShape(_0x1e10db,_0x242e86,_0x14e201,_0x52f57f,![])):drawPenShape(_0x1e10db,_0x242e86,_0x14e201,_0x52f57f,![]),_0x1e10db['restore']();}blitLayerArea(_0x11b63a,_0x242e86,_0x14e201,penSize);}function parseColorToRGBA(_0x25f25e,_0x40b31c){const _0x48453c=_0x208e;if(Array['isArray'](_0x25f25e)&&_0x25f25e[_0x48453c(0x208)]>=0x4)return _0x25f25e[_0x48453c(0x20d)](0x0,0x4);if(!_0x25f25e||typeof _0x25f25e!=='string')return _0x40b31c||[0x0,0x0,0x0,0xff];if(_0x25f25e==='#00000000'||_0x25f25e['toLowerCase']()==='transparent')return[0x0,0x0,0x0,0x0];const _0x4dcca1=_0x25f25e[_0x48453c(0x213)](/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/i);if(_0x4dcca1){const _0x22275f=parseInt(_0x4dcca1[0x1],0xa),_0x2dd64b=parseInt(_0x4dcca1[0x2],0xa),_0x21df82=parseInt(_0x4dcca1[0x3],0xa),_0x589f03=typeof _0x4dcca1[0x4]!==_0x48453c(0x1d5)?Math[_0x48453c(0x1f2)](parseFloat(_0x4dcca1[0x4])*0xff):0xff;return[_0x22275f,_0x2dd64b,_0x21df82,_0x589f03];}try{return hexToRgba(_0x25f25e);}catch(_0x5e0bc3){return _0x40b31c||[0x0,0x0,0x0,0xff];}}function _0x2866(){const _0x54983c=['getMinutes','72dPjcFU','stringify','ensureMetadata','round','scanColorsPanel','getHours','activeLayer','type','1125024tWohKG','save','(((.+)+)+)+$','restore','getElementById','search','stroke','circle','rgba(','max','getContext','value','auto','number','getSeconds','100%','isFinite','length','lineWidth','toString','add','data','slice','616327BrepwD','rgb(','isArray','constructor','moveTo','match','push','layers','uuidv4','timestamp','randomUUID','has','13sxfInE','function','fillRect','95221SfqkSe','replace','width','2837131kEJYzD','eraser','flat','min','366IcwMTv','assign','toISOString','display','globalCompositeOperation','visible','version','strokeStyle','generateVersionFromNow','floor','sqrt','4KGwBtt',',1)','drawImage','encode','ceil','padStart','penMode','undefined','butt','getDate','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','getFullYear','style','lineCap','putImageData','height','6921nBsHIG','2uAnuZX','lineTo','globalAlpha','apply','clearRect','950LSBlkd','palette-penMode','fillStyle','921033RCIyUx','24545nJoOCG','beginPath','source-over','penSize','now','canvas'];_0x2866=function(){return _0x54983c;};return _0x2866();}function fillCellCircle(_0x327c68,_0x1c27d5,_0x496ca9,_0xac3a46,_0x1e76fe,_0x332bc8){const _0x14e956=_0x208e,_0x114b1b=Math[_0x14e956(0x200)](0x1,Math[_0x14e956(0x1f2)](_0xac3a46/cellSize)),_0x1ca94c=_0x1c27d5+_0xac3a46/0x2,_0x493017=_0x496ca9+_0xac3a46/0x2,_0x4480bc=_0xac3a46/0x2;for(let _0x3f8843=0x0;_0x3f8843<_0x114b1b;_0x3f8843++){for(let _0xca7ebf=0x0;_0xca7ebf<_0x114b1b;_0xca7ebf++){const _0x4e7cb9=_0x1c27d5+_0xca7ebf*cellSize,_0x4016e3=_0x496ca9+_0x3f8843*cellSize,_0x1e3866=_0x4e7cb9+cellSize/0x2,_0x23f328=_0x4016e3+cellSize/0x2,_0x4f703c=_0x1e3866-_0x1ca94c,_0x23926d=_0x23f328-_0x493017,_0x4b6ef1=Math[_0x14e956(0x1cd)](_0x4f703c*_0x4f703c+_0x23926d*_0x23926d);if(_0x4b6ef1<=_0x4480bc+0.0001){if(_0x332bc8)_0x327c68[_0x14e956(0x1e3)](_0x4e7cb9,_0x4016e3,cellSize,cellSize);else _0x1e76fe&&(_0x327c68['save'](),_0x327c68[_0x14e956(0x1e1)]=(_0x1e76fe[0x3]||0xff)/0xff,_0x327c68[_0x14e956(0x1e6)]=_0x14e956(0x20f)+_0x1e76fe[0x0]+','+_0x1e76fe[0x1]+','+_0x1e76fe[0x2]+')',_0x327c68[_0x14e956(0x1bb)](_0x4e7cb9,_0x4016e3,cellSize,cellSize),_0x327c68[_0x14e956(0x1fa)]());}}}}function drawPenShape(_0x19da4b,_0x457164,_0x2c5022,_0x27a057,_0x2ca483){const _0x484c6e=_0x208e,_0x50b225=_0x457164*cellSize,_0x208c13=_0x2c5022*cellSize,_0x94a9f7=penSize*cellSize;if(_0x2ca483)penMode===_0x484c6e(0x1fe)?fillCellCircle(_0x19da4b,_0x50b225,_0x208c13,_0x94a9f7,null,!![]):_0x19da4b[_0x484c6e(0x1e3)](_0x50b225-Math[_0x484c6e(0x1cc)]((penSize-0x1)/0x2)*cellSize,_0x208c13-Math[_0x484c6e(0x1cc)]((penSize-0x1)/0x2)*cellSize,_0x94a9f7,_0x94a9f7);else{if(penMode===_0x484c6e(0x1fe)){const _0x192d91=parseColorToRGBA(_0x27a057,[0x0,0x0,0x0,0xff]);fillCellCircle(_0x19da4b,_0x50b225,_0x208c13,_0x94a9f7,_0x192d91,![]);}else _0x19da4b['save'](),Array['isArray'](_0x27a057)&&_0x27a057[_0x484c6e(0x208)]>=0x4?(_0x19da4b[_0x484c6e(0x1e6)]=_0x484c6e(0x1ff)+_0x27a057[0x0]+','+_0x27a057[0x1]+','+_0x27a057[0x2]+_0x484c6e(0x1cf),_0x19da4b['globalAlpha']=(_0x27a057[0x3]||0xff)/0xff):_0x19da4b[_0x484c6e(0x1e6)]=_0x27a057,_0x19da4b[_0x484c6e(0x1bb)](_0x50b225-Math[_0x484c6e(0x1cc)]((penSize-0x1)/0x2)*cellSize,_0x208c13-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x94a9f7,_0x94a9f7),_0x19da4b[_0x484c6e(0x1fa)]();}}function blitLayerArea(_0x239a79,_0x48bd42,_0x1f4ace,_0x46d929){const _0xa36d4e=_0x208e;if(!_0x239a79||!_0x239a79['getContext'])return;const _0x3e85f0=_0x46d929*cellSize,_0x1e2f64=Math[_0xa36d4e(0x1cc)]((_0x46d929-0x1)/0x2)*cellSize,_0x56b43f=_0x48bd42*cellSize-_0x1e2f64,_0x2bab08=_0x1f4ace*cellSize-_0x1e2f64,_0x2d8f88=Math['max'](0x0,_0x56b43f),_0x47a8c7=Math['max'](0x0,_0x2bab08),_0x2db437=Math[_0xa36d4e(0x1c2)](canvas['width'],_0x56b43f+_0x3e85f0),_0x1f2b10=Math[_0xa36d4e(0x1c2)](canvas[_0xa36d4e(0x1dd)],_0x2bab08+_0x3e85f0),_0x12e418=_0x2db437-_0x2d8f88,_0x5ba0ac=_0x1f2b10-_0x47a8c7;if(_0x12e418<=0x0||_0x5ba0ac<=0x0)return;try{ctx[_0xa36d4e(0x1d0)](_0x239a79,_0x2d8f88,_0x47a8c7,_0x12e418,_0x5ba0ac,_0x2d8f88,_0x47a8c7,_0x12e418,_0x5ba0ac);}catch(_0x2c806a){redrawAll();return;}drawGridArea(_0x2d8f88,_0x47a8c7,_0x12e418,_0x5ba0ac);}function drawGridArea(_0x594767,_0x1a81b9,_0x25b71,_0x5d41f3){const _0x523139=_0x208e;if(!_0x25b71||!_0x5d41f3)return;ctx[_0x523139(0x1f8)](),ctx[_0x523139(0x1ca)]='#ccc',ctx['lineWidth']=0x1,ctx['lineCap']=_0x523139(0x1d6);const _0x1549bb=0x1,_0x18daee=Math['max'](0x0,Math[_0x523139(0x1cc)]((_0x594767-_0x1549bb)/cellSize)*cellSize),_0x4ee9dd=Math[_0x523139(0x1c2)](canvas['width'],Math[_0x523139(0x1d2)]((_0x594767+_0x25b71+_0x1549bb)/cellSize)*cellSize),_0x2565e7=Math[_0x523139(0x200)](0x0,Math[_0x523139(0x1cc)]((_0x1a81b9-_0x1549bb)/cellSize)*cellSize),_0x2d63f4=Math[_0x523139(0x1c2)](canvas[_0x523139(0x1dd)],Math[_0x523139(0x1d2)]((_0x1a81b9+_0x5d41f3+_0x1549bb)/cellSize)*cellSize);for(let _0x1211e1=_0x18daee;_0x1211e1<=_0x4ee9dd;_0x1211e1+=cellSize){const _0x39f6d8=_0x1211e1+0.5;ctx[_0x523139(0x1e9)](),ctx[_0x523139(0x212)](_0x39f6d8,_0x2565e7),ctx['lineTo'](_0x39f6d8,_0x2d63f4),ctx[_0x523139(0x1fd)]();}for(let _0x529267=_0x2565e7;_0x529267<=_0x2d63f4;_0x529267+=cellSize){const _0x155f83=_0x529267+0.5;ctx['beginPath'](),ctx[_0x523139(0x212)](_0x18daee,_0x155f83),ctx[_0x523139(0x1e0)](_0x4ee9dd,_0x155f83),ctx[_0x523139(0x1fd)]();}ctx[_0x523139(0x1fa)]();}function drawDotTouch(_0x17aaaf,_0x42b5da){const _0x17f869=_0x208e;let _0x301614=getCurrentProject(),_0xc45717=getCurrentFrame();if(!_0x301614||!_0xc45717)return;if(_0x17aaaf<0x0||_0x42b5da<0x0||_0x17aaaf>=_0x301614[_0x17f869(0x1be)]||_0x42b5da>=_0x301614[_0x17f869(0x1dd)])return;const _0x5d1d1e=_0xc45717[_0x17f869(0x215)][_0xc45717[_0x17f869(0x1f5)]],_0x225169=_0x5d1d1e&&_0x5d1d1e[_0x17f869(0x1ed)]?_0x5d1d1e['canvas']:_0x5d1d1e;if(!_0x225169||!_0x225169[_0x17f869(0x201)])return;let _0x3e9f7e=_0x225169[_0x17f869(0x201)]('2d');if(currentTool===_0x17f869(0x1c0)||currentAlpha===0x0)drawPenShape(_0x3e9f7e,_0x17aaaf,_0x42b5da,null,!![]);else{let _0x535380=hexToRgba(currentColor,currentAlpha);_0x3e9f7e[_0x17f869(0x1f8)](),penAlphaMode===_0x17f869(0x1c1)&&currentAlpha<0x1?(_0x3e9f7e[_0x17f869(0x1e1)]=0x1,_0x3e9f7e[_0x17f869(0x1c7)]='destination-out',drawPenShape(_0x3e9f7e,_0x17aaaf,_0x42b5da,null,!![]),_0x3e9f7e[_0x17f869(0x1c7)]=_0x17f869(0x1ea),drawPenShape(_0x3e9f7e,_0x17aaaf,_0x42b5da,_0x535380,![])):drawPenShape(_0x3e9f7e,_0x17aaaf,_0x42b5da,_0x535380,![]),_0x3e9f7e['restore']();}blitLayerArea(_0x225169,_0x17aaaf,_0x42b5da,penSize);}function drawGrid(_0x25bb7b,_0x25671f){const _0xa3a498=_0x208e;ctx[_0xa3a498(0x1f8)](),ctx[_0xa3a498(0x1ca)]='#ccc',ctx[_0xa3a498(0x209)]=0x1,ctx[_0xa3a498(0x1db)]=_0xa3a498(0x1d6);for(let _0x268ccb=0x0;_0x268ccb<=_0x25bb7b;_0x268ccb++){const _0x588fe3=_0x268ccb*cellSize+0.5;ctx['beginPath'](),ctx[_0xa3a498(0x212)](_0x588fe3,0x0),ctx['lineTo'](_0x588fe3,_0x25671f*cellSize),ctx[_0xa3a498(0x1fd)]();}for(let _0x53d450=0x0;_0x53d450<=_0x25671f;_0x53d450++){const _0x4165ad=_0x53d450*cellSize+0.5;ctx[_0xa3a498(0x1e9)](),ctx['moveTo'](0x0,_0x4165ad),ctx[_0xa3a498(0x1e0)](_0x25bb7b*cellSize,_0x4165ad),ctx[_0xa3a498(0x1fd)]();}ctx['restore']();}function _0x208e(_0x589e5f,_0x81023e){_0x589e5f=_0x589e5f-0x1b7;const _0x518a12=_0x2866();let _0x277bcf=_0x518a12[_0x589e5f];return _0x277bcf;}function redrawAll(){const _0x3bb631=_0x208e;let _0x2a69a9=getCurrentProject(),_0x369c4d=getCurrentFrame();canvas[_0x3bb631(0x1be)]=_0x2a69a9['width']*cellSize,canvas[_0x3bb631(0x1dd)]=_0x2a69a9[_0x3bb631(0x1dd)]*cellSize,ctx[_0x3bb631(0x1e3)](0x0,0x0,canvas[_0x3bb631(0x1be)],canvas[_0x3bb631(0x1dd)]);for(let _0x1d099b=0x0;_0x1d099b<(Array['isArray'](_0x369c4d[_0x3bb631(0x215)])?_0x369c4d[_0x3bb631(0x215)][_0x3bb631(0x208)]:0x0);_0x1d099b++){const _0x1097e1=_0x369c4d[_0x3bb631(0x215)][_0x1d099b];if(!_0x1097e1)continue;const _0xfccf4e=typeof _0x1097e1[_0x3bb631(0x1c8)]!==_0x3bb631(0x1d5)?_0x1097e1[_0x3bb631(0x1c8)]:!![];if(!_0xfccf4e)continue;const _0x24d276=_0x1097e1[_0x3bb631(0x1ed)]?_0x1097e1['canvas']:_0x1097e1;if(!_0x24d276)continue;try{if(typeof HTMLCanvasElement!==_0x3bb631(0x1d5)&&_0x24d276 instanceof HTMLCanvasElement)ctx[_0x3bb631(0x1d0)](_0x24d276,0x0,0x0);else{if(typeof HTMLImageElement!==_0x3bb631(0x1d5)&&_0x24d276 instanceof HTMLImageElement){if(_0x24d276['complete'])ctx[_0x3bb631(0x1d0)](_0x24d276,0x0,0x0);}else{if(typeof OffscreenCanvas!==_0x3bb631(0x1d5)&&_0x24d276 instanceof OffscreenCanvas)ctx['drawImage'](_0x24d276,0x0,0x0);else try{ctx[_0x3bb631(0x1d0)](_0x24d276,0x0,0x0);}catch(_0x27a4fd){}}}}catch(_0x29ba58){console['warn']('redrawAll:\x20failed\x20drawing\x20layer',_0x29ba58);}}drawGrid(_0x2a69a9['width'],_0x2a69a9[_0x3bb631(0x1dd)]);wrapper&&(wrapper[_0x3bb631(0x1da)]['width']=_0x3bb631(0x206),wrapper[_0x3bb631(0x1da)][_0x3bb631(0x1dd)]=_0x3bb631(0x203));const _0x87c968=document['getElementById'](_0x3bb631(0x1f3));if(_0x87c968){const _0x261c4f=performance[_0x3bb631(0x1ec)]();if(!lastColorScanAt||_0x261c4f-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x360244=scanImageColors();renderScanPanel(_0x360244),_0x87c968[_0x3bb631(0x1da)][_0x3bb631(0x1c6)]='',lastColorScanAt=_0x261c4f;}}}function uuidv4(){const _0x1881e8=_0x208e;if(typeof crypto!==_0x1881e8(0x1d5)&&typeof crypto['randomUUID']===_0x1881e8(0x1ba))try{return crypto[_0x1881e8(0x1b7)]();}catch(_0x5bb2da){}return _0x1881e8(0x1d8)[_0x1881e8(0x1bd)](/[xy]/g,_0x3f9841=>{const _0x4f2e1a=_0x1881e8,_0x430d2b=Math['random']()*0x10|0x0,_0x1e3c7b=_0x3f9841==='x'?_0x430d2b:_0x430d2b&0x3|0x8;return _0x1e3c7b[_0x4f2e1a(0x20a)](0x10);});}function generateVersionFromNow(){const _0x544c9a=_0x208e,_0x321aa5=new Date(),_0x2deaf5=_0x321aa5[_0x544c9a(0x1d9)](),_0x1aabfb=String(_0x321aa5['getMonth']()+0x1)['padStart'](0x2,'0'),_0x1e23e8=String(_0x321aa5[_0x544c9a(0x1d7)]())[_0x544c9a(0x1d3)](0x2,'0'),_0xea8111=String(_0x321aa5[_0x544c9a(0x1f4)]())[_0x544c9a(0x1d3)](0x2,'0'),_0x2bf239=String(_0x321aa5[_0x544c9a(0x1ee)]())[_0x544c9a(0x1d3)](0x2,'0'),_0x21f2fa=String(_0x321aa5[_0x544c9a(0x205)]())[_0x544c9a(0x1d3)](0x2,'0');return _0x2deaf5+'.'+_0x1aabfb+'.'+_0x1e23e8+'.'+_0xea8111+_0x2bf239+_0x21f2fa;}function ensureMetadata(_0x58596a){const _0x1e4207=_0x208e,_0x3ab0b6=Object[_0x1e4207(0x1c4)]({},_0x58596a||{});if(!_0x3ab0b6['id'])_0x3ab0b6['id']=uuidv4();if(!_0x3ab0b6[_0x1e4207(0x1c9)])_0x3ab0b6[_0x1e4207(0x1c9)]=generateVersionFromNow();if(!_0x3ab0b6[_0x1e4207(0x217)])_0x3ab0b6[_0x1e4207(0x217)]=new Date()[_0x1e4207(0x1c5)]();return _0x3ab0b6;}function appendMetadataToBlob(_0x4a7928,_0x44dff5){const _0x3d1002=_0x208e,_0x21c6f2=ensureMetadata(_0x44dff5),_0x2595ee=new TextEncoder(),_0x2f08bf=_0x2595ee[_0x3d1002(0x1d1)](NEZUMI_METADATA_SIG),_0x967cbb=_0x2595ee[_0x3d1002(0x1d1)](JSON[_0x3d1002(0x1f0)](_0x21c6f2));return new Blob([_0x4a7928,_0x2f08bf,_0x967cbb],{'type':_0x4a7928[_0x3d1002(0x1f6)]||'application/octet-stream'});}typeof window!==_0x55aa60(0x1d5)&&(window[_0x55aa60(0x1cb)]=generateVersionFromNow,window[_0x55aa60(0x216)]=uuidv4,window[_0x55aa60(0x1f1)]=ensureMetadata);