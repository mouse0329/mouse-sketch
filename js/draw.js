const _0x1ca817=_0x3901;(function(_0x435ae1,_0x17b7b0){const _0x5a377f=_0x3901,_0x4c155f=_0x435ae1();while(!![]){try{const _0x53a96b=parseInt(_0x5a377f(0x149))/0x1+parseInt(_0x5a377f(0x16c))/0x2*(parseInt(_0x5a377f(0x163))/0x3)+parseInt(_0x5a377f(0x157))/0x4*(-parseInt(_0x5a377f(0x146))/0x5)+-parseInt(_0x5a377f(0x143))/0x6*(-parseInt(_0x5a377f(0x11f))/0x7)+-parseInt(_0x5a377f(0x169))/0x8+-parseInt(_0x5a377f(0x123))/0x9+-parseInt(_0x5a377f(0x155))/0xa*(-parseInt(_0x5a377f(0x15f))/0xb);if(_0x53a96b===_0x17b7b0)break;else _0x4c155f['push'](_0x4c155f['shift']());}catch(_0x52a48d){_0x4c155f['push'](_0x4c155f['shift']());}}}(_0xf73f,0x30fc2));const _0x5aeaf8=(function(){let _0x37779b=!![];return function(_0x19cadf,_0x156406){const _0x31c1d5=_0x37779b?function(){if(_0x156406){const _0x1e6766=_0x156406['apply'](_0x19cadf,arguments);return _0x156406=null,_0x1e6766;}}:function(){};return _0x37779b=![],_0x31c1d5;};}()),_0x39ac00=_0x5aeaf8(this,function(){const _0xad3cf4=_0x3901;return _0x39ac00['toString']()[_0xad3cf4(0x16b)](_0xad3cf4(0x12e))[_0xad3cf4(0x136)]()['constructor'](_0x39ac00)['search'](_0xad3cf4(0x12e));});_0x39ac00();function setPenSize(_0x3fa700){const _0x288036=_0x3901;penSize=parseInt(_0x3fa700)||0x1;let _0x3568bc=document[_0x288036(0x176)](_0x288036(0x170));if(_0x3568bc)_0x3568bc[_0x288036(0x150)]=penSize;let _0x4f46b3=document[_0x288036(0x176)](_0x288036(0x124));if(_0x4f46b3)_0x4f46b3['value']=penSize;}function setPenMode(_0x36a21a){const _0x1ec391=_0x3901;penMode=_0x36a21a;let _0x30c42f=document[_0x1ec391(0x176)]('penMode');if(_0x30c42f)_0x30c42f['value']=penMode;let _0x114d36=document[_0x1ec391(0x176)](_0x1ec391(0x14f));if(_0x114d36)_0x114d36[_0x1ec391(0x150)]=penMode;}function isDrawableCanvas(_0x136b60){const _0x2f5a66=_0x3901;if(!_0x136b60)return![];const _0x5f4354=_0x136b60[_0x2f5a66(0x122)],_0x9a35bb=_0x136b60[_0x2f5a66(0x131)];return Number[_0x2f5a66(0x12b)](_0x5f4354)&&Number[_0x2f5a66(0x12b)](_0x9a35bb)&&_0x5f4354>0x0&&_0x9a35bb>0x0;}function fillAt(_0x45cc07,_0x206687){const _0x59197a=_0x3901;let _0x4c5804=getCurrentProject(),_0x62bd5c=getCurrentFrame();if(!_0x4c5804||!_0x62bd5c||typeof _0x62bd5c[_0x59197a(0x13b)]!==_0x59197a(0x133)||!_0x62bd5c['layers'][_0x62bd5c['activeLayer']])return;const _0x3cd6b2=_0x62bd5c[_0x59197a(0x177)][_0x62bd5c[_0x59197a(0x13b)]],_0x3925c4=_0x3cd6b2&&_0x3cd6b2[_0x59197a(0x160)]?_0x3cd6b2[_0x59197a(0x160)]:_0x3cd6b2;if(!_0x3925c4||!_0x3925c4[_0x59197a(0x148)])return;let _0x5cc2e6=_0x3925c4[_0x59197a(0x148)]('2d',{'willReadFrequently':!![]}),_0x4fb6c4=_0x5cc2e6[_0x59197a(0x14a)](0x0,0x0,_0x4c5804['width']*cellSize,_0x4c5804[_0x59197a(0x131)]*cellSize),_0x50966c=_0x45cc07*cellSize,_0x145d9f=_0x206687*cellSize,_0x3d8a5c=getPixel(_0x4fb6c4,_0x50966c,_0x145d9f),_0x2d5421=currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x3d8a5c,_0x2d5421))return;let _0x117925=[[_0x45cc07,_0x206687]],_0x437875=new Set();while(_0x117925[_0x59197a(0x164)]){let [_0x519867,_0x285481]=_0x117925['pop']();if(_0x519867<0x0||_0x285481<0x0||_0x519867>=_0x4c5804[_0x59197a(0x122)]||_0x285481>=_0x4c5804[_0x59197a(0x131)])continue;let _0x5d1f84=_0x519867+','+_0x285481;if(_0x437875[_0x59197a(0x13c)](_0x5d1f84))continue;_0x437875[_0x59197a(0x16f)](_0x5d1f84);let _0x2945a5=_0x519867*cellSize,_0x843708=_0x285481*cellSize,_0x434861=getPixel(_0x4fb6c4,_0x2945a5,_0x843708);if(!colorsMatch(_0x434861,_0x3d8a5c))continue;for(let _0x17ecfa=0x0;_0x17ecfa<cellSize;_0x17ecfa++){for(let _0x5e9481=0x0;_0x5e9481<cellSize;_0x5e9481++){setPixel(_0x4fb6c4,_0x2945a5+_0x5e9481,_0x843708+_0x17ecfa,_0x2d5421);}}_0x117925[_0x59197a(0x165)]([_0x519867+0x1,_0x285481]),_0x117925['push']([_0x519867-0x1,_0x285481]),_0x117925[_0x59197a(0x165)]([_0x519867,_0x285481+0x1]),_0x117925[_0x59197a(0x165)]([_0x519867,_0x285481-0x1]);}_0x5cc2e6[_0x59197a(0x126)](_0x4fb6c4,0x0,0x0),redrawAll();}function getPixel(_0xf81885,_0x22db39,_0x68c814){const _0x105eea=_0x3901;let _0x3fc59e=(_0x68c814*_0xf81885['width']+_0x22db39)*0x4;return[_0xf81885[_0x105eea(0x11b)][_0x3fc59e],_0xf81885[_0x105eea(0x11b)][_0x3fc59e+0x1],_0xf81885[_0x105eea(0x11b)][_0x3fc59e+0x2],_0xf81885['data'][_0x3fc59e+0x3]];}function setPixel(_0x5b1640,_0xbb9e28,_0x3ed171,_0x370b81){const _0x57691f=_0x3901;let _0x626a07=(_0x3ed171*_0x5b1640[_0x57691f(0x122)]+_0xbb9e28)*0x4;_0x5b1640['data'][_0x626a07]=_0x370b81[0x0],_0x5b1640['data'][_0x626a07+0x1]=_0x370b81[0x1],_0x5b1640[_0x57691f(0x11b)][_0x626a07+0x2]=_0x370b81[0x2],_0x5b1640[_0x57691f(0x11b)][_0x626a07+0x3]=_0x370b81[0x3];}function drawDotXY(_0x1ccbc9,_0x151f35){const _0x3d5f21=_0x3901;let _0x15b703=getCurrentProject(),_0x831d86=getCurrentFrame();if(!_0x831d86||!_0x15b703)return;if(typeof _0x1ccbc9!==_0x3d5f21(0x133)||typeof _0x151f35!==_0x3d5f21(0x133)||_0x1ccbc9<0x0||_0x151f35<0x0||!Number[_0x3d5f21(0x12b)](_0x15b703[_0x3d5f21(0x122)])||!Number[_0x3d5f21(0x12b)](_0x15b703[_0x3d5f21(0x131)])||_0x1ccbc9>=_0x15b703[_0x3d5f21(0x122)]||_0x151f35>=_0x15b703[_0x3d5f21(0x131)]||!Array[_0x3d5f21(0x11e)](_0x831d86['layers'])||typeof _0x831d86['activeLayer']!=='number'||!_0x831d86[_0x3d5f21(0x177)][_0x831d86[_0x3d5f21(0x13b)]])return;const _0x3ed263=_0x831d86[_0x3d5f21(0x177)][_0x831d86[_0x3d5f21(0x13b)]],_0x3affe6=_0x3ed263&&_0x3ed263[_0x3d5f21(0x160)]?_0x3ed263['canvas']:_0x3ed263;if(!_0x3affe6||!_0x3affe6[_0x3d5f21(0x148)])return;let _0x3d1b8c=_0x3affe6[_0x3d5f21(0x148)]('2d');if(!_0x3d1b8c)return;if(currentTool===_0x3d5f21(0x172)||currentAlpha===0x0)drawPenShape(_0x3d1b8c,_0x1ccbc9,_0x151f35,null,!![]);else{let _0x36f87c=hexToRgba(currentColor,currentAlpha);_0x3d1b8c[_0x3d5f21(0x158)](),penAlphaMode===_0x3d5f21(0x128)&&currentAlpha<0x1?(drawPenShape(_0x3d1b8c,_0x1ccbc9,_0x151f35,null,!![]),drawPenShape(_0x3d1b8c,_0x1ccbc9,_0x151f35,_0x36f87c,![])):drawPenShape(_0x3d1b8c,_0x1ccbc9,_0x151f35,_0x36f87c,![]),_0x3d1b8c['restore']();}blitLayerArea(_0x3affe6,_0x1ccbc9,_0x151f35,penSize);}function parseColorToRGBA(_0x5c2ba5,_0x2a5d15){const _0x5ac672=_0x3901;if(Array[_0x5ac672(0x11e)](_0x5c2ba5)&&_0x5c2ba5[_0x5ac672(0x164)]>=0x4)return _0x5c2ba5[_0x5ac672(0x171)](0x0,0x4);if(!_0x5c2ba5||typeof _0x5c2ba5!=='string')return _0x2a5d15||[0x0,0x0,0x0,0xff];if(_0x5c2ba5===_0x5ac672(0x153)||_0x5c2ba5[_0x5ac672(0x138)]()===_0x5ac672(0x15b))return[0x0,0x0,0x0,0x0];const _0x1e7aa9=_0x5c2ba5['match'](/rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*([0-9.]+))?\)/i);if(_0x1e7aa9){const _0x245bb3=parseInt(_0x1e7aa9[0x1],0xa),_0x27a133=parseInt(_0x1e7aa9[0x2],0xa),_0xee4897=parseInt(_0x1e7aa9[0x3],0xa),_0x553d25=typeof _0x1e7aa9[0x4]!=='undefined'?Math[_0x5ac672(0x12d)](parseFloat(_0x1e7aa9[0x4])*0xff):0xff;return[_0x245bb3,_0x27a133,_0xee4897,_0x553d25];}try{return hexToRgba(_0x5c2ba5);}catch(_0x54e4c6){return _0x2a5d15||[0x0,0x0,0x0,0xff];}}function fillCellCircle(_0x2a26a8,_0x5263bb,_0x3cc73b,_0x1fce95,_0x32c409,_0x150335){const _0x29f9c5=_0x3901,_0x201182=Math[_0x29f9c5(0x137)](0x1,Math[_0x29f9c5(0x12d)](_0x1fce95/cellSize)),_0x4e2e7c=_0x5263bb+_0x1fce95/0x2,_0x164035=_0x3cc73b+_0x1fce95/0x2,_0x6e6507=_0x1fce95/0x2;for(let _0x566861=0x0;_0x566861<_0x201182;_0x566861++){for(let _0x2cfb9c=0x0;_0x2cfb9c<_0x201182;_0x2cfb9c++){const _0x55e121=_0x5263bb+_0x2cfb9c*cellSize,_0x260a46=_0x3cc73b+_0x566861*cellSize,_0x574d30=_0x55e121+cellSize/0x2,_0x5985bf=_0x260a46+cellSize/0x2,_0x1f1c35=_0x574d30-_0x4e2e7c,_0x430ade=_0x5985bf-_0x164035,_0x433996=Math['sqrt'](_0x1f1c35*_0x1f1c35+_0x430ade*_0x430ade);if(_0x433996<=_0x6e6507+0.0001){if(_0x150335)_0x2a26a8[_0x29f9c5(0x167)](_0x55e121,_0x260a46,cellSize,cellSize);else _0x32c409&&(_0x2a26a8[_0x29f9c5(0x158)](),_0x2a26a8['globalAlpha']=(_0x32c409[0x3]||0xff)/0xff,_0x2a26a8['fillStyle']=_0x29f9c5(0x119)+_0x32c409[0x0]+','+_0x32c409[0x1]+','+_0x32c409[0x2]+')',_0x2a26a8[_0x29f9c5(0x174)](_0x55e121,_0x260a46,cellSize,cellSize),_0x2a26a8[_0x29f9c5(0x178)]());}}}}function drawPenShape(_0x1f6311,_0x2dcaad,_0x56ebca,_0x491543,_0x2f5ba8){const _0x39977d=_0x3901,_0xadc99c=_0x2dcaad*cellSize,_0x150ebe=_0x56ebca*cellSize,_0x1b73e1=penSize*cellSize;if(_0x2f5ba8)penMode===_0x39977d(0x144)?fillCellCircle(_0x1f6311,_0xadc99c,_0x150ebe,_0x1b73e1,null,!![]):_0x1f6311[_0x39977d(0x167)](_0xadc99c-Math[_0x39977d(0x139)]((penSize-0x1)/0x2)*cellSize,_0x150ebe-Math[_0x39977d(0x139)]((penSize-0x1)/0x2)*cellSize,_0x1b73e1,_0x1b73e1);else{if(penMode==='circle'){const _0x5aebe8=parseColorToRGBA(_0x491543,[0x0,0x0,0x0,0xff]);fillCellCircle(_0x1f6311,_0xadc99c,_0x150ebe,_0x1b73e1,_0x5aebe8,![]);}else _0x1f6311[_0x39977d(0x158)](),Array[_0x39977d(0x11e)](_0x491543)&&_0x491543[_0x39977d(0x164)]>=0x4?(_0x1f6311[_0x39977d(0x120)]=_0x39977d(0x16d)+_0x491543[0x0]+','+_0x491543[0x1]+','+_0x491543[0x2]+_0x39977d(0x16a),_0x1f6311['globalAlpha']=(_0x491543[0x3]||0xff)/0xff):_0x1f6311['fillStyle']=_0x491543,_0x1f6311['fillRect'](_0xadc99c-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x150ebe-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x1b73e1,_0x1b73e1),_0x1f6311[_0x39977d(0x178)]();}}function blitLayerArea(_0x580a82,_0x380398,_0x337977,_0x3a5cb6,_0x148636){const _0x5bccd3=_0x3901,_0x5ad2ae=getCurrentProject(),_0x2b8c6f=getCurrentFrame();if(!_0x5ad2ae||!_0x2b8c6f)return;if(!_0x580a82||!_0x580a82['getContext']||!isDrawableCanvas(_0x580a82))return;const _0x233436=_0x3a5cb6*cellSize,_0x1158b7=Math['floor']((_0x3a5cb6-0x1)/0x2)*cellSize,_0x987bef=_0x380398*cellSize-_0x1158b7,_0x9d5c2a=_0x337977*cellSize-_0x1158b7,_0x2022bf=Math[_0x5bccd3(0x137)](0x0,_0x987bef),_0x50328e=Math['max'](0x0,_0x9d5c2a),_0x39b310=Math[_0x5bccd3(0x168)](canvas[_0x5bccd3(0x122)],_0x987bef+_0x233436),_0x562a9c=Math['min'](canvas[_0x5bccd3(0x131)],_0x9d5c2a+_0x233436),_0x4377bb=_0x39b310-_0x2022bf,_0x1692cb=_0x562a9c-_0x50328e;if(_0x4377bb<=0x0||_0x1692cb<=0x0)return;try{ctx[_0x5bccd3(0x158)](),ctx[_0x5bccd3(0x132)](),ctx[_0x5bccd3(0x12a)](_0x2022bf,_0x50328e,_0x4377bb,_0x1692cb),ctx['clip'](),ctx[_0x5bccd3(0x167)](_0x2022bf,_0x50328e,_0x4377bb,_0x1692cb);for(let _0x24d0e5=0x0;_0x24d0e5<_0x2b8c6f[_0x5bccd3(0x177)][_0x5bccd3(0x164)];_0x24d0e5++){const _0x44bf9b=_0x2b8c6f[_0x5bccd3(0x177)][_0x24d0e5];if(!_0x44bf9b)continue;const _0xa4b2a6=typeof _0x44bf9b[_0x5bccd3(0x151)]!==_0x5bccd3(0x14d)?_0x44bf9b[_0x5bccd3(0x151)]:!![];if(!_0xa4b2a6)continue;const _0x5075eb=_0x44bf9b[_0x5bccd3(0x160)]?_0x44bf9b[_0x5bccd3(0x160)]:_0x44bf9b;if(!isDrawableCanvas(_0x5075eb))continue;ctx[_0x5bccd3(0x158)](),dimFrontLayers&&typeof _0x2b8c6f['activeLayer']===_0x5bccd3(0x133)&&_0x24d0e5>_0x2b8c6f[_0x5bccd3(0x13b)]?ctx[_0x5bccd3(0x15d)]=FRONT_LAYER_DIM_ALPHA:ctx['globalAlpha']=0x1,ctx[_0x5bccd3(0x12c)](_0x5075eb,_0x2022bf,_0x50328e,_0x4377bb,_0x1692cb,_0x2022bf,_0x50328e,_0x4377bb,_0x1692cb),ctx[_0x5bccd3(0x178)]();}ctx[_0x5bccd3(0x178)]();}catch(_0x51bd36){redrawAll();return;}const _0x18d06d=document[_0x5bccd3(0x176)]('scanColorsPanel');if(_0x18d06d){const _0x3b8e26=performance[_0x5bccd3(0x11c)]();if(!lastColorScanAt||_0x3b8e26-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x333488=scanImageColors();renderScanPanel(_0x333488),_0x18d06d[_0x5bccd3(0x118)]['display']='',lastColorScanAt=_0x3b8e26;}}drawGridArea(_0x2022bf,_0x50328e,_0x4377bb,_0x1692cb);}function drawGridArea(_0x3ab231,_0x119f2a,_0x4d08d0,_0xd27865){const _0x54ca44=_0x3901;if(!showGrid||!_0x4d08d0||!_0xd27865)return;ctx['save'](),ctx[_0x54ca44(0x15c)]=_0x54ca44(0x14c),ctx[_0x54ca44(0x135)]=0x1,ctx[_0x54ca44(0x166)]=_0x54ca44(0x11d);const _0x55570e=0x1,_0x494005=Math[_0x54ca44(0x137)](0x0,Math[_0x54ca44(0x139)]((_0x3ab231-_0x55570e)/cellSize)*cellSize),_0x1531f8=Math[_0x54ca44(0x168)](canvas['width'],Math['ceil']((_0x3ab231+_0x4d08d0+_0x55570e)/cellSize)*cellSize),_0x431849=Math[_0x54ca44(0x137)](0x0,Math['floor']((_0x119f2a-_0x55570e)/cellSize)*cellSize),_0x1c0007=Math[_0x54ca44(0x168)](canvas[_0x54ca44(0x131)],Math[_0x54ca44(0x15a)]((_0x119f2a+_0xd27865+_0x55570e)/cellSize)*cellSize);for(let _0x800087=_0x494005;_0x800087<=_0x1531f8;_0x800087+=cellSize){const _0x3e7fd9=_0x800087+0.5;ctx[_0x54ca44(0x132)](),ctx[_0x54ca44(0x13a)](_0x3e7fd9,_0x431849),ctx[_0x54ca44(0x16e)](_0x3e7fd9,_0x1c0007),ctx[_0x54ca44(0x14e)]();}for(let _0x15c5e2=_0x431849;_0x15c5e2<=_0x1c0007;_0x15c5e2+=cellSize){const _0x48805d=_0x15c5e2+0.5;ctx[_0x54ca44(0x132)](),ctx['moveTo'](_0x494005,_0x48805d),ctx['lineTo'](_0x1531f8,_0x48805d),ctx[_0x54ca44(0x14e)]();}ctx[_0x54ca44(0x178)]();}function drawDotTouch(_0x4c8c9e,_0x3cded6){const _0x1a6da5=_0x3901;let _0x493e4c=getCurrentProject(),_0x20fb2a=getCurrentFrame();if(!_0x493e4c||!_0x20fb2a)return;if(_0x4c8c9e<0x0||_0x3cded6<0x0||_0x4c8c9e>=_0x493e4c['width']||_0x3cded6>=_0x493e4c[_0x1a6da5(0x131)])return;const _0x405232=_0x20fb2a['layers'][_0x20fb2a[_0x1a6da5(0x13b)]],_0x365c55=_0x405232&&_0x405232[_0x1a6da5(0x160)]?_0x405232[_0x1a6da5(0x160)]:_0x405232;if(!_0x365c55||!_0x365c55[_0x1a6da5(0x148)])return;let _0x3a179b=_0x365c55[_0x1a6da5(0x148)]('2d');if(currentTool===_0x1a6da5(0x172)||currentAlpha===0x0)drawPenShape(_0x3a179b,_0x4c8c9e,_0x3cded6,null,!![]);else{let _0x35fc80=hexToRgba(currentColor,currentAlpha);_0x3a179b['save'](),penAlphaMode==='flat'&&currentAlpha<0x1?(_0x3a179b[_0x1a6da5(0x15d)]=0x1,_0x3a179b[_0x1a6da5(0x175)]=_0x1a6da5(0x156),drawPenShape(_0x3a179b,_0x4c8c9e,_0x3cded6,null,!![]),_0x3a179b[_0x1a6da5(0x175)]=_0x1a6da5(0x130),drawPenShape(_0x3a179b,_0x4c8c9e,_0x3cded6,_0x35fc80,![])):drawPenShape(_0x3a179b,_0x4c8c9e,_0x3cded6,_0x35fc80,![]),_0x3a179b[_0x1a6da5(0x178)]();}blitLayerArea(_0x365c55,_0x4c8c9e,_0x3cded6,penSize);}function drawGrid(_0x383926,_0x4d68cd){const _0x3fb84f=_0x3901;if(!showGrid)return;ctx['save'](),ctx[_0x3fb84f(0x15c)]=_0x3fb84f(0x14c),ctx[_0x3fb84f(0x135)]=0x1,ctx[_0x3fb84f(0x166)]=_0x3fb84f(0x11d);for(let _0x22b36a=0x0;_0x22b36a<=_0x383926;_0x22b36a++){const _0x458bc8=_0x22b36a*cellSize+0.5;ctx[_0x3fb84f(0x132)](),ctx[_0x3fb84f(0x13a)](_0x458bc8,0x0),ctx[_0x3fb84f(0x16e)](_0x458bc8,_0x4d68cd*cellSize),ctx[_0x3fb84f(0x14e)]();}for(let _0x4d850e=0x0;_0x4d850e<=_0x4d68cd;_0x4d850e++){const _0x2ef21d=_0x4d850e*cellSize+0.5;ctx[_0x3fb84f(0x132)](),ctx[_0x3fb84f(0x13a)](0x0,_0x2ef21d),ctx[_0x3fb84f(0x16e)](_0x383926*cellSize,_0x2ef21d),ctx[_0x3fb84f(0x14e)]();}ctx[_0x3fb84f(0x178)]();}function redrawAll(){const _0x5749b4=_0x3901;let _0x3d23c8=getCurrentProject(),_0x939191=getCurrentFrame();canvas[_0x5749b4(0x122)]=_0x3d23c8[_0x5749b4(0x122)]*cellSize,canvas[_0x5749b4(0x131)]=_0x3d23c8[_0x5749b4(0x131)]*cellSize,ctx[_0x5749b4(0x167)](0x0,0x0,canvas[_0x5749b4(0x122)],canvas[_0x5749b4(0x131)]);for(let _0x56347b=0x0;_0x56347b<(Array[_0x5749b4(0x11e)](_0x939191[_0x5749b4(0x177)])?_0x939191[_0x5749b4(0x177)]['length']:0x0);_0x56347b++){const _0x163780=_0x939191['layers'][_0x56347b];if(!_0x163780)continue;const _0x1f6b17=typeof _0x163780[_0x5749b4(0x151)]!=='undefined'?_0x163780[_0x5749b4(0x151)]:!![];if(!_0x1f6b17)continue;const _0x4eb1b3=_0x163780[_0x5749b4(0x160)]?_0x163780[_0x5749b4(0x160)]:_0x163780;if(!_0x4eb1b3)continue;try{ctx[_0x5749b4(0x158)]();dimFrontLayers&&typeof _0x939191[_0x5749b4(0x13b)]===_0x5749b4(0x133)&&_0x56347b>_0x939191[_0x5749b4(0x13b)]?ctx[_0x5749b4(0x15d)]=FRONT_LAYER_DIM_ALPHA:ctx[_0x5749b4(0x15d)]=0x1;if(typeof HTMLCanvasElement!=='undefined'&&_0x4eb1b3 instanceof HTMLCanvasElement){if(isDrawableCanvas(_0x4eb1b3))ctx[_0x5749b4(0x12c)](_0x4eb1b3,0x0,0x0);}else{if(typeof HTMLImageElement!==_0x5749b4(0x14d)&&_0x4eb1b3 instanceof HTMLImageElement){if(_0x4eb1b3['complete'])ctx[_0x5749b4(0x12c)](_0x4eb1b3,0x0,0x0);}else{if(typeof OffscreenCanvas!=='undefined'&&_0x4eb1b3 instanceof OffscreenCanvas){if(isDrawableCanvas(_0x4eb1b3))ctx[_0x5749b4(0x12c)](_0x4eb1b3,0x0,0x0);}else try{if(isDrawableCanvas(_0x4eb1b3))ctx[_0x5749b4(0x12c)](_0x4eb1b3,0x0,0x0);}catch(_0x3a2a86){}}}ctx['restore']();}catch(_0x2dd899){console[_0x5749b4(0x13d)](_0x5749b4(0x161),_0x2dd899);}}drawGrid(_0x3d23c8[_0x5749b4(0x122)],_0x3d23c8['height']);wrapper&&(wrapper[_0x5749b4(0x118)][_0x5749b4(0x122)]='100%',wrapper[_0x5749b4(0x118)][_0x5749b4(0x131)]=_0x5749b4(0x142));const _0x126dd0=document[_0x5749b4(0x176)](_0x5749b4(0x14b));if(_0x126dd0){const _0x66fcd=performance[_0x5749b4(0x11c)]();if(!lastColorScanAt||_0x66fcd-lastColorScanAt>=COLOR_SCAN_INTERVAL_MS){const _0x40cf1a=scanImageColors();renderScanPanel(_0x40cf1a),_0x126dd0[_0x5749b4(0x118)]['display']='',lastColorScanAt=_0x66fcd;}}}function uuidv4(){const _0x5f00d9=_0x3901;if(typeof crypto!=='undefined'&&typeof crypto['randomUUID']===_0x5f00d9(0x145))try{return crypto[_0x5f00d9(0x13e)]();}catch(_0x4eda83){}return _0x5f00d9(0x13f)[_0x5f00d9(0x173)](/[xy]/g,_0x39169f=>{const _0xaec888=_0x5f00d9,_0x127560=Math[_0xaec888(0x141)]()*0x10|0x0,_0x1bd488=_0x39169f==='x'?_0x127560:_0x127560&0x3|0x8;return _0x1bd488[_0xaec888(0x136)](0x10);});}function generateVersionFromNow(){const _0x37074f=_0x3901,_0x45c581=new Date(),_0x487b55=_0x45c581[_0x37074f(0x134)](),_0x4ef20b=String(_0x45c581['getMonth']()+0x1)[_0x37074f(0x140)](0x2,'0'),_0x4ab08d=String(_0x45c581['getDate']())[_0x37074f(0x140)](0x2,'0'),_0x580d48=String(_0x45c581[_0x37074f(0x152)]())[_0x37074f(0x140)](0x2,'0'),_0x1f0e1a=String(_0x45c581['getMinutes']())[_0x37074f(0x140)](0x2,'0'),_0x2b89fa=String(_0x45c581[_0x37074f(0x159)]())[_0x37074f(0x140)](0x2,'0');return _0x487b55+'.'+_0x4ef20b+'.'+_0x4ab08d+'.'+_0x580d48+_0x1f0e1a+_0x2b89fa;}function _0xf73f(){const _0x274575=['putImageData','application/octet-stream','flat','timestamp','rect','isFinite','drawImage','round','(((.+)+)+)+$','encode','source-over','height','beginPath','number','getFullYear','lineWidth','toString','max','toLowerCase','floor','moveTo','activeLayer','has','warn','randomUUID','xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx','padStart','random','auto','6hTvXts','circle','function','110ItsXAs','ensureMetadata','getContext','26801kCXOZP','getImageData','scanColorsPanel','#ccc','undefined','stroke','palette-penMode','value','visible','getHours','#00000000','stringify','10MVrZuR','destination-out','43756fxXvib','save','getSeconds','ceil','transparent','strokeStyle','globalAlpha','uuidv4','9780562bhqnkB','canvas','redrawAll:\x20failed\x20drawing\x20layer','type','5502goTmnb','length','push','lineCap','clearRect','min','2632200uTBaUx',',1)','search','138kBYfQu','rgba(','lineTo','add','penSize','slice','eraser','replace','fillRect','globalCompositeOperation','getElementById','layers','restore','style','rgb(','toISOString','data','now','butt','isArray','556822fSukLG','fillStyle','version','width','3165390OwTjvy','palette-penSize','generateVersionFromNow'];_0xf73f=function(){return _0x274575;};return _0xf73f();}function _0x3901(_0x11b82e,_0x5c6ef8){_0x11b82e=_0x11b82e-0x118;const _0x11c853=_0xf73f();let _0x39ac00=_0x11c853[_0x11b82e];return _0x39ac00;}function ensureMetadata(_0x59f76){const _0x4db530=_0x3901,_0x350912=Object['assign']({},_0x59f76||{});if(!_0x350912['id'])_0x350912['id']=uuidv4();if(!_0x350912[_0x4db530(0x121)])_0x350912[_0x4db530(0x121)]=generateVersionFromNow();if(!_0x350912[_0x4db530(0x129)])_0x350912[_0x4db530(0x129)]=new Date()[_0x4db530(0x11a)]();return _0x350912;}function appendMetadataToBlob(_0x1781e2,_0x5d5bf1){const _0xe4fd36=_0x3901,_0x49486e=ensureMetadata(_0x5d5bf1),_0xfa7e=new TextEncoder(),_0x55b812=_0xfa7e[_0xe4fd36(0x12f)](NEZUMI_METADATA_SIG),_0x4663f1=_0xfa7e['encode'](JSON[_0xe4fd36(0x154)](_0x49486e));return new Blob([_0x1781e2,_0x55b812,_0x4663f1],{'type':_0x1781e2[_0xe4fd36(0x162)]||_0xe4fd36(0x127)});}typeof window!==_0x1ca817(0x14d)&&(window[_0x1ca817(0x125)]=generateVersionFromNow,window[_0x1ca817(0x15e)]=uuidv4,window[_0x1ca817(0x147)]=ensureMetadata);