(function(_0xd0ba0f,_0x47c222){const _0xc25184=_0x59ab,_0x343500=_0xd0ba0f();while(!![]){try{const _0x302fc8=-parseInt(_0xc25184(0xf5))/0x1+parseInt(_0xc25184(0x105))/0x2+-parseInt(_0xc25184(0xd3))/0x3*(parseInt(_0xc25184(0xfd))/0x4)+parseInt(_0xc25184(0xe2))/0x5+-parseInt(_0xc25184(0xe0))/0x6+-parseInt(_0xc25184(0xdd))/0x7*(parseInt(_0xc25184(0xef))/0x8)+parseInt(_0xc25184(0xc1))/0x9*(parseInt(_0xc25184(0xe5))/0xa);if(_0x302fc8===_0x47c222)break;else _0x343500['push'](_0x343500['shift']());}catch(_0x665bb1){_0x343500['push'](_0x343500['shift']());}}}(_0x18a4,0xe77ce));const _0x8fab80=(function(){let _0x412736=!![];return function(_0x1623d0,_0x3050ea){const _0x2897ab=_0x412736?function(){const _0x13e99f=_0x59ab;if(_0x3050ea){const _0x5d4079=_0x3050ea[_0x13e99f(0xea)](_0x1623d0,arguments);return _0x3050ea=null,_0x5d4079;}}:function(){};return _0x412736=![],_0x2897ab;};}()),_0x12c4cf=_0x8fab80(this,function(){const _0x4e41ec=_0x59ab;return _0x12c4cf[_0x4e41ec(0x102)]()[_0x4e41ec(0xd9)](_0x4e41ec(0xe4))[_0x4e41ec(0x102)]()['constructor'](_0x12c4cf)[_0x4e41ec(0xd9)](_0x4e41ec(0xe4));});function _0x18a4(){const _0x36cf5c=['toLowerCase','set','remove','split','inset','unshift','8px','appendChild','color-palette','round','width','getElementById','palette-del-btn','105351lIAKBo','querySelectorAll','span','createElement','hidden','floor','search','innerHTML','background','stopPropagation','7oRJocj','div','forEach','6567078zZLohX','classList','2251765fGXvcr','className','(((.+)+)+)+$','310NeTPQl','getImageData','min','firstChild','relative','apply','add','style','length','selected','11339864JopRdc','position','borderRadius','get','onclick','.palette-color','1527803vypHhf','#00000000','title','\x20透明度','join','overflow','none','count','48nUkeJg','transparent','button','map','パレットに色を追加','toString','height','absolute','1495100LAHMvX','test','slice','padStart','rgba(','palette-color','<span\x20style=\x22position:relative;z-index:1;font-size:13px;color:#888;\x22>透明</span>','repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','palette-add-btn','replace','1222686GxCokq','insertBefore','この色をパレットから削除','splice','textContent'];_0x18a4=function(){return _0x36cf5c;};return _0x18a4();}_0x12c4cf();function hexToRgbaCss(_0x598791,_0x1fe867){const _0x32cd4a=_0x59ab;let _0x1989cc,_0x2b827b,_0x55df34,_0x3e1e16=_0x1fe867;if(_0x598791[_0x32cd4a(0xed)]===0x9)_0x1989cc=parseInt(_0x598791['slice'](0x1,0x3),0x10),_0x2b827b=parseInt(_0x598791[_0x32cd4a(0x107)](0x3,0x5),0x10),_0x55df34=parseInt(_0x598791[_0x32cd4a(0x107)](0x5,0x7),0x10),_0x3e1e16=parseInt(_0x598791[_0x32cd4a(0x107)](0x7,0x9),0x10)/0xff;else{if(_0x598791['length']===0x7)_0x1989cc=parseInt(_0x598791[_0x32cd4a(0x107)](0x1,0x3),0x10),_0x2b827b=parseInt(_0x598791['slice'](0x3,0x5),0x10),_0x55df34=parseInt(_0x598791['slice'](0x5,0x7),0x10);else{if(_0x598791[_0x32cd4a(0xed)]===0x4)_0x1989cc=parseInt(_0x598791[0x1]+_0x598791[0x1],0x10),_0x2b827b=parseInt(_0x598791[0x2]+_0x598791[0x2],0x10),_0x55df34=parseInt(_0x598791[0x3]+_0x598791[0x3],0x10);else return _0x598791;}}return _0x32cd4a(0x109)+_0x1989cc+','+_0x2b827b+','+_0x55df34+','+_0x3e1e16+')';}function hexToRgba(_0x5e95b4,_0xd276c3=0x1){const _0x516045=_0x59ab;if(_0x5e95b4===_0x516045(0xfe)||_0x5e95b4==='#00000000')return[0x0,0x0,0x0,0x0];_0x5e95b4=_0x5e95b4[_0x516045(0xc0)]('#','');if(_0x5e95b4[_0x516045(0xed)]===0x3)_0x5e95b4=_0x5e95b4[_0x516045(0xc9)]('')[_0x516045(0x100)](_0x377d0c=>_0x377d0c+_0x377d0c)[_0x516045(0xf9)]('');if(_0x5e95b4[_0x516045(0xed)]===0x8){const _0x232f34=parseInt(_0x5e95b4['slice'](0x0,0x2),0x10),_0x13003d=parseInt(_0x5e95b4[_0x516045(0x107)](0x2,0x4),0x10),_0x9268ba=parseInt(_0x5e95b4[_0x516045(0x107)](0x4,0x6),0x10),_0x41d3a3=parseInt(_0x5e95b4['slice'](0x6,0x8),0x10);return[_0x232f34,_0x13003d,_0x9268ba,_0x41d3a3];}let _0x558c8b=parseInt(_0x5e95b4,0x10);return[_0x558c8b>>0x10&0xff,_0x558c8b>>0x8&0xff,_0x558c8b&0xff,Math[_0x516045(0xcf)](0xff*_0xd276c3)];}function colorsMatch(_0x42bbfa,_0x319806){return _0x42bbfa[0x0]===_0x319806[0x0]&&_0x42bbfa[0x1]===_0x319806[0x1]&&_0x42bbfa[0x2]===_0x319806[0x2]&&_0x42bbfa[0x3]===_0x319806[0x3];}function _0x59ab(_0x38a645,_0x158bd6){_0x38a645=_0x38a645-0xbf;const _0x270590=_0x18a4();let _0x12c4cf=_0x270590[_0x38a645];return _0x12c4cf;}function createPalette(){const _0x147f80=_0x59ab,_0x1e7e95=document[_0x147f80(0xd1)](_0x147f80(0xce));if(!_0x1e7e95)return;_0x1e7e95[_0x147f80(0xda)]='',PALETTE_COLORS[_0x147f80(0xdf)]((_0x42a5f7,_0x2490c1)=>{const _0x1831e5=_0x147f80,_0x428334=document['createElement'](_0x1831e5(0xff));_0x428334['className']=_0x1831e5(0x10a),_0x428334['style'][_0x1831e5(0xf0)]=_0x1831e5(0xe9),_0x428334[_0x1831e5(0xec)][_0x1831e5(0xfa)]=_0x1831e5(0xd7),_0x428334[_0x1831e5(0xda)]='';let _0xafc531=document[_0x1831e5(0xd6)](_0x1831e5(0xde));_0xafc531[_0x1831e5(0xec)][_0x1831e5(0xf0)]=_0x1831e5(0x104),_0xafc531[_0x1831e5(0xec)][_0x1831e5(0xca)]='0',_0xafc531[_0x1831e5(0xec)][_0x1831e5(0xf1)]=_0x1831e5(0xcc),_0xafc531['style'][_0x1831e5(0xdb)]=_0x1831e5(0x10c);let _0x1376de=document[_0x1831e5(0xd6)](_0x1831e5(0xde));_0x1376de[_0x1831e5(0xec)][_0x1831e5(0xf0)]=_0x1831e5(0x104),_0x1376de[_0x1831e5(0xec)]['inset']='0',_0x1376de[_0x1831e5(0xec)][_0x1831e5(0xf1)]=_0x1831e5(0xcc);if(_0x42a5f7===_0x1831e5(0xfe)||_0x42a5f7===_0x1831e5(0xf6))_0x1376de[_0x1831e5(0xec)][_0x1831e5(0xdb)]=_0x1831e5(0xfb),_0x428334[_0x1831e5(0xf7)]='透明',_0x428334['innerHTML']=_0x1831e5(0x10b);else{if(/^#([0-9a-f]{8})$/i[_0x1831e5(0x106)](_0x42a5f7)){_0x1376de['style'][_0x1831e5(0xdb)]=hexToRgbaCss(_0x42a5f7,0x1);const [_0x20382a,_0x1d37d2,_0x34bd25,_0x43beb6]=hexToRgba(_0x42a5f7),_0x19b33f=_0x43beb6/0xff;_0x428334[_0x1831e5(0xf7)]=rgbaToHex(_0x20382a,_0x1d37d2,_0x34bd25)+'\x20'+Math[_0x1831e5(0xcf)](_0x19b33f*0x64)+'%';}else _0x42a5f7[_0x1831e5(0xc6)]()===currentColor['toLowerCase']()&&currentAlpha<0x1?(_0x1376de[_0x1831e5(0xec)][_0x1831e5(0xdb)]=hexToRgbaCss(_0x42a5f7,currentAlpha),_0x428334[_0x1831e5(0xf7)]=_0x42a5f7+_0x1831e5(0xf8)+Math[_0x1831e5(0xcf)](currentAlpha*0x64)+'%'):(_0x1376de[_0x1831e5(0xec)][_0x1831e5(0xdb)]=_0x42a5f7,_0x428334[_0x1831e5(0xf7)]=_0x42a5f7);}_0x428334[_0x1831e5(0xcd)](_0xafc531),_0x428334[_0x1831e5(0xcd)](_0x1376de),_0x428334['onclick']=()=>{const _0x292b42=_0x1831e5;if(_0x42a5f7===_0x292b42(0xfe)||_0x42a5f7===_0x292b42(0xf6))currentColor=_0x292b42(0xfe),currentAlpha=0x0;else{if(/^#([0-9a-f]{8})$/i['test'](_0x42a5f7)){const [_0x24b4e5,_0x407f7a,_0x3985e5,_0x4142d9]=hexToRgba(_0x42a5f7);currentAlpha=_0x4142d9/0xff,currentColor=rgbaToHex(_0x24b4e5,_0x407f7a,_0x3985e5);}else currentColor=_0x42a5f7,currentAlpha=0x1;}updateCurrentColorSwatch(),document[_0x292b42(0xd4)](_0x292b42(0xf4))['forEach'](_0x3cd933=>_0x3cd933['classList'][_0x292b42(0xc8)](_0x292b42(0xee))),_0x428334[_0x292b42(0xe1)][_0x292b42(0xeb)](_0x292b42(0xee));};if(_0x2490c1!==0x0){const _0xe3b74d=document[_0x1831e5(0xd6)](_0x1831e5(0xd5));_0xe3b74d[_0x1831e5(0xc5)]='×',_0xe3b74d[_0x1831e5(0xe3)]=_0x1831e5(0xd2),_0xe3b74d[_0x1831e5(0xf7)]=_0x1831e5(0xc3),_0xe3b74d[_0x1831e5(0xf3)]=_0x47dbbd=>{const _0x361d0e=_0x1831e5;_0x47dbbd[_0x361d0e(0xdc)](),PALETTE_COLORS[_0x361d0e(0xed)]>0x2&&(PALETTE_COLORS[_0x361d0e(0xc4)](_0x2490c1,0x1),createPalette());},_0x428334[_0x1831e5(0xcd)](_0xe3b74d);}_0x1e7e95['appendChild'](_0x428334);});const _0x5d1b27=document[_0x147f80(0xd6)](_0x147f80(0xff));_0x5d1b27['className']=_0x147f80(0xbf),_0x5d1b27[_0x147f80(0xf7)]=_0x147f80(0x101),_0x5d1b27['innerHTML']='+',_0x5d1b27[_0x147f80(0xf3)]=_0x5052cc=>{const _0x35ee1d=_0x147f80;_0x5052cc[_0x35ee1d(0xdc)](),showColorPickerDialog({'color':currentColor==='transparent'?'#000000':currentColor,'alpha':currentAlpha,'okLabel':'追加','onChange':()=>{},'onOk':({hex:_0x20f283,rgba:_0x1d1c31,a:_0x412e5b})=>{const _0x5ebdca=_0x35ee1d;if(_0x412e5b===0x0){if(PALETTE_COLORS[0x0]===_0x5ebdca(0xfe))PALETTE_COLORS[_0x5ebdca(0xc4)](0x1,0x0,_0x5ebdca(0xfe));else PALETTE_COLORS['unshift']('transparent');}else{const _0x249178=Math['round'](_0x412e5b*0xff),_0x526f73=_0x249178['toString'](0x10)[_0x5ebdca(0x108)](0x2,'0');PALETTE_COLORS[_0x5ebdca(0xcb)](''+_0x20f283+_0x526f73);}if(PALETTE_COLORS[_0x5ebdca(0xed)]>0x18)PALETTE_COLORS=PALETTE_COLORS[_0x5ebdca(0x107)](0x0,0x18);savePaletteToDB(),createPalette();}});},_0x1e7e95[_0x147f80(0xc2)](_0x5d1b27,_0x1e7e95[_0x147f80(0xe8)]);const _0x23491e=document[_0x147f80(0xd1)]('scanColorsPanel');if(_0x23491e)_0x23491e[_0x147f80(0xec)]['display']='';}function scanImageColors(){const _0x18d0a1=_0x59ab,_0x40d14e=getCurrentProject(),_0x1fa3fb=getCurrentFrame();if(!_0x40d14e||!_0x1fa3fb)return[];const _0x37326e=new Map(),_0x5384f7=_0x40d14e[_0x18d0a1(0xd0)],_0x591cf2=_0x40d14e[_0x18d0a1(0x103)],_0x3297af=canvas['getContext']('2d',{'willReadFrequently':!![]});for(let _0x138cc6=0x0;_0x138cc6<_0x591cf2;_0x138cc6++){for(let _0x565d88=0x0;_0x565d88<_0x5384f7;_0x565d88++){const _0x2f11f6=Math[_0x18d0a1(0xe7)](Math[_0x18d0a1(0xd8)](_0x565d88*cellSize+cellSize/0x2),canvas[_0x18d0a1(0xd0)]-0x1),_0x1a76e2=Math[_0x18d0a1(0xe7)](Math[_0x18d0a1(0xd8)](_0x138cc6*cellSize+cellSize/0x2),canvas['height']-0x1),_0x53137b=_0x3297af[_0x18d0a1(0xe6)](_0x2f11f6,_0x1a76e2,0x1,0x1)['data'],_0x5b2331=_0x53137b[0x0]+','+_0x53137b[0x1]+','+_0x53137b[0x2]+','+_0x53137b[0x3];_0x37326e[_0x18d0a1(0xc7)](_0x5b2331,(_0x37326e[_0x18d0a1(0xf2)](_0x5b2331)||0x0)+0x1);}}const _0x212bfd=Array['from'](_0x37326e['entries']())[_0x18d0a1(0x100)](([_0x2bba12,_0x43e7b2])=>{const _0x245bec=_0x18d0a1,[_0x566396,_0x27074f,_0x1d23a1,_0x13482c]=_0x2bba12[_0x245bec(0xc9)](',')[_0x245bec(0x100)](_0x1c9011=>parseInt(_0x1c9011,0xa));return{'r':_0x566396,'g':_0x27074f,'b':_0x1d23a1,'a':_0x13482c,'count':_0x43e7b2};})['sort']((_0x31b060,_0xfcadc5)=>_0xfcadc5['count']-_0x31b060[_0x18d0a1(0xfc)]);return _0x212bfd;}function rgbaToHex(_0x500e82,_0x4f78d2,_0x2c649b){const _0x4445bf=_0x59ab;return'#'+[_0x500e82,_0x4f78d2,_0x2c649b]['map'](_0x16b066=>_0x16b066[_0x4445bf(0x102)](0x10)[_0x4445bf(0x108)](0x2,'0'))['join']('');}