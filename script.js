const a0_0x1fe732=a0_0x2317;(function(_0x22a894,_0x1d9ca1){const _0x296f51=a0_0x2317,_0x433094=_0x22a894();while(!![]){try{const _0x3695d0=parseInt(_0x296f51(0x1e2))/0x1+-parseInt(_0x296f51(0x1d3))/0x2+parseInt(_0x296f51(0x259))/0x3*(parseInt(_0x296f51(0x278))/0x4)+parseInt(_0x296f51(0x1e0))/0x5+parseInt(_0x296f51(0x208))/0x6+-parseInt(_0x296f51(0x225))/0x7+parseInt(_0x296f51(0x18d))/0x8*(-parseInt(_0x296f51(0x27f))/0x9);if(_0x3695d0===_0x1d9ca1)break;else _0x433094['push'](_0x433094['shift']());}catch(_0x1880d7){_0x433094['push'](_0x433094['shift']());}}}(a0_0x3820,0x57ad7));const a0_0x5c68d5=(function(){let _0x173fec=!![];return function(_0x3504bf,_0x327521){const _0x1d5332=_0x173fec?function(){if(_0x327521){const _0x438165=_0x327521['apply'](_0x3504bf,arguments);return _0x327521=null,_0x438165;}}:function(){};return _0x173fec=![],_0x1d5332;};}()),a0_0x19124b=a0_0x5c68d5(this,function(){const _0x464680=a0_0x2317;return a0_0x19124b[_0x464680(0x239)]()['search'](_0x464680(0x20e))[_0x464680(0x239)]()[_0x464680(0x1ca)](a0_0x19124b)['search']('(((.+)+)+)+$');});a0_0x19124b();let canvas=document[a0_0x1fe732(0x25b)]('canvas'),ctx=canvas[a0_0x1fe732(0x1b0)]('2d'),cellSize=0x14,currentColor=a0_0x1fe732(0x1c2),currentTool=a0_0x1fe732(0x1cd),penSize=0x1,penMode=a0_0x1fe732(0x1ba),layers=[],activeLayer=0x0,layerHistories=[],layerRedoStacks=[],currentWidth=0x10,currentHeight=0x10,projects=[],activeProject=0x0,isDrawing=![];function createProject(_0x2d8bd1=0x10,_0x6a26d1=0x10,_0x3f4f55=''){const _0x3c22df=a0_0x1fe732;let _0xf5f40a=0x14,_0x3a2c9c=[],_0x3bdb33=[],_0x50dc9b=[],_0x2e8277=document[_0x3c22df(0x1cc)](_0x3c22df(0x23a));_0x2e8277[_0x3c22df(0x21e)]=_0x2d8bd1*_0xf5f40a,_0x2e8277[_0x3c22df(0x1a9)]=_0x6a26d1*_0xf5f40a,_0x3a2c9c[_0x3c22df(0x228)](_0x2e8277),_0x3bdb33['push']([]),_0x50dc9b[_0x3c22df(0x228)]([]);let _0x125069={'layers':_0x3a2c9c,'activeLayer':0x0,'layerHistories':_0x3bdb33,'layerRedoStacks':_0x50dc9b};return{'frames':[_0x125069],'activeFrame':0x0,'width':_0x2d8bd1,'height':_0x6a26d1,'name':_0x3f4f55||'画像'+(projects[_0x3c22df(0x1f4)]+0x1)};}function updateProjectUI(){const _0x4665de=a0_0x1fe732,_0x13ae5a=document[_0x4665de(0x25b)](_0x4665de(0x17e));_0x13ae5a[_0x4665de(0x1a0)]='';for(let _0x273fbe=0x0;_0x273fbe<projects[_0x4665de(0x1f4)];_0x273fbe++){const _0x3d8998=document[_0x4665de(0x1cc)]('div');_0x3d8998['className']=_0x4665de(0x1a6)+(_0x273fbe===activeProject?_0x4665de(0x1bc):''),_0x3d8998['onclick']=()=>{activeProject=_0x273fbe,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();};const _0x3006af=document['createElement']('span');_0x3006af[_0x4665de(0x261)]=_0x4665de(0x174),_0x3006af['textContent']=projects[_0x273fbe][_0x4665de(0x161)]||'画像'+(_0x273fbe+0x1),_0x3006af[_0x4665de(0x21a)]=_0x4665de(0x260),_0x3006af['onclick']=_0x2ef316=>{const _0xd439a4=_0x4665de;_0x2ef316[_0xd439a4(0x199)](),editProjectName(_0x273fbe,_0x3006af);},_0x3d8998[_0x4665de(0x1dc)](_0x3006af);const _0x505519=document['createElement'](_0x4665de(0x19b));_0x505519['textContent']='削除',_0x505519[_0x4665de(0x261)]=_0x4665de(0x15b),_0x505519[_0x4665de(0x258)]=projects['length']===0x1,_0x505519[_0x4665de(0x1e5)]=_0x3960ba=>{const _0x33b793=_0x4665de;_0x3960ba[_0x33b793(0x199)](),removeProjectAt(_0x273fbe);},_0x3d8998[_0x4665de(0x1dc)](_0x505519),_0x13ae5a['appendChild'](_0x3d8998);}document['getElementById']('projectCount')[_0x4665de(0x1d4)]='('+projects[_0x4665de(0x1f4)]+'枚)';}function editProjectName(_0x4ba67c,_0x20283e){const _0x5f01a0=a0_0x1fe732,_0x48b00c=document[_0x5f01a0(0x1cc)]('input');_0x48b00c['type']=_0x5f01a0(0x1cb),_0x48b00c['value']=projects[_0x4ba67c]['name']||'画像'+(_0x4ba67c+0x1),_0x48b00c['className']='project-name-edit',_0x48b00c[_0x5f01a0(0x246)][_0x5f01a0(0x21e)]='80px',_0x48b00c[_0x5f01a0(0x1ac)]=()=>{const _0x148153=_0x5f01a0;projects[_0x4ba67c][_0x148153(0x161)]=_0x48b00c[_0x148153(0x26b)]['trim']()||'画像'+(_0x4ba67c+0x1),updateProjectUI();},_0x48b00c[_0x5f01a0(0x21d)]=_0x2c4bd1=>{const _0x2c12bd=_0x5f01a0;if(_0x2c4bd1[_0x2c12bd(0x18e)]==='Enter')_0x48b00c[_0x2c12bd(0x214)]();},_0x20283e[_0x5f01a0(0x229)](_0x48b00c),_0x48b00c[_0x5f01a0(0x163)](),_0x48b00c[_0x5f01a0(0x242)]();}function showNewProjectDialog(_0x6a0db1){const _0x16b05d=a0_0x1fe732;let _0x5b7cda=document[_0x16b05d(0x25b)]('new-project-dialog');if(_0x5b7cda)_0x5b7cda[_0x16b05d(0x20a)]();const _0x11be82=document[_0x16b05d(0x1cc)](_0x16b05d(0x27b));_0x11be82['id']=_0x16b05d(0x179),_0x11be82[_0x16b05d(0x246)]['position']=_0x16b05d(0x250),_0x11be82[_0x16b05d(0x246)][_0x16b05d(0x1f5)]='0',_0x11be82[_0x16b05d(0x246)]['top']='0',_0x11be82[_0x16b05d(0x246)]['width']=_0x16b05d(0x27e),_0x11be82['style'][_0x16b05d(0x1a9)]='100vh',_0x11be82['style'][_0x16b05d(0x1b6)]=_0x16b05d(0x270),_0x11be82['style'][_0x16b05d(0x182)]=_0x16b05d(0x196),_0x11be82[_0x16b05d(0x246)][_0x16b05d(0x24d)]=_0x16b05d(0x16c),_0x11be82[_0x16b05d(0x246)][_0x16b05d(0x183)]=_0x16b05d(0x16c),_0x11be82['style'][_0x16b05d(0x1a3)]=_0x16b05d(0x22d),_0x11be82[_0x16b05d(0x1a0)]=_0x16b05d(0x24e)+(projects[_0x16b05d(0x1f4)]+0x1)+_0x16b05d(0x1bd),document[_0x16b05d(0x22f)]['appendChild'](_0x11be82),_0x11be82[_0x16b05d(0x204)]('#newProjOkBtn')[_0x16b05d(0x1e5)]=()=>{const _0x391235=_0x16b05d,_0x4f0a19=parseInt(_0x11be82[_0x391235(0x204)](_0x391235(0x219))[_0x391235(0x26b)],0xa),_0x4c5149=parseInt(_0x11be82[_0x391235(0x204)](_0x391235(0x18c))[_0x391235(0x26b)],0xa),_0x386632=_0x11be82[_0x391235(0x204)](_0x391235(0x1e7))[_0x391235(0x26b)][_0x391235(0x186)]();_0x11be82[_0x391235(0x20a)]();if(_0x6a0db1)_0x6a0db1(_0x4f0a19,_0x4c5149,_0x386632);},_0x11be82[_0x16b05d(0x204)](_0x16b05d(0x268))[_0x16b05d(0x1e5)]=()=>{const _0x5708a9=_0x16b05d;_0x11be82[_0x5708a9(0x20a)]();};}function addProject(){showNewProjectDialog((_0x289f60,_0x3c0211,_0x49f2fd)=>{const _0x22d3bf=a0_0x2317;if(!Number[_0x22d3bf(0x181)](_0x289f60)||_0x289f60<0x1)_0x289f60=0x10;if(!Number[_0x22d3bf(0x181)](_0x3c0211)||_0x3c0211<0x1)_0x3c0211=0x10;projects[_0x22d3bf(0x228)](createProject(_0x289f60,_0x3c0211,_0x49f2fd)),activeProject=projects[_0x22d3bf(0x1f4)]-0x1,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();});}function removeProjectAt(_0x18f4cf){const _0x290edb=a0_0x1fe732;if(projects[_0x290edb(0x1f4)]<=0x1)return;projects[_0x290edb(0x1e4)](_0x18f4cf,0x1);if(activeProject>=projects[_0x290edb(0x1f4)])activeProject=projects[_0x290edb(0x1f4)]-0x1;updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentProject(){return projects[activeProject];}function updateFrameUI(){const _0x37b3d5=a0_0x1fe732,_0x28ed42=document[_0x37b3d5(0x25b)](_0x37b3d5(0x165)),_0x530d91=getCurrentProject();_0x28ed42[_0x37b3d5(0x1a0)]='';for(let _0x8f5592=0x0;_0x8f5592<_0x530d91[_0x37b3d5(0x160)][_0x37b3d5(0x1f4)];_0x8f5592++){const _0x570f97=document[_0x37b3d5(0x1cc)](_0x37b3d5(0x27b));_0x570f97[_0x37b3d5(0x261)]=_0x37b3d5(0x245)+(_0x8f5592===_0x530d91[_0x37b3d5(0x244)]?_0x37b3d5(0x1bc):''),_0x570f97['onclick']=()=>{_0x530d91['activeFrame']=_0x8f5592,updateFrameUI(),updateLayerUI(),redrawAll();};const _0x1e17df=document['createElement'](_0x37b3d5(0x23a));_0x1e17df[_0x37b3d5(0x261)]=_0x37b3d5(0x1be),_0x1e17df[_0x37b3d5(0x21e)]=0x20,_0x1e17df[_0x37b3d5(0x1a9)]=0x20;let _0xd21b01=_0x1e17df['getContext']('2d');_0xd21b01['clearRect'](0x0,0x0,0x20,0x20);for(let _0xe2b055=0x0;_0xe2b055<_0x530d91[_0x37b3d5(0x160)][_0x8f5592][_0x37b3d5(0x1bf)]['length'];_0xe2b055++){_0xd21b01[_0x37b3d5(0x15d)](_0x530d91['frames'][_0x8f5592][_0x37b3d5(0x1bf)][_0xe2b055],0x0,0x0,_0x1e17df['width'],_0x1e17df[_0x37b3d5(0x1a9)]);}_0x570f97[_0x37b3d5(0x1dc)](_0x1e17df);const _0x30b2ad=document['createElement']('span');_0x30b2ad[_0x37b3d5(0x1d4)]='F'+(_0x8f5592+0x1),_0x570f97[_0x37b3d5(0x1dc)](_0x30b2ad);const _0x1040d2=document[_0x37b3d5(0x1cc)](_0x37b3d5(0x19b));_0x1040d2[_0x37b3d5(0x1d4)]='削除',_0x1040d2['className']='frame-btn',_0x1040d2[_0x37b3d5(0x258)]=_0x530d91[_0x37b3d5(0x160)]['length']===0x1,_0x1040d2[_0x37b3d5(0x1e5)]=_0x2cfc3d=>{_0x2cfc3d['stopPropagation'](),removeFrameAt(_0x8f5592);},_0x570f97[_0x37b3d5(0x1dc)](_0x1040d2),_0x28ed42[_0x37b3d5(0x1dc)](_0x570f97);}document['getElementById']('frameCount')[_0x37b3d5(0x1d4)]='('+_0x530d91[_0x37b3d5(0x160)]['length']+'コマ)';}function addFrame(){const _0x11f0b1=a0_0x1fe732;let _0x154fc0=getCurrentProject(),_0x2eb22f=_0x154fc0[_0x11f0b1(0x160)][_0x154fc0[_0x11f0b1(0x244)]],_0x5f04c7=_0x2eb22f[_0x11f0b1(0x1bf)]['map'](_0x4b578e=>{const _0x1a5c39=_0x11f0b1;let _0x1ce51e=document[_0x1a5c39(0x1cc)](_0x1a5c39(0x23a));return _0x1ce51e[_0x1a5c39(0x21e)]=_0x4b578e['width'],_0x1ce51e[_0x1a5c39(0x1a9)]=_0x4b578e[_0x1a5c39(0x1a9)],_0x1ce51e[_0x1a5c39(0x1b0)]('2d')['drawImage'](_0x4b578e,0x0,0x0),_0x1ce51e;}),_0x1eae0a=_0x5f04c7[_0x11f0b1(0x1db)](()=>[]),_0x3bf967=_0x5f04c7[_0x11f0b1(0x1db)](()=>[]),_0x33ac2e={'layers':_0x5f04c7,'activeLayer':0x0,'layerHistories':_0x1eae0a,'layerRedoStacks':_0x3bf967};_0x154fc0['frames'][_0x11f0b1(0x1e4)](_0x154fc0[_0x11f0b1(0x244)]+0x1,0x0,_0x33ac2e),_0x154fc0[_0x11f0b1(0x244)]++,updateFrameUI(),updateLayerUI(),redrawAll();}function removeFrameAt(_0x2e08e2){const _0xcd9ec=a0_0x1fe732;let _0x318350=getCurrentProject();if(_0x318350[_0xcd9ec(0x160)][_0xcd9ec(0x1f4)]<=0x1)return;_0x318350[_0xcd9ec(0x160)][_0xcd9ec(0x1e4)](_0x2e08e2,0x1);if(_0x318350[_0xcd9ec(0x244)]>=_0x318350['frames']['length'])_0x318350[_0xcd9ec(0x244)]=_0x318350[_0xcd9ec(0x160)][_0xcd9ec(0x1f4)]-0x1;updateFrameUI(),updateLayerUI(),redrawAll();}function getCurrentFrame(){const _0x521268=a0_0x1fe732;return getCurrentProject()[_0x521268(0x160)][getCurrentProject()[_0x521268(0x244)]];}function updateLayerUI(){const _0x2c9dd9=a0_0x1fe732;let {layers:_0xb44294,activeLayer:_0x3d622d}=getCurrentFrame();document[_0x2c9dd9(0x25b)](_0x2c9dd9(0x20f))[_0x2c9dd9(0x1d4)]='('+_0xb44294[_0x2c9dd9(0x1f4)]+'枚)';const _0x276b61=document['getElementById'](_0x2c9dd9(0x276));_0x276b61[_0x2c9dd9(0x1a0)]='';for(let _0x3615e9=_0xb44294[_0x2c9dd9(0x1f4)]-0x1;_0x3615e9>=0x0;_0x3615e9--){const _0x21fc57=document[_0x2c9dd9(0x1cc)]('div');_0x21fc57[_0x2c9dd9(0x261)]=_0x2c9dd9(0x24c)+(_0x3615e9===_0x3d622d?_0x2c9dd9(0x1bc):''),_0x21fc57['onclick']=_0x194d12=>{const _0xe8288d=_0x2c9dd9;if(_0x194d12[_0xe8288d(0x175)][_0xe8288d(0x19e)][_0xe8288d(0x17c)](_0xe8288d(0x27a)))return;getCurrentFrame()[_0xe8288d(0x212)]=_0x3615e9,updateLayerUI(),redrawAll();};const _0x27b283=document['createElement'](_0x2c9dd9(0x23a));_0x27b283[_0x2c9dd9(0x261)]=_0x2c9dd9(0x217),_0x27b283[_0x2c9dd9(0x21e)]=0x20,_0x27b283[_0x2c9dd9(0x1a9)]=0x20;let _0xd8f156=_0x27b283[_0x2c9dd9(0x1b0)]('2d');_0xd8f156['clearRect'](0x0,0x0,0x20,0x20),_0xd8f156[_0x2c9dd9(0x15d)](_0xb44294[_0x3615e9],0x0,0x0,_0x27b283['width'],_0x27b283[_0x2c9dd9(0x1a9)]),_0x21fc57[_0x2c9dd9(0x1dc)](_0x27b283);const _0x1076af=document[_0x2c9dd9(0x1cc)](_0x2c9dd9(0x218));_0x1076af[_0x2c9dd9(0x1d4)]=_0x2c9dd9(0x178)+(_0x3615e9+0x1),_0x21fc57[_0x2c9dd9(0x1dc)](_0x1076af);const _0xe6a6b2=document[_0x2c9dd9(0x1cc)](_0x2c9dd9(0x19b));_0xe6a6b2[_0x2c9dd9(0x1d4)]='↑',_0xe6a6b2[_0x2c9dd9(0x261)]=_0x2c9dd9(0x27a),_0xe6a6b2[_0x2c9dd9(0x21a)]=_0x2c9dd9(0x17a),_0xe6a6b2['disabled']=_0x3615e9===_0xb44294[_0x2c9dd9(0x1f4)]-0x1,_0xe6a6b2[_0x2c9dd9(0x1e5)]=_0x4d1356=>{const _0x25b922=_0x2c9dd9;_0x4d1356['stopPropagation'](),_0x3615e9<_0xb44294[_0x25b922(0x1f4)]-0x1&&swapLayer(_0x3615e9,_0x3615e9+0x1);},_0x21fc57[_0x2c9dd9(0x1dc)](_0xe6a6b2);const _0x28a5b3=document[_0x2c9dd9(0x1cc)](_0x2c9dd9(0x19b));_0x28a5b3['textContent']='↓',_0x28a5b3['className']=_0x2c9dd9(0x27a),_0x28a5b3['title']=_0x2c9dd9(0x1a5),_0x28a5b3[_0x2c9dd9(0x258)]=_0x3615e9===0x0,_0x28a5b3[_0x2c9dd9(0x1e5)]=_0x5f3690=>{const _0x12a18a=_0x2c9dd9;_0x5f3690[_0x12a18a(0x199)](),_0x3615e9>0x0&&swapLayer(_0x3615e9,_0x3615e9-0x1);},_0x21fc57[_0x2c9dd9(0x1dc)](_0x28a5b3);const _0x759567=document[_0x2c9dd9(0x1cc)](_0x2c9dd9(0x19b));_0x759567['textContent']='削除',_0x759567[_0x2c9dd9(0x261)]=_0x2c9dd9(0x27a),_0x759567[_0x2c9dd9(0x21a)]='このレイヤーを削除',_0x759567[_0x2c9dd9(0x258)]=_0xb44294['length']===0x1,_0x759567[_0x2c9dd9(0x1e5)]=_0x3788e9=>{const _0xacdfea=_0x2c9dd9;_0x3788e9[_0xacdfea(0x199)](),removeLayerAt(_0x3615e9);},_0x21fc57[_0x2c9dd9(0x1dc)](_0x759567),_0x276b61[_0x2c9dd9(0x1dc)](_0x21fc57);}}function swapLayer(_0x2820aa,_0x5ef08e){const _0x209cb4=a0_0x1fe732;let _0x212945=getCurrentFrame();[_0x212945['layers'][_0x2820aa],_0x212945['layers'][_0x5ef08e]]=[_0x212945['layers'][_0x5ef08e],_0x212945[_0x209cb4(0x1bf)][_0x2820aa]],[_0x212945[_0x209cb4(0x185)][_0x2820aa],_0x212945[_0x209cb4(0x185)][_0x5ef08e]]=[_0x212945[_0x209cb4(0x185)][_0x5ef08e],_0x212945[_0x209cb4(0x185)][_0x2820aa]],[_0x212945[_0x209cb4(0x1d2)][_0x2820aa],_0x212945['layerRedoStacks'][_0x5ef08e]]=[_0x212945['layerRedoStacks'][_0x5ef08e],_0x212945['layerRedoStacks'][_0x2820aa]];if(_0x212945[_0x209cb4(0x212)]===_0x2820aa)_0x212945['activeLayer']=_0x5ef08e;else{if(_0x212945['activeLayer']===_0x5ef08e)_0x212945[_0x209cb4(0x212)]=_0x2820aa;}updateLayerUI(),redrawAll();}function removeLayerAt(_0xd873e6){const _0x3e2635=a0_0x1fe732;let _0x4e1bdb=getCurrentFrame();if(_0x4e1bdb[_0x3e2635(0x1bf)][_0x3e2635(0x1f4)]<=0x1)return;_0x4e1bdb[_0x3e2635(0x1bf)]['splice'](_0xd873e6,0x1),_0x4e1bdb[_0x3e2635(0x185)][_0x3e2635(0x1e4)](_0xd873e6,0x1),_0x4e1bdb[_0x3e2635(0x1d2)][_0x3e2635(0x1e4)](_0xd873e6,0x1);if(_0x4e1bdb['activeLayer']>=_0x4e1bdb['layers'][_0x3e2635(0x1f4)])_0x4e1bdb['activeLayer']=_0x4e1bdb[_0x3e2635(0x1bf)][_0x3e2635(0x1f4)]-0x1;updateLayerUI(),redrawAll();}function addLayer(){const _0x476940=a0_0x1fe732;let _0x5694d9=getCurrentProject(),_0x36d374=getCurrentFrame(),_0x52cbe0=document['createElement']('canvas');_0x52cbe0['width']=_0x5694d9[_0x476940(0x21e)]*cellSize,_0x52cbe0[_0x476940(0x1a9)]=_0x5694d9[_0x476940(0x1a9)]*cellSize,_0x36d374['layers']['push'](_0x52cbe0),_0x36d374[_0x476940(0x185)][_0x476940(0x228)]([]),_0x36d374[_0x476940(0x1d2)][_0x476940(0x228)]([]),_0x36d374[_0x476940(0x212)]=_0x36d374[_0x476940(0x1bf)][_0x476940(0x1f4)]-0x1,saveHistory(),updateLayerUI(),redrawAll();}function removeLayer(){const _0x6db4f7=a0_0x1fe732;let _0x9699d9=getCurrentFrame();if(_0x9699d9[_0x6db4f7(0x1bf)][_0x6db4f7(0x1f4)]<=0x1)return;_0x9699d9[_0x6db4f7(0x1bf)][_0x6db4f7(0x1e4)](_0x9699d9['activeLayer'],0x1),_0x9699d9['layerHistories'][_0x6db4f7(0x1e4)](_0x9699d9[_0x6db4f7(0x212)],0x1),_0x9699d9[_0x6db4f7(0x1d2)][_0x6db4f7(0x1e4)](_0x9699d9[_0x6db4f7(0x212)],0x1),_0x9699d9[_0x6db4f7(0x212)]=Math[_0x6db4f7(0x220)](0x0,_0x9699d9[_0x6db4f7(0x212)]-0x1),updateLayerUI(),redrawAll();}function selectLayer(_0x594b1e){const _0x39e855=a0_0x1fe732;getCurrentFrame()[_0x39e855(0x212)]=parseInt(_0x594b1e),updateLayerUI();}let PALETTE_COLORS=['transparent',a0_0x1fe732(0x1ec),a0_0x1fe732(0x1f9),'#888888',a0_0x1fe732(0x16d),'#ffffff','#ff0000','#ffa500','#ffff00','#00ff00',a0_0x1fe732(0x1b9),a0_0x1fe732(0x1fd),'#ff00ff',a0_0x1fe732(0x188),a0_0x1fe732(0x238),a0_0x1fe732(0x17d),a0_0x1fe732(0x166),a0_0x1fe732(0x1a1),'#800080',a0_0x1fe732(0x1ef),a0_0x1fe732(0x243)],currentAlpha=0x1;function setTool(_0x420823){const _0x9377dd=a0_0x1fe732;currentTool=_0x420823,document[_0x9377dd(0x170)](_0x9377dd(0x279))[_0x9377dd(0x1dd)](_0x226156=>{const _0x166cdf=_0x9377dd;_0x226156[_0x166cdf(0x19e)][_0x166cdf(0x252)](_0x166cdf(0x1da),_0x226156[_0x166cdf(0x23f)][_0x166cdf(0x191)]===_0x420823);}),document[_0x9377dd(0x170)](_0x9377dd(0x1bb))[_0x9377dd(0x1dd)](_0x44dae2=>{const _0x380480=_0x9377dd;_0x44dae2['classList'][_0x380480(0x252)]('active',_0x44dae2[_0x380480(0x23f)][_0x380480(0x191)]===_0x420823);});}function setPenSize(_0x53a003){const _0x30c87f=a0_0x1fe732;penSize=parseInt(_0x53a003)||0x1;let _0x5b9514=document[_0x30c87f(0x25b)](_0x30c87f(0x1c0));if(_0x5b9514)_0x5b9514[_0x30c87f(0x26b)]=penSize;let _0x5ebe27=document[_0x30c87f(0x25b)](_0x30c87f(0x18f));if(_0x5ebe27)_0x5ebe27[_0x30c87f(0x26b)]=penSize;}function setPenMode(_0x1b65df){const _0xf23ac6=a0_0x1fe732;penMode=_0x1b65df;let _0x1bb492=document['getElementById']('penMode');if(_0x1bb492)_0x1bb492[_0xf23ac6(0x26b)]=penMode;let _0x7e8238=document['getElementById'](_0xf23ac6(0x1f3));if(_0x7e8238)_0x7e8238['value']=penMode;}function hexToRgba(_0x167c84,_0x5590fe=0x1){const _0x286de5=a0_0x1fe732;if(_0x167c84===_0x286de5(0x1b5)||_0x167c84===_0x286de5(0x1b8))return[0x0,0x0,0x0,0x0];_0x167c84=_0x167c84['replace']('#','');if(_0x167c84[_0x286de5(0x1f4)]===0x3)_0x167c84=_0x167c84[_0x286de5(0x262)]('')[_0x286de5(0x1db)](_0xcac823=>_0xcac823+_0xcac823)[_0x286de5(0x24b)]('');let _0x440a69=parseInt(_0x167c84,0x10);return[_0x440a69>>0x10&0xff,_0x440a69>>0x8&0xff,_0x440a69&0xff,Math['round'](0xff*_0x5590fe)];}function fillAt(_0x211f05,_0x40a1f5){const _0x2d4be8=a0_0x1fe732;let _0x378b41=getCurrentProject(),_0xf7cadf=getCurrentFrame(),_0x16d78e=_0xf7cadf[_0x2d4be8(0x1bf)][_0xf7cadf[_0x2d4be8(0x212)]]['getContext']('2d'),_0x16fb39=_0x16d78e[_0x2d4be8(0x237)](0x0,0x0,_0x378b41[_0x2d4be8(0x21e)]*cellSize,_0x378b41[_0x2d4be8(0x1a9)]*cellSize),_0x1d2469=_0x211f05*cellSize,_0x21e518=_0x40a1f5*cellSize,_0x1c5b75=getPixel(_0x16fb39,_0x1d2469,_0x21e518),_0x3ed961=currentColor===_0x2d4be8(0x1b5)||currentColor===_0x2d4be8(0x1b8)||currentAlpha===0x0?[0x0,0x0,0x0,0x0]:hexToRgba(currentColor,currentAlpha);if(colorsMatch(_0x1c5b75,_0x3ed961))return;let _0x205905=[[_0x211f05,_0x40a1f5]],_0x595f10=new Set();while(_0x205905[_0x2d4be8(0x1f4)]){let [_0x2874c5,_0x36a3d6]=_0x205905['pop']();if(_0x2874c5<0x0||_0x36a3d6<0x0||_0x2874c5>=_0x378b41[_0x2d4be8(0x21e)]||_0x36a3d6>=_0x378b41[_0x2d4be8(0x1a9)])continue;let _0x24c7b1=_0x2874c5+','+_0x36a3d6;if(_0x595f10[_0x2d4be8(0x267)](_0x24c7b1))continue;_0x595f10['add'](_0x24c7b1);let _0x4c116d=_0x2874c5*cellSize,_0x32ccfa=_0x36a3d6*cellSize,_0x106d1e=getPixel(_0x16fb39,_0x4c116d,_0x32ccfa);if(!colorsMatch(_0x106d1e,_0x1c5b75))continue;for(let _0x1063f6=0x0;_0x1063f6<cellSize;_0x1063f6++){for(let _0x3c7136=0x0;_0x3c7136<cellSize;_0x3c7136++){setPixel(_0x16fb39,_0x4c116d+_0x3c7136,_0x32ccfa+_0x1063f6,_0x3ed961);}}_0x205905[_0x2d4be8(0x228)]([_0x2874c5+0x1,_0x36a3d6]),_0x205905[_0x2d4be8(0x228)]([_0x2874c5-0x1,_0x36a3d6]),_0x205905[_0x2d4be8(0x228)]([_0x2874c5,_0x36a3d6+0x1]),_0x205905[_0x2d4be8(0x228)]([_0x2874c5,_0x36a3d6-0x1]);}_0x16d78e[_0x2d4be8(0x1fc)](_0x16fb39,0x0,0x0),redrawAll();}function getPixel(_0xb7ca7c,_0x48a24e,_0x5db45e){const _0x525934=a0_0x1fe732;let _0x477f18=(_0x5db45e*_0xb7ca7c[_0x525934(0x21e)]+_0x48a24e)*0x4;return[_0xb7ca7c[_0x525934(0x222)][_0x477f18],_0xb7ca7c['data'][_0x477f18+0x1],_0xb7ca7c[_0x525934(0x222)][_0x477f18+0x2],_0xb7ca7c[_0x525934(0x222)][_0x477f18+0x3]];}function setPixel(_0x20463b,_0x5bbae9,_0x17c212,_0x4c4cba){const _0x45ffa0=a0_0x1fe732;let _0x375eda=(_0x17c212*_0x20463b[_0x45ffa0(0x21e)]+_0x5bbae9)*0x4;_0x20463b['data'][_0x375eda]=_0x4c4cba[0x0],_0x20463b['data'][_0x375eda+0x1]=_0x4c4cba[0x1],_0x20463b[_0x45ffa0(0x222)][_0x375eda+0x2]=_0x4c4cba[0x2],_0x20463b[_0x45ffa0(0x222)][_0x375eda+0x3]=_0x4c4cba[0x3];}function colorsMatch(_0x493413,_0x5a8515){return _0x493413[0x0]===_0x5a8515[0x0]&&_0x493413[0x1]===_0x5a8515[0x1]&&_0x493413[0x2]===_0x5a8515[0x2]&&_0x493413[0x3]===_0x5a8515[0x3];}function handleMouseDown(_0x3474f1){const _0x50c02c=a0_0x1fe732;isDrawing=!![];const _0xede4ca=canvas[_0x50c02c(0x176)](),_0x3089f1=canvas['width']/_0xede4ca[_0x50c02c(0x21e)],_0x986433=canvas['height']/_0xede4ca[_0x50c02c(0x1a9)],_0x46ffcd=Math[_0x50c02c(0x162)]((_0x3474f1[_0x50c02c(0x184)]-_0xede4ca[_0x50c02c(0x1f5)])*_0x3089f1/cellSize),_0x3abac0=Math[_0x50c02c(0x162)]((_0x3474f1['clientY']-_0xede4ca[_0x50c02c(0x26d)])*_0x986433/cellSize);currentTool===_0x50c02c(0x207)?(fillAt(_0x46ffcd,_0x3abac0),saveHistory(),isDrawing=![]):drawDotXY(_0x46ffcd,_0x3abac0);}function handleMouseMove(_0x226e80){const _0x447936=a0_0x1fe732;if(!isDrawing)return;const _0x104715=canvas[_0x447936(0x176)](),_0x5589de=canvas[_0x447936(0x21e)]/_0x104715[_0x447936(0x21e)],_0xca9843=canvas[_0x447936(0x1a9)]/_0x104715['height'],_0x2dd2c7=Math[_0x447936(0x162)]((_0x226e80[_0x447936(0x184)]-_0x104715['left'])*_0x5589de/cellSize),_0x191496=Math[_0x447936(0x162)]((_0x226e80[_0x447936(0x25f)]-_0x104715['top'])*_0xca9843/cellSize);drawDotXY(_0x2dd2c7,_0x191496);}function handleMouseUp(_0x486e03){isDrawing&&saveHistory(),isDrawing=![];}let lastTouch=null;function getTouchPos(_0x1a45ce){const _0x4f2e6c=a0_0x1fe732,_0x2b0647=canvas['getBoundingClientRect']();let _0x4407b7=_0x1a45ce[_0x4f2e6c(0x265)]&&_0x1a45ce[_0x4f2e6c(0x265)][0x0]?_0x1a45ce[_0x4f2e6c(0x265)][0x0]:_0x1a45ce[_0x4f2e6c(0x251)][0x0];const _0x2ee386=canvas[_0x4f2e6c(0x21e)]/_0x2b0647[_0x4f2e6c(0x21e)],_0x5ee03f=canvas[_0x4f2e6c(0x1a9)]/_0x2b0647[_0x4f2e6c(0x1a9)];return{'x':Math[_0x4f2e6c(0x162)]((_0x4407b7['clientX']-_0x2b0647[_0x4f2e6c(0x1f5)])*_0x2ee386/cellSize),'y':Math[_0x4f2e6c(0x162)]((_0x4407b7['clientY']-_0x2b0647[_0x4f2e6c(0x26d)])*_0x5ee03f/cellSize)};}function handleTouchStart(_0xb591ea){const _0x3602e4=a0_0x1fe732;if(_0xb591ea[_0x3602e4(0x265)]['length']>0x1)return;_0xb591ea[_0x3602e4(0x25a)](),isDrawing=!![];let _0x465eb8=getTouchPos(_0xb591ea);lastTouch=_0x465eb8,currentTool===_0x3602e4(0x207)?(fillAt(_0x465eb8['x'],_0x465eb8['y']),saveHistory(),isDrawing=![]):drawDotTouch(_0x465eb8['x'],_0x465eb8['y']);}function handleTouchMove(_0x152594){const _0x45e7ec=a0_0x1fe732;if(!isDrawing)return;if(_0x152594['touches'][_0x45e7ec(0x1f4)]>0x1)return;_0x152594[_0x45e7ec(0x25a)]();let _0x2da583=getTouchPos(_0x152594);if(lastTouch){let _0x197e9c=_0x2da583['x']-lastTouch['x'],_0x4e97cb=_0x2da583['y']-lastTouch['y'],_0x1d718d=Math[_0x45e7ec(0x220)](Math[_0x45e7ec(0x1aa)](_0x197e9c),Math[_0x45e7ec(0x1aa)](_0x4e97cb));for(let _0x581f6f=0x1;_0x581f6f<=_0x1d718d;_0x581f6f++){let _0x41dc1b=Math['round'](lastTouch['x']+_0x197e9c*_0x581f6f/_0x1d718d),_0x3b4e73=Math[_0x45e7ec(0x26e)](lastTouch['y']+_0x4e97cb*_0x581f6f/_0x1d718d);drawDotTouch(_0x41dc1b,_0x3b4e73);}}else drawDotTouch(_0x2da583['x'],_0x2da583['y']);lastTouch=_0x2da583;}function handleTouchEnd(_0xfbf4ba){isDrawing&&saveHistory(),isDrawing=![],lastTouch=null;}function drawDotXY(_0xc5a8aa,_0x28c204){const _0x4b4e03=a0_0x1fe732;let _0x3c0fd8=getCurrentProject(),_0x33905c=getCurrentFrame();if(!_0x33905c||!_0x3c0fd8)return;if(typeof _0xc5a8aa!==_0x4b4e03(0x17f)||typeof _0x28c204!==_0x4b4e03(0x17f)||_0xc5a8aa<0x0||_0x28c204<0x0||!Number['isFinite'](_0x3c0fd8['width'])||!Number[_0x4b4e03(0x181)](_0x3c0fd8[_0x4b4e03(0x1a9)])||_0xc5a8aa>=_0x3c0fd8['width']||_0x28c204>=_0x3c0fd8[_0x4b4e03(0x1a9)]||!Array['isArray'](_0x33905c[_0x4b4e03(0x1bf)])||typeof _0x33905c['activeLayer']!==_0x4b4e03(0x17f)||!_0x33905c[_0x4b4e03(0x1bf)][_0x33905c[_0x4b4e03(0x212)]])return;let _0x25a03d=_0x33905c['layers'][_0x33905c[_0x4b4e03(0x212)]]['getContext']('2d');if(!_0x25a03d)return;if(currentTool===_0x4b4e03(0x1ce)||currentColor===_0x4b4e03(0x1b5)||currentColor===_0x4b4e03(0x1b8)||currentAlpha===0x0)drawPenShape(_0x25a03d,_0xc5a8aa,_0x28c204,_0x4b4e03(0x1b8),!![]);else{let _0x1cb895=hexToRgba(currentColor,currentAlpha);_0x25a03d[_0x4b4e03(0x198)](),_0x25a03d['globalAlpha']=_0x1cb895[0x3]/0xff,drawPenShape(_0x25a03d,_0xc5a8aa,_0x28c204,_0x4b4e03(0x254)+_0x1cb895[0x0]+','+_0x1cb895[0x1]+','+_0x1cb895[0x2]+','+_0x1cb895[0x3]/0xff+')',![]),_0x25a03d['restore']();}redrawAll();}function drawPenShape(_0x13f0fd,_0x16fc2e,_0x484fc4,_0x5eb3a5,_0x334ba4){const _0x4426aa=a0_0x1fe732,_0x78c64f=_0x16fc2e*cellSize,_0x216dc7=_0x484fc4*cellSize,_0x32c1c2=penSize*cellSize;_0x334ba4?(_0x13f0fd[_0x4426aa(0x198)](),_0x13f0fd[_0x4426aa(0x240)]='destination-out',penMode===_0x4426aa(0x26a)?(_0x13f0fd[_0x4426aa(0x26f)](),_0x13f0fd[_0x4426aa(0x15e)](_0x78c64f+cellSize/0x2,_0x216dc7+cellSize/0x2,_0x32c1c2/0x2,0x0,Math['PI']*0x2),_0x13f0fd['fill']()):_0x13f0fd[_0x4426aa(0x19a)](_0x78c64f-Math['floor']((penSize-0x1)/0x2)*cellSize,_0x216dc7-Math[_0x4426aa(0x162)]((penSize-0x1)/0x2)*cellSize,_0x32c1c2,_0x32c1c2),_0x13f0fd[_0x4426aa(0x234)]()):(_0x13f0fd[_0x4426aa(0x198)](),_0x13f0fd[_0x4426aa(0x200)]=_0x5eb3a5,penMode===_0x4426aa(0x26a)?(_0x13f0fd['beginPath'](),_0x13f0fd[_0x4426aa(0x15e)](_0x78c64f+cellSize/0x2,_0x216dc7+cellSize/0x2,_0x32c1c2/0x2,0x0,Math['PI']*0x2),_0x13f0fd[_0x4426aa(0x207)]()):_0x13f0fd[_0x4426aa(0x206)](_0x78c64f-Math[_0x4426aa(0x162)]((penSize-0x1)/0x2)*cellSize,_0x216dc7-Math[_0x4426aa(0x162)]((penSize-0x1)/0x2)*cellSize,_0x32c1c2,_0x32c1c2),_0x13f0fd[_0x4426aa(0x234)]());}function drawDotTouch(_0x36b955,_0x304fc9){const _0x117ba5=a0_0x1fe732;let _0x2ce315=getCurrentProject(),_0x3ec807=getCurrentFrame();if(_0x36b955<0x0||_0x304fc9<0x0||_0x36b955>=_0x2ce315[_0x117ba5(0x21e)]||_0x304fc9>=_0x2ce315[_0x117ba5(0x1a9)])return;let _0x1c4e14=_0x3ec807[_0x117ba5(0x1bf)][_0x3ec807[_0x117ba5(0x212)]][_0x117ba5(0x1b0)]('2d');if(currentTool===_0x117ba5(0x1ce)||currentColor===_0x117ba5(0x1b5)||currentColor===_0x117ba5(0x1b8)||currentAlpha===0x0)drawPenShape(_0x1c4e14,_0x36b955,_0x304fc9,_0x117ba5(0x1b8),!![]);else{let _0xa2ef74=hexToRgba(currentColor,currentAlpha);_0x1c4e14[_0x117ba5(0x198)](),_0x1c4e14['globalAlpha']=_0xa2ef74[0x3]/0xff,drawPenShape(_0x1c4e14,_0x36b955,_0x304fc9,_0x117ba5(0x254)+_0xa2ef74[0x0]+','+_0xa2ef74[0x1]+','+_0xa2ef74[0x2]+','+_0xa2ef74[0x3]/0xff+')',![]),_0x1c4e14[_0x117ba5(0x234)]();}redrawAll();}window['onload']=()=>{const _0x29fc49=a0_0x1fe732;projects=[createProject()],activeProject=0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),initCanvas(),setTool(_0x29fc49(0x1cd)),createPalette(),document[_0x29fc49(0x25b)](_0x29fc49(0x1c0))[_0x29fc49(0x26b)]=penSize,document['getElementById'](_0x29fc49(0x277))[_0x29fc49(0x26b)]=penMode,canvas[_0x29fc49(0x21c)]=handleMouseMove,canvas[_0x29fc49(0x25e)]=handleMouseUp,canvas[_0x29fc49(0x18b)]=handleMouseUp,canvas[_0x29fc49(0x1c3)]=handleTouchStart,canvas['ontouchmove']=handleTouchMove,canvas[_0x29fc49(0x22e)]=handleTouchEnd,canvas[_0x29fc49(0x1c6)]=handleTouchEnd,canvas[_0x29fc49(0x24f)](_0x29fc49(0x1e8),handleTouchStart,{'passive':![]}),canvas[_0x29fc49(0x24f)]('touchmove',handleTouchMove,{'passive':![]}),canvas[_0x29fc49(0x24f)](_0x29fc49(0x235),handleTouchEnd,{'passive':![]}),canvas[_0x29fc49(0x24f)](_0x29fc49(0x269),handleTouchEnd,{'passive':![]}),idbGet(_0x29fc49(0x209))&&loadProjectFromIDB();};function drawGrid(_0x3c8c3d,_0x351181){const _0x25f313=a0_0x1fe732;ctx[_0x25f313(0x198)](),ctx[_0x25f313(0x224)]=_0x25f313(0x27d);for(let _0x5d226b=0x0;_0x5d226b<=_0x3c8c3d;_0x5d226b++){ctx[_0x25f313(0x26f)](),ctx[_0x25f313(0x189)](_0x5d226b*cellSize,0x0),ctx[_0x25f313(0x190)](_0x5d226b*cellSize,_0x351181*cellSize),ctx[_0x25f313(0x231)]();}for(let _0xcf2d18=0x0;_0xcf2d18<=_0x351181;_0xcf2d18++){ctx['beginPath'](),ctx['moveTo'](0x0,_0xcf2d18*cellSize),ctx['lineTo'](_0x3c8c3d*cellSize,_0xcf2d18*cellSize),ctx['stroke']();}ctx[_0x25f313(0x234)]();}function redrawAll(){const _0x418c3b=a0_0x1fe732;let _0x1dda2a=getCurrentProject(),_0x88359f=getCurrentFrame();canvas[_0x418c3b(0x21e)]=_0x1dda2a[_0x418c3b(0x21e)]*cellSize,canvas[_0x418c3b(0x1a9)]=_0x1dda2a[_0x418c3b(0x1a9)]*cellSize,ctx[_0x418c3b(0x19a)](0x0,0x0,canvas[_0x418c3b(0x21e)],canvas[_0x418c3b(0x1a9)]);for(let _0x5f38ea=0x0;_0x5f38ea<_0x88359f[_0x418c3b(0x1bf)][_0x418c3b(0x1f4)];_0x5f38ea++){ctx['drawImage'](_0x88359f[_0x418c3b(0x1bf)][_0x5f38ea],0x0,0x0);}drawGrid(_0x1dda2a['width'],_0x1dda2a[_0x418c3b(0x1a9)]);}function saveHistory(){const _0x5dc86d=a0_0x1fe732;let _0x20e1f0=getCurrentFrame(),_0x13e77c=_0x20e1f0[_0x5dc86d(0x185)][_0x20e1f0['activeLayer']];_0x13e77c[_0x5dc86d(0x228)](_0x20e1f0[_0x5dc86d(0x1bf)][_0x20e1f0['activeLayer']][_0x5dc86d(0x22c)]());if(_0x13e77c[_0x5dc86d(0x1f4)]>0x32)_0x13e77c[_0x5dc86d(0x1ff)]();_0x20e1f0[_0x5dc86d(0x1d2)][_0x20e1f0[_0x5dc86d(0x212)]]=[];}function undo(){const _0x38b919=a0_0x1fe732;let _0x26a61b=getCurrentFrame(),_0x3709c5=_0x26a61b[_0x38b919(0x185)][_0x26a61b['activeLayer']],_0x361fdf=_0x26a61b[_0x38b919(0x1d2)][_0x26a61b[_0x38b919(0x212)]];if(!_0x3709c5||_0x3709c5[_0x38b919(0x1f4)]<0x2)return;_0x361fdf[_0x38b919(0x228)](_0x3709c5['pop']());let _0x561f95=new Image();_0x561f95['onload']=()=>{const _0x22ff8f=_0x38b919;let _0x28d0bb=_0x26a61b[_0x22ff8f(0x1bf)][_0x26a61b['activeLayer']][_0x22ff8f(0x1b0)]('2d');_0x28d0bb[_0x22ff8f(0x19a)](0x0,0x0,_0x26a61b['layers'][_0x26a61b[_0x22ff8f(0x212)]][_0x22ff8f(0x21e)],_0x26a61b[_0x22ff8f(0x1bf)][_0x26a61b[_0x22ff8f(0x212)]][_0x22ff8f(0x1a9)]),_0x28d0bb[_0x22ff8f(0x15d)](_0x561f95,0x0,0x0),redrawAll();},_0x561f95['src']=_0x3709c5[_0x3709c5[_0x38b919(0x1f4)]-0x1];}function redo(){const _0x268eb6=a0_0x1fe732;let _0x3a0d98=getCurrentFrame(),_0x5bfb7f=_0x3a0d98[_0x268eb6(0x185)][_0x3a0d98[_0x268eb6(0x212)]],_0x20dfd8=_0x3a0d98[_0x268eb6(0x1d2)][_0x3a0d98[_0x268eb6(0x212)]];if(!_0x20dfd8||_0x20dfd8[_0x268eb6(0x1f4)]===0x0)return;let _0x4c67ee=_0x20dfd8['pop']();_0x5bfb7f['push'](_0x4c67ee);let _0x940a6e=new Image();_0x940a6e[_0x268eb6(0x1d8)]=()=>{const _0x4b2347=_0x268eb6;let _0x5c2ab2=_0x3a0d98['layers'][_0x3a0d98[_0x4b2347(0x212)]][_0x4b2347(0x1b0)]('2d');_0x5c2ab2[_0x4b2347(0x19a)](0x0,0x0,_0x3a0d98[_0x4b2347(0x1bf)][_0x3a0d98['activeLayer']][_0x4b2347(0x21e)],_0x3a0d98[_0x4b2347(0x1bf)][_0x3a0d98[_0x4b2347(0x212)]][_0x4b2347(0x1a9)]),_0x5c2ab2['drawImage'](_0x940a6e,0x0,0x0),redrawAll();},_0x940a6e[_0x268eb6(0x1af)]=_0x4c67ee;}function a0_0x3820(){const _0x3eff24=['layers','penSize','removeChild','#ff0000','ontouchstart','hidden','#palette-penMode','ontouchcancel','download','close','onchange','constructor','text','createElement','pen','eraser','image/png','none','type','layerRedoStacks','451240SUamqy','textContent','innerWidth','WebCodecs','onmousedown','onload','readonly','active','map','appendChild','forEach','error','replace','3416100nRRcxD','GIF','335261ODcjhO','.section-content','splice','onclick','oncomplete','#newProjName','touchstart','jpeg','selected','menu-toggle-btn','#000000','repeating-conic-gradient(#eee\x200%\x2025%,\x20#fff\x200%\x2050%)\x2050%\x20/\x2016px\x2016px','\x22\x20data-tool=\x22fill\x22\x20onclick=\x22setTool(\x27fill\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>format_color_fill</span>塗りつぶし</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20太さ:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penSize\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x221\x22','#c0c0c0','sidebar-open','\x22\x20style=\x22vertical-align:\x20middle;\x20width:70px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<span\x20id=\x22palette-alphaValue\x22>','removeEventListener','palette-penMode','length','left','input','keyval','#palette-alphaSlider','#444444','main-container','video/webm','putImageData','#0000ff','application/json','shift','fillStyle','boolean','delete','VideoEncoder','querySelector','revokeObjectURL','fillRect','fill','1931310eQdpwS','nezumi-projects','remove','open','.toggle-btn','colorPicker','(((.+)+)+)+$','layerCount','byteLength','palette-toolbar','activeLayer','image/apng','blur','readwrite','#palette-penSize','layer-thumb','span','#newProjW','title','onsuccess','onmousemove','onkeydown','width','image/','max','log','data','clear','strokeStyle','3627778JcOlSM','oninput','IndexedDBからの読み込みに失敗したチュー…','push','replaceWith','onerror','finished','toDataURL','3000','ontouchend','body','DOMContentLoaded','stroke','nezumi-sketch-db','touchmove','restore','touchend','palette-alphaSlider','getImageData','#808000','toString','canvas','UPNG','projects','filter','プロジェクトをIndexedDBに保存したチュー！','dataset','globalCompositeOperation','alphaValue','select','#ff69b4','activeFrame','frame-item','style','.palette-color','IndexedDBからプロジェクトを読み込んだチュー！','lib/gif.worker.js','保存データが見つからなかったチュー！','join','layer-item','alignItems','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>新しい画像のサイズ</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>名前:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22画像','addEventListener','fixed','changedTouches','toggle','stringify','rgba(','>1</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x222\x22','block','undefined','disabled','12BmnKGn','preventDefault','getElementById','image/jpeg','vp8','onmouseup','clientY','クリックで名前を編集','className','split','parse','alphaSlider','touches','<span\x20style=\x22font-size:13px;color:#888;\x22>透明</span>','has','#newProjCancelBtn','touchcancel','circle','value','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','top','round','beginPath','rgba(0,0,0,0.3)','>四角ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22circle\x22','\x20selected','parentNode','>2</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x223\x22','resize','layerList','penMode','163992Nvnrib','.tool-btn','layer-btn','div','nezumi-sketch.msketch','#ccc','100vw','3612213AnSTuz','GIFに変換できる画像がありません。','sidebar','put','project-btn','encode','drawImage','arc','objectStore','frames','name','floor','focus','flush','frameList','#008080','min','transaction','nezumi-sketch-save','\x22\x20data-tool=\x22pen\x22\x20onclick=\x22setTool(\x27pen\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>edit</span>ペン</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','then','center','#cccccc','addFrame','readAsText','querySelectorAll','ontouchmove','configure','result','project-name','target','getBoundingClientRect','ファイルの読み込みに失敗しました。','レイヤー','new-project-dialog','上に移動','color-palette','contains','#008000','projectList','number','jpg','isFinite','display','justifyContent','clientX','layerHistories','trim','activeProject','#800000','moveTo','このブラウザはWebCodecsによるWEBPアニメーションに対応していません。','onmouseleave','#newProjH','8vRUSsD','key','palette-penSize','lineTo','tool','.apng','click','.section.collapsible\x20.section-content','createObjectURL','flex','overflow','save','stopPropagation','clearRect','button','crossOrigin','パレットに色を追加','classList','保存に失敗したチュー:','innerHTML','#000080','href','zIndex','nezumi-animation','下に移動','project-item','touchAction','nezumi-animation.gif','height','abs','add','onblur','createObjectStore','menu-toggle-btn-close','src','getContext','all','color','\x22\x20data-tool=\x22eraser\x22\x20onclick=\x22setTool(\x27eraser\x27)\x22><span\x20class=\x22material-icons\x22\x20style=\x22vertical-align:\x20middle;\x22>delete</span>消しゴム</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<button\x20class=\x22tool-btn','webp','transparent','background','.webm','#00000000','#00ffff','square','#palette-toolbar\x20.tool-btn','\x20active','\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>幅:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>高さ:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>作成</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>キャンセル</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20','frame-thumb'];a0_0x3820=function(){return _0x3eff24;};return a0_0x3820();}function exportImage(_0x1f239b){const _0xd8a487=a0_0x1fe732;let _0xd669ad=getCurrentProject(),_0x2b2efb=_0xd669ad[_0xd8a487(0x160)],_0x1899bf=_0x1f239b===_0xd8a487(0x180)||_0x1f239b==='jpeg'?_0xd8a487(0x25c):_0xd8a487(0x21f)+_0x1f239b,_0x95dfb8=_0x2b2efb['length']>0x1,_0x353cbe=(_0xd669ad['name']||'nezumi-drawing')[_0xd8a487(0x1df)](/[\\/:*?"<>|]/g,'_');if(!_0x95dfb8){let _0x111b8c=document[_0xd8a487(0x1cc)]('canvas');_0x111b8c[_0xd8a487(0x21e)]=_0xd669ad[_0xd8a487(0x21e)]*cellSize,_0x111b8c[_0xd8a487(0x1a9)]=_0xd669ad[_0xd8a487(0x1a9)]*cellSize;let _0x1eb5d4=_0x111b8c[_0xd8a487(0x1b0)]('2d'),_0x438aea=getCurrentFrame();for(let _0x225fa0=0x0;_0x225fa0<_0x438aea[_0xd8a487(0x1bf)][_0xd8a487(0x1f4)];_0x225fa0++){_0x1eb5d4[_0xd8a487(0x15d)](_0x438aea[_0xd8a487(0x1bf)][_0x225fa0],0x0,0x0);}let _0x768d6a=document[_0xd8a487(0x1cc)]('a');_0x768d6a['download']=_0x353cbe+'.'+_0x1f239b,_0x1f239b===_0xd8a487(0x180)||_0x1f239b==='jpeg'?_0x768d6a[_0xd8a487(0x1a2)]=_0x111b8c['toDataURL'](_0x1899bf,0.92):_0x768d6a[_0xd8a487(0x1a2)]=_0x111b8c[_0xd8a487(0x22c)](_0x1899bf),_0x768d6a[_0xd8a487(0x193)]();}else{if(_0x1f239b===_0xd8a487(0x1b4)&&typeof window[_0xd8a487(0x1d6)]!==_0xd8a487(0x257))exportWebpAnimation(_0x2b2efb,_0xd669ad[_0xd8a487(0x21e)]*cellSize,_0xd669ad[_0xd8a487(0x1a9)]*cellSize,_0x353cbe);else for(let _0x4935f0=0x0;_0x4935f0<_0x2b2efb[_0xd8a487(0x1f4)];_0x4935f0++){let _0x1243d8=document['createElement'](_0xd8a487(0x23a));_0x1243d8[_0xd8a487(0x21e)]=_0xd669ad[_0xd8a487(0x21e)]*cellSize,_0x1243d8[_0xd8a487(0x1a9)]=_0xd669ad['height']*cellSize;let _0x3e1076=_0x1243d8[_0xd8a487(0x1b0)]('2d'),_0x4c2aef=_0x2b2efb[_0x4935f0];for(let _0x18da38=0x0;_0x18da38<_0x4c2aef['layers'][_0xd8a487(0x1f4)];_0x18da38++){_0x3e1076[_0xd8a487(0x15d)](_0x4c2aef[_0xd8a487(0x1bf)][_0x18da38],0x0,0x0);}let _0x47541d=document[_0xd8a487(0x1cc)]('a');_0x47541d[_0xd8a487(0x1c7)]=_0x353cbe+'-f'+(_0x4935f0+0x1)+'.'+_0x1f239b,_0x1f239b===_0xd8a487(0x180)||_0x1f239b===_0xd8a487(0x1e9)?_0x47541d[_0xd8a487(0x1a2)]=_0x1243d8[_0xd8a487(0x22c)](_0x1899bf,0.92):_0x47541d['href']=_0x1243d8[_0xd8a487(0x22c)](_0x1899bf),setTimeout(()=>_0x47541d[_0xd8a487(0x193)](),_0x4935f0*0x64);}}}async function exportWebpAnimation(_0x45bdbd,_0x1e6fad,_0x4451c0,_0x10fb17=a0_0x1fe732(0x1a4)){const _0x25211f=a0_0x1fe732;if(!window[_0x25211f(0x1d6)]||!window[_0x25211f(0x203)]){alert(_0x25211f(0x18a));return;}const _0x2244d2=[],_0x4543c7=new VideoEncoder({'output':_0x1de27a=>_0x2244d2[_0x25211f(0x228)](_0x1de27a),'error':_0x3d75d3=>console['error'](_0x3d75d3)});_0x4543c7[_0x25211f(0x172)]({'codec':_0x25211f(0x25d),'width':_0x1e6fad,'height':_0x4451c0,'framerate':0x5});for(let _0x3b4d2c=0x0;_0x3b4d2c<_0x45bdbd[_0x25211f(0x1f4)];_0x3b4d2c++){let _0xc54c81=document['createElement']('canvas');_0xc54c81[_0x25211f(0x21e)]=_0x1e6fad,_0xc54c81[_0x25211f(0x1a9)]=_0x4451c0;let _0x5775ba=_0xc54c81[_0x25211f(0x1b0)]('2d'),_0x66ffd7=_0x45bdbd[_0x3b4d2c];for(let _0x732875=0x0;_0x732875<_0x66ffd7['layers'][_0x25211f(0x1f4)];_0x732875++){_0x5775ba[_0x25211f(0x15d)](_0x66ffd7['layers'][_0x732875],0x0,0x0);}let _0x411bdc=await createImageBitmap(_0xc54c81);_0x4543c7[_0x25211f(0x15c)](_0x411bdc,{'keyFrame':!![],'duration':0xc8}),_0x411bdc['close']();}await _0x4543c7[_0x25211f(0x164)](),_0x4543c7[_0x25211f(0x1c8)]();const _0x55a964=new Blob(_0x2244d2['map'](_0x4d6b60=>_0x4d6b60[_0x25211f(0x210)]?_0x4d6b60:_0x4d6b60[_0x25211f(0x222)]),{'type':_0x25211f(0x1fb)}),_0x48ffaf=document[_0x25211f(0x1cc)]('a');_0x48ffaf['download']=_0x10fb17+_0x25211f(0x1b7),_0x48ffaf[_0x25211f(0x1a2)]=URL[_0x25211f(0x195)](_0x55a964),_0x48ffaf[_0x25211f(0x193)]();}function exportGif(){const _0x1c8dff=a0_0x1fe732;let _0x117237=getCurrentProject(),_0x32bd8f=_0x117237['frames'],_0x2da1d1=_0x117237[_0x1c8dff(0x21e)]*cellSize,_0x14de42=_0x117237[_0x1c8dff(0x1a9)]*cellSize;const _0x467256=_0x32bd8f['map'](_0x34ca80=>{const _0x1c32c7=_0x1c8dff;let _0x154064=document[_0x1c32c7(0x1cc)](_0x1c32c7(0x23a));_0x154064[_0x1c32c7(0x21e)]=_0x2da1d1,_0x154064[_0x1c32c7(0x1a9)]=_0x14de42;let _0x670a73=_0x154064[_0x1c32c7(0x1b0)]('2d');for(let _0x1d6d1b=0x0;_0x1d6d1b<_0x34ca80['layers'][_0x1c32c7(0x1f4)];_0x1d6d1b++){_0x670a73[_0x1c32c7(0x15d)](_0x34ca80[_0x1c32c7(0x1bf)][_0x1d6d1b],0x0,0x0);}return _0x154064[_0x1c32c7(0x22c)](_0x1c32c7(0x1cf));});Promise[_0x1c8dff(0x1b1)](_0x467256[_0x1c8dff(0x1db)](_0x4181fb=>{return new Promise(_0x2f22ce=>{const _0x41b159=a0_0x2317,_0x59e78b=new Image();_0x59e78b[_0x41b159(0x1af)]=_0x4181fb,_0x59e78b[_0x41b159(0x1d8)]=()=>_0x2f22ce(_0x59e78b);});}))[_0x1c8dff(0x16b)](_0x21096a=>{const _0x3e53e2=_0x1c8dff,_0x2e8882=_0x21096a[_0x3e53e2(0x23d)](_0x370ddc=>_0x370ddc[_0x3e53e2(0x21e)]>0x0&&_0x370ddc[_0x3e53e2(0x1a9)]>0x0);if(_0x2e8882[_0x3e53e2(0x1f4)]===0x0){alert(_0x3e53e2(0x280));return;}const _0x3ac6b0=(_0x117237[_0x3e53e2(0x161)]||_0x3e53e2(0x1a4))[_0x3e53e2(0x1df)](/[\\/:*?"<>|]/g,'_');convertToGIF(_0x2e8882,0x12c,_0x3ac6b0+'.gif');});}function exportApng(){const _0x14803a=a0_0x1fe732;let _0x2a67e1=getCurrentProject(),_0x201149=_0x2a67e1[_0x14803a(0x160)],_0x427128=_0x2a67e1[_0x14803a(0x21e)]*cellSize,_0x4bbae7=_0x2a67e1[_0x14803a(0x1a9)]*cellSize;const _0x387d87=_0x201149[_0x14803a(0x1db)](_0x4b676e=>{const _0x1c48fd=_0x14803a;let _0x141373=document['createElement'](_0x1c48fd(0x23a));_0x141373['width']=_0x427128,_0x141373[_0x1c48fd(0x1a9)]=_0x4bbae7;let _0x3c6614=_0x141373[_0x1c48fd(0x1b0)]('2d');for(let _0xf66d53=0x0;_0xf66d53<_0x4b676e['layers']['length'];_0xf66d53++){_0x3c6614[_0x1c48fd(0x15d)](_0x4b676e[_0x1c48fd(0x1bf)][_0xf66d53],0x0,0x0);}let _0x21b517=new Image();return _0x21b517[_0x1c48fd(0x1af)]=_0x141373[_0x1c48fd(0x22c)]('image/png'),_0x21b517;}),_0x552c0=(_0x2a67e1[_0x14803a(0x161)]||_0x14803a(0x1a4))['replace'](/[\\/:*?"<>|]/g,'_');convertToAPNG(_0x387d87,_0x427128,_0x4bbae7,0x12c,_0x552c0+_0x14803a(0x192));}const dbName=a0_0x1fe732(0x232),storeName=a0_0x1fe732(0x1f7);function openDB(){return new Promise((_0x889b11,_0x922a61)=>{const _0x38e5aa=a0_0x2317,_0x113085=indexedDB['open'](dbName,0x1);_0x113085['onupgradeneeded']=()=>{const _0x52cb61=a0_0x2317;_0x113085['result'][_0x52cb61(0x1ad)](storeName);},_0x113085[_0x38e5aa(0x21b)]=()=>_0x889b11(_0x113085[_0x38e5aa(0x173)]),_0x113085[_0x38e5aa(0x22a)]=()=>_0x922a61(_0x113085[_0x38e5aa(0x1de)]);});}async function idbSet(_0x36c643,_0x1ee1cd){const _0x2079f0=await openDB();return new Promise((_0x4075c4,_0x2a4e57)=>{const _0x459b4c=a0_0x2317,_0x2e4e68=_0x2079f0[_0x459b4c(0x168)](storeName,_0x459b4c(0x215));_0x2e4e68[_0x459b4c(0x15f)](storeName)[_0x459b4c(0x15a)](_0x1ee1cd,_0x36c643),_0x2e4e68[_0x459b4c(0x1e6)]=()=>_0x4075c4(),_0x2e4e68[_0x459b4c(0x22a)]=()=>_0x2a4e57(_0x2e4e68[_0x459b4c(0x1de)]);});}async function idbGet(_0x718fa2){const _0x269770=await openDB();return new Promise((_0x76b74f,_0x26497a)=>{const _0x1a03b0=a0_0x2317,_0x476995=_0x269770['transaction'](storeName,_0x1a03b0(0x1d9)),_0x4b1462=_0x476995[_0x1a03b0(0x15f)](storeName)['get'](_0x718fa2);_0x4b1462[_0x1a03b0(0x21b)]=()=>_0x76b74f(_0x4b1462[_0x1a03b0(0x173)]),_0x4b1462[_0x1a03b0(0x22a)]=()=>_0x26497a(_0x4b1462[_0x1a03b0(0x1de)]);});}async function idbDelete(_0x47ca33){const _0x514e9a=await openDB();return new Promise((_0x3d56ad,_0x49be63)=>{const _0x53ea7d=a0_0x2317,_0x546e00=_0x514e9a[_0x53ea7d(0x168)](storeName,'readwrite');_0x546e00['objectStore'](storeName)[_0x53ea7d(0x202)](_0x47ca33),_0x546e00[_0x53ea7d(0x1e6)]=()=>_0x3d56ad(),_0x546e00[_0x53ea7d(0x22a)]=()=>_0x49be63(_0x546e00['error']);});}async function idbClear(){const _0x37be64=await openDB();return new Promise((_0x10ce9b,_0x3cdd51)=>{const _0x5234c1=a0_0x2317,_0x3ad0b1=_0x37be64['transaction'](storeName,_0x5234c1(0x215));_0x3ad0b1['objectStore'](storeName)[_0x5234c1(0x223)](),_0x3ad0b1['oncomplete']=()=>_0x10ce9b(),_0x3ad0b1[_0x5234c1(0x22a)]=()=>_0x3cdd51(_0x3ad0b1[_0x5234c1(0x1de)]);});}function saveProjectFile(){const _0x52d673=a0_0x1fe732,_0x190913={'projects':projects[_0x52d673(0x1db)](_0x309a7c=>({'width':_0x309a7c['width'],'height':_0x309a7c[_0x52d673(0x1a9)],'name':_0x309a7c[_0x52d673(0x161)]||'','activeFrame':_0x309a7c[_0x52d673(0x244)],'frames':_0x309a7c[_0x52d673(0x160)][_0x52d673(0x1db)](_0x4994bf=>({'activeLayer':_0x4994bf[_0x52d673(0x212)],'layers':_0x4994bf[_0x52d673(0x1bf)][_0x52d673(0x1db)](_0x47fa8a=>_0x47fa8a[_0x52d673(0x22c)]())}))})),'activeProject':activeProject},_0x2cde77=new Blob([JSON[_0x52d673(0x253)](_0x190913)],{'type':'application/json'}),_0x323362=document[_0x52d673(0x1cc)]('a');_0x323362[_0x52d673(0x1c7)]=_0x52d673(0x27c),_0x323362['href']=URL[_0x52d673(0x195)](_0x2cde77),_0x323362[_0x52d673(0x193)]();}function saveProjectFile(){const _0xaa80b3=a0_0x1fe732,_0x3308df={'projects':projects[_0xaa80b3(0x1db)](_0x5c74eb=>({'width':_0x5c74eb[_0xaa80b3(0x21e)],'height':_0x5c74eb[_0xaa80b3(0x1a9)],'name':_0x5c74eb[_0xaa80b3(0x161)]||'','activeFrame':_0x5c74eb['activeFrame'],'frames':_0x5c74eb[_0xaa80b3(0x160)][_0xaa80b3(0x1db)](_0x5de73b=>({'activeLayer':_0x5de73b[_0xaa80b3(0x212)],'layers':_0x5de73b['layers'][_0xaa80b3(0x1db)](_0x1ab2e4=>_0x1ab2e4[_0xaa80b3(0x22c)]())}))})),'activeProject':activeProject},_0xeaa568=new Blob([JSON[_0xaa80b3(0x253)](_0x3308df)],{'type':_0xaa80b3(0x1fe)}),_0x2a5af6=document['createElement']('a');_0x2a5af6[_0xaa80b3(0x1c7)]='nezumi-sketch.msketch',_0x2a5af6[_0xaa80b3(0x1a2)]=URL['createObjectURL'](_0xeaa568),_0x2a5af6['click']();}async function saveProjectToIDB(){const _0x1ec811=a0_0x1fe732,_0x5512cc={'projects':projects[_0x1ec811(0x1db)](_0x84ca33=>({'width':_0x84ca33[_0x1ec811(0x21e)],'height':_0x84ca33[_0x1ec811(0x1a9)],'name':_0x84ca33[_0x1ec811(0x161)]||'','activeFrame':_0x84ca33['activeFrame'],'frames':_0x84ca33['frames'][_0x1ec811(0x1db)](_0x3bc5a3=>({'activeLayer':_0x3bc5a3[_0x1ec811(0x212)],'layers':_0x3bc5a3[_0x1ec811(0x1bf)][_0x1ec811(0x1db)](_0x51ab2c=>_0x51ab2c[_0x1ec811(0x22c)]())}))})),'activeProject':activeProject};try{await idbSet(_0x1ec811(0x169),_0x5512cc),console[_0x1ec811(0x221)](_0x1ec811(0x23e));}catch(_0x5f1672){console[_0x1ec811(0x1de)](_0x1ec811(0x19f),_0x5f1672);}}canvas['addEventListener']('click',()=>{saveProjectToIDB();});function loadProjectFile(_0x450a1f){const _0x5745e0=a0_0x1fe732,_0x3811d5=_0x450a1f[_0x5745e0(0x175)]['files'][0x0];if(!_0x3811d5)return;const _0x207463=new FileReader();_0x207463['onload']=function(_0x495c23){const _0x59da99=_0x5745e0;try{const _0x56cf43=JSON[_0x59da99(0x263)](_0x495c23[_0x59da99(0x175)][_0x59da99(0x173)]);projects=_0x56cf43[_0x59da99(0x23c)][_0x59da99(0x1db)]((_0x2328b5,_0x578101)=>{const _0x26b3c9=_0x59da99;let _0x289785=createProject(_0x2328b5['width'],_0x2328b5[_0x26b3c9(0x1a9)],_0x2328b5[_0x26b3c9(0x161)]||'画像'+(_0x578101+0x1));return _0x289785[_0x26b3c9(0x160)]=_0x2328b5[_0x26b3c9(0x160)][_0x26b3c9(0x1db)](_0x1e2b29=>{const _0x514d7e=_0x26b3c9;let _0x5de8e3={'layers':[],'activeLayer':_0x1e2b29[_0x514d7e(0x212)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x713e35=0x0;_0x713e35<_0x1e2b29['layers'][_0x514d7e(0x1f4)];_0x713e35++){let _0x383927=new Image();_0x383927[_0x514d7e(0x1af)]=_0x1e2b29[_0x514d7e(0x1bf)][_0x713e35];let _0x2c211a=document['createElement']('canvas');_0x2c211a[_0x514d7e(0x21e)]=_0x2328b5[_0x514d7e(0x21e)]*cellSize,_0x2c211a[_0x514d7e(0x1a9)]=_0x2328b5['height']*cellSize,_0x383927['onload']=()=>{const _0x58cd0f=_0x514d7e;let _0x2efe30=_0x2c211a['getContext']('2d');_0x2efe30[_0x58cd0f(0x19a)](0x0,0x0,_0x2c211a[_0x58cd0f(0x21e)],_0x2c211a[_0x58cd0f(0x1a9)]),_0x2efe30[_0x58cd0f(0x15d)](_0x383927,0x0,0x0);},_0x383927[_0x514d7e(0x1d8)](),_0x5de8e3['layers'][_0x514d7e(0x228)](_0x2c211a),_0x5de8e3[_0x514d7e(0x185)]['push']([]),_0x5de8e3['layerRedoStacks'][_0x514d7e(0x228)]([]);}return _0x5de8e3;}),_0x289785[_0x26b3c9(0x244)]=_0x2328b5[_0x26b3c9(0x244)],_0x289785[_0x26b3c9(0x161)]=_0x2328b5['name']||'画像'+(_0x578101+0x1),_0x289785;}),activeProject=_0x56cf43[_0x59da99(0x187)]||0x0,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();}catch(_0x16e8e6){alert(_0x59da99(0x177));}},_0x207463[_0x5745e0(0x16f)](_0x3811d5);}async function loadProjectFromIDB(){const _0x15d4df=a0_0x1fe732;try{const _0xc73703=await idbGet(_0x15d4df(0x169));if(!_0xc73703){alert(_0x15d4df(0x24a));return;}projects=_0xc73703['projects'][_0x15d4df(0x1db)]((_0x2c20d3,_0x56386d)=>{const _0x542955=_0x15d4df;let _0x2e0b2b=createProject(_0x2c20d3['width'],_0x2c20d3[_0x542955(0x1a9)],_0x2c20d3['name']||'画像'+(_0x56386d+0x1));return _0x2e0b2b[_0x542955(0x160)]=_0x2c20d3[_0x542955(0x160)][_0x542955(0x1db)](_0x549be4=>{const _0x2f9a87=_0x542955;let _0x1cde39={'layers':[],'activeLayer':_0x549be4[_0x2f9a87(0x212)],'layerHistories':[],'layerRedoStacks':[]};for(let _0x3ca59b=0x0;_0x3ca59b<_0x549be4[_0x2f9a87(0x1bf)]['length'];_0x3ca59b++){let _0x5f1e8e=new Image();_0x5f1e8e['src']=_0x549be4[_0x2f9a87(0x1bf)][_0x3ca59b];let _0x17856b=document[_0x2f9a87(0x1cc)](_0x2f9a87(0x23a));_0x17856b[_0x2f9a87(0x21e)]=_0x2c20d3[_0x2f9a87(0x21e)]*cellSize,_0x17856b[_0x2f9a87(0x1a9)]=_0x2c20d3[_0x2f9a87(0x1a9)]*cellSize,_0x5f1e8e[_0x2f9a87(0x1d8)]=()=>{const _0x5785e5=_0x2f9a87;let _0x2260d4=_0x17856b[_0x5785e5(0x1b0)]('2d');_0x2260d4[_0x5785e5(0x19a)](0x0,0x0,_0x17856b[_0x5785e5(0x21e)],_0x17856b['height']),_0x2260d4[_0x5785e5(0x15d)](_0x5f1e8e,0x0,0x0);},_0x1cde39['layers'][_0x2f9a87(0x228)](_0x17856b),_0x1cde39[_0x2f9a87(0x185)][_0x2f9a87(0x228)]([]),_0x1cde39[_0x2f9a87(0x1d2)]['push']([]);}return _0x1cde39;}),_0x2e0b2b[_0x542955(0x244)]=_0x2c20d3['activeFrame'],_0x2e0b2b[_0x542955(0x161)]=_0x2c20d3['name']||'画像'+(_0x56386d+0x1),_0x2e0b2b;}),activeProject=_0xc73703['activeProject']||0x0,await wait(0x64),updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll(),setTool('pen'),console['log'](_0x15d4df(0x248));}catch(_0x1d6371){alert(_0x15d4df(0x227)),console[_0x15d4df(0x1de)](_0x1d6371);}}function wait(_0x2f4ec3){return new Promise(_0x22ccd7=>setTimeout(_0x22ccd7,_0x2f4ec3));}function initCanvas(){const _0x6607ee=a0_0x1fe732,_0x31f247=parseInt(0x10),_0x328d4a=parseInt(0x10);let _0x5e085b=getCurrentProject();_0x5e085b[_0x6607ee(0x21e)]=_0x31f247,_0x5e085b[_0x6607ee(0x1a9)]=_0x328d4a,canvas[_0x6607ee(0x21e)]=_0x31f247*cellSize,canvas[_0x6607ee(0x1a9)]=_0x328d4a*cellSize,_0x5e085b[_0x6607ee(0x1bf)]=[],_0x5e085b[_0x6607ee(0x185)]=[],_0x5e085b[_0x6607ee(0x1d2)]=[];let _0x135e38=document[_0x6607ee(0x1cc)]('canvas');_0x135e38['width']=_0x31f247*cellSize,_0x135e38['height']=_0x328d4a*cellSize,_0x5e085b[_0x6607ee(0x1bf)]['push'](_0x135e38),_0x5e085b[_0x6607ee(0x185)][_0x6607ee(0x228)]([]),_0x5e085b['layerRedoStacks']['push']([]),_0x5e085b['activeLayer']=0x0,saveHistory(),updateFrameUI(),updateLayerUI(),redrawAll(),canvas[_0x6607ee(0x1d7)]=null,canvas[_0x6607ee(0x21c)]=null,canvas[_0x6607ee(0x25e)]=null,canvas[_0x6607ee(0x18b)]=null,canvas[_0x6607ee(0x1c3)]=null,canvas[_0x6607ee(0x171)]=null,canvas[_0x6607ee(0x22e)]=null,canvas[_0x6607ee(0x1c6)]=null,canvas[_0x6607ee(0x1f2)](_0x6607ee(0x1e8),handleTouchStart),canvas[_0x6607ee(0x1f2)]('touchmove',handleTouchMove),canvas[_0x6607ee(0x1f2)](_0x6607ee(0x235),handleTouchEnd),canvas['removeEventListener']('touchcancel',handleTouchEnd),canvas[_0x6607ee(0x1d7)]=handleMouseDown,canvas[_0x6607ee(0x21c)]=handleMouseMove,canvas[_0x6607ee(0x25e)]=handleMouseUp,canvas[_0x6607ee(0x18b)]=handleMouseUp,canvas[_0x6607ee(0x1c3)]=handleTouchStart,canvas[_0x6607ee(0x171)]=handleTouchMove,canvas['ontouchend']=handleTouchEnd,canvas[_0x6607ee(0x1c6)]=handleTouchEnd,canvas['addEventListener'](_0x6607ee(0x1e8),handleTouchStart,{'passive':![]}),canvas['addEventListener'](_0x6607ee(0x233),handleTouchMove,{'passive':![]}),canvas['addEventListener'](_0x6607ee(0x235),handleTouchEnd,{'passive':![]}),canvas[_0x6607ee(0x24f)]('touchcancel',handleTouchEnd,{'passive':![]});}function createPalette(){const _0x38761f=a0_0x1fe732,_0x85817c=document[_0x38761f(0x25b)](_0x38761f(0x17b));if(!_0x85817c)return;_0x85817c[_0x38761f(0x1a0)]='',PALETTE_COLORS[_0x38761f(0x1dd)]((_0x18b4f4,_0x174706)=>{const _0x483af7=_0x38761f,_0x5034c4=document[_0x483af7(0x1cc)]('button');_0x5034c4[_0x483af7(0x261)]='palette-color';_0x18b4f4===_0x483af7(0x1b5)||_0x18b4f4===_0x483af7(0x1b8)?(_0x5034c4[_0x483af7(0x246)]['background']=_0x483af7(0x1ed),_0x5034c4[_0x483af7(0x21a)]='透明',_0x5034c4['innerHTML']=_0x483af7(0x266)):(_0x5034c4[_0x483af7(0x246)]['background']=_0x18b4f4,_0x5034c4[_0x483af7(0x21a)]=_0x18b4f4);_0x5034c4[_0x483af7(0x1e5)]=()=>{const _0x11261f=_0x483af7;currentColor=_0x18b4f4,_0x18b4f4===_0x11261f(0x1b5)||_0x18b4f4===_0x11261f(0x1b8)?document['getElementById'](_0x11261f(0x20d))[_0x11261f(0x26b)]='#000000':document[_0x11261f(0x25b)](_0x11261f(0x20d))[_0x11261f(0x26b)]=_0x18b4f4,document['querySelectorAll'](_0x11261f(0x247))[_0x11261f(0x1dd)](_0x441c54=>_0x441c54[_0x11261f(0x19e)][_0x11261f(0x20a)](_0x11261f(0x1ea))),_0x5034c4['classList'][_0x11261f(0x1ab)](_0x11261f(0x1ea));};if(_0x174706!==0x0){const _0x19e1c5=document[_0x483af7(0x1cc)](_0x483af7(0x218));_0x19e1c5[_0x483af7(0x1d4)]='×',_0x19e1c5[_0x483af7(0x261)]='palette-del-btn',_0x19e1c5[_0x483af7(0x21a)]='この色をパレットから削除',_0x19e1c5[_0x483af7(0x1e5)]=_0xc75fc1=>{const _0xcda023=_0x483af7;_0xc75fc1[_0xcda023(0x199)](),PALETTE_COLORS['length']>0x2&&(PALETTE_COLORS['splice'](_0x174706,0x1),createPalette());},_0x5034c4['appendChild'](_0x19e1c5);}_0x85817c['appendChild'](_0x5034c4);});const _0x2a9b46=document[_0x38761f(0x1cc)](_0x38761f(0x19b));_0x2a9b46['className']='palette-add-btn',_0x2a9b46[_0x38761f(0x21a)]=_0x38761f(0x19d),_0x2a9b46['innerHTML']='+',_0x2a9b46[_0x38761f(0x1e5)]=_0x293d71=>{const _0x376d41=_0x38761f;_0x293d71[_0x376d41(0x199)]();const _0x583cbc=document[_0x376d41(0x1cc)](_0x376d41(0x1f6));_0x583cbc[_0x376d41(0x1d1)]=_0x376d41(0x1b2),_0x583cbc[_0x376d41(0x246)][_0x376d41(0x182)]=_0x376d41(0x1d0);let _0x36687a=![];_0x583cbc[_0x376d41(0x226)]=_0x37b489=>{const _0x546839=_0x376d41;!_0x36687a&&(PALETTE_COLORS[_0x546839(0x228)](_0x37b489[_0x546839(0x175)][_0x546839(0x26b)]),createPalette(),_0x36687a=!![],_0x583cbc[_0x546839(0x20a)]());},_0x583cbc['addEventListener']('blur',()=>{const _0x1dcdbf=_0x376d41;if(!_0x36687a)_0x583cbc[_0x1dcdbf(0x20a)]();}),_0x583cbc[_0x376d41(0x24f)](_0x376d41(0x193),_0x189d08=>_0x189d08[_0x376d41(0x199)]()),document[_0x376d41(0x22f)]['appendChild'](_0x583cbc),_0x583cbc['focus'](),_0x583cbc[_0x376d41(0x193)]();},_0x85817c[_0x38761f(0x1dc)](_0x2a9b46);let _0x4eb29d=document['getElementById'](_0x38761f(0x211));!_0x4eb29d&&(_0x4eb29d=document[_0x38761f(0x1cc)]('div'),_0x4eb29d['id']=_0x38761f(0x211),_0x4eb29d[_0x38761f(0x261)]='palette-toolbar',_0x85817c[_0x38761f(0x273)]['appendChild'](_0x4eb29d)),_0x4eb29d[_0x38761f(0x1a0)]=_0x38761f(0x26c)+(currentTool==='pen'?'\x20active':'')+_0x38761f(0x16a)+(currentTool===_0x38761f(0x1ce)?'\x20active':'')+_0x38761f(0x1b3)+(currentTool===_0x38761f(0x207)?'\x20active':'')+_0x38761f(0x1ee)+(penSize==0x1?'\x20selected':'')+_0x38761f(0x255)+(penSize==0x2?_0x38761f(0x272):'')+_0x38761f(0x274)+(penSize==0x3?'\x20selected':'')+'>3</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x224\x22'+(penSize==0x4?'\x20selected':'')+'>4</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<select\x20id=\x22palette-penMode\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<option\x20value=\x22square\x22'+(penMode==='square'?_0x38761f(0x272):'')+_0x38761f(0x271)+(penMode===_0x38761f(0x26a)?_0x38761f(0x272):'')+'>丸ペン</option>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</select>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20透明度:\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22range\x22\x20id=\x22palette-alphaSlider\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22'+Math[_0x38761f(0x26e)](currentAlpha*0x64)+_0x38761f(0x1f1)+Math[_0x38761f(0x26e)](currentAlpha*0x64)+'%</span>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</label>\x0a\x20\x20\x20\x20',_0x4eb29d[_0x38761f(0x204)](_0x38761f(0x216))[_0x38761f(0x1c9)]=_0x4a9284=>setPenSize(_0x4a9284['target'][_0x38761f(0x26b)]),_0x4eb29d[_0x38761f(0x204)](_0x38761f(0x1c5))['onchange']=_0x86319c=>setPenMode(_0x86319c[_0x38761f(0x175)][_0x38761f(0x26b)]),_0x4eb29d['querySelectorAll'](_0x38761f(0x279))[_0x38761f(0x1dd)](_0x5c0eb7=>{const _0x3aa471=_0x38761f;_0x5c0eb7[_0x3aa471(0x1e5)]=()=>setTool(_0x5c0eb7[_0x3aa471(0x23f)][_0x3aa471(0x191)]);}),_0x4eb29d['querySelector'](_0x38761f(0x1f8))[_0x38761f(0x226)]=_0x27beb8=>{const _0x66ef09=_0x38761f;setAlpha(_0x27beb8[_0x66ef09(0x175)][_0x66ef09(0x26b)]),_0x4eb29d[_0x66ef09(0x204)]('#palette-alphaValue')[_0x66ef09(0x1d4)]=_0x27beb8[_0x66ef09(0x175)][_0x66ef09(0x26b)]+'%';let _0x336f03=document[_0x66ef09(0x25b)](_0x66ef09(0x264)),_0x2fa9a4=document[_0x66ef09(0x25b)](_0x66ef09(0x241));if(_0x336f03)_0x336f03[_0x66ef09(0x26b)]=_0x27beb8['target'][_0x66ef09(0x26b)];if(_0x2fa9a4)_0x2fa9a4['textContent']=_0x27beb8['target'][_0x66ef09(0x26b)]+'%';};}function setAlpha(_0x42e57f){const _0x5e8f1d=a0_0x1fe732;let _0x2db1c6=Math[_0x5e8f1d(0x220)](0x0,Math[_0x5e8f1d(0x167)](0x64,parseInt(_0x42e57f,0xa)||0x0));currentAlpha=_0x2db1c6/0x64;let _0x194f67=document[_0x5e8f1d(0x25b)](_0x5e8f1d(0x264)),_0x5166d2=document[_0x5e8f1d(0x25b)](_0x5e8f1d(0x241));if(_0x194f67)_0x194f67[_0x5e8f1d(0x26b)]=_0x2db1c6;if(_0x5166d2)_0x5166d2[_0x5e8f1d(0x1d4)]=_0x2db1c6+'%';let _0x17b56d=document[_0x5e8f1d(0x25b)](_0x5e8f1d(0x236)),_0x398e80=document['getElementById']('palette-alphaValue');if(_0x17b56d)_0x17b56d['value']=_0x2db1c6;if(_0x398e80)_0x398e80[_0x5e8f1d(0x1d4)]=_0x2db1c6+'%';}document['addEventListener'](a0_0x1fe732(0x230),()=>{const _0x30ed99=a0_0x1fe732,_0xc85005=document[_0x30ed99(0x25b)](_0x30ed99(0x20d));_0xc85005&&(_0xc85005['oninput']=_0x5ecfeb=>{const _0x5e2857=_0x30ed99;currentColor=_0x5ecfeb[_0x5e2857(0x175)]['value'],document[_0x5e2857(0x170)](_0x5e2857(0x247))[_0x5e2857(0x1dd)](_0x5e6968=>_0x5e6968[_0x5e2857(0x19e)]['remove'](_0x5e2857(0x1ea)));});const _0x46e76d=document[_0x30ed99(0x25b)](_0x30ed99(0x264)),_0x1b1791=document[_0x30ed99(0x25b)](_0x30ed99(0x241));_0x46e76d&&_0x1b1791&&(_0x46e76d['oninput']=_0x13417a=>{const _0x5b8329=_0x30ed99;setAlpha(_0x13417a[_0x5b8329(0x175)][_0x5b8329(0x26b)]),_0x1b1791[_0x5b8329(0x1d4)]=_0x13417a['target']['value']+'%';let _0x527b97=document['getElementById'](_0x5b8329(0x236)),_0x54176a=document[_0x5b8329(0x25b)]('palette-alphaValue');if(_0x527b97)_0x527b97['value']=_0x13417a[_0x5b8329(0x175)][_0x5b8329(0x26b)];if(_0x54176a)_0x54176a[_0x5b8329(0x1d4)]=_0x13417a[_0x5b8329(0x175)][_0x5b8329(0x26b)]+'%';});});async function convertToGIF(_0x2cb9df,_0x5780b1=0xc8,_0x5381e3=a0_0x1fe732(0x1a8)){const _0x58005f=a0_0x1fe732,_0x34b184=new window[(_0x58005f(0x1e1))]({'workers':0x2,'quality':0xa,'workerScript':_0x58005f(0x249)});_0x2cb9df['forEach'](_0x28bd9e=>_0x34b184[_0x58005f(0x16e)](_0x28bd9e,{'delay':_0x5780b1})),_0x34b184['on'](_0x58005f(0x22b),_0x494b46=>{const _0x22e3ec=_0x58005f,_0x20f6b2=URL[_0x22e3ec(0x195)](_0x494b46),_0x1edddf=document[_0x22e3ec(0x1cc)]('a');_0x1edddf[_0x22e3ec(0x1a2)]=_0x20f6b2,_0x1edddf[_0x22e3ec(0x1c7)]=_0x5381e3,document[_0x22e3ec(0x22f)][_0x22e3ec(0x1dc)](_0x1edddf),_0x1edddf[_0x22e3ec(0x193)](),setTimeout(()=>{const _0x1d168f=_0x22e3ec;document['body'][_0x1d168f(0x1c1)](_0x1edddf),URL[_0x1d168f(0x205)](_0x20f6b2);},0x3e8);}),_0x34b184['render']();}function convertToAPNG(_0x166cf5,_0x5cf15b,_0x130d2a,_0x52d424=0xc8,_0x4044e4='nezumi-animation.apng'){const _0x2f921b=a0_0x1fe732,_0x21ca90=[],_0xfb8241=[],_0x154425=document[_0x2f921b(0x1cc)](_0x2f921b(0x23a));_0x154425[_0x2f921b(0x21e)]=_0x5cf15b,_0x154425['height']=_0x130d2a;const _0x38140a=_0x154425[_0x2f921b(0x1b0)]('2d');_0x166cf5['forEach'](_0x391715=>{const _0x353426=_0x2f921b;_0x38140a[_0x353426(0x19a)](0x0,0x0,_0x5cf15b,_0x130d2a),_0x38140a['drawImage'](_0x391715,0x0,0x0,_0x5cf15b,_0x130d2a);const _0x44152b=_0x38140a['getImageData'](0x0,0x0,_0x5cf15b,_0x130d2a)[_0x353426(0x222)]['buffer'];_0x21ca90[_0x353426(0x228)](_0x44152b),_0xfb8241[_0x353426(0x228)](_0x52d424);});const _0x546681=window[_0x2f921b(0x23b)][_0x2f921b(0x15c)](_0x21ca90,_0x5cf15b,_0x130d2a,0x0,_0xfb8241),_0x53ebc7=URL['createObjectURL'](new Blob([_0x546681],{'type':_0x2f921b(0x213)})),_0x2362d9=document[_0x2f921b(0x1cc)]('a');_0x2362d9['href']=_0x53ebc7,_0x2362d9[_0x2f921b(0x1c7)]=_0x4044e4,document[_0x2f921b(0x22f)][_0x2f921b(0x1dc)](_0x2362d9),_0x2362d9['click'](),setTimeout(()=>{const _0x648978=_0x2f921b;document['body'][_0x648978(0x1c1)](_0x2362d9),URL['revokeObjectURL'](_0x53ebc7);},0x3e8);}function a0_0x2317(_0x189e2f,_0x43dec5){const _0x40e23f=a0_0x3820();return a0_0x2317=function(_0x19124b,_0x5c68d5){_0x19124b=_0x19124b-0x159;let _0x382074=_0x40e23f[_0x19124b];return _0x382074;},a0_0x2317(_0x189e2f,_0x43dec5);}async function loadImages(_0x43c261){const _0x2a61a2=a0_0x1fe732,_0x55c5ef=await Promise[_0x2a61a2(0x1b1)](_0x43c261[_0x2a61a2(0x1db)](_0x37d26a=>{return new Promise(_0x21495f=>{const _0x186489=a0_0x2317,_0xa8a824=new Image();_0xa8a824[_0x186489(0x19c)]='anonymous',_0xa8a824[_0x186489(0x1af)]=_0x37d26a,_0xa8a824[_0x186489(0x1d8)]=()=>_0x21495f(_0xa8a824);});}));return _0x55c5ef;}function toggleSection(_0x2e1946){const _0x7310d9=a0_0x1fe732,_0x3a7d6e=document['getElementById'](_0x2e1946),_0x30e7fb=_0x3a7d6e[_0x7310d9(0x204)](_0x7310d9(0x1e3)),_0x3a25d8=_0x3a7d6e[_0x7310d9(0x204)](_0x7310d9(0x20c));_0x30e7fb['style'][_0x7310d9(0x182)]===_0x7310d9(0x1d0)?(_0x30e7fb[_0x7310d9(0x246)]['display']='',_0x3a25d8[_0x7310d9(0x1d4)]='▼'):(_0x30e7fb[_0x7310d9(0x246)][_0x7310d9(0x182)]=_0x7310d9(0x1d0),_0x3a25d8[_0x7310d9(0x1d4)]='▲');}document[a0_0x1fe732(0x24f)](a0_0x1fe732(0x230),()=>{const _0x5511d8=a0_0x1fe732;document[_0x5511d8(0x170)](_0x5511d8(0x194))[_0x5511d8(0x1dd)](_0x14f388=>_0x14f388[_0x5511d8(0x246)][_0x5511d8(0x182)]=''),document[_0x5511d8(0x170)]('.section.collapsible\x20.toggle-btn')[_0x5511d8(0x1dd)](_0x51bc0e=>_0x51bc0e[_0x5511d8(0x1d4)]='▼');}),window['addEventListener'](a0_0x1fe732(0x275),updateMenuBtnDisplay),document[a0_0x1fe732(0x24f)]('DOMContentLoaded',updateMenuBtnDisplay);function toggleSideMenu(_0x3578e3){const _0x2778f8=a0_0x1fe732,_0x312de4=document[_0x2778f8(0x25b)](_0x2778f8(0x159)),_0x5f50d4=document[_0x2778f8(0x25b)](_0x2778f8(0x1fa)),_0x213494=document[_0x2778f8(0x25b)]('menu-toggle-btn'),_0x5c5d23=document['getElementById'](_0x2778f8(0x1ae)),_0x3c6ab5=_0x312de4['classList'][_0x2778f8(0x17c)]('open');let _0x4262a6=typeof _0x3578e3===_0x2778f8(0x201)?_0x3578e3:!_0x3c6ab5;_0x4262a6?(_0x312de4[_0x2778f8(0x19e)][_0x2778f8(0x1ab)](_0x2778f8(0x20b)),_0x5f50d4[_0x2778f8(0x19e)]['add']('sidebar-open'),document[_0x2778f8(0x22f)][_0x2778f8(0x246)][_0x2778f8(0x197)]=_0x2778f8(0x1c4),document[_0x2778f8(0x22f)][_0x2778f8(0x246)][_0x2778f8(0x1a7)]=_0x2778f8(0x1d0),window[_0x2778f8(0x1d5)]<=0x384&&(_0x5c5d23[_0x2778f8(0x246)][_0x2778f8(0x182)]=_0x2778f8(0x256),_0x213494['style']['display']='none')):(_0x312de4[_0x2778f8(0x19e)][_0x2778f8(0x20a)]('open'),_0x5f50d4[_0x2778f8(0x19e)]['remove'](_0x2778f8(0x1f0)),document[_0x2778f8(0x22f)][_0x2778f8(0x246)][_0x2778f8(0x197)]='',document[_0x2778f8(0x22f)][_0x2778f8(0x246)][_0x2778f8(0x1a7)]='',window[_0x2778f8(0x1d5)]<=0x384&&(_0x5c5d23[_0x2778f8(0x246)]['display']=_0x2778f8(0x1d0),_0x213494[_0x2778f8(0x246)]['display']=_0x2778f8(0x256)));}function updateMenuBtnDisplay(){const _0x2fc878=a0_0x1fe732,_0x33a64a=document['getElementById'](_0x2fc878(0x159)),_0x45b0a6=document['getElementById'](_0x2fc878(0x1fa)),_0x446b08=document[_0x2fc878(0x25b)]('menu-toggle-btn'),_0x59645b=document[_0x2fc878(0x25b)]('menu-toggle-btn-close');window[_0x2fc878(0x1d5)]>0x384?(_0x33a64a[_0x2fc878(0x19e)][_0x2fc878(0x20a)]('open'),_0x45b0a6[_0x2fc878(0x19e)][_0x2fc878(0x20a)](_0x2fc878(0x1f0)),_0x59645b['style'][_0x2fc878(0x182)]=_0x2fc878(0x1d0),_0x446b08['style'][_0x2fc878(0x182)]=_0x2fc878(0x1d0),document[_0x2fc878(0x22f)][_0x2fc878(0x246)][_0x2fc878(0x197)]='',document[_0x2fc878(0x22f)][_0x2fc878(0x246)][_0x2fc878(0x1a7)]=''):_0x33a64a[_0x2fc878(0x19e)][_0x2fc878(0x17c)](_0x2fc878(0x20b))?(_0x59645b[_0x2fc878(0x246)][_0x2fc878(0x182)]=_0x2fc878(0x256),_0x446b08[_0x2fc878(0x246)][_0x2fc878(0x182)]=_0x2fc878(0x1d0)):(_0x59645b[_0x2fc878(0x246)][_0x2fc878(0x182)]=_0x2fc878(0x1d0),_0x446b08[_0x2fc878(0x246)][_0x2fc878(0x182)]=_0x2fc878(0x256));}document[a0_0x1fe732(0x24f)](a0_0x1fe732(0x193),function(_0x2cb73e){const _0x98951c=a0_0x1fe732;if(window[_0x98951c(0x1d5)]>0x384)return;const _0x104e8e=document[_0x98951c(0x25b)](_0x98951c(0x159)),_0x57ed53=document['getElementById'](_0x98951c(0x1fa)),_0x2fe8de=document[_0x98951c(0x25b)](_0x98951c(0x1eb)),_0x149926=document[_0x98951c(0x25b)](_0x98951c(0x1ae));!_0x104e8e[_0x98951c(0x17c)](_0x2cb73e[_0x98951c(0x175)])&&_0x2cb73e[_0x98951c(0x175)]!==_0x2fe8de&&_0x2cb73e[_0x98951c(0x175)]!==_0x149926&&(_0x104e8e[_0x98951c(0x19e)]['remove'](_0x98951c(0x20b)),_0x57ed53[_0x98951c(0x19e)]['remove'](_0x98951c(0x1f0)),_0x149926[_0x98951c(0x246)][_0x98951c(0x182)]=_0x98951c(0x1d0),_0x2fe8de['style'][_0x98951c(0x182)]='block',document[_0x98951c(0x22f)][_0x98951c(0x246)][_0x98951c(0x197)]='',document[_0x98951c(0x22f)][_0x98951c(0x246)][_0x98951c(0x1a7)]='');});