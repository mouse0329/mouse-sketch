(function(_0x280bd3,_0x53583f){const _0x34b1a5=_0x5c5c,_0x3e68ae=_0x280bd3();while(!![]){try{const _0x31c294=-parseInt(_0x34b1a5(0x20a))/0x1+parseInt(_0x34b1a5(0x22a))/0x2*(-parseInt(_0x34b1a5(0x1ef))/0x3)+parseInt(_0x34b1a5(0x1ec))/0x4+parseInt(_0x34b1a5(0x1da))/0x5+parseInt(_0x34b1a5(0x234))/0x6+-parseInt(_0x34b1a5(0x1fa))/0x7+parseInt(_0x34b1a5(0x25d))/0x8;if(_0x31c294===_0x53583f)break;else _0x3e68ae['push'](_0x3e68ae['shift']());}catch(_0x51b557){_0x3e68ae['push'](_0x3e68ae['shift']());}}}(_0x4f13,0xd1778));const _0x212141=(function(){let _0x8b608b=!![];return function(_0x24d0a7,_0x2cd4b1){const _0x3fc1d1=_0x8b608b?function(){if(_0x2cd4b1){const _0x4f680e=_0x2cd4b1['apply'](_0x24d0a7,arguments);return _0x2cd4b1=null,_0x4f680e;}}:function(){};return _0x8b608b=![],_0x3fc1d1;};}()),_0x4d71ce=_0x212141(this,function(){const _0x5178e5=_0x5c5c;return _0x4d71ce[_0x5178e5(0x1c2)]()['search']('(((.+)+)+)+$')[_0x5178e5(0x1c2)]()[_0x5178e5(0x214)](_0x4d71ce)[_0x5178e5(0x1d5)](_0x5178e5(0x1eb));});function _0x4f13(){const _0x4959bc=['3000','ÈÄèÊòé\x20/\x200%','translate','8169119WHoSZm','none','translate(','selected','inline-block','activeLayer','#000000','#newProjCancelBtn','100vh','currentColorInfoText','position','width','span','layerCount','#dlgCancelBtn','alignItems','1206526jwUEVA','‰∏ã„Å´ÁßªÂãï','100vw','add','frame-btn','touchAction','zIndex','drawImage','createElement','.section-content','constructor','length','layer-actions','documentElement','innerHTML','layer-item','innerWidth','transparent','layer-btn','disabled','menu-toggle-btn-close','className','createObjectStore','#dlgOkBtn','div','style','main-container','textContent','„Ç≥„Éû)','#newProjH','min','data-theme','507622XRPRwe','layer-info','layer-label','active','preventDefault','inset','üëÅÔ∏è‚Äçüó®Ô∏è','body','objectStoreNames','top','6054738bACLgU','absolute','stopPropagation','.palette-color','canvas','toolsToggleBtn','\x20/\x20','offsetCells','onupgradeneeded','block','rgba(0,0,0,0.3)','project-btn','open','getContext','contains','\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:#fff;padding:18px;border-radius:8px;min-width:260px;text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin:0\x200\x208px\x200;\x22>Ëâ≤„Å®ÈÄèÊòé„ÇíÈÅ∏Êäû</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:8px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<input\x20type=\x22color\x22\x20id=\x22dlgColor\x22\x20value=\x22','center','„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíË§áË£Ω','globalAlpha','onerror','left','\x20active','frame-item','#dlgAlpha','layer-thumb\x20large','color-dialog','\x20ÈÄèÊòéÂ∫¶','8px','layers','sidebar-open','touchend','classList','transform','trim','result','\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÈÄèÊòéÂ∫¶(0-100):\x20<input\x20type=\x22number\x22\x20id=\x22dlgAlpha\x22\x20min=\x220\x22\x20max=\x22100\x22\x20value=\x22','forEach','appendChild','layer-btn\x20layer-vis-btn','.toggle-btn','touchcancel','15546896NVPHHm','floor','toString','project-name','new-project-dialog','button','createDocumentFragment','value','IndexedDB\x20„ÅÆ„Çπ„Éà„Ç¢„ÅåÂ≠òÂú®„Åó„Å™„ÅÑ„Åü„ÇÅÂÜç‰ΩúÊàê„ÅåÂøÖË¶Å„Åß„Åô','#dlgColor','borderRadius','click','\x0a\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22background:var(--surface);\x20border-radius:10px;\x20box-shadow:0\x202px\x2016px\x20#0003;\x20padding:28px\x2032px;\x20min-width:240px;\x20text-align:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<h3\x20style=\x22margin-top:0;\x22>Êñ∞„Åó„ÅÑÁîªÂÉè„ÅÆ„Çµ„Ç§„Ç∫</h3>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂêçÂâç:\x20<input\x20id=\x22newProjName\x22\x20type=\x22text\x22\x20maxlength=\x2232\x22\x20value=\x22ÁîªÂÉè','sidebar','warn','name','abs','title','#dlgTransparentBtn','projectList','frame-thumb','search','light','getElementById','round','menu-toggle-btn','3737160htmlLu','overflow','querySelectorAll','hidden','addEventListener','dark','#newProjName','‰∏ä„Å´ÁßªÂãï','visible','layer-row','frames','background','height','ÈùûË°®Á§∫„Å´„Åô„Çã','#newProjOkBtn','remove','px,\x20','(((.+)+)+)+$','3202628bVfEcd','currentColorSwatch','activeFrame','15MnqSAA','isArray','querySelector','justifyContent','onclick','#newProjW','Ë°®Á§∫„Åô„Çã','display'];_0x4f13=function(){return _0x4959bc;};return _0x4f13();}_0x4d71ce();function updateCurrentColorSwatch(){const _0x2d92d4=_0x5c5c,_0x18abec=document[_0x2d92d4(0x1d7)](_0x2d92d4(0x1ed));if(!_0x18abec)return;const _0x441ddf=document[_0x2d92d4(0x1d7)](_0x2d92d4(0x203));_0x18abec[_0x2d92d4(0x218)]='',_0x18abec[_0x2d92d4(0x223)][_0x2d92d4(0x204)]='relative',_0x18abec[_0x2d92d4(0x223)][_0x2d92d4(0x1db)]=_0x2d92d4(0x1dd);let _0x5e0dc2=document['createElement']('div');_0x5e0dc2[_0x2d92d4(0x223)][_0x2d92d4(0x204)]=_0x2d92d4(0x235),_0x5e0dc2[_0x2d92d4(0x223)][_0x2d92d4(0x22f)]='0',_0x5e0dc2[_0x2d92d4(0x223)][_0x2d92d4(0x1ca)]=_0x2d92d4(0x24f),_0x5e0dc2[_0x2d92d4(0x223)][_0x2d92d4(0x1e5)]='repeating-conic-gradient(#bbb\x200%\x2025%,\x20#444\x200%\x2050%)\x2050%\x20/\x2016px\x2016px';let _0x246d83=document[_0x2d92d4(0x212)](_0x2d92d4(0x222));_0x246d83[_0x2d92d4(0x223)]['position']=_0x2d92d4(0x235),_0x246d83['style'][_0x2d92d4(0x22f)]='0',_0x246d83[_0x2d92d4(0x223)]['borderRadius']=_0x2d92d4(0x24f);const _0x31e52c=Math[_0x2d92d4(0x1d8)]((currentAlpha||0x0)*0x64);if(currentColor===_0x2d92d4(0x21b)||currentAlpha===0x0){_0x246d83[_0x2d92d4(0x223)]['background']='none',_0x18abec[_0x2d92d4(0x1d1)]='ÈÄèÊòé';if(_0x441ddf)_0x441ddf[_0x2d92d4(0x225)]=_0x2d92d4(0x1f8);}else{_0x246d83[_0x2d92d4(0x223)][_0x2d92d4(0x1e5)]=hexToRgbaCss(currentColor,currentAlpha),_0x18abec[_0x2d92d4(0x1d1)]=currentAlpha<0x1?currentColor+_0x2d92d4(0x24e)+_0x31e52c+'%':currentColor;if(_0x441ddf)_0x441ddf[_0x2d92d4(0x225)]=currentColor+_0x2d92d4(0x23a)+_0x31e52c+'%';}_0x18abec['appendChild'](_0x5e0dc2),_0x18abec[_0x2d92d4(0x259)](_0x246d83);}function updateProjectUI(){const _0x1d9d99=_0x5c5c,_0x2c0ccd=document['getElementById'](_0x1d9d99(0x1d3));_0x2c0ccd[_0x1d9d99(0x218)]='';for(let _0x220038=0x0;_0x220038<projects[_0x1d9d99(0x215)];_0x220038++){const _0x1eaa78=document[_0x1d9d99(0x212)](_0x1d9d99(0x222));_0x1eaa78[_0x1d9d99(0x21f)]='project-item'+(_0x220038===activeProject?_0x1d9d99(0x249):''),_0x1eaa78['onclick']=()=>{activeProject=_0x220038,updateProjectUI(),updateFrameUI(),updateLayerUI(),redrawAll();},_0x1eaa78['oncontextmenu']=_0x3fbbeb=>{const _0xe07d60=_0x1d9d99;_0x3fbbeb[_0xe07d60(0x22e)](),showRenameProjectDialog(_0x220038);};let _0x2f31f8=null;const _0x4e3048=()=>{_0x2f31f8=setTimeout(()=>{showRenameProjectDialog(_0x220038);},0x258);},_0x29ebff=()=>{if(_0x2f31f8)clearTimeout(_0x2f31f8);_0x2f31f8=null;};_0x1eaa78[_0x1d9d99(0x1de)]('touchstart',_0x4e3048,{'passive':!![]}),_0x1eaa78[_0x1d9d99(0x1de)](_0x1d9d99(0x252),_0x29ebff,{'passive':!![]}),_0x1eaa78['addEventListener'](_0x1d9d99(0x25c),_0x29ebff,{'passive':!![]});const _0x73d7b2=document[_0x1d9d99(0x212)](_0x1d9d99(0x206));_0x73d7b2[_0x1d9d99(0x21f)]=_0x1d9d99(0x1c3),_0x73d7b2['textContent']=projects[_0x220038][_0x1d9d99(0x1cf)]||'ÁîªÂÉè'+(_0x220038+0x1),_0x73d7b2[_0x1d9d99(0x1d1)]='„ÇØ„É™„ÉÉ„ÇØ„ÅßÂêçÂâç„ÇíÁ∑®ÈõÜ',_0x73d7b2['onclick']=_0x20ef60=>{const _0x535d6d=_0x1d9d99;_0x20ef60[_0x535d6d(0x236)](),editProjectName(_0x220038,_0x73d7b2);},_0x1eaa78[_0x1d9d99(0x259)](_0x73d7b2);const _0x28eb85=document['createElement'](_0x1d9d99(0x1c5));_0x28eb85[_0x1d9d99(0x225)]='ÂâäÈô§',_0x28eb85[_0x1d9d99(0x21f)]=_0x1d9d99(0x23f),_0x28eb85[_0x1d9d99(0x21d)]=projects['length']===0x1,_0x28eb85['onclick']=_0x276d64=>{const _0x4f269d=_0x1d9d99;_0x276d64[_0x4f269d(0x236)](),removeProjectAt(_0x220038);},_0x1eaa78[_0x1d9d99(0x259)](_0x28eb85),_0x2c0ccd[_0x1d9d99(0x259)](_0x1eaa78);}document[_0x1d9d99(0x1d7)]('projectCount')[_0x1d9d99(0x225)]='('+projects[_0x1d9d99(0x215)]+'Êûö)';}function showRenameProjectDialog(_0x26c761){const _0xcc7426=_0x5c5c,_0x187d43=projects[_0x26c761],_0x83b4d3=_0x187d43&&_0x187d43['name']?_0x187d43[_0xcc7426(0x1cf)]:'ÁîªÂÉè'+(_0x26c761+0x1),_0x1c8552=prompt('Êñ∞„Åó„ÅÑÂêçÂâç„ÇíÂÖ•Âäõ',_0x83b4d3);if(_0x1c8552==null)return;const _0x21cd4e=_0x1c8552['trim']();projects[_0x26c761][_0xcc7426(0x1cf)]=_0x21cd4e||_0x83b4d3,updateProjectUI();}function _0x5c5c(_0x4dbf75,_0x7cdcec){_0x4dbf75=_0x4dbf75-0x1c2;const _0x36e6fb=_0x4f13();let _0x4d71ce=_0x36e6fb[_0x4dbf75];return _0x4d71ce;}function showNewProjectDialog(_0x4ba259){const _0x232357=_0x5c5c;let _0xcb4c5b=document[_0x232357(0x1d7)](_0x232357(0x1c4));if(_0xcb4c5b)_0xcb4c5b[_0x232357(0x1e9)]();const _0x5b3117=document[_0x232357(0x212)](_0x232357(0x222));_0x5b3117['id']=_0x232357(0x1c4),_0x5b3117[_0x232357(0x223)][_0x232357(0x204)]='fixed',_0x5b3117[_0x232357(0x223)]['left']='0',_0x5b3117[_0x232357(0x223)][_0x232357(0x233)]='0',_0x5b3117[_0x232357(0x223)][_0x232357(0x205)]=_0x232357(0x20c),_0x5b3117[_0x232357(0x223)][_0x232357(0x1e6)]='100vh',_0x5b3117[_0x232357(0x223)][_0x232357(0x1e5)]=_0x232357(0x23e),_0x5b3117[_0x232357(0x223)]['display']='flex',_0x5b3117['style'][_0x232357(0x209)]=_0x232357(0x244),_0x5b3117['style'][_0x232357(0x1f2)]=_0x232357(0x244),_0x5b3117['style'][_0x232357(0x210)]=_0x232357(0x1f7),_0x5b3117[_0x232357(0x218)]=_0x232357(0x1cc)+(projects['length']+0x1)+'\x22\x20style=\x22width:120px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22margin-bottom:12px;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label>ÂπÖ:\x20<input\x20id=\x22newProjW\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<label\x20style=\x22margin-left:12px;\x22>È´ò„Åï:\x20<input\x20id=\x22newProjH\x22\x20type=\x22number\x22\x20min=\x221\x22\x20max=\x22256\x22\x20value=\x2216\x22\x20style=\x22width:60px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjOkBtn\x22>‰ΩúÊàê</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22newProjCancelBtn\x22\x20style=\x22margin-left:12px;\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20',document[_0x232357(0x231)][_0x232357(0x259)](_0x5b3117),_0x5b3117[_0x232357(0x1f1)](_0x232357(0x1e8))['onclick']=()=>{const _0x7f760f=_0x232357,_0x1ecd9b=parseInt(_0x5b3117[_0x7f760f(0x1f1)](_0x7f760f(0x1f4))[_0x7f760f(0x1c7)],0xa),_0x57abd8=parseInt(_0x5b3117[_0x7f760f(0x1f1)](_0x7f760f(0x227))['value'],0xa),_0x5345b2=_0x5b3117[_0x7f760f(0x1f1)](_0x7f760f(0x1e0))[_0x7f760f(0x1c7)][_0x7f760f(0x255)]();_0x5b3117[_0x7f760f(0x1e9)]();if(_0x4ba259)_0x4ba259(_0x1ecd9b,_0x57abd8,_0x5345b2);},_0x5b3117[_0x232357(0x1f1)](_0x232357(0x201))[_0x232357(0x1f3)]=()=>{const _0x27ba66=_0x232357;_0x5b3117[_0x27ba66(0x1e9)]();};}function updateFrameUI(){const _0x27433e=_0x5c5c,_0x2d710c=document[_0x27433e(0x1d7)]('frameList'),_0x1ec389=getCurrentProject();if(!_0x1ec389||!_0x1ec389[_0x27433e(0x1e4)])return;_0x2d710c['innerHTML']='';const _0xac9a87=document[_0x27433e(0x1c6)](),_0xbb13cc=_0x1ec389[_0x27433e(0x1e4)][_0x27433e(0x215)],_0x408a8b=0x40;for(let _0x408f29=0x0;_0x408f29<_0xbb13cc;_0x408f29++){const _0x2c0d40=document[_0x27433e(0x212)](_0x27433e(0x222));_0x2c0d40[_0x27433e(0x21f)]=_0x27433e(0x24a)+(_0x408f29===_0x1ec389['activeFrame']?_0x27433e(0x249):''),_0x2c0d40[_0x27433e(0x1f3)]=()=>{const _0xd5fead=_0x27433e;_0x1ec389[_0xd5fead(0x1ee)]=_0x408f29,updateFrameUI(),updateLayerUI(),redrawAll();};if(_0xbb13cc<=_0x408a8b||Math[_0x27433e(0x1d0)](_0x408f29-_0x1ec389['activeFrame'])<=0x10){const _0x3f9092=document[_0x27433e(0x212)](_0x27433e(0x238));_0x3f9092['className']=_0x27433e(0x1d4),_0x3f9092['width']=0x20,_0x3f9092[_0x27433e(0x1e6)]=0x20;let _0x28667b=_0x3f9092[_0x27433e(0x241)]('2d',{'willReadFrequently':!![]});_0x28667b['clearRect'](0x0,0x0,0x20,0x20);const _0x48f361=_0x1ec389['frames'][_0x408f29];if(_0x48f361&&Array[_0x27433e(0x1f0)](_0x48f361[_0x27433e(0x250)]))for(let _0x27c41a=0x0;_0x27c41a<_0x48f361[_0x27433e(0x250)][_0x27433e(0x215)];_0x27c41a++){const _0x20c70a=_0x48f361[_0x27433e(0x250)][_0x27c41a];_0x20c70a&&_0x20c70a[_0x27433e(0x238)]&&_0x28667b[_0x27433e(0x211)](_0x20c70a[_0x27433e(0x238)],0x0,0x0,_0x3f9092[_0x27433e(0x205)],_0x3f9092[_0x27433e(0x1e6)]);}_0x2c0d40[_0x27433e(0x259)](_0x3f9092);}const _0x3f07cc=document[_0x27433e(0x212)](_0x27433e(0x206));_0x3f07cc['textContent']='F'+(_0x408f29+0x1),_0x2c0d40[_0x27433e(0x259)](_0x3f07cc);const _0x3b679c=document[_0x27433e(0x212)](_0x27433e(0x1c5));_0x3b679c['textContent']='ÂâäÈô§',_0x3b679c[_0x27433e(0x21f)]=_0x27433e(0x20e),_0x3b679c['disabled']=_0x1ec389[_0x27433e(0x1e4)][_0x27433e(0x215)]===0x1,_0x3b679c['onclick']=_0x25a807=>{const _0x4b05b4=_0x27433e;_0x25a807[_0x4b05b4(0x236)](),removeFrameAt(_0x408f29);},_0x2c0d40[_0x27433e(0x259)](_0x3b679c),_0xac9a87['appendChild'](_0x2c0d40);}_0x2d710c['appendChild'](_0xac9a87),document[_0x27433e(0x1d7)]('frameCount')[_0x27433e(0x225)]='('+_0x1ec389[_0x27433e(0x1e4)][_0x27433e(0x215)]+_0x27433e(0x226);}function updateLayerUI(){const _0x10a911=_0x5c5c,{layers:_0x111e71,activeLayer:_0xb0794a}=getCurrentFrame();document[_0x10a911(0x1d7)](_0x10a911(0x207))[_0x10a911(0x225)]='('+_0x111e71[_0x10a911(0x215)]+'Êûö)';const _0x51f738=document[_0x10a911(0x1d7)]('layerList');_0x51f738[_0x10a911(0x218)]='';const _0x3c9c59=document[_0x10a911(0x1c6)](),_0x4f411e=_0x111e71[_0x10a911(0x215)],_0x531beb=0x40;for(let _0x39a941=_0x111e71[_0x10a911(0x215)]-0x1;_0x39a941>=0x0;_0x39a941--){const _0x77dc97=document['createElement']('div');_0x77dc97[_0x10a911(0x21f)]=_0x10a911(0x219)+(_0x39a941===_0xb0794a?'\x20active':''),_0x77dc97[_0x10a911(0x1f3)]=_0x371871=>{const _0x535189=_0x10a911;if(_0x371871['target'][_0x535189(0x253)]['contains'](_0x535189(0x21c)))return;getCurrentFrame()['activeLayer']=_0x39a941,updateLayerUI(),redrawAll();};const _0x271c1f=document['createElement'](_0x10a911(0x222));_0x271c1f['className']=_0x10a911(0x1e3);if(_0x4f411e<=_0x531beb||Math['abs'](_0x39a941-_0xb0794a)<=0x10){const _0x436524=document[_0x10a911(0x212)](_0x10a911(0x238));_0x436524['className']=_0x10a911(0x24c),_0x436524['width']=0x30,_0x436524['height']=0x30;const _0x791dfd=_0x436524[_0x10a911(0x241)]('2d');_0x791dfd['clearRect'](0x0,0x0,_0x436524[_0x10a911(0x205)],_0x436524[_0x10a911(0x1e6)]),_0x791dfd[_0x10a911(0x246)]=_0x111e71[_0x39a941][_0x10a911(0x1e2)]===![]?0.3:0x1;let _0x11079c=null;if(_0x111e71[_0x39a941]instanceof HTMLCanvasElement)_0x11079c=_0x111e71[_0x39a941];else _0x111e71[_0x39a941]['canvas']instanceof HTMLCanvasElement&&(_0x11079c=_0x111e71[_0x39a941][_0x10a911(0x238)]);_0x11079c&&_0x11079c['width']>0x0&&_0x11079c[_0x10a911(0x1e6)]>0x0?_0x791dfd[_0x10a911(0x211)](_0x11079c,0x0,0x0,_0x436524[_0x10a911(0x205)],_0x436524['height']):console[_0x10a911(0x1ce)]('ÊèèÁîª„Åß„Åç„Å™„ÅÑ„É¨„Ç§„É§„Éº„Åå„ÅÇ„Çä„Åæ„Åô„ÉÅ„É•„Éº',_0x111e71[_0x39a941]),_0x271c1f['appendChild'](_0x436524);}const _0x4d1dc1=document[_0x10a911(0x212)](_0x10a911(0x222));_0x4d1dc1[_0x10a911(0x21f)]=_0x10a911(0x22b);const _0x5d7f8a=document[_0x10a911(0x212)](_0x10a911(0x222));_0x5d7f8a[_0x10a911(0x225)]='„É¨„Ç§„É§„Éº'+(_0x39a941+0x1),_0x5d7f8a[_0x10a911(0x21f)]=_0x10a911(0x22c),_0x4d1dc1['appendChild'](_0x5d7f8a);const _0x3b5031=document[_0x10a911(0x212)](_0x10a911(0x222));_0x3b5031[_0x10a911(0x21f)]=_0x10a911(0x216);const _0x314091=document[_0x10a911(0x212)](_0x10a911(0x1c5));_0x314091[_0x10a911(0x21f)]=_0x10a911(0x25a),_0x314091[_0x10a911(0x1d1)]=_0x111e71[_0x39a941]['visible']===![]?_0x10a911(0x1f5):_0x10a911(0x1e7),_0x314091[_0x10a911(0x218)]=_0x111e71[_0x39a941][_0x10a911(0x1e2)]===![]?_0x10a911(0x230):'üëÅÔ∏è',_0x314091['onclick']=_0x15f2a2=>{const _0x4f623f=_0x10a911;_0x15f2a2[_0x4f623f(0x236)](),_0x111e71[_0x39a941][_0x4f623f(0x1e2)]=!_0x111e71[_0x39a941][_0x4f623f(0x1e2)],updateLayerUI(),redrawAll();},_0x3b5031[_0x10a911(0x259)](_0x314091);const _0x184815=document['createElement'](_0x10a911(0x1c5));_0x184815['className']=_0x10a911(0x21c),_0x184815[_0x10a911(0x225)]='Ë§áË£Ω',_0x184815[_0x10a911(0x1d1)]=_0x10a911(0x245),_0x184815['onclick']=_0x420798=>{const _0x3af52b=_0x10a911;_0x420798[_0x3af52b(0x236)](),duplicateLayerAt(_0x39a941);},_0x3b5031[_0x10a911(0x259)](_0x184815);const _0x3a5417=document[_0x10a911(0x212)]('button');_0x3a5417[_0x10a911(0x225)]='‚Üë',_0x3a5417[_0x10a911(0x21f)]=_0x10a911(0x21c),_0x3a5417[_0x10a911(0x1d1)]=_0x10a911(0x1e1),_0x3a5417[_0x10a911(0x21d)]=_0x39a941===_0x111e71['length']-0x1,_0x3a5417[_0x10a911(0x1f3)]=_0x36c98e=>{const _0x35add6=_0x10a911;_0x36c98e['stopPropagation']();if(_0x39a941<_0x111e71[_0x35add6(0x215)]-0x1)swapLayer(_0x39a941,_0x39a941+0x1);},_0x3b5031[_0x10a911(0x259)](_0x3a5417);const _0x5c02ee=document[_0x10a911(0x212)](_0x10a911(0x1c5));_0x5c02ee[_0x10a911(0x225)]='‚Üì',_0x5c02ee[_0x10a911(0x21f)]=_0x10a911(0x21c),_0x5c02ee['title']=_0x10a911(0x20b),_0x5c02ee[_0x10a911(0x21d)]=_0x39a941===0x0,_0x5c02ee['onclick']=_0x16466f=>{_0x16466f['stopPropagation']();if(_0x39a941>0x0)swapLayer(_0x39a941,_0x39a941-0x1);},_0x3b5031[_0x10a911(0x259)](_0x5c02ee);const _0x32fa00=document[_0x10a911(0x212)](_0x10a911(0x1c5));_0x32fa00['textContent']='ÂâäÈô§',_0x32fa00[_0x10a911(0x21f)]='layer-btn',_0x32fa00[_0x10a911(0x1d1)]='„Åì„ÅÆ„É¨„Ç§„É§„Éº„ÇíÂâäÈô§',_0x32fa00['disabled']=_0x111e71['length']===0x1,_0x32fa00[_0x10a911(0x1f3)]=_0x5c612a=>{const _0x5123ed=_0x10a911;_0x5c612a[_0x5123ed(0x236)](),removeLayerAt(_0x39a941);},_0x3b5031[_0x10a911(0x259)](_0x32fa00),_0x4d1dc1[_0x10a911(0x259)](_0x3b5031),_0x271c1f[_0x10a911(0x259)](_0x4d1dc1),_0x77dc97[_0x10a911(0x259)](_0x271c1f),_0x3c9c59[_0x10a911(0x259)](_0x77dc97);}_0x51f738[_0x10a911(0x259)](_0x3c9c59);}function toggleTheme(){const _0x471e12=_0x5c5c;applyTheme(document[_0x471e12(0x217)]['getAttribute'](_0x471e12(0x229))===_0x471e12(0x1df)?_0x471e12(0x1d6):_0x471e12(0x1df));}function openDB(){return new Promise((_0x1e03f4,_0x512ecf)=>{const _0x58c2d4=_0x5c5c,_0x3d213e=indexedDB[_0x58c2d4(0x240)](dbName,0x2);_0x3d213e[_0x58c2d4(0x23c)]=()=>{const _0x585b25=_0x58c2d4,_0x203896=_0x3d213e[_0x585b25(0x256)];!_0x203896[_0x585b25(0x232)][_0x585b25(0x242)](storeName)&&_0x203896[_0x585b25(0x220)](storeName);},_0x3d213e['onsuccess']=()=>{const _0x232005=_0x58c2d4,_0x19a55c=_0x3d213e[_0x232005(0x256)];if(!_0x19a55c[_0x232005(0x232)][_0x232005(0x242)](storeName)){_0x19a55c['close'](),indexedDB['deleteDatabase'](dbName),_0x512ecf(new Error(_0x232005(0x1c8)));return;}_0x1e03f4(_0x19a55c);},_0x3d213e[_0x58c2d4(0x247)]=()=>_0x512ecf(_0x3d213e['error']);});}function openColorDialog(){const _0x2af0c0=_0x5c5c;if(document[_0x2af0c0(0x1d7)](_0x2af0c0(0x24d)))return;const _0xcdbd1b=document['createElement']('div');_0xcdbd1b['id']='color-dialog',_0xcdbd1b[_0x2af0c0(0x223)][_0x2af0c0(0x204)]='fixed',_0xcdbd1b['style'][_0x2af0c0(0x248)]='0',_0xcdbd1b['style']['top']='0',_0xcdbd1b['style']['width']=_0x2af0c0(0x20c),_0xcdbd1b['style'][_0x2af0c0(0x1e6)]=_0x2af0c0(0x202),_0xcdbd1b[_0x2af0c0(0x223)][_0x2af0c0(0x1f6)]='flex',_0xcdbd1b[_0x2af0c0(0x223)][_0x2af0c0(0x209)]='center',_0xcdbd1b[_0x2af0c0(0x223)][_0x2af0c0(0x1f2)]=_0x2af0c0(0x244),_0xcdbd1b[_0x2af0c0(0x223)][_0x2af0c0(0x210)]='4000',_0xcdbd1b['style'][_0x2af0c0(0x1e5)]='rgba(0,0,0,0.25)',_0xcdbd1b[_0x2af0c0(0x218)]=_0x2af0c0(0x243)+(currentColor===_0x2af0c0(0x21b)?'#000000':currentColor)+_0x2af0c0(0x257)+Math[_0x2af0c0(0x1d8)](currentAlpha*0x64)+'\x22\x20style=\x22width:72px;\x22></label>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgTransparentBtn\x22\x20type=\x22button\x22\x20style=\x22margin-left:8px;\x22>ÈÄèÊòé</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<div\x20style=\x22display:flex;gap:8px;justify-content:center;\x22>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgOkBtn\x22>OK</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20<button\x20id=\x22dlgCancelBtn\x22>„Ç≠„É£„É≥„Çª„É´</button>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20\x20</div>\x0a\x20\x20\x20\x20\x20\x20\x20\x20',document[_0x2af0c0(0x231)]['appendChild'](_0xcdbd1b),_0xcdbd1b[_0x2af0c0(0x1f1)](_0x2af0c0(0x1d2))[_0x2af0c0(0x1f3)]=()=>{const _0x4c8b4e=_0x2af0c0,_0x3f9798=_0xcdbd1b[_0x4c8b4e(0x1f1)]('#dlgAlpha');_0x3f9798[_0x4c8b4e(0x1c7)]=0x0,_0xcdbd1b[_0x4c8b4e(0x1f1)](_0x4c8b4e(0x1c9))[_0x4c8b4e(0x1c7)]=_0x4c8b4e(0x200);},_0xcdbd1b[_0x2af0c0(0x1f1)](_0x2af0c0(0x221))['onclick']=()=>{const _0x95dbd7=_0x2af0c0,_0x5a5185=_0xcdbd1b[_0x95dbd7(0x1f1)]('#dlgColor')[_0x95dbd7(0x1c7)],_0x1dd466=Math['max'](0x0,Math[_0x95dbd7(0x228)](0x64,parseInt(_0xcdbd1b['querySelector'](_0x95dbd7(0x24b))[_0x95dbd7(0x1c7)],0xa)||0x0));if(_0x1dd466===0x0){currentAlpha=0x0,currentColor=_0x95dbd7(0x21b);if(colorPicker)colorPicker[_0x95dbd7(0x1c7)]='#000000';}else{currentAlpha=_0x1dd466/0x64,currentColor=_0x5a5185;if(colorPicker)colorPicker[_0x95dbd7(0x1c7)]=_0x5a5185;}updateCurrentColorSwatch(),document[_0x95dbd7(0x1dc)](_0x95dbd7(0x237))[_0x95dbd7(0x258)](_0x48a2fd=>_0x48a2fd[_0x95dbd7(0x253)][_0x95dbd7(0x1e9)](_0x95dbd7(0x1fd))),_0xcdbd1b['remove']();},_0xcdbd1b['querySelector'](_0x2af0c0(0x208))[_0x2af0c0(0x1f3)]=()=>_0xcdbd1b[_0x2af0c0(0x1e9)](),_0xcdbd1b[_0x2af0c0(0x1de)](_0x2af0c0(0x1cb),_0x34f645=>{const _0x33e9ae=_0x2af0c0;if(_0x34f645['target']===_0xcdbd1b)_0xcdbd1b[_0x33e9ae(0x1e9)]();});}function updateLayerMove(_0x3770a6){const _0x217c00=_0x5c5c;if(!layerMoveState[_0x217c00(0x22d)])return;const _0x2d0160=getCanvasCoords(_0x3770a6),_0x189210={'x':Math[_0x217c00(0x25e)](_0x2d0160['x']/cellSize),'y':Math[_0x217c00(0x25e)](_0x2d0160['y']/cellSize)};layerMoveState[_0x217c00(0x23b)]['x']=_0x189210['x']-layerMoveState['startCell']['x'],layerMoveState[_0x217c00(0x23b)]['y']=_0x189210['y']-layerMoveState['startCell']['y'],redrawAll();const _0x38eb85=getCurrentFrame();if(!_0x38eb85)return;const _0x20ec21=_0x38eb85[_0x217c00(0x1ff)];if(_0x20ec21==null)return;ctx['save'](),ctx[_0x217c00(0x1f9)](layerMoveState[_0x217c00(0x23b)]['x']*cellSize,layerMoveState[_0x217c00(0x23b)]['y']*cellSize),ctx[_0x217c00(0x211)](_0x38eb85[_0x217c00(0x250)][_0x20ec21]['canvas'],0x0,0x0),ctx['restore']();}function toggleSection(_0x5986bc){const _0xf62321=_0x5c5c,_0x473d9b=document[_0xf62321(0x1d7)](_0x5986bc),_0x39d928=_0x473d9b['querySelector'](_0xf62321(0x213)),_0x507285=_0x473d9b[_0xf62321(0x1f1)](_0xf62321(0x25b));_0x39d928[_0xf62321(0x223)]['display']==='none'?(_0x39d928[_0xf62321(0x223)]['display']='',_0x507285['textContent']='‚ñº'):(_0x39d928[_0xf62321(0x223)]['display']=_0xf62321(0x1fb),_0x507285[_0xf62321(0x225)]='‚ñ≤');}function toggleSideMenu(_0x5b9418){const _0x27890d=_0x5c5c,_0x505221=document[_0x27890d(0x1d7)](_0x27890d(0x1cd)),_0x2d5228=document[_0x27890d(0x1d7)](_0x27890d(0x224)),_0x489799=document[_0x27890d(0x1d7)](_0x27890d(0x1d9)),_0x44fa61=document[_0x27890d(0x1d7)](_0x27890d(0x21e)),_0x94f989=_0x505221[_0x27890d(0x253)][_0x27890d(0x242)](_0x27890d(0x240));let _0x4a2a64=typeof _0x5b9418==='boolean'?_0x5b9418:!_0x94f989;_0x4a2a64?(_0x505221[_0x27890d(0x253)]['add'](_0x27890d(0x240)),_0x2d5228[_0x27890d(0x253)][_0x27890d(0x20d)](_0x27890d(0x251)),document[_0x27890d(0x231)][_0x27890d(0x223)][_0x27890d(0x1db)]=_0x27890d(0x1dd),document[_0x27890d(0x231)][_0x27890d(0x223)][_0x27890d(0x20f)]=_0x27890d(0x1fb),window[_0x27890d(0x21a)]<=0x384&&(_0x44fa61[_0x27890d(0x223)][_0x27890d(0x1f6)]=_0x27890d(0x23d),_0x489799[_0x27890d(0x223)][_0x27890d(0x1f6)]='none')):(_0x505221[_0x27890d(0x253)][_0x27890d(0x1e9)]('open'),_0x2d5228['classList']['remove'](_0x27890d(0x251)),document[_0x27890d(0x231)]['style'][_0x27890d(0x1db)]='',document[_0x27890d(0x231)][_0x27890d(0x223)]['touchAction']='',window['innerWidth']<=0x384&&(_0x44fa61[_0x27890d(0x223)]['display']=_0x27890d(0x1fb),_0x489799['style'][_0x27890d(0x1f6)]=_0x27890d(0x23d)));}function updateMenuBtnDisplay(){const _0x4df899=_0x5c5c,_0x43cbfb=document[_0x4df899(0x1d7)](_0x4df899(0x1cd)),_0x4c81e3=document[_0x4df899(0x1d7)](_0x4df899(0x224)),_0x115327=document['getElementById'](_0x4df899(0x1d9)),_0x99d5f2=document[_0x4df899(0x1d7)](_0x4df899(0x21e)),_0x5ba92a=document[_0x4df899(0x1d7)](_0x4df899(0x239));if(window[_0x4df899(0x21a)]>0x384){_0x43cbfb['classList'][_0x4df899(0x1e9)]('open'),_0x4c81e3['classList'][_0x4df899(0x1e9)](_0x4df899(0x251)),_0x99d5f2[_0x4df899(0x223)][_0x4df899(0x1f6)]='none',_0x115327[_0x4df899(0x223)][_0x4df899(0x1f6)]=_0x4df899(0x1fb);if(_0x5ba92a)_0x5ba92a[_0x4df899(0x223)]['display']=window[_0x4df899(0x21a)]>0x44c?_0x4df899(0x1fb):_0x4df899(0x1fe);document[_0x4df899(0x231)][_0x4df899(0x223)][_0x4df899(0x1db)]='',document['body']['style'][_0x4df899(0x20f)]='';}else{_0x43cbfb[_0x4df899(0x253)][_0x4df899(0x242)]('open')?(_0x99d5f2['style'][_0x4df899(0x1f6)]=_0x4df899(0x23d),_0x115327['style'][_0x4df899(0x1f6)]=_0x4df899(0x1fb)):(_0x99d5f2[_0x4df899(0x223)][_0x4df899(0x1f6)]=_0x4df899(0x1fb),_0x115327[_0x4df899(0x223)]['display']=_0x4df899(0x23d));if(_0x5ba92a)_0x5ba92a[_0x4df899(0x223)]['display']=_0x4df899(0x1fe);}}function updateTransform(){const _0x19fb01=_0x5c5c;canvas[_0x19fb01(0x223)][_0x19fb01(0x254)]=_0x19fb01(0x1fc)+posX+_0x19fb01(0x1ea)+posY+'px)\x20scale('+scale+')';}